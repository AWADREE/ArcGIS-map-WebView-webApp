const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/IdentityManager-6dnNf7m8.js","assets/substitute-B35M3rly.js","assets/ElevationLayer-BK1IM7Ys.js","assets/ArcGISCachedService-BeiVXs9q.js","assets/TileInfoTilemapCache-VVZHeeUP.js","assets/TilemapCache-BmP109OB.js","assets/ByteSizeUnit-BsxeN7wM.js","assets/layersCreator-DSuuUXZr.js","assets/portalLayers-CgbNLB8D.js","assets/associatedFeatureServiceUtils-B1JnKVdh.js","assets/fetchService-39_1FTsD.js","assets/arcgisLayers-DPynYPf-.js","assets/statsWorker-D7w9N5JQ.js","assets/utils-DrF-oFnm.js","assets/utils--6tNMwVT.js","assets/utils-B966V634.js","assets/ClassBreaksDefinition-CD9XWo9a.js","assets/geometryEngineWorker-Dlunx-y-.js","assets/geometryEngineJSON-CxL1fJRD.js","assets/geometryEngineBase-hma4TUJT.js","assets/json-Wa8cmqdu.js","assets/CSVSourceWorker-CbuBLk2d.js","assets/date-M6n_RqpC.js","assets/OptimizedFeature-DUj7o6ET.js","assets/FeatureStore-CoPihFaK.js","assets/featureConversionUtils-CjdjcvRf.js","assets/OptimizedFeatureSet-Blu9Ckm7.js","assets/BoundsStore-BUuICHCA.js","assets/PooledRBush-DQrBT-UV.js","assets/timeSupport-BHaiFWx3.js","assets/QueryEngine-BR8GWmKf.js","assets/WhereClause-DUnwkbdd.js","assets/TimeOnly-D1WxW24T.js","assets/QueryEngineCapabilities-CTDe3LlQ.js","assets/number-DV9oQQqT.js","assets/clientSideDefaults-CRTU1_Vj.js","assets/EdgeProcessingWorker-OcYg_pfN.js","assets/InterleavedLayout-BJWssR79.js","assets/BufferView-CulAeWtT.js","assets/types-D0PSWh4d.js","assets/Util-Csz4XzIe.js","assets/edgeProcessing-ua3kkEGf.js","assets/deduplicate-B7tTprzy.js","assets/Indices-CvPXwaA-.js","assets/VertexAttribute-BlT9lbVY.js","assets/enums-BlUEVwJR.js","assets/VertexElementDescriptor-BOD-G50G.js","assets/ElevationSamplerWorker-CpCt9gny.js","assets/MeshLocalVertexSpace-Dl2GgVjj.js","assets/vertexSpaceConversion-B1IUymPm.js","assets/mat3f64-q3fE-ZOt.js","assets/mat4f64-CSKppSlJ.js","assets/spatialReferenceEllipsoidUtils-DUm9TmwQ.js","assets/computeTranslationToOriginAndRotation-D4Ya8jUb.js","assets/meshVertexSpaceUtils-xQnNmShx.js","assets/vec3-Ddk0oj2g.js","assets/projection-CKYOTlX-.js","assets/DoubleArray-D8q86nwv.js","assets/vec4-BcS0_rIS.js","assets/FeatureServiceSnappingSourceWorker-CWImYPgv.js","assets/pbfQueryUtils-DGuoUNP-.js","assets/pbf-BbsZMhS8.js","assets/query-Cobf7Qwt.js","assets/GeoJSONSourceWorker-DR0PJrQE.js","assets/geojson-CucLvq8S.js","assets/sourceUtils-BqP3w1cF.js","assets/MemorySourceWorker-CYSHG7Nc.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-CI-vvKb0.js","assets/FeaturePipelineWorker-qwkLa5Zn.js","assets/definitions-Y_v3njP4.js","assets/AttributeStore-c9c3vlWu.js","assets/LabelMetric-Dea-z4Pm.js","assets/enums-BRXbslMp.js","assets/Texture-CqazhqFM.js","assets/Program-nKZuE_pH.js","assets/UpdateTracking2D-DhZ2KO-9.js","assets/BidiEngine-BwB1Df7c.js","assets/GeometryUtils-C5ej_iIV.js","assets/Rect-CUzevAry.js","assets/BindType-BmZEZMMh.js","assets/highlightReasons-M5sf-_ox.js","assets/tileUtils-B7X19rIS.js","assets/MeshWriterRegistry-CEZ_t7aA.js","assets/PieChartMeshWriter-RkPZu1GS.js","assets/TurboLine-D9hPdm1C.js","assets/earcut-DZgeeiHY.js","assets/constants-D5zmR9t2.js","assets/grouping-Dt1rAhnj.js","assets/ogcFeatureUtils-DKmK9B4G.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-hS1at7uu.js","assets/PointCloudWorker-DGX8Sm17.js","assets/quat-DiN_rtBW.js","assets/quatf64-Bdb9ZJJK.js","assets/vec3f32-nZdmKIgz.js","assets/PointCloudUniqueValueRenderer-C1J3lL_s.js","assets/I3SBinaryReader-DpMxCIs3.js","assets/orientedBoundingBox-lVHZOUum.js","assets/plane-PqI5-lCB.js","assets/RasterWorker-BwAnAF1p.js","assets/dataUtils-Cw9osOYh.js","assets/RasterSymbolizer-C38bnp8-.js","assets/PolynomialTransform-Csamfvwm.js","assets/rasterProjectionHelper-DI7O_FmZ.js","assets/SceneLayerSnappingSourceWorker-B-s3yNyV.js","assets/lineSegment-BFdvRqxe.js","assets/sphere-C67HcJZk.js","assets/SceneLayerWorker-DnKQKGU4.js","assets/I3SUtil-CTm-STW1.js","assets/floatRGBA-BRFohVRS.js","assets/NormalAttribute.glsl-DG9j9-A6.js","assets/interfaces-B8ge7Jg9.js","assets/WFSSourceWorker-BxB32E5Q.js","assets/wfsUtils-C0L3cp3z.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-CTf2i2DO.js","assets/enums-BRzLM11V.js","assets/config-MDUrh2eL.js","assets/StyleDefinition-BK3ROBTO.js","assets/SourceLayerData-W2LhkWzL.js","assets/StyleRepository-CY5EVlWd.js","assets/Popup-jG_htyxk.js","assets/AttachmentInfo-CFy0gMEd.js","assets/utils-BO5e-Om7.js","assets/executeQueryJSON-DEkgSvVh.js","assets/layerViewUtils-DaObYqcz.js","assets/arcadeUtils-6cUoAphG.js","assets/ImmutableArray-BPVd6ESQ.js","assets/webStyleSymbolUtils-2wX2V9BW.js","assets/devEnvironmentUtils-D6qIi8Ky.js","assets/geometryServiceUtils-tjEwd-Go.js","assets/project-BIF3CVEY.js","assets/webglDeps-BSGJdtVw.js","assets/NestedMap-DgiGbX8E.js","assets/ProgramTemplate-mscC1f_P.js","assets/mapViewDeps-BWar8D2q.js","assets/SDFHelper-DuCiy2yi.js","assets/Container-D0PztaTh.js","assets/WGLContainer-BC0iQaMO.js","assets/MagnifierPrograms-CwgfXhMv.js","assets/testSVGPremultipliedAlpha-CmC5xjO6.js","assets/RenderingContext-DfTx0WQO.js","assets/renderState-C37QfRey.js","assets/basicInterfaces-DngWxyLO.js","assets/doublePrecisionUtils-B0owpBza.js","assets/imageUtils-YthvLIWF.js","assets/rasterizingUtils-CmrKxrrD.js","assets/utils-8tzsWSaW.js","assets/FeatureCommandQueue-PV9oTGg2.js","assets/GraphicsView2D-CmZgFDxc.js","assets/normalizeUtilsSync-DkRPQ8Tq.js","assets/GraphicContainer-CM8ftvSy.js","assets/AGraphicContainer-CcurG_Y4.js","assets/TechniqueInstance-C4WEKqbk.js","assets/TileContainer-CZmS8-48.js","assets/requestImageUtils-BvkMA2bj.js","assets/TileLayerView2D-DX39MREu.js","assets/imageUtils-DFvbrzqW.js","assets/Bitmap-CoaeFYB-.js","assets/LayerView-yG8mn8ty.js","assets/HighlightGraphicContainer-B_9BVzPN.js","assets/RefreshableLayerView-CLETp-vq.js","assets/drapedUtils-D5ljWEtw.js","assets/scaleUtils-7F0M1FPC.js","assets/floorFilterUtils-DZ5C6FQv.js","assets/sublayerUtils-VrnR1jMh.js","assets/popupUtils-BDSwxzrO.js","assets/FeatureLayerView2D-LxxqMLPc.js","assets/timeSupport-BfHfMbeo.js","assets/HighlightCounter-BFkC22d_.js","assets/BaseDynamicLayerView2D-fbioCeA0.js","assets/BitmapContainer-C7oZxq9r.js","assets/ExportStrategy-DubPGn9G.js","assets/CatalogLayerView2D-jtwXpLHk.js","assets/CatalogDynamicGroupLayerView2D-DfzmJWS6.js","assets/CatalogFootprintLayerView2D-CEbtmZoo.js","assets/GeoRSSLayerView2D-DUJkBB5N.js","assets/GraphicsLayerView2D-Y0H6pqDf.js","assets/GroupLayerView2D-BBMB_kIl.js","assets/ImageryLayerView2D-D3UJDtu8.js","assets/RasterVFDisplayObject-DtKLj0qy.js","assets/ImageryTileLayerView2D-CRZ4xEnB.js","assets/multidimensionalUtils-Srv8Jiic.js","assets/rasterUtils-BT6Ao8JO.js","assets/RawBlockCache-B0hp33lR.js","assets/KMLLayerView2D-BnaRQvft.js","assets/kmlUtils-BPhOjaad.js","assets/KnowledgeGraphLayerView2D-Cbd07dvH.js","assets/MapImageLayerView2D-AJG5ctbo.js","assets/ExportImageParameters-CdwifHU2.js","assets/MapNotesLayerView2D-CmpMzXfA.js","assets/MediaLayerView2D-B7pPQkwP.js","assets/perspectiveUtils-DRatnYp-.js","assets/OverlayContainer-rSfNUJjq.js","assets/OGCFeatureLayerView2D-B6-X6jyh.js","assets/RouteLayerView2D-AKphZIjV.js","assets/Stop-DgMSJHiU.js","assets/StreamLayerView2D-Bmp5GVky.js","assets/SubtypeGroupLayerView2D-But_NiFr.js","assets/VectorTileLayerView2D-CC9iwBFE.js","assets/VideoLayerView2D-peSIkteJ.js","assets/TelemetryDisplay-CindzMko.js","assets/WMSLayerView2D-DadeSme9.js","assets/ExportWMSImageParameters-DwwIl84F.js","assets/WMTSLayerView2D-BLcHuyTG.js","assets/calcite-button-CKe3h7O7.js","assets/form-CWl_FiiH.js","assets/dom-CZeUaRuV.js","assets/guid-6Y9utpk5.js","assets/interactive-4-IBO74d.js","assets/label-DKhIsKyU.js","assets/component-RjiOe4wK.js","assets/loadable-v-Kjry1k.js","assets/t9n-DvRf6q_B.js","assets/observers-DGVoBN5-.js","assets/icon-CpOBOxkC.js","assets/loader-CqQTMPVF.js","assets/calcite-icon-BHuNyYWw.js","assets/editingSupport-C7uS14GR.js","assets/infoFor3D-DsOdlPuA.js","assets/layersLoader-BWKosyAC.js","assets/jsonContext-CikZz8Fc.js","assets/featureLayerUtils-uDAohEpW.js","assets/originUtils-D69mHv66.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw.js","assets/utils-CFuZZiO_.js","assets/saveAPIKeyUtils-sSvBnKRW.js","assets/saveUtils-BNbjgkAR.js","assets/FeatureLayerSource-DfVxPIVO.js","assets/MeshTransform-DnuMqOZ4.js","assets/QueryTask-CJQuLnhc.js","assets/executeForIds-e9TyXgxa.js","assets/executeQueryPBF-B7HIQmjF.js"])))=>i.map(i=>d[i]);
function aD(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in e)){const s=Object.getOwnPropertyDescriptor(i,n);s&&Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();function lD(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uD={exports:{}},w_={},cD={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0=Symbol.for("react.element"),SW=Symbol.for("react.portal"),$W=Symbol.for("react.fragment"),xW=Symbol.for("react.strict_mode"),TW=Symbol.for("react.profiler"),MW=Symbol.for("react.provider"),EW=Symbol.for("react.context"),IW=Symbol.for("react.forward_ref"),kW=Symbol.for("react.suspense"),OW=Symbol.for("react.memo"),PW=Symbol.for("react.lazy"),CC=Symbol.iterator;function CW(e){return e===null||typeof e!="object"?null:(e=CC&&e[CC]||e["@@iterator"],typeof e=="function"?e:null)}var dD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pD=Object.assign,hD={};function ef(e,t,r){this.props=e,this.context=t,this.refs=hD,this.updater=r||dD}ef.prototype.isReactComponent={};ef.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ef.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fD(){}fD.prototype=ef.prototype;function HI(e,t,r){this.props=e,this.context=t,this.refs=hD,this.updater=r||dD}var WI=HI.prototype=new fD;WI.constructor=HI;pD(WI,ef.prototype);WI.isPureReactComponent=!0;var RC=Array.isArray,mD=Object.prototype.hasOwnProperty,ZI={current:null},yD={key:!0,ref:!0,__self:!0,__source:!0};function gD(e,t,r){var i,n={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)mD.call(t,i)&&!yD.hasOwnProperty(i)&&(n[i]=t[i]);var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];n.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:D0,type:e,key:s,ref:o,props:n,_owner:ZI.current}}function RW(e,t){return{$$typeof:D0,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function JI(e){return typeof e=="object"&&e!==null&&e.$$typeof===D0}function AW(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var AC=/\/+/g;function m2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?AW(""+e.key):t.toString(36)}function t1(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case D0:case SW:o=!0}}if(o)return o=e,n=n(o),e=i===""?"."+m2(o,0):i,RC(n)?(r="",e!=null&&(r=e.replace(AC,"$&/")+"/"),t1(n,t,r,"",function(c){return c})):n!=null&&(JI(n)&&(n=RW(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(AC,"$&/")+"/")+e)),t.push(n)),1;if(o=0,i=i===""?".":i+":",RC(e))for(var a=0;a<e.length;a++){s=e[a];var l=i+m2(s,a);o+=t1(s,t,r,l,n)}else if(l=CW(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=i+m2(s,a++),o+=t1(s,t,r,l,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Lg(e,t,r){if(e==null)return e;var i=[],n=0;return t1(e,i,"","",function(s){return t.call(r,s,n++)}),i}function LW(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Si={current:null},r1={transition:null},NW={ReactCurrentDispatcher:Si,ReactCurrentBatchConfig:r1,ReactCurrentOwner:ZI};function vD(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:Lg,forEach:function(e,t,r){Lg(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Lg(e,function(){t++}),t},toArray:function(e){return Lg(e,function(t){return t})||[]},only:function(e){if(!JI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ve.Component=ef;Ve.Fragment=$W;Ve.Profiler=TW;Ve.PureComponent=HI;Ve.StrictMode=xW;Ve.Suspense=kW;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NW;Ve.act=vD;Ve.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=pD({},e.props),n=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=ZI.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)mD.call(t,l)&&!yD.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:D0,type:e.type,key:n,ref:s,props:i,_owner:o}};Ve.createContext=function(e){return e={$$typeof:EW,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:MW,_context:e},e.Consumer=e};Ve.createElement=gD;Ve.createFactory=function(e){var t=gD.bind(null,e);return t.type=e,t};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(e){return{$$typeof:IW,render:e}};Ve.isValidElement=JI;Ve.lazy=function(e){return{$$typeof:PW,_payload:{_status:-1,_result:e},_init:LW}};Ve.memo=function(e,t){return{$$typeof:OW,type:e,compare:t===void 0?null:t}};Ve.startTransition=function(e){var t=r1.transition;r1.transition={};try{e()}finally{r1.transition=t}};Ve.unstable_act=vD;Ve.useCallback=function(e,t){return Si.current.useCallback(e,t)};Ve.useContext=function(e){return Si.current.useContext(e)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(e){return Si.current.useDeferredValue(e)};Ve.useEffect=function(e,t){return Si.current.useEffect(e,t)};Ve.useId=function(){return Si.current.useId()};Ve.useImperativeHandle=function(e,t,r){return Si.current.useImperativeHandle(e,t,r)};Ve.useInsertionEffect=function(e,t){return Si.current.useInsertionEffect(e,t)};Ve.useLayoutEffect=function(e,t){return Si.current.useLayoutEffect(e,t)};Ve.useMemo=function(e,t){return Si.current.useMemo(e,t)};Ve.useReducer=function(e,t,r){return Si.current.useReducer(e,t,r)};Ve.useRef=function(e){return Si.current.useRef(e)};Ve.useState=function(e){return Si.current.useState(e)};Ve.useSyncExternalStore=function(e,t,r){return Si.current.useSyncExternalStore(e,t,r)};Ve.useTransition=function(){return Si.current.useTransition()};Ve.version="18.3.1";cD.exports=Ve;var ae=cD.exports;const wD=lD(ae),FW=aD({__proto__:null,default:wD},[ae]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DW=ae,jW=Symbol.for("react.element"),zW=Symbol.for("react.fragment"),VW=Object.prototype.hasOwnProperty,UW=DW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GW={key:!0,ref:!0,__self:!0,__source:!0};function bD(e,t,r){var i,n={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)VW.call(t,i)&&!GW.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:jW,type:e,key:s,ref:o,props:n,_owner:UW.current}}w_.Fragment=zW;w_.jsx=bD;w_.jsxs=bD;uD.exports=w_;var po=uD.exports,Sx={},_D={exports:{}},fn={},SD={exports:{}},$D={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,be){var Ee=K.length;K.push(be);e:for(;0<Ee;){var Ge=Ee-1>>>1,pt=K[Ge];if(0<n(pt,be))K[Ge]=be,K[Ee]=pt,Ee=Ge;else break e}}function r(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var be=K[0],Ee=K.pop();if(Ee!==be){K[0]=Ee;e:for(var Ge=0,pt=K.length,qi=pt>>>1;Ge<qi;){var lr=2*(Ge+1)-1,Bi=K[lr],Or=lr+1,Po=K[Or];if(0>n(Bi,Ee))Or<pt&&0>n(Po,Bi)?(K[Ge]=Po,K[Or]=Ee,Ge=Or):(K[Ge]=Bi,K[lr]=Ee,Ge=lr);else if(Or<pt&&0>n(Po,Ee))K[Ge]=Po,K[Or]=Ee,Ge=Or;else break e}}return be}function n(K,be){var Ee=K.sortIndex-be.sortIndex;return Ee!==0?Ee:K.id-be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,m=3,y=!1,g=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(K){for(var be=r(c);be!==null;){if(be.callback===null)i(c);else if(be.startTime<=K)i(c),be.sortIndex=be.expirationTime,t(l,be);else break;be=r(c)}}function E(K){if(v=!1,$(K),!g)if(r(l)!==null)g=!0,Xt(k);else{var be=r(c);be!==null&&Ie(E,be.startTime-K)}}function k(K,be){g=!1,v&&(v=!1,w(N),N=-1),y=!0;var Ee=m;try{for($(be),f=r(l);f!==null&&(!(f.expirationTime>be)||K&&!W());){var Ge=f.callback;if(typeof Ge=="function"){f.callback=null,m=f.priorityLevel;var pt=Ge(f.expirationTime<=be);be=e.unstable_now(),typeof pt=="function"?f.callback=pt:f===r(l)&&i(l),$(be)}else i(l);f=r(l)}if(f!==null)var qi=!0;else{var lr=r(c);lr!==null&&Ie(E,lr.startTime-be),qi=!1}return qi}finally{f=null,m=Ee,y=!1}}var M=!1,P=null,N=-1,j=5,G=-1;function W(){return!(e.unstable_now()-G<j)}function ie(){if(P!==null){var K=e.unstable_now();G=K;var be=!0;try{be=P(!0,K)}finally{be?me():(M=!1,P=null)}}else M=!1}var me;if(typeof _=="function")me=function(){_(ie)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,nt=ne.port2;ne.port1.onmessage=ie,me=function(){nt.postMessage(null)}}else me=function(){b(ie,0)};function Xt(K){P=K,M||(M=!0,me())}function Ie(K,be){N=b(function(){K(e.unstable_now())},be)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,Xt(k))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(K){switch(m){case 1:case 2:case 3:var be=3;break;default:be=m}var Ee=m;m=be;try{return K()}finally{m=Ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,be){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Ee=m;m=K;try{return be()}finally{m=Ee}},e.unstable_scheduleCallback=function(K,be,Ee){var Ge=e.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Ge+Ee:Ge):Ee=Ge,K){case 1:var pt=-1;break;case 2:pt=250;break;case 5:pt=1073741823;break;case 4:pt=1e4;break;default:pt=5e3}return pt=Ee+pt,K={id:h++,callback:be,priorityLevel:K,startTime:Ee,expirationTime:pt,sortIndex:-1},Ee>Ge?(K.sortIndex=Ee,t(c,K),r(l)===null&&K===r(c)&&(v?(w(N),N=-1):v=!0,Ie(E,Ee-Ge))):(K.sortIndex=pt,t(l,K),g||y||(g=!0,Xt(k))),K},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(K){var be=m;return function(){var Ee=m;m=be;try{return K.apply(this,arguments)}finally{m=Ee}}}})($D);SD.exports=$D;var qW=SD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BW=ae,dn=qW;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xD=new Set,qy={};function Od(e,t){Rh(e,t),Rh(e+"Capture",t)}function Rh(e,t){for(qy[e]=t,e=0;e<t.length;e++)xD.add(t[e])}var $a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$x=Object.prototype.hasOwnProperty,HW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LC={},NC={};function WW(e){return $x.call(NC,e)?!0:$x.call(LC,e)?!1:HW.test(e)?NC[e]=!0:(LC[e]=!0,!1)}function ZW(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function JW(e,t,r,i){if(t===null||typeof t>"u"||ZW(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $i(e,t,r,i,n,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jr[e]=new $i(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jr[t]=new $i(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jr[e]=new $i(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jr[e]=new $i(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jr[e]=new $i(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jr[e]=new $i(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jr[e]=new $i(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jr[e]=new $i(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jr[e]=new $i(e,5,!1,e.toLowerCase(),null,!1,!1)});var KI=/[\-:]([a-z])/g;function YI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(KI,YI);jr[t]=new $i(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(KI,YI);jr[t]=new $i(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(KI,YI);jr[t]=new $i(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jr[e]=new $i(e,1,!1,e.toLowerCase(),null,!1,!1)});jr.xlinkHref=new $i("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jr[e]=new $i(e,1,!1,e.toLowerCase(),null,!0,!0)});function QI(e,t,r,i){var n=jr.hasOwnProperty(t)?jr[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(JW(t,r,n,i)&&(r=null),i||n===null?WW(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Ra=BW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ng=Symbol.for("react.element"),Up=Symbol.for("react.portal"),Gp=Symbol.for("react.fragment"),XI=Symbol.for("react.strict_mode"),xx=Symbol.for("react.profiler"),TD=Symbol.for("react.provider"),MD=Symbol.for("react.context"),ek=Symbol.for("react.forward_ref"),Tx=Symbol.for("react.suspense"),Mx=Symbol.for("react.suspense_list"),tk=Symbol.for("react.memo"),El=Symbol.for("react.lazy"),ED=Symbol.for("react.offscreen"),FC=Symbol.iterator;function Cf(e){return e===null||typeof e!="object"?null:(e=FC&&e[FC]||e["@@iterator"],typeof e=="function"?e:null)}var zt=Object.assign,y2;function cm(e){if(y2===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);y2=t&&t[1]||""}return`
`+y2+e}var g2=!1;function v2(e,t){if(!e||g2)return"";g2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),s=i.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var l=`
`+n[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{g2=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?cm(e):""}function KW(e){switch(e.tag){case 5:return cm(e.type);case 16:return cm("Lazy");case 13:return cm("Suspense");case 19:return cm("SuspenseList");case 0:case 2:case 15:return e=v2(e.type,!1),e;case 11:return e=v2(e.type.render,!1),e;case 1:return e=v2(e.type,!0),e;default:return""}}function Ex(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gp:return"Fragment";case Up:return"Portal";case xx:return"Profiler";case XI:return"StrictMode";case Tx:return"Suspense";case Mx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case MD:return(e.displayName||"Context")+".Consumer";case TD:return(e._context.displayName||"Context")+".Provider";case ek:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tk:return t=e.displayName||null,t!==null?t:Ex(e.type)||"Memo";case El:t=e._payload,e=e._init;try{return Ex(e(t))}catch{}}return null}function YW(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ex(t);case 8:return t===XI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ou(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ID(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QW(e){var t=ID(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fg(e){e._valueTracker||(e._valueTracker=QW(e))}function kD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=ID(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Aw(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ix(e,t){var r=t.checked;return zt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function DC(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=ou(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function OD(e,t){t=t.checked,t!=null&&QI(e,"checked",t,!1)}function kx(e,t){OD(e,t);var r=ou(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ox(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ox(e,t.type,ou(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jC(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ox(e,t,r){(t!=="number"||Aw(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var dm=Array.isArray;function uh(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+ou(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Px(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return zt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zC(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Y(92));if(dm(r)){if(1<r.length)throw Error(Y(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ou(r)}}function PD(e,t){var r=ou(t.value),i=ou(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function VC(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function CD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?CD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dg,RD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Dg=Dg||document.createElement("div"),Dg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function By(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var dy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XW=["Webkit","ms","Moz","O"];Object.keys(dy).forEach(function(e){XW.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dy[t]=dy[e]})});function AD(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||dy.hasOwnProperty(e)&&dy[e]?(""+t).trim():t+"px"}function LD(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=AD(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var eZ=zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rx(e,t){if(t){if(eZ[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function Ax(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lx=null;function rk(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nx=null,ch=null,dh=null;function UC(e){if(e=V0(e)){if(typeof Nx!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=x_(t),Nx(e.stateNode,e.type,t))}}function ND(e){ch?dh?dh.push(e):dh=[e]:ch=e}function FD(){if(ch){var e=ch,t=dh;if(dh=ch=null,UC(e),t)for(e=0;e<t.length;e++)UC(t[e])}}function DD(e,t){return e(t)}function jD(){}var w2=!1;function zD(e,t,r){if(w2)return e(t,r);w2=!0;try{return DD(e,t,r)}finally{w2=!1,(ch!==null||dh!==null)&&(jD(),FD())}}function Hy(e,t){var r=e.stateNode;if(r===null)return null;var i=x_(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Y(231,t,typeof r));return r}var Fx=!1;if($a)try{var Rf={};Object.defineProperty(Rf,"passive",{get:function(){Fx=!0}}),window.addEventListener("test",Rf,Rf),window.removeEventListener("test",Rf,Rf)}catch{Fx=!1}function tZ(e,t,r,i,n,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(h){this.onError(h)}}var py=!1,Lw=null,Nw=!1,Dx=null,rZ={onError:function(e){py=!0,Lw=e}};function iZ(e,t,r,i,n,s,o,a,l){py=!1,Lw=null,tZ.apply(rZ,arguments)}function nZ(e,t,r,i,n,s,o,a,l){if(iZ.apply(this,arguments),py){if(py){var c=Lw;py=!1,Lw=null}else throw Error(Y(198));Nw||(Nw=!0,Dx=c)}}function Pd(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function VD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function GC(e){if(Pd(e)!==e)throw Error(Y(188))}function sZ(e){var t=e.alternate;if(!t){if(t=Pd(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return GC(n),e;if(s===i)return GC(n),t;s=s.sibling}throw Error(Y(188))}if(r.return!==i.return)r=n,i=s;else{for(var o=!1,a=n.child;a;){if(a===r){o=!0,r=n,i=s;break}if(a===i){o=!0,i=n,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,i=n;break}if(a===i){o=!0,i=s,r=n;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(r.alternate!==i)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?e:t}function UD(e){return e=sZ(e),e!==null?GD(e):null}function GD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=GD(e);if(t!==null)return t;e=e.sibling}return null}var qD=dn.unstable_scheduleCallback,qC=dn.unstable_cancelCallback,oZ=dn.unstable_shouldYield,aZ=dn.unstable_requestPaint,Kt=dn.unstable_now,lZ=dn.unstable_getCurrentPriorityLevel,ik=dn.unstable_ImmediatePriority,BD=dn.unstable_UserBlockingPriority,Fw=dn.unstable_NormalPriority,uZ=dn.unstable_LowPriority,HD=dn.unstable_IdlePriority,b_=null,go=null;function cZ(e){if(go&&typeof go.onCommitFiberRoot=="function")try{go.onCommitFiberRoot(b_,e,void 0,(e.current.flags&128)===128)}catch{}}var $s=Math.clz32?Math.clz32:hZ,dZ=Math.log,pZ=Math.LN2;function hZ(e){return e>>>=0,e===0?32:31-(dZ(e)/pZ|0)|0}var jg=64,zg=4194304;function pm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dw(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~n;a!==0?i=pm(a):(s&=o,s!==0&&(i=pm(s)))}else o=r&~n,o!==0?i=pm(o):s!==0&&(i=pm(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-$s(t),n=1<<r,i|=e[r],t&=~n;return i}function fZ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mZ(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-$s(s),a=1<<o,l=n[o];l===-1?(!(a&r)||a&i)&&(n[o]=fZ(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function jx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function WD(){var e=jg;return jg<<=1,!(jg&4194240)&&(jg=64),e}function b2(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function j0(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$s(t),e[t]=r}function yZ(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-$s(r),s=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~s}}function nk(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-$s(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var at=0;function ZD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var JD,sk,KD,YD,QD,zx=!1,Vg=[],Jl=null,Kl=null,Yl=null,Wy=new Map,Zy=new Map,Nl=[],gZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BC(e,t){switch(e){case"focusin":case"focusout":Jl=null;break;case"dragenter":case"dragleave":Kl=null;break;case"mouseover":case"mouseout":Yl=null;break;case"pointerover":case"pointerout":Wy.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zy.delete(t.pointerId)}}function Af(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=V0(t),t!==null&&sk(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function vZ(e,t,r,i,n){switch(t){case"focusin":return Jl=Af(Jl,e,t,r,i,n),!0;case"dragenter":return Kl=Af(Kl,e,t,r,i,n),!0;case"mouseover":return Yl=Af(Yl,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return Wy.set(s,Af(Wy.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,Zy.set(s,Af(Zy.get(s)||null,e,t,r,i,n)),!0}return!1}function XD(e){var t=Dc(e.target);if(t!==null){var r=Pd(t);if(r!==null){if(t=r.tag,t===13){if(t=VD(r),t!==null){e.blockedOn=t,QD(e.priority,function(){KD(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function i1(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Vx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Lx=i,r.target.dispatchEvent(i),Lx=null}else return t=V0(r),t!==null&&sk(t),e.blockedOn=r,!1;t.shift()}return!0}function HC(e,t,r){i1(e)&&r.delete(t)}function wZ(){zx=!1,Jl!==null&&i1(Jl)&&(Jl=null),Kl!==null&&i1(Kl)&&(Kl=null),Yl!==null&&i1(Yl)&&(Yl=null),Wy.forEach(HC),Zy.forEach(HC)}function Lf(e,t){e.blockedOn===t&&(e.blockedOn=null,zx||(zx=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,wZ)))}function Jy(e){function t(n){return Lf(n,e)}if(0<Vg.length){Lf(Vg[0],e);for(var r=1;r<Vg.length;r++){var i=Vg[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Jl!==null&&Lf(Jl,e),Kl!==null&&Lf(Kl,e),Yl!==null&&Lf(Yl,e),Wy.forEach(t),Zy.forEach(t),r=0;r<Nl.length;r++)i=Nl[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Nl.length&&(r=Nl[0],r.blockedOn===null);)XD(r),r.blockedOn===null&&Nl.shift()}var ph=Ra.ReactCurrentBatchConfig,jw=!0;function bZ(e,t,r,i){var n=at,s=ph.transition;ph.transition=null;try{at=1,ok(e,t,r,i)}finally{at=n,ph.transition=s}}function _Z(e,t,r,i){var n=at,s=ph.transition;ph.transition=null;try{at=4,ok(e,t,r,i)}finally{at=n,ph.transition=s}}function ok(e,t,r,i){if(jw){var n=Vx(e,t,r,i);if(n===null)O2(e,t,i,zw,r),BC(e,i);else if(vZ(n,e,t,r,i))i.stopPropagation();else if(BC(e,i),t&4&&-1<gZ.indexOf(e)){for(;n!==null;){var s=V0(n);if(s!==null&&JD(s),s=Vx(e,t,r,i),s===null&&O2(e,t,i,zw,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else O2(e,t,i,null,r)}}var zw=null;function Vx(e,t,r,i){if(zw=null,e=rk(i),e=Dc(e),e!==null)if(t=Pd(e),t===null)e=null;else if(r=t.tag,r===13){if(e=VD(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zw=e,null}function ej(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lZ()){case ik:return 1;case BD:return 4;case Fw:case uZ:return 16;case HD:return 536870912;default:return 16}default:return 16}}var zl=null,ak=null,n1=null;function tj(){if(n1)return n1;var e,t=ak,r=t.length,i,n="value"in zl?zl.value:zl.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var o=r-e;for(i=1;i<=o&&t[r-i]===n[s-i];i++);return n1=n.slice(e,1<i?1-i:void 0)}function s1(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ug(){return!0}function WC(){return!1}function mn(e){function t(r,i,n,s,o){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ug:WC,this.isPropagationStopped=WC,this}return zt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ug)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ug)},persist:function(){},isPersistent:Ug}),t}var tf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lk=mn(tf),z0=zt({},tf,{view:0,detail:0}),SZ=mn(z0),_2,S2,Nf,__=zt({},z0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uk,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nf&&(Nf&&e.type==="mousemove"?(_2=e.screenX-Nf.screenX,S2=e.screenY-Nf.screenY):S2=_2=0,Nf=e),_2)},movementY:function(e){return"movementY"in e?e.movementY:S2}}),ZC=mn(__),$Z=zt({},__,{dataTransfer:0}),xZ=mn($Z),TZ=zt({},z0,{relatedTarget:0}),$2=mn(TZ),MZ=zt({},tf,{animationName:0,elapsedTime:0,pseudoElement:0}),EZ=mn(MZ),IZ=zt({},tf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kZ=mn(IZ),OZ=zt({},tf,{data:0}),JC=mn(OZ),PZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AZ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RZ[e])?!!t[e]:!1}function uk(){return AZ}var LZ=zt({},z0,{key:function(e){if(e.key){var t=PZ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=s1(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?CZ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uk,charCode:function(e){return e.type==="keypress"?s1(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?s1(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NZ=mn(LZ),FZ=zt({},__,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KC=mn(FZ),DZ=zt({},z0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uk}),jZ=mn(DZ),zZ=zt({},tf,{propertyName:0,elapsedTime:0,pseudoElement:0}),VZ=mn(zZ),UZ=zt({},__,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GZ=mn(UZ),qZ=[9,13,27,32],ck=$a&&"CompositionEvent"in window,hy=null;$a&&"documentMode"in document&&(hy=document.documentMode);var BZ=$a&&"TextEvent"in window&&!hy,rj=$a&&(!ck||hy&&8<hy&&11>=hy),YC=" ",QC=!1;function ij(e,t){switch(e){case"keyup":return qZ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qp=!1;function HZ(e,t){switch(e){case"compositionend":return nj(t);case"keypress":return t.which!==32?null:(QC=!0,YC);case"textInput":return e=t.data,e===YC&&QC?null:e;default:return null}}function WZ(e,t){if(qp)return e==="compositionend"||!ck&&ij(e,t)?(e=tj(),n1=ak=zl=null,qp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rj&&t.locale!=="ko"?null:t.data;default:return null}}var ZZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ZZ[e.type]:t==="textarea"}function sj(e,t,r,i){ND(i),t=Vw(t,"onChange"),0<t.length&&(r=new lk("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var fy=null,Ky=null;function JZ(e){yj(e,0)}function S_(e){var t=Wp(e);if(kD(t))return e}function KZ(e,t){if(e==="change")return t}var oj=!1;if($a){var x2;if($a){var T2="oninput"in document;if(!T2){var eR=document.createElement("div");eR.setAttribute("oninput","return;"),T2=typeof eR.oninput=="function"}x2=T2}else x2=!1;oj=x2&&(!document.documentMode||9<document.documentMode)}function tR(){fy&&(fy.detachEvent("onpropertychange",aj),Ky=fy=null)}function aj(e){if(e.propertyName==="value"&&S_(Ky)){var t=[];sj(t,Ky,e,rk(e)),zD(JZ,t)}}function YZ(e,t,r){e==="focusin"?(tR(),fy=t,Ky=r,fy.attachEvent("onpropertychange",aj)):e==="focusout"&&tR()}function QZ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return S_(Ky)}function XZ(e,t){if(e==="click")return S_(t)}function eJ(e,t){if(e==="input"||e==="change")return S_(t)}function tJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cs=typeof Object.is=="function"?Object.is:tJ;function Yy(e,t){if(Cs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!$x.call(t,n)||!Cs(e[n],t[n]))return!1}return!0}function rR(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iR(e,t){var r=rR(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rR(r)}}function lj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uj(){for(var e=window,t=Aw();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Aw(e.document)}return t}function dk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rJ(e){var t=uj(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&lj(r.ownerDocument.documentElement,r)){if(i!==null&&dk(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!e.extend&&s>i&&(n=i,i=s,s=n),n=iR(r,s);var o=iR(r,i);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var iJ=$a&&"documentMode"in document&&11>=document.documentMode,Bp=null,Ux=null,my=null,Gx=!1;function nR(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Gx||Bp==null||Bp!==Aw(i)||(i=Bp,"selectionStart"in i&&dk(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),my&&Yy(my,i)||(my=i,i=Vw(Ux,"onSelect"),0<i.length&&(t=new lk("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Bp)))}function Gg(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Hp={animationend:Gg("Animation","AnimationEnd"),animationiteration:Gg("Animation","AnimationIteration"),animationstart:Gg("Animation","AnimationStart"),transitionend:Gg("Transition","TransitionEnd")},M2={},cj={};$a&&(cj=document.createElement("div").style,"AnimationEvent"in window||(delete Hp.animationend.animation,delete Hp.animationiteration.animation,delete Hp.animationstart.animation),"TransitionEvent"in window||delete Hp.transitionend.transition);function $_(e){if(M2[e])return M2[e];if(!Hp[e])return e;var t=Hp[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in cj)return M2[e]=t[r];return e}var dj=$_("animationend"),pj=$_("animationiteration"),hj=$_("animationstart"),fj=$_("transitionend"),mj=new Map,sR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vu(e,t){mj.set(e,t),Od(t,[e])}for(var E2=0;E2<sR.length;E2++){var I2=sR[E2],nJ=I2.toLowerCase(),sJ=I2[0].toUpperCase()+I2.slice(1);vu(nJ,"on"+sJ)}vu(dj,"onAnimationEnd");vu(pj,"onAnimationIteration");vu(hj,"onAnimationStart");vu("dblclick","onDoubleClick");vu("focusin","onFocus");vu("focusout","onBlur");vu(fj,"onTransitionEnd");Rh("onMouseEnter",["mouseout","mouseover"]);Rh("onMouseLeave",["mouseout","mouseover"]);Rh("onPointerEnter",["pointerout","pointerover"]);Rh("onPointerLeave",["pointerout","pointerover"]);Od("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Od("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Od("onBeforeInput",["compositionend","keypress","textInput","paste"]);Od("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Od("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Od("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(hm));function oR(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,nZ(i,t,void 0,e),e.currentTarget=null}function yj(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break e;oR(n,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break e;oR(n,a,c),s=l}}}if(Nw)throw e=Dx,Nw=!1,Dx=null,e}function wt(e,t){var r=t[Zx];r===void 0&&(r=t[Zx]=new Set);var i=e+"__bubble";r.has(i)||(gj(t,e,2,!1),r.add(i))}function k2(e,t,r){var i=0;t&&(i|=4),gj(r,e,i,t)}var qg="_reactListening"+Math.random().toString(36).slice(2);function Qy(e){if(!e[qg]){e[qg]=!0,xD.forEach(function(r){r!=="selectionchange"&&(oJ.has(r)||k2(r,!1,e),k2(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qg]||(t[qg]=!0,k2("selectionchange",!1,t))}}function gj(e,t,r,i){switch(ej(t)){case 1:var n=bZ;break;case 4:n=_Z;break;default:n=ok}r=n.bind(null,t,r,e),n=void 0,!Fx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function O2(e,t,r,i,n){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=Dc(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}zD(function(){var c=s,h=rk(r),f=[];e:{var m=mj.get(e);if(m!==void 0){var y=lk,g=e;switch(e){case"keypress":if(s1(r)===0)break e;case"keydown":case"keyup":y=NZ;break;case"focusin":g="focus",y=$2;break;case"focusout":g="blur",y=$2;break;case"beforeblur":case"afterblur":y=$2;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ZC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=xZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=jZ;break;case dj:case pj:case hj:y=EZ;break;case fj:y=VZ;break;case"scroll":y=SZ;break;case"wheel":y=GZ;break;case"copy":case"cut":case"paste":y=kZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=KC}var v=(t&4)!==0,b=!v&&e==="scroll",w=v?m!==null?m+"Capture":null:m;v=[];for(var _=c,$;_!==null;){$=_;var E=$.stateNode;if($.tag===5&&E!==null&&($=E,w!==null&&(E=Hy(_,w),E!=null&&v.push(Xy(_,E,$)))),b)break;_=_.return}0<v.length&&(m=new y(m,g,null,r,h),f.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&r!==Lx&&(g=r.relatedTarget||r.fromElement)&&(Dc(g)||g[xa]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(g=r.relatedTarget||r.toElement,y=c,g=g?Dc(g):null,g!==null&&(b=Pd(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=c),y!==g)){if(v=ZC,E="onMouseLeave",w="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(v=KC,E="onPointerLeave",w="onPointerEnter",_="pointer"),b=y==null?m:Wp(y),$=g==null?m:Wp(g),m=new v(E,_+"leave",y,r,h),m.target=b,m.relatedTarget=$,E=null,Dc(h)===c&&(v=new v(w,_+"enter",g,r,h),v.target=$,v.relatedTarget=b,E=v),b=E,y&&g)t:{for(v=y,w=g,_=0,$=v;$;$=Wd($))_++;for($=0,E=w;E;E=Wd(E))$++;for(;0<_-$;)v=Wd(v),_--;for(;0<$-_;)w=Wd(w),$--;for(;_--;){if(v===w||w!==null&&v===w.alternate)break t;v=Wd(v),w=Wd(w)}v=null}else v=null;y!==null&&aR(f,m,y,v,!1),g!==null&&b!==null&&aR(f,b,g,v,!0)}}e:{if(m=c?Wp(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var k=KZ;else if(XC(m))if(oj)k=eJ;else{k=QZ;var M=YZ}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=XZ);if(k&&(k=k(e,c))){sj(f,k,r,h);break e}M&&M(e,m,c),e==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Ox(m,"number",m.value)}switch(M=c?Wp(c):window,e){case"focusin":(XC(M)||M.contentEditable==="true")&&(Bp=M,Ux=c,my=null);break;case"focusout":my=Ux=Bp=null;break;case"mousedown":Gx=!0;break;case"contextmenu":case"mouseup":case"dragend":Gx=!1,nR(f,r,h);break;case"selectionchange":if(iJ)break;case"keydown":case"keyup":nR(f,r,h)}var P;if(ck)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else qp?ij(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(rj&&r.locale!=="ko"&&(qp||N!=="onCompositionStart"?N==="onCompositionEnd"&&qp&&(P=tj()):(zl=h,ak="value"in zl?zl.value:zl.textContent,qp=!0)),M=Vw(c,N),0<M.length&&(N=new JC(N,e,null,r,h),f.push({event:N,listeners:M}),P?N.data=P:(P=nj(r),P!==null&&(N.data=P)))),(P=BZ?HZ(e,r):WZ(e,r))&&(c=Vw(c,"onBeforeInput"),0<c.length&&(h=new JC("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=P))}yj(f,t)})}function Xy(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Vw(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Hy(e,r),s!=null&&i.unshift(Xy(e,s,n)),s=Hy(e,t),s!=null&&i.push(Xy(e,s,n))),e=e.return}return i}function Wd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function aR(e,t,r,i,n){for(var s=t._reactName,o=[];r!==null&&r!==i;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,n?(l=Hy(r,s),l!=null&&o.unshift(Xy(r,l,a))):n||(l=Hy(r,s),l!=null&&o.push(Xy(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var aJ=/\r\n?/g,lJ=/\u0000|\uFFFD/g;function lR(e){return(typeof e=="string"?e:""+e).replace(aJ,`
`).replace(lJ,"")}function Bg(e,t,r){if(t=lR(t),lR(e)!==t&&r)throw Error(Y(425))}function Uw(){}var qx=null,Bx=null;function Hx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wx=typeof setTimeout=="function"?setTimeout:void 0,uJ=typeof clearTimeout=="function"?clearTimeout:void 0,uR=typeof Promise=="function"?Promise:void 0,cJ=typeof queueMicrotask=="function"?queueMicrotask:typeof uR<"u"?function(e){return uR.resolve(null).then(e).catch(dJ)}:Wx;function dJ(e){setTimeout(function(){throw e})}function P2(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),Jy(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);Jy(t)}function Ql(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function cR(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var rf=Math.random().toString(36).slice(2),mo="__reactFiber$"+rf,e0="__reactProps$"+rf,xa="__reactContainer$"+rf,Zx="__reactEvents$"+rf,pJ="__reactListeners$"+rf,hJ="__reactHandles$"+rf;function Dc(e){var t=e[mo];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xa]||r[mo]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=cR(e);e!==null;){if(r=e[mo])return r;e=cR(e)}return t}e=r,r=e.parentNode}return null}function V0(e){return e=e[mo]||e[xa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function x_(e){return e[e0]||null}var Jx=[],Zp=-1;function wu(e){return{current:e}}function Tt(e){0>Zp||(e.current=Jx[Zp],Jx[Zp]=null,Zp--)}function gt(e,t){Zp++,Jx[Zp]=e.current,e.current=t}var au={},ti=wu(au),Ni=wu(!1),ad=au;function Ah(e,t){var r=e.type.contextTypes;if(!r)return au;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Fi(e){return e=e.childContextTypes,e!=null}function Gw(){Tt(Ni),Tt(ti)}function dR(e,t,r){if(ti.current!==au)throw Error(Y(168));gt(ti,t),gt(Ni,r)}function vj(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(Y(108,YW(e)||"Unknown",n));return zt({},r,i)}function qw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||au,ad=ti.current,gt(ti,e),gt(Ni,Ni.current),!0}function pR(e,t,r){var i=e.stateNode;if(!i)throw Error(Y(169));r?(e=vj(e,t,ad),i.__reactInternalMemoizedMergedChildContext=e,Tt(Ni),Tt(ti),gt(ti,e)):Tt(Ni),gt(Ni,r)}var da=null,T_=!1,C2=!1;function wj(e){da===null?da=[e]:da.push(e)}function fJ(e){T_=!0,wj(e)}function bu(){if(!C2&&da!==null){C2=!0;var e=0,t=at;try{var r=da;for(at=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}da=null,T_=!1}catch(n){throw da!==null&&(da=da.slice(e+1)),qD(ik,bu),n}finally{at=t,C2=!1}}return null}var Jp=[],Kp=0,Bw=null,Hw=0,Cn=[],Rn=0,ld=null,ya=1,ga="";function Bu(e,t){Jp[Kp++]=Hw,Jp[Kp++]=Bw,Bw=e,Hw=t}function bj(e,t,r){Cn[Rn++]=ya,Cn[Rn++]=ga,Cn[Rn++]=ld,ld=e;var i=ya;e=ga;var n=32-$s(i)-1;i&=~(1<<n),r+=1;var s=32-$s(t)+n;if(30<s){var o=n-n%5;s=(i&(1<<o)-1).toString(32),i>>=o,n-=o,ya=1<<32-$s(t)+n|r<<n|i,ga=s+e}else ya=1<<s|r<<n|i,ga=e}function pk(e){e.return!==null&&(Bu(e,1),bj(e,1,0))}function hk(e){for(;e===Bw;)Bw=Jp[--Kp],Jp[Kp]=null,Hw=Jp[--Kp],Jp[Kp]=null;for(;e===ld;)ld=Cn[--Rn],Cn[Rn]=null,ga=Cn[--Rn],Cn[Rn]=null,ya=Cn[--Rn],Cn[Rn]=null}var an=null,sn=null,kt=!1,_s=null;function _j(e,t){var r=Fn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function hR(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,an=e,sn=Ql(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,an=e,sn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ld!==null?{id:ya,overflow:ga}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Fn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,an=e,sn=null,!0):!1;default:return!1}}function Kx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yx(e){if(kt){var t=sn;if(t){var r=t;if(!hR(e,t)){if(Kx(e))throw Error(Y(418));t=Ql(r.nextSibling);var i=an;t&&hR(e,t)?_j(i,r):(e.flags=e.flags&-4097|2,kt=!1,an=e)}}else{if(Kx(e))throw Error(Y(418));e.flags=e.flags&-4097|2,kt=!1,an=e}}}function fR(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;an=e}function Hg(e){if(e!==an)return!1;if(!kt)return fR(e),kt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hx(e.type,e.memoizedProps)),t&&(t=sn)){if(Kx(e))throw Sj(),Error(Y(418));for(;t;)_j(e,t),t=Ql(t.nextSibling)}if(fR(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){sn=Ql(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}sn=null}}else sn=an?Ql(e.stateNode.nextSibling):null;return!0}function Sj(){for(var e=sn;e;)e=Ql(e.nextSibling)}function Lh(){sn=an=null,kt=!1}function fk(e){_s===null?_s=[e]:_s.push(e)}var mJ=Ra.ReactCurrentBatchConfig;function Ff(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var i=r.stateNode}if(!i)throw Error(Y(147,e));var n=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=n.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,e))}return e}function Wg(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mR(e){var t=e._init;return t(e._payload)}function $j(e){function t(w,_){if(e){var $=w.deletions;$===null?(w.deletions=[_],w.flags|=16):$.push(_)}}function r(w,_){if(!e)return null;for(;_!==null;)t(w,_),_=_.sibling;return null}function i(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function n(w,_){return w=ru(w,_),w.index=0,w.sibling=null,w}function s(w,_,$){return w.index=$,e?($=w.alternate,$!==null?($=$.index,$<_?(w.flags|=2,_):$):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function a(w,_,$,E){return _===null||_.tag!==6?(_=j2($,w.mode,E),_.return=w,_):(_=n(_,$),_.return=w,_)}function l(w,_,$,E){var k=$.type;return k===Gp?h(w,_,$.props.children,E,$.key):_!==null&&(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===El&&mR(k)===_.type)?(E=n(_,$.props),E.ref=Ff(w,_,$),E.return=w,E):(E=p1($.type,$.key,$.props,null,w.mode,E),E.ref=Ff(w,_,$),E.return=w,E)}function c(w,_,$,E){return _===null||_.tag!==4||_.stateNode.containerInfo!==$.containerInfo||_.stateNode.implementation!==$.implementation?(_=z2($,w.mode,E),_.return=w,_):(_=n(_,$.children||[]),_.return=w,_)}function h(w,_,$,E,k){return _===null||_.tag!==7?(_=Jc($,w.mode,E,k),_.return=w,_):(_=n(_,$),_.return=w,_)}function f(w,_,$){if(typeof _=="string"&&_!==""||typeof _=="number")return _=j2(""+_,w.mode,$),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ng:return $=p1(_.type,_.key,_.props,null,w.mode,$),$.ref=Ff(w,null,_),$.return=w,$;case Up:return _=z2(_,w.mode,$),_.return=w,_;case El:var E=_._init;return f(w,E(_._payload),$)}if(dm(_)||Cf(_))return _=Jc(_,w.mode,$,null),_.return=w,_;Wg(w,_)}return null}function m(w,_,$,E){var k=_!==null?_.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return k!==null?null:a(w,_,""+$,E);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Ng:return $.key===k?l(w,_,$,E):null;case Up:return $.key===k?c(w,_,$,E):null;case El:return k=$._init,m(w,_,k($._payload),E)}if(dm($)||Cf($))return k!==null?null:h(w,_,$,E,null);Wg(w,$)}return null}function y(w,_,$,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return w=w.get($)||null,a(_,w,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ng:return w=w.get(E.key===null?$:E.key)||null,l(_,w,E,k);case Up:return w=w.get(E.key===null?$:E.key)||null,c(_,w,E,k);case El:var M=E._init;return y(w,_,$,M(E._payload),k)}if(dm(E)||Cf(E))return w=w.get($)||null,h(_,w,E,k,null);Wg(_,E)}return null}function g(w,_,$,E){for(var k=null,M=null,P=_,N=_=0,j=null;P!==null&&N<$.length;N++){P.index>N?(j=P,P=null):j=P.sibling;var G=m(w,P,$[N],E);if(G===null){P===null&&(P=j);break}e&&P&&G.alternate===null&&t(w,P),_=s(G,_,N),M===null?k=G:M.sibling=G,M=G,P=j}if(N===$.length)return r(w,P),kt&&Bu(w,N),k;if(P===null){for(;N<$.length;N++)P=f(w,$[N],E),P!==null&&(_=s(P,_,N),M===null?k=P:M.sibling=P,M=P);return kt&&Bu(w,N),k}for(P=i(w,P);N<$.length;N++)j=y(P,w,N,$[N],E),j!==null&&(e&&j.alternate!==null&&P.delete(j.key===null?N:j.key),_=s(j,_,N),M===null?k=j:M.sibling=j,M=j);return e&&P.forEach(function(W){return t(w,W)}),kt&&Bu(w,N),k}function v(w,_,$,E){var k=Cf($);if(typeof k!="function")throw Error(Y(150));if($=k.call($),$==null)throw Error(Y(151));for(var M=k=null,P=_,N=_=0,j=null,G=$.next();P!==null&&!G.done;N++,G=$.next()){P.index>N?(j=P,P=null):j=P.sibling;var W=m(w,P,G.value,E);if(W===null){P===null&&(P=j);break}e&&P&&W.alternate===null&&t(w,P),_=s(W,_,N),M===null?k=W:M.sibling=W,M=W,P=j}if(G.done)return r(w,P),kt&&Bu(w,N),k;if(P===null){for(;!G.done;N++,G=$.next())G=f(w,G.value,E),G!==null&&(_=s(G,_,N),M===null?k=G:M.sibling=G,M=G);return kt&&Bu(w,N),k}for(P=i(w,P);!G.done;N++,G=$.next())G=y(P,w,N,G.value,E),G!==null&&(e&&G.alternate!==null&&P.delete(G.key===null?N:G.key),_=s(G,_,N),M===null?k=G:M.sibling=G,M=G);return e&&P.forEach(function(ie){return t(w,ie)}),kt&&Bu(w,N),k}function b(w,_,$,E){if(typeof $=="object"&&$!==null&&$.type===Gp&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case Ng:e:{for(var k=$.key,M=_;M!==null;){if(M.key===k){if(k=$.type,k===Gp){if(M.tag===7){r(w,M.sibling),_=n(M,$.props.children),_.return=w,w=_;break e}}else if(M.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===El&&mR(k)===M.type){r(w,M.sibling),_=n(M,$.props),_.ref=Ff(w,M,$),_.return=w,w=_;break e}r(w,M);break}else t(w,M);M=M.sibling}$.type===Gp?(_=Jc($.props.children,w.mode,E,$.key),_.return=w,w=_):(E=p1($.type,$.key,$.props,null,w.mode,E),E.ref=Ff(w,_,$),E.return=w,w=E)}return o(w);case Up:e:{for(M=$.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===$.containerInfo&&_.stateNode.implementation===$.implementation){r(w,_.sibling),_=n(_,$.children||[]),_.return=w,w=_;break e}else{r(w,_);break}else t(w,_);_=_.sibling}_=z2($,w.mode,E),_.return=w,w=_}return o(w);case El:return M=$._init,b(w,_,M($._payload),E)}if(dm($))return g(w,_,$,E);if(Cf($))return v(w,_,$,E);Wg(w,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,_!==null&&_.tag===6?(r(w,_.sibling),_=n(_,$),_.return=w,w=_):(r(w,_),_=j2($,w.mode,E),_.return=w,w=_),o(w)):r(w,_)}return b}var Nh=$j(!0),xj=$j(!1),Ww=wu(null),Zw=null,Yp=null,mk=null;function yk(){mk=Yp=Zw=null}function gk(e){var t=Ww.current;Tt(Ww),e._currentValue=t}function Qx(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function hh(e,t){Zw=e,mk=Yp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ri=!0),e.firstContext=null)}function Hn(e){var t=e._currentValue;if(mk!==e)if(e={context:e,memoizedValue:t,next:null},Yp===null){if(Zw===null)throw Error(Y(308));Yp=e,Zw.dependencies={lanes:0,firstContext:e}}else Yp=Yp.next=e;return t}var jc=null;function vk(e){jc===null?jc=[e]:jc.push(e)}function Tj(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,vk(t)):(r.next=n.next,n.next=r),t.interleaved=r,Ta(e,i)}function Ta(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Il=!1;function wk(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xl(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ze&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,Ta(e,r)}return n=i.interleaved,n===null?(t.next=t,vk(i)):(t.next=n.next,n.next=t),i.interleaved=t,Ta(e,r)}function o1(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,nk(e,r)}}function yR(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Jw(e,t,r,i){var n=e.updateQueue;Il=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=n.baseState;o=0,h=c=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((i&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,v=a;switch(m=t,y=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(y,f,m);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(y,f,m):g,m==null)break e;f=zt({},f,m);break e;case 2:Il=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=n.effects,m===null?n.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;m=a,a=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);if(h===null&&(l=f),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);cd|=o,e.lanes=o,e.memoizedState=f}}function gR(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(Y(191,n));n.call(i)}}}var U0={},vo=wu(U0),t0=wu(U0),r0=wu(U0);function zc(e){if(e===U0)throw Error(Y(174));return e}function bk(e,t){switch(gt(r0,t),gt(t0,e),gt(vo,U0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Cx(t,e)}Tt(vo),gt(vo,t)}function Fh(){Tt(vo),Tt(t0),Tt(r0)}function Ej(e){zc(r0.current);var t=zc(vo.current),r=Cx(t,e.type);t!==r&&(gt(t0,e),gt(vo,r))}function _k(e){t0.current===e&&(Tt(vo),Tt(t0))}var Ft=wu(0);function Kw(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var R2=[];function Sk(){for(var e=0;e<R2.length;e++)R2[e]._workInProgressVersionPrimary=null;R2.length=0}var a1=Ra.ReactCurrentDispatcher,A2=Ra.ReactCurrentBatchConfig,ud=0,Dt=null,fr=null,Tr=null,Yw=!1,yy=!1,i0=0,yJ=0;function Vr(){throw Error(Y(321))}function $k(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Cs(e[r],t[r]))return!1;return!0}function xk(e,t,r,i,n,s){if(ud=s,Dt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,a1.current=e===null||e.memoizedState===null?bJ:_J,e=r(i,n),yy){s=0;do{if(yy=!1,i0=0,25<=s)throw Error(Y(301));s+=1,Tr=fr=null,t.updateQueue=null,a1.current=SJ,e=r(i,n)}while(yy)}if(a1.current=Qw,t=fr!==null&&fr.next!==null,ud=0,Tr=fr=Dt=null,Yw=!1,t)throw Error(Y(300));return e}function Tk(){var e=i0!==0;return i0=0,e}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tr===null?Dt.memoizedState=Tr=e:Tr=Tr.next=e,Tr}function Wn(){if(fr===null){var e=Dt.alternate;e=e!==null?e.memoizedState:null}else e=fr.next;var t=Tr===null?Dt.memoizedState:Tr.next;if(t!==null)Tr=t,fr=e;else{if(e===null)throw Error(Y(310));fr=e,e={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},Tr===null?Dt.memoizedState=Tr=e:Tr=Tr.next=e}return Tr}function n0(e,t){return typeof t=="function"?t(e):t}function L2(e){var t=Wn(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var i=fr,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((ud&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,Dt.lanes|=h,cd|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Cs(i,t.memoizedState)||(Ri=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do s=n.lane,Dt.lanes|=s,cd|=s,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function N2(e){var t=Wn(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do s=e(s,o.action),o=o.next;while(o!==n);Cs(s,t.memoizedState)||(Ri=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function Ij(){}function kj(e,t){var r=Dt,i=Wn(),n=t(),s=!Cs(i.memoizedState,n);if(s&&(i.memoizedState=n,Ri=!0),i=i.queue,Mk(Cj.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||Tr!==null&&Tr.memoizedState.tag&1){if(r.flags|=2048,s0(9,Pj.bind(null,r,i,n,t),void 0,null),Er===null)throw Error(Y(349));ud&30||Oj(r,t,n)}return n}function Oj(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Dt.updateQueue,t===null?(t={lastEffect:null,stores:null},Dt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Pj(e,t,r,i){t.value=r,t.getSnapshot=i,Rj(t)&&Aj(e)}function Cj(e,t,r){return r(function(){Rj(t)&&Aj(e)})}function Rj(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Cs(e,r)}catch{return!0}}function Aj(e){var t=Ta(e,1);t!==null&&xs(t,e,1,-1)}function vR(e){var t=ao();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n0,lastRenderedState:e},t.queue=e,e=e.dispatch=wJ.bind(null,Dt,e),[t.memoizedState,e]}function s0(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Dt.updateQueue,t===null?(t={lastEffect:null,stores:null},Dt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function Lj(){return Wn().memoizedState}function l1(e,t,r,i){var n=ao();Dt.flags|=e,n.memoizedState=s0(1|t,r,void 0,i===void 0?null:i)}function M_(e,t,r,i){var n=Wn();i=i===void 0?null:i;var s=void 0;if(fr!==null){var o=fr.memoizedState;if(s=o.destroy,i!==null&&$k(i,o.deps)){n.memoizedState=s0(t,r,s,i);return}}Dt.flags|=e,n.memoizedState=s0(1|t,r,s,i)}function wR(e,t){return l1(8390656,8,e,t)}function Mk(e,t){return M_(2048,8,e,t)}function Nj(e,t){return M_(4,2,e,t)}function Fj(e,t){return M_(4,4,e,t)}function Dj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jj(e,t,r){return r=r!=null?r.concat([e]):null,M_(4,4,Dj.bind(null,t,e),r)}function Ek(){}function zj(e,t){var r=Wn();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&$k(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Vj(e,t){var r=Wn();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&$k(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Uj(e,t,r){return ud&21?(Cs(r,t)||(r=WD(),Dt.lanes|=r,cd|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ri=!0),e.memoizedState=r)}function gJ(e,t){var r=at;at=r!==0&&4>r?r:4,e(!0);var i=A2.transition;A2.transition={};try{e(!1),t()}finally{at=r,A2.transition=i}}function Gj(){return Wn().memoizedState}function vJ(e,t,r){var i=tu(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},qj(e))Bj(t,r);else if(r=Tj(e,t,r,i),r!==null){var n=gi();xs(r,e,i,n),Hj(r,t,i)}}function wJ(e,t,r){var i=tu(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(qj(e))Bj(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(n.hasEagerState=!0,n.eagerState=a,Cs(a,o)){var l=t.interleaved;l===null?(n.next=n,vk(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}r=Tj(e,t,n,i),r!==null&&(n=gi(),xs(r,e,i,n),Hj(r,t,i))}}function qj(e){var t=e.alternate;return e===Dt||t!==null&&t===Dt}function Bj(e,t){yy=Yw=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Hj(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,nk(e,r)}}var Qw={readContext:Hn,useCallback:Vr,useContext:Vr,useEffect:Vr,useImperativeHandle:Vr,useInsertionEffect:Vr,useLayoutEffect:Vr,useMemo:Vr,useReducer:Vr,useRef:Vr,useState:Vr,useDebugValue:Vr,useDeferredValue:Vr,useTransition:Vr,useMutableSource:Vr,useSyncExternalStore:Vr,useId:Vr,unstable_isNewReconciler:!1},bJ={readContext:Hn,useCallback:function(e,t){return ao().memoizedState=[e,t===void 0?null:t],e},useContext:Hn,useEffect:wR,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,l1(4194308,4,Dj.bind(null,t,e),r)},useLayoutEffect:function(e,t){return l1(4194308,4,e,t)},useInsertionEffect:function(e,t){return l1(4,2,e,t)},useMemo:function(e,t){var r=ao();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=ao();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=vJ.bind(null,Dt,e),[i.memoizedState,e]},useRef:function(e){var t=ao();return e={current:e},t.memoizedState=e},useState:vR,useDebugValue:Ek,useDeferredValue:function(e){return ao().memoizedState=e},useTransition:function(){var e=vR(!1),t=e[0];return e=gJ.bind(null,e[1]),ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Dt,n=ao();if(kt){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=t(),Er===null)throw Error(Y(349));ud&30||Oj(i,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,wR(Cj.bind(null,i,s,e),[e]),i.flags|=2048,s0(9,Pj.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=ao(),t=Er.identifierPrefix;if(kt){var r=ga,i=ya;r=(i&~(1<<32-$s(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=i0++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=yJ++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_J={readContext:Hn,useCallback:zj,useContext:Hn,useEffect:Mk,useImperativeHandle:jj,useInsertionEffect:Nj,useLayoutEffect:Fj,useMemo:Vj,useReducer:L2,useRef:Lj,useState:function(){return L2(n0)},useDebugValue:Ek,useDeferredValue:function(e){var t=Wn();return Uj(t,fr.memoizedState,e)},useTransition:function(){var e=L2(n0)[0],t=Wn().memoizedState;return[e,t]},useMutableSource:Ij,useSyncExternalStore:kj,useId:Gj,unstable_isNewReconciler:!1},SJ={readContext:Hn,useCallback:zj,useContext:Hn,useEffect:Mk,useImperativeHandle:jj,useInsertionEffect:Nj,useLayoutEffect:Fj,useMemo:Vj,useReducer:N2,useRef:Lj,useState:function(){return N2(n0)},useDebugValue:Ek,useDeferredValue:function(e){var t=Wn();return fr===null?t.memoizedState=e:Uj(t,fr.memoizedState,e)},useTransition:function(){var e=N2(n0)[0],t=Wn().memoizedState;return[e,t]},useMutableSource:Ij,useSyncExternalStore:kj,useId:Gj,unstable_isNewReconciler:!1};function ms(e,t){if(e&&e.defaultProps){t=zt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Xx(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:zt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var E_={isMounted:function(e){return(e=e._reactInternals)?Pd(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=gi(),n=tu(e),s=wa(i,n);s.payload=t,r!=null&&(s.callback=r),t=Xl(e,s,n),t!==null&&(xs(t,e,n,i),o1(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=gi(),n=tu(e),s=wa(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Xl(e,s,n),t!==null&&(xs(t,e,n,i),o1(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=gi(),i=tu(e),n=wa(r,i);n.tag=2,t!=null&&(n.callback=t),t=Xl(e,n,i),t!==null&&(xs(t,e,i,r),o1(t,e,i))}};function bR(e,t,r,i,n,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!Yy(r,i)||!Yy(n,s):!0}function Wj(e,t,r){var i=!1,n=au,s=t.contextType;return typeof s=="object"&&s!==null?s=Hn(s):(n=Fi(t)?ad:ti.current,i=t.contextTypes,s=(i=i!=null)?Ah(e,n):au),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=E_,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function _R(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&E_.enqueueReplaceState(t,t.state,null)}function eT(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},wk(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=Hn(s):(s=Fi(t)?ad:ti.current,n.context=Ah(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Xx(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&E_.enqueueReplaceState(n,n.state,null),Jw(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Dh(e,t){try{var r="",i=t;do r+=KW(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function F2(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function tT(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var $J=typeof WeakMap=="function"?WeakMap:Map;function Zj(e,t,r){r=wa(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){eb||(eb=!0,dT=i),tT(e,t)},r}function Jj(e,t,r){r=wa(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){tT(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){tT(e,t),typeof i!="function"&&(eu===null?eu=new Set([this]):eu.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function SR(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new $J;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=FJ.bind(null,e,t,r),t.then(e,e))}function $R(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xR(e,t,r,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=wa(-1,1),t.tag=2,Xl(r,t,1))),r.lanes|=1),e)}var xJ=Ra.ReactCurrentOwner,Ri=!1;function mi(e,t,r,i){t.child=e===null?xj(t,null,r,i):Nh(t,e.child,r,i)}function TR(e,t,r,i,n){r=r.render;var s=t.ref;return hh(t,n),i=xk(e,t,r,i,s,n),r=Tk(),e!==null&&!Ri?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ma(e,t,n)):(kt&&r&&pk(t),t.flags|=1,mi(e,t,i,n),t.child)}function MR(e,t,r,i,n){if(e===null){var s=r.type;return typeof s=="function"&&!Lk(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,Kj(e,t,s,i,n)):(e=p1(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&n)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Yy,r(o,i)&&e.ref===t.ref)return Ma(e,t,n)}return t.flags|=1,e=ru(s,i),e.ref=t.ref,e.return=t,t.child=e}function Kj(e,t,r,i,n){if(e!==null){var s=e.memoizedProps;if(Yy(s,i)&&e.ref===t.ref)if(Ri=!1,t.pendingProps=i=s,(e.lanes&n)!==0)e.flags&131072&&(Ri=!0);else return t.lanes=e.lanes,Ma(e,t,n)}return rT(e,t,r,i,n)}function Yj(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(Xp,tn),tn|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,gt(Xp,tn),tn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,gt(Xp,tn),tn|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,gt(Xp,tn),tn|=i;return mi(e,t,n,r),t.child}function Qj(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function rT(e,t,r,i,n){var s=Fi(r)?ad:ti.current;return s=Ah(t,s),hh(t,n),r=xk(e,t,r,i,s,n),i=Tk(),e!==null&&!Ri?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ma(e,t,n)):(kt&&i&&pk(t),t.flags|=1,mi(e,t,r,n),t.child)}function ER(e,t,r,i,n){if(Fi(r)){var s=!0;qw(t)}else s=!1;if(hh(t,n),t.stateNode===null)u1(e,t),Wj(t,r,i),eT(t,r,i,n),i=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Hn(c):(c=Fi(r)?ad:ti.current,c=Ah(t,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&_R(t,o,i,c),Il=!1;var m=t.memoizedState;o.state=m,Jw(t,i,o,n),l=t.memoizedState,a!==i||m!==l||Ni.current||Il?(typeof h=="function"&&(Xx(t,r,h,i),l=t.memoizedState),(a=Il||bR(t,r,a,i,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Mj(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ms(t.type,a),o.props=c,f=t.pendingProps,m=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Hn(l):(l=Fi(r)?ad:ti.current,l=Ah(t,l));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&_R(t,o,i,l),Il=!1,m=t.memoizedState,o.state=m,Jw(t,i,o,n);var g=t.memoizedState;a!==f||m!==g||Ni.current||Il?(typeof y=="function"&&(Xx(t,r,y,i),g=t.memoizedState),(c=Il||bR(t,r,c,i,m,g,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return iT(e,t,r,i,s,n)}function iT(e,t,r,i,n,s){Qj(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return n&&pR(t,r,!1),Ma(e,t,s);i=t.stateNode,xJ.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=Nh(t,e.child,null,s),t.child=Nh(t,null,a,s)):mi(e,t,a,s),t.memoizedState=i.state,n&&pR(t,r,!0),t.child}function Xj(e){var t=e.stateNode;t.pendingContext?dR(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dR(e,t.context,!1),bk(e,t.containerInfo)}function IR(e,t,r,i,n){return Lh(),fk(n),t.flags|=256,mi(e,t,r,i),t.child}var nT={dehydrated:null,treeContext:null,retryLane:0};function sT(e){return{baseLanes:e,cachePool:null,transitions:null}}function e6(e,t,r){var i=t.pendingProps,n=Ft.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),gt(Ft,n&1),e===null)return Yx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=O_(o,i,0,null),e=Jc(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=sT(r),t.memoizedState=nT,e):Ik(t,o));if(n=e.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return TJ(e,t,o,i,a,n,r);if(s){s=i.fallback,o=t.mode,n=e.child,a=n.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=ru(n,l),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=ru(a,s):(s=Jc(s,o,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=e.child.memoizedState,o=o===null?sT(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=nT,i}return s=e.child,e=s.sibling,i=ru(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Ik(e,t){return t=O_({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zg(e,t,r,i){return i!==null&&fk(i),Nh(t,e.child,null,r),e=Ik(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function TJ(e,t,r,i,n,s,o){if(r)return t.flags&256?(t.flags&=-257,i=F2(Error(Y(422))),Zg(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=O_({mode:"visible",children:i.children},n,0,null),s=Jc(s,n,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&Nh(t,e.child,null,o),t.child.memoizedState=sT(o),t.memoizedState=nT,s);if(!(t.mode&1))return Zg(e,t,o,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Y(419)),i=F2(s,i,void 0),Zg(e,t,o,i)}if(a=(o&e.childLanes)!==0,Ri||a){if(i=Er,i!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|o)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,Ta(e,n),xs(i,e,n,-1))}return Ak(),i=F2(Error(Y(421))),Zg(e,t,o,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=DJ.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,sn=Ql(n.nextSibling),an=t,kt=!0,_s=null,e!==null&&(Cn[Rn++]=ya,Cn[Rn++]=ga,Cn[Rn++]=ld,ya=e.id,ga=e.overflow,ld=t),t=Ik(t,i.children),t.flags|=4096,t)}function kR(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Qx(e.return,t,r)}function D2(e,t,r,i,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function t6(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(mi(e,t,i.children,r),i=Ft.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kR(e,r,t);else if(e.tag===19)kR(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(gt(Ft,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Kw(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),D2(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Kw(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}D2(t,!0,r,null,s);break;case"together":D2(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function u1(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ma(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),cd|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,r=ru(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ru(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function MJ(e,t,r){switch(t.tag){case 3:Xj(t),Lh();break;case 5:Ej(t);break;case 1:Fi(t.type)&&qw(t);break;case 4:bk(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;gt(Ww,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(gt(Ft,Ft.current&1),t.flags|=128,null):r&t.child.childLanes?e6(e,t,r):(gt(Ft,Ft.current&1),e=Ma(e,t,r),e!==null?e.sibling:null);gt(Ft,Ft.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return t6(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),gt(Ft,Ft.current),i)break;return null;case 22:case 23:return t.lanes=0,Yj(e,t,r)}return Ma(e,t,r)}var r6,oT,i6,n6;r6=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};oT=function(){};i6=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,zc(vo.current);var s=null;switch(r){case"input":n=Ix(e,n),i=Ix(e,i),s=[];break;case"select":n=zt({},n,{value:void 0}),i=zt({},i,{value:void 0}),s=[];break;case"textarea":n=Px(e,n),i=Px(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Uw)}Rx(r,i);var o;r=null;for(c in n)if(!i.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var a=n[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qy.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=n!=null?n[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qy.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&wt("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};n6=function(e,t,r,i){r!==i&&(t.flags|=4)};function Df(e,t){if(!kt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ur(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function EJ(e,t,r){var i=t.pendingProps;switch(hk(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ur(t),null;case 1:return Fi(t.type)&&Gw(),Ur(t),null;case 3:return i=t.stateNode,Fh(),Tt(Ni),Tt(ti),Sk(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Hg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_s!==null&&(fT(_s),_s=null))),oT(e,t),Ur(t),null;case 5:_k(t);var n=zc(r0.current);if(r=t.type,e!==null&&t.stateNode!=null)i6(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Y(166));return Ur(t),null}if(e=zc(vo.current),Hg(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[mo]=t,i[e0]=s,e=(t.mode&1)!==0,r){case"dialog":wt("cancel",i),wt("close",i);break;case"iframe":case"object":case"embed":wt("load",i);break;case"video":case"audio":for(n=0;n<hm.length;n++)wt(hm[n],i);break;case"source":wt("error",i);break;case"img":case"image":case"link":wt("error",i),wt("load",i);break;case"details":wt("toggle",i);break;case"input":DC(i,s),wt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},wt("invalid",i);break;case"textarea":zC(i,s),wt("invalid",i)}Rx(r,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Bg(i.textContent,a,e),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Bg(i.textContent,a,e),n=["children",""+a]):qy.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&wt("scroll",i)}switch(r){case"input":Fg(i),jC(i,s,!0);break;case"textarea":Fg(i),VC(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Uw)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=CD(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(r,{is:i.is}):(e=o.createElement(r),r==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,r),e[mo]=t,e[e0]=i,r6(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ax(r,i),r){case"dialog":wt("cancel",e),wt("close",e),n=i;break;case"iframe":case"object":case"embed":wt("load",e),n=i;break;case"video":case"audio":for(n=0;n<hm.length;n++)wt(hm[n],e);n=i;break;case"source":wt("error",e),n=i;break;case"img":case"image":case"link":wt("error",e),wt("load",e),n=i;break;case"details":wt("toggle",e),n=i;break;case"input":DC(e,i),n=Ix(e,i),wt("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=zt({},i,{value:void 0}),wt("invalid",e);break;case"textarea":zC(e,i),n=Px(e,i),wt("invalid",e);break;default:n=i}Rx(r,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?LD(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&RD(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&By(e,l):typeof l=="number"&&By(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(qy.hasOwnProperty(s)?l!=null&&s==="onScroll"&&wt("scroll",e):l!=null&&QI(e,s,l,o))}switch(r){case"input":Fg(e),jC(e,i,!1);break;case"textarea":Fg(e),VC(e);break;case"option":i.value!=null&&e.setAttribute("value",""+ou(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?uh(e,!!i.multiple,s,!1):i.defaultValue!=null&&uh(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Uw)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ur(t),null;case 6:if(e&&t.stateNode!=null)n6(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Y(166));if(r=zc(r0.current),zc(vo.current),Hg(t)){if(i=t.stateNode,r=t.memoizedProps,i[mo]=t,(s=i.nodeValue!==r)&&(e=an,e!==null))switch(e.tag){case 3:Bg(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bg(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[mo]=t,t.stateNode=i}return Ur(t),null;case 13:if(Tt(Ft),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kt&&sn!==null&&t.mode&1&&!(t.flags&128))Sj(),Lh(),t.flags|=98560,s=!1;else if(s=Hg(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(Y(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[mo]=t}else Lh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ur(t),s=!1}else _s!==null&&(fT(_s),_s=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Ft.current&1?yr===0&&(yr=3):Ak())),t.updateQueue!==null&&(t.flags|=4),Ur(t),null);case 4:return Fh(),oT(e,t),e===null&&Qy(t.stateNode.containerInfo),Ur(t),null;case 10:return gk(t.type._context),Ur(t),null;case 17:return Fi(t.type)&&Gw(),Ur(t),null;case 19:if(Tt(Ft),s=t.memoizedState,s===null)return Ur(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)Df(s,!1);else{if(yr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Kw(e),o!==null){for(t.flags|=128,Df(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return gt(Ft,Ft.current&1|2),t.child}e=e.sibling}s.tail!==null&&Kt()>jh&&(t.flags|=128,i=!0,Df(s,!1),t.lanes=4194304)}else{if(!i)if(e=Kw(o),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Df(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!kt)return Ur(t),null}else 2*Kt()-s.renderingStartTime>jh&&r!==1073741824&&(t.flags|=128,i=!0,Df(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Kt(),t.sibling=null,r=Ft.current,gt(Ft,i?r&1|2:r&1),t):(Ur(t),null);case 22:case 23:return Rk(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?tn&1073741824&&(Ur(t),t.subtreeFlags&6&&(t.flags|=8192)):Ur(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function IJ(e,t){switch(hk(t),t.tag){case 1:return Fi(t.type)&&Gw(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fh(),Tt(Ni),Tt(ti),Sk(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _k(t),null;case 13:if(Tt(Ft),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));Lh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Tt(Ft),null;case 4:return Fh(),null;case 10:return gk(t.type._context),null;case 22:case 23:return Rk(),null;case 24:return null;default:return null}}var Jg=!1,Yr=!1,kJ=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Qp(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Wt(e,t,i)}else r.current=null}function aT(e,t,r){try{r()}catch(i){Wt(e,t,i)}}var OR=!1;function OJ(e,t){if(qx=jw,e=uj(),dk(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=e,m=null;t:for(;;){for(var y;f!==r||n!==0&&f.nodeType!==3||(a=o+n),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===e)break t;if(m===r&&++c===n&&(a=o),m===s&&++h===i&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Bx={focusedElem:e,selectionRange:r},jw=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,b=g.memoizedState,w=t.stateNode,_=w.getSnapshotBeforeUpdate(t.elementType===t.type?v:ms(t.type,v),b);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var $=t.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(E){Wt(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return g=OR,OR=!1,g}function gy(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&aT(t,r,s)}n=n.next}while(n!==i)}}function I_(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function lT(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function s6(e){var t=e.alternate;t!==null&&(e.alternate=null,s6(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mo],delete t[e0],delete t[Zx],delete t[pJ],delete t[hJ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function o6(e){return e.tag===5||e.tag===3||e.tag===4}function PR(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||o6(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uT(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Uw));else if(i!==4&&(e=e.child,e!==null))for(uT(e,t,r),e=e.sibling;e!==null;)uT(e,t,r),e=e.sibling}function cT(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(cT(e,t,r),e=e.sibling;e!==null;)cT(e,t,r),e=e.sibling}var Ar=null,gs=!1;function Va(e,t,r){for(r=r.child;r!==null;)a6(e,t,r),r=r.sibling}function a6(e,t,r){if(go&&typeof go.onCommitFiberUnmount=="function")try{go.onCommitFiberUnmount(b_,r)}catch{}switch(r.tag){case 5:Yr||Qp(r,t);case 6:var i=Ar,n=gs;Ar=null,Va(e,t,r),Ar=i,gs=n,Ar!==null&&(gs?(e=Ar,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ar.removeChild(r.stateNode));break;case 18:Ar!==null&&(gs?(e=Ar,r=r.stateNode,e.nodeType===8?P2(e.parentNode,r):e.nodeType===1&&P2(e,r),Jy(e)):P2(Ar,r.stateNode));break;case 4:i=Ar,n=gs,Ar=r.stateNode.containerInfo,gs=!0,Va(e,t,r),Ar=i,gs=n;break;case 0:case 11:case 14:case 15:if(!Yr&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&aT(r,t,o),n=n.next}while(n!==i)}Va(e,t,r);break;case 1:if(!Yr&&(Qp(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(a){Wt(r,t,a)}Va(e,t,r);break;case 21:Va(e,t,r);break;case 22:r.mode&1?(Yr=(i=Yr)||r.memoizedState!==null,Va(e,t,r),Yr=i):Va(e,t,r);break;default:Va(e,t,r)}}function CR(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new kJ),t.forEach(function(i){var n=jJ.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function Yn(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ar=a.stateNode,gs=!1;break e;case 3:Ar=a.stateNode.containerInfo,gs=!0;break e;case 4:Ar=a.stateNode.containerInfo,gs=!0;break e}a=a.return}if(Ar===null)throw Error(Y(160));a6(s,o,n),Ar=null,gs=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(c){Wt(n,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)l6(t,e),t=t.sibling}function l6(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yn(t,e),Vs(e),i&4){try{gy(3,e,e.return),I_(3,e)}catch(v){Wt(e,e.return,v)}try{gy(5,e,e.return)}catch(v){Wt(e,e.return,v)}}break;case 1:Yn(t,e),Vs(e),i&512&&r!==null&&Qp(r,r.return);break;case 5:if(Yn(t,e),Vs(e),i&512&&r!==null&&Qp(r,r.return),e.flags&32){var n=e.stateNode;try{By(n,"")}catch(v){Wt(e,e.return,v)}}if(i&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&OD(n,s),Ax(a,o);var c=Ax(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?LD(n,f):h==="dangerouslySetInnerHTML"?RD(n,f):h==="children"?By(n,f):QI(n,h,f,c)}switch(a){case"input":kx(n,s);break;case"textarea":PD(n,s);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?uh(n,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?uh(n,!!s.multiple,s.defaultValue,!0):uh(n,!!s.multiple,s.multiple?[]:"",!1))}n[e0]=s}catch(v){Wt(e,e.return,v)}}break;case 6:if(Yn(t,e),Vs(e),i&4){if(e.stateNode===null)throw Error(Y(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(v){Wt(e,e.return,v)}}break;case 3:if(Yn(t,e),Vs(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Jy(t.containerInfo)}catch(v){Wt(e,e.return,v)}break;case 4:Yn(t,e),Vs(e);break;case 13:Yn(t,e),Vs(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(Pk=Kt())),i&4&&CR(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Yr=(c=Yr)||h,Yn(t,e),Yr=c):Yn(t,e),Vs(e),i&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&e.mode&1)for(ue=e,h=e.child;h!==null;){for(f=ue=h;ue!==null;){switch(m=ue,y=m.child,m.tag){case 0:case 11:case 14:case 15:gy(4,m,m.return);break;case 1:Qp(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){i=m,r=m.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Wt(i,r,v)}}break;case 5:Qp(m,m.return);break;case 22:if(m.memoizedState!==null){AR(f);continue}}y!==null?(y.return=m,ue=y):AR(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{n=f.stateNode,c?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=AD("display",o))}catch(v){Wt(e,e.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Wt(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Yn(t,e),Vs(e),i&4&&CR(e);break;case 21:break;default:Yn(t,e),Vs(e)}}function Vs(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(o6(r)){var i=r;break e}r=r.return}throw Error(Y(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(By(n,""),i.flags&=-33);var s=PR(e);cT(e,s,n);break;case 3:case 4:var o=i.stateNode.containerInfo,a=PR(e);uT(e,a,o);break;default:throw Error(Y(161))}}catch(l){Wt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function PJ(e,t,r){ue=e,u6(e)}function u6(e,t,r){for(var i=(e.mode&1)!==0;ue!==null;){var n=ue,s=n.child;if(n.tag===22&&i){var o=n.memoizedState!==null||Jg;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||Yr;a=Jg;var c=Yr;if(Jg=o,(Yr=l)&&!c)for(ue=n;ue!==null;)o=ue,l=o.child,o.tag===22&&o.memoizedState!==null?LR(n):l!==null?(l.return=o,ue=l):LR(n);for(;s!==null;)ue=s,u6(s),s=s.sibling;ue=n,Jg=a,Yr=c}RR(e)}else n.subtreeFlags&8772&&s!==null?(s.return=n,ue=s):RR(e)}}function RR(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Yr||I_(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Yr)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:ms(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&gR(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}gR(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Jy(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Yr||t.flags&512&&lT(t)}catch(m){Wt(t,t.return,m)}}if(t===e){ue=null;break}if(r=t.sibling,r!==null){r.return=t.return,ue=r;break}ue=t.return}}function AR(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ue=r;break}ue=t.return}}function LR(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{I_(4,t)}catch(l){Wt(t,r,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(l){Wt(t,n,l)}}var s=t.return;try{lT(t)}catch(l){Wt(t,s,l)}break;case 5:var o=t.return;try{lT(t)}catch(l){Wt(t,o,l)}}}catch(l){Wt(t,t.return,l)}if(t===e){ue=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ue=a;break}ue=t.return}}var CJ=Math.ceil,Xw=Ra.ReactCurrentDispatcher,kk=Ra.ReactCurrentOwner,Vn=Ra.ReactCurrentBatchConfig,Ze=0,Er=null,or=null,Dr=0,tn=0,Xp=wu(0),yr=0,o0=null,cd=0,k_=0,Ok=0,vy=null,Oi=null,Pk=0,jh=1/0,aa=null,eb=!1,dT=null,eu=null,Kg=!1,Vl=null,tb=0,wy=0,pT=null,c1=-1,d1=0;function gi(){return Ze&6?Kt():c1!==-1?c1:c1=Kt()}function tu(e){return e.mode&1?Ze&2&&Dr!==0?Dr&-Dr:mJ.transition!==null?(d1===0&&(d1=WD()),d1):(e=at,e!==0||(e=window.event,e=e===void 0?16:ej(e.type)),e):1}function xs(e,t,r,i){if(50<wy)throw wy=0,pT=null,Error(Y(185));j0(e,r,i),(!(Ze&2)||e!==Er)&&(e===Er&&(!(Ze&2)&&(k_|=r),yr===4&&Fl(e,Dr)),Di(e,i),r===1&&Ze===0&&!(t.mode&1)&&(jh=Kt()+500,T_&&bu()))}function Di(e,t){var r=e.callbackNode;mZ(e,t);var i=Dw(e,e===Er?Dr:0);if(i===0)r!==null&&qC(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&qC(r),t===1)e.tag===0?fJ(NR.bind(null,e)):wj(NR.bind(null,e)),cJ(function(){!(Ze&6)&&bu()}),r=null;else{switch(ZD(i)){case 1:r=ik;break;case 4:r=BD;break;case 16:r=Fw;break;case 536870912:r=HD;break;default:r=Fw}r=g6(r,c6.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function c6(e,t){if(c1=-1,d1=0,Ze&6)throw Error(Y(327));var r=e.callbackNode;if(fh()&&e.callbackNode!==r)return null;var i=Dw(e,e===Er?Dr:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=rb(e,i);else{t=i;var n=Ze;Ze|=2;var s=p6();(Er!==e||Dr!==t)&&(aa=null,jh=Kt()+500,Zc(e,t));do try{LJ();break}catch(a){d6(e,a)}while(!0);yk(),Xw.current=s,Ze=n,or!==null?t=0:(Er=null,Dr=0,t=yr)}if(t!==0){if(t===2&&(n=jx(e),n!==0&&(i=n,t=hT(e,n))),t===1)throw r=o0,Zc(e,0),Fl(e,i),Di(e,Kt()),r;if(t===6)Fl(e,i);else{if(n=e.current.alternate,!(i&30)&&!RJ(n)&&(t=rb(e,i),t===2&&(s=jx(e),s!==0&&(i=s,t=hT(e,s))),t===1))throw r=o0,Zc(e,0),Fl(e,i),Di(e,Kt()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(Y(345));case 2:Hu(e,Oi,aa);break;case 3:if(Fl(e,i),(i&130023424)===i&&(t=Pk+500-Kt(),10<t)){if(Dw(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){gi(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Wx(Hu.bind(null,e,Oi,aa),t);break}Hu(e,Oi,aa);break;case 4:if(Fl(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var o=31-$s(i);s=1<<o,o=t[o],o>n&&(n=o),i&=~s}if(i=n,i=Kt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*CJ(i/1960))-i,10<i){e.timeoutHandle=Wx(Hu.bind(null,e,Oi,aa),i);break}Hu(e,Oi,aa);break;case 5:Hu(e,Oi,aa);break;default:throw Error(Y(329))}}}return Di(e,Kt()),e.callbackNode===r?c6.bind(null,e):null}function hT(e,t){var r=vy;return e.current.memoizedState.isDehydrated&&(Zc(e,t).flags|=256),e=rb(e,t),e!==2&&(t=Oi,Oi=r,t!==null&&fT(t)),e}function fT(e){Oi===null?Oi=e:Oi.push.apply(Oi,e)}function RJ(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!Cs(s(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fl(e,t){for(t&=~Ok,t&=~k_,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-$s(t),i=1<<r;e[r]=-1,t&=~i}}function NR(e){if(Ze&6)throw Error(Y(327));fh();var t=Dw(e,0);if(!(t&1))return Di(e,Kt()),null;var r=rb(e,t);if(e.tag!==0&&r===2){var i=jx(e);i!==0&&(t=i,r=hT(e,i))}if(r===1)throw r=o0,Zc(e,0),Fl(e,t),Di(e,Kt()),r;if(r===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hu(e,Oi,aa),Di(e,Kt()),null}function Ck(e,t){var r=Ze;Ze|=1;try{return e(t)}finally{Ze=r,Ze===0&&(jh=Kt()+500,T_&&bu())}}function dd(e){Vl!==null&&Vl.tag===0&&!(Ze&6)&&fh();var t=Ze;Ze|=1;var r=Vn.transition,i=at;try{if(Vn.transition=null,at=1,e)return e()}finally{at=i,Vn.transition=r,Ze=t,!(Ze&6)&&bu()}}function Rk(){tn=Xp.current,Tt(Xp)}function Zc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,uJ(r)),or!==null)for(r=or.return;r!==null;){var i=r;switch(hk(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Gw();break;case 3:Fh(),Tt(Ni),Tt(ti),Sk();break;case 5:_k(i);break;case 4:Fh();break;case 13:Tt(Ft);break;case 19:Tt(Ft);break;case 10:gk(i.type._context);break;case 22:case 23:Rk()}r=r.return}if(Er=e,or=e=ru(e.current,null),Dr=tn=t,yr=0,o0=null,Ok=k_=cd=0,Oi=vy=null,jc!==null){for(t=0;t<jc.length;t++)if(r=jc[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,s=r.pending;if(s!==null){var o=s.next;s.next=n,i.next=o}r.pending=i}jc=null}return e}function d6(e,t){do{var r=or;try{if(yk(),a1.current=Qw,Yw){for(var i=Dt.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Yw=!1}if(ud=0,Tr=fr=Dt=null,yy=!1,i0=0,kk.current=null,r===null||r.return===null){yr=1,o0=t,or=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=Dr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=$R(o);if(y!==null){y.flags&=-257,xR(y,o,a,s,t),y.mode&1&&SR(s,c,t),t=y,l=c;var g=t.updateQueue;if(g===null){var v=new Set;v.add(l),t.updateQueue=v}else g.add(l);break e}else{if(!(t&1)){SR(s,c,t),Ak();break e}l=Error(Y(426))}}else if(kt&&a.mode&1){var b=$R(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),xR(b,o,a,s,t),fk(Dh(l,a));break e}}s=l=Dh(l,a),yr!==4&&(yr=2),vy===null?vy=[s]:vy.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var w=Zj(s,l,t);yR(s,w);break e;case 1:a=l;var _=s.type,$=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(eu===null||!eu.has($)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=Jj(s,a,t);yR(s,E);break e}}s=s.return}while(s!==null)}f6(r)}catch(k){t=k,or===r&&r!==null&&(or=r=r.return);continue}break}while(!0)}function p6(){var e=Xw.current;return Xw.current=Qw,e===null?Qw:e}function Ak(){(yr===0||yr===3||yr===2)&&(yr=4),Er===null||!(cd&268435455)&&!(k_&268435455)||Fl(Er,Dr)}function rb(e,t){var r=Ze;Ze|=2;var i=p6();(Er!==e||Dr!==t)&&(aa=null,Zc(e,t));do try{AJ();break}catch(n){d6(e,n)}while(!0);if(yk(),Ze=r,Xw.current=i,or!==null)throw Error(Y(261));return Er=null,Dr=0,yr}function AJ(){for(;or!==null;)h6(or)}function LJ(){for(;or!==null&&!oZ();)h6(or)}function h6(e){var t=y6(e.alternate,e,tn);e.memoizedProps=e.pendingProps,t===null?f6(e):or=t,kk.current=null}function f6(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=IJ(r,t),r!==null){r.flags&=32767,or=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yr=6,or=null;return}}else if(r=EJ(r,t,tn),r!==null){or=r;return}if(t=t.sibling,t!==null){or=t;return}or=t=e}while(t!==null);yr===0&&(yr=5)}function Hu(e,t,r){var i=at,n=Vn.transition;try{Vn.transition=null,at=1,NJ(e,t,r,i)}finally{Vn.transition=n,at=i}return null}function NJ(e,t,r,i){do fh();while(Vl!==null);if(Ze&6)throw Error(Y(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(yZ(e,s),e===Er&&(or=Er=null,Dr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Kg||(Kg=!0,g6(Fw,function(){return fh(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Vn.transition,Vn.transition=null;var o=at;at=1;var a=Ze;Ze|=4,kk.current=null,OJ(e,r),l6(r,e),rJ(Bx),jw=!!qx,Bx=qx=null,e.current=r,PJ(r),aZ(),Ze=a,at=o,Vn.transition=s}else e.current=r;if(Kg&&(Kg=!1,Vl=e,tb=n),s=e.pendingLanes,s===0&&(eu=null),cZ(r.stateNode),Di(e,Kt()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(eb)throw eb=!1,e=dT,dT=null,e;return tb&1&&e.tag!==0&&fh(),s=e.pendingLanes,s&1?e===pT?wy++:(wy=0,pT=e):wy=0,bu(),null}function fh(){if(Vl!==null){var e=ZD(tb),t=Vn.transition,r=at;try{if(Vn.transition=null,at=16>e?16:e,Vl===null)var i=!1;else{if(e=Vl,Vl=null,tb=0,Ze&6)throw Error(Y(331));var n=Ze;for(Ze|=4,ue=e.current;ue!==null;){var s=ue,o=s.child;if(ue.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ue=c;ue!==null;){var h=ue;switch(h.tag){case 0:case 11:case 15:gy(8,h,s)}var f=h.child;if(f!==null)f.return=h,ue=f;else for(;ue!==null;){h=ue;var m=h.sibling,y=h.return;if(s6(h),h===c){ue=null;break}if(m!==null){m.return=y,ue=m;break}ue=y}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}ue=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ue=o;else e:for(;ue!==null;){if(s=ue,s.flags&2048)switch(s.tag){case 0:case 11:case 15:gy(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ue=w;break e}ue=s.return}}var _=e.current;for(ue=_;ue!==null;){o=ue;var $=o.child;if(o.subtreeFlags&2064&&$!==null)$.return=o,ue=$;else e:for(o=_;ue!==null;){if(a=ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:I_(9,a)}}catch(k){Wt(a,a.return,k)}if(a===o){ue=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,ue=E;break e}ue=a.return}}if(Ze=n,bu(),go&&typeof go.onPostCommitFiberRoot=="function")try{go.onPostCommitFiberRoot(b_,e)}catch{}i=!0}return i}finally{at=r,Vn.transition=t}}return!1}function FR(e,t,r){t=Dh(r,t),t=Zj(e,t,1),e=Xl(e,t,1),t=gi(),e!==null&&(j0(e,1,t),Di(e,t))}function Wt(e,t,r){if(e.tag===3)FR(e,e,r);else for(;t!==null;){if(t.tag===3){FR(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(eu===null||!eu.has(i))){e=Dh(r,e),e=Jj(t,e,1),t=Xl(t,e,1),e=gi(),t!==null&&(j0(t,1,e),Di(t,e));break}}t=t.return}}function FJ(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=gi(),e.pingedLanes|=e.suspendedLanes&r,Er===e&&(Dr&r)===r&&(yr===4||yr===3&&(Dr&130023424)===Dr&&500>Kt()-Pk?Zc(e,0):Ok|=r),Di(e,t)}function m6(e,t){t===0&&(e.mode&1?(t=zg,zg<<=1,!(zg&130023424)&&(zg=4194304)):t=1);var r=gi();e=Ta(e,t),e!==null&&(j0(e,t,r),Di(e,r))}function DJ(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),m6(e,r)}function jJ(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(t),m6(e,r)}var y6;y6=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ni.current)Ri=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ri=!1,MJ(e,t,r);Ri=!!(e.flags&131072)}else Ri=!1,kt&&t.flags&1048576&&bj(t,Hw,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;u1(e,t),e=t.pendingProps;var n=Ah(t,ti.current);hh(t,r),n=xk(null,t,i,e,n,r);var s=Tk();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fi(i)?(s=!0,qw(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,wk(t),n.updater=E_,t.stateNode=n,n._reactInternals=t,eT(t,i,e,r),t=iT(null,t,i,!0,s,r)):(t.tag=0,kt&&s&&pk(t),mi(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(u1(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=VJ(i),e=ms(i,e),n){case 0:t=rT(null,t,i,e,r);break e;case 1:t=ER(null,t,i,e,r);break e;case 11:t=TR(null,t,i,e,r);break e;case 14:t=MR(null,t,i,ms(i.type,e),r);break e}throw Error(Y(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ms(i,n),rT(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ms(i,n),ER(e,t,i,n,r);case 3:e:{if(Xj(t),e===null)throw Error(Y(387));i=t.pendingProps,s=t.memoizedState,n=s.element,Mj(e,t),Jw(t,i,null,r);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=Dh(Error(Y(423)),t),t=IR(e,t,i,r,n);break e}else if(i!==n){n=Dh(Error(Y(424)),t),t=IR(e,t,i,r,n);break e}else for(sn=Ql(t.stateNode.containerInfo.firstChild),an=t,kt=!0,_s=null,r=xj(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Lh(),i===n){t=Ma(e,t,r);break e}mi(e,t,i,r)}t=t.child}return t;case 5:return Ej(t),e===null&&Yx(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,o=n.children,Hx(i,n)?o=null:s!==null&&Hx(i,s)&&(t.flags|=32),Qj(e,t),mi(e,t,o,r),t.child;case 6:return e===null&&Yx(t),null;case 13:return e6(e,t,r);case 4:return bk(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Nh(t,null,i,r):mi(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ms(i,n),TR(e,t,i,n,r);case 7:return mi(e,t,t.pendingProps,r),t.child;case 8:return mi(e,t,t.pendingProps.children,r),t.child;case 12:return mi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,o=n.value,gt(Ww,i._currentValue),i._currentValue=o,s!==null)if(Cs(s.value,o)){if(s.children===n.children&&!Ni.current){t=Ma(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=wa(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Qx(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Qx(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mi(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,hh(t,r),n=Hn(n),i=i(n),t.flags|=1,mi(e,t,i,r),t.child;case 14:return i=t.type,n=ms(i,t.pendingProps),n=ms(i.type,n),MR(e,t,i,n,r);case 15:return Kj(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ms(i,n),u1(e,t),t.tag=1,Fi(i)?(e=!0,qw(t)):e=!1,hh(t,r),Wj(t,i,n),eT(t,i,n,r),iT(null,t,i,!0,e,r);case 19:return t6(e,t,r);case 22:return Yj(e,t,r)}throw Error(Y(156,t.tag))};function g6(e,t){return qD(e,t)}function zJ(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(e,t,r,i){return new zJ(e,t,r,i)}function Lk(e){return e=e.prototype,!(!e||!e.isReactComponent)}function VJ(e){if(typeof e=="function")return Lk(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ek)return 11;if(e===tk)return 14}return 2}function ru(e,t){var r=e.alternate;return r===null?(r=Fn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function p1(e,t,r,i,n,s){var o=2;if(i=e,typeof e=="function")Lk(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Gp:return Jc(r.children,n,s,t);case XI:o=8,n|=8;break;case xx:return e=Fn(12,r,t,n|2),e.elementType=xx,e.lanes=s,e;case Tx:return e=Fn(13,r,t,n),e.elementType=Tx,e.lanes=s,e;case Mx:return e=Fn(19,r,t,n),e.elementType=Mx,e.lanes=s,e;case ED:return O_(r,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case TD:o=10;break e;case MD:o=9;break e;case ek:o=11;break e;case tk:o=14;break e;case El:o=16,i=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=Fn(o,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function Jc(e,t,r,i){return e=Fn(7,e,i,t),e.lanes=r,e}function O_(e,t,r,i){return e=Fn(22,e,i,t),e.elementType=ED,e.lanes=r,e.stateNode={isHidden:!1},e}function j2(e,t,r){return e=Fn(6,e,null,t),e.lanes=r,e}function z2(e,t,r){return t=Fn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function UJ(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=b2(0),this.expirationTimes=b2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=b2(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Nk(e,t,r,i,n,s,o,a,l){return e=new UJ(e,t,r,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Fn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wk(s),e}function GJ(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Up,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function v6(e){if(!e)return au;e=e._reactInternals;e:{if(Pd(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var r=e.type;if(Fi(r))return vj(e,r,t)}return t}function w6(e,t,r,i,n,s,o,a,l){return e=Nk(r,i,!0,e,n,s,o,a,l),e.context=v6(null),r=e.current,i=gi(),n=tu(r),s=wa(i,n),s.callback=t??null,Xl(r,s,n),e.current.lanes=n,j0(e,n,i),Di(e,i),e}function P_(e,t,r,i){var n=t.current,s=gi(),o=tu(n);return r=v6(r),t.context===null?t.context=r:t.pendingContext=r,t=wa(s,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Xl(n,t,o),e!==null&&(xs(e,n,o,s),o1(e,n,o)),o}function ib(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function DR(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Fk(e,t){DR(e,t),(e=e.alternate)&&DR(e,t)}function qJ(){return null}var b6=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dk(e){this._internalRoot=e}C_.prototype.render=Dk.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));P_(e,t,null,null)};C_.prototype.unmount=Dk.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dd(function(){P_(null,e,null,null)}),t[xa]=null}};function C_(e){this._internalRoot=e}C_.prototype.unstable_scheduleHydration=function(e){if(e){var t=YD();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Nl.length&&t!==0&&t<Nl[r].priority;r++);Nl.splice(r,0,e),r===0&&XD(e)}};function jk(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function R_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jR(){}function BJ(e,t,r,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var c=ib(o);s.call(c)}}var o=w6(t,i,e,0,null,!1,!1,"",jR);return e._reactRootContainer=o,e[xa]=o.current,Qy(e.nodeType===8?e.parentNode:e),dd(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var c=ib(l);a.call(c)}}var l=Nk(e,0,!1,null,null,!1,!1,"",jR);return e._reactRootContainer=l,e[xa]=l.current,Qy(e.nodeType===8?e.parentNode:e),dd(function(){P_(t,l,r,i)}),l}function A_(e,t,r,i,n){var s=r._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var l=ib(o);a.call(l)}}P_(t,o,e,n)}else o=BJ(r,t,e,n,i);return ib(o)}JD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=pm(t.pendingLanes);r!==0&&(nk(t,r|1),Di(t,Kt()),!(Ze&6)&&(jh=Kt()+500,bu()))}break;case 13:dd(function(){var i=Ta(e,1);if(i!==null){var n=gi();xs(i,e,1,n)}}),Fk(e,1)}};sk=function(e){if(e.tag===13){var t=Ta(e,134217728);if(t!==null){var r=gi();xs(t,e,134217728,r)}Fk(e,134217728)}};KD=function(e){if(e.tag===13){var t=tu(e),r=Ta(e,t);if(r!==null){var i=gi();xs(r,e,t,i)}Fk(e,t)}};YD=function(){return at};QD=function(e,t){var r=at;try{return at=e,t()}finally{at=r}};Nx=function(e,t,r){switch(t){case"input":if(kx(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=x_(i);if(!n)throw Error(Y(90));kD(i),kx(i,n)}}}break;case"textarea":PD(e,r);break;case"select":t=r.value,t!=null&&uh(e,!!r.multiple,t,!1)}};DD=Ck;jD=dd;var HJ={usingClientEntryPoint:!1,Events:[V0,Wp,x_,ND,FD,Ck]},jf={findFiberByHostInstance:Dc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WJ={bundleType:jf.bundleType,version:jf.version,rendererPackageName:jf.rendererPackageName,rendererConfig:jf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=UD(e),e===null?null:e.stateNode},findFiberByHostInstance:jf.findFiberByHostInstance||qJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yg.isDisabled&&Yg.supportsFiber)try{b_=Yg.inject(WJ),go=Yg}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HJ;fn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jk(t))throw Error(Y(200));return GJ(e,t,null,r)};fn.createRoot=function(e,t){if(!jk(e))throw Error(Y(299));var r=!1,i="",n=b6;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Nk(e,1,!1,null,null,r,!1,i,n),e[xa]=t.current,Qy(e.nodeType===8?e.parentNode:e),new Dk(t)};fn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=UD(t),e=e===null?null:e.stateNode,e};fn.flushSync=function(e){return dd(e)};fn.hydrate=function(e,t,r){if(!R_(t))throw Error(Y(200));return A_(null,e,t,!0,r)};fn.hydrateRoot=function(e,t,r){if(!jk(e))throw Error(Y(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",o=b6;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=w6(t,null,e,1,r??null,n,!1,s,o),e[xa]=t.current,Qy(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new C_(t)};fn.render=function(e,t,r){if(!R_(t))throw Error(Y(200));return A_(null,e,t,!1,r)};fn.unmountComponentAtNode=function(e){if(!R_(e))throw Error(Y(40));return e._reactRootContainer?(dd(function(){A_(null,null,e,!1,function(){e._reactRootContainer=null,e[xa]=null})}),!0):!1};fn.unstable_batchedUpdates=Ck;fn.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!R_(r))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return A_(e,t,r,!1,i)};fn.version="18.3.1-next-f1338f8080-20240426";function _6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_6)}catch(e){console.error(e)}}_6(),_D.exports=fn;var zk=_D.exports;const ZJ=lD(zk),JJ=aD({__proto__:null,default:ZJ},[zk]);var zR=zk;Sx.createRoot=zR.createRoot,Sx.hydrateRoot=zR.hydrateRoot;/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nt(){return Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Nt.apply(this,arguments)}var nr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(nr||(nr={}));const VR="popstate";function KJ(e){e===void 0&&(e={});function t(i,n){let{pathname:s,search:o,hash:a}=i.location;return a0("",{pathname:s,search:o,hash:a},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(i,n){return typeof n=="string"?n:G0(n)}return QJ(t,r,null,e)}function Ue(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function YJ(){return Math.random().toString(36).substr(2,8)}function UR(e,t){return{usr:e.state,key:e.key,idx:t}}function a0(e,t,r,i){return r===void 0&&(r=null),Nt({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?_u(t):t,{state:r,key:t&&t.key||i||YJ()})}function G0(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function _u(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function QJ(e,t,r,i){i===void 0&&(i={});let{window:n=document.defaultView,v5Compat:s=!1}=i,o=n.history,a=nr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Nt({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=nr.Pop;let b=h(),w=b==null?null:b-c;c=b,l&&l({action:a,location:v.location,delta:w})}function m(b,w){a=nr.Push;let _=a0(v.location,b,w);c=h()+1;let $=UR(_,c),E=v.createHref(_);try{o.pushState($,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;n.location.assign(E)}s&&l&&l({action:a,location:v.location,delta:1})}function y(b,w){a=nr.Replace;let _=a0(v.location,b,w);c=h();let $=UR(_,c),E=v.createHref(_);o.replaceState($,"",E),s&&l&&l({action:a,location:v.location,delta:0})}function g(b){let w=n.location.origin!=="null"?n.location.origin:n.location.href,_=typeof b=="string"?b:G0(b);return _=_.replace(/ $/,"%20"),Ue(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let v={get action(){return a},get location(){return e(n,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(VR,f),l=b,()=>{n.removeEventListener(VR,f),l=null}},createHref(b){return t(n,b)},createURL:g,encodeLocation(b){let w=g(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:y,go(b){return o.go(b)}};return v}var yt;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(yt||(yt={}));const XJ=new Set(["lazy","caseSensitive","path","id","index","children"]);function eK(e){return e.index===!0}function l0(e,t,r,i){return r===void 0&&(r=[]),i===void 0&&(i={}),e.map((n,s)=>{let o=[...r,String(s)],a=typeof n.id=="string"?n.id:o.join("-");if(Ue(n.index!==!0||!n.children,"Cannot specify children on an index route"),Ue(!i[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),eK(n)){let l=Nt({},n,t(n),{id:a});return i[a]=l,l}else{let l=Nt({},n,t(n),{id:a,children:void 0});return i[a]=l,n.children&&(l.children=l0(n.children,t,o,i)),l}})}function Pc(e,t,r){return r===void 0&&(r="/"),h1(e,t,r,!1)}function h1(e,t,r,i){let n=typeof t=="string"?_u(t):t,s=q0(n.pathname||"/",r);if(s==null)return null;let o=S6(e);rK(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=hK(s);a=dK(o[l],c,i)}return a}function tK(e,t){let{route:r,pathname:i,params:n}=e;return{id:r.id,pathname:i,params:n,data:t[r.id],handle:r.handle}}function S6(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let n=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ue(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Kc([i,l.relativePath]),h=r.concat(l);s.children&&s.children.length>0&&(Ue(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),S6(s.children,t,h,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:uK(c,s.index),routesMeta:h})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))n(s,o);else for(let l of $6(s.path))n(s,o,l)}),t}function $6(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,n=r.endsWith("?"),s=r.replace(/\?$/,"");if(i.length===0)return n?[s,""]:[s];let o=$6(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),n&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function rK(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:cK(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const iK=/^:[\w-]+$/,nK=3,sK=2,oK=1,aK=10,lK=-2,GR=e=>e==="*";function uK(e,t){let r=e.split("/"),i=r.length;return r.some(GR)&&(i+=lK),t&&(i+=sK),r.filter(n=>!GR(n)).reduce((n,s)=>n+(iK.test(s)?nK:s===""?oK:aK),i)}function cK(e,t){return e.length===t.length&&e.slice(0,-1).every((i,n)=>i===t[n])?e[e.length-1]-t[t.length-1]:0}function dK(e,t,r){r===void 0&&(r=!1);let{routesMeta:i}=e,n={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?t:t.slice(s.length)||"/",f=qR({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!f&&c&&r&&!i[i.length-1].route.index&&(f=qR({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(n,f.params),o.push({params:n,pathname:Kc([s,f.pathname]),pathnameBase:vK(Kc([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Kc([s,f.pathnameBase]))}return o}function qR(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=pK(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let s=n[0],o=s.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:i.reduce((c,h,f)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let v=a[f]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[f];return y&&!g?c[m]=void 0:c[m]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:e}}function pK(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),zh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),i]}function hK(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function q0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function fK(e,t){t===void 0&&(t="/");let{pathname:r,search:i="",hash:n=""}=typeof e=="string"?_u(e):e;return{pathname:r?r.startsWith("/")?r:mK(r,t):t,search:wK(i),hash:bK(n)}}function mK(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function V2(e,t,r,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function x6(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function yK(e,t){let r=x6(e);return t?r.map((i,n)=>n===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function gK(e,t,r,i){i===void 0&&(i=!1);let n;typeof e=="string"?n=_u(e):(n=Nt({},e),Ue(!n.pathname||!n.pathname.includes("?"),V2("?","pathname","search",n)),Ue(!n.pathname||!n.pathname.includes("#"),V2("#","pathname","hash",n)),Ue(!n.search||!n.search.includes("#"),V2("#","search","hash",n)));let s=e===""||n.pathname==="",o=s?"/":n.pathname,a;if(o==null)a=r;else{let f=t.length-1;if(!i&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;n.pathname=m.join("/")}a=f>=0?t[f]:"/"}let l=fK(n,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Kc=e=>e.join("/").replace(/\/\/+/g,"/"),vK=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wK=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bK=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Vk{constructor(t,r,i,n){n===void 0&&(n=!1),this.status=t,this.statusText=r||"",this.internal=n,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function L_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const T6=["post","put","patch","delete"],_K=new Set(T6),SK=["get",...T6],$K=new Set(SK),xK=new Set([301,302,303,307,308]),TK=new Set([307,308]),U2={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},MK={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},zf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Uk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EK=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),M6="remix-router-transitions";function IK(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",i=!r;Ue(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n;if(e.mapRouteProperties)n=e.mapRouteProperties;else if(e.detectErrorBoundary){let O=e.detectErrorBoundary;n=x=>({hasErrorBoundary:O(x)})}else n=EK;let s={},o=l0(e.routes,n,void 0,s),a,l=e.basename||"/",c=e.unstable_dataStrategy||RK,h=e.unstable_patchRoutesOnMiss,f=Nt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),m=null,y=new Set,g=null,v=null,b=null,w=e.hydrationData!=null,_=Pc(o,e.history.location,l),$=null;if(_==null&&!h){let O=fi(404,{pathname:e.history.location.pathname}),{matches:x,route:L}=eA(o);_=x,$={[L.id]:O}}_&&h&&Pf(_,o,e.history.location.pathname).active&&(_=null);let E;if(!_)E=!1,_=[];else if(_.some(O=>O.route.lazy))E=!1;else if(!_.some(O=>O.route.loader))E=!0;else if(f.v7_partialHydration){let O=e.hydrationData?e.hydrationData.loaderData:null,x=e.hydrationData?e.hydrationData.errors:null,L=U=>U.route.loader?typeof U.route.loader=="function"&&U.route.loader.hydrate===!0?!1:O&&O[U.route.id]!==void 0||x&&x[U.route.id]!==void 0:!0;if(x){let U=_.findIndex(re=>x[re.route.id]!==void 0);E=_.slice(0,U+1).every(L)}else E=_.every(L)}else E=e.hydrationData!=null;let k,M={historyAction:e.history.action,location:e.history.location,matches:_,initialized:E,navigation:U2,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||$,fetchers:new Map,blockers:new Map},P=nr.Pop,N=!1,j,G=!1,W=new Map,ie=null,me=!1,ne=!1,nt=[],Xt=[],Ie=new Map,K=0,be=-1,Ee=new Map,Ge=new Set,pt=new Map,qi=new Map,lr=new Set,Bi=new Map,Or=new Map,Po=new Map,Ef=!1;function QS(){if(m=e.history.listen(O=>{let{action:x,location:L,delta:U}=O;if(Ef){Ef=!1;return}zh(Or.size===0||U!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let re=Og({currentLocation:M.location,nextLocation:L,historyAction:x});if(re&&U!=null){Ef=!0,e.history.go(U*-1),Ud(re,{state:"blocked",location:L,proceed(){Ud(re,{state:"proceeding",proceed:void 0,reset:void 0,location:L}),e.history.go(U)},reset(){let de=new Map(M.blockers);de.set(re,zf),Pr({blockers:de})}});return}return Co(x,L)}),r){HK(t,W);let O=()=>WK(t,W);t.addEventListener("pagehide",O),ie=()=>t.removeEventListener("pagehide",O)}return M.initialized||Co(nr.Pop,M.location,{initialHydration:!0}),k}function XS(){m&&m(),ie&&ie(),y.clear(),j&&j.abort(),M.fetchers.forEach((O,x)=>Vd(x)),M.blockers.forEach((O,x)=>kg(x))}function e2(O){return y.add(O),()=>y.delete(O)}function Pr(O,x){x===void 0&&(x={}),M=Nt({},M,O);let L=[],U=[];f.v7_fetcherPersist&&M.fetchers.forEach((re,de)=>{re.state==="idle"&&(lr.has(de)?U.push(de):L.push(de))}),[...y].forEach(re=>re(M,{deletedFetchers:U,unstable_viewTransitionOpts:x.viewTransitionOpts,unstable_flushSync:x.flushSync===!0})),f.v7_fetcherPersist&&(L.forEach(re=>M.fetchers.delete(re)),U.forEach(re=>Vd(re)))}function Da(O,x,L){var U,re;let{flushSync:de}=L===void 0?{}:L,B=M.actionData!=null&&M.navigation.formMethod!=null&&vs(M.navigation.formMethod)&&M.navigation.state==="loading"&&((U=O.state)==null?void 0:U._isRedirect)!==!0,te;x.actionData?Object.keys(x.actionData).length>0?te=x.actionData:te=null:B?te=M.actionData:te=null;let he=x.loaderData?QR(M.loaderData,x.loaderData,x.matches||[],x.errors):M.loaderData,ge=M.blockers;ge.size>0&&(ge=new Map(ge),ge.forEach((qe,tt)=>ge.set(tt,zf)));let $e=N===!0||M.navigation.formMethod!=null&&vs(M.navigation.formMethod)&&((re=O.state)==null?void 0:re._isRedirect)!==!0;a&&(o=a,a=void 0),me||P===nr.Pop||(P===nr.Push?e.history.push(O,O.state):P===nr.Replace&&e.history.replace(O,O.state));let je;if(P===nr.Pop){let qe=W.get(M.location.pathname);qe&&qe.has(O.pathname)?je={currentLocation:M.location,nextLocation:O}:W.has(O.pathname)&&(je={currentLocation:O,nextLocation:M.location})}else if(G){let qe=W.get(M.location.pathname);qe?qe.add(O.pathname):(qe=new Set([O.pathname]),W.set(M.location.pathname,qe)),je={currentLocation:M.location,nextLocation:O}}Pr(Nt({},x,{actionData:te,loaderData:he,historyAction:P,location:O,initialized:!0,navigation:U2,revalidation:"idle",restoreScrollPosition:Cg(O,x.matches||M.matches),preventScrollReset:$e,blockers:ge}),{viewTransitionOpts:je,flushSync:de===!0}),P=nr.Pop,N=!1,G=!1,me=!1,ne=!1,nt=[],Xt=[]}async function $g(O,x){if(typeof O=="number"){e.history.go(O);return}let L=mT(M.location,M.matches,l,f.v7_prependBasename,O,f.v7_relativeSplatPath,x==null?void 0:x.fromRouteId,x==null?void 0:x.relative),{path:U,submission:re,error:de}=BR(f.v7_normalizeFormMethod,!1,L,x),B=M.location,te=a0(M.location,U,x&&x.state);te=Nt({},te,e.history.encodeLocation(te));let he=x&&x.replace!=null?x.replace:void 0,ge=nr.Push;he===!0?ge=nr.Replace:he===!1||re!=null&&vs(re.formMethod)&&re.formAction===M.location.pathname+M.location.search&&(ge=nr.Replace);let $e=x&&"preventScrollReset"in x?x.preventScrollReset===!0:void 0,je=(x&&x.unstable_flushSync)===!0,qe=Og({currentLocation:B,nextLocation:te,historyAction:ge});if(qe){Ud(qe,{state:"blocked",location:te,proceed(){Ud(qe,{state:"proceeding",proceed:void 0,reset:void 0,location:te}),$g(O,x)},reset(){let tt=new Map(M.blockers);tt.set(qe,zf),Pr({blockers:tt})}});return}return await Co(ge,te,{submission:re,pendingError:de,preventScrollReset:$e,replace:x&&x.replace,enableViewTransition:x&&x.unstable_viewTransition,flushSync:je})}function t2(){if(gn(),Pr({revalidation:"loading"}),M.navigation.state!=="submitting"){if(M.navigation.state==="idle"){Co(M.historyAction,M.location,{startUninterruptedRevalidation:!0});return}Co(P||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation})}}async function Co(O,x,L){j&&j.abort(),j=null,P=O,me=(L&&L.startUninterruptedRevalidation)===!0,d2(M.location,M.matches),N=(L&&L.preventScrollReset)===!0,G=(L&&L.enableViewTransition)===!0;let U=a||o,re=L&&L.overrideNavigation,de=Pc(U,x,l),B=(L&&L.flushSync)===!0,te=Pf(de,U,x.pathname);if(te.active&&te.matches&&(de=te.matches),!de){let{error:se,notFoundMatches:ur,route:Rt}=kf(x.pathname);Da(x,{matches:ur,loaderData:{},errors:{[Rt.id]:se}},{flushSync:B});return}if(M.initialized&&!ne&&jK(M.location,x)&&!(L&&L.submission&&vs(L.submission.formMethod))){Da(x,{matches:de},{flushSync:B});return}j=new AbortController;let he=Zd(e.history,x,j.signal,L&&L.submission),ge;if(L&&L.pendingError)ge=[by(de).route.id,{type:yt.error,error:L.pendingError}];else if(L&&L.submission&&vs(L.submission.formMethod)){let se=await r2(he,x,L.submission,de,te.active,{replace:L.replace,flushSync:B});if(se.shortCircuited)return;if(se.pendingActionResult){let[ur,Rt]=se.pendingActionResult;if(nn(Rt)&&L_(Rt.error)&&Rt.error.status===404){j=null,Da(x,{matches:se.matches,loaderData:{},errors:{[ur]:Rt.error}});return}}de=se.matches||de,ge=se.pendingActionResult,re=G2(x,L.submission),B=!1,te.active=!1,he=Zd(e.history,he.url,he.signal)}let{shortCircuited:$e,matches:je,loaderData:qe,errors:tt}=await i2(he,x,de,te.active,re,L&&L.submission,L&&L.fetcherSubmission,L&&L.replace,L&&L.initialHydration===!0,B,ge);$e||(j=null,Da(x,Nt({matches:je||de},XR(ge),{loaderData:qe,errors:tt})))}async function r2(O,x,L,U,re,de){de===void 0&&(de={}),gn();let B=qK(x,L);if(Pr({navigation:B},{flushSync:de.flushSync===!0}),re){let ge=await qd(U,x.pathname,O.signal);if(ge.type==="aborted")return{shortCircuited:!0};if(ge.type==="error"){let{error:$e,notFoundMatches:je,route:qe}=Gd(x.pathname,ge);return{matches:je,pendingActionResult:[qe.id,{type:yt.error,error:$e}]}}else if(ge.matches)U=ge.matches;else{let{notFoundMatches:$e,error:je,route:qe}=kf(x.pathname);return{matches:$e,pendingActionResult:[qe.id,{type:yt.error,error:je}]}}}let te,he=fm(U,x);if(!he.route.action&&!he.route.lazy)te={type:yt.error,error:fi(405,{method:O.method,pathname:x.pathname,routeId:he.route.id})};else if(te=(await ja("action",O,[he],U))[0],O.signal.aborted)return{shortCircuited:!0};if(Uc(te)){let ge;return de&&de.replace!=null?ge=de.replace:ge=JR(te.response.headers.get("Location"),new URL(O.url),l)===M.location.pathname+M.location.search,await Au(O,te,{submission:L,replace:ge}),{shortCircuited:!0}}if(Vc(te))throw fi(400,{type:"defer-action"});if(nn(te)){let ge=by(U,he.route.id);return(de&&de.replace)!==!0&&(P=nr.Push),{matches:U,pendingActionResult:[ge.route.id,te]}}return{matches:U,pendingActionResult:[he.route.id,te]}}async function i2(O,x,L,U,re,de,B,te,he,ge,$e){let je=re||G2(x,de),qe=de||B||iA(je),tt=!me&&(!f.v7_partialHydration||!he);if(U){if(tt){let Mt=xg($e);Pr(Nt({navigation:je},Mt!==void 0?{actionData:Mt}:{}),{flushSync:ge})}let Le=await qd(L,x.pathname,O.signal);if(Le.type==="aborted")return{shortCircuited:!0};if(Le.type==="error"){let{error:Mt,notFoundMatches:oi,route:lt}=Gd(x.pathname,Le);return{matches:oi,loaderData:{},errors:{[lt.id]:Mt}}}else if(Le.matches)L=Le.matches;else{let{error:Mt,notFoundMatches:oi,route:lt}=kf(x.pathname);return{matches:oi,loaderData:{},errors:{[lt.id]:Mt}}}}let se=a||o,[ur,Rt]=HR(e.history,M,L,qe,x,f.v7_partialHydration&&he===!0,f.unstable_skipActionErrorRevalidation,ne,nt,Xt,lr,pt,Ge,se,l,$e);if(Of(Le=>!(L&&L.some(Mt=>Mt.route.id===Le))||ur&&ur.some(Mt=>Mt.route.id===Le)),be=++K,ur.length===0&&Rt.length===0){let Le=Eg();return Da(x,Nt({matches:L,loaderData:{},errors:$e&&nn($e[1])?{[$e[0]]:$e[1].error}:null},XR($e),Le?{fetchers:new Map(M.fetchers)}:{}),{flushSync:ge}),{shortCircuited:!0}}if(tt){let Le={};if(!U){Le.navigation=je;let Mt=xg($e);Mt!==void 0&&(Le.actionData=Mt)}Rt.length>0&&(Le.fetchers=n2(Rt)),Pr(Le,{flushSync:ge})}Rt.forEach(Le=>{Ie.has(Le.key)&&Fs(Le.key),Le.controller&&Ie.set(Le.key,Le.controller)});let Lu=()=>Rt.forEach(Le=>Fs(Le.key));j&&j.signal.addEventListener("abort",Lu);let{loaderResults:Ds,fetcherResults:js}=await If(M.matches,L,ur,Rt,O);if(O.signal.aborted)return{shortCircuited:!0};j&&j.signal.removeEventListener("abort",Lu),Rt.forEach(Le=>Ie.delete(Le.key));let za=tA([...Ds,...js]);if(za){if(za.idx>=ur.length){let Le=Rt[za.idx-ur.length].key;Ge.add(Le)}return await Au(O,za.result,{replace:te}),{shortCircuited:!0}}let{loaderData:zs,errors:st}=YR(M,L,ur,Ds,$e,Rt,js,Bi);Bi.forEach((Le,Mt)=>{Le.subscribe(oi=>{(oi||Le.done)&&Bi.delete(Mt)})}),f.v7_partialHydration&&he&&M.errors&&Object.entries(M.errors).filter(Le=>{let[Mt]=Le;return!ur.some(oi=>oi.route.id===Mt)}).forEach(Le=>{let[Mt,oi]=Le;st=Object.assign(st||{},{[Mt]:oi})});let Bd=Eg(),Nu=Ig(be),Hd=Bd||Nu||Rt.length>0;return Nt({matches:L,loaderData:zs,errors:st},Hd?{fetchers:new Map(M.fetchers)}:{})}function xg(O){if(O&&!nn(O[1]))return{[O[0]]:O[1].data};if(M.actionData)return Object.keys(M.actionData).length===0?null:M.actionData}function n2(O){return O.forEach(x=>{let L=M.fetchers.get(x.key),U=Vf(void 0,L?L.data:void 0);M.fetchers.set(x.key,U)}),new Map(M.fetchers)}function s2(O,x,L,U){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ie.has(O)&&Fs(O);let re=(U&&U.unstable_flushSync)===!0,de=a||o,B=mT(M.location,M.matches,l,f.v7_prependBasename,L,f.v7_relativeSplatPath,x,U==null?void 0:U.relative),te=Pc(de,B,l),he=Pf(te,de,B);if(he.active&&he.matches&&(te=he.matches),!te){Kn(O,x,fi(404,{pathname:B}),{flushSync:re});return}let{path:ge,submission:$e,error:je}=BR(f.v7_normalizeFormMethod,!0,B,U);if(je){Kn(O,x,je,{flushSync:re});return}let qe=fm(te,ge);if(N=(U&&U.preventScrollReset)===!0,$e&&vs($e.formMethod)){o2(O,x,ge,qe,te,he.active,re,$e);return}pt.set(O,{routeId:x,path:ge}),a2(O,x,ge,qe,te,he.active,re,$e)}async function o2(O,x,L,U,re,de,B,te){gn(),pt.delete(O);function he(lt){if(!lt.route.action&&!lt.route.lazy){let Gt=fi(405,{method:te.formMethod,pathname:L,routeId:x});return Kn(O,x,Gt,{flushSync:B}),!0}return!1}if(!de&&he(U))return;let ge=M.fetchers.get(O);Ns(O,BK(te,ge),{flushSync:B});let $e=new AbortController,je=Zd(e.history,L,$e.signal,te);if(de){let lt=await qd(re,L,je.signal);if(lt.type==="aborted")return;if(lt.type==="error"){let{error:Gt}=Gd(L,lt);Kn(O,x,Gt,{flushSync:B});return}else if(lt.matches){if(re=lt.matches,U=fm(re,L),he(U))return}else{Kn(O,x,fi(404,{pathname:L}),{flushSync:B});return}}Ie.set(O,$e);let qe=K,se=(await ja("action",je,[U],re))[0];if(je.signal.aborted){Ie.get(O)===$e&&Ie.delete(O);return}if(f.v7_fetcherPersist&&lr.has(O)){if(Uc(se)||nn(se)){Ns(O,Xa(void 0));return}}else{if(Uc(se))if(Ie.delete(O),be>qe){Ns(O,Xa(void 0));return}else return Ge.add(O),Ns(O,Vf(te)),Au(je,se,{fetcherSubmission:te});if(nn(se)){Kn(O,x,se.error);return}}if(Vc(se))throw fi(400,{type:"defer-action"});let ur=M.navigation.location||M.location,Rt=Zd(e.history,ur,$e.signal),Lu=a||o,Ds=M.navigation.state!=="idle"?Pc(Lu,M.navigation.location,l):M.matches;Ue(Ds,"Didn't find any matches after fetcher action");let js=++K;Ee.set(O,js);let za=Vf(te,se.data);M.fetchers.set(O,za);let[zs,st]=HR(e.history,M,Ds,te,ur,!1,f.unstable_skipActionErrorRevalidation,ne,nt,Xt,lr,pt,Ge,Lu,l,[U.route.id,se]);st.filter(lt=>lt.key!==O).forEach(lt=>{let Gt=lt.key,Rg=M.fetchers.get(Gt),f2=Vf(void 0,Rg?Rg.data:void 0);M.fetchers.set(Gt,f2),Ie.has(Gt)&&Fs(Gt),lt.controller&&Ie.set(Gt,lt.controller)}),Pr({fetchers:new Map(M.fetchers)});let Bd=()=>st.forEach(lt=>Fs(lt.key));$e.signal.addEventListener("abort",Bd);let{loaderResults:Nu,fetcherResults:Hd}=await If(M.matches,Ds,zs,st,Rt);if($e.signal.aborted)return;$e.signal.removeEventListener("abort",Bd),Ee.delete(O),Ie.delete(O),st.forEach(lt=>Ie.delete(lt.key));let Le=tA([...Nu,...Hd]);if(Le){if(Le.idx>=zs.length){let lt=st[Le.idx-zs.length].key;Ge.add(lt)}return Au(Rt,Le.result)}let{loaderData:Mt,errors:oi}=YR(M,M.matches,zs,Nu,void 0,st,Hd,Bi);if(M.fetchers.has(O)){let lt=Xa(se.data);M.fetchers.set(O,lt)}Ig(js),M.navigation.state==="loading"&&js>be?(Ue(P,"Expected pending action"),j&&j.abort(),Da(M.navigation.location,{matches:Ds,loaderData:Mt,errors:oi,fetchers:new Map(M.fetchers)})):(Pr({errors:oi,loaderData:QR(M.loaderData,Mt,Ds,oi),fetchers:new Map(M.fetchers)}),ne=!1)}async function a2(O,x,L,U,re,de,B,te){let he=M.fetchers.get(O);Ns(O,Vf(te,he?he.data:void 0),{flushSync:B});let ge=new AbortController,$e=Zd(e.history,L,ge.signal);if(de){let se=await qd(re,L,$e.signal);if(se.type==="aborted")return;if(se.type==="error"){let{error:ur}=Gd(L,se);Kn(O,x,ur,{flushSync:B});return}else if(se.matches)re=se.matches,U=fm(re,L);else{Kn(O,x,fi(404,{pathname:L}),{flushSync:B});return}}Ie.set(O,ge);let je=K,tt=(await ja("loader",$e,[U],re))[0];if(Vc(tt)&&(tt=await P6(tt,$e.signal,!0)||tt),Ie.get(O)===ge&&Ie.delete(O),!$e.signal.aborted){if(lr.has(O)){Ns(O,Xa(void 0));return}if(Uc(tt))if(be>je){Ns(O,Xa(void 0));return}else{Ge.add(O),await Au($e,tt);return}if(nn(tt)){Kn(O,x,tt.error);return}Ue(!Vc(tt),"Unhandled fetcher deferred data"),Ns(O,Xa(tt.data))}}async function Au(O,x,L){let{submission:U,fetcherSubmission:re,replace:de}=L===void 0?{}:L;x.response.headers.has("X-Remix-Revalidate")&&(ne=!0);let B=x.response.headers.get("Location");Ue(B,"Expected a Location header on the redirect Response"),B=JR(B,new URL(O.url),l);let te=a0(M.location,B,{_isRedirect:!0});if(r){let tt=!1;if(x.response.headers.has("X-Remix-Reload-Document"))tt=!0;else if(Uk.test(B)){const se=e.history.createURL(B);tt=se.origin!==t.location.origin||q0(se.pathname,l)==null}if(tt){de?t.location.replace(B):t.location.assign(B);return}}j=null;let he=de===!0?nr.Replace:nr.Push,{formMethod:ge,formAction:$e,formEncType:je}=M.navigation;!U&&!re&&ge&&$e&&je&&(U=iA(M.navigation));let qe=U||re;if(TK.has(x.response.status)&&qe&&vs(qe.formMethod))await Co(he,te,{submission:Nt({},qe,{formAction:B}),preventScrollReset:N});else{let tt=G2(te,U);await Co(he,te,{overrideNavigation:tt,fetcherSubmission:re,preventScrollReset:N})}}async function ja(O,x,L,U){try{let re=await AK(c,O,x,L,U,s,n);return await Promise.all(re.map((de,B)=>{if(VK(de)){let te=de.result;return{type:yt.redirect,response:FK(te,x,L[B].route.id,U,l,f.v7_relativeSplatPath)}}return NK(de)}))}catch(re){return L.map(()=>({type:yt.error,error:re}))}}async function If(O,x,L,U,re){let[de,...B]=await Promise.all([L.length?ja("loader",re,L,x):[],...U.map(te=>{if(te.matches&&te.match&&te.controller){let he=Zd(e.history,te.path,te.controller.signal);return ja("loader",he,[te.match],te.matches).then(ge=>ge[0])}else return Promise.resolve({type:yt.error,error:fi(404,{pathname:te.path})})})]);return await Promise.all([rA(O,L,de,de.map(()=>re.signal),!1,M.loaderData),rA(O,U.map(te=>te.match),B,U.map(te=>te.controller?te.controller.signal:null),!0)]),{loaderResults:de,fetcherResults:B}}function gn(){ne=!0,nt.push(...Of()),pt.forEach((O,x)=>{Ie.has(x)&&(Xt.push(x),Fs(x))})}function Ns(O,x,L){L===void 0&&(L={}),M.fetchers.set(O,x),Pr({fetchers:new Map(M.fetchers)},{flushSync:(L&&L.flushSync)===!0})}function Kn(O,x,L,U){U===void 0&&(U={});let re=by(M.matches,x);Vd(O),Pr({errors:{[re.route.id]:L},fetchers:new Map(M.fetchers)},{flushSync:(U&&U.flushSync)===!0})}function Tg(O){return f.v7_fetcherPersist&&(qi.set(O,(qi.get(O)||0)+1),lr.has(O)&&lr.delete(O)),M.fetchers.get(O)||MK}function Vd(O){let x=M.fetchers.get(O);Ie.has(O)&&!(x&&x.state==="loading"&&Ee.has(O))&&Fs(O),pt.delete(O),Ee.delete(O),Ge.delete(O),lr.delete(O),M.fetchers.delete(O)}function l2(O){if(f.v7_fetcherPersist){let x=(qi.get(O)||0)-1;x<=0?(qi.delete(O),lr.add(O)):qi.set(O,x)}else Vd(O);Pr({fetchers:new Map(M.fetchers)})}function Fs(O){let x=Ie.get(O);Ue(x,"Expected fetch controller: "+O),x.abort(),Ie.delete(O)}function Mg(O){for(let x of O){let L=Tg(x),U=Xa(L.data);M.fetchers.set(x,U)}}function Eg(){let O=[],x=!1;for(let L of Ge){let U=M.fetchers.get(L);Ue(U,"Expected fetcher: "+L),U.state==="loading"&&(Ge.delete(L),O.push(L),x=!0)}return Mg(O),x}function Ig(O){let x=[];for(let[L,U]of Ee)if(U<O){let re=M.fetchers.get(L);Ue(re,"Expected fetcher: "+L),re.state==="loading"&&(Fs(L),Ee.delete(L),x.push(L))}return Mg(x),x.length>0}function u2(O,x){let L=M.blockers.get(O)||zf;return Or.get(O)!==x&&Or.set(O,x),L}function kg(O){M.blockers.delete(O),Or.delete(O)}function Ud(O,x){let L=M.blockers.get(O)||zf;Ue(L.state==="unblocked"&&x.state==="blocked"||L.state==="blocked"&&x.state==="blocked"||L.state==="blocked"&&x.state==="proceeding"||L.state==="blocked"&&x.state==="unblocked"||L.state==="proceeding"&&x.state==="unblocked","Invalid blocker state transition: "+L.state+" -> "+x.state);let U=new Map(M.blockers);U.set(O,x),Pr({blockers:U})}function Og(O){let{currentLocation:x,nextLocation:L,historyAction:U}=O;if(Or.size===0)return;Or.size>1&&zh(!1,"A router only supports one blocker at a time");let re=Array.from(Or.entries()),[de,B]=re[re.length-1],te=M.blockers.get(de);if(!(te&&te.state==="proceeding")&&B({currentLocation:x,nextLocation:L,historyAction:U}))return de}function kf(O){let x=fi(404,{pathname:O}),L=a||o,{matches:U,route:re}=eA(L);return Of(),{notFoundMatches:U,route:re,error:x}}function Gd(O,x){let L=x.partialMatches,U=L[L.length-1].route,re=fi(400,{type:"route-discovery",routeId:U.id,pathname:O,message:x.error!=null&&"message"in x.error?x.error:String(x.error)});return{notFoundMatches:L,route:U,error:re}}function Of(O){let x=[];return Bi.forEach((L,U)=>{(!O||O(U))&&(L.cancel(),x.push(U),Bi.delete(U))}),x}function c2(O,x,L){if(g=O,b=x,v=L||null,!w&&M.navigation===U2){w=!0;let U=Cg(M.location,M.matches);U!=null&&Pr({restoreScrollPosition:U})}return()=>{g=null,b=null,v=null}}function Pg(O,x){return v&&v(O,x.map(U=>tK(U,M.loaderData)))||O.key}function d2(O,x){if(g&&b){let L=Pg(O,x);g[L]=b()}}function Cg(O,x){if(g){let L=Pg(O,x),U=g[L];if(typeof U=="number")return U}return null}function Pf(O,x,L){if(h)if(O){let U=O[O.length-1].route;if(U.path&&(U.path==="*"||U.path.endsWith("/*")))return{active:!0,matches:h1(x,L,l,!0)}}else return{active:!0,matches:h1(x,L,l,!0)||[]};return{active:!1,matches:null}}async function qd(O,x,L){let U=O,re=U.length>0?U[U.length-1].route:null;for(;;){let de=a==null,B=a||o;try{await CK(h,x,U,B,s,n,Po,L)}catch($e){return{type:"error",error:$e,partialMatches:U}}finally{de&&(o=[...o])}if(L.aborted)return{type:"aborted"};let te=Pc(B,x,l),he=!1;if(te){let $e=te[te.length-1].route;if($e.index)return{type:"success",matches:te};if($e.path&&$e.path.length>0)if($e.path==="*")he=!0;else return{type:"success",matches:te}}let ge=h1(B,x,l,!0);if(!ge||U.map($e=>$e.route.id).join("-")===ge.map($e=>$e.route.id).join("-"))return{type:"success",matches:he?te:null};if(U=ge,re=U[U.length-1].route,re.path==="*")return{type:"success",matches:U}}}function p2(O){s={},a=l0(O,n,void 0,s)}function h2(O,x){let L=a==null;I6(O,x,a||o,s,n),L&&(o=[...o],Pr({}))}return k={get basename(){return l},get future(){return f},get state(){return M},get routes(){return o},get window(){return t},initialize:QS,subscribe:e2,enableScrollRestoration:c2,navigate:$g,fetch:s2,revalidate:t2,createHref:O=>e.history.createHref(O),encodeLocation:O=>e.history.encodeLocation(O),getFetcher:Tg,deleteFetcher:l2,dispose:XS,getBlocker:u2,deleteBlocker:kg,patchRoutes:h2,_internalFetchControllers:Ie,_internalActiveDeferreds:Bi,_internalSetRoutes:p2},k}function kK(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function mT(e,t,r,i,n,s,o,a){let l,c;if(o){l=[];for(let f of t)if(l.push(f),f.route.id===o){c=f;break}}else l=t,c=t[t.length-1];let h=gK(n||".",yK(l,s),q0(e.pathname,r)||e.pathname,a==="path");return n==null&&(h.search=e.search,h.hash=e.hash),(n==null||n===""||n===".")&&c&&c.route.index&&!Gk(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),i&&r!=="/"&&(h.pathname=h.pathname==="/"?r:Kc([r,h.pathname])),G0(h)}function BR(e,t,r,i){if(!i||!kK(i))return{path:r};if(i.formMethod&&!GK(i.formMethod))return{path:r,error:fi(405,{method:i.formMethod})};let n=()=>({path:r,error:fi(400,{type:"invalid-body"})}),s=i.formMethod||"get",o=e?s.toUpperCase():s.toLowerCase(),a=k6(r);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!vs(o))return n();let m=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((y,g)=>{let[v,b]=g;return""+y+v+"="+b+`
`},""):String(i.body);return{path:r,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:void 0,text:m}}}else if(i.formEncType==="application/json"){if(!vs(o))return n();try{let m=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:r,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:m,text:void 0}}}catch{return n()}}}Ue(typeof FormData=="function","FormData is not available in this environment");let l,c;if(i.formData)l=yT(i.formData),c=i.formData;else if(i.body instanceof FormData)l=yT(i.body),c=i.body;else if(i.body instanceof URLSearchParams)l=i.body,c=KR(l);else if(i.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(i.body),c=KR(l)}catch{return n()}let h={formMethod:o,formAction:a,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(vs(h.formMethod))return{path:r,submission:h};let f=_u(r);return t&&f.search&&Gk(f.search)&&l.append("index",""),f.search="?"+l,{path:G0(f),submission:h}}function OK(e,t){let r=e;if(t){let i=e.findIndex(n=>n.route.id===t);i>=0&&(r=e.slice(0,i))}return r}function HR(e,t,r,i,n,s,o,a,l,c,h,f,m,y,g,v){let b=v?nn(v[1])?v[1].error:v[1].data:void 0,w=e.createURL(t.location),_=e.createURL(n),$=v&&nn(v[1])?v[0]:void 0,E=$?OK(r,$):r,k=v?v[1].statusCode:void 0,M=o&&k&&k>=400,P=E.filter((j,G)=>{let{route:W}=j;if(W.lazy)return!0;if(W.loader==null)return!1;if(s)return typeof W.loader!="function"||W.loader.hydrate?!0:t.loaderData[W.id]===void 0&&(!t.errors||t.errors[W.id]===void 0);if(PK(t.loaderData,t.matches[G],j)||l.some(ne=>ne===j.route.id))return!0;let ie=t.matches[G],me=j;return WR(j,Nt({currentUrl:w,currentParams:ie.params,nextUrl:_,nextParams:me.params},i,{actionResult:b,unstable_actionStatus:k,defaultShouldRevalidate:M?!1:a||w.pathname+w.search===_.pathname+_.search||w.search!==_.search||E6(ie,me)}))}),N=[];return f.forEach((j,G)=>{if(s||!r.some(nt=>nt.route.id===j.routeId)||h.has(G))return;let W=Pc(y,j.path,g);if(!W){N.push({key:G,routeId:j.routeId,path:j.path,matches:null,match:null,controller:null});return}let ie=t.fetchers.get(G),me=fm(W,j.path),ne=!1;m.has(G)?ne=!1:c.includes(G)?ne=!0:ie&&ie.state!=="idle"&&ie.data===void 0?ne=a:ne=WR(me,Nt({currentUrl:w,currentParams:t.matches[t.matches.length-1].params,nextUrl:_,nextParams:r[r.length-1].params},i,{actionResult:b,unstable_actionStatus:k,defaultShouldRevalidate:M?!1:a})),ne&&N.push({key:G,routeId:j.routeId,path:j.path,matches:W,match:me,controller:new AbortController})}),[P,N]}function PK(e,t,r){let i=!t||r.route.id!==t.route.id,n=e[r.route.id]===void 0;return i||n}function E6(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function WR(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function CK(e,t,r,i,n,s,o,a){let l=[t,...r.map(c=>c.route.id)].join("-");try{let c=o.get(l);c||(c=e({path:t,matches:r,patch:(h,f)=>{a.aborted||I6(h,f,i,n,s)}}),o.set(l,c)),c&&zK(c)&&await c}finally{o.delete(l)}}function I6(e,t,r,i,n){if(e){var s;let o=i[e];Ue(o,"No route found to patch children into: routeId = "+e);let a=l0(t,n,[e,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],i);o.children?o.children.push(...a):o.children=a}else{let o=l0(t,n,["patch",String(r.length||"0")],i);r.push(...o)}}async function ZR(e,t,r){if(!e.lazy)return;let i=await e.lazy();if(!e.lazy)return;let n=r[e.id];Ue(n,"No route found in manifest");let s={};for(let o in i){let l=n[o]!==void 0&&o!=="hasErrorBoundary";zh(!l,'Route "'+n.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!XJ.has(o)&&(s[o]=i[o])}Object.assign(n,s),Object.assign(n,Nt({},t(n),{lazy:void 0}))}function RK(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function AK(e,t,r,i,n,s,o,a){let l=i.reduce((f,m)=>f.add(m.route.id),new Set),c=new Set,h=await e({matches:n.map(f=>{let m=l.has(f.route.id);return Nt({},f,{shouldLoad:m,resolve:g=>(c.add(f.route.id),m?LK(t,r,f,s,o,g,a):Promise.resolve({type:yt.data,result:void 0}))})}),request:r,params:n[0].params,context:a});return n.forEach(f=>Ue(c.has(f.route.id),'`match.resolve()` was not called for route id "'+f.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),h.filter((f,m)=>l.has(n[m].route.id))}async function LK(e,t,r,i,n,s,o){let a,l,c=h=>{let f,m=new Promise((v,b)=>f=b);l=()=>f(),t.signal.addEventListener("abort",l);let y=v=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):h({request:t,params:r.params,context:o},...v!==void 0?[v]:[]),g;return s?g=s(v=>y(v)):g=(async()=>{try{return{type:"data",result:await y()}}catch(v){return{type:"error",result:v}}})(),Promise.race([g,m])};try{let h=r.route[e];if(r.route.lazy)if(h){let f,[m]=await Promise.all([c(h).catch(y=>{f=y}),ZR(r.route,n,i)]);if(f!==void 0)throw f;a=m}else if(await ZR(r.route,n,i),h=r.route[e],h)a=await c(h);else if(e==="action"){let f=new URL(t.url),m=f.pathname+f.search;throw fi(405,{method:t.method,pathname:m,routeId:r.route.id})}else return{type:yt.data,result:void 0};else if(h)a=await c(h);else{let f=new URL(t.url),m=f.pathname+f.search;throw fi(404,{pathname:m})}Ue(a.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:yt.error,result:h}}finally{l&&t.signal.removeEventListener("abort",l)}return a}async function NK(e){let{result:t,type:r,status:i}=e;if(O6(t)){let o;try{let a=t.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?t.body==null?o=null:o=await t.json():o=await t.text()}catch(a){return{type:yt.error,error:a}}return r===yt.error?{type:yt.error,error:new Vk(t.status,t.statusText,o),statusCode:t.status,headers:t.headers}:{type:yt.data,data:o,statusCode:t.status,headers:t.headers}}if(r===yt.error)return{type:yt.error,error:t,statusCode:L_(t)?t.status:i};if(UK(t)){var n,s;return{type:yt.deferred,deferredData:t,statusCode:(n=t.init)==null?void 0:n.status,headers:((s=t.init)==null?void 0:s.headers)&&new Headers(t.init.headers)}}return{type:yt.data,data:t,statusCode:i}}function FK(e,t,r,i,n,s){let o=e.headers.get("Location");if(Ue(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Uk.test(o)){let a=i.slice(0,i.findIndex(l=>l.route.id===r)+1);o=mT(new URL(t.url),a,n,!0,o,s),e.headers.set("Location",o)}return e}function JR(e,t,r){if(Uk.test(e)){let i=e,n=i.startsWith("//")?new URL(t.protocol+i):new URL(i),s=q0(n.pathname,r)!=null;if(n.origin===t.origin&&s)return n.pathname+n.search+n.hash}return e}function Zd(e,t,r,i){let n=e.createURL(k6(t)).toString(),s={signal:r};if(i&&vs(i.formMethod)){let{formMethod:o,formEncType:a}=i;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(i.json)):a==="text/plain"?s.body=i.text:a==="application/x-www-form-urlencoded"&&i.formData?s.body=yT(i.formData):s.body=i.formData}return new Request(n,s)}function yT(e){let t=new URLSearchParams;for(let[r,i]of e.entries())t.append(r,typeof i=="string"?i:i.name);return t}function KR(e){let t=new FormData;for(let[r,i]of e.entries())t.append(r,i);return t}function DK(e,t,r,i,n,s){let o={},a=null,l,c=!1,h={},f=i&&nn(i[1])?i[1].error:void 0;return r.forEach((m,y)=>{let g=t[y].route.id;if(Ue(!Uc(m),"Cannot handle redirect results in processLoaderData"),nn(m)){let v=m.error;f!==void 0&&(v=f,f=void 0),a=a||{};{let b=by(e,g);a[b.route.id]==null&&(a[b.route.id]=v)}o[g]=void 0,c||(c=!0,l=L_(m.error)?m.error.status:500),m.headers&&(h[g]=m.headers)}else Vc(m)?(n.set(g,m.deferredData),o[g]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!c&&(l=m.statusCode),m.headers&&(h[g]=m.headers)):(o[g]=m.data,m.statusCode&&m.statusCode!==200&&!c&&(l=m.statusCode),m.headers&&(h[g]=m.headers))}),f!==void 0&&i&&(a={[i[0]]:f},o[i[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:h}}function YR(e,t,r,i,n,s,o,a){let{loaderData:l,errors:c}=DK(t,r,i,n,a);for(let h=0;h<s.length;h++){let{key:f,match:m,controller:y}=s[h];Ue(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let g=o[h];if(!(y&&y.signal.aborted))if(nn(g)){let v=by(e.matches,m==null?void 0:m.route.id);c&&c[v.route.id]||(c=Nt({},c,{[v.route.id]:g.error})),e.fetchers.delete(f)}else if(Uc(g))Ue(!1,"Unhandled fetcher revalidation redirect");else if(Vc(g))Ue(!1,"Unhandled fetcher deferred data");else{let v=Xa(g.data);e.fetchers.set(f,v)}}return{loaderData:l,errors:c}}function QR(e,t,r,i){let n=Nt({},t);for(let s of r){let o=s.route.id;if(t.hasOwnProperty(o)?t[o]!==void 0&&(n[o]=t[o]):e[o]!==void 0&&s.route.loader&&(n[o]=e[o]),i&&i.hasOwnProperty(o))break}return n}function XR(e){return e?nn(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function by(e,t){return(t?e.slice(0,e.findIndex(i=>i.route.id===t)+1):[...e]).reverse().find(i=>i.route.hasErrorBoundary===!0)||e[0]}function eA(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function fi(e,t){let{pathname:r,routeId:i,method:n,type:s,message:o}=t===void 0?{}:t,a="Unknown Server Error",l="Unknown @remix-run/router error";return e===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+r+'" - the `children()` function for '+("route `"+i+"` threw the following error:\n"+o):n&&r&&i?l="You made a "+n+' request to "'+r+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):e===403?(a="Forbidden",l='Route "'+i+'" does not match URL "'+r+'"'):e===404?(a="Not Found",l='No route matches URL "'+r+'"'):e===405&&(a="Method Not Allowed",n&&r&&i?l="You made a "+n.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":n&&(l='Invalid request method "'+n.toUpperCase()+'"')),new Vk(e||500,a,new Error(l),!0)}function tA(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(Uc(r))return{result:r,idx:t}}}function k6(e){let t=typeof e=="string"?_u(e):e;return G0(Nt({},t,{hash:""}))}function jK(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function zK(e){return typeof e=="object"&&e!=null&&"then"in e}function VK(e){return O6(e.result)&&xK.has(e.result.status)}function Vc(e){return e.type===yt.deferred}function nn(e){return e.type===yt.error}function Uc(e){return(e&&e.type)===yt.redirect}function UK(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function O6(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function GK(e){return $K.has(e.toLowerCase())}function vs(e){return _K.has(e.toLowerCase())}async function rA(e,t,r,i,n,s){for(let o=0;o<r.length;o++){let a=r[o],l=t[o];if(!l)continue;let c=e.find(f=>f.route.id===l.route.id),h=c!=null&&!E6(c,l)&&(s&&s[l.route.id])!==void 0;if(Vc(a)&&(n||h)){let f=i[o];Ue(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await P6(a,f,n).then(m=>{m&&(r[o]=m||r[o])})}}}async function P6(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:yt.data,data:e.deferredData.unwrappedData}}catch(n){return{type:yt.error,error:n}}return{type:yt.data,data:e.deferredData.data}}}function Gk(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function fm(e,t){let r=typeof t=="string"?_u(t).search:t.search;if(e[e.length-1].route.index&&Gk(r||""))return e[e.length-1];let i=x6(e);return i[i.length-1]}function iA(e){let{formMethod:t,formAction:r,formEncType:i,text:n,formData:s,json:o}=e;if(!(!t||!r||!i)){if(n!=null)return{formMethod:t,formAction:r,formEncType:i,formData:void 0,json:void 0,text:n};if(s!=null)return{formMethod:t,formAction:r,formEncType:i,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:r,formEncType:i,formData:void 0,json:o,text:void 0}}}function G2(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function qK(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Vf(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function BK(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Xa(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function HK(e,t){try{let r=e.sessionStorage.getItem(M6);if(r){let i=JSON.parse(r);for(let[n,s]of Object.entries(i||{}))s&&Array.isArray(s)&&t.set(n,new Set(s||[]))}}catch{}}function WK(e,t){if(t.size>0){let r={};for(let[i,n]of t)r[i]=[...n];try{e.sessionStorage.setItem(M6,JSON.stringify(r))}catch(i){zh(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gT(){return gT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},gT.apply(this,arguments)}const C6=ae.createContext(null),R6=ae.createContext(null),A6=ae.createContext(null),qk=ae.createContext(null),B0=ae.createContext({outlet:null,matches:[],isDataRoute:!1}),L6=ae.createContext(null);function Bk(){return ae.useContext(qk)!=null}function ZK(){return Bk()||Ue(!1),ae.useContext(qk).location}function JK(){let{matches:e}=ae.useContext(B0),t=e[e.length-1];return t?t.params:{}}function KK(e,t,r,i){Bk()||Ue(!1);let{navigator:n}=ae.useContext(A6),{matches:s}=ae.useContext(B0),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ZK(),h;h=c;let f=h.pathname||"/",m=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=Pc(e,{pathname:m});return tY(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Kc([l,n.encodeLocation?n.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Kc([l,n.encodeLocation?n.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,r,i)}function YK(){let e=sY(),t=L_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ae.createElement(ae.Fragment,null,ae.createElement("h2",null,"Unexpected Application Error!"),ae.createElement("h3",{style:{fontStyle:"italic"}},t),r?ae.createElement("pre",{style:n},r):null,null)}const QK=ae.createElement(YK,null);class XK extends ae.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?ae.createElement(B0.Provider,{value:this.props.routeContext},ae.createElement(L6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eY(e){let{routeContext:t,match:r,children:i}=e,n=ae.useContext(C6);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),ae.createElement(B0.Provider,{value:t},i)}function tY(e,t,r,i){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),i===void 0&&(i=null),e==null){var s;if((s=r)!=null&&s.errors)e=r.matches;else return null}let o=e,a=(n=r)==null?void 0:n.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||Ue(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(r&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:y}=r,g=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let y,g=!1,v=null,b=null;r&&(y=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||QK,l&&(c<0&&m===0?(oY("route-fallback"),g=!0,b=null):c===m&&(g=!0,b=f.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,m+1)),_=()=>{let $;return y?$=v:g?$=b:f.route.Component?$=ae.createElement(f.route.Component,null):f.route.element?$=f.route.element:$=h,ae.createElement(eY,{match:f,routeContext:{outlet:h,matches:w,isDataRoute:r!=null},children:$})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?ae.createElement(XK,{location:r.location,revalidation:r.revalidation,component:v,error:y,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var vT=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(vT||{});function rY(e){let t=ae.useContext(R6);return t||Ue(!1),t}function iY(e){let t=ae.useContext(B0);return t||Ue(!1),t}function nY(e){let t=iY(),r=t.matches[t.matches.length-1];return r.route.id||Ue(!1),r.route.id}function sY(){var e;let t=ae.useContext(L6),r=rY(vT.UseRouteError),i=nY(vT.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[i]}const nA={};function oY(e,t,r){nA[e]||(nA[e]=!0)}function aY(e){let{basename:t="/",children:r=null,location:i,navigationType:n=nr.Pop,navigator:s,static:o=!1,future:a}=e;Bk()&&Ue(!1);let l=t.replace(/^\/*/,"/"),c=ae.useMemo(()=>({basename:l,navigator:s,static:o,future:gT({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=_u(i));let{pathname:h="/",search:f="",hash:m="",state:y=null,key:g="default"}=i,v=ae.useMemo(()=>{let b=q0(h,l);return b==null?null:{location:{pathname:b,search:f,hash:m,state:y,key:g},navigationType:n}},[l,h,f,m,y,g,n]);return v==null?null:ae.createElement(A6.Provider,{value:c},ae.createElement(qk.Provider,{children:r,value:v}))}new Promise(()=>{});function lY(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:ae.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:ae.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:ae.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nb(){return nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},nb.apply(this,arguments)}const uY="6";try{window.__reactRouterVersion=uY}catch{}function cY(e,t){return IK({basename:void 0,future:nb({},void 0,{v7_prependBasename:!0}),history:KJ({window:void 0}),hydrationData:dY(),routes:e,mapRouteProperties:lY,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function dY(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=nb({},t,{errors:pY(t.errors)})),t}function pY(e){if(!e)return null;let t=Object.entries(e),r={};for(let[i,n]of t)if(n&&n.__type==="RouteErrorResponse")r[i]=new Vk(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let s=window[n.__subType];if(typeof s=="function")try{let o=new s(n.message);o.stack="",r[i]=o}catch{}}if(r[i]==null){let s=new Error(n.message);s.stack="",r[i]=s}}else r[i]=n;return r}const hY=ae.createContext({isTransitioning:!1}),fY=ae.createContext(new Map),mY="startTransition",sA=FW[mY],yY="flushSync",oA=JJ[yY];function gY(e){sA?sA(e):e()}function Uf(e){oA?oA(e):e()}class vY{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",t(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",r(i))}})}}function wY(e){let{fallbackElement:t,router:r,future:i}=e,[n,s]=ae.useState(r.state),[o,a]=ae.useState(),[l,c]=ae.useState({isTransitioning:!1}),[h,f]=ae.useState(),[m,y]=ae.useState(),[g,v]=ae.useState(),b=ae.useRef(new Map),{v7_startTransition:w}=i||{},_=ae.useCallback(P=>{w?gY(P):P()},[w]),$=ae.useCallback((P,N)=>{let{deletedFetchers:j,unstable_flushSync:G,unstable_viewTransitionOpts:W}=N;j.forEach(me=>b.current.delete(me)),P.fetchers.forEach((me,ne)=>{me.data!==void 0&&b.current.set(ne,me.data)});let ie=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!W||ie){G?Uf(()=>s(P)):_(()=>s(P));return}if(G){Uf(()=>{m&&(h&&h.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:W.currentLocation,nextLocation:W.nextLocation})});let me=r.window.document.startViewTransition(()=>{Uf(()=>s(P))});me.finished.finally(()=>{Uf(()=>{f(void 0),y(void 0),a(void 0),c({isTransitioning:!1})})}),Uf(()=>y(me));return}m?(h&&h.resolve(),m.skipTransition(),v({state:P,currentLocation:W.currentLocation,nextLocation:W.nextLocation})):(a(P),c({isTransitioning:!0,flushSync:!1,currentLocation:W.currentLocation,nextLocation:W.nextLocation}))},[r.window,m,h,b,_]);ae.useLayoutEffect(()=>r.subscribe($),[r,$]),ae.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new vY)},[l]),ae.useEffect(()=>{if(h&&o&&r.window){let P=o,N=h.promise,j=r.window.document.startViewTransition(async()=>{_(()=>s(P)),await N});j.finished.finally(()=>{f(void 0),y(void 0),a(void 0),c({isTransitioning:!1})}),y(j)}},[_,o,h,r.window]),ae.useEffect(()=>{h&&o&&n.location.key===o.location.key&&h.resolve()},[h,m,n.location,o]),ae.useEffect(()=>{!l.isTransitioning&&g&&(a(g.state),c({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),v(void 0))},[l.isTransitioning,g]),ae.useEffect(()=>{},[]);let E=ae.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:P=>r.navigate(P),push:(P,N,j)=>r.navigate(P,{state:N,preventScrollReset:j==null?void 0:j.preventScrollReset}),replace:(P,N,j)=>r.navigate(P,{replace:!0,state:N,preventScrollReset:j==null?void 0:j.preventScrollReset})}),[r]),k=r.basename||"/",M=ae.useMemo(()=>({router:r,navigator:E,static:!1,basename:k}),[r,E,k]);return ae.createElement(ae.Fragment,null,ae.createElement(C6.Provider,{value:M},ae.createElement(R6.Provider,{value:n},ae.createElement(fY.Provider,{value:b.current},ae.createElement(hY.Provider,{value:l},ae.createElement(aY,{basename:k,location:n.location,navigationType:n.historyAction,navigator:E,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},n.initialized||r.future.v7_partialHydration?ae.createElement(bY,{routes:r.routes,future:r.future,state:n}):t))))),null)}function bY(e){let{routes:t,future:r,state:i}=e;return KK(t,void 0,i,r)}var aA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(aA||(aA={}));var lA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(lA||(lA={}));function u(e,t,r,i){var n,s=arguments.length,o=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function Jxe(e,t){return function(r,i){t(r,i,e)}}function Kxe(e,t,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(h){try{c(i.next(h))}catch(f){o(f)}}function l(h){try{c(i.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((i=i.apply(e,[])).next())})}const _Y="modulepreload",SY=function(e){return"/"+e},uA={},ee=function(t,r,i){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));n=Promise.all(r.map(a=>{if(a=SY(a),a in uA)return;uA[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":_Y,l||(h.as="script",h.crossOrigin=""),h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),l)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return n.then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};let Ul;function F(e){return typeof Ul[e]=="function"?Ul[e]=Ul[e](globalThis):Ul[e]}var XF,eD,tD,rD;Ul=(XF=globalThis.dojoConfig)!=null&&XF.has||(eD=globalThis.esriConfig)!=null&&eD.has?{...(tD=globalThis.dojoConfig)==null?void 0:tD.has,...(rD=globalThis.esriConfig)==null?void 0:rD.has}:{},F.add=(e,t,r,i)=>((i||Ul[e]===void 0)&&(Ul[e]=t),r&&F(e)),F.cache=Ul,F.add("big-integer-warning-enabled",!0),F.add("esri-deprecation-warnings",!0),F.add("esri-tests-disable-screenshots",!1),F.add("esri-tests-use-full-window",!1),F.add("esri-tests-post-to-influx",!0),(()=>{var t;F.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(F.add("host-browser",e),F.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),F.add("dom",e),F("host-browser")){const r=navigator,i=r.userAgent,n=r.appVersion,s=parseFloat(n);if(F.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),F.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),F.add("khtml",n.includes("Konqueror")?s:void 0),F.add("edge",parseFloat(i.split("Edge/")[1])||void 0),F.add("opr",parseFloat(i.split("OPR/")[1])||void 0),F.add("webkit",!F("wp")&&!F("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),F.add("chrome",!F("edge")&&!F("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),F.add("android",!F("wp")&&parseFloat(i.split("Android ")[1])||void 0),F.add("safari",!n.includes("Safari")||F("wp")||F("chrome")||F("android")||F("edge")||F("opr")?void 0:parseFloat(n.split("Version/")[1])),F.add("mac",n.includes("Macintosh")),!F("wp")&&/(iPhone|iPod|iPad)/.test(i)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));F.add(o,l),F.add("ios",l)}F("webkit")||(!i.includes("Gecko")||F("wp")||F("khtml")||F("edge")||F.add("mozilla",s),F("mozilla")&&F.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&F.add("esri-mobile",t),r&&F.add("esri-iPhone",r),F.add("esri-geolocation",!!navigator.geolocation)}F.add("esri-wasm","WebAssembly"in globalThis),F.add("esri-performance-mode-frames-between-render",20),F.add("esri-force-performance-mode",!1),F.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),F.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),F.add("esri-atomics","Atomics"in globalThis),F.add("esri-workers","Worker"in globalThis),F.add("web-feat:cache","caches"in globalThis),F.add("esri-workers-arraybuffer-transfer",!F("safari")||Number(F("safari"))>=12),F.add("workers-pool-size",8),F.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),F.add("featurelayer-simplify-payload-size-factors",[1,1,4]),F.add("featurelayer-fast-triangulation-enabled",!0),F.add("featurelayer-animation-enabled",!0),F.add("featurelayer-snapshot-enabled",!0),F.add("featurelayer-snapshot-point-min-threshold",8e4),F.add("featurelayer-snapshot-point-max-threshold",4e5),F.add("featurelayer-snapshot-point-coverage",.1),F.add("featurelayer-query-max-depth",4),F.add("featurelayer-query-pausing-enabled",!1),F.add("featurelayer-advanced-symbols",!1),F.add("featurelayer-pbf",!0),F.add("featurelayer-pbf-statistics",!1),F.add("feature-layers-workers",!0),F.add("feature-polyline-generalization-factor",1),F.add("mapview-transitions-duration",200),F.add("mapview-essential-goto-duration",200),F.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),F.add("mapserver-pbf-version-support",10.81),F.add("mapservice-popup-identify-max-tolerance",20),F("host-webworker")||F("host-browser")&&(F.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),F.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{F.add("esri-image-decode",!0,!0,!0)}).catch(()=>{F.add("esri-image-decode",!1,!0,!0)})}return!1}),F.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();let q2=class Wu{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Wu._m}getInt(){return this._seed=(Wu._a*this._seed+Wu._c)%Wu._m,this._seed}getFloat(){return this.getInt()/(Wu._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/Wu._m*i}};q2._m=2147483647,q2._a=48271,q2._c=0;function Yxe(e,t){return t?e.filter((r,i,n)=>n.findIndex(t.bind(null,r))===i):Array.from(new Set(e))}function N_(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function Qxe(e,t){let r=e.length!==t.length;r&&(e.length=t.length);for(let i=0;i<t.length;++i)e[i]!==t[i]&&(e[i]=t[i],r=!0);return r}function cA(e,t,r){let i,n;return r?(i=t.filter(s=>!e.some(o=>r(o,s))),n=e.filter(s=>!t.some(o=>r(o,s)))):(i=t.filter(s=>!e.includes(s)),n=e.filter(s=>!t.includes(s))),{added:i,removed:n}}function Xxe(e){return e&&typeof e.length=="number"}let N6=class{constructor(){this.last=0}};const F6=new N6;function wT(e,t,r,i){i=i||F6;const n=Math.max(0,i.last-10);for(let o=n;o<r;++o)if(e[o]===t)return i.last=o,o;const s=Math.min(n,r);for(let o=0;o<s;++o)if(e[o]===t)return i.last=o,o;return-1}function $Y(e,t,r,i){const n=e.length,s=wT(e,t,n,i);if(s!==-1)return e[s]=e[n-1],e.pop(),t}const Qn=new Set;function xY(e,t,r=e.length,i=t.length,n,s){if(i===0||r===0)return r;Qn.clear();for(let a=0;a<i;++a)Qn.add(t[a]);n=n||F6;const o=Math.max(0,n.last-10);for(let a=o;a<r;++a)if(Qn.has(e[a])&&(s==null||s.push(e[a]),Qn.delete(e[a]),e[a]=e[r-1],--r,--a,Qn.size===0||r===0))return Qn.clear(),r;for(let a=0;a<o;++a)if(Qn.has(e[a])&&(s==null||s.push(e[a]),Qn.delete(e[a]),e[a]=e[r-1],--r,--a,Qn.size===0||r===0))return Qn.clear(),r;return Qn.clear(),r}function TY(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function pd(e,t){return e!=null}function D6(e){return 32+e.length}function Hk(){return 16}function tTe(e){if(!e)return 0;let t=z6;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(typeof i){case"string":t+=D6(i);break;case"number":t+=Hk();break;case"boolean":t+=4}}return t}function MY(e){if(!e)return 0;if(Array.isArray(e))return EY(e);let t=z6;for(const r in e)e.hasOwnProperty(r)&&(t+=j6(e[r]));return t}function EY(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let r=V6;for(let i=0;i<t;i++)r+=j6(e[i]);return r}function j6(e){switch(typeof e){case"object":return MY(e);case"string":return D6(e);case"number":return Hk();case"boolean":return 4;default:return 8}}function IY(e,t){return V6+e.length*t}const z6=32,V6=16;function rTe(e){return e instanceof ArrayBuffer}function Wk(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function U6(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function G6(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function Zk(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function q6(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function Jk(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function B6(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function F_(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function D_(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function kY(e){return!("buffer"in e)}function iTe(...e){return e.reduce((t,r)=>t+(r?kY(r)?IY(r,Hk()):r.byteLength+OY:0),0)}const OY=145,nTe=1024;function sTe(e){return D_(e)||F_(e)||Jk(e)||Zk(e)||Wk(e)}function oTe(e){return D_(e)||F_(e)}function aTe(e){return D_(e)?179769e303:F_(e)?3402823e32:B6(e)?4294967295:q6(e)?65535:U6(e)||G6(e)?255:Jk(e)?2147483647:Zk(e)?32767:Wk(e)?127:256}function PY(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function C(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=Z6(e);if(t!=null)return t;if(sb(e))return e.clone();if(H6(e))return e.map(C);if(W6(e))return e.clone();const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=C(e[i]);return r}function bT(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=Z6(e);if(t!=null)return t;if(H6(e)){let r=!0;const i=e.map(n=>{const s=bT(n);return n!=null&&s==null&&(r=!1),s});return r?i:null}if(sb(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!W6(e)){const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const n=e[i],s=bT(n);if(n!=null&&s==null)return null;r[i]=s}return r}return null}function sb(e){return typeof e.clone=="function"}function H6(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function W6(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function dA(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Z6(e){if(Wk(e)||U6(e)||G6(e)||Zk(e)||q6(e)||Jk(e)||B6(e)||F_(e)||D_(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,C(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(C(r));return t}return null}function Kk(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function J6(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&N_(e,t):e instanceof Set?t instanceof Set&&RY(e,t):e instanceof Map?t instanceof Map&&AY(e,t):!!dA(e)&&dA(t)&&CY(e,t))}function CY(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function RY(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function AY(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const n=t.get(r);if(n!==i||n===void 0&&!t.has(r))return!1}return!0}function Yk(e,t,r=!1){return Y6(e,t,r)}function j_(e,t){if(t!=null)return t[e]||K6(e.split("."),!1,t)}function ri(e,t,r){const i=e.split("."),n=i.pop(),s=K6(i,!0,r);s&&n&&(s[n]=t)}function pA(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(pA(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(pA(e[r],t[r]))return!0;return!1}return e!==t}function K6(e,t,r){let i=r;for(const n of e){if(i==null)return;if(!(n in i)){if(!t)return;i[n]={}}i=i[n]}return i}function Y6(e,t,r){return t?Object.keys(t).reduce((i,n)=>{let s=i[n],o=t[n];return s===o?i:s===void 0?(i[n]=C(o),i):(Array.isArray(o)||Array.isArray(i)?(s=s?Array.isArray(s)?i[n]=s.concat():i[n]=[s]:i[n]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{s.includes(a)||s.push(a)}):i[n]=o.concat())):o&&typeof o=="object"?i[n]=Y6(s,o,r):i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[n]=o),i)},e||{}):e}var iD;const He={apiKey:void 0,applicationName:"",applicationUrl:(iD=globalThis.location)==null?void 0:iD.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(Yk(He,globalThis.esriConfig,!0),delete He.has),!He.assetsPath){{const e="4.30";He.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}He.defaultAssetsPath=He.assetsPath}const LY=/\{([^}]+)\}/g;function hA(e){return e??""}function Qk(e,t){return t?e.replaceAll(LY,typeof t=="object"?(r,i)=>hA(j_(i,t)):(r,i)=>hA(t(i))):e}function lTe(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>t!=null&&t.includes(r)?r:`\\${r}`)}function Q6(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let fA;function uTe(e){return fA??(fA=new DOMParser),fA.parseFromString(e||"","text/html").body.innerText||""}function cTe(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const mA={info:0,warn:1,error:2,none:3};let H=class Wi{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Wi._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Wi.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Wi._loggers.get(t)||new Wi({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!Wi._throttlingDisabled){const n=FY(i),s=this._loggedMessages[t].get(n);if(r==="once"&&s!=null||r==="oncePerTick"&&s&&s>=Wi._tickCounter)return;this._loggedMessages[t].set(n,Wi._tickCounter),Wi._scheduleTickCounterIncrement()}for(const n of He.log.interceptors)if(n(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const n=i[t];if(n!=null)return n;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",NY)}_matchLevel(t){const r=He.log.level||"warn";return mA[this._parentWithMember("level",r)]<=mA[t]}static _scheduleTickCounterIncrement(){Wi._tickCounterScheduled||(Wi._tickCounterScheduled=!0,Promise.resolve().then(()=>{Wi._tickCounter++,Wi._tickCounterScheduled=!1}))}};function NY(e,t,...r){console[e](`[${t}]`,...r)}function FY(...e){return Q6(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}H._loggers=new Map,H._tickCounter=0,H._tickCounterScheduled=!1,H._throttlingDisabled=!1;function DY(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,i)=>i===""?"$":(j_(i,t)??"").toString())}let X6=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&DY(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},D=class e8 extends X6{constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return C(r)}catch{return"[object]"}}))}}catch(t){throw H.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new e8(t.name,t.message,t.details)}};D.prototype.type="error";const yA=new WeakMap;function jY(e,t,r=!1){const i=`🛑 DEPRECATED - ${t}`;if(!r)return void e.warn(i);let n=yA.get(e);n||(n=new Set,yA.set(e,n)),n.has(t)||(n.add(t),e.warn(i))}function t8(e,t,r={}){if(F("esri-deprecation-warnings")){const{moduleName:i}=r;hd(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function zY(e,t,r={}){if(F("esri-deprecation-warnings")){const{moduleName:i}=r;hd(e,`Property: ${(i?i+"::":"")+t}`,r)}}function VY(e,t,r={}){F("esri-deprecation-warnings")&&hd(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function hd(e,t,r={}){if(F("esri-deprecation-warnings")){const{replacement:i,version:n,see:s,warnOnce:o}=r;let a=t;i&&(a+=`
	🛠️ Replacement: ${i}`),n&&(a+=`
	⚙️ Version: ${n}`),s&&(a+=`
	🔗 See ${s} for more details.`),jY(e,a,o)}}function pTe(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function UY(e,t){for(const r of e)if(r!=null&&t(r))return r}function ob(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let H0=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if(ob(t)){const i=this._getOrCreateGroup(r);for(const n of t)vA(n)&&i.push(n)}else vA(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach(i=>i.forEach(t));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(Qg(t))}remove(t){if(typeof t!="string"&&ob(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(gA(this._getGroup(t)),this._groups.delete(Qg(t)),this):this}removeAll(){return this._groups.forEach(gA),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(Qg(t),r),r}_getGroup(t){return this._groups.get(Qg(t))}};function Qg(e){return e||"_default_"}function gA(e){for(const t of e)t instanceof H0?t.removeAll():t.remove()}function vA(e){return e!=null&&(!!e.remove||e instanceof H0)}function r8(e,t){if(e==null)throw new Error(t??"value is None")}function xt(e){return e==null||e.destroy(),null}function fTe(e){return e==null||e.dispose(),null}function Pt(e){return e==null||e.remove(),null}function u0(e){return e==null||e.abort(),null}function mTe(e){return e==null||e.release(),null}function GY(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function qY(e,t){let r;return e.some((i,n)=>(r=t(i,n),r!=null)),r??void 0}const i8=Symbol("Accessor-beforeDestroy"),BY={remove:()=>{}};function Xe(e){return e?{remove(){e&&(e(),e=void 0)}}:BY}function HY(e){e.forEach(t=>t==null?void 0:t.remove())}function W0(e){return Xe(()=>HY(e))}function _i(e){return e.__accessor__??null}function WY(e,t){var r;return((r=e==null?void 0:e.metadata)==null?void 0:r[t])!=null}function f1(e,t,r){return r?ab(e,t,{policy:r,path:""}):ab(e,t,null)}function ab(e,t,r){return t?Object.keys(t).reduce((i,n)=>{const s=n;let o=null,a="merge";if(r&&(o=r.path?`${r.path}.${n}`:n,a=r.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(i[s]))return i[s]=t[s],i;if(i[s]===void 0)return i[s]=C(t[s]),i;let l=i[s],c=t[s];if(l===c)return i;if(Array.isArray(c)||Array.isArray(i))l=l?Array.isArray(l)?i[s]=l.concat():i[s]=[l]:i[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(h=>{l.includes(h)||l.push(h)}));else if(c&&typeof c=="object")if(r){const h=r.path;r.path=o,i[s]=ab(l,c,r),r.path=h}else i[s]=ab(l,c,null);else i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[s]=c);return i},e||{}):e}function n8(e){return Array.isArray(e)?e:e.split(".")}function wA(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function ZY(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...wA(r));return t}return wA(e)}function s8(e,t,r,i){const n=ZY(t);if(n.length!==1){const s=n.map(o=>i(e,o,r));return W0(s)}return i(e,n[0],r)}function o8(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const i=_i(t);return WY(i,r)?i.get(r):t[r]}function a8(e,t,r){if(e==null)return e;const i=o8(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:a8(i,t,r+1)}function Z0(e,t,r=0){return typeof t!="string"||t.includes(".")?a8(e,n8(t),r):o8(t,e)}function Ts(e,t){return Z0(e,t)}function bA(e,t){return Z0(t,e)!==void 0}var Pi;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(Pi||(Pi={}));function J0(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=C(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function z_(e,t){const r=J0(e);let i=r[t];return i||(i=r[t]={}),i}function JY(e,t){return f1(e,t,YY)}const KY=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function YY(e){return KY.test(e)?"replace":"merge"}function QY(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function XY(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let Cd=class _T{constructor(t,r,i,n=1,s=0){if(this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s,this._ctor)for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let r;if(_T.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let n=0;n<i;n++)this._pool[n]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):XY(r)&&r.acquire(...t),r}release(t){t&&!_T.test.disabled&&(this._releaseFunction?this._releaseFunction(t):QY(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Cd.test={disabled:!1};let eQ=class{constructor(t,r){this._observers=t,this._observer=r}remove(){TY(this._observers,this._observer)}},l8=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return tQ;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,n=!1;const s=r.length;for(let o=0;o<s;++o){const a=r[o];if(a.destroyed)n=!0;else if(a===t){i=!0;break}}return i||(r.push(t),n&&this._removeDestroyedObservers()),new eQ(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let n=0;n<r;++n){for(;n+i<r&&t[n+i].destroyed;)++i;if(i>0){if(!(n+i<r))break;t[n]=t[n+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const tQ=Xe();var Fe;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(Fe||(Fe={}));const ST=Fe.USER+1;function Gl(e){switch(e){case"defaults":return Fe.DEFAULTS;case"service":return Fe.SERVICE;case"portal-item":return Fe.PORTAL_ITEM;case"web-scene":return Fe.WEB_SCENE;case"web-map":return Fe.WEB_MAP;case"link-chart":return Fe.LINK_CHART;case"user":return Fe.USER;default:return null}}function lb(e){switch(e){case Fe.DEFAULTS:return"defaults";case Fe.SERVICE:return"service";case Fe.PORTAL_ITEM:return"portal-item";case Fe.WEB_SCENE:return"web-scene";case Fe.WEB_MAP:return"web-map";case Fe.LINK_CHART:return"link-chart";case Fe.USER:return"user"}}function rQ(e){return lb(e)}var rt;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(rt||(rt={}));const ub={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},mm=[];let _y=ub;function ve(e){_y.onObservableAccessed(e)}let m1=!1,y1=!1;function Ea(e,t,r){if(m1)return Xk(e,t,r);u8(e);const i=t.call(r);return c8(),i}function iQ(e,t){return Ea(ub,e,t)}function Xk(e,t,r){const i=m1;m1=!0,u8(e);let n=null;try{n=t.call(r)}catch(s){y1&&H.getLogger("esri.core.accessorSupport.tracking").error(s)}return c8(),m1=i,n}function u8(e){_y=e,mm.push(e)}function c8(){const e=mm.length;if(e>1){const t=mm.pop();_y=mm[e-2],t.onTrackingEnd()}else if(e===1){const t=mm.pop();_y=ub,t.onTrackingEnd()}else _y=ub}function d8(e,t){if(t.flags&rt.DepTrackingInitialized)return;const r=y1;y1=!1,t.flags&rt.AutoTracked?Xk(t,t.metadata.get,e):p8(e,t),y1=r}const nQ=[];function p8(e,t){t.flags&rt.ExplicitlyTracking||(t.flags|=rt.ExplicitlyTracking,Xk(t,()=>{const r=t.metadata.dependsOn||nQ;for(const i of r)if(typeof i!="string"||i.includes(".")){const n=n8(i);for(let s=0,o=e;s<n.length&&o!=null&&typeof o=="object";++s)o=_A(o,n[s],s!==n.length-1)}else _A(e,i,!1)}),t.flags&=~rt.ExplicitlyTracking)}function _A(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const n=_i(e);if(n){const s=n.propertiesByName.get(i);s&&(ve(s),d8(e,s))}return r?e[i]:void 0}let SA=class extends l8{constructor(t,r){super(),this.propertyName=t,this.metadata=r,this._accessed=null,this._handles=null,this.flags=0,this.flags=rt.Dirty|(r.nonNullable?rt.NonNullable:0)|(r.hasOwnProperty("value")?rt.HasDefaultValue:0)|(r.get===void 0?rt.DepTrackingInitialized:0)|(r.dependsOn===void 0?rt.AutoTracked:0)}destroy(){this.flags&rt.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(t){ve(this);const r=t.store,i=this.propertyName,n=this.flags,s=r.get(i);if(n&rt.Computing||~n&rt.Dirty&&r.has(i))return s;this.flags|=rt.Computing;const o=t.host;let a;n&rt.AutoTracked?a=Ea(this,this.metadata.get,o):(p8(o,this),a=this.metadata.get.call(o)),r.set(i,a,Fe.COMPUTED);const l=r.get(i);return l===s?this.flags&=~rt.Dirty:iQ(this.commit,this),this.flags&=~rt.Computing,l}onObservableAccessed(t){t!==this&&(this._accessed??(this._accessed=new Set),this._accessed.add(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=rt.DepTrackingInitialized,this._accessed!=null&&(this._handles??(this._handles=[]),this._accessed.forEach(t=>{this._handles.push(t.observe(this))}),this._accessed.clear())}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~rt.Dirty,this.onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}onInvalidated(){~this.flags&rt.Overridden&&(this.flags|=rt.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},sQ=class h8{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new h8;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,C(i))}),r}get(t){return this._values.get(t)}originOf(){return Fe.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function Xg(e,t,r){return e!==void 0}function $A(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&rt.NonNullable)||(i.lifecycle,Pi.INITIALIZING,!1))}let oQ=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Pi.INITIALIZING,this.store=new sQ,this._origin=Fe.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const n=new SA(i,r[i]);this.propertiesByName.set(i,n)}this.metadata=r}initialize(){this.lifecycle=Pi.CONSTRUCTING}constructed(){this.lifecycle=Pi.CONSTRUCTED}destroy(){this.lifecycle=Pi.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==Pi.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(r.metadata.get)return r.getComputed(this);ve(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&rt.HasDefaultValue)return"defaults"}return lb(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(Xg(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);Xg(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const n=this.propertiesByName.get(r);if(!Xg(n))return"";const s=new Set,o=Ea({onObservableAccessed:l=>s.add(l),onTrackingEnd:()=>{}},()=>{var l;return(l=n.metadata.get)==null?void 0:l.call(t)});let a=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;if(s.size===0)return a;i+="  ";for(const l of s)l instanceof SA&&(a+=`${i}${l.propertyName}: undefined
`);return a}setAtOrigin(t,r,i){const n=this.propertiesByName.get(t);if(Xg(n))return this._setAtOrigin(n,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&rt.Overridden)}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&rt.Overridden&&(r.flags&=~rt.Overridden,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!$A(i,t,r,this))return;const n=i.metadata.cast;if(n){const s=this._cast(n,r),{valid:o,value:a}=s;if(B2.release(s),!o)return;r=a}i.flags|=rt.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!$A(i,t,r,this))return;const n=i.metadata.cast;if(n){const o=this._cast(n,r),{valid:a,value:l}=o;if(B2.release(o),!a)return;r=l}const s=i.metadata.set;s?s.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=Gl(t)}getDefaultOrigin(){return lb(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==Pi.INITIALIZING?this._origin:Fe.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const n=this.store,s=t.propertyName;n.has(s,i)&&Kk(r,n.get(s))&&~t.flags&rt.Overridden&&i===n.originOf(s)||(t.invalidate(),n.set(s,r,i),t.commit(),d8(this.host,t))}_cast(t,r){const i=B2.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},aQ=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const B2=new Cd(aQ);function cb(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))cb(e,i,t[i]);else{if(t.includes(".")){const n=t.split("."),s=n.splice(-1,1)[0];return void cb(Ts(e,n),s,r)}const i=e.__accessor__;i!=null&&lQ(t,i),e[t]=r}}function lQ(e,t){if(F("esri-unknown-property-errors")&&!uQ(e,t))throw new D("set:unknown-property",cQ(e,t))}function uQ(e,t){return t.metadata[e]!=null}function cQ(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let dQ;function pQ(){return dQ}var xA;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(xA||(xA={}));function hQ(e){e.length=0}let yi=class{constructor(t=50,r=50){this._pool=new Cd(Array,void 0,hQ,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return H2.acquire()}static release(t){return H2.release(t)}static prune(){H2.prune()}};const H2=new yi(100);let f8=class extends Cd{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const ev=[];function db(e){ev.push(e),ev.length===1&&queueMicrotask(()=>{const t=ev.slice();ev.length=0;for(const r of t)r()})}let m8=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}record(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var $T;(function(e){const t=(s,o,a,l)=>{let c=o,h=o;const f=a>>>1,m=s[c-1];for(;h<=f;){h=c<<1,h<a&&l(s[h-1],s[h])<0&&++h;const y=s[h-1];if(l(y,m)<=0)break;s[c-1]=y,c=h}s[c-1]=m},r=(s,o)=>s<o?-1:s>o?1:0;function i(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let h=a>>>1;h>o;h--)t(s,h,a,l);const c=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,c,h,l)}}function*n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let h=a>>>1;h>o;h--)t(s,h,a,l),yield;const c=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,c,h,l),yield}}e.sort=i,e.iterableSort=n})($T||($T={}));const TA=$T,fQ=1.5,mQ=1.1;let pb=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new N6,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>MA(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const n=this.data[i];t(n)&&r.push(n)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,MA(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=wT(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(wT(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=xY(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){TA.sort(this.data,0,this.length,t)}iterableSort(t){return TA.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){for(let i=0;i<this.length;++i){const n=this.data[i];if(t.call(r,n,i))return n}}filterInPlace(t,r){let i=0;for(let n=0;n<this._length;++n){const s=this.data[n];t.call(r,s,n,this.data)&&(this.data[n]=this.data[i],this.data[i]=s,i++)}if(this._deallocator)for(let n=i;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:n}=this;for(let s=0;s<n;++s)t.call(r,i[s],s,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let n=0;n<this.length;++n)i[n]=t.call(r,this.data[n],n,this.data);return i}reduce(t,r){let i=r;for(let n=0;n<this.length;++n)i=t(i,this.data[n],n,this.data);return i}has(t){const r=this.length,i=this.data;for(let n=0;n<r;++n)if(i[n]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function MA(e){e.data.length>fQ*e.length&&(e.data.length=Math.floor(e.length*mQ))}function yQ(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return Xe(()=>e.clearTimeout(i))}}}const nf=yQ(globalThis);function V_(e){return gQ(e)||y8(e)}function gQ(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function y8(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function K0(e,t,r){if(!V_(e))throw new TypeError("target is not a Evented or EventTarget object");return y8(e)?vQ(e,t,r):e.on(t,r)}function vQ(e,t,r,i){if(Array.isArray(t)){const n=t.slice();for(const s of n)e.addEventListener(s,r,i);return Xe(()=>{for(const s of n)e.removeEventListener(s,r,i)})}return e.addEventListener(t,r,i),Xe(()=>e.removeEventListener(t,r,i))}function g8(e,t,r){if(!V_(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=K0(e,t,n=>{i.remove(),r.call(e,n)});return i}function Yt(e="Aborted"){return new D("AbortError",e)}function Ct(e,t="Aborted"){if(Ia(e))throw Yt(t)}function U_(e){return e instanceof AbortSignal?e:e==null?void 0:e.signal}function Ia(e){const t=U_(e);return t!=null&&t.aborted}function ho(e){if(Gi(e))throw e}function EA(e){if(!Gi(e))throw e}function Un(e,t){const r=U_(e);if(r!=null){if(!r.aborted)return g8(r,"abort",()=>t());t()}}function eO(e,t){const r=U_(e);if(r!=null)return Ct(r),g8(r,"abort",()=>t(Yt()))}function v8(e,t){return U_(t)==null?e:new Promise((r,i)=>{let n=Un(t,()=>i(Yt()));const s=()=>{n=Pt(n)};e.then(s,s),e.then(r,i)})}function Gi(e){return(e==null?void 0:e.name)==="AbortError"}async function xT(e){try{return await e}catch(t){if(!Gi(t))throw t;return}}async function tO(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map(o=>e[o]),n=await tO(i),s={};return r.map((o,a)=>s[o]=n[a]),s}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(i,n)=>{const s=r[n];return s.status==="fulfilled"?{promise:i,value:s.value}:{promise:i,error:s.reason}}))}async function wQ(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function TTe(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function w8(e,t=void 0,r){const i=new AbortController;return Un(r,()=>i.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(t)},e);Un(i,()=>{o&&(clearTimeout(o),s(Yt()))})})}function bQ(e,t){const r=new AbortController,i=setTimeout(()=>r.abort(),t);return Un(e,()=>{r.abort(),clearTimeout(i)}),{...e,signal:r.signal}}function Su(e){return e&&typeof e.then=="function"}function IA(e){return Su(e)?e:Promise.resolve(e)}function rO(e,t=-1){let r,i,n,s,o=null;const a=(...l)=>{if(r){i=l,s&&s.reject(Yt()),s=pn();const m=s.promise;if(o){const y=o;o=null,y.abort()}return m}if(n=s||pn(),s=null,t>0){const m=new AbortController;r=IA(e(...l,m.signal));const y=r;w8(t).then(()=>{r===y&&(s?m.abort():o=m)})}else r=1,r=IA(e(...l));const c=()=>{const m=i;i=n=r=o=null,m!=null&&a(...m)},h=r,f=n;return h.then(c,c),h.then(f.resolve,f.reject),f.promise};return a}function pn(){let e,t;const r=new Promise((n,s)=>{e=n,t=s}),i=n=>{e(n)};return i.resolve=n=>e(n),i.reject=n=>t(n),i.timeout=(n,s)=>nf.setTimeout(()=>i.reject(s),n),i.promise=r,i}async function kA(e){await Promise.resolve(),Ct(e)}function MTe(e){return e}function _Q(e){return 1e3*e}function ETe(e){return e}let SQ=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},$Q=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},TT=0;const Gf={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},MT=["prepare","preRender","render","postRender","update","finish"],ET=[],fd=new pb;let xQ=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function TQ(){Yc!=null&&(cancelAnimationFrame(Yc),Yc=requestAnimationFrame(iO))}const hb={frameTasks:fd,willDispatch:!1,clearFrameTasks:MQ,dispatch:_8,executeFrameTasks:EQ,reschedule:TQ};function sf(e){const t=new $Q(e);return ET.push(t),hb.willDispatch||(hb.willDispatch=!0,db(_8)),t}function Vh(e){const t=new SQ(e);return fd.push(t),Yc==null&&(TT=performance.now(),Yc=requestAnimationFrame(iO)),new xQ(t)}let Yc=null;function MQ(e=!1){fd.forAll(t=>{t.removed=!0}),e&&b8()}function iO(){const e=performance.now();Yc=null,Yc=fd.length>0?requestAnimationFrame(iO):null,hb.executeFrameTasks(e)}function EQ(e){const t=e-TT;TT=e;const r=1e3/60,i=Math.max(0,t-r);Gf.time=e,Gf.frameDuration=r-i;for(let n=0;n<MT.length;n++){const s=performance.now(),o=MT[n];fd.forAll(a=>{var l;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(Gf.elapsedFrameTime=performance.now()-e,Gf.deltaTime=a.ticks===0?0:t,(l=a.phases[o])==null||l.call(a,Gf)))}),IQ[n].record(performance.now()-s)}b8(),kQ.record(performance.now()-e)}const tv=new pb;function b8(){fd.forAll(e=>{e.removed&&tv.push(e)}),fd.removeUnorderedMany(tv.data,tv.length),tv.clear()}function _8(){for(;ET.length;){const e=ET.shift();e.isActive&&e.callback()}hb.willDispatch=!1}function PTe(e=1,t){const r=pn(),i=()=>{Ia(t)?r.reject(Yt()):e===0?r():(--e,db(()=>i()))};return i(),r.promise}const IQ=MT.map(e=>new m8(e)),kQ=new m8("total");function OQ(e,t){for(const r of e.entries())if(t(r[0]))return!0;return!1}function fb(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function OA(e,t){return t!=null&&e.add(t),e}function S8(e,t){const r=new Set;return fb(r,e),fb(r,t),r}function PQ(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function CTe(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function RTe(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function CQ(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}function RQ(e,t){return CQ(S8(e,t),PQ(e,t))}let AQ=0;function Sy(){return++AQ}let G_=class{constructor(t){this._accessed=new Set,this._handles=[],this._observerObject=new LQ(t),PA.register(this,new WeakRef(this._observerObject),this)}destroy(){var t;PA.unregister(this._observerObject),this._accessed.clear(),(t=this._observerObject)==null||t.destroy(),this.clear()}onObservableAccessed(t){this._accessed.add(t)}onTrackingEnd(){const t=this._handles,r=this._observerObject;this._accessed.forEach(i=>{t.push(i.observe(r))}),this._accessed.clear()}clear(){const t=this._handles;for(let r=0;r<t.length;++r)t[r].remove();t.length=0}},LQ=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=NQ}};const PA=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function NQ(){}let mh=!1;const mb=[];function $8(e,t){let r=new G_(s),i=null,n=!1;function s(){if(!r||n)return;if(mh)return void M8(s);const a=i;r.clear(),mh=!0,n=!0,i=Ea(r,e),n=!1,mh=!1,t(i,a),E8()}function o(){r&&(r.destroy(),r=null,i=null)}return n=!0,i=Ea(r,e),n=!1,Xe(o)}function x8(e,t){let r=new G_(n),i=null;function n(){t(i,o)}function s(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=Ea(r,e),i):null}return o(),Xe(s)}function T8(e){let t=new G_(i),r=!1;function i(){t&&!r&&(mh?M8(i):(t.clear(),mh=!0,r=!0,Ea(t,e),r=!1,mh=!1,E8()))}function n(){t&&(t.destroy(),t=null)}return r=!0,Ea(t,e),r=!1,Xe(n)}function M8(e){mb.includes(e)||mb.unshift(e)}function E8(){for(;mb.length;)mb.pop()()}var $y;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})($y||($y={}));let c0=class{constructor(){this.uid=Sy(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,n,s){return this.pool.acquire($y.Untracked,t,r,i,n,s,Kk)}static acquireTracked(t,r,i,n){return this.pool.acquire($y.Tracked,t,r,i,null,null,n)}notify(t,r){this.type===$y.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,n,s,o,a){this.uid=Sy(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Sy(),this.removed=!0}};c0.pool=new f8(c0);const g1=new yi,ba=new Set;let yb;function gb(e){ba.delete(e),ba.add(e),yb||(yb=sf(jQ))}function FQ(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function DQ(e){for(const t of ba.values())t.target===e&&(t.removed=!0)}function jQ(){let e=10;for(;yb&&e--;){yb=null;const t=zQ(),r=g1.acquire();for(const i of t){const n=i.uid;FQ(i),n===i.uid&&i.removed&&r.push(i)}for(const i of ba)i.removed&&(r.push(i),ba.delete(i));for(const i of r)c0.pool.release(i);g1.release(r),g1.release(t),IT.forEach(i=>i())}}function zQ(){const e=g1.acquire();e.length=ba.size;let t=0;for(const r of ba)e[t]=r,++t;return ba.clear(),e}const IT=new Set;function VQ(e){return IT.add(e),Xe(()=>IT.delete(e))}function UQ(e,t,r){let i=s8(e,t,r,(n,s,o)=>{let a,l,c=x8(()=>Z0(n,s),(h,f)=>{var m;((m=n.__accessor__)==null?void 0:m.lifecycle)===Pi.DESTROYED||a&&a.uid!==l?i.remove():(a||(a=c0.acquireUntracked(h,o,f,n,s),l=a.uid),gb(a))});return Xe(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,gb(a)),a=null),i=c=null})});return i}function GQ(e,t,r){const i=s8(e,t,r,(n,s,o)=>{let a=!1;return $8(()=>Z0(n,s),(l,c)=>{n.__accessor__.lifecycle!==Pi.DESTROYED?a||(a=!0,Kk(c,l)||o.call(n,l,c,s,n),a=!1):i.remove()})});return i}function qQ(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Pi.DESTROYED?i?GQ(e,t,r):UQ(e,t,r):Xe()}function BQ(e,t,r){let i,n,s=x8(e,(o,a)=>{i&&i.uid!==n?s.remove():(i||(i=c0.acquireTracked(o,t,a,r),n=i.uid),gb(i))});return Xe(()=>{s.remove(),i&&(i.uid!==n||i.removed||(i.removed=!0,gb(i)),i=null),s=null})}function HQ(e,t,r){let i=!1;return $8(e,(n,s)=>{i||(i=!0,r(s,n)||t(n,s),i=!1)})}function WQ(e,t,r=!1,i=J6){return r?HQ(e,t,i):BQ(e,t,i)}function CA(e){return OQ(ba,t=>t.oldValue===e)}function q_(e,t){for(const[r,i]of e)if(t(i,r))return!0;return!1}function nO(e,t,r){const i=e.get(t);if(i!==void 0)return i;const n=r();return e.set(t,n),n}function FTe(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const yh=()=>H.getLogger("esri.core.accessorSupport.ensureTypes");function ZQ(e){return e==null?e:new Date(e)}function JQ(e){return e==null?e:!!e}function Y0(e){return e==null?e:e.toString()}function An(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function sO(e){return e==null?e:Math.round(parseFloat(e))}function KQ(e){return null}function I8(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function vb(e,t){return t!=null&&e&&!(t instanceof e)}function k8(e){return e&&"isCollection"in e}function RA(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function YQ(e,t){if(!(t!=null&&t.constructor)||!k8(t.constructor))return kT(e,t)?t:new e(t);const r=RA(e.prototype.itemType),i=RA(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(kT(e,t),t):new e(t):t}function kT(e,t){return!!I8(t)&&(yh().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+H_(e)+"'"),!0)}function B_(e,t){return t==null?t:k8(e)?YQ(e,t):vb(e,t)?kT(e,t)?t:new e(t):t}function H_(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const QQ=new WeakMap;function XQ(e){switch(e){case Number:return An;case it:return sO;case Boolean:return JQ;case String:return Y0;case Date:return ZQ;case W_:return KQ;default:return nO(QQ,e,()=>B_.bind(null,e))}}function Qt(e,t){const r=XQ(e);return arguments.length===1?r:r(t)}function d0(e,t,r){return arguments.length===1?d0.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function eX(e,t){return arguments.length===1?d0(r=>Qt(e,r)):d0(r=>Qt(e,r),t)}function O8(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>O8(e,t-1,i)):e(r)}function wb(e,t,r){if(arguments.length===2)return s=>wb(e,t,s);if(!r)return r;r=O8(e,t,r);let i=t,n=r;for(;i>0&&Array.isArray(n);)i--,n=n[0];if(n!==void 0)for(let s=0;s<i;s++)r=[r];return r}function tX(e,t,r){return arguments.length===2?wb(i=>Qt(e,i),t):wb(i=>Qt(e,i),t,r)}function P8(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function OT(e,t){if(arguments.length===2)return OT(e).call(null,t);const r=new Set,i=e.filter(a=>typeof a!="function"),n=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,h=c==="string"||c==="number";return h&&(r.has(a)||n.some(f=>c==="string"&&f===String||c==="number"&&f===Number))||c==="object"&&n.some(f=>!vb(a,f))?a:(h&&i.length?(s||(s=i.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),yh().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(f=>H_(f)).join(", ")),yh().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):yh().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function So(e,t){if(arguments.length===2)return So(e).call(null,t);const r={},i=[],n=[];for(const l in e.typeMap){const c=e.typeMap[l];r[l]=Qt(c),i.push(H_(c)),n.push(l)}const s=()=>`'${i.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!vb(e.base,l)||l==null)return l;const c=a(l)||e.defaultKeyValue,h=r[c];if(!h)return yh().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!vb(e.typeMap[c],l))return l;if(typeof e.key=="string"&&!I8(l)){const f={};for(const m in l)m!==e.key&&(f[m]=l[m]);return h(f)}return h(l)}}let it=class{},W_=class{};const zTe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function rX(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function C8(e){switch(e.type){case"native":return Qt(e.value);case"array":return d0(C8(e.value));case"one-of":return iX(e);default:return null}}function iX(e){let t=null;return(r,i)=>CT(r,e)?r:(t==null&&(t=PT(e)),yh().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function PT(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case it:return"integer";case Date:return"date";case W_:return"null";default:return H_(e.value)}case"array":return`array of ${PT(e.value)}`;case"one-of":{const t=e.values.map(r=>PT(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function CT(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case it:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case W_:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!CT(r,t.value));case"one-of":return t.values.some(r=>CT(e,r))}}function d(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),n=z_(t,r);i&&(i.get||i.set?(n.get=i.get||n.get,n.set=i.set||n.set):"value"in i&&("value"in e&&H.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=i.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const s=e.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let h;n.dependsOn=[l],n.get=function(){let f=Ts(this,l);if(typeof f=="function"){h||(h=l.split(".").slice(0,-1).join("."));const m=Ts(this,h);m&&(f=f.bind(m))}return f},n.readOnly||(n.set=c?function(f){this._override(r,f)}:function(f){cb(this,l,f)})}const o=e.type,a=e.types;n.cast||(o?n.cast=nX(o):a&&(Array.isArray(a)?n.cast=d0(So(a[0])):n.cast=So(a))),JY(n,e),e.range&&(n.cast=sX(n.cast,e.range))}}function R8(e,t,r){const i=z_(e,r);i.json||(i.json={});let n=i.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function nX(e){let t=0,r=e;if(rX(e))return C8(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(P8(i))return t===0?OT(i):wb(OT(i),t);if(t===1)return eX(i);if(t>1)return tX(i,t);const n=e;return n.from?n.from:Qt(n)}function sX(e,t){return r=>{let i=+e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function oX(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const n=t[i];r[i].forEach(s=>{t[s]=n}),delete t[i]}}}let Zn=class extends X6{constructor(t,r,i){super(t,r,i)}};Zn.prototype.type="warning";function A8(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const RT=()=>H.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function AA(e,t,r){var i,n;e&&(!r&&!t.read||(i=t.read)!=null&&i.reader||((n=t.read)==null?void 0:n.enabled)===!1||uX(e)&&ri("read.reader",of(e),t))}function of(e){var r,i;const t=e.ndimArray??0;if(t>1)return lX(e);if(t===1)return LA(e);if("type"in e&&N8(e.type)){const n=(i=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:i.Type,s=LA(typeof n=="function"?{type:n}:{types:n});return(o,a,l)=>{const c=s(o,a,l);return c&&new e.type(c)}}return oO(e)}function oO(e){return"type"in e?aX(e.type):cX(e.types)}function aX(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void RT().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const s=new e;return s.read(t,i),s}:e.fromJSON}function L8(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(n=>L8(e,n,r,i-1)):e(t,void 0,r)}function lX(e){const t=oO(e),r=L8.bind(null,t),i=e.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=r(n,o,i);let a=i,l=n;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)n=[n];return n}}function LA(e){const t=oO(e);return(r,i,n)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const l=t(a,void 0,n);l!==void 0&&o.push(l)}return o}const s=t(r,void 0,n);return s!==void 0?[s]:void 0}}function N8(e){if(!A8(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?aO(t.Type):F8(t.Type))}function uX(e){return"types"in e?F8(e.types):aO(e.type)}function aO(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||N8(e))}function F8(e){for(const t in e.typeMap)if(!aO(e.typeMap[t]))return!1;return!0}function cX(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void RT().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=dX(e));const l=e.key;if(typeof l!="string")return;const c=n[l],h=c?t[c]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const m=`Type '${c||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new Zn(`${r}:unsupported`,m,{definition:n,context:o})),void RT().error(m)}const f=new h;return f.read(n,o),i?i(f):f}}function dX(e){var r,i;const t={};for(const n in e.typeMap){const s=e.typeMap[n],o=J0(s.prototype);if(typeof e.key=="function")continue;const a=o[e.key];if(!a)continue;if((r=a.json)!=null&&r.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){t[a.json.type[0]]=s;continue}const l=(i=a.json)==null?void 0:i.write;if(!(l!=null&&l.writer)){t[n]=s;continue}const c=l.target,h=typeof c=="string"?c:e.key,f={};l.writer(n,f,h),f[h]&&(t[f[h]]=s)}return t}function pX(e){if(e.json||(e.json={}),FA(e.json),DA(e.json),NA(e.json),e.json.origins)for(const t in e.json.origins)FA(e.json.origins[t]),DA(e.json.origins[t]),NA(e.json.origins[t]);return!0}function NA(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function FA(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function DA(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function jA(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&A8(e.type))?t.write.writer=mX:r>1?t.write.writer=yX(r):t.types?Array.isArray(t.types)?t.write.writer=fX(t.types[0]):t.write.writer=hX(t.types):t.write.writer=p0}function hX(e){return(t,r,i,n)=>t?D8(t,e,n)?p0(t,r,i,n):void 0:p0(t,r,i,n)}function D8(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r!=null&&r.messages){const i=t.errorContext??"type",n=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new D(`${i}:unsupported`,n,{definition:e,context:r})),H.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function fX(e){return(t,r,i,n)=>!t||!Array.isArray(t)?p0(t,r,i,n):p0(t.filter(s=>D8(s,e,n)),r,i,n)}function p0(e,t,r,i){ri(r,bb(e,i),t)}function bb(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?_b(e):e}function _b(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function mX(e,t,r,i){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(s=>bb(s,i)),typeof n.toArray=="function"&&(n=n.toArray())):n=[bb(e,i)],ri(r,n,t)}function j8(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>j8(i,t,r-1)):bb(e,t)}function yX(e){return(t,r,i,n)=>{let s;if(t===null)s=null;else{s=j8(t,n,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}ri(i,s,r)}}function gX(e,t){return lO(e,"any",t==null?void 0:t.origin)}function AT(e,t){return lO(e,"read",t==null?void 0:t.origin)}function z8(e,t){return lO(e,"write",t==null?void 0:t.origin)}function lO(e,t,r){let i=e==null?void 0:e.json;if(i!=null&&i.origins&&r){let n;n=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],n&&(t==="any"||t in n)&&(i=n)}return i}function vX(e){var r;const t=wX(e);if(e.json.origins)for(const i in e.json.origins){const n=e.json.origins[i],s=n.types?bX(n):t;AA(s,n,!1),n.types&&!n.write&&((r=e.json.write)!=null&&r.enabled)&&(n.write={...e.json.write}),jA(s,n)}AA(t,e.json,!0),jA(t,e.json)}function wX(e){return e.json.types?LT(e.json):e.type?V8(e):LT(e)}function bX(e){return e.type?V8(e):LT(e)}function V8(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!P8(r);)r=r[0],t++;return{type:r,ndimArray:t}}function LT(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function _X(e){pX(e)&&(oX(e),vX(e))}const W2=new Set,Z2=new Set;function T(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,$X(t);const r=[],i=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!W2.has(n.initialize)&&(W2.add(n.initialize),r.push(n.initialize)),n.hasOwnProperty("destroy")&&!Z2.has(n.destroy)&&(Z2.add(n.destroy),i.push(n.destroy)),n=Object.getPrototypeOf(n);W2.clear(),Z2.clear();const s=class extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=r.length-1;l>=0;l--)r[l].call(this)}}),i.length){let l=!1;const c=this[i8];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,c.call(this);for(let h=0;h<i.length;h++)i[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=J0(t.prototype),s.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function SX(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;ve(i);const n=r.store;return n.has(e)?n.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function $X(e){const t=e.prototype,r=J0(t),i={};for(const n of Object.getOwnPropertyNames(r)){const s=r[n];_X(s),i[n]={enumerable:!0,configurable:!0,get:SX(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this))return a.initialized&&s.readOnly?zA("read-only",n):a.lifecycle===Pi.CONSTRUCTED&&s.constructOnly?zA("construct-only",n):void a.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}const zA=(e,t)=>{H.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var U8,G8;function xX(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const qs=Symbol("Accessor-Handles"),NT=Symbol("Accessor-Initialized");let we=class q8{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}J0(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...c){const h=this.inherited;let f;this.inherited=function(...m){if(s.prototype[a])return s.prototype[a].apply(this,m)};try{f=l.apply(this,c)}catch(m){throw this.inherited=h,m}return this.inherited=h,f}:t[a]}for(const a in r){const l=xX(r[a]);d(l)(o.prototype,a)}return T(i)(o)}constructor(...t){var i;if(this[U8]=null,this[G8]=!1,this.constructor===q8)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new oQ(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=((i=this.normalizeCtorArgs)==null?void 0:i.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[NT]=!0}initialize(){}[i8](){this[qs]=xt(this[qs])}destroy(){var t;this.destroyed||(DQ(this),this.__accessor__.destroy(),(t=pQ())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[NT]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Pi.DESTROYED||!1}commitProperty(t){Ts(this,t)}get(t){return t8(H.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Ts(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return cb(this,t,r),this}watch(t,r,i){return qQ(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const n of i)n.remove();return}(this[qs]??(this[qs]=new H0)).add(t,r)}removeHandles(t){var r;(r=this[qs])==null||r.remove(t)}removeAllHandles(){var t;(t=this[qs])==null||t.removeAll()}removeHandlesReference(t){var r;(r=this[qs])==null||r.removeReference(t)}hasHandles(t){var r;return((r=this[qs])==null?void 0:r.has(t))===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};U8=qs,G8=NT;let TX=class B8{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new B8;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,C(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??Fe.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(i=>{var n;return((n=this._values.get(i))==null?void 0:n.origin)===t})}set(t,r,i){if((i=this._normalizeOrigin(i))===Fe.DEFAULTS){const n=this._values.get(t);if((n==null?void 0:n.origin)!=null&&n.origin>i)return}this._values.set(t,new MX(r,i))}delete(t,r){var i;(r=this._normalizeOrigin(r))!=null&&((i=this._values.get(t))==null?void 0:i.origin)!==r||this._values.delete(t)}has(t,r){var i;return(r=this._normalizeOrigin(r))!=null?((i=this._values.get(t))==null?void 0:i.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(t!=null)return t===Fe.DEFAULTS?t:Fe.USER}},MX=class{constructor(t,r){this.value=t,this.origin=r}};function H8(e,t,r){t.keys().forEach(n=>{r.set(n,t.get(n),Fe.DEFAULTS)});const i=e.metadata;Object.keys(i).forEach(n=>{e.internalGet(n)&&r.set(n,e.internalGet(n),Fe.DEFAULTS)})}function EX(e,t,r){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&bA(i,r))return!0}else for(const n of i)if(n===t||n.includes(".")&&n.indexOf(t)===0&&bA(n,r))return!0;return!1}function IX(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function kX(e,t,r,i,n){let s=AT(t[r],n);IX(s)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))s=AT(t[o],n),EX(s,r,i)&&(e[o]=!0)}function OX(e,t,r,i){const n=r.metadata,s=gX(n[t],i),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,i):o;a!==void 0&&r.set(t,a)}const W8={origin:"service"};function Z8(e,t,r=W8){if(!t||typeof t!="object")return;const i=_i(e),n=i.metadata,s={};for(const o of Object.getOwnPropertyNames(t))kX(s,n,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(s)){const a=AT(n[o],r).read,l=a==null?void 0:a.source;let c;c=l&&typeof l=="string"?Z0(t,l):t[o],a!=null&&a.reader&&(c=a.reader.call(e,c,t,r)),c!==void 0&&i.set(o,c)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||OX(e,o,i,r)}i.setDefaultOrigin("user")}function PX(e,t,r,i=W8){var s;const n={...i,messages:[]};r(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||e.loaded?i!=null&&i.messages&&i.messages.push(o):e.loadWarnings.push(o)})}function CX(e,t,r,i,n){var o,a;const s={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,i,s,r,n),s}function J8(e,t,r,i,n,s){if(!(i!=null&&i.write))return!1;const o=Ts(e,r);if(!n&&i.write.overridePolicy){const a=i.write.overridePolicy.call(e,o,r,s??void 0);a!==void 0&&(n=a)}if(n||(n=i.write),!n||n.enabled===!1||n.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new D("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&H.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===Fe.DEFAULTS)&&RX(e,r,s,i,o)||!n.ignoreOrigin&&(s!=null&&s.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<Gl(s.origin))}function RX(e,t,r,i,n){const s=i.default;if(s===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(e,t,r??void 0);return N_(o,n)}return!1}return s===n}function AX(e,t,r,i){const n=_i(e),s=n.metadata,o=z8(s[t],i);return!!o&&J8(e,n,t,o,r,i)}function K8(e,t,r){var s,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return f1(t,e.toJSON(r));const i=_i(e),n=i.metadata;for(const a in n){const l=z8(n[a],r);if(!J8(e,i,a,l,void 0,r))continue;const c=Ts(e,a),h=CX(e,l,l.write&&typeof l.write.target=="string"?l.write.target:a,c,r);Object.keys(h).length>0&&(t=f1(t,h),(o=(s=r==null?void 0:r.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>f1(t,h,()=>"replace-arrays"))),r!=null&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:a,oldOrigin:rQ(i.store.originOf(a)),newOrigin:r.origin}))}return t}const Q0=e=>{let t=class extends e{constructor(...r){super(...r);const i=_i(this),n=i.store,s=new TX;i.store=s,H8(i,n,s)}read(r,i){Z8(this,r,i)}write(r,i){return K8(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return LX.call(this,r,i)}};return t=u([T("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function LX(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}function Sb(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let q=class extends Q0(we){};q=u([T("esri.core.JSONSupport")],q);const NX=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,FX={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function VA(e){const t=e==null?void 0:e.match(NX);if(!t)return null;const[,r,i,n]=t;if(!r)return null;let s=null,o=null,a=null;const{devext:l,qaext:c,www:h}=FX;if(i)if(s=r,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function DX(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function Y8(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function jX(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function zX(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const VX=()=>H.getLogger("esri.core.urlUtils"),af=He.request,UA="esri/config: esriConfig.request.proxyUrl is not set.",Q8=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,X8=/^\s*http:/i,UX=/^\s*https:/i,GX=/^\s*file:/i,qX=/:\d+$/,BX=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,HX=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),WX=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let gh=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(HX);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(WX),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const rv={},ZX=new gh(He.applicationUrl);let Qr=ZX;const JX=KX();let uO=JX;const cO=()=>Qr,BTe=()=>uO;function KX(){const e=Qr.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${Qr.scheme}://${Qr.host}${Qr.port!=null?`:${Qr.port}`:""}`}${t}`}function ii(e){if(!e)return null;const t={path:null,query:null},r=new gh(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.substring(0,i),t.query=dO(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function dO(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const n=i.indexOf("=");let s,o;n<0?(s=decodeURIComponent(i),o=""):(s=decodeURIComponent(i.slice(0,n)),o=decodeURIComponent(i.slice(n+1)));let a=r[s];typeof a=="string"&&(a=r[s]=[a]),Array.isArray(a)?a.push(o):r[s]=o}return r}function h0(e,t){return e?Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const n=encodeURIComponent(r)+"=",s=t==null?void 0:t[r];return s?n+encodeURIComponent(s(i)):Array.isArray(i)?i.map(o=>Sb(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):Sb(i)?n+encodeURIComponent(JSON.stringify(i)):n+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function YX(e=!1){let t,r=af.proxyUrl;if(typeof e=="string"){t=iee(e);const i=Z_(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw VX().warn(UA),new D("urlUtils:proxy-not-set",UA);return t&&DT()&&(r=yO(r)),ii(r)}function HTe(e){const t=Z_(e);let r,i;if(t){const n=pO(t.proxyUrl);r=n.path,i=n.query?dO(n.query):null}if(r){const n=ii(e);e=r+"?"+n.path;const s=h0({...i,...n.query});s&&(e=`${e}?${s}`)}return e}const qf={path:"",query:""};function pO(e){const t=e.indexOf("?");return t!==-1?(qf.path=e.slice(0,t),qf.query=e.slice(t+1)):(qf.path=e,qf.query=null),qf}function ez(e){return e=(e=xb(e=uee(e=pO(e).path),!0)).toLowerCase()}function QX(e){const t={proxyUrl:e.proxyUrl,urlPrefix:ez(e.urlPrefix)},r=af.proxyRules,i=t.urlPrefix;let n=r.length;for(let s=0;s<r.length;s++){const o=r[s].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;n=s;break}o.indexOf(i)===0&&(n=s+1)}return r.splice(n,0,t),n}function Z_(e){const t=af.proxyRules,r=ez(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function XX(e,t){if(!e||!t)return!1;e=$b(e),t=$b(t);const r=VA(e),i=VA(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&Uh(e,t,!0)}function tz(e,t){return e=$b(e),t=$b(t),xb(e)===xb(t)}function $b(e){const t=(e=Ms(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function FT(e,t=af.interceptors){const r=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i);if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function Uh(e,t,r=!1){if(!e||!t)return!1;const i=zT(e),n=zT(t);return!(!r&&i.scheme!==n.scheme)&&i.host!=null&&n.host!=null&&i.host.toLowerCase()===n.host.toLowerCase()&&i.port===n.port}function hO(e){if(typeof e=="string"){if(!ln(e))return!0;e=zT(e)}if(Uh(e,Qr))return!0;const t=af.trustedServers||[];for(let r=0;r<t.length;r++){const i=eee(t[r]);for(let n=0;n<i.length;n++)if(Uh(e,i[n]))return!0}return!1}function eee(e){return rv[e]||(mO(e)||$o(e)?rv[e]=[new gh(Nn(e))]:rv[e]=[new gh(`http://${e}`),new gh(`https://${e}`)]),rv[e]}function Nn(e,t=uO,r){return $o(e)?r!=null&&r.preserveProtocolRelative?e:Qr.scheme==="http"&&Qr.authority===Gn(e).slice(2)?`http:${e}`:`https:${e}`:mO(e)?e:Gh(e[0]==="/"?aee(t):t,e)}function fO(e,t=uO,r){if(e==null||!ln(e))return e;const i=Ms(e),n=i.toLowerCase(),s=Ms(t).toLowerCase().replace(/\/+$/,""),o=r?Ms(r).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(f,m,y)=>(y=f.indexOf(m,y))===-1?f.length:y;let l=a(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==n.length);)l=a(n,"/",l+1);if(c===-1||o&&c<o.length)return e;e=i.slice(c);const h=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function Ms(e){return e=pee(e=dee(e=cee(e=Nn(e=e.trim()))))}function Gh(...e){const t=e.filter(pd);if(!(t!=null&&t.length))return;const r=[];if(ln(t[0])){const n=t[0],s=n.indexOf("//");s!==-1&&(r.push(n.slice(0,s+1)),see(t[0])&&(r[0]+="/"),t[0]=n.slice(s+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<i.length;n++){const s=i[n];s===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!s&&n===i.length-1||s&&(s!=="."||r.length===0))&&r.push(s)}return r.join("/")}function Gn(e,t=!1){if(e==null||J_(e)||Rd(e))return null;let r=e.indexOf("://");if(r===-1&&$o(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=xb(e,!0)),e}function ln(e){return $o(e)||mO(e)}function J_(e){return e!=null&&e.slice(0,5)==="blob:"}function Rd(e){return e!=null&&e.slice(0,5)==="data:"}function tee(e){const t=f0(e);return t!=null&&t.isBase64?jX(t.data):null}function WTe(e){return zX(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const ree=/^data:(.*?)(;base64)?,(.*)$/;function f0(e){const t=e.match(ree);if(!t)return null;const[,r,i,n]=t;return{mediaType:r,isBase64:!!i,data:n}}function rz(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function ZTe(e){return(await fetch(e)).blob()}function JTe(e){const t=tee(e);if(!t)return null;const r=f0(e);return new Blob([t],{type:r.mediaType})}function $o(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function mO(e){return e!=null&&Q8.test(e)}function iee(e){return e!=null&&UX.test(e)||Qr.scheme==="https"&&$o(e)}function nee(e){return e!=null&&X8.test(e)||Qr.scheme==="http"&&$o(e)}function see(e){return e!=null&&GX.test(e)}function yO(e){return $o(e)?`https:${e}`:e.replace(X8,"https:")}function oee(){return Qr.scheme==="http"}function DT(){return Qr.scheme==="https"}function xb(e,t=!1){return $o(e)?e.slice(2):(e=e.replace(Q8,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function aee(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function lee(e){let t=0;if(ln(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function KTe(e,t){if(!e)return"";const r=ii(e).path.replace(/\/+$/,""),i=r.substring(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return i;const n=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(n,"")}function uee(e){return e.endsWith("/")?e:`${e}/`}function iz(e){return e.replace(/\/+$/,"")}function cee(e){if(/^https?:\/\//i.test(e)){const t=pO(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function dee(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function pee(e){const t=af.httpsDomains;if(!nee(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),qX.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return oee()&&i===Qr.authority&&!BX.test(e)||(DT()&&i===Qr.authority||t&&t.some(n=>i===n||i.endsWith(`.${n}`))||DT()&&!Z_(e))&&(e=yO(e)),e}function jT(e,t,r){if(!(t&&r&&e&&ln(e)))return e;const i=e.indexOf("//"),n=e.indexOf("/",i+2),s=e.indexOf(":",i+2),o=Math.min(n<0?e.length:n,s<0?e.length:s);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function zT(e){return typeof e=="string"?new gh(Nn(e)):(e.scheme||(e.scheme=Qr.scheme),e)}function YTe(e){return fee.test(e)}function nz(e,t){const r=ii(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function hee(e,t,r){const i=ii(e),n=i.query||{};return n[t]=String(r),`${i.path}?${h0(n)}`}function J2(e,t){if(!t)return e;const r=ii(e),i=r.query||{};for(const[s,o]of Object.entries(t))o!=null&&(i[s]=o);const n=h0(i);return n?`${r.path}?${n}`:r.path}function QTe(e){if(e==null)return null;const t=e.match(sz);return t?t[2]:null}function GA(e){if(e==null)return null;const t=e.match(sz);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function XTe(e){return typeof e=="string"?f0(e)??{data:e}:new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(f0(i.result)),i.onerror=n=>r(n)})}const sz=/([^.]*)\.([^/]*)$/,fee=/(^data:image\/svg|\.svg$)/i,oz="20240703",az="c2e27693be5ad62ff80ac547c420439d7fa3d50b";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const mee="4.30";let Re,gO=mee;gO="4.30.5";function eMe(e){Re=e}function tMe(e){const t=Re==null?void 0:Re.findCredential(e);return t!=null&&t.token?hee(e,"token",t.token):e}F("host-webworker");const yee=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function lz(e){const t=Gn(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!yee.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function gee(e,t,r=!1,i){return new Promise((n,s)=>{if(Ia(i))return void s(qA());let o=()=>{c(),s(new Error(`Unable to load ${t}`))},a=()=>{const h=e;c(),n(h)},l=()=>{if(!e)return;const h=e;c(),h.src="",s(qA())};const c=()=>{F("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,i!=null&&i.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};i!=null&&i.addEventListener("abort",l),F("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function qA(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const uz="Timeout exceeded";function vee(){return new Error(uz)}function rMe(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===uz}function wee(e){He.request.crossOriginNoCorsDomains||(He.request.crossOriginNoCorsDomains={});const t=He.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[Gn(r)??""]=0:(t[Gn("http://"+r)??""]=0,t[Gn("https://"+r)??""]=0)}function bee(e){const t=He.request.crossOriginNoCorsDomains;if(t){let r=Gn(e);if(r)return r=r.toLowerCase(),!Uh(r,cO())&&t[r]<Date.now()-36e5}return!1}async function _ee(e){var n;const t=He.request.crossOriginNoCorsDomains,r=Gn(e);t&&r&&(t[r.toLowerCase()]=Date.now());const i=ii(e);e=i.path,((n=i.query)==null?void 0:n.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function Ot(e,t){var m;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=dO(t.query.toString().replaceAll("+"," ")));const r=Rd(e),i=J_(e);i||r||(e=Ms(e));const n={url:e,requestOptions:{...t}},s=y=>({data:y,getAllHeaders:qh,getHeader:qh,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=FT(e,Pn.internalInterceptors);if(o){const y=await HA(o,n);if(y!=null)return s(y)}let a=FT(e);if(a){const y=await HA(a,n);if(y!=null)return s(y);a.after||a.error||(a=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"&&(F("host-webworker")||F("host-node")))throw wo("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(t.method==="head"){if(t.body)throw wo("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(r||i)throw wo("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await Mee(),Tb)return Tb.execute(e,t);const l=new AbortController,c=Un(t,()=>l.abort()),h={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:n,redoRequest:!1,useIdentity:Pn.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=await Oee(h).finally(()=>c==null?void 0:c.remove());return(m=a==null?void 0:a.after)==null||m.call(a,f),f}let Tb;const Pn=He.request,cz="FormData"in globalThis,See=new Set([499,498,403,401]),$ee=new Set(["COM_0056","COM_0057","SB_0008"]),xee=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],qh=()=>null,Mb=Symbol();function Tee(e){const t=Gn(e);t&&!Ot._corsServers.includes(t)&&Ot._corsServers.push(t)}function BA(e){const t=Gn(e);return!t||t.endsWith(".arcgis.com")||Ot._corsServers.includes(t)||hO(t)}function wo(e,t,r,i){let n="Error";const s={url:r.url,requestOptions:r.requestOptions,getAllHeaders:qh,getHeader:qh,ssl:!1};if(t instanceof D)return t.details?(t.details=C(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const o=i&&(()=>Array.from(i.headers)),a=i&&(h=>i.headers.get(h)),l=i==null?void 0:i.status,c=t.message;c&&(n=c),o&&a&&(s.getAllHeaders=o,s.getHeader=a),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||l||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=Mb in t?t[Mb]:t}return Gi(t)?Yt():new D(e,n,s)}async function Mee(){F("host-webworker")&&!Tb&&(Tb=await ee(()=>import("./request-C6gl8qwt.js"),[]))}async function VT(){Re||await ee(()=>import("./IdentityManager-6dnNf7m8.js"),__vite__mapDeps([0,1]))}async function Eee(e){var a;const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,n=r.body;let s=null,o=null;if(cz&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:Pn.priority,redirect:"follow",signal:i},(s||o)&&(e.fetchOptions.body=s||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(a=r.query)!=null&&a.token||s!=null&&s.get("token")),!e.hasToken&&He.apiKey&&lz(t)&&(r.query||(r.query={}),r.query.token=He.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!dz(t)&&!Ia(i)){let l;r.authMode==="immediate"?(await VT(),l=await Re.getCredential(t,{signal:i}),e.credential=l):r.authMode==="no-prompt"?(await VT(),l=await Re.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=l):Re&&(l=Re.findCredential(t)),l&&(e.credentialToken=l.token,e.useSSL=!!l.ssl)}}function dz(e){return xee.some(t=>t.test(e))}async function Iee(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions??{},n=J_(t)||Rd(t),s=r.responseType||"json",o=n?0:r.timeout!=null?r.timeout:Pn.timeout;let a=!1;if(!n){e.useSSL&&(t=yO(t));let m={...r.query};e.credentialToken&&(m.token=e.credentialToken);let y=h0(m);F("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const g=t.length+1+y.length;let v;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||g>Pn.maxUrlLength;const b=r.useProxy||!!Z_(t);if(b){const w=YX(t);v=w.path,!a&&v.length+1+g>Pn.maxUrlLength&&(a=!0),w.query&&(m={...w.query,...m})}if(i.method==="HEAD"&&(a||b)){if(a)throw g>Pn.maxUrlLength?wo("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):wo("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(b)throw wo("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=J2(t,m):(i.body=h0(m),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=J2(t,m),b&&(e.useProxy=!0,t=`${v}?${t}`),m.token&&cz&&i.body instanceof FormData&&!DX(t)&&i.body.set("token",m.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!Uh(t,cO())){if(hO(t))e.withCredentials=!0;else if(Re){const w=Re.findServerInfo(t);w!=null&&w.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(i.credentials="include",bee(t)&&await _ee(a?J2(t,m):t))}let l,c,h=0,f=!1;o>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")c=i,c.url=t;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||a||kee(r.headers)||!n&&!e.useProxy&&Pn.proxyUrl&&!BA(t)){if(Ot._beforeFetch&&await Ot._beforeFetch(t,i),l=await fetch(t,i),Ot._afterFetch&&await Ot._afterFetch(l),e.useProxy||Tee(t),r.responseType==="native")c=l;else if(i.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":c=await l.arrayBuffer();break;case"blob":case"image":c=await l.blob();break;default:c=await l.text()}if(h&&(clearTimeout(h),h=0),s==="json"||s==="xml"||s==="document")if(c)switch(s){case"json":c=JSON.parse(c);break;case"xml":c=WA(c,"application/xml");break;case"document":c=WA(c,"text/html")}else c=null;if(c){if(s==="array-buffer"||s==="blob"){const m=l.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&c[s==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(c).json();y.error&&(c=y)}catch{}}s==="image"&&c instanceof Blob&&(c=await ZA(URL.createObjectURL(c),e,!0))}}else{c=await l.text();try{c=JSON.parse(c)}catch{}}}else c=await ZA(t,e)}catch(m){if(m.name==="AbortError")throw f?vee():Yt("Request canceled");if(!(!l&&m instanceof TypeError&&Pn.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||BA(t))throw m;e.redoRequest=!0,QX({proxyUrl:Pn.proxyUrl,urlPrefix:Gn(t)??""})}finally{h&&clearTimeout(h)}return[l,c]}async function HA(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(n){r=wo("request:interceptor",n,t)}if((i instanceof Error||i instanceof D)&&(r=wo("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function kee(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function WA(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function Oee(e){var s,o;let t,r;await Eee(e);try{do[t,r]=await Iee(e);while(!await Pee(e,t,r))}catch(a){const l=wo("request:server",a,e.params,t);throw l.details.ssl=e.useSSL,(s=e.interceptor)!=null&&s.error&&e.interceptor.error(l),l}const i=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&((o=r.user)!=null&&o.username)&&!hO(i)){const a=Gn(i,!0);a&&Pn.trustedServers.push(a)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&wee(r.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&Re){const a=Re.findServerInfo(n.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const c=Re.findCredential(l,n.userId);c&&Re._getIdenticalSvcIdx(l,c)===-1&&c.resources.unshift(l)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):qh,getHeader:t?a=>t.headers.get(a):qh,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function Pee(e,t,r){var c;if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let n,s;if(r&&(r.error&&typeof r.error=="object"?n=r.error:r.status==="error"&&Array.isArray(r.messages)&&(n={...r},n[Mb]=r,n.details=r.messages)),!n&&!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[Mb]=r,n;let o,a=null;n&&(s=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const l=i.authMode;if(s===403&&(a===4||(c=n.message)!=null&&c.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&See.has(s)&&!dz(e.params.url)&&(s!==403||(!o||!$ee.has(o))&&(a==null||a===2&&e.credentialToken))){await VT();try{const h=await Re.getCredential(e.params.url,{error:wo("request:server",n,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=h,e.credentialToken=h.token,e.useSSL=e.useSSL||h.ssl,!1}catch(h){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;n=h}}if(n)throw n;return!0}function ZA(e,t,r=!1){const i=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Pn.priority,n.src=e,gee(n,e,r,i)}Ot._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Ot._beforeFetch=void 0,Ot._afterFetch=void 0;let v1=class pz{constructor(){this._emitter=new pz.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){var c;let o=(c=this._listenersMap)==null?void 0:c.get(n);if(!o)return!1;const a=this._target||this;let l=!1;for(const h of o.slice()){const f="deref"in h?h.deref():h;f?f==null||f.call(a,s):l=!0}return l&&(o=o.filter(h=>!("deref"in h)||h.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(l=>this.on(l,s));return W0(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),Xe(()=>{var c;const a=(c=this._listenersMap)==null?void 0:c.get(n),l=(a==null?void 0:a.indexOf(s))??-1;l>=0&&a.splice(l,1)})}once(n,s){const o=this.on(n,a=>{o.remove();const l="deref"in s?s.deref():s;l==null||l.call(null,a)});return o}hasEventListener(n){var o;const s=(o=this._listenersMap)==null?void 0:o.get(n);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let n=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=u([T("esri.core.Evented")],n),n};let r=class extends we{constructor(){super(...arguments),this._emitter=new v1.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,n){return this._emitter.emit(i,n)}on(i,n){return this._emitter.on(i,n)}once(i,n){return this._emitter.once(i,n)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=u([T("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(v1||(v1={}));const Aa=v1;var Je;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Je||(Je={}));function vO(e){return(t,r)=>{t[r]=e}}let X0=class extends l8{notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};var pa;let Cee=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},Ree=class{constructor(t,r,i,n,s){this.target=t,this.added=r,this.removed=i,this.start=n,this.deleteCount=s}};const wn=new Cd(Cee,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function JA(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function K2(e){return e?e instanceof la?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Y2(e){if(e!=null&&e.length)return e[0]}function Aee(e,t,r,i){const n=Math.min(e.length-r,t.length-i);let s=0;for(;s<n&&e[r+s]===t[i+s];)s++;return s}function hz(e,t,r,i){t&&t.forEach((n,s,o)=>{e.push(n),hz(e,r.call(i,n,s,o),r,i)})}const Ua=new Set,Ga=new Set,qa=new Set,Q2=new Map;let Lee=0,la=pa=class extends Aa.EventedAccessor{static isCollection(e){return e!=null&&e instanceof pa}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new X0,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Lee++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof pa?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return ve(this._observable),this._items}set items(e){this._emitBeforeChanges(Je.ADD)||(this._splice(0,this.length,K2(e)),this._emitAfterChanges(Je.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return Xe();if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),Xe(()=>{i.removed=!0,r.splice(r.indexOf(i),1)})}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,i=this.on(e,n=>{var s;(s=r())==null||s.call(null,n),i.remove()});return i}add(e,t){if(ve(this._observable),this._emitBeforeChanges(Je.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(Je.ADD),this}addMany(e,t=this._items.length){if(ve(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(Je.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,K2(e)),this._emitAfterChanges(Je.ADD),this}at(e){if(ve(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(ve(this._observable),!this.length||this._emitBeforeChanges(Je.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(Je.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return ve(this._observable),this._createNewInstance({items:this._items.map(C)})}concat(...e){ve(this._observable);const t=e.map(K2);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(ve(this._observable),!this.length||this._emitBeforeChanges(Je.REMOVE))return;const r=this._splice(0,this.length),i=r.length;for(let n=0;n<i;n++)e.call(t,r[n],n,r);this._emitAfterChanges(Je.REMOVE)}destroyAll(){this.drain(JA)}destroyMany(e){const t=this.removeMany(e);return t.forEach(JA),t}every(e,t){return ve(this._observable),this._items.every(e,t)}filter(e,t){let r;return ve(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return ve(this._observable),this._items.find(e,t)}findIndex(e,t){return ve(this._observable),this._items.findIndex(e,t)}flatten(e,t){ve(this._observable);const r=[];return hz(r,this,e,t),new pa(r)}forEach(e,t){return ve(this._observable),this._items.forEach(e,t)}getItemAt(e){return ve(this._observable),this._items[e]}getNextIndex(e){ve(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return ve(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return ve(this._observable),this._items.indexOf(e,t)}join(e=","){return ve(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return ve(this._observable),this._items.lastIndexOf(e,t)}map(e,t){ve(this._observable);const r=this._items.map(e,t);return new pa({items:r})}reorder(e,t=this.length-1){ve(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(Je.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(Je.MOVE)}return e}}pop(){if(ve(this._observable),!this.length||this._emitBeforeChanges(Je.REMOVE))return;const e=Y2(this._splice(this.length-1,1));return this._emitAfterChanges(Je.REMOVE),e}push(...e){return ve(this._observable),this._emitBeforeChanges(Je.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Je.ADD)),this.length}reduce(e,t){ve(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){ve(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return ve(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(ve(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Je.REMOVE))return;const t=Y2(this._splice(e,1));return this._emitAfterChanges(Je.REMOVE),t}removeMany(e){if(ve(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(Je.REMOVE))return[];const t=e instanceof pa?e.toArray():e,r=this._items,i=[],n=t.length;for(let s=0;s<n;s++){const o=t[s],a=r.indexOf(o);if(a>-1){const l=1+Aee(t,r,s+1,a+1),c=this._splice(a,l);c&&c.length>0&&i.push.apply(i,c),s+=l-1}}return this._emitAfterChanges(Je.REMOVE),i}reverse(){if(ve(this._observable),this._emitBeforeChanges(Je.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Je.MOVE),this}shift(){if(ve(this._observable),!this.length||this._emitBeforeChanges(Je.REMOVE))return;const e=Y2(this._splice(0,1));return this._emitAfterChanges(Je.REMOVE),e}slice(e=0,t=this.length){return ve(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return ve(this._observable),this._items.some(e,t)}sort(e){if(ve(this._observable),!this.length||this._emitBeforeChanges(Je.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Je.MOVE),this}splice(e,t,...r){ve(this._observable);const i=(t?Je.REMOVE:0)|(r.length?Je.ADD:0);if(this._emitBeforeChanges(i))return[];const n=this._splice(e,t,r)||[];return this._emitAfterChanges(i),n}toArray(){return ve(this._observable),this._items.slice()}toJSON(){return ve(this._observable),this.toArray()}toLocaleString(){return ve(this._observable),this._items.toLocaleString()}toString(){return ve(this._observable),this._items.toString()}unshift(...e){return ve(this._observable),!e.length||this._emitBeforeChanges(Je.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Je.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=sf(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const a=wn.acquire();a.target=this,a.cancellable=!0;for(let l=0,c=o.length;l<c;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),i.splice(e,0,s),e+=1,l-=1,c-=1);wn.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=wn.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let c=0;c<l;c++)a.reset(o[c]),this.emit("after-remove",a);wn.release(a)}}if(r!=null&&r.length){if(n){const h=[];for(const f of r){const m=n.ensureType(f);m==null&&f!=null||h.push(m)}r=h}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=e===this.length;if(a||l){const h=wn.acquire();h.target=this,h.cancellable=!0;const f=wn.acquire();f.target=this,f.cancellable=!1;for(const m of r)a?(h.reset(m),this.emit("before-add",h),h.defaultPrevented||(c?i.push(m):i.splice(e++,0,m),this._set("length",i.length),l&&(f.reset(m),this.emit("after-add",f)))):(c?i.push(m):i.splice(e++,0,m),this._set("length",i.length),f.reset(m),this.emit("after-add",f));wn.release(f),wn.release(h)}else{if(c)for(const h of r)i.push(h);else i.splice(e,0,...r);this._set("length",i.length)}}if((r!=null&&r.length||o!=null&&o.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const a=new Ree(this,r,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=wn.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,wn.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=wn.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),wn.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;Ua.clear(),Ga.clear(),qa.clear();for(const{added:l,removed:c}of r){if(l)if(qa.size===0&&Ga.size===0)for(const h of l)Ua.add(h);else for(const h of l)Ga.has(h)?(qa.add(h),Ga.delete(h)):qa.has(h)||Ua.add(h);if(c)if(qa.size===0&&Ua.size===0)for(const h of c)Ga.add(h);else for(const h of c)Ua.has(h)?Ua.delete(h):(qa.delete(h),Ga.add(h))}const i=yi.acquire();Ua.forEach(l=>{i.push(l)});const n=yi.acquire();Ga.forEach(l=>{n.push(l)});const s=this._items,o=t.items,a=yi.acquire();if(qa.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),t.listeners&&(i.length||n.length||a.length)){const l={target:this,added:i,removed:n,moved:a},c=t.listeners.length;for(let h=0;h<c;h++){const f=t.listeners[h];f.removed||f.callback.call(this,l)}}yi.release(i),yi.release(n),yi.release(a)}Ua.clear(),Ga.clear(),qa.clear()}};la.ofType=e=>{if(!e)return pa;if(Q2.has(e))return Q2.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const n=e.typeMap[i].prototype.declaredClass;t?t+=` | ${n}`:t=n}let r=class extends pa{};return u([vO({Type:e,ensureType:typeof e=="function"?Qt(e):So(e)})],r.prototype,"itemType",void 0),r=u([T(`esri.core.Collection<${t}>`)],r),Q2.set(e,r),r},u([d()],la.prototype,"_updating",void 0),u([d()],la.prototype,"length",void 0),u([d()],la.prototype,"items",null),u([d({readOnly:!0})],la.prototype,"updating",null),la=pa=u([T("esri.core.Collection")],la);const ce=la;function lu(e,t,r=ce){return t||(t=new r),t===e||(t.removeAll(),Nee(e)?t.addMany(e):e&&t.add(e)),t}function fz(e){return e}function Nee(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var kl;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(kl||(kl={}));let Fee=class{constructor(){this._resolver=pn(),this._status=kl.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=kl.RESOLVED,this._cleanUp()},()=>{this._status=kl.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===kl.RESOLVED}isRejected(){return this._status===kl.REJECTED}isFulfilled(){return this._status!==kl.PENDING}abort(){this._resolver.reject(Yt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=pn(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==i||Gi(n)||this._resolver.reject(n)}),t.resolve()}};const K_=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new Fee,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=u([T("esri.core.Promise")],t),t};let Eb=class extends K_(we){};Eb=u([T("esri.core.Promise")],Eb);const Dee="not-loaded",jee="loading",zee="failed",KA="loaded",mz=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const c=eO(s,l);this.destroyed&&l(new D("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{c&&c.remove()})});if(this.loadStatus===Dee){this._set("loadStatus",jee);const a=this._loadController=new AbortController;n({signal:a.signal})}return i(),o}})),this.when(()=>{this._set("loadStatus",KA),this._loadController=null},i=>{this._set("loadStatus",zee),this._set("loadError",i),this._loadController=null})}destroy(){this._loadController&&(this._loadController=u0(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===KA}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new D("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return u([d({readOnly:!0})],t.prototype,"loaded",null),u([d({readOnly:!0})],t.prototype,"loadError",void 0),u([d({clonable:!1})],t.prototype,"loadStatus",void 0),u([d({type:[Zn],readOnly:!0})],t.prototype,"loadWarnings",null),t=u([T("esri.core.Loadable")],t),t};let ym=class extends mz(Eb){};ym=u([T("esri.core.Loadable")],ym),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=mz,e.isLoadable=t}(ym||(ym={}));const ka=ym;function uMe(e,t,r){return tO(e.map((i,n)=>t.apply(r,[i,n])))}async function Vee(e,t,r){return(await tO(e.map((i,n)=>t.apply(r,[i,n])))).map(i=>i.value)}function wO(e){return{ok:!0,value:e}}function bO(e){return{ok:!1,error:e}}function Uee(e){return e!=null&&e.ok===!0?e.value:null}function Gee(e){return e!=null&&e.ok===!1?e.error:null}async function Y_(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return wO(await e)}catch(t){return bO(t)}}async function qee(e){try{return wO(await e)}catch(t){return ho(t),bO(t)}}function _O(e,t){return new el(e,t)}let el=class extends we{get value(){return Uee(this._result)}get error(){return Gee(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=u0(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then(n=>{this._result=wO(n),this._cleanup()},n=>{this._result=bO(n),this._cleanup()}),this._abortHandle=Un(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Pt(this._abortHandle),this._abortController=null}};u([d()],el.prototype,"value",null),u([d()],el.prototype,"error",null),u([d()],el.prototype,"finished",null),u([d()],el.prototype,"promise",void 0),u([d()],el.prototype,"_result",void 0),el=u([T("esri.core.asyncUtils.ReactiveTask")],el);async function yz(e,t){return await e.load(),Bee(e,t)}async function Bee(e,t){const r=[],i=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?i(...o):ce.isCollection(o)?o.forEach(a=>i(a)):ka.isLoadable(o)&&r.push(o))};t(i);let n=null;if(await Vee(r,async s=>{const o=await Y_(Hee(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return e}function Hee(e){return"loadAll"in e&&typeof e.loadAll=="function"}function X(e,t,r){let i,n;return t===void 0?(n=e,i=[void 0]):typeof t!="string"?(n=e,i=[void 0],r=t):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const l of i){const c=R8(s,l,n);c.write&&typeof c.write=="object"||(c.write={}),r&&(c.write.target=r),c.write.writer=a[o]}}}let De=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=Wee(t),this.apiValues=YA(this._apiToJSON),this.jsonValues=YA(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,n,s)=>{const o=this.toJSON(i);o!==void 0&&ri(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function Wee(e){const t={};for(const r in e)t[e[r]]=r;return t}function YA(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function si(){return function(e,t){return new De(e,{ignoreUnknown:!0,...t})}}let SO=class{constructor(t,r,i,n){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Vt=new SO(6378137,1/298.257223563,3e5,.006694379990137799),bo=new SO(3396190,1/169.8944472236118,23e4),uu=new SO(1737400,0,0);function Ye(e){if(!He.assetsPath)throw H.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new D("assets:path-not-set","config.assetsPath is not set");return Gh(He.assetsPath,e)}let X2,R=null;function $O(){return!!R}function Zee(){return!!F("esri-wasm")}function gz(){return X2||(X2=ee(()=>import("./pe-wasm-DkHIXav5.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Ye(`esri/geometry/support/${t}`)})).then(e=>{wz(e)}),X2)}var UT,$t,GT;(function(e){function t(s,o,a){R.ensureCache.prepare();const l=Cc(a),c=a===l,h=R.ensureFloat64(l),f=R._pe_geog_to_proj(R.getPointer(s),o,h);return f&&Dl(a,o,h,c),f}function r(s,o,a,l){switch(l){case $t.PE_TRANSFORM_P_TO_G:return i(s,o,a);case $t.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function i(s,o,a){return n(s,o,a,0)}function n(s,o,a,l){R.ensureCache.prepare();const c=Cc(a),h=a===c,f=R.ensureFloat64(c),m=R._pe_proj_to_geog_center(R.getPointer(s),o,f,l);return m&&Dl(a,o,f,h),m}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=n})(UT||(UT={})),function(e){function t(){e.PE_BUFFER_MAX=R.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=R.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=R.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=R.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=R.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=R.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=R.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=R.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=R.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=R.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=R.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=R.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=R.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=R.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=R.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=R.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=R.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=R.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=R.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=R.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=R.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=R.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=R.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=R.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=R.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=R.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=R.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=R.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=R.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=R.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=R.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=R.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}($t||($t={})),function(e){const t={},r={},i=y=>{if(y){const g=y.getType();switch(g){case $t.PE_TYPE_GEOGCS:y=R.castObject(y,R.PeGeogcs);break;case $t.PE_TYPE_PROJCS:y=R.castObject(y,R.PeProjcs);break;case $t.PE_TYPE_GEOGTRAN:y=R.castObject(y,R.PeGeogtran);break;default:g&$t.PE_TYPE_UNIT&&(y=R.castObject(y,R.PeUnit))}}return y};function n(){R.PeFactory.prototype.initialize(null)}function s(y){return o($t.PE_TYPE_COORDSYS,y)}function o(y,g){let v=null,b=t[y];if(b||(b={},t[y]=b),b.hasOwnProperty(String(g)))v=b[g];else{const w=R.PeFactory.prototype.factoryByType(y,g);R.compare(w,R.NULL)||(v=w,b[g]=v)}return v=i(v),v}function a(y,g){let v=null,b=r[y];if(b||(b={},r[y]=b),b.hasOwnProperty(g))v=b[g];else{const w=R.PeFactory.prototype.fromString(y,g);R.compare(w,R.NULL)||(v=w,b[g]=v)}return v=i(v),v}function l(y){return o($t.PE_TYPE_GEOGCS,y)}function c(y){return o($t.PE_TYPE_GEOGTRAN,y)}function h(y){return R.PeFactory.prototype.getCode(y)}function f(y){return o($t.PE_TYPE_PROJCS,y)}function m(y){return o($t.PE_TYPE_UNIT,y)}e.initialize=n,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=c,e.getCode=h,e.projcs=f,e.unit=m}(GT||(GT={}));let vz=null;var Ib,qT,BT,HT,kb,WT,Ob,Pb,ZT;function wz(e){function t(s,o,a){s[o]=a(s[o])}R=e,$t.init(),Ib.init(),kb.init(),Ob.init(),Pb.init(),vz=class extends R.PeGCSExtent{destroy(){R.destroy(this)}};const r=[R.PeDatum,R.PeGeogcs,R.PeGeogtran,R.PeObject,R.PeParameter,R.PePrimem,R.PeProjcs,R.PeSpheroid,R.PeUnit];for(const s of r)t(s.prototype,"getName",o=>function(){return o.call(this,new Array($t.PE_NAME_MAX))});for(const s of[R.PeGeogtran,R.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array($t.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const h=R.getValue(l,"*");a[c]=h?R.wrapPointer(h,R.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(R.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return Dl(a,o,s.call(this)),a}),t(R.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=R._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!R.compare(l,R.NULL)){a=[l];const c=this.getSteps();if(c>1){const h=R.getPointer(l);for(let f=1;f<c;f++)a.push(R.wrapPointer(h+o*f,R.PeGTlistExtendedGTs))}}return a}});const i=R._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!R.compare(l,R.NULL)){a=[l];const c=l.getNump();if(c>1){const h=R.getPointer(l);for(let f=1;f<c;f++)a.push(R.wrapPointer(h+i*f,R.PeHorizon))}}return o.set(s,a),a};t(R.PeProjcs.prototype,"horizonGcsGenerate",n),t(R.PeProjcs.prototype,"horizonPcsGenerate",n),R.PeObject.prototype.toString=function(s=$t.PE_STR_OPTS_NONE){R.ensureCache.prepare();const o=R.getPointer(this),a=R.ensureInt8(new Array($t.PE_BUFFER_MAX));return R.UTF8ToString(R._pe_object_to_string_ext(o,s,a))}}function Ro(e){if(!e)return;const t=R.getClass(e);if(!t)return;const r=R.getCache(t);if(!r)return;const i=R.getPointer(e);i&&delete r[i]}function iv(e,t){const r=[],i=new Array(t);for(let n=0;n<e;n++)r.push(R.ensureInt8(i));return r}function Cc(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(r=>{t.push(r[0],r[1])})):t=e,t}function Dl(e,t,r,i=!1){if(i)for(let n=0;n<2*t;n++)e[n]=R.getValue(r+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let s=0;s<t;s++)n&&(e[s]=new Array(2)),e[s][0]=R.getValue(r,"double"),e[s][1]=R.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=R.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=R._pe_getPeGTlistExtendedEntrySize()}function i(n,s,o,a,l,c){let h=null;const f=new R.PeInteger(c);try{const m=R.PeGTlistExtended.prototype.getGTlist(n,s,o,a,l,f);if((c=f.val)&&(h=[m],c>1)){const y=R.getPointer(m);for(let g=1;g<c;g++)h.push(R.wrapPointer(y+t*g,R.PeGTlistExtendedEntry))}}finally{R.destroy(f)}return h}e.init=r,e.getGTlist=i})(Ib||(Ib={})),function(e){function t(r){if(r!=null&&r.length){for(const i of r)Ro(i),i.getEntries().forEach(n=>{Ro(n);const s=n.getGeogtran();Ro(s),s.getParameters().forEach(Ro),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{Ro(o);const a=o.getDatum();Ro(a),Ro(a.getSpheroid()),Ro(o.getPrimem()),Ro(o.getUnit())})});R.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(qT||(qT={})),function(e){function t(r,i,n,s,o){R.ensureCache.prepare();const a=Cc(n),l=n===a,c=R.ensureFloat64(a);let h=0;s&&(h=R.ensureFloat64(s));const f=R._pe_geog_to_geog(R.getPointer(r),i,c,h,o);return f&&Dl(n,i,c,l),f}e.geogToGeog=t}(BT||(BT={})),function(e){const t=(c,h,f,m,y,g)=>{let v,b;switch(R.ensureCache.prepare(),c){case"dd":v=R._pe_geog_to_dd,b=$t.PE_DD_MAX;break;case"ddm":v=R._pe_geog_to_ddm,b=$t.PE_DDM_MAX;break;case"dms":v=R._pe_geog_to_dms,b=$t.PE_DMS_MAX}let w=0;h&&(w=R.getPointer(h));const _=Cc(m),$=R.ensureFloat64(_),E=iv(f,b),k=v(w,f,$,y,R.ensureInt32(E));if(k)for(let M=0;M<f;M++)g[M]=R.UTF8ToString(E[M]);return k},r=(c,h,f,m,y)=>{let g;switch(R.ensureCache.prepare(),c){case"dd":g=R._pe_dd_to_geog;break;case"ddm":g=R._pe_ddm_to_geog;break;case"dms":g=R._pe_dms_to_geog}let v=0;h&&(v=R.getPointer(h));const b=m.map(E=>R.ensureString(E)),w=R.ensureInt32(b),_=R.ensureFloat64(new Array(2*f)),$=g(v,f,w,_);return $&&Dl(y,f,_),$};function i(c,h,f,m,y){return t("dms",c,h,f,m,y)}function n(c,h,f,m){return r("dms",c,h,f,m)}function s(c,h,f,m,y){return t("ddm",c,h,f,m,y)}function o(c,h,f,m){return r("ddm",c,h,f,m)}function a(c,h,f,m,y){return t("dd",c,h,f,m,y)}function l(c,h,f,m){return r("dd",c,h,f,m)}e.geogToDms=i,e.dmsToGeog=n,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(HT||(HT={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=R.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=R.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=R.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=R.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=R.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(n,s,o,a,l,c,h){R.ensureCache.prepare();let f=0;n&&(f=R.getPointer(n));const m=Cc(o),y=R.ensureFloat64(m),g=iv(s,$t.PE_MGRS_MAX),v=R.ensureInt32(g),b=R._pe_geog_to_mgrs_extended(f,s,y,a,l,c,v);if(b)for(let w=0;w<s;w++)h[w]=R.UTF8ToString(g[w]);return b}function i(n,s,o,a,l){R.ensureCache.prepare();let c=0;n&&(c=R.getPointer(n));const h=o.map(g=>R.ensureString(g)),f=R.ensureInt32(h),m=R.ensureFloat64(new Array(2*s)),y=R._pe_mgrs_to_geog_extended(c,s,f,a,m);return y&&Dl(l,s,m),y}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i}(kb||(kb={})),function(e){function t(i,n,s,o,a,l,c){R.ensureCache.prepare();let h=0;i&&(h=R.getPointer(i));const f=Cc(s),m=R.ensureFloat64(f),y=iv(n,$t.PE_MGRS_MAX),g=R.ensureInt32(y),v=R._pe_geog_to_usng(h,n,m,o,a,l,g);if(v)for(let b=0;b<n;b++)c[b]=R.UTF8ToString(y[b]);return v}function r(i,n,s,o){R.ensureCache.prepare();let a=0;i&&(a=R.getPointer(i));const l=s.map(m=>R.ensureString(m)),c=R.ensureInt32(l),h=R.ensureFloat64(new Array(2*n)),f=R._pe_usng_to_geog(a,n,c,h);return f&&Dl(o,n,h),f}e.geogToUsng=t,e.usngToGeog=r}(WT||(WT={})),function(e){function t(){e.PE_UTM_OPTS_NONE=R.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=R.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=R.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(n,s,o,a,l){R.ensureCache.prepare();let c=0;n&&(c=R.getPointer(n));const h=Cc(o),f=R.ensureFloat64(h),m=iv(s,$t.PE_UTM_MAX),y=R.ensureInt32(m),g=R._pe_geog_to_utm(c,s,f,a,y);if(g)for(let v=0;v<s;v++)l[v]=R.UTF8ToString(m[v]);return g}function i(n,s,o,a,l){R.ensureCache.prepare();let c=0;n&&(c=R.getPointer(n));const h=o.map(g=>R.ensureString(g)),f=R.ensureInt32(h),m=R.ensureFloat64(new Array(2*s)),y=R._pe_utm_to_geog(c,s,f,a,m);return y&&Dl(l,s,m),y}e.init=t,e.geogToUtm=r,e.utmToGeog=i}(Ob||(Ob={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=R.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=R.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=R.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=R.PePCSInfo.prototype.PE_POLE_POINT}function i(n,s=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(n)&&(a=t.get(n),a[s]&&(o=a[s])),o||(o=R.PePCSInfo.prototype.generate(n,s),a||(a=[],t.set(n,a)),a[s]=o),o}e.init=r,e.generate=i}(Pb||(Pb={})),function(e){function t(){return R.PeVersion.prototype.version_string()}e.versionString=t}(ZT||(ZT={}));const Jee=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return UT},get PeDefs(){return $t},get PeFactory(){return GT},get PeGCSExtent(){return vz},get PeGTTransformations(){return BT},get PeGTlistExtended(){return Ib},get PeGTlistExtendedEntry(){return qT},get PeNotationDms(){return HT},get PeNotationMgrs(){return kb},get PeNotationUsng(){return WT},get PeNotationUtm(){return Ob},get PePCSInfo(){return Pb},get PeVersion(){return ZT},_init:wz,get _pe(){return R},isLoaded:$O,isSupported:Zee,load:gz},Symbol.toStringTag,{value:"Module"}));var md;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(md||(md={}));let p;const S={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(p=2e3;p<=2045;p++)S[p]=0;for(p=2056;p<=2065;p++)S[p]=0;for(p=2067;p<=2135;p++)S[p]=0;for(p=2137;p<=2154;p++)S[p]=0;for(p=2161;p<=2170;p++)S[p]=0;for(p=2172;p<=2193;p++)S[p]=0;for(p=2195;p<=2198;p++)S[p]=0;for(p=2200;p<=2203;p++)S[p]=0;for(p=2205;p<=2217;p++)S[p]=0;for(p=2222;p<=2224;p++)S[p]=1;for(p=2225;p<=2250;p++)S[p]=2;for(p=2251;p<=2253;p++)S[p]=1;for(p=2257;p<=2264;p++)S[p]=2;for(p=2274;p<=2279;p++)S[p]=2;for(p=2280;p<=2282;p++)S[p]=1;for(p=2283;p<=2289;p++)S[p]=2;for(p=2290;p<=2292;p++)S[p]=0;for(p=2308;p<=2313;p++)S[p]=0;for(p=2315;p<=2491;p++)S[p]=0;for(p=2494;p<=2866;p++)S[p]=0;for(p=2867;p<=2869;p++)S[p]=1;for(p=2870;p<=2888;p++)S[p]=2;for(p=2891;p<=2895;p++)S[p]=2;for(p=2896;p<=2898;p++)S[p]=1;for(p=2902;p<=2908;p++)S[p]=2;for(p=2915;p<=2920;p++)S[p]=2;for(p=2921;p<=2923;p++)S[p]=1;for(p=2924;p<=2930;p++)S[p]=2;for(p=2931;p<=2962;p++)S[p]=0;for(p=2964;p<=2968;p++)S[p]=2;for(p=2969;p<=2973;p++)S[p]=0;for(p=2975;p<=2991;p++)S[p]=0;for(p=2995;p<=3051;p++)S[p]=0;for(p=3054;p<=3079;p++)S[p]=0;for(p=3081;p<=3088;p++)S[p]=0;for(p=3092;p<=3101;p++)S[p]=0;for(p=3106;p<=3138;p++)S[p]=0;for(p=3146;p<=3151;p++)S[p]=0;for(p=3153;p<=3166;p++)S[p]=0;for(p=3168;p<=3172;p++)S[p]=0;for(p=3174;p<=3203;p++)S[p]=0;for(p=3294;p<=3358;p++)S[p]=0;for(p=3367;p<=3403;p++)S[p]=0;for(p=3408;p<=3416;p++)S[p]=0;for(p=3417;p<=3438;p++)S[p]=2;for(p=3441;p<=3446;p++)S[p]=2;for(p=3447;p<=3450;p++)S[p]=0;for(p=3451;p<=3459;p++)S[p]=2;for(p=3460;p<=3478;p++)S[p]=0;for(p=3554;p<=3559;p++)S[p]=0;for(p=3560;p<=3570;p++)S[p]=2;for(p=3571;p<=3581;p++)S[p]=0;for(p=3594;p<=3597;p++)S[p]=0;for(p=3601;p<=3604;p++)S[p]=0;for(p=3637;p<=3639;p++)S[p]=0;for(p=3665;p<=3667;p++)S[p]=0;for(p=3693;p<=3695;p++)S[p]=0;for(p=3701;p<=3727;p++)S[p]=0;for(p=3728;p<=3739;p++)S[p]=2;for(p=3740;p<=3751;p++)S[p]=0;for(p=3753;p<=3760;p++)S[p]=2;for(p=3761;p<=3773;p++)S[p]=0;for(p=3775;p<=3777;p++)S[p]=0;for(p=3779;p<=3781;p++)S[p]=0;for(p=3783;p<=3785;p++)S[p]=0;for(p=3788;p<=3791;p++)S[p]=0;for(p=3797;p<=3802;p++)S[p]=0;for(p=3814;p<=3816;p++)S[p]=0;for(p=3825;p<=3829;p++)S[p]=0;for(p=3832;p<=3841;p++)S[p]=0;for(p=3844;p<=3852;p++)S[p]=0;for(p=3873;p<=3885;p++)S[p]=0;for(p=3890;p<=3893;p++)S[p]=0;for(p=3907;p<=3912;p++)S[p]=0;for(p=3942;p<=3950;p++)S[p]=0;for(p=3968;p<=3970;p++)S[p]=0;for(p=3973;p<=3976;p++)S[p]=0;for(p=3986;p<=3989;p++)S[p]=0;for(p=3994;p<=3997;p++)S[p]=0;for(p=4048;p<=4051;p++)S[p]=0;for(p=4056;p<=4063;p++)S[p]=0;for(p=4093;p<=4096;p++)S[p]=0;for(p=4390;p<=4398;p++)S[p]=0;for(p=4399;p<=4413;p++)S[p]=2;for(p=4418;p<=4433;p++)S[p]=2;for(p=4455;p<=4457;p++)S[p]=2;for(p=4484;p<=4489;p++)S[p]=0;for(p=4491;p<=4554;p++)S[p]=0;for(p=4568;p<=4589;p++)S[p]=0;for(p=4652;p<=4656;p++)S[p]=0;for(p=4766;p<=4800;p++)S[p]=0;for(p=5014;p<=5016;p++)S[p]=0;for(p=5069;p<=5072;p++)S[p]=0;for(p=5105;p<=5130;p++)S[p]=0;for(p=5167;p<=5188;p++)S[p]=0;for(p=5253;p<=5259;p++)S[p]=0;for(p=5269;p<=5275;p++)S[p]=0;for(p=5292;p<=5311;p++)S[p]=0;for(p=5329;p<=5331;p++)S[p]=0;for(p=5343;p<=5349;p++)S[p]=0;for(p=5355;p<=5357;p++)S[p]=0;for(p=5387;p<=5389;p++)S[p]=0;for(p=5459;p<=5463;p++)S[p]=0;for(p=5479;p<=5482;p++)S[p]=0;for(p=5518;p<=5520;p++)S[p]=0;for(p=5530;p<=5539;p++)S[p]=0;for(p=5550;p<=5552;p++)S[p]=0;for(p=5562;p<=5583;p++)S[p]=0;for(p=5623;p<=5625;p++)S[p]=2;for(p=5631;p<=5639;p++)S[p]=0;for(p=5649;p<=5653;p++)S[p]=0;for(p=5663;p<=5680;p++)S[p]=0;for(p=5682;p<=5685;p++)S[p]=0;for(p=5875;p<=5877;p++)S[p]=0;for(p=5896;p<=5899;p++)S[p]=0;for(p=5921;p<=5940;p++)S[p]=0;for(p=6050;p<=6125;p++)S[p]=0;for(p=6244;p<=6275;p++)S[p]=0;for(p=6328;p<=6348;p++)S[p]=0;for(p=6350;p<=6356;p++)S[p]=0;for(p=6366;p<=6372;p++)S[p]=0;for(p=6381;p<=6387;p++)S[p]=0;for(p=6393;p<=6404;p++)S[p]=0;for(p=6480;p<=6483;p++)S[p]=0;for(p=6511;p<=6514;p++)S[p]=0;for(p=6579;p<=6581;p++)S[p]=0;for(p=6619;p<=6624;p++)S[p]=0;for(p=6625;p<=6627;p++)S[p]=2;for(p=6628;p<=6632;p++)S[p]=0;for(p=6634;p<=6637;p++)S[p]=0;for(p=6669;p<=6692;p++)S[p]=0;for(p=6707;p<=6709;p++)S[p]=0;for(p=6720;p<=6723;p++)S[p]=0;for(p=6732;p<=6738;p++)S[p]=0;for(p=6931;p<=6933;p++)S[p]=0;for(p=6956;p<=6959;p++)S[p]=0;for(p=7005;p<=7007;p++)S[p]=0;for(p=7057;p<=7070;p++)S[p]=2;for(p=7074;p<=7082;p++)S[p]=0;for(p=7109;p<=7118;p++)S[p]=0;for(p=7119;p<=7127;p++)S[p]=1;for(p=7374;p<=7376;p++)S[p]=0;for(p=7528;p<=7586;p++)S[p]=0;for(p=7587;p<=7645;p++)S[p]=2;for(p=7692;p<=7696;p++)S[p]=0;for(p=7755;p<=7787;p++)S[p]=0;for(p=7791;p<=7795;p++)S[p]=0;for(p=7799;p<=7801;p++)S[p]=0;for(p=7803;p<=7805;p++)S[p]=0;for(p=7825;p<=7831;p++)S[p]=0;for(p=7845;p<=7859;p++)S[p]=0;for(p=8013;p<=8032;p++)S[p]=0;for(p=8065;p<=8068;p++)S[p]=1;for(p=8518;p<=8529;p++)S[p]=2;for(p=8533;p<=8536;p++)S[p]=2;for(p=8538;p<=8540;p++)S[p]=2;for(p=8677;p<=8679;p++)S[p]=0;for(p=8836;p<=8840;p++)S[p]=0;for(p=8857;p<=8859;p++)S[p]=0;for(p=8908;p<=8910;p++)S[p]=0;for(p=9154;p<=9159;p++)S[p]=0;for(p=9205;p<=9218;p++)S[p]=0;for(p=9271;p<=9273;p++)S[p]=0;for(p=9295;p<=9297;p++)S[p]=0;for(p=9356;p<=9360;p++)S[p]=0;for(p=9404;p<=9407;p++)S[p]=0;for(p=9476;p<=9482;p++)S[p]=0;for(p=9487;p<=9494;p++)S[p]=0;for(p=9697;p<=9699;p++)S[p]=0;for(p=9821;p<=9865;p++)S[p]=0;for(p=10285;p<=10291;p++)S[p]=0;for(p=10314;p<=10317;p++)S[p]=0;for(p=10448;p<=10465;p++)S[p]=0;for(p=10731;p<=10733;p++)S[p]=0;for(p=11114;p<=11118;p++)S[p]=0;for(p=20004;p<=20032;p++)S[p]=0;for(p=20047;p<=20049;p++)S[p]=0;for(p=20062;p<=20092;p++)S[p]=0;for(p=20135;p<=20138;p++)S[p]=0;for(p=20248;p<=20258;p++)S[p]=0;for(p=20348;p<=20358;p++)S[p]=0;for(p=20436;p<=20440;p++)S[p]=0;for(p=20822;p<=20824;p++)S[p]=0;for(p=20904;p<=20932;p++)S[p]=0;for(p=20934;p<=20936;p++)S[p]=0;for(p=21004;p<=21032;p++)S[p]=0;for(p=21035;p<=21037;p++)S[p]=0;for(p=21095;p<=21097;p++)S[p]=0;for(p=21148;p<=21150;p++)S[p]=0;for(p=21207;p<=21264;p++)S[p]=0;for(p=21307;p<=21364;p++)S[p]=0;for(p=21413;p<=21423;p++)S[p]=0;for(p=21453;p<=21463;p++)S[p]=0;for(p=21473;p<=21483;p++)S[p]=0;for(p=21780;p<=21782;p++)S[p]=0;for(p=21891;p<=21894;p++)S[p]=0;for(p=21896;p<=21899;p++)S[p]=0;for(p=22171;p<=22177;p++)S[p]=0;for(p=22181;p<=22187;p++)S[p]=0;for(p=22191;p<=22197;p++)S[p]=0;for(p=22207;p<=22222;p++)S[p]=0;for(p=22229;p<=22232;p++)S[p]=0;for(p=22234;p<=22236;p++)S[p]=0;for(p=22243;p<=22250;p++)S[p]=0;for(p=22262;p<=22265;p++)S[p]=0;for(p=22307;p<=22322;p++)S[p]=0;for(p=22348;p<=22357;p++)S[p]=0;for(p=22407;p<=22422;p++)S[p]=0;for(p=22462;p<=22465;p++)S[p]=0;for(p=22521;p<=22525;p++)S[p]=0;for(p=22607;p<=22622;p++)S[p]=0;for(p=22641;p<=22646;p++)S[p]=0;for(p=22648;p<=22657;p++)S[p]=0;for(p=22707;p<=22722;p++)S[p]=0;for(p=22762;p<=22765;p++)S[p]=0;for(p=22807;p<=22822;p++)S[p]=0;for(p=22991;p<=22994;p++)S[p]=0;for(p=23028;p<=23038;p++)S[p]=0;for(p=23301;p<=23333;p++)S[p]=2;for(p=23830;p<=23853;p++)S[p]=0;for(p=23866;p<=23872;p++)S[p]=0;for(p=23877;p<=23884;p++)S[p]=0;for(p=23886;p<=23894;p++)S[p]=0;for(p=23946;p<=23948;p++)S[p]=0;for(p=24311;p<=24313;p++)S[p]=0;for(p=24342;p<=24347;p++)S[p]=0;for(p=24370;p<=24374;p++)S[p]=10;for(p=24375;p<=24381;p++)S[p]=0;for(p=24718;p<=24721;p++)S[p]=0;for(p=24817;p<=24821;p++)S[p]=0;for(p=24877;p<=24882;p++)S[p]=0;for(p=24891;p<=24893;p++)S[p]=0;for(p=25391;p<=25395;p++)S[p]=0;for(p=25828;p<=25838;p++)S[p]=0;for(p=26191;p<=26195;p++)S[p]=0;for(p=26391;p<=26393;p++)S[p]=0;for(p=26701;p<=26722;p++)S[p]=0;for(p=26729;p<=26799;p++)S[p]=2;for(p=26801;p<=26803;p++)S[p]=2;for(p=26811;p<=26813;p++)S[p]=2;for(p=26847;p<=26870;p++)S[p]=2;for(p=26891;p<=26899;p++)S[p]=0;for(p=26901;p<=26923;p++)S[p]=0;for(p=26929;p<=26946;p++)S[p]=0;for(p=26948;p<=26998;p++)S[p]=0;for(p=27037;p<=27040;p++)S[p]=0;for(p=27205;p<=27232;p++)S[p]=0;for(p=27258;p<=27260;p++)S[p]=0;for(p=27391;p<=27398;p++)S[p]=0;for(p=27561;p<=27564;p++)S[p]=0;for(p=27571;p<=27574;p++)S[p]=0;for(p=27581;p<=27584;p++)S[p]=0;for(p=27591;p<=27594;p++)S[p]=0;for(p=27700;p<=27707;p++)S[p]=0;for(p=28191;p<=28193;p++)S[p]=0;for(p=28348;p<=28358;p++)S[p]=0;for(p=28402;p<=28432;p++)S[p]=0;for(p=28462;p<=28492;p++)S[p]=0;for(p=29118;p<=29122;p++)S[p]=0;for(p=29168;p<=29172;p++)S[p]=0;for(p=29177;p<=29185;p++)S[p]=0;for(p=29187;p<=29195;p++)S[p]=0;for(p=29900;p<=29903;p++)S[p]=0;for(p=30161;p<=30179;p++)S[p]=0;for(p=30491;p<=30494;p++)S[p]=0;for(p=30729;p<=30732;p++)S[p]=0;for(p=31251;p<=31259;p++)S[p]=0;for(p=31265;p<=31268;p++)S[p]=0;for(p=31275;p<=31279;p++)S[p]=0;for(p=31281;p<=31297;p++)S[p]=0;for(p=31461;p<=31469;p++)S[p]=0;for(p=31491;p<=31495;p++)S[p]=0;for(p=31917;p<=31922;p++)S[p]=0;for(p=31965;p<=32e3;p++)S[p]=0;for(p=32001;p<=32003;p++)S[p]=2;for(p=32005;p<=32031;p++)S[p]=2;for(p=32033;p<=32060;p++)S[p]=2;for(p=32064;p<=32067;p++)S[p]=2;for(p=32074;p<=32077;p++)S[p]=2;for(p=32081;p<=32086;p++)S[p]=0;for(p=32107;p<=32130;p++)S[p]=0;for(p=32133;p<=32159;p++)S[p]=0;for(p=32164;p<=32167;p++)S[p]=2;for(p=32180;p<=32199;p++)S[p]=0;for(p=32201;p<=32260;p++)S[p]=0;for(p=32301;p<=32360;p++)S[p]=0;for(p=32401;p<=32460;p++)S[p]=0;for(p=32501;p<=32560;p++)S[p]=0;for(p=32601;p<=32662;p++)S[p]=0;for(p=32664;p<=32667;p++)S[p]=2;for(p=32701;p<=32761;p++)S[p]=0;for(p=53001;p<=53004;p++)S[p]=0;for(p=53008;p<=53019;p++)S[p]=0;for(p=53021;p<=53032;p++)S[p]=0;for(p=53034;p<=53037;p++)S[p]=0;for(p=53042;p<=53046;p++)S[p]=0;for(p=53074;p<=53080;p++)S[p]=0;for(p=54001;p<=54004;p++)S[p]=0;for(p=54008;p<=54019;p++)S[p]=0;for(p=54021;p<=54032;p++)S[p]=0;for(p=54034;p<=54037;p++)S[p]=0;for(p=54042;p<=54046;p++)S[p]=0;for(p=54048;p<=54053;p++)S[p]=0;for(p=54074;p<=54080;p++)S[p]=0;for(p=54098;p<=54101;p++)S[p]=0;for(p=102001;p<=102040;p++)S[p]=0;for(p=102042;p<=102063;p++)S[p]=0;for(p=102065;p<=102067;p++)S[p]=0;for(p=102070;p<=102117;p++)S[p]=0;for(p=102122;p<=102216;p++)S[p]=0;for(p=102221;p<=102377;p++)S[p]=0;for(p=102382;p<=102388;p++)S[p]=0;for(p=102389;p<=102398;p++)S[p]=2;for(p=102399;p<=102444;p++)S[p]=0;for(p=102445;p<=102447;p++)S[p]=2;for(p=102448;p<=102458;p++)S[p]=0;for(p=102459;p<=102468;p++)S[p]=2;for(p=102469;p<=102499;p++)S[p]=0;for(p=102500;p<=102519;p++)S[p]=1;for(p=102520;p<=102524;p++)S[p]=0;for(p=102525;p<=102529;p++)S[p]=2;for(p=102530;p<=102588;p++)S[p]=0;for(p=102590;p<=102598;p++)S[p]=0;for(p=102601;p<=102603;p++)S[p]=0;for(p=102605;p<=102628;p++)S[p]=0;for(p=102629;p<=102646;p++)S[p]=2;for(p=102648;p<=102700;p++)S[p]=2;for(p=102701;p<=102703;p++)S[p]=0;for(p=102707;p<=102730;p++)S[p]=2;for(p=102733;p<=102758;p++)S[p]=2;for(p=102767;p<=102900;p++)S[p]=0;for(p=102901;p<=102933;p++)S[p]=2;for(p=102934;p<=102950;p++)S[p]=13;for(p=102951;p<=102963;p++)S[p]=0;for(p=102965;p<=102969;p++)S[p]=0;for(p=102971;p<=102973;p++)S[p]=0;for(p=102975;p<=102989;p++)S[p]=0;for(p=102990;p<=102992;p++)S[p]=1;for(p=102997;p<=103002;p++)S[p]=0;for(p=103003;p<=103008;p++)S[p]=2;for(p=103009;p<=103011;p++)S[p]=0;for(p=103012;p<=103014;p++)S[p]=2;for(p=103019;p<=103021;p++)S[p]=0;for(p=103022;p<=103024;p++)S[p]=2;for(p=103029;p<=103031;p++)S[p]=0;for(p=103032;p<=103034;p++)S[p]=2;for(p=103065;p<=103068;p++)S[p]=0;for(p=103074;p<=103076;p++)S[p]=0;for(p=103077;p<=103079;p++)S[p]=1;for(p=103080;p<=103082;p++)S[p]=0;for(p=103083;p<=103085;p++)S[p]=2;for(p=103090;p<=103093;p++)S[p]=0;for(p=103097;p<=103099;p++)S[p]=0;for(p=103100;p<=103102;p++)S[p]=2;for(p=103107;p<=103109;p++)S[p]=0;for(p=103110;p<=103112;p++)S[p]=2;for(p=103113;p<=103116;p++)S[p]=0;for(p=103117;p<=103120;p++)S[p]=2;for(p=103153;p<=103157;p++)S[p]=0;for(p=103158;p<=103162;p++)S[p]=2;for(p=103163;p<=103165;p++)S[p]=0;for(p=103166;p<=103168;p++)S[p]=1;for(p=103169;p<=103171;p++)S[p]=2;for(p=103186;p<=103188;p++)S[p]=0;for(p=103189;p<=103191;p++)S[p]=2;for(p=103192;p<=103195;p++)S[p]=0;for(p=103196;p<=103199;p++)S[p]=2;for(p=103200;p<=103224;p++)S[p]=0;for(p=103225;p<=103227;p++)S[p]=1;for(p=103232;p<=103237;p++)S[p]=0;for(p=103238;p<=103243;p++)S[p]=2;for(p=103244;p<=103246;p++)S[p]=0;for(p=103247;p<=103249;p++)S[p]=2;for(p=103254;p<=103256;p++)S[p]=0;for(p=103257;p<=103259;p++)S[p]=2;for(p=103264;p<=103266;p++)S[p]=0;for(p=103267;p<=103269;p++)S[p]=2;for(p=103300;p<=103375;p++)S[p]=0;for(p=103381;p<=103383;p++)S[p]=0;for(p=103384;p<=103386;p++)S[p]=1;for(p=103387;p<=103389;p++)S[p]=0;for(p=103390;p<=103392;p++)S[p]=2;for(p=103397;p<=103399;p++)S[p]=0;for(p=103400;p<=103471;p++)S[p]=2;for(p=103476;p<=103478;p++)S[p]=0;for(p=103479;p<=103481;p++)S[p]=2;for(p=103486;p<=103488;p++)S[p]=0;for(p=103489;p<=103491;p++)S[p]=2;for(p=103492;p<=103495;p++)S[p]=0;for(p=103496;p<=103499;p++)S[p]=2;for(p=103528;p<=103543;p++)S[p]=0;for(p=103544;p<=103548;p++)S[p]=2;for(p=103549;p<=103551;p++)S[p]=0;for(p=103552;p<=103554;p++)S[p]=1;for(p=103555;p<=103557;p++)S[p]=2;for(p=103558;p<=103560;p++)S[p]=0;for(p=103571;p<=103573;p++)S[p]=0;for(p=103574;p<=103576;p++)S[p]=2;for(p=103577;p<=103580;p++)S[p]=0;for(p=103581;p<=103583;p++)S[p]=2;for(p=103595;p<=103694;p++)S[p]=0;for(p=103696;p<=103699;p++)S[p]=0;for(p=103700;p<=103793;p++)S[p]=2;for(p=103794;p<=103890;p++)S[p]=0;for(p=103891;p<=103896;p++)S[p]=2;for(p=103900;p<=103971;p++)S[p]=2;for(p=103972;p<=103977;p++)S[p]=0;for(p=112e3;p<=112101;p++)S[p]=0;const bz=[102100,102113,3857,3785],Kee=[104905,104971],Yee=[4326,...bz,...Kee],QA='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',nv=[-20037508342788905e-9,20037508342788905e-9],sv=[-20037508342787e-6,20037508342787e-6],_z={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:nv,origin:sv,dx:1e-5},102100:{wkTemplate:QA,valid:nv,origin:sv,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:nv,origin:sv,dx:1e-5},3857:{wkTemplate:QA,valid:nv,origin:sv,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function gr(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||xo(e)&&xo(t))return!0;const o=e.latestWkid;if(o!=null&&i===o)return!0;const a=t.latestWkid;return a!=null&&r===a}let n,s;return e.wkt2&&t.wkt2?(n=e.wkt2,s=t.wkt2):e.wkt&&t.wkt&&(n=e.wkt,s=t.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function ji(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&_z[t]||null}function Sz(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function Q_(e){if(!on(e))return!1;const{wkid:t}=e;if(t)return S[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function Qee(e){return!($z(e)||xz(e))}function yd(e){return(e==null?void 0:e.wkid)===4326}function hMe(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function XA(e){return(e==null?void 0:e.wkid)===md.CGCS2000}function xo(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&bz.includes(t)}function Xee(e){return(e==null?void 0:e.wkid)===32662}function X_(e){return e===md.GCSMARS2000||e===md.GCSMARS2000_SPHERE}function $z(e){return X_(e==null?void 0:e.wkid)}function eS(e){return e===md.GCSMOON2000}function xz(e){return eS(e==null?void 0:e.wkid)}function ete(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&Yee.includes(t)}function on(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const Tz={wkid:4326,wkt:Qk(_z[4326].wkTemplate,{Central_Meridian:"0.0"})},Mz={wkid:102100,latestWkid:3857},tte={wkid:32662};function xO(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const rte=xO(Vt),TO=xO(bo),MO=xO(uu),ite={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Vt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},nte=TO.wkt.toUpperCase(),ste=MO.wkt.toUpperCase();function ote(e){if(e!=null&&on(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(X_(t))return bo;const i=r==null?void 0:r.toUpperCase();if(r&&i===nte)return bo;if(eS(t)||i&&i===ste)return uu}return Vt}function fMe(e){return X_(e)?bo:eS(e)?uu:Vt}function Cb(e){return gr(e,rte)}function cu(e){return Cb(e)||gr(e,TO)||gr(e,MO)}const mMe=39.37,ate=Vt.radius*Math.PI/200,Ez=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Qc=S,Iz=/UNIT\[([^\]]+)]/i,lte=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),ute=si()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Us=e=>e*e,Ba=e=>e*e*e,m0={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Us(.001)},"square-centimeters":{inBaseUnits:Us(.01)},"square-decimeters":{inBaseUnits:Us(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Us(1e3)},"square-inches":{inBaseUnits:Us(.0254)},"square-feet":{inBaseUnits:Us(.3048)},"square-yards":{inBaseUnits:Us(.9144)},"square-miles":{inBaseUnits:Us(1609.344)},"square-us-feet":{inBaseUnits:Us(1200/3937)},acres:{inBaseUnits:.0015625*Us(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Ba(.001)},"cubic-centimeters":{inBaseUnits:1e3*Ba(.01)},"cubic-decimeters":{inBaseUnits:1e3*Ba(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Ba(1e3)},"cubic-inches":{inBaseUnits:1e3*Ba(.0254)},"cubic-feet":{inBaseUnits:1e3*Ba(.3048)},"cubic-yards":{inBaseUnits:1e3*Ba(.9144)},"cubic-miles":{inBaseUnits:1e3*Ba(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},cte=(()=>{const e={};for(const t in m0)for(const r in m0[t].units)e[r]=t;return e})();function dte(e,t,r){return e*m0[r].units[t].inBaseUnits}function pte(e,t,r){return e/m0[r].units[t].inBaseUnits}function JT(e){const t=cte[e];if(!t)throw new Error("unknown type");return t}function eL(e,t=null){return t=t||JT(e),m0[t].baseUnit===e}function _n(e,t,r){if(t===r)return e;const i=JT(t);if(i!==JT(r))throw new Error("incompatible units");const n=eL(t,i)?e:dte(e,t,i);return eL(r,i)?n:pte(n,r,i)}function hte(e,t,r){return _n(e,t,"meters")/(r*Math.PI/180)}function kz(e){return ute.fromJSON(e.toLowerCase())||null}function Rb(e){if(e!=null&&!Qee(e))return 1;const t=Ad(e);return t>1e5?1:t}function fte(e){return Ad(e)>=ote(e).metersPerDegree?"meters":Pz(e)}function Ad(e,t=Vt.metersPerDegree){return mte(e,!0)??t}function mte(e,t=!1){const r=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let n=null;if(r){if(X_(r))return bo.metersPerDegree;if(eS(r))return uu.metersPerDegree;n=Qc.values[Qc[r]],!n&&t&&lte.has(r)&&(n=ate)}else i&&(Rz(i)?n=tL(Ez.exec(i),n):Cz(i)&&(n=tL(Iz.exec(i),n)));return n}function yMe(e){return Q_(e)?1:Ad(e)}function tL(e,t){return e!=null&&e[1]?Oz(e[1]):t}function Oz(e){return parseFloat(e.split(",")[1])}function Pz(e){const t=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(t)i=Qc.units[Qc[t]];else if(r){const n=Rz(r)?Ez:Cz(r)?Iz:null;if(n){const s=n.exec(r);s!=null&&s[1]&&(i=gte(s[1]))}}return i!=null?kz(i):null}function Cz(e){return/^GEOCCS/i.test(e)}function Rz(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const yte=1e-7;function gte(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let r=t==null?void 0:t[1];if(!r||!Qc.units.includes(r)){const i=Oz(e);r=null;const n=Qc.values;for(let s=0;s<n.length;++s)if(Math.abs(i-n[s])<yte){r=Qc.units[s];break}}return r}const vte={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},wte={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},bte={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},_te=si()(vte),Ste=si()(wte),gMe=si()(bte);var Bs;let Be=Bs=class extends q{static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Bs.WebMercator;if(e.wkid===4326)return Bs.WGS84}const t=new Bs;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return yd(this)}get isWebMercator(){return xo(this)}get isGeographic(){return Q_(this)}get isWrappable(){return ete(this)}get metersPerUnit(){return Ad(this)}get unit(){return Pz(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Bs.WGS84)return new Bs(Tz);if(this===Bs.WebMercator)return new Bs(Mz);const e=new Bs;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=C(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||i?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===t&&n.referenceServiceName===r:n.id===t}return gr(this,e)}toJSON(e){return this.write(void 0,e)}};Be.GCS_NAD_1927=null,Be.WGS84=null,Be.WebMercator=null,Be.PlateCarree=null,u([d({readOnly:!0})],Be.prototype,"isWGS84",null),u([d({readOnly:!0})],Be.prototype,"isWebMercator",null),u([d({readOnly:!0})],Be.prototype,"isGeographic",null),u([d({readOnly:!0})],Be.prototype,"isWrappable",null),u([d({type:it,json:{write:!0}})],Be.prototype,"latestWkid",void 0),u([d({readOnly:!0})],Be.prototype,"metersPerUnit",null),u([d({readOnly:!0})],Be.prototype,"unit",null),u([d({type:it,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Be.prototype,"wkid",void 0),u([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Be.prototype,"wkt",void 0),u([X("wkt"),X("web-scene","wkt")],Be.prototype,"writeWkt",null),u([d({type:String,json:{write:!1}})],Be.prototype,"wkt2",void 0),u([d({type:it,json:{write:!0}})],Be.prototype,"vcsWkid",void 0),u([d({type:it,json:{write:!0}})],Be.prototype,"latestVcsWkid",void 0),u([d()],Be.prototype,"imageCoordinateSystem",void 0),Be=Bs=u([T("esri.geometry.SpatialReference")],Be),Be.prototype.toJSON.isDefaultToJSON=!0,Be.GCS_NAD_1927=new Be({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Be.WGS84=new Be(Tz),Be.WebMercator=new Be(Mz),Be.PlateCarree=new Be(tte),Object.freeze&&(Object.freeze(Be.GCS_NAD_1927),Object.freeze(Be.WGS84),Object.freeze(Be.WebMercator),Object.freeze(Be.PlateCarree));const Pe=Be;function J(e,t,r){let i,n;return t===void 0||Array.isArray(t)?(n=e,r=t,i=[void 0]):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;i.forEach(l=>{const c=R8(s,l,n);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],r&&(c.read.source=(c.read.source||[]).concat(r))})}}let Hs=class extends q{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Pe.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof Pe)return t;if(t!=null){const i=new Pe;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};u([d()],Hs.prototype,"type",void 0),u([d({readOnly:!0})],Hs.prototype,"cache",null),u([d({readOnly:!0})],Hs.prototype,"extent",null),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Hs.prototype,"hasM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Hs.prototype,"hasZ",void 0),u([d({type:Pe,json:{write:!0},value:Pe.WGS84})],Hs.prototype,"spatialReference",void 0),u([J("spatialReference")],Hs.prototype,"readSpatialReference",null),Hs=u([T("esri.geometry.Geometry")],Hs);const La=Hs,$te=Object.prototype.toString;function xte(e){const t="__accessorMetadata__"in e?Qt(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Tte.apply(this,r)}}function Tte(e,t,r,i){z_(e,t).cast=i}function Mte(e){return(t,r)=>{z_(t,e).cast=t[r]}}function et(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&$te.call(e[0])==="[object Function]"?xte(e[0]):e.length===1&&typeof e[0]=="string"?Mte(e[0]):void 0}const Ete=57.29577951308232,Ite=.017453292519943;function rL(e){return e*Ete}function iL(e){return e*Ite}function wMe(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Vt.radius))}function KT(e){return e.wkid!=null||e.wkt!=null}const e$=[0,0];function Ab(e,t,r,i,n){const s=e,o=n;if(o.spatialReference=r,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,e$,i);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,e$,i),[o.xmax,o.ymax]=t(s.xmax,s.ymax,e$,i);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let h=0;h<a.length;h++){const f=a[h];c=[],l.push(c);for(let m=0;m<f.length;m++)c.push(t(f[m][0],f[m][1],[0,0],i)),f[m].length>2&&c[m].push(f[m][2]),f[m].length>3&&c[m].push(f[m][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=t(a[c][0],a[c][1],[0,0],i),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return n}function w1(e,t){const r=e&&(KT(e)?e:e.spatialReference),i=t&&(KT(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!gr(i,r)||xo(i)&&yd(r)||xo(r)&&yd(i))}function tS(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(KT(t)?t:t.spatialReference);return w1(r,i)?gr(r,i)?C(e):xo(i)?Ab(e,eh,Pe.WebMercator,!1,C(e)):yd(i)?Ab(e,rS,Pe.WGS84,!1,C(e)):null:null}function eh(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=iL(t);return r[0]=iL(e)*Vt.radius,r[1]=Vt.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function rS(e,t,r=[0,0],i=!1){const n=rL(e/Vt.radius);return r[0]=i?n:n-360*Math.floor((n+180)/360),r[1]=rL(Math.PI/2-2*Math.atan(Math.exp(-t/Vt.radius))),r}function Xc(e,t=!1,r=C(e)){return Ab(e,eh,Pe.WebMercator,t,r)}function th(e,t=!1,r=C(e)){return Ab(e,rS,Pe.WGS84,t,r)}function Az(e,t){const r=e.x-t.x,i=e.y-t.y,n=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+n*n)}function kte(e){var t;return((t=Lz(e,Nz))==null?void 0:t[0])??null}function Ote(e){var t;return((t=Lz(e,Nz))==null?void 0:t[1])??null}function Lz({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(xo(r))return rS(e,t,i);if(Q_(r))return i[0]=e,i[1]=t,i}return null}const Nz=[0,0];var b1;const t$=[0,0];function nL(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let li=b1=class extends La{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,n){let s;if(Array.isArray(e))s=e,n=t,e=s[0],t=s[1],r=s[2],i=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,r=s.z,i=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new Pe(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)H.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)H.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&(n!=null&&n.isWebMercator)){const a=eh(s.longitude,s.latitude,t$);e=a[0],t=a[1]}}}else nL(r)?(n=r,r=null):nL(i)&&(n=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?H.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&H.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return Ote(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",eh(r,e,t$)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return kte(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",eh(e,t,t$)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new b1;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return b1.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:n,spatialReference:s}=this,{z:o,m:a}=e;let{x:l,y:c,spatialReference:h}=e;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[l,c]=eh(l,c),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[l,c]=rS(l,c),h=s}return t===l&&r===c&&i===o&&n===a&&s.wkid===h.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=ji(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,n=2*i;let s;return t>i?(s=Math.ceil(Math.abs(t-i)/n),t-=s*n):t<r&&(s=Math.ceil(Math.abs(t-r)/n),t+=s*n),this._set("x",t),this}distance(e){return Az(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],li.prototype,"cache",null),u([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],li.prototype,"hasM",null),u([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],li.prototype,"hasZ",null),u([d({type:Number})],li.prototype,"latitude",null),u([d({type:Number})],li.prototype,"longitude",null),u([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),et(e=>isNaN(e)?e:An(e))],li.prototype,"x",void 0),u([X("x")],li.prototype,"writeX",null),u([J("x")],li.prototype,"readX",null),u([d({type:Number,json:{write:!0}})],li.prototype,"y",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],li.prototype,"z",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],li.prototype,"m",void 0),li=b1=u([T("esri.geometry.Point")],li),li.prototype.toJSON.isDefaultToJSON=!0;const Oe=li,r$=[0,0];function eg(e,t){return t!=null&&hi(e,t.x,t.y,t.z)}function bMe(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!Bh(e,r))return!1;return!0}function Pte(e,t){const{xmin:r,ymin:i,zmin:n,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?hi(e,r,i,n)&&hi(e,r,o,n)&&hi(e,s,o,n)&&hi(e,s,i,n)&&hi(e,r,i,a)&&hi(e,r,o,a)&&hi(e,s,o,a)&&hi(e,s,i,a):hi(e,r,i)&&hi(e,r,o)&&hi(e,s,o)&&hi(e,s,i)}function Bh(e,t){return hi(e,t[0],t[1])}function Cte(e,t){return hi(e,t[0],t[1],t[2])}function hi(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function EO(e,t){return r$[1]=t.y,r$[0]=t.x,Rte(e,r$)}function Rte(e,t){return IO(e.rings,t)}function IO(e,t){if(!e)return!1;if(Ate(e))return sL(!1,e,t);let r=!1;for(let i=0,n=e.length;i<n;i++)r=sL(r,e[i],t);return r}function Ate(e){return!Array.isArray(e[0][0])}function sL(e,t,r){const[i,n]=r;let s=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[c,h]=t[a],[f,m]=t[o];(h<n&&m>=n||m<n&&h>=n)&&c+(n-h)/(m-h)*(f-c)<i&&(s=!s)}return s}function Lte(e,t){return eg(e,t)}function Nte(e,t){const r=e.hasZ&&t.hasZ;let i,n,s;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function Fte(e,t){const{points:r,hasZ:i}=t,n=i?Cte:Bh;for(const s of r)if(n(e,s))return!0;return!1}const gd=[0,0],vd=[0,0],wd=[0,0],bd=[0,0],Dte=[gd,vd,wd,bd],Fz=[[wd,gd],[gd,vd],[vd,bd],[bd,wd]];function jte(e,t){return zte(e,t.rings)}function zte(e,t){gd[0]=e.xmin,gd[1]=e.ymax,vd[0]=e.xmax,vd[1]=e.ymax,wd[0]=e.xmin,wd[1]=e.ymin,bd[0]=e.xmax,bd[1]=e.ymin;for(const r of Dte)if(IO(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(Bh(e,i))return!0;for(let n=1;n<r.length;n++){const s=r[n];if(Bh(e,s)||Dz(i,s,Fz))return!0;i=s}}return!1}function Vte(e,t){gd[0]=e.xmin,gd[1]=e.ymax,vd[0]=e.xmax,vd[1]=e.ymax,wd[0]=e.xmin,wd[1]=e.ymin,bd[0]=e.xmax,bd[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let n=i[0];if(Bh(e,n))return!0;for(let s=1;s<i.length;s++){const o=i[s];if(Bh(e,o)||Dz(n,o,Fz))return!0;n=o}}return!1}const wr=[0,0];function Ute(e){for(let t=0;t<e.length;t++){const r=e[t];for(let n=0;n<r.length-1;n++){const s=r[n],o=r[n+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const c=e[a][l],h=e[a][l+1];if(YT(s,o,c,h,wr)&&!(wr[0]===s[0]&&wr[1]===s[1]||wr[0]===c[0]&&wr[1]===c[1]||wr[0]===o[0]&&wr[1]===o[1]||wr[0]===h[0]&&wr[1]===h[1]))return!0}}const i=r.length;if(!(i<=4))for(let n=0;n<i-3;n++){let s=i-1;n===0&&(s=i-2);const o=r[n],a=r[n+1];for(let l=n+2;l<s;l++){const c=r[l],h=r[l+1];if(YT(o,a,c,h,wr)&&!(wr[0]===o[0]&&wr[1]===o[1]||wr[0]===c[0]&&wr[1]===c[1]||wr[0]===a[0]&&wr[1]===a[1]||wr[0]===h[0]&&wr[1]===h[1]))return!0}}}return!1}function Dz(e,t,r){for(let i=0;i<r.length;i++)if(YT(e,t,r[i][0],r[i][1]))return!0;return!1}function YT(e,t,r,i,n){const[s,o]=e,[a,l]=t,[c,h]=r,[f,m]=i,y=f-c,g=s-c,v=a-s,b=m-h,w=o-h,_=l-o,$=b*v-y*_;if($===0)return!1;const E=(y*w-b*g)/$,k=(v*w-_*g)/$;return E>=0&&E<=1&&k>=0&&k<=1&&(n&&(n[0]=s+E*(a-s),n[1]=o+E*(l-o)),!0)}function Gte(e){switch(e){case"esriGeometryEnvelope":case"extent":return Nte;case"esriGeometryMultipoint":case"multipoint":return Fte;case"esriGeometryPoint":case"point":return Lte;case"esriGeometryPolygon":case"polygon":return jte;case"esriGeometryPolyline":case"polyline":return Vte}}var Sn;function qte(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Ha(e,t,r){return t==null?r:r==null?t:e(t,r)}let cr=Sn=class extends La{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,n){return qte(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Pe.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:n??Pe.WGS84}}static fromBounds(e,t){return new Sn({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Sn({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Oe({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Sn;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&w1(t,r)&&(e=t.isWebMercator?Xc(e):th(e,!0)),e.type==="point"?eg(this,e):e.type==="extent"&&Pte(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&w1(t,r)&&(e=t.isWebMercator?Xc(e):th(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!gr(t,r)&&w1(t,r)&&(e=t.isWebMercator?Xc(e):th(e,!0)),Gte(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ha(Math.min,this.zmin,e.zmin),this.zmax=Ha(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ha(Math.min,this.mmin,e.mmin),this.mmax=Ha(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ha(Math.max,this.zmin,e.zmin),this.zmax=Ha(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ha(Math.max,this.mmin,e.mmin),this.mmax=Ha(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=ji(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?th(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=i$(i.x,e).x),this.spatialReference=new Pe(Qk((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,n=this.xmin,s=this.xmax;return n>=r&&n<=i&&s>=r&&s<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const n=r??ji(i);if(n==null)return this;const s=this._getParts(n).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const h=(l.zmax-l.zmin)/2;for(let f=0;f<c.length;f++)c[f].push(h)}if(a){const h=(l.mmax-l.mmin)/2;for(let f=0;f<c.length;f++)c[f].push(h)}return c}),hasZ:o,hasM:a,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let h;e=e||ji(o);const[f,m]=e.valid;h=i$(this.xmin,e);const y=h.x,g=h.frameId;h=i$(this.xmax,e);const v=h.x,b=h.frameId,w=y===v&&a>0;if(a>2*m){const _=new Sn(l<c?y:v,n,m,s,o),$=new Sn(f,n,l<c?v:y,s,o),E=new Sn(0,n,m,s,o),k=new Sn(f,n,0,s,o),M=[],P=[];_.contains(E)&&M.push(g),_.contains(k)&&P.push(g),$.contains(E)&&M.push(b),$.contains(k)&&P.push(b);for(let N=g+1;N<b;N++)M.push(N),P.push(N);t.push({extent:_,frameIds:[g]},{extent:$,frameIds:[b]},{extent:E,frameIds:M},{extent:k,frameIds:P})}else y>v||w?t.push({extent:new Sn(y,n,m,s,o),frameIds:[g]},{extent:new Sn(f,n,v,s,o),frameIds:[b]}):t.push({extent:new Sn(y,n,v,s,o),frameIds:[g]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const n={};r&&(n.zmin=this.zmin,n.zmax=this.zmax),i&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(n)}return t}};function i$(e,t){const[r,i]=t.valid,n=2*i;let s,o=0;return e>i?(s=Math.ceil(Math.abs(e-i)/n),e-=s*n,o=s):e<r&&(s=Math.ceil(Math.abs(e-r)/n),e+=s*n,o=-s),{x:e,frameId:o}}u([d({readOnly:!0})],cr.prototype,"cache",null),u([d({readOnly:!0})],cr.prototype,"center",null),u([d({readOnly:!0})],cr.prototype,"extent",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],cr.prototype,"hasM",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],cr.prototype,"hasZ",null),u([d({readOnly:!0})],cr.prototype,"height",null),u([d({readOnly:!0})],cr.prototype,"width",null),u([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],cr.prototype,"xmin",void 0),u([d({type:Number,json:{write:!0}})],cr.prototype,"ymin",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],cr.prototype,"mmin",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],cr.prototype,"zmin",void 0),u([d({type:Number,json:{write:!0}})],cr.prototype,"xmax",void 0),u([d({type:Number,json:{write:!0}})],cr.prototype,"ymax",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],cr.prototype,"mmax",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],cr.prototype,"zmax",void 0),cr=Sn=u([T("esri.geometry.Extent")],cr),cr.prototype.toJSON.isDefaultToJSON=!0;const ct=cr;let xy;var nD,sD;const Bte=((nD=globalThis.esriConfig)==null?void 0:nD.locale)??((sD=globalThis.dojoConfig)==null?void 0:sD.locale);function jz(){var e;return Bte??((e=globalThis.navigator)==null?void 0:e.language)??"en"}function un(){return xy===void 0&&(xy=jz()),xy}function Hte(e=un()){const t=/^([a-zA-Z]{2,3})(?:[_-]\w+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const _1=[];function zz(e){return _1.push(e),Xe(()=>_1.splice(_1.indexOf(e),1))}const S1=[];function kO(e){return S1.push(e),Xe(()=>S1.splice(S1.indexOf(e),1))}function Wte(){const e=jz();xy!==e&&([...S1].forEach(t=>t(e)),xy=e,[..._1].forEach(t=>t(e)))}var oD;(oD=globalThis.addEventListener)==null||oD.call(globalThis,"languagechange",Wte);let ov;function Zte(e){return ov&&!ov.destroyed||(ov=e()),ov}var QT;const Jte=new De({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let $n=QT=class extends we{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new QT({categories:this.categories?C(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let i="";if(this.extent){const o=tS(this.extent,Pe.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const s={categories:r,bbox:i,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>Jte.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};u([d()],$n.prototype,"categories",void 0),u([d()],$n.prototype,"disableExtraQuery",void 0),u([d({type:ct})],$n.prototype,"extent",void 0),u([d()],$n.prototype,"filter",void 0),u([d()],$n.prototype,"num",void 0),u([d()],$n.prototype,"query",void 0),u([d()],$n.prototype,"sortField",void 0),u([d()],$n.prototype,"sortOrder",null),u([d()],$n.prototype,"start",void 0),$n=QT=u([T("esri.portal.PortalQueryParams")],$n);const yo=$n;var XT;let tr=XT=class extends q{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new D("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new XT({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=Qt(yo,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new yo,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new yo,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then(i=>{const n=i.contentCategorySetsGroupQuery;if(n){const s=new yo({disableExtraQuery:!0,num:1,query:n});return r.queryGroups(s,t)}throw new D("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const n=i.results[0],s=new yo({num:1,query:`typekeywords:"${e}"`});return n.queryItems(s,t)}throw new D("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(n=>{const s=n==null?void 0:n.categorySchema;return s!=null&&s.length?s:[]}):[])}};u([d()],tr.prototype,"access",void 0),u([d({type:Date})],tr.prototype,"created",void 0),u([d()],tr.prototype,"description",void 0),u([d()],tr.prototype,"id",void 0),u([d()],tr.prototype,"isInvitationOnly",void 0),u([d({type:Date})],tr.prototype,"modified",void 0),u([d()],tr.prototype,"owner",void 0),u([d()],tr.prototype,"portal",void 0),u([d()],tr.prototype,"snippet",void 0),u([d()],tr.prototype,"sortField",void 0),u([d()],tr.prototype,"sortOrder",void 0),u([d()],tr.prototype,"sourceJSON",void 0),u([d()],tr.prototype,"tags",void 0),u([d()],tr.prototype,"thumbnail",void 0),u([d({readOnly:!0})],tr.prototype,"thumbnailUrl",null),u([d()],tr.prototype,"title",void 0),u([d({readOnly:!0})],tr.prototype,"url",null),tr=XT=u([T("esri.portal.PortalGroup")],tr);const eM=tr;let Zu=class extends we{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([d()],Zu.prototype,"nextQueryParams",void 0),u([d()],Zu.prototype,"queryParams",void 0),u([d()],Zu.prototype,"results",void 0),u([d()],Zu.prototype,"total",void 0),Zu=u([T("esri.portal.PortalQueryResult")],Zu);const Kte=Zu;let zo=class extends q{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var r;const t=(r=this.portal)==null?void 0:r.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new D("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([d({type:Date})],zo.prototype,"created",void 0),u([d()],zo.prototype,"id",void 0),u([d()],zo.prototype,"portal",void 0),u([d()],zo.prototype,"title",void 0),u([d({readOnly:!0})],zo.prototype,"url",null),u([d()],zo.prototype,"username",void 0),zo=u([T("esri.portal.PortalFolder")],zo);const Yte=zo;var tM;let ht=tM=class extends q{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e==null?void 0:e.data,i=e==null?void 0:e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),r!=null&&(typeof r=="string"?n.query.text=r:typeof r=="object"&&(n.query.text=JSON.stringify(r))));let s=this.userContentUrl;return i&&(s+="/"+(typeof i=="string"?i:i.id)),this.portal.request(s+"/addItem",n).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.concat();const r=this.userContentUrl+"/deleteItems",i=[],n=e.map(s=>s.id);if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:t}},o=await this.portal.request(r,s);for(const a of o.results){const l=e.find(f=>a.itemId===f.id),c=a.success;let h=null;c?(l.id=null,l.portal=null):a.error&&(h=new D("portal:delete-item-failed",a.error.message,a.error)),i.push({item:l,success:c,error:h})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const n=Yte.fromJSON(i);return n.portal=this.portal,n}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=eM.fromJSON(r);return i.portal=this.portal,i}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await ee(()=>Promise.resolve().then(()=>Gz),void 0),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},n=await this.portal.request(t,{query:i});let s;return n!=null&&n.items?(s=n.items.map(o=>{const a=r.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new eM({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new D("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new D("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new tM({sourceJSON:e});return t.read(e),t}};u([d()],ht.prototype,"access",void 0),u([d({type:Date})],ht.prototype,"created",void 0),u([d()],ht.prototype,"culture",void 0),u([d()],ht.prototype,"description",void 0),u([d()],ht.prototype,"email",void 0),u([d()],ht.prototype,"favGroupId",void 0),u([d()],ht.prototype,"fullName",void 0),u([d({type:Date})],ht.prototype,"modified",void 0),u([d()],ht.prototype,"orgId",void 0),u([d()],ht.prototype,"portal",void 0),u([d()],ht.prototype,"preferredView",void 0),u([d()],ht.prototype,"privileges",void 0),u([d()],ht.prototype,"region",void 0),u([d()],ht.prototype,"role",void 0),u([d()],ht.prototype,"roleId",void 0),u([d()],ht.prototype,"sourceJSON",void 0),u([d()],ht.prototype,"thumbnail",void 0),u([d({readOnly:!0})],ht.prototype,"thumbnailUrl",null),u([d()],ht.prototype,"units",void 0),u([d({readOnly:!0})],ht.prototype,"userContentUrl",null),u([d({readOnly:!0})],ht.prototype,"url",null),u([d()],ht.prototype,"username",void 0),u([d()],ht.prototype,"userLicenseTypeId",void 0),u([d()],ht.prototype,"userType",void 0),ht=tM=u([T("esri.portal.PortalUser")],ht);const OO=ht;var Zi;let av;const oL={PortalGroup:()=>Promise.resolve({default:eM}),PortalItem:()=>ee(()=>Promise.resolve().then(()=>Gz),void 0),PortalUser:()=>Promise.resolve({default:OO})};let Q=Zi=class extends Q0(ka){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=He.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){aL.unregister(this),this.defaultBasemap=xt(this.defaultBasemap),this.defaultDevBasemap=xt(this.defaultDevBasemap),this.defaultVectorBasemap=xt(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Pt(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)He.request.trustedServers.includes(t)||He.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=OO.fromJSON(e),t.portal=this),t}load(e){const t=ee(()=>Promise.resolve().then(()=>Ere),void 0).then(({default:r})=>{Ct(e),av=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var i;if(Re){const n=Re;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Zi.AUTH_MODE_AUTO&&this.authMode!==Zi.AUTH_MODE_NO_PROMPT||((i=this._esriIdCredentialCreateHandle)==null||i.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",Qte(new WeakRef(this))),aL.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await ee(async()=>{const{default:r}=await import("./ElevationLayer-BK1IM7Ys.js");return{default:r}},__vite__mapDeps([2,3,4,5,6]))).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,t);r.unshift(...i)}return r}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Ia(e)?Promise.reject(Yt()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new yo({num:100,sortField:"title"});if(t!=null&&t.length){const i=[];for(const n of t)i.push(`(title:"${n.title}" AND owner:${n.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(n=>n.results)}return Ia(e)?Promise.reject(Yt()):Promise.resolve([])}fetchRegions(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||un();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||un();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return Zte(()=>new Zi)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",n={authMode:e,query:{culture:un().toLowerCase()},withCredentials:!0,...r};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this.request(i,n)}queryPortal(e,t,r,i){const n=Qt(yo,t),s=o=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...i}).then(a=>{const l=n.clone();return l.start=a.nextStart,new Kte({nextQueryParams:l,queryParams:n,total:a.total,results:Zi._resultsToTypedArray(o,{portal:this},a,i)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(ho(l),a)));return r&&oL[r]?oL[r]().then(({default:o})=>(Ct(i),s(o))):s()}signIn(){if(this.authMode===Zi.AUTH_MODE_ANONYMOUS||this.authMode===Zi.AUTH_MODE_NO_PROMPT&&!Re)return Promise.reject(new D("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return Re?Re.getCredential(this.restUrl,{prompt:this.authMode!==Zi.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var r;const t=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(i=>{const n=Zi._resultsToTypedArray(r,{portal:this},i);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():i)).then(()=>n,()=>n)})}request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===Zi.AUTH_MODE_ANONYMOUS||this.authMode===Zi.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=t,c={authMode:i,body:n,cacheBust:s,method:o,query:r,responseType:a,timeout:0,signal:l};return t.withCredentials&&(c.withCredentials=!0),Ot(this._normalizeSSL(e),c).then(h=>h.data)}toJSON(){throw new D("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Zi({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new D("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new yo;r.query=e||(He.apiKey&&lz(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,t);if(!i.total)return[];const n=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc";const s=await n.queryItems(r,t);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new av({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];const i=new yo({query:r,disableExtraQuery:!0}),n=await this.queryGroups(i,t);if(!n.total)return[];const s=n.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(i,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new av({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=av.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,i){let n;if(r){const s=i!=null?i.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(n=n.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else n=[];return n}};Q.AUTH_MODE_ANONYMOUS="anonymous",Q.AUTH_MODE_AUTO="auto",Q.AUTH_MODE_IMMEDIATE="immediate",Q.AUTH_MODE_NO_PROMPT="no-prompt",u([d()],Q.prototype,"access",void 0),u([d()],Q.prototype,"allSSL",void 0),u([d()],Q.prototype,"authMode",void 0),u([d()],Q.prototype,"authorizedCrossOriginDomains",void 0),u([J("authorizedCrossOriginDomains")],Q.prototype,"readAuthorizedCrossOriginDomains",null),u([d()],Q.prototype,"basemapGalleryGroupQuery",void 0),u([d({json:{name:"3DBasemapGalleryGroupQuery"}})],Q.prototype,"basemapGalleryGroupQuery3D",void 0),u([d()],Q.prototype,"bingKey",void 0),u([d()],Q.prototype,"canListApps",void 0),u([d()],Q.prototype,"canListData",void 0),u([d()],Q.prototype,"canListPreProvisionedItems",void 0),u([d()],Q.prototype,"canProvisionDirectPurchase",void 0),u([d()],Q.prototype,"canSearchPublic",void 0),u([d()],Q.prototype,"canShareBingPublic",void 0),u([d()],Q.prototype,"canSharePublic",void 0),u([d()],Q.prototype,"canSignInArcGIS",void 0),u([d()],Q.prototype,"canSignInIDP",void 0),u([d()],Q.prototype,"colorSetsGroupQuery",void 0),u([d()],Q.prototype,"commentsEnabled",void 0),u([d({type:Date})],Q.prototype,"created",void 0),u([d()],Q.prototype,"credential",void 0),u([d()],Q.prototype,"culture",void 0),u([d()],Q.prototype,"currentVersion",void 0),u([d()],Q.prototype,"customBaseUrl",void 0),u([d()],Q.prototype,"defaultBasemap",void 0),u([J("defaultBasemap")],Q.prototype,"readDefaultBasemap",null),u([d()],Q.prototype,"defaultDevBasemap",void 0),u([J("defaultDevBasemap")],Q.prototype,"readDefaultDevBasemap",null),u([d({type:ct})],Q.prototype,"defaultExtent",void 0),u([d()],Q.prototype,"defaultVectorBasemap",void 0),u([J("defaultVectorBasemap")],Q.prototype,"readDefaultVectorBasemap",null),u([d()],Q.prototype,"description",void 0),u([d()],Q.prototype,"devBasemapGalleryGroupQuery",void 0),u([d()],Q.prototype,"eueiEnabled",void 0),u([d({readOnly:!0})],Q.prototype,"extraQuery",null),u([d()],Q.prototype,"featuredGroups",void 0),u([d()],Q.prototype,"featuredItemsGroupQuery",void 0),u([d()],Q.prototype,"galleryTemplatesGroupQuery",void 0),u([d()],Q.prototype,"layoutGroupQuery",void 0),u([d()],Q.prototype,"livingAtlasGroupQuery",void 0),u([d()],Q.prototype,"hasCategorySchema",void 0),u([d()],Q.prototype,"helpBase",void 0),u([d()],Q.prototype,"helperServices",void 0),u([d()],Q.prototype,"helpMap",void 0),u([d()],Q.prototype,"homePageFeaturedContent",void 0),u([d()],Q.prototype,"homePageFeaturedContentCount",void 0),u([d()],Q.prototype,"httpPort",void 0),u([d()],Q.prototype,"httpsPort",void 0),u([d()],Q.prototype,"id",void 0),u([d()],Q.prototype,"ipCntryCode",void 0),u([d({readOnly:!0})],Q.prototype,"isOrganization",null),u([d()],Q.prototype,"isPortal",void 0),u([d()],Q.prototype,"isReadOnly",void 0),u([d({readOnly:!0})],Q.prototype,"itemPageUrl",null),u([d()],Q.prototype,"layerTemplatesGroupQuery",void 0),u([d()],Q.prototype,"maxTokenExpirationMinutes",void 0),u([d({type:Date})],Q.prototype,"modified",void 0),u([d()],Q.prototype,"name",void 0),u([d()],Q.prototype,"portalHostname",void 0),u([d()],Q.prototype,"portalMode",void 0),u([d()],Q.prototype,"portalProperties",void 0),u([d()],Q.prototype,"region",void 0),u([d()],Q.prototype,"recycleBinEnabled",void 0),u([d({readOnly:!0})],Q.prototype,"restUrl",null),u([d()],Q.prototype,"rotatorPanels",void 0),u([d()],Q.prototype,"showHomePageDescription",void 0),u([d()],Q.prototype,"sourceJSON",void 0),u([d()],Q.prototype,"staticImagesUrl",void 0),u([d({json:{name:"2DStylesGroupQuery"}})],Q.prototype,"stylesGroupQuery2d",void 0),u([d({json:{name:"stylesGroupQuery"}})],Q.prototype,"stylesGroupQuery3d",void 0),u([d()],Q.prototype,"supportsHostedServices",void 0),u([d()],Q.prototype,"symbolSetsGroupQuery",void 0),u([d()],Q.prototype,"templatesGroupQuery",void 0),u([d()],Q.prototype,"thumbnail",void 0),u([d({readOnly:!0})],Q.prototype,"thumbnailUrl",null),u([d()],Q.prototype,"units",void 0),u([d()],Q.prototype,"url",void 0),u([d()],Q.prototype,"urlKey",void 0),u([J("urlKey")],Q.prototype,"readUrlKey",null),u([d()],Q.prototype,"user",void 0),u([J("user")],Q.prototype,"readUser",null),u([d()],Q.prototype,"use3dBasemaps",void 0),u([d()],Q.prototype,"useStandardizedQuery",void 0),u([d()],Q.prototype,"useVectorBasemaps",void 0),u([d()],Q.prototype,"vectorBasemapGalleryGroupQuery",void 0),Q=Zi=u([T("esri.portal.Portal")],Q);const Ui=Q,aL=new FinalizationRegistry(e=>{e.remove()});function Qte(e){const t=Re;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let Vo=class extends we{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:lL(t.path,t.portalItem)}:t}set path(t){t!=null&&ln(t)?H.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return lL(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new D("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey},signal:r==null?void 0:r.signal})}async update(t,r){const{addOrUpdateResources:i}=await ee(()=>import("./resourceUtils-C5HctHL9.js"),[]);return await i(this.portalItem,[{resource:this,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"update",r),this}hasPath(){return this.path!=null}};function lL(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&ln(e)&&(e=fO(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}u([d()],Vo.prototype,"portalItem",void 0),u([d({type:String,value:null})],Vo.prototype,"path",null),u([et("path")],Vo.prototype,"_castPath",null),u([d({type:String,readOnly:!0})],Vo.prototype,"url",null),u([d({type:String,readOnly:!0})],Vo.prototype,"cdnUrl",null),u([d({type:String,readOnly:!0})],Vo.prototype,"itemRelativeUrl",null),Vo=u([T("esri.portal.PortalItemResource")],Vo);const Xte=Vo;let gm=class extends we{constructor(t){super(t),this.created=null,this.rating=null}};u([d()],gm.prototype,"created",void 0),u([d()],gm.prototype,"rating",void 0),gm=u([T("esri.portal.PortalRating")],gm);const n$=gm;function lf(e,t){var i;const r=(i=t==null?void 0:t.url)==null?void 0:i.path;if(e&&r&&(e=Nn(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const n=fO(e,t.portalItem.itemUrl);n!=null&&ere.test(n)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(n).path)}return(e=rM(e,t==null?void 0:t.portal))&&iS.test(e)?CO(e):e}function tg(e,t,r=y0.YES){var n,s;if((e=e&&iS.test(e)?Uz(e):e)==null)return e;!ln(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let i=Nn(e);if(t){const o=((n=t.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=t.url)==null?void 0:s.path);if(o){const a=rM(o,t.portal),l=rM(i,t.portal);i=fO(l,a,a),i!=null&&i!==l&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=Vz(i,t==null?void 0:t.portal),ln(i)&&(i=Ms(i)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!ln(i)&&!Rd(i)&&r===y0.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function PO(e,t,r){return lf(e,r)}function _d(e,t,r,i){const n=tg(e,i);n!==void 0&&(t[r]=n)}const iS=/\/items\/([^/]+)\/resources\/(.*)/,ere=/^\.\/resources\//;function tre(e){const t=(e==null?void 0:e.match(iS))??null;return(t==null?void 0:t[1])??null}function rre(e){const t=(e==null?void 0:e.match(iS))??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:o,extension:a}=GA(r);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=GA(r.slice(i+1));return{prefix:r.slice(0,i),filename:n,extension:s}}function Vz(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?jT(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function rM(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=cO();return Uh(i,`${i.scheme}://${r}`)?jT(e,t.portalHostname,r):jT(e,r,t.portalHostname)}function CO(e){if(!e)return e||null;let t=e;return t&&Re&&!Re.findCredential(t)&&(t=Y8(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function Uz(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&Re&&!Re.findCredential(t)&&(t=Y8(t)),t}var y0;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(y0||(y0={}));const TMe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return y0},ensureMainOnlineDomain:Vz,fromCDNUrl:Uz,fromJSON:lf,itemIdFromResourceUrl:tre,prefixAndFilenameFromResourceUrl:rre,read:PO,toCDNUrl:CO,toJSON:tg,write:_d},Symbol.toStringTag,{value:"Module"}));var Ju;const ire=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),nre=new Set(["KML","GeoJson","CSV"]);let ke=Ju=class extends Q0(ka){static from(e){return B_(Ju,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new ct(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var y;const e=((y=this.type)==null?void 0:y.toLowerCase())||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let n,s=!1,o=!1,a=!1,l=!1,c=!1,h=!1,f=!1,m=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),c=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),n=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":h?"utilitynetwork":s?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(c=t.includes("Spatiotemporal"),f=t.includes("Relational"),n=c||f?"mapimages":s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):n=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?n="maps":e==="web scene"?n=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?n="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?n="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?n="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?n="datafiles":e==="360 vr experience"?n="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?n="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?n="addindesktop":e==="pdf"?n="pdf":e==="microsoft word"?n="word":e==="microsoft excel"?n="excel":e==="microsoft powerpoint"?n="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?n="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?n="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?n="layersgray":e==="analysis model"?n="analysismodel":e==="scene package"?n="scenepackage":e==="3dtiles package"?n="3dtileslayerpackage":e==="3dtiles service"?n="3dtileslayer":e==="mobile scene package"?n="mobilescenepackage":e==="tile package"||e==="compact tile package"?n="tilepackage":e==="task file"?n="taskfile":e==="report template"?n="report-template":e==="statistical data collection"?n="statisticaldatacollection":e==="insights workbook"?n="workbook":e==="insights model"?n="insightsmodel":e==="insights page"?n="insightspage":e==="insights theme"?n="insightstheme":e==="hub initiative"?n="hubinitiative":e==="hub page"?n="hubpage":e==="hub site application"?n="hubsite":e==="hub event"?n="hubevent":e==="hub project"?n="hubproject":e==="relational database connection"?n="relationaldatabaseconnection":e==="big data file share"?n="datastorecollection":e==="image collection"?n="imagecollection":e==="desktop style"?n="desktopstyle":e==="style"?n=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?n="dashboard":e==="raster function template"?n="rasterprocessingtemplate":e==="vector tile package"?n="vectortilepackage":e==="ortho mapping project"?n="orthomappingproject":e==="ortho mapping template"?n="orthomappingtemplate":e==="solution"?n="solutions":e==="geopackage"?n="geopackage":e==="deep learning package"?n="deeplearningpackage":e==="real time analytic"?n="realtimeanalytics":e==="big data analytic"?n="bigdataanalytics":e==="feed"?n="feed":e==="excalibur imagery project"?n="excaliburimageryproject":e==="notebook"?n="notebook":e==="storymap"?n="storymap":e==="survey123 add in"?n="survey123addin":e==="mission"?n="mission":e==="mission report"?n="missionreport":e==="mission template"?n="missiontemplate":e==="quickcapture project"?n="quickcaptureproject":e==="pro report"?n="proreport":e==="pro report template"?n="proreporttemplate":e==="urban model"?n="urbanmodel":e==="web experience"?n="experiencebuilder":e==="web experience template"?n="webexperiencetemplate":e==="experience builder widget"?n="experiencebuilderwidget":e==="experience builder widget package"?n="experiencebuilderwidgetpackage":e==="workflow"?n="workflow":e==="kernel gateway connection"?n="kernelgatewayconnection":e==="insights script"?n="insightsscript":e==="hub initiative template"?n="hubinitiativetemplate":e==="storymap theme"?n="storymaptheme":e==="knowledge graph"?n="knowledgegraph":e==="knowledge graph layer"?n="knowledgegraphlayer":e==="knowledge studio project"?n="knowledgestudio":e==="native application"?n="nativeapp":e==="native application installer"?n="nativeappinstaller":e==="web link chart"?n="linkchart":e==="knowledge graph web investigation"?n="investigation":e==="ogcfeatureserver"?n="features":e==="pro project"?n="proproject":e==="insights workbook package"?n="insightsworkbookpackage":e==="apache parquet"?n="apacheparquet":e==="notebook code snippet library"?n="notebookcodesnippets":e==="suitability model"?n="suitabilitymodel":e==="esri classifier definition"?n="classifierdefinition":e==="esri classification schema"?n="classificationschema":e==="insights data engineering workbook"?n="dataengineeringworkbook":e==="insights data engineering model"?n="dataengineeringmodel":e==="deep learning studio project"?n="deeplearningproject":e==="discussion"?n="discussion":e==="allsource project"?n="allsourceproject":e==="api key"?n="apikey":e==="data pipeline"?n="datapipelines":e==="group layer"?(m=t.includes("Map"),n=m?"layergroup2d":"layergroup"):n=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",n?Ye(r+n+i+".png"):null}get isLayer(){return this.type!=null&&ire.has(this.type)}get itemCdnUrl(){return CO(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var r;const e=this.itemUrl,t=this.thumbnail;return e&&t?((r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var r,i,n;const e=(r=this.portal)==null?void 0:r.restUrl;if(!e)return null;const t=this.owner||((n=(i=this.portal)==null?void 0:i.user)==null?void 0:n.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=Ui.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof n$&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new n$({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:C(this.applicationProxies),avgRating:this.avgRating,categories:C(this.categories),created:C(this.created),culture:this.culture,description:this.description,extent:C(this.extent),groupCategories:C(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:C(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:C(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Ju({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var r;const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]=(r=e[i])==null?void 0:r.join(", ");const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new n$(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Ju)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new D("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new D("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:n,tags:s,title:o}=e||{},a={method:"post",query:{copyPrivateResources:i==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!i,tags:s==null?void 0:s.join(","),title:o}},{itemId:l}=await t.request(`${r}/copy`,a);return new Ju({id:l,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")Rd(t)?i.query={data:t}:i.query={url:Nn(t)},r!=null&&(i.query.filename=r);else{const n=new FormData;r!=null?n.append("file",t,r):n.append("file",t),i.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new D("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await ee(()=>import("./resourceUtils-C5HctHL9.js"),[]);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await ee(()=>import("./resourceUtils-C5HctHL9.js"),[]);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await ee(()=>import("./resourceUtils-C5HctHL9.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new D("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await ee(()=>import("./resourceUtils-C5HctHL9.js"),[]);return t(this,e)}resourceFromPath(e){return new Xte({portalItem:this,path:e})}toJSON(){var r,i;const e=this.extent,t={accessInformation:this.accessInformation,categories:C(this.categories),created:(r=this.created)==null?void 0:r.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(i=this.modified)==null?void 0:i.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C(this.typeKeywords),url:this.url};return PY(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Ju({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};u([d({type:["private","shared","org","public"]})],ke.prototype,"access",void 0),u([d()],ke.prototype,"accessInformation",void 0),u([d({type:String})],ke.prototype,"apiKey",void 0),u([d({json:{read:{source:"appProxies"}}})],ke.prototype,"applicationProxies",void 0),u([d()],ke.prototype,"avgRating",void 0),u([d()],ke.prototype,"categories",void 0),u([d({type:Date})],ke.prototype,"created",void 0),u([d()],ke.prototype,"culture",void 0),u([d()],ke.prototype,"description",void 0),u([d({readOnly:!0})],ke.prototype,"displayName",null),u([d({type:ct})],ke.prototype,"extent",void 0),u([J("extent")],ke.prototype,"readExtent",null),u([d()],ke.prototype,"groupCategories",void 0),u([d({readOnly:!0})],ke.prototype,"iconUrl",null),u([d()],ke.prototype,"id",void 0),u([d({readOnly:!0})],ke.prototype,"isLayer",null),u([d({type:Boolean,readOnly:!0})],ke.prototype,"isOrgItem",void 0),u([d()],ke.prototype,"itemControl",void 0),u([d({readOnly:!0})],ke.prototype,"itemPageUrl",null),u([d({readOnly:!0})],ke.prototype,"itemUrl",null),u([d()],ke.prototype,"licenseInfo",void 0),u([d({type:Date})],ke.prototype,"modified",void 0),u([d()],ke.prototype,"name",void 0),u([d()],ke.prototype,"numComments",void 0),u([d()],ke.prototype,"numRatings",void 0),u([d()],ke.prototype,"numViews",void 0),u([d()],ke.prototype,"owner",void 0),u([d()],ke.prototype,"ownerFolder",void 0),u([d({type:Ui})],ke.prototype,"portal",void 0),u([d()],ke.prototype,"screenshots",void 0),u([d()],ke.prototype,"size",void 0),u([d()],ke.prototype,"snippet",void 0),u([d()],ke.prototype,"sourceJSON",void 0),u([d({type:String})],ke.prototype,"sourceUrl",void 0),u([d({type:String})],ke.prototype,"spatialReference",void 0),u([d()],ke.prototype,"tags",void 0),u([d()],ke.prototype,"thumbnail",void 0),u([d({readOnly:!0})],ke.prototype,"thumbnailUrl",null),u([d()],ke.prototype,"title",void 0),u([d()],ke.prototype,"type",void 0),u([d()],ke.prototype,"typeKeywords",void 0),u([d({type:String,json:{read(e,t){var r;if(nre.has(t.type)){const i=(r=this.portal)==null?void 0:r.restUrl;e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return e}}})],ke.prototype,"url",void 0),u([d({readOnly:!0})],ke.prototype,"userItemUrl",null),ke=Ju=u([T("esri.portal.PortalItem")],ke);const Ty=ke,Gz=Object.freeze(Object.defineProperty({__proto__:null,default:Ty},Symbol.toStringTag,{value:"Module"})),uL=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,sre={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function cL(e){return e in sre}const vm=[],vh=new Map;function dL(e){for(const t of vh.keys())Bz(e.pattern,t)&&vh.delete(t)}function ore(e){return vm.includes(e)||(dL(e),vm.unshift(e)),Xe(()=>{const t=vm.indexOf(e);t>-1&&(vm.splice(t,1),dL(e))})}async function qz(e){const t=un();vh.has(e)||vh.set(e,lre(e,t));const r=vh.get(e);return r&&await ure.add(r),r}function are(e){if(!uL.test(e))return null;const t=uL.exec(e);if(t===null)return null;const[,r,i]=t,n=r+(i?"-"+i.toUpperCase():"");return cL(n)?n:cL(r)?r:null}async function lre(e,t){const r=[];for(const i of vm)if(Bz(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(n){r.push(n)}throw r.length?new D("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new D("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function Bz(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}kO(()=>{vh.clear()});const ure=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=pn())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function cre(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await qz("esri/t9n/basemaps");return r[e]||r[t]}const iM={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ye("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ye("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ye("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ye("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ye("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ye("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ye("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ye("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ye("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ye("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ye("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ye("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Ye("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Ye("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Ye("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Ye("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Ye("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return Ye("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Ye("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Ye("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Ye("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Ye("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Ye("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Ye("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Ye("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Ye("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Ye("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},dre=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let tl=class extends we{constructor(t){super(t),this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const t=un().toLowerCase();switch(t){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const r=Hte(t);return r==="pt"?"pt-BR":r&&dre.has(r)?r:"global"}};u([d()],tl.prototype,"id",void 0),u([d()],tl.prototype,"language",void 0),u([d()],tl.prototype,"places",void 0),u([d()],tl.prototype,"serviceUrl",void 0),u([d()],tl.prototype,"worldview",void 0),tl=u([T("esri.support.BasemapStyle")],tl);const pre=tl;function hre(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function Ku(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const EMe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function Hz(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function nS(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function IMe(e){var t;return((e==null?void 0:e.type)==="feature"||(e==null?void 0:e.type)==="subtype-group")&&((t=e.source)==null?void 0:t.type)==="feature-layer"}async function Wz(e,t){const r=Re==null?void 0:Re.findServerInfo(e);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const n=`${e.substring(0,i)}/rest/info`,s=t!=null?t.signal:null,{data:o}=await Ot(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function fre(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function mre(e){return fre(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function yre(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function gre(e){return!!yre(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const vre=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),wre=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function bre(e){return e.layerContainerType==="basemap"?vre:e.layerContainerType==="operational-layers"?wre:null}function _re(e,t){if(t.restrictedWebMapWriting){const r=bre(t);return r==null||r.has(e.type)&&!nS(e)}return!0}function Sre(e,t){var r;if(t)if(nS(e)){const i=j_("featureCollection.layers",t),n=(r=i==null?void 0:i[0])==null?void 0:r.layerDefinition;n&&pL(e,n)}else e.type!=="group"&&pL(e,t)}function pL(e,t){"maxScale"in e&&(t.maxScale=_b(e.maxScale)??void 0),"minScale"in e&&(t.minScale=_b(e.minScale)??void 0)}function $re(e,t){if(Sre(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=_b(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(nS(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function hL(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r!=null&&r.messages&&r.messages.push(new D("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(nS(e)&&!e.isTable)t=e.resourceInfo;else if(_re(e,r)){const i={};return e.write(i,r)?i:null}return t!=null&&$re(e,t=C(t)),t}var wm;let xre=0,Ji=wm=class extends Q0(ka){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+xre++,this.baseLayers=new ce,this.referenceLayers=new ce;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&H.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.addHandles([this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{H.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=xt(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",lu(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=hL(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);s!=null&&i.push(s)}),this.referenceLayers.forEach(n=>{const s=hL(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);s!=null&&(n.type!=="scene"&&(s.isReference=!0),i.push(s))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",lu(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return yz(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>sb(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>sb(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new wm({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var r;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((r=this.resourceInfo)!=null&&r.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const n=C(i);return n.url&&$o(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&$o(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:i}=this;Ct(e);const n=[];if(t){const s=t.context?t.context.url:null;if(n.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const o=t.data.id;n.push(cre(o).then(a=>{a&&this.read({title:a},t.context)}))}}else r?n.push(this._loadFromItem(r,e)):i&&n.push(this._loadFromStylesService(i,e));await Promise.all(n)}async _loadLayersFromJSON(e,t,r){var l,c;const i=(l=this.resourceInfo)==null?void 0:l.context,n=((c=this.portalItem)==null?void 0:c.portal)||(i==null?void 0:i.portal)||null,s=Mre[(i==null?void 0:i.origin)||""]??"web-map",{populateOperationalLayers:o}=await ee(async()=>{const{populateOperationalLayers:h}=await import("./layersCreator-DSuuUXZr.js");return{populateOperationalLayers:h}},__vite__mapDeps([7,8,9,10])),a=[];if(Ct(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const h={context:{...i,origin:s,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},f=g=>s==="web-scene"&&g.layerType==="ArcGISSceneServiceLayer"||g.isReference,m=o(this.baseLayers,e.baseMapLayers.filter(g=>!f(g)),h);a.push(m);const y=o(this.referenceLayers,e.baseMapLayers.filter(f),h);a.push(y)}await Promise.allSettled(a)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),n=ii(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:Tre[e.type||""]??"web-map",portal:e.portal||Ui.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Ui.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}async _loadFromStylesService(e,t){const r=`${e.serviceUrl}/${e.id}`,i=(await Ot(r,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview},signal:t==null?void 0:t.signal})).data,n=ii(r);return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:"web-map",url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}static fromId(e){const t=iM[e];return t?t.itemId?new wm({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):wm.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};u([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ce}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],Ji.prototype,"baseLayers",null),u([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],Ji.prototype,"id",void 0),u([d({type:Ty})],Ji.prototype,"portalItem",void 0),u([d()],Ji.prototype,"referenceLayers",null),u([d({readOnly:!0})],Ji.prototype,"resourceInfo",void 0),u([d({type:Pe})],Ji.prototype,"spatialReference",void 0),u([d({type:pre})],Ji.prototype,"style",void 0),u([d()],Ji.prototype,"thumbnailUrl",void 0),u([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Ji.prototype,"title",void 0),u([X("title")],Ji.prototype,"writeTitle",null),Ji=wm=u([T("esri.Basemap")],Ji);const Tre={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Mre={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},My=Ji,Ere=Object.freeze(Object.defineProperty({__proto__:null,default:My},Symbol.toStringTag,{value:"Module"})),Lb={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Zz(e){return!!Lb[e]||!!Lb[e.toLowerCase()]}function RO(e){return Lb[e]??Lb[e.toLowerCase()]}function Ire(e){return[...RO(e)]}function s$(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function Jz(e,t,r,i=1){const n=(e%360+360)%360/360,s=r<=.5?r*(t+1):r+t-r*t,o=2*r-s;return[Math.round(255*s$(o,s,n+1/3)),Math.round(255*s$(o,s,n)),Math.round(255*s$(o,s,n-1/3)),i]}function kre(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,n=t?1:17,s=t?e.length===9:e.length===5;let o=+("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&i,o>>=r,a[3]=n*l/255),l=o&i,o>>=r,a[2]=n*l,l=o&i,o>>=r,a[1]=n*l,l=o&i,o>>=r,a[0]=n*l,a}function $u(){return[0,0,0]}function Ore(e){return[e[0],e[1],e[2]]}function rg(e,t,r){return[e,t,r]}function Pre(e,t=$u()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Cre(e,t){return new Float64Array(e,t,3)}function Kz(){return $u()}function Yz(){return rg(1,1,1)}function Qz(){return rg(1,0,0)}function Xz(){return rg(0,1,0)}function e9(){return rg(0,0,1)}const Rre=Kz(),Are=Yz(),Lre=Qz(),Nre=Xz(),Fre=e9();Object.freeze(Object.defineProperty({__proto__:null,ONES:Are,UNIT_X:Lre,UNIT_Y:Nre,UNIT_Z:Fre,ZEROS:Rre,clone:Ore,create:$u,createView:Cre,fromArray:Pre,fromValues:rg,ones:Yz,unitX:Qz,unitY:Xz,unitZ:e9,zeros:Kz},Symbol.toStringTag,{value:"Module"}));let AO=1e-6;function vi(){return AO}function Dre(e){AO=e}const sS=Math.random,jre=Math.PI/180,zre=180/Math.PI;function LO(e){return e*jre}function Vre(e){return e*zre}function Ure(e,t){return Math.abs(e-t)<=AO*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:sS,equals:Ure,getEpsilon:vi,setEpsilon:Dre,toDegree:Vre,toRadian:LO},Symbol.toStringTag,{value:"Module"}));function NO(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function Gre(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function t9(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function qre(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function r9(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function i9(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function n9(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function Bre(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Hre(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Wre(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function Zre(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function Jre(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function Kre(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function Yre(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function s9(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function Qre(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function o9(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}function a9(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function l9(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function Xre(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function eie(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function nM(e,t){const r=t[0],i=t[1],n=t[2];let s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function u9(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function tie(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2];return e[0]=n*l-s*a,e[1]=s*o-i*l,e[2]=i*a-n*o,e}function rie(e,t,r,i){const n=t[0],s=t[1],o=t[2];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e}function iie(e,t,r,i,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),h=o*(3-2*s);return e[0]=t[0]*a+r[0]*l+i[0]*c+n[0]*h,e[1]=t[1]*a+r[1]*l+i[1]*c+n[1]*h,e[2]=t[2]*a+r[2]*l+i[2]*c+n[2]*h,e}function nie(e,t,r,i,n,s){const o=1-s,a=o*o,l=s*s,c=a*o,h=3*s*a,f=3*l*o,m=l*s;return e[0]=t[0]*c+r[0]*h+i[0]*f+n[0]*m,e[1]=t[1]*c+r[1]*h+i[1]*f+n[1]*m,e[2]=t[2]*c+r[2]*h+i[2]*f+n[2]*m,e}function sie(e,t){t=t||1;const r=sS,i=2*r()*Math.PI,n=2*r()-1,s=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(i)*s,e[1]=Math.sin(i)*s,e[2]=n*t,e}function oie(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12],e[1]=r[1]*i+r[5]*n+r[9]*s+r[13],e[2]=r[2]*i+r[6]*n+r[10]*s+r[14],e}function aie(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=i*r[0]+n*r[3]+s*r[6],e[1]=i*r[1]+n*r[4]+s*r[7],e[2]=i*r[2]+n*r[5]+s*r[8],e}function lie(e,t,r){const i=r[0],n=r[1],s=r[2],o=r[3],a=t[0],l=t[1],c=t[2],h=n*c-s*l,f=s*a-i*c,m=i*l-n*a,y=n*m-s*f,g=s*h-i*m,v=i*f-n*h,b=2*o;return e[0]=a+h*b+2*y,e[1]=l+f*b+2*g,e[2]=c+m*b+2*v,e}function uie(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0],s[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),s[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function cie(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),s[1]=n[1],s[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function die(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),s[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),s[2]=n[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function pie(e,t){nM(fL,e),nM(mL,t);const r=u9(fL,mL);return r>1?0:r<-1?Math.PI:Math.acos(r)}const fL=$u(),mL=$u();function hie(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function fie(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function mie(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=t[0],o=t[1],a=t[2],l=vi();return Math.abs(r-s)<=l*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=l*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))}function yie(e,t,r){const i=r[0]-t[0],n=r[1]-t[1],s=r[2]-t[2];let o=i*i+n*n+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=n*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const gie=r9,vie=i9,wie=n9,bie=o9,_ie=a9,Sie=NO,$ie=l9;Object.freeze(Object.defineProperty({__proto__:null,abs:Wre,add:qre,angle:pie,bezier:nie,ceil:Bre,copy:Gre,cross:tie,direction:yie,dist:bie,distance:o9,div:wie,divide:n9,dot:u9,equals:mie,exactEquals:fie,floor:Hre,hermite:iie,inverse:eie,len:Sie,length:NO,lerp:rie,max:Kre,min:Jre,mul:vie,multiply:i9,negate:Xre,normalize:nM,random:sie,rotateX:uie,rotateY:cie,rotateZ:die,round:Yre,scale:s9,scaleAndAdd:Qre,set:t9,sign:Zre,sqrDist:_ie,sqrLen:$ie,squaredDistance:a9,squaredLength:l9,str:hie,sub:gie,subtract:r9,transformMat3:aie,transformMat4:oie,transformQuat:lie},Symbol.toStringTag,{value:"Module"}));const yL=new Float32Array(1);function kMe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Rs(e,t,r){return Math.min(Math.max(e,t),r)}function OMe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function bm(e,t,r){return e+(t-e)*r}function PMe(e,t,r,i,n){return bm(i,n,(e-t)/(r-t))}function oS(e){return e*Math.PI/180}function c9(e){return 180*e/Math.PI}function CMe(e){return Math.acos(Rs(e,-1,1))}function d9(e){return Math.asin(Rs(e,-1,1))}function o$(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}const Nb=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function sM(e){return Nb.setFloat64(0,e),Nb.getBigInt64(0)}function xie(e){return Nb.setBigInt64(0,e),Nb.getFloat64(0)}const $1=BigInt("1000000"),Tie=p9(1);function p9(e){const t=sM(e=Math.abs(e)),r=xie(t<=$1?$1:t-$1);return Math.abs(e-r)}function RMe(e,t,r=Tie){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&p9(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=sM(e),n=sM(t);return i<0!=n<0?!1:!((i<n?n-i:i-n)>$1)}function AMe(e){return h9(Math.max(-gL,Math.min(e,gL)))}function h9(e){return yL[0]=e,yL[0]}function LMe(e,t){const r=NO(e),i=d9(e[2]/r),n=Math.atan2(e[1]/r,e[0]/r);return t9(t,r,i,n),t}function NMe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(o$(t,1)&&o$(r,1)&&o$(i,1))}const gL=h9(34028234663852886e22);function lv(e){return Rs(sO(e),0,255)}function uv(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function cv(e,t){const r=e.toString(16).padStart(2,"0");return t?r.substring(0,1):r}let x1=class dr{static blendColors(t,r,i,n=new dr){return n.r=Math.round(t.r+(r.r-t.r)*i),n.g=Math.round(t.g+(r.g-t.g)*i),n.b=Math.round(t.b+(r.b-t.b)*i),n.a=t.a+(r.a-t.a)*i,n._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(i){const n=i[2].split(/\s*,\s*/),s=i[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(l=>2.56*parseFloat(l));return n.length===4&&(a[3]=parseFloat(n[3])),dr.fromArray(a,r)}return dr.fromArray(n.map(a=>parseFloat(a)),r)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return dr.fromArray(Jz(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),r)}return null}static fromHex(t,r=new dr){if(t[0]!=="#"||isNaN(+`0x${t.substring(1)}`))return null;switch(t.length){case 4:case 5:{const i=parseInt(t.substring(1,2),16),n=parseInt(t.substring(2,3),16),s=parseInt(t.substring(3,4),16),o=t.length===5?15:parseInt(t.substring(4),16);return dr.fromArray([i+16*i,n+16*n,s+16*s,(o+16*o)/255],r)}case 7:case 9:{const i=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),s=parseInt(t.substring(5,7),16),o=t.length===7?255:parseInt(t.substring(7),16);return dr.fromArray([i,n,s,o/255],r)}default:return null}}static fromArray(t,r=new dr){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=Zz(t)?RO(t):null;return i&&dr.fromArray(i,r)||dr.fromRgb(t,r)||dr.fromHex(t,r)}static fromJSON(t){return t!=null?new dr([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?dr.fromString(t,this):Array.isArray(t)?dr.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof dr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=(t==null?void 0:t.capitalize)??!1,i=(t==null?void 0:t.digits)??6,n=i===3||i===4,s=i===4||i===8,o=`#${cv(this.r,n)}${cv(this.g,n)}${cv(this.b,n)}${s?cv(Math.round(255*this.a),n):""}`;return r?o.toUpperCase():o}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=dr.AlphaMode.ALWAYS){const r=lv(this.r),i=lv(this.g),n=lv(this.b);return t===dr.AlphaMode.ALWAYS||this.a!==1?[r,i,n,lv(255*this.a)]:[r,i,n]}clone(){return new dr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(uv(this.r,0,255)),this.g=Math.round(uv(this.g,0,255)),this.b=Math.round(uv(this.b,0,255)),this.a=uv(this.a,0,1),this}_set(t,r,i,n){this.r=t,this.g=r,this.b=i,this.a=n}};x1.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(x1||(x1={}));const Se=x1;function FMe(e){}function Mie(e){return()=>e}function fe(e,t={}){const r=e instanceof De?e:new De(e,t),i={type:(t==null?void 0:t.ignoreUnknown)??1?r.apiValues:String,json:{type:r.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:r.read},write:{writer:r.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(i.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(i.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(i.json.name=t.name),(t==null?void 0:t.nonNullable)!==void 0&&(i.nonNullable=t.nonNullable),d(i)}var oM;let T1=oM=class extends q{constructor(e){super(e),this.type="none"}clone(){return new oM({type:this.type})}};u([fe({none:"none",stayAbove:"stay-above"})],T1.prototype,"type",void 0),T1=oM=u([T("esri.ground.NavigationConstraint")],T1);function aS(e){const t=sO(100*(1-e));return Math.max(0,Math.min(t,100))}function g0(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var aM;let Uo=aM=class extends Q0(ka){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ce;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&H.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{Gi(e)||H.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)xt(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",lu(e,this._get("layers")))}writeLayers(e,t,r,i){const n=[];e&&(i={...i,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};Mie(s)().write(o,i)&&n.push(o)}else i!=null&&i.messages&&i.messages.push(new D("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return yz(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await ee(()=>import("./ElevationQuery-DmE0XdtX.js"),[]);Ct(t);const i=new r,n=this.layers.filter(vL).toArray();return i.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await ee(()=>import("./ElevationQuery-DmE0XdtX.js"),[]);Ct(t);const i=new r,n=this.layers.filter(vL).toArray();return i.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:C(this.surfaceColor),navigationConstraint:C(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new aM({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,r){const i=(t==null?void 0:t.origin)||"web-scene",n=(t==null?void 0:t.portal)||null,s=(t==null?void 0:t.url)||null,{populateOperationalLayers:o}=await ee(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-DSuuUXZr.js");return{populateOperationalLayers:l}},__vite__mapDeps([7,8,9,10]));Ct(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:i,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}await Promise.allSettled(a)}};function Eie(e){return e&&"createElevationSampler"in e}function vL(e){return e.type==="elevation"||Eie(e)}u([d({json:{read:!1}})],Uo.prototype,"layers",null),u([X("layers")],Uo.prototype,"writeLayers",null),u([d({readOnly:!0})],Uo.prototype,"resourceInfo",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:it,read:{reader:g0,source:"transparency"},write:{writer:(e,t)=>{t.transparency=aS(e)},target:"transparency"}}})],Uo.prototype,"opacity",void 0),u([d({type:Se,json:{type:[it],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Uo.prototype,"surfaceColor",void 0),u([d({type:T1,json:{write:!0}})],Uo.prototype,"navigationConstraint",void 0),Uo=aM=u([T("esri.Ground")],Uo);const Fb=Uo;let ap=class extends ce{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(T8(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let r=0;for(const i of t)i!=null&&(r=this._processCollection(r,i));this.splice(r,this.length)}_createNewInstance(t){return new ce(t)}_processCollection(t,r){if(!r)return t;const i=this.itemFilterFunction??(n=>!!n);for(const n of r)if(n){if(i(n)){const s=this.indexOf(n,t);s>=0?s!==t&&this.reorder(n,t):this.add(n,t),++t}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)t=this._processCollection(t,o);else t=this._processCollection(t,s)}}return t}};u([d()],ap.prototype,"getCollections",void 0),u([d()],ap.prototype,"getChildrenFunction",void 0),u([d()],ap.prototype,"itemFilterFunction",void 0),ap=u([T("esri.core.CollectionFlattener")],ap);const v0=ap;function xe(e,t,r={}){return FO(e,t,r,f9)}function Oa(e,t,r={}){return FO(e,t,r,m9)}function FO(e,t,r={},i){let n=null;const s=r.once?(o,a)=>{i(o)&&(Pt(n),t(o,a))}:(o,a)=>{i(o)&&t(o,a)};if(n=WQ(e,s,r.sync,r.equals),r.initial){const o=e();s(o,o)}return n}function Sd(e,t,r,i={}){let n=null,s=null,o=null;function a(){var h;n&&s&&(s.remove(),(h=i.onListenerRemove)==null||h.call(i,n),n=null,s=null)}function l(h){i.once&&i.once&&Pt(o),r(h)}const c=xe(e,(h,f)=>{var m;a(),V_(h)&&(n=h,s=K0(h,t,l),(m=i.onListenerAdd)==null||m.call(i,h))},{sync:i.sync,initial:!0});return o=Xe(()=>{c.remove(),a()}),o}function DO(e,t){return Iie(e,m9,t)}function Iie(e,t,r){if(Ia(r))return Promise.reject(Yt());const i=e();if(t!=null&&t(i))return Promise.resolve(i);let n=null;function s(){n=Pt(n)}return new Promise((o,a)=>{n=W0([Un(r,()=>{s(),a(Yt())}),FO(e,l=>{s(),o(l)},{sync:!1,once:!0},t??f9)])})}function f9(e){return!0}function m9(e){return!!e}const du={sync:!0},wi={initial:!0},Ln={sync:!0,initial:!0},dv=new WeakMap;function y9(e){return!e.destroyed&&(dv.has(e)||e.addHandles([xe(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||y9(t))},t=>dv.set(e,t),Ln),Xe(()=>dv.delete(e))]),dv.get(e))}function kie(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function Oie(e){var t,r;return!(!kie(e)||!((r=(t=mre(e))==null?void 0:t.operations)!=null&&r.supportsEditing)||"editingEnabled"in e&&!gre(e)||y9(e))}const Pie=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Cie="screenUtils.toPt: input not recognized!",g9=96;function Rie(e){return e?e/72*g9:0}function Jn(e){return e?72*e/g9:0}function ze(e){if(typeof e=="string"){const t=e.match(Pie);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",s=i==="px"?Jn(r):r;return n?-s:s}return console.warn(Cie),null}return e}function Nr(e=0,t=0){return{x:e,y:t}}function jMe(e=0,t=0){return[e,t]}function lS(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Aie(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Lie(e,t,r,i,n,s,o,a,l,c,h,f,m,y,g,v){const b=new Float32Array(16);return b[0]=e,b[1]=t,b[2]=r,b[3]=i,b[4]=n,b[5]=s,b[6]=o,b[7]=a,b[8]=l,b[9]=c,b[10]=h,b[11]=f,b[12]=m,b[13]=y,b[14]=g,b[15]=v,b}function Nie(e,t){return new Float32Array(e,t,16)}const Fie=lS();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Fie,clone:Aie,create:lS,createView:Nie,fromValues:Lie},Symbol.toStringTag,{value:"Module"}));function Die(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function xu(e,t,r,i,n,s,o,a,l,c,h,f,m,y,g,v,b){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e[9]=h,e[10]=f,e[11]=m,e[12]=y,e[13]=g,e[14]=v,e[15]=b,e}function uS(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Tu(e,t){if(e===t){const r=t[1],i=t[2],n=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=n,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function jie(e,t){return v9(e,t)||uS(e),e}function v9(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],b=t[14],w=t[15],_=r*a-i*o,$=r*l-n*o,E=r*c-s*o,k=i*l-n*a,M=i*c-s*a,P=n*c-s*l,N=h*v-f*g,j=h*b-m*g,G=h*w-y*g,W=f*b-m*v,ie=f*w-y*v,me=m*w-y*b;let ne=_*me-$*ie+E*W+k*G-M*j+P*N;return ne?(ne=1/ne,e[0]=(a*me-l*ie+c*W)*ne,e[1]=(n*ie-i*me-s*W)*ne,e[2]=(v*P-b*M+w*k)*ne,e[3]=(m*M-f*P-y*k)*ne,e[4]=(l*G-o*me-c*j)*ne,e[5]=(r*me-n*G+s*j)*ne,e[6]=(b*E-g*P-w*$)*ne,e[7]=(h*P-m*E+y*$)*ne,e[8]=(o*ie-a*G+c*N)*ne,e[9]=(i*G-r*ie-s*N)*ne,e[10]=(g*M-v*E+w*_)*ne,e[11]=(f*E-h*M-y*_)*ne,e[12]=(a*j-o*W-l*N)*ne,e[13]=(r*W-i*j+n*N)*ne,e[14]=(v*$-g*k-b*_)*ne,e[15]=(h*k-f*$+m*_)*ne,e):null}function zie(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],b=t[14],w=t[15];return e[0]=a*(m*w-y*b)-f*(l*w-c*b)+v*(l*y-c*m),e[1]=-(i*(m*w-y*b)-f*(n*w-s*b)+v*(n*y-s*m)),e[2]=i*(l*w-c*b)-a*(n*w-s*b)+v*(n*c-s*l),e[3]=-(i*(l*y-c*m)-a*(n*y-s*m)+f*(n*c-s*l)),e[4]=-(o*(m*w-y*b)-h*(l*w-c*b)+g*(l*y-c*m)),e[5]=r*(m*w-y*b)-h*(n*w-s*b)+g*(n*y-s*m),e[6]=-(r*(l*w-c*b)-o*(n*w-s*b)+g*(n*c-s*l)),e[7]=r*(l*y-c*m)-o*(n*y-s*m)+h*(n*c-s*l),e[8]=o*(f*w-y*v)-h*(a*w-c*v)+g*(a*y-c*f),e[9]=-(r*(f*w-y*v)-h*(i*w-s*v)+g*(i*y-s*f)),e[10]=r*(a*w-c*v)-o*(i*w-s*v)+g*(i*c-s*a),e[11]=-(r*(a*y-c*f)-o*(i*y-s*f)+h*(i*c-s*a)),e[12]=-(o*(f*b-m*v)-h*(a*b-l*v)+g*(a*m-l*f)),e[13]=r*(f*b-m*v)-h*(i*b-n*v)+g*(i*m-n*f),e[14]=-(r*(a*b-l*v)-o*(i*b-n*v)+g*(i*l-n*a)),e[15]=r*(a*m-l*f)-o*(i*m-n*f)+h*(i*l-n*a),e}function Vie(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=e[9],f=e[10],m=e[11],y=e[12],g=e[13],v=e[14],b=e[15];return(t*o-r*s)*(f*b-m*v)-(t*a-i*s)*(h*b-m*g)+(t*l-n*s)*(h*v-f*g)+(r*a-i*o)*(c*b-m*y)-(r*l-n*o)*(c*v-f*y)+(i*l-n*a)*(c*g-h*y)}function w9(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=t[9],y=t[10],g=t[11],v=t[12],b=t[13],w=t[14],_=t[15];let $=r[0],E=r[1],k=r[2],M=r[3];return e[0]=$*i+E*a+k*f+M*v,e[1]=$*n+E*l+k*m+M*b,e[2]=$*s+E*c+k*y+M*w,e[3]=$*o+E*h+k*g+M*_,$=r[4],E=r[5],k=r[6],M=r[7],e[4]=$*i+E*a+k*f+M*v,e[5]=$*n+E*l+k*m+M*b,e[6]=$*s+E*c+k*y+M*w,e[7]=$*o+E*h+k*g+M*_,$=r[8],E=r[9],k=r[10],M=r[11],e[8]=$*i+E*a+k*f+M*v,e[9]=$*n+E*l+k*m+M*b,e[10]=$*s+E*c+k*y+M*w,e[11]=$*o+E*h+k*g+M*_,$=r[12],E=r[13],k=r[14],M=r[15],e[12]=$*i+E*a+k*f+M*v,e[13]=$*n+E*l+k*m+M*b,e[14]=$*s+E*c+k*y+M*w,e[15]=$*o+E*h+k*g+M*_,e}function Uie(e,t,r){const i=r[0],n=r[1],s=r[2];if(t===e)e[12]=t[0]*i+t[4]*n+t[8]*s+t[12],e[13]=t[1]*i+t[5]*n+t[9]*s+t[13],e[14]=t[2]*i+t[6]*n+t[10]*s+t[14],e[15]=t[3]*i+t[7]*n+t[11]*s+t[15];else{const o=t[0],a=t[1],l=t[2],c=t[3],h=t[4],f=t[5],m=t[6],y=t[7],g=t[8],v=t[9],b=t[10],w=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=c,e[4]=h,e[5]=f,e[6]=m,e[7]=y,e[8]=g,e[9]=v,e[10]=b,e[11]=w,e[12]=o*i+h*n+g*s+t[12],e[13]=a*i+f*n+v*s+t[13],e[14]=l*i+m*n+b*s+t[14],e[15]=c*i+y*n+w*s+t[15]}return e}function Gie(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function qie(e,t,r,i){let n,s,o,a,l,c,h,f,m,y,g,v,b,w,_,$,E,k,M,P,N,j,G,W,ie=i[0],me=i[1],ne=i[2],nt=Math.sqrt(ie*ie+me*me+ne*ne);return nt<vi()?null:(nt=1/nt,ie*=nt,me*=nt,ne*=nt,n=Math.sin(r),s=Math.cos(r),o=1-s,a=t[0],l=t[1],c=t[2],h=t[3],f=t[4],m=t[5],y=t[6],g=t[7],v=t[8],b=t[9],w=t[10],_=t[11],$=ie*ie*o+s,E=me*ie*o+ne*n,k=ne*ie*o-me*n,M=ie*me*o-ne*n,P=me*me*o+s,N=ne*me*o+ie*n,j=ie*ne*o+me*n,G=me*ne*o-ie*n,W=ne*ne*o+s,e[0]=a*$+f*E+v*k,e[1]=l*$+m*E+b*k,e[2]=c*$+y*E+w*k,e[3]=h*$+g*E+_*k,e[4]=a*M+f*P+v*N,e[5]=l*M+m*P+b*N,e[6]=c*M+y*P+w*N,e[7]=h*M+g*P+_*N,e[8]=a*j+f*G+v*W,e[9]=l*j+m*G+b*W,e[10]=c*j+y*G+w*W,e[11]=h*j+g*G+_*W,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Bie(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],f=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+c*i,e[5]=o*n+h*i,e[6]=a*n+f*i,e[7]=l*n+m*i,e[8]=c*n-s*i,e[9]=h*n-o*i,e[10]=f*n-a*i,e[11]=m*n-l*i,e}function Hie(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],c=t[8],h=t[9],f=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-c*i,e[1]=o*n-h*i,e[2]=a*n-f*i,e[3]=l*n-m*i,e[8]=s*i+c*n,e[9]=o*i+h*n,e[10]=a*i+f*n,e[11]=l*i+m*n,e}function Wie(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],c=t[4],h=t[5],f=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+c*i,e[1]=o*n+h*i,e[2]=a*n+f*i,e[3]=l*n+m*i,e[4]=c*n-s*i,e[5]=h*n-o*i,e[6]=f*n-a*i,e[7]=m*n-l*i,e}function Zie(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Jie(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Kie(e,t,r){if(t===0)return uS(e);let i,n,s,o=r[0],a=r[1],l=r[2],c=Math.sqrt(o*o+a*a+l*l);return c<vi()?null:(c=1/c,o*=c,a*=c,l*=c,i=Math.sin(t),n=Math.cos(t),s=1-n,e[0]=o*o*s+n,e[1]=a*o*s+l*i,e[2]=l*o*s-a*i,e[3]=0,e[4]=o*a*s-l*i,e[5]=a*a*s+n,e[6]=l*a*s+o*i,e[7]=0,e[8]=o*l*s+a*i,e[9]=a*l*s-o*i,e[10]=l*l*s+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Yie(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Qie(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Xie(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function b9(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=i+i,l=n+n,c=s+s,h=i*a,f=i*l,m=i*c,y=n*l,g=n*c,v=s*c,b=o*a,w=o*l,_=o*c;return e[0]=1-(y+v),e[1]=f+_,e[2]=m-w,e[3]=0,e[4]=f-_,e[5]=1-(h+v),e[6]=g+b,e[7]=0,e[8]=m+w,e[9]=g-b,e[10]=1-(h+y),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function ene(e,t){const r=tne,i=-t[0],n=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=i*i+n*n+s*s+o*o;return f>0?(r[0]=2*(a*o+h*i+l*s-c*n)/f,r[1]=2*(l*o+h*n+c*i-a*s)/f,r[2]=2*(c*o+h*s+a*n-l*i)/f):(r[0]=2*(a*o+h*i+l*s-c*n),r[1]=2*(l*o+h*n+c*i-a*s),r[2]=2*(c*o+h*s+a*n-l*i)),b9(e,t,r),e}const tne=$u();function rne(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function ine(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(l*l+c*c+h*h),e}function nne(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function sne(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3],l=n+n,c=s+s,h=o+o,f=n*l,m=n*c,y=n*h,g=s*c,v=s*h,b=o*h,w=a*l,_=a*c,$=a*h,E=i[0],k=i[1],M=i[2];return e[0]=(1-(g+b))*E,e[1]=(m+$)*E,e[2]=(y-_)*E,e[3]=0,e[4]=(m-$)*k,e[5]=(1-(f+b))*k,e[6]=(v+w)*k,e[7]=0,e[8]=(y+_)*M,e[9]=(v-w)*M,e[10]=(1-(f+g))*M,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function one(e,t,r,i,n){const s=t[0],o=t[1],a=t[2],l=t[3],c=s+s,h=o+o,f=a+a,m=s*c,y=s*h,g=s*f,v=o*h,b=o*f,w=a*f,_=l*c,$=l*h,E=l*f,k=i[0],M=i[1],P=i[2],N=n[0],j=n[1],G=n[2],W=(1-(v+w))*k,ie=(y+E)*k,me=(g-$)*k,ne=(y-E)*M,nt=(1-(m+w))*M,Xt=(b+_)*M,Ie=(g+$)*P,K=(b-_)*P,be=(1-(m+v))*P;return e[0]=W,e[1]=ie,e[2]=me,e[3]=0,e[4]=ne,e[5]=nt,e[6]=Xt,e[7]=0,e[8]=Ie,e[9]=K,e[10]=be,e[11]=0,e[12]=r[0]+N-(W*N+ne*j+Ie*G),e[13]=r[1]+j-(ie*N+nt*j+K*G),e[14]=r[2]+G-(me*N+Xt*j+be*G),e[15]=1,e}function ane(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,l=n+n,c=r*o,h=i*o,f=i*a,m=n*o,y=n*a,g=n*l,v=s*o,b=s*a,w=s*l;return e[0]=1-f-g,e[1]=h+w,e[2]=m-b,e[3]=0,e[4]=h-w,e[5]=1-c-g,e[6]=y+v,e[7]=0,e[8]=m+b,e[9]=y-v,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function lne(e,t,r,i,n,s,o){const a=1/(r-t),l=1/(n-i),c=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(n+i)*l,e[10]=(o+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*c,e[15]=0,e}function une(e,t,r,i,n){const s=1/Math.tan(t/2);let o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(o=1/(i-n),e[10]=(n+i)*o,e[14]=2*n*i*o):(e[10]=-1,e[14]=-2*i),e}function cne(e,t,r,i){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(n+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(n-s)*c*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function dne(e,t,r,i,n,s,o){const a=1/(t-r),l=1/(i-n),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*a,e[13]=(n+i)*l,e[14]=(o+s)*c,e[15]=1,e}function pne(e,t,r,i){const n=t[0],s=t[1],o=t[2];let a=n-r[0],l=s-r[1],c=o-r[2];const h=vi();if(Math.abs(a)<h&&Math.abs(l)<h&&Math.abs(c)<h)return void uS(e);let f=1/Math.sqrt(a*a+l*l+c*c);a*=f,l*=f,c*=f;const m=i[0],y=i[1],g=i[2];let v=y*c-g*l,b=g*a-m*c,w=m*l-y*a;f=Math.sqrt(v*v+b*b+w*w),f?(f=1/f,v*=f,b*=f,w*=f):(v=0,b=0,w=0);let _=l*w-c*b,$=c*v-a*w,E=a*b-l*v;f=Math.sqrt(_*_+$*$+E*E),f?(f=1/f,_*=f,$*=f,E*=f):(_=0,$=0,E=0),e[0]=v,e[1]=_,e[2]=a,e[3]=0,e[4]=b,e[5]=$,e[6]=l,e[7]=0,e[8]=w,e[9]=E,e[10]=c,e[11]=0,e[12]=-(v*n+b*s+w*o),e[13]=-(_*n+$*s+E*o),e[14]=-(a*n+l*s+c*o),e[15]=1}function hne(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=i[0],l=i[1],c=i[2];let h=n-r[0],f=s-r[1],m=o-r[2],y=h*h+f*f+m*m;y>0&&(y=1/Math.sqrt(y),h*=y,f*=y,m*=y);let g=l*m-c*f,v=c*h-a*m,b=a*f-l*h;return y=g*g+v*v+b*b,y>0&&(y=1/Math.sqrt(y),g*=y,v*=y,b*=y),e[0]=g,e[1]=v,e[2]=b,e[3]=0,e[4]=f*b-m*v,e[5]=m*g-h*b,e[6]=h*v-f*g,e[7]=0,e[8]=h,e[9]=f,e[10]=m,e[11]=0,e[12]=n,e[13]=s,e[14]=o,e[15]=1,e}function fne(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function mne(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function yne(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function _9(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function gne(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function vne(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function wne(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function bne(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=e[9],m=e[10],y=e[11],g=e[12],v=e[13],b=e[14],w=e[15],_=t[0],$=t[1],E=t[2],k=t[3],M=t[4],P=t[5],N=t[6],j=t[7],G=t[8],W=t[9],ie=t[10],me=t[11],ne=t[12],nt=t[13],Xt=t[14],Ie=t[15],K=vi();return Math.abs(r-_)<=K*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-$)<=K*Math.max(1,Math.abs(i),Math.abs($))&&Math.abs(n-E)<=K*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(s-k)<=K*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(o-M)<=K*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-P)<=K*Math.max(1,Math.abs(a),Math.abs(P))&&Math.abs(l-N)<=K*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(c-j)<=K*Math.max(1,Math.abs(c),Math.abs(j))&&Math.abs(h-G)<=K*Math.max(1,Math.abs(h),Math.abs(G))&&Math.abs(f-W)<=K*Math.max(1,Math.abs(f),Math.abs(W))&&Math.abs(m-ie)<=K*Math.max(1,Math.abs(m),Math.abs(ie))&&Math.abs(y-me)<=K*Math.max(1,Math.abs(y),Math.abs(me))&&Math.abs(g-ne)<=K*Math.max(1,Math.abs(g),Math.abs(ne))&&Math.abs(v-nt)<=K*Math.max(1,Math.abs(v),Math.abs(nt))&&Math.abs(b-Xt)<=K*Math.max(1,Math.abs(b),Math.abs(Xt))&&Math.abs(w-Ie)<=K*Math.max(1,Math.abs(w),Math.abs(Ie))}function _ne(e){const t=vi(),r=e[0],i=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],h=e[10];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(i*i+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}function Sne(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const $ne=w9,xne=_9;Object.freeze(Object.defineProperty({__proto__:null,add:yne,adjoint:zie,copy:Die,determinant:Vie,equals:bne,exactEquals:wne,frob:mne,fromQuat:ane,fromQuat2:ene,fromRotation:Kie,fromRotationTranslation:b9,fromRotationTranslationScale:sne,fromRotationTranslationScaleOrigin:one,fromScaling:Jie,fromTranslation:Zie,fromXRotation:Yie,fromYRotation:Qie,fromZRotation:Xie,frustum:lne,getRotation:nne,getScaling:ine,getTranslation:rne,hasIdentityRotation:Sne,identity:uS,invert:v9,invertOrIdentity:jie,isOrthoNormal:_ne,lookAt:pne,mul:$ne,multiply:w9,multiplyScalar:gne,multiplyScalarAndAdd:vne,ortho:dne,perspective:une,perspectiveFromFieldOfView:cne,rotate:qie,rotateX:Bie,rotateY:Hie,rotateZ:Wie,scale:Gie,set:xu,str:fne,sub:xne,subtract:_9,targetTo:hne,translate:Uie,transpose:Tu},Symbol.toStringTag,{value:"Module"}));const Tne=(e,t)=>{const r=xu(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Tu(r,r)},Mne=(e,t)=>{const r=xu(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Tu(r,r)},Ene=(e,t)=>{const r=1-t,i=xu(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return Tu(i,i)},Ine=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),n=xu(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return Tu(n,n)},kne=(e,t)=>{const r=1-2*t,i=xu(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return Tu(i,i)},One=(e,t)=>{const r=xu(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Tu(r,r)},Pne=(e,t)=>{const r=1-t,i=xu(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return Tu(i,i)};let S9=class $9{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=ki(t.strength,r.strength,i),this.radius=ki(t.radius,r.radius,i),this.threshold=ki(t.threshold,r.threshold,i)}clone(){return new $9(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Ey(this.radius),strength:this.strength,threshold:this.threshold}}},x9=class T9{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(ki(t.radius,r.radius,i))}clone(){return new T9(this.radius)}toJSON(){return{type:"blur",radius:Ey(this.radius)}}},lM=class M9{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=ki(t.amount,r.amount,i),this._updateMatrix()}clone(){return new M9(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||lS();switch(this.type){case"brightness":this._colorMatrix=Tne(t,this.amount);break;case"contrast":this._colorMatrix=Mne(t,this.amount);break;case"grayscale":this._colorMatrix=Ene(t,this.amount);break;case"invert":this._colorMatrix=kne(t,this.amount);break;case"saturate":this._colorMatrix=One(t,this.amount);break;case"sepia":this._colorMatrix=Pne(t,this.amount)}}},E9=class I9{constructor(t,r,i,n){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=n,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=ki(t.offsetX,r.offsetX,i),this.offsetY=ki(t.offsetY,r.offsetY,i),this.blurRadius=ki(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(ki(t.color[0],r.color[0],i)),this.color[1]=Math.round(ki(t.color[1],r.color[1],i)),this.color[2]=Math.round(ki(t.color[2],r.color[2],i)),this.color[3]=ki(t.color[3],r.color[3],i)}clone(){return new I9(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Ey(this.offsetX),yoffset:Ey(this.offsetY),blurRadius:Ey(this.blurRadius),color:t}}},k9=class O9{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=ki(t.angle,r.angle,i),this._updateMatrix()}clone(){return new O9(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||lS();this._colorMatrix=Ine(t,this.angle)}},P9=class C9{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=ki(t.amount,r.amount,i)}clone(){return new C9(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function ki(e,t,r){return e+(t-e)*r}function Ey(e){return Math.round(1e3*Jn(e))/1e3}function Cne(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new lM(e.type,0);case"saturate":case"brightness":case"contrast":return new lM(e.type,1);case"opacity":return new P9(1);case"hue-rotate":return new k9(0);case"blur":return new x9(0);case"drop-shadow":return new E9(0,0,0,[...RO("transparent")]);case"bloom":return new S9(0,0,1)}}function Rne(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((i,n)=>i.type===r[n].type)}function Ane(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let n=i.length;n<r.length;n++)i.push(Cne(r[n]))}function Lne(e){const t=e[0];return!!t&&"type"in t}const wL=()=>H.getLogger("esri.support.basemapUtils");function Nne(){return{}}function Fne(e){for(const t in e){const r=e[t];xt(r),delete e[t]}}function Dne(e,t){let r;if(typeof e=="string"){const i=e in iM,n=!i&&e.includes("/");if(!i&&!n){const s=Object.entries(iM).filter(([o,a])=>He.apiKey&&!a.classic||!He.apiKey&&(a.classic||a.is3d)).map(([o])=>`"${o}"`).sort().join(", ");return wL().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${s}`),null}t&&(r=t[e]),r||(r=i?My.fromId(e):new My({style:{id:e}}),t&&(t[e]=r))}else r=Qt(My,e);return r!=null&&r.destroyed&&(wL().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function jne(e){return new v0({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function a$(e){for(const t of e.values())t==null||t.destroy();e.clear()}const bL={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function zne(e){let t=null;if(typeof e=="string")if(e in bL){const r=bL[e];t=new Fb({resourceInfo:{data:{layers:[r]}}})}else H.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Qt(Fb,e);return t}function Hh(e,t,r=!1){let{hasM:i,hasZ:n}=e;Array.isArray(t)?t.length!==4||i||n?t.length===3&&r&&!i?(n=!0,i=!1):t.length===3&&i&&n&&(i=!1,n=!1):(i=!0,n=!0):(n=!n&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=i}var uM;function _L(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function Vne(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let rl=uM=class extends La{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var n;if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):Vne(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=(n=r.points)==null?void 0:n[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new ct,r=this.hasZ,i=this.hasM,n=r?3:2,s=e[0],o=_L(Math.min),a=_L(Math.max);let l,c,h,f,[m,y]=s,[g,v]=s;for(let b=0,w=e.length;b<w;b++){const _=e[b],[$,E]=_;if(m=o(m,$),y=o(y,E),g=a(g,$),v=a(v,E),r&&_.length>2){const k=_[2];l=o(l,k),h=a(h,k)}if(i&&_.length>n){const k=_[n];c=o(c,k),f=a(f,k)}}return t.xmin=m,t.ymin=y,t.xmax=g,t.ymax=v,t.spatialReference=this.spatialReference,r?(t.zmin=l,t.zmax=h):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=c,t.mmax=f):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=C(this.points)}addPoint(e){return Hh(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:C(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new uM(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new Oe(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Oe(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Hh(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};u([d({readOnly:!0})],rl.prototype,"cache",null),u([d()],rl.prototype,"extent",null),u([d({type:[[Number]],json:{write:{isRequired:!0}}})],rl.prototype,"points",void 0),u([X("points")],rl.prototype,"writePoints",null),rl=uM=u([T("esri.geometry.Multipoint")],rl),rl.prototype.toJSON.isDefaultToJSON=!0;const cS=rl;function zMe(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function Une(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var Db;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(Db||(Db={}));function jO(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}return Math.sqrt(r*r+i*i)}function Gne(e,t,r){const i=e[0]+r*(t[0]-e[0]),n=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,n,e[2]+r*(t[2]-e[2])]:[i,n]}function qne(e,t,r,i){return Bne(e,t,r[i],r[i+1])}function Bne(e,t,r,i){const[n,s]=t,[o,a]=r,[l,c]=i,h=l-o,f=c-a,m=h*h+f*f,y=(n-o)*h+(s-a)*f,g=Math.min(1,Math.max(0,y/m));return e[0]=o+h*g,e[1]=a+f*g,e}function VMe(e,t,r,i,n,s){let o=r,a=i,l=n-o,c=s-a;if(l!==0||c!==0){const h=((e-o)*l+(t-a)*c)/(l*l+c*c);h>1?(o=n,a=s):h>0&&(o+=l*h,a+=c*h)}return l=e-o,c=t-a,l*l+c*c}function R9(e,t){return Gne(e,t,.5)}function UMe(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=jO(e[i],e[i+1]);return r}function A9(e,t=Db.X,r=Db.Y){let i=0;const n=e.length;let s=e[0];for(let o=1;o<n;o++){const a=e[o];i+=(a[t]-s[t])*(a[r]+s[r]),s=a}if(!L9(e)){const o=e[0];i+=(o[t]-s[t])*(o[r]+s[r])}return i>=0}function L9(e){const t=e.length;return t<3||N_(e[0],e[t-1])}function GMe(e){"rings"in e&&(Hne(e),Wne(e))}function Hne(e){if(!("rings"in e))return!1;let t=!1;for(const r of e.rings)L9(r)||(r.push(r[0].slice()),t=!0);return t}function Wne(e){if(!("rings"in e)||e.rings.length===0||A9(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function qMe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function Zne(e){return e?Jne(e.rings,e.hasZ??!1):null}function Jne(e,t){if(!(e!=null&&e.length))return null;const r=[],i=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=N9(e[s],t,n);a&&i.push(a)}if(i.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){const s=e[0]&&e[0].length?Kne(e[0],t):null;if(!s)return null;r[0]=s[0],r[1]=s[1],t&&s.length>2&&(r[2]=s[2])}return r}function N9(e,t,r){let i=0,n=0,s=0,o=0,a=0;const l=e.length?e[0][0]:0,c=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let m=0;m<e.length;m++){const y=e[m],g=e[(m+1)%e.length],[v,b,w]=y,_=v-l,$=b-c,[E,k,M]=g,P=E-l,N=k-c,j=_*N-P*$;if(o+=j,i+=(_+P)*j,n+=($+N)*j,t&&y.length>2&&g.length>2){const G=w-h,W=M-h,ie=_*W-P*G;s+=(G+W)*ie,a+=ie}v<r[0]&&(r[0]=v),v>r[1]&&(r[1]=v),b<r[2]&&(r[2]=b),b>r[3]&&(r[3]=b),t&&(w<r[4]&&(r[4]=w),w>r[5]&&(r[5]=w))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[i/(6*o)+l,n/(6*o)+c,o];return t&&(r[4]===r[5]||a===0?(f[3]=(r[4]+r[5])/2,f[4]=0):(f[3]=s/(6*a)+h,f[4]=a)),f}function BMe(e,t){let r=0,i=0,n=0;e.nextPoint();const s=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const l=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const c=[e.x,e.y],[h,f]=l,m=h-s,y=f-o,[g,v]=c,b=g-s,w=v-o,_=m*w-b*y;n+=_,r+=(m+b)*_,i+=(y+w)*_,h<t[0]&&(t[0]=h),h>t[1]&&(t[1]=h),f<t[2]&&(t[2]=f),f>t[3]&&(t[3]=f)}return n>0&&(n*=-1),n?(n*=.5,[r/(6*n)+s,i/(6*n)+o,n]):null}function Kne(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let l=0,c=e.length;l<c-1;l++){const h=e[l],f=e[l+1];if(h&&f){r[0]=h[0],r[1]=h[1],i[0]=f[0],i[1]=f[1],t&&h.length>2&&f.length>2&&(r[2]=h[2],i[2]=f[2]);const m=jO(r,i);if(m){n+=m;const y=R9(h,f);s+=m*y[0],o+=m*y[1],t&&y.length>2&&(a+=m*y[2])}}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.length?e[0]:null}function Yne(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],n=[],s=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=N9(Une(e),e.hasZ,s);o&&n.push(o)}if(n.sort((o,a)=>{let l=o[2]-a[2];return l===0&&t&&(l=o[4]-a[4]),l}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],t&&(i[2]=n[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const o=e.pathSize?Qne(e):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function Qne(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;if(e.nextPoint()){let l=e.x,c=e.y,h=e.z;for(;e.nextPoint();){const f=e.x,m=e.y,y=e.z;r[0]=l,r[1]=c,i[0]=f,i[1]=m,t&&(r[2]=h,i[2]=y);const g=jO(r,i);if(g){n+=g;const v=R9(r,i);s+=g*v[0],o+=g*v[1],t&&v.length>2&&(a+=g*v[2])}l=f,c=m,h=y}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const Xne=1e-6;function HMe(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<Xne){const n=Yne(e);return n?[n[0],n[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)tse(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const ese=1/3;function tse(e,t,r){if(!e||!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,n=r.y;r.nextPoint();let s,o=r.x-i,a=r.y-n,l=0,c=0;for(;r.nextPoint();)l=r.x-i,c=r.y-n,s=.5*ese*(l*a-c*o),e[0]+=s*(o+l),e[1]+=s*(a+c),o=l,a=c;const h=r.getCurrentRingArea(),f=[i,n];return f[0]-=t[0],f[1]-=t[1],f[0]*=h,f[1]*=h,e[0]+=f[0],e[1]+=f[1],e}function Ai(e=ise){return[e[0],e[1],e[2],e[3]]}function F9(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function WMe(e,t,r,i,n=Ai()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function ZMe(e,t=Ai()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function JMe(e,t){return new ct({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function KMe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function YMe(e,t,r){if(t!=null)if("length"in t)cM(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else F9(r,e)}function D9(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function j9(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function QMe(e){return D9(e)*j9(e)}function XMe(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function eEe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function rse(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function tEe(e){return e?F9(e,SL):Ai(SL)}function cM(e){return e!=null&&e.length===4}function rEe(e,t){return cM(e)&&cM(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const SL=[1/0,1/0,-1/0,-1/0],ise=[0,0,0,0];function z9(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function V9(e){return e.points!==void 0}function U9(e){return e.x!==void 0&&e.y!==void 0}function G9(e){return e.paths!==void 0}function q9(e){return e.rings!==void 0}function B9(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const ql=B9(Math.min),Bl=B9(Math.max);function iEe(e,t){return G9(t)?Wh(e,t.paths,!1,!1):q9(t)?Wh(e,t.rings,!1,!1):V9(t)?zO(e,t.points,!1,!1,!1,!1):z9(t)?H9(e,t):(U9(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function nEe(e){let t,r,i,n;for(e.reset(),t=i=1/0,r=n=-1/0;e.nextPath();){const s=nse(e);t=Math.min(s[0],t),i=Math.min(s[1],i),r=Math.max(s[2],r),n=Math.max(s[3],n)}return Ai([t,i,r,n])}function nse(e){let t,r,i,n;for(t=i=1/0,r=n=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),n=Math.max(e.y,n);return Ai([t,i,r,n])}function sEe(e,t){return G9(t)?Wh(e,t.paths,!0,!1):q9(t)?Wh(e,t.rings,!0,!1):V9(t)?zO(e,t.points,!0,!1,!0,!1):z9(t)?H9(e,t,!0,!1,!0,!1):(U9(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Wh(e,t,r,i){const n=r?3:2;if(!t.length||!t[0].length)return null;let s,o,a,l,[c,h]=t[0][0],[f,m]=t[0][0];for(let y=0;y<t.length;y++){const g=t[y];for(let v=0;v<g.length;v++){const b=g[v],[w,_]=b;if(c=ql(c,w),h=ql(h,_),f=Bl(f,w),m=Bl(m,_),r&&b.length>2){const $=b[2];s=ql(s,$),o=Bl(o,$)}if(i&&b.length>n){const $=b[n];a=ql(s,$),l=Bl(o,$)}}}return r?i?(e[0]=c,e[1]=h,e[2]=s,e[3]=a,e[4]=f,e[5]=m,e[6]=o,e[7]=l,e.length=8,e):(e[0]=c,e[1]=h,e[2]=s,e[3]=f,e[4]=m,e[5]=o,e.length=6,e):i?(e[0]=c,e[1]=h,e[2]=a,e[3]=f,e[4]=m,e[5]=l,e.length=6,e):(e[0]=c,e[1]=h,e[2]=f,e[3]=m,e.length=4,e)}function H9(e,t,r,i,n,s){const o=t.xmin,a=t.xmax,l=t.ymin,c=t.ymax;let h=t.zmin,f=t.zmax,m=t.mmin,y=t.mmax;return n?(h=h||0,f=f||0,s?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=h,e[3]=m,e[4]=a,e[5]=c,e[6]=f,e[7]=y,e):(e[0]=o,e[1]=l,e[2]=h,e[3]=a,e[4]=c,e[5]=f,e)):s?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=m,e[3]=a,e[4]=c,e[5]=y,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=c,e)}function zO(e,t,r,i,n,s){const o=r?3:2,a=i&&s,l=r&&n;if(!t.length||!t[0].length)return null;let c,h,f,m,[y,g]=t[0],[v,b]=t[0];for(let w=0;w<t.length;w++){const _=t[w],[$,E]=_;if(y=ql(y,$),g=ql(g,E),v=Bl(v,$),b=Bl(b,E),l&&_.length>2){const k=_[2];c=ql(c,k),h=Bl(h,k)}if(a&&_.length>o){const k=_[o];f=ql(c,k),m=Bl(h,k)}}return n?(c=c||0,h=h||0,s?(f=f||0,m=m||0,e[0]=y,e[1]=g,e[2]=c,e[3]=f,e[4]=v,e[5]=b,e[6]=h,e[7]=m,e):(e[0]=y,e[1]=g,e[2]=c,e[3]=v,e[4]=b,e[5]=h,e)):s?(f=f||0,m=m||0,e[0]=y,e[1]=g,e[2]=f,e[3]=v,e[4]=b,e[5]=m,e):(e[0]=y,e[1]=g,e[2]=v,e[3]=b,e)}function sse(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function ose(e){return e.points!==void 0}function ase(e){return e.x!==void 0&&e.y!==void 0}function lse(e){return e.paths!==void 0}function use(e){return e.rings!==void 0}const VO=[];function W9(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function Z9(e,t,r,i,n,s){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:n,zmax:s}}function J9(e,t,r,i,n,s){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:n,mmax:s}}function K9(e,t,r,i,n,s,o,a){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:n,ymax:s,zmax:o,mmax:a}}function UO(e,t=!1,r=!1){return t?r?K9(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):Z9(e[0],e[1],e[2],e[3],e[4],e[5]):r?J9(e[0],e[1],e[2],e[3],e[4],e[5]):W9(e[0],e[1],e[2],e[3])}function oEe(e){return e?sse(e)?e:ase(e)?dse(e):use(e)?Y9(e):lse(e)?Q9(e):ose(e)?cse(e):null:null}function cse(e){const{hasZ:t,hasM:r,points:i}=e;return UO(zO(VO,i,t??!1,r??!1),t,r)}function dse(e){const{x:t,y:r,z:i,m:n}=e,s=n!=null;return i!=null?s?K9(t,r,i,n,t,r,i,n):Z9(t,r,i,t,r,i):s?J9(t,r,n,t,r,n):W9(t,r,t,r)}function Y9(e){const{hasZ:t,hasM:r,rings:i}=e,n=Wh(VO,i,t??!1,r??!1);return n?UO(n,t,r):null}function Q9(e){const{hasZ:t,hasM:r,paths:i}=e,n=Wh(VO,i,t??!1,r??!1);return n?UO(n,t,r):null}var M1;function $L(e){return!Array.isArray(e[0])}let Ws=M1=class extends La{static fromExtent(e){const t=e.clone().normalize(),r=e.spatialReference;let i=!1,n=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(n=!0);const s={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:r};return i&&(s.hasZ=!0),n&&(s.hasM=!0),new M1(s)}constructor(...e){super(...e),this.rings=[],this.type="polygon"}normalizeCtorArgs(e,t){var o,a;let r,i,n=null,s=null;return e&&!Array.isArray(e)?(n=e.rings??null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),r=e.hasZ,i=e.hasM):n=e,n=n||[],t=t||Pe.WGS84,n.length&&((o=n[0])==null?void 0:o[0])!=null&&typeof n[0][0]=="number"&&(n=[n]),s=(a=n[0])==null?void 0:a[0],s&&(r===void 0&&i===void 0?(r=s.length>2,i=s.length>3):r===void 0?r=i?s.length>3:s.length>2:i===void 0&&(i=r?s.length>3:s.length>2)),{rings:n,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=Zne(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Oe;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=Y9(this);if(!t)return null;const r=new ct(t);return r.spatialReference=e,r}get isSelfIntersecting(){return Ute(this.rings)}writeRings(e,t){t.rings=C(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if($L(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new M1;return e.spatialReference=this.spatialReference,e.rings=C(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([n,s,o,a],[l,c,h,f])=>n===l&&s===c&&(o==null&&h==null||o===h)&&(a==null&&f==null||a===f);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=e.rings[n];if(!N_(s,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=tS(e,this.spatialReference);return EO(this,t??e)}isClockwise(e){const t=$L(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e;return A9(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new Oe(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new Oe(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new Oe(r[0],r[1],r[2],r[3],this.spatialReference):new Oe(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Hh(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Oe(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new Oe(n,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(Hh(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],Ws.prototype,"cache",null),u([d({readOnly:!0})],Ws.prototype,"centroid",null),u([d({readOnly:!0})],Ws.prototype,"extent",null),u([d({readOnly:!0})],Ws.prototype,"isSelfIntersecting",null),u([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ws.prototype,"rings",void 0),u([X("rings")],Ws.prototype,"writeRings",null),Ws=M1=u([T("esri.geometry.Polygon")],Ws),Ws.prototype.toJSON.isDefaultToJSON=!0;const Pa=Ws;var dM;function pse(e){return!Array.isArray(e[0])}let il=dM=class extends La{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){var o,a;let r,i,n=null,s=null;return e&&!Array.isArray(e)?(n=e.paths??null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),r=e.hasZ,i=e.hasM):n=e,n=n||[],t=t||Pe.WGS84,n.length&&((o=n[0])==null?void 0:o[0])!=null&&typeof n[0][0]=="number"&&(n=[n]),s=(a=n[0])==null?void 0:a[0],s&&(r===void 0&&i===void 0?(r=s.length>2,i=!1):r===void 0?r=!i&&s.length>3:i===void 0&&(i=!r&&s.length>3)),{paths:n,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=Q9(this);if(!t)return null;const r=new ct(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=C(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(pse(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new dM;return e.spatialReference=this.spatialReference,e.paths=C(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new Oe(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new Oe(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new Oe(r[0],r[1],r[2],r[3],this.spatialReference):new Oe(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Hh(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new Oe(n,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Oe(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(Hh(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],il.prototype,"cache",null),u([d({readOnly:!0})],il.prototype,"extent",null),u([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],il.prototype,"paths",void 0),u([X("paths")],il.prototype,"writePaths",null),il=dM=u([T("esri.geometry.Polyline")],il),il.prototype.toJSON.isDefaultToJSON=!0;const Dn=il,hse=si()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),xL=si()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function X9(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function eV(e){return e.points!==void 0}function tV(e){return e.x!==void 0&&e.y!==void 0}function rV(e){return e.paths!==void 0}function wh(e){return e.rings!==void 0}function pu(e){return e==null?null:e instanceof La?e:tV(e)?Oe.fromJSON(e):rV(e)?Dn.fromJSON(e):wh(e)?Pa.fromJSON(e):eV(e)?cS.fromJSON(e):X9(e)?ct.fromJSON(e):null}function GO(e){return e?tV(e)?"esriGeometryPoint":rV(e)?"esriGeometryPolyline":wh(e)?"esriGeometryPolygon":X9(e)?"esriGeometryEnvelope":eV(e)?"esriGeometryMultipoint":null:null}const fse={esriGeometryPoint:Oe,esriGeometryPolyline:Dn,esriGeometryPolygon:Pa,esriGeometryEnvelope:ct,esriGeometryMultipoint:cS};function mse(e){return e&&fse[e]||null}const Ld={base:La,key:"type",typeMap:{extent:ct,multipoint:cS,point:Oe,polyline:Dn,polygon:Pa}};So(Ld);const TL=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Nd extends Error{}class yse extends Nd{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class gse extends Nd{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class vse extends Nd{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class rh extends Nd{}class iV extends Nd{constructor(t){super(`Invalid unit ${t}`)}}class Ci extends Nd{}class Wa extends Nd{constructor(){super("Zone is an abstract class")}}const oe="numeric",As="short",cn="long",jb={year:oe,month:oe,day:oe},nV={year:oe,month:As,day:oe},wse={year:oe,month:As,day:oe,weekday:As},sV={year:oe,month:cn,day:oe},oV={year:oe,month:cn,day:oe,weekday:cn},aV={hour:oe,minute:oe},lV={hour:oe,minute:oe,second:oe},uV={hour:oe,minute:oe,second:oe,timeZoneName:As},cV={hour:oe,minute:oe,second:oe,timeZoneName:cn},dV={hour:oe,minute:oe,hourCycle:"h23"},pV={hour:oe,minute:oe,second:oe,hourCycle:"h23"},hV={hour:oe,minute:oe,second:oe,hourCycle:"h23",timeZoneName:As},fV={hour:oe,minute:oe,second:oe,hourCycle:"h23",timeZoneName:cn},mV={year:oe,month:oe,day:oe,hour:oe,minute:oe},yV={year:oe,month:oe,day:oe,hour:oe,minute:oe,second:oe},gV={year:oe,month:As,day:oe,hour:oe,minute:oe},vV={year:oe,month:As,day:oe,hour:oe,minute:oe,second:oe},bse={year:oe,month:As,day:oe,weekday:As,hour:oe,minute:oe},wV={year:oe,month:cn,day:oe,hour:oe,minute:oe,timeZoneName:As},bV={year:oe,month:cn,day:oe,hour:oe,minute:oe,second:oe,timeZoneName:As},_V={year:oe,month:cn,day:oe,weekday:cn,hour:oe,minute:oe,timeZoneName:cn},SV={year:oe,month:cn,day:oe,weekday:cn,hour:oe,minute:oe,second:oe,timeZoneName:cn};class uf{get type(){throw new Wa}get name(){throw new Wa}get ianaName(){return this.name}get isUniversal(){throw new Wa}offsetName(t,r){throw new Wa}formatOffset(t,r){throw new Wa}offset(t){throw new Wa}equals(t){throw new Wa}get isValid(){throw new Wa}}let l$=null;class dS extends uf{static get instance(){return l$===null&&(l$=new dS),l$}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return PV(t,r,i)}formatOffset(t,r){return Iy(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let E1={};function _se(e){return E1[e]||(E1[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),E1[e]}const Sse={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function $se(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,n,s,o,a,l,c,h]=i;return[o,n,s,a,l,c,h]}function xse(e,t){const r=e.formatToParts(t),i=[];for(let n=0;n<r.length;n++){const{type:s,value:o}=r[n],a=Sse[s];s==="era"?i[a]=o:Ce(a)||(i[a]=parseInt(o,10))}return i}let pv={};class hn extends uf{static create(t){return pv[t]||(pv[t]=new hn(t)),pv[t]}static resetCache(){pv={},E1={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=hn.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return PV(t,r,i,this.name)}formatOffset(t,r){return Iy(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=_se(this.name);let[n,s,o,a,l,c,h]=i.formatToParts?xse(i,r):$se(i,r);a==="BC"&&(n=-Math.abs(n)+1);const m=hS({year:n,month:s,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let y=+r;const g=y%1e3;return y-=g>=0?g:1e3+g,(m-y)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let ML={};function Tse(e,t={}){const r=JSON.stringify([e,t]);let i=ML[r];return i||(i=new Intl.ListFormat(e,t),ML[r]=i),i}let pM={};function hM(e,t={}){const r=JSON.stringify([e,t]);let i=pM[r];return i||(i=new Intl.DateTimeFormat(e,t),pM[r]=i),i}let fM={};function Mse(e,t={}){const r=JSON.stringify([e,t]);let i=fM[r];return i||(i=new Intl.NumberFormat(e,t),fM[r]=i),i}let mM={};function Ese(e,t={}){const{base:r,...i}=t,n=JSON.stringify([e,i]);let s=mM[n];return s||(s=new Intl.RelativeTimeFormat(e,t),mM[n]=s),s}let _m=null;function Ise(){return _m||(_m=new Intl.DateTimeFormat().resolvedOptions().locale,_m)}let EL={};function kse(e){let t=EL[e];if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,EL[e]=t}return t}function Ose(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,n;try{i=hM(e).resolvedOptions(),n=e}catch{const l=e.substring(0,r);i=hM(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:o}=i;return[n,s,o]}}function Pse(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function Cse(e){const t=[];for(let r=1;r<=12;r++){const i=Me.utc(2009,r,1);t.push(e(i))}return t}function Rse(e){const t=[];for(let r=1;r<=7;r++){const i=Me.utc(2016,11,13+r);t.push(e(i))}return t}function hv(e,t,r,i){const n=e.listingMode();return n==="error"?null:n==="en"?r(t):i(t)}function Ase(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class Lse{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:s,...o}=i;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=Mse(t,a)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):WO(t,3);return sr(r,this.padTo)}}}class Nse{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&hn.create(a).valid?(n=a,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=hM(r,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Fse{constructor(t,r,i){this.opts={style:"long",...i},!r&&kV()&&(this.rtf=Ese(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):ioe(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const Dse={firstDay:1,minimalDays:4,weekend:[6,7]};class ut{static fromOpts(t){return ut.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,n,s=!1){const o=t||Jt.defaultLocale,a=o||(s?"en-US":Ise()),l=r||Jt.defaultNumberingSystem,c=i||Jt.defaultOutputCalendar,h=yM(n)||Jt.defaultWeekSettings;return new ut(a,l,c,h,o)}static resetCache(){_m=null,pM={},fM={},mM={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:n}={}){return ut.create(t,r,i,n)}constructor(t,r,i,n,s){const[o,a,l]=Ose(t);this.locale=o,this.numberingSystem=r||a||null,this.outputCalendar=i||l||null,this.weekSettings=n,this.intl=Pse(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Ase(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:ut.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,yM(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return hv(this,t,AV,()=>{const i=r?{month:t,day:"numeric"}:{month:t},n=r?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=Cse(s=>this.extract(s,i,"month"))),this.monthsCache[n][t]})}weekdays(t,r=!1){return hv(this,t,FV,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=r?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=Rse(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return hv(this,void 0,()=>DV,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Me.utc(2016,11,13,9),Me.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return hv(this,t,jV,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Me.utc(-40,1,1),Me.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const n=this.dtFormatter(t,r),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new Lse(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new Nse(t,this.intl,r)}relFormatter(t={}){return new Fse(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Tse(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:OV()?kse(this.locale):Dse}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let u$=null;class Fr extends uf{static get utcInstance(){return u$===null&&(u$=new Fr(0)),u$}static instance(t){return t===0?Fr.utcInstance:new Fr(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new Fr(fS(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Iy(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Iy(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return Iy(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class jse extends uf{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function jl(e,t){if(Ce(e)||e===null)return t;if(e instanceof uf)return e;if(Use(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?dS.instance:r==="utc"||r==="gmt"?Fr.utcInstance:Fr.parseSpecifier(r)||hn.create(e)}else return ed(e)?Fr.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new jse(e)}let IL=()=>Date.now(),kL="system",OL=null,PL=null,CL=null,RL=60,AL,LL=null;class Jt{static get now(){return IL}static set now(t){IL=t}static set defaultZone(t){kL=t}static get defaultZone(){return jl(kL,dS.instance)}static get defaultLocale(){return OL}static set defaultLocale(t){OL=t}static get defaultNumberingSystem(){return PL}static set defaultNumberingSystem(t){PL=t}static get defaultOutputCalendar(){return CL}static set defaultOutputCalendar(t){CL=t}static get defaultWeekSettings(){return LL}static set defaultWeekSettings(t){LL=yM(t)}static get twoDigitCutoffYear(){return RL}static set twoDigitCutoffYear(t){RL=t%100}static get throwOnInvalid(){return AL}static set throwOnInvalid(t){AL=t}static resetCaches(){ut.resetCache(),hn.resetCache()}}class Ss{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const $V=[0,31,59,90,120,151,181,212,243,273,304,334],xV=[0,31,60,91,121,152,182,213,244,274,305,335];function jn(e,t){return new Ss("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function qO(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function TV(e,t,r){return r+(ig(e)?xV:$V)[t-1]}function MV(e,t){const r=ig(e)?xV:$V,i=r.findIndex(s=>s<t),n=t-r[i];return{month:i+1,day:n}}function BO(e,t){return(e-t+7)%7+1}function zb(e,t=4,r=1){const{year:i,month:n,day:s}=e,o=TV(i,n,s),a=BO(qO(i,n,s),r);let l=Math.floor((o-a+14-t)/7),c;return l<1?(c=i-1,l=w0(c,t,r)):l>w0(i,t,r)?(c=i+1,l=1):c=i,{weekYear:c,weekNumber:l,weekday:a,...mS(e)}}function NL(e,t=4,r=1){const{weekYear:i,weekNumber:n,weekday:s}=e,o=BO(qO(i,1,t),r),a=bh(i);let l=n*7+s-o-7+t,c;l<1?(c=i-1,l+=bh(c)):l>a?(c=i+1,l-=bh(i)):c=i;const{month:h,day:f}=MV(c,l);return{year:c,month:h,day:f,...mS(e)}}function c$(e){const{year:t,month:r,day:i}=e,n=TV(t,r,i);return{year:t,ordinal:n,...mS(e)}}function FL(e){const{year:t,ordinal:r}=e,{month:i,day:n}=MV(t,r);return{year:t,month:i,day:n,...mS(e)}}function DL(e,t){if(!Ce(e.localWeekday)||!Ce(e.localWeekNumber)||!Ce(e.localWeekYear)){if(!Ce(e.weekday)||!Ce(e.weekNumber)||!Ce(e.weekYear))throw new rh("Cannot mix locale-based week fields with ISO-based week fields");return Ce(e.localWeekday)||(e.weekday=e.localWeekday),Ce(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Ce(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function zse(e,t=4,r=1){const i=pS(e.weekYear),n=zn(e.weekNumber,1,w0(e.weekYear,t,r)),s=zn(e.weekday,1,7);return i?n?s?!1:jn("weekday",e.weekday):jn("week",e.weekNumber):jn("weekYear",e.weekYear)}function Vse(e){const t=pS(e.year),r=zn(e.ordinal,1,bh(e.year));return t?r?!1:jn("ordinal",e.ordinal):jn("year",e.year)}function EV(e){const t=pS(e.year),r=zn(e.month,1,12),i=zn(e.day,1,Vb(e.year,e.month));return t?r?i?!1:jn("day",e.day):jn("month",e.month):jn("year",e.year)}function IV(e){const{hour:t,minute:r,second:i,millisecond:n}=e,s=zn(t,0,23)||t===24&&r===0&&i===0&&n===0,o=zn(r,0,59),a=zn(i,0,59),l=zn(n,0,999);return s?o?a?l?!1:jn("millisecond",n):jn("second",i):jn("minute",r):jn("hour",t)}function Ce(e){return typeof e>"u"}function ed(e){return typeof e=="number"}function pS(e){return typeof e=="number"&&e%1===0}function Use(e){return typeof e=="string"}function Gse(e){return Object.prototype.toString.call(e)==="[object Date]"}function kV(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function OV(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function qse(e){return Array.isArray(e)?e:[e]}function jL(e,t,r){if(e.length!==0)return e.reduce((i,n)=>{const s=[t(n),n];return i&&r(i[0],s[0])===i[0]?i:s},null)[1]}function Bse(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function Zh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function yM(e){if(e==null)return null;if(typeof e!="object")throw new Ci("Week settings must be an object");if(!zn(e.firstDay,1,7)||!zn(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!zn(t,1,7)))throw new Ci("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function zn(e,t,r){return pS(e)&&e>=t&&e<=r}function Hse(e,t){return e-t*Math.floor(e/t)}function sr(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function Ol(e){if(!(Ce(e)||e===null||e===""))return parseInt(e,10)}function Fu(e){if(!(Ce(e)||e===null||e===""))return parseFloat(e)}function HO(e){if(!(Ce(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function WO(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function ig(e){return e%4===0&&(e%100!==0||e%400===0)}function bh(e){return ig(e)?366:365}function Vb(e,t){const r=Hse(t-1,12)+1,i=e+(t-r)/12;return r===2?ig(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function hS(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function zL(e,t,r){return-BO(qO(e,1,t),r)+t-1}function w0(e,t=4,r=1){const i=zL(e,t,r),n=zL(e+1,t,r);return(bh(e)-i+n)/7}function gM(e){return e>99?e:e>Jt.twoDigitCutoffYear?1900+e:2e3+e}function PV(e,t,r,i=null){const n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function fS(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,n=r<0||Object.is(r,-0)?-i:i;return r*60+n}function CV(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Ci(`Invalid unit value ${e}`);return t}function Ub(e,t){const r={};for(const i in e)if(Zh(e,i)){const n=e[i];if(n==null)continue;r[t(i)]=CV(n)}return r}function Iy(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${sr(r,2)}:${sr(i,2)}`;case"narrow":return`${n}${r}${i>0?`:${i}`:""}`;case"techie":return`${n}${sr(r,2)}${sr(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function mS(e){return Bse(e,["hour","minute","second","millisecond"])}const Wse=["January","February","March","April","May","June","July","August","September","October","November","December"],RV=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Zse=["J","F","M","A","M","J","J","A","S","O","N","D"];function AV(e){switch(e){case"narrow":return[...Zse];case"short":return[...RV];case"long":return[...Wse];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const LV=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],NV=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Jse=["M","T","W","T","F","S","S"];function FV(e){switch(e){case"narrow":return[...Jse];case"short":return[...NV];case"long":return[...LV];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const DV=["AM","PM"],Kse=["Before Christ","Anno Domini"],Yse=["BC","AD"],Qse=["B","A"];function jV(e){switch(e){case"narrow":return[...Qse];case"short":return[...Yse];case"long":return[...Kse];default:return null}}function Xse(e){return DV[e.hour<12?0:1]}function eoe(e,t){return FV(t)[e.weekday-1]}function toe(e,t){return AV(t)[e.month-1]}function roe(e,t){return jV(t)[e.year<0?0:1]}function ioe(e,t,r="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&s){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${n[e][0]}`;case-1:return f?"yesterday":`last ${n[e][0]}`;case 0:return f?"today":`this ${n[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=n[e],h=i?l?c[1]:c[2]||c[1]:l?n[e][0]:e;return o?`${a} ${h} ago`:`in ${a} ${h}`}function VL(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const noe={D:jb,DD:nV,DDD:sV,DDDD:oV,t:aV,tt:lV,ttt:uV,tttt:cV,T:dV,TT:pV,TTT:hV,TTTT:fV,f:mV,ff:gV,fff:wV,ffff:_V,F:yV,FF:vV,FFF:bV,FFFF:SV};class Xr{static create(t,r={}){return new Xr(t,r)}static parseFormat(t){let r=null,i="",n=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),r=null,i="",n=!n):n||a===r?i+=a:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=a,r=a)}return i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(t){return noe[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return sr(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(y,g)=>this.loc.extract(t,y,g),o=y=>t.isOffsetFixed&&t.offset===0&&y.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,y.format):"",a=()=>i?Xse(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(y,g)=>i?toe(t,y):s(g?{month:y}:{month:y,day:"numeric"},"month"),c=(y,g)=>i?eoe(t,y):s(g?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),h=y=>{const g=Xr.macroTokenToFormatOpts(y);return g?this.formatWithSystemDefault(t,g):y},f=y=>i?roe(t,y):s({era:y},"era"),m=y=>{switch(y){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(t.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(t.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(t.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(y)}};return VL(Xr.parseFormat(r),m)}formatDurationFromString(t,r){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>c=>{const h=i(c);return h?this.num(l.get(h),c.length):c},s=Xr.parseFormat(r),o=s.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return VL(s,n(a))}}const zV=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function cf(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function df(...e){return t=>e.reduce(([r,i,n],s)=>{const[o,a,l]=s(t,n);return[{...r,...o},a||i,l]},[{},null,1]).slice(0,2)}function pf(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const n=r.exec(e);if(n)return i(n)}return[null,null]}function VV(...e){return(t,r)=>{const i={};let n;for(n=0;n<e.length;n++)i[e[n]]=Ol(t[r+n]);return[i,null,r+n]}}const UV=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,soe=`(?:${UV.source}?(?:\\[(${zV.source})\\])?)?`,ZO=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,GV=RegExp(`${ZO.source}${soe}`),JO=RegExp(`(?:T${GV.source})?`),ooe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,aoe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,loe=/(\d{4})-?(\d{3})/,uoe=VV("weekYear","weekNumber","weekDay"),coe=VV("year","ordinal"),doe=/(\d{4})-(\d\d)-(\d\d)/,qV=RegExp(`${ZO.source} ?(?:${UV.source}|(${zV.source}))?`),poe=RegExp(`(?: ${qV.source})?`);function _h(e,t,r){const i=e[t];return Ce(i)?r:Ol(i)}function hoe(e,t){return[{year:_h(e,t),month:_h(e,t+1,1),day:_h(e,t+2,1)},null,t+3]}function hf(e,t){return[{hours:_h(e,t,0),minutes:_h(e,t+1,0),seconds:_h(e,t+2,0),milliseconds:HO(e[t+3])},null,t+4]}function ng(e,t){const r=!e[t]&&!e[t+1],i=fS(e[t+1],e[t+2]),n=r?null:Fr.instance(i);return[{},n,t+3]}function sg(e,t){const r=e[t]?hn.create(e[t]):null;return[{},r,t+1]}const foe=RegExp(`^T?${ZO.source}$`),moe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function yoe(e){const[t,r,i,n,s,o,a,l,c]=e,h=t[0]==="-",f=l&&l[0]==="-",m=(y,g=!1)=>y!==void 0&&(g||y&&h)?-y:y;return[{years:m(Fu(r)),months:m(Fu(i)),weeks:m(Fu(n)),days:m(Fu(s)),hours:m(Fu(o)),minutes:m(Fu(a)),seconds:m(Fu(l),l==="-0"),milliseconds:m(HO(c),f)}]}const goe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function KO(e,t,r,i,n,s,o){const a={year:t.length===2?gM(Ol(t)):Ol(t),month:RV.indexOf(r)+1,day:Ol(i),hour:Ol(n),minute:Ol(s)};return o&&(a.second=Ol(o)),e&&(a.weekday=e.length>3?LV.indexOf(e)+1:NV.indexOf(e)+1),a}const voe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function woe(e){const[,t,r,i,n,s,o,a,l,c,h,f]=e,m=KO(t,n,i,r,s,o,a);let y;return l?y=goe[l]:c?y=0:y=fS(h,f),[m,new Fr(y)]}function boe(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const _oe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Soe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,$oe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function UL(e){const[,t,r,i,n,s,o,a]=e;return[KO(t,n,i,r,s,o,a),Fr.utcInstance]}function xoe(e){const[,t,r,i,n,s,o,a]=e;return[KO(t,a,r,i,n,s,o),Fr.utcInstance]}const Toe=cf(ooe,JO),Moe=cf(aoe,JO),Eoe=cf(loe,JO),Ioe=cf(GV),BV=df(hoe,hf,ng,sg),koe=df(uoe,hf,ng,sg),Ooe=df(coe,hf,ng,sg),Poe=df(hf,ng,sg);function Coe(e){return pf(e,[Toe,BV],[Moe,koe],[Eoe,Ooe],[Ioe,Poe])}function Roe(e){return pf(boe(e),[voe,woe])}function Aoe(e){return pf(e,[_oe,UL],[Soe,UL],[$oe,xoe])}function Loe(e){return pf(e,[moe,yoe])}const Noe=df(hf);function Foe(e){return pf(e,[foe,Noe])}const Doe=cf(doe,poe),joe=cf(qV),zoe=df(hf,ng,sg);function Voe(e){return pf(e,[Doe,BV],[joe,zoe])}const GL="Invalid Duration",HV={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Uoe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...HV},bn=146097/400,Jd=146097/4800,Goe={years:{quarters:4,months:12,weeks:bn/7,days:bn,hours:bn*24,minutes:bn*24*60,seconds:bn*24*60*60,milliseconds:bn*24*60*60*1e3},quarters:{months:3,weeks:bn/28,days:bn/4,hours:bn*24/4,minutes:bn*24*60/4,seconds:bn*24*60*60/4,milliseconds:bn*24*60*60*1e3/4},months:{weeks:Jd/7,days:Jd,hours:Jd*24,minutes:Jd*24*60,seconds:Jd*24*60*60,milliseconds:Jd*24*60*60*1e3},...HV},Gc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],qoe=Gc.slice(0).reverse();function Za(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new We(i)}function WV(e,t){let r=t.milliseconds??0;for(const i of qoe.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function qL(e,t){const r=WV(e,t)<0?-1:1;Gc.reduceRight((i,n)=>{if(Ce(t[n]))return i;if(i){const s=t[i]*r,o=e[n][i],a=Math.floor(s/o);t[n]+=a*r,t[i]-=a*o*r}return n},null),Gc.reduce((i,n)=>{if(Ce(t[n]))return i;if(i){const s=t[i]%1;t[i]-=s,t[n]+=s*e[i][n]}return n},null)}function Boe(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class We{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?Goe:Uoe;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||ut.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return We.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new Ci(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new We({values:Ub(t,We.normalizeUnit),loc:ut.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(ed(t))return We.fromMillis(t);if(We.isDuration(t))return t;if(typeof t=="object")return We.fromObject(t);throw new Ci(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=Loe(t);return i?We.fromObject(i,r):We.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=Foe(t);return i?We.fromObject(i,r):We.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new Ci("need to specify a reason the Duration is invalid");const i=t instanceof Ss?t:new Ss(t,r);if(Jt.throwOnInvalid)throw new vse(i);return new We({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new iV(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Xr.create(this.loc,i).formatDurationFromString(this,t):GL}toHuman(t={}){if(!this.isValid)return GL;const r=Gc.map(i=>{const n=this.values[i];return Ce(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=WO(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Me.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?WV(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=We.fromDurationLike(t),i={};for(const n of Gc)(Zh(r.values,n)||Zh(this.values,n))&&(i[n]=r.get(n)+this.get(n));return Za(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=We.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=CV(t(this.values[i],i));return Za(this,{values:r},!0)}get(t){return this[We.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...Ub(t,We.normalizeUnit)};return Za(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:n}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:n,conversionAccuracy:i};return Za(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return qL(this.matrix,t),Za(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Boe(this.normalize().shiftToAll().toObject());return Za(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>We.normalizeUnit(o));const r={},i={},n=this.toObject();let s;for(const o of Gc)if(t.indexOf(o)>=0){s=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;ed(n[o])&&(a+=n[o]);const l=Math.trunc(a);r[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else ed(n[o])&&(i[o]=n[o]);for(const o in i)i[o]!==0&&(r[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return qL(this.matrix,r),Za(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return Za(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of Gc)if(!r(this.values[i],t.values[i]))return!1;return!0}}const Kd="Invalid Interval";function Hoe(e,t){return!e||!e.isValid?Ht.invalid("missing or invalid start"):!t||!t.isValid?Ht.invalid("missing or invalid end"):t<e?Ht.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Ht{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new Ci("need to specify a reason the Interval is invalid");const i=t instanceof Ss?t:new Ss(t,r);if(Jt.throwOnInvalid)throw new gse(i);return new Ht({invalid:i})}static fromDateTimes(t,r){const i=Hf(t),n=Hf(r),s=Hoe(i,n);return s??new Ht({start:i,end:n})}static after(t,r){const i=We.fromDurationLike(r),n=Hf(t);return Ht.fromDateTimes(n,n.plus(i))}static before(t,r){const i=We.fromDurationLike(r),n=Hf(t);return Ht.fromDateTimes(n.minus(i),n)}static fromISO(t,r){const[i,n]=(t||"").split("/",2);if(i&&n){let s,o;try{s=Me.fromISO(i,r),o=s.isValid}catch{o=!1}let a,l;try{a=Me.fromISO(n,r),l=a.isValid}catch{l=!1}if(o&&l)return Ht.fromDateTimes(s,a);if(o){const c=We.fromISO(n,r);if(c.isValid)return Ht.after(s,c)}else if(l){const c=We.fromISO(i,r);if(c.isValid)return Ht.before(a,c)}}return Ht.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let n;return r!=null&&r.useLocaleWeeks?n=this.end.reconfigure({locale:i.locale}):n=this.end,n=n.startOf(t,r),Math.floor(n.diff(i,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?Ht.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(Hf).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),i=[];let{s:n}=this,s=0;for(;n<this.e;){const o=r[s]||this.e,a=+o>+this.e?this.e:o;i.push(Ht.fromDateTimes(n,a)),n=a,s+=1}return i}splitBy(t){const r=We.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(r.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(Ht.fromDateTimes(i,s)),i=s,n+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:Ht.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return Ht.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const n=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?r=l.time:(r&&+r!=+l.time&&n.push(Ht.fromDateTimes(r,l.time)),r=null);return Ht.merge(n)}difference(...t){return Ht.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Kd}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=jb,r={}){return this.isValid?Xr.create(this.s.loc.clone(r),t).formatInterval(this):Kd}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Kd}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Kd}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Kd}toFormat(t,{separator:r=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:Kd}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):We.invalid(this.invalidReason)}mapEndpoints(t){return Ht.fromDateTimes(t(this.s),t(this.e))}}class fv{static hasDST(t=Jt.defaultZone){const r=Me.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return hn.isValidZone(t)}static normalizeZone(t){return jl(t,Jt.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||ut.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||ut.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||ut.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||ut.create(r,i,s)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||ut.create(r,i,s)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||ut.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||ut.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return ut.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return ut.create(r,null,"gregory").eras(t)}static features(){return{relative:kV(),localeWeek:OV()}}}function BL(e,t){const r=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(We.fromMillis(i).as("days"))}function Woe(e,t,r){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=BL(l,c);return(h-h%7)/7}],["days",BL]],n={},s=e;let o,a;for(const[l,c]of i)r.indexOf(l)>=0&&(o=l,n[l]=c(e,t),a=s.plus(n),a>t?(n[l]--,e=s.plus(n),e>t&&(a=e,n[l]--,e=s.plus(n))):e=a);return[e,n,a,o]}function Zoe(e,t,r,i){let[n,s,o,a]=Woe(e,t,r);const l=t-n,c=r.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(o<t&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const h=We.fromObject(s,i);return c.length>0?We.fromMillis(l,i).shiftTo(...c).plus(h):h}const YO={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},HL={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Joe=YO.hanidec.replace(/[\[|\]]/g,"").split("");function Koe(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(YO.hanidec)!==-1)t+=Joe.indexOf(e[r]);else for(const n in HL){const[s,o]=HL[n];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}function Xn({numberingSystem:e},t=""){return new RegExp(`${YO[e||"latn"]}${t}`)}const Yoe="missing Intl.DateTimeFormat.formatToParts support";function Qe(e,t=r=>r){return{regex:e,deser:([r])=>t(Koe(r))}}const Qoe=" ",ZV=`[ ${Qoe}]`,JV=new RegExp(ZV,"g");function Xoe(e){return e.replace(/\./g,"\\.?").replace(JV,ZV)}function WL(e){return e.replace(/\./g,"").replace(JV," ").toLowerCase()}function es(e,t){return e===null?null:{regex:RegExp(e.map(Xoe).join("|")),deser:([r])=>e.findIndex(i=>WL(r)===WL(i))+t}}function ZL(e,t){return{regex:e,deser:([,r,i])=>fS(r,i),groups:t}}function mv(e){return{regex:e,deser:([t])=>t}}function eae(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tae(e,t){const r=Xn(t),i=Xn(t,"{2}"),n=Xn(t,"{3}"),s=Xn(t,"{4}"),o=Xn(t,"{6}"),a=Xn(t,"{1,2}"),l=Xn(t,"{1,3}"),c=Xn(t,"{1,6}"),h=Xn(t,"{1,9}"),f=Xn(t,"{2,4}"),m=Xn(t,"{4,6}"),y=b=>({regex:RegExp(eae(b.val)),deser:([w])=>w,literal:!0}),v=(b=>{if(e.literal)return y(b);switch(b.val){case"G":return es(t.eras("short"),0);case"GG":return es(t.eras("long"),0);case"y":return Qe(c);case"yy":return Qe(f,gM);case"yyyy":return Qe(s);case"yyyyy":return Qe(m);case"yyyyyy":return Qe(o);case"M":return Qe(a);case"MM":return Qe(i);case"MMM":return es(t.months("short",!0),1);case"MMMM":return es(t.months("long",!0),1);case"L":return Qe(a);case"LL":return Qe(i);case"LLL":return es(t.months("short",!1),1);case"LLLL":return es(t.months("long",!1),1);case"d":return Qe(a);case"dd":return Qe(i);case"o":return Qe(l);case"ooo":return Qe(n);case"HH":return Qe(i);case"H":return Qe(a);case"hh":return Qe(i);case"h":return Qe(a);case"mm":return Qe(i);case"m":return Qe(a);case"q":return Qe(a);case"qq":return Qe(i);case"s":return Qe(a);case"ss":return Qe(i);case"S":return Qe(l);case"SSS":return Qe(n);case"u":return mv(h);case"uu":return mv(a);case"uuu":return Qe(r);case"a":return es(t.meridiems(),0);case"kkkk":return Qe(s);case"kk":return Qe(f,gM);case"W":return Qe(a);case"WW":return Qe(i);case"E":case"c":return Qe(r);case"EEE":return es(t.weekdays("short",!1),1);case"EEEE":return es(t.weekdays("long",!1),1);case"ccc":return es(t.weekdays("short",!0),1);case"cccc":return es(t.weekdays("long",!0),1);case"Z":case"ZZ":return ZL(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return ZL(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return mv(/[a-z_+-/]{1,256}?/i);case" ":return mv(/[^\S\n\r]/);default:return y(b)}})(e)||{invalidReason:Yoe};return v.token=e,v}const rae={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function iae(e,t,r){const{type:i,value:n}=e;if(i==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const s=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let a=rae[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function nae(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function sae(e,t,r){const i=e.match(t);if(i){const n={};let s=1;for(const o in r)if(Zh(r,o)){const a=r[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(i.slice(s,s+l))),s+=l}return[i,n]}else return[i,{}]}function oae(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return Ce(e.z)||(r=hn.create(e.z)),Ce(e.Z)||(r||(r=new Fr(e.Z)),i=e.Z),Ce(e.q)||(e.M=(e.q-1)*3+1),Ce(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Ce(e.u)||(e.S=HO(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),r,i]}let d$=null;function aae(){return d$||(d$=Me.fromMillis(1555555555555)),d$}function lae(e,t){if(e.literal)return e;const r=Xr.macroTokenToFormatOpts(e.val),i=QV(r,t);return i==null||i.includes(void 0)?e:i}function KV(e,t){return Array.prototype.concat(...e.map(r=>lae(r,t)))}function YV(e,t,r){const i=KV(Xr.parseFormat(r),e),n=i.map(o=>tae(o,e)),s=n.find(o=>o.invalidReason);if(s)return{input:t,tokens:i,invalidReason:s.invalidReason};{const[o,a]=nae(n),l=RegExp(o,"i"),[c,h]=sae(t,l,a),[f,m,y]=h?oae(h):[null,null,void 0];if(Zh(h,"a")&&Zh(h,"H"))throw new rh("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:c,matches:h,result:f,zone:m,specificOffset:y}}}function uae(e,t,r){const{result:i,zone:n,specificOffset:s,invalidReason:o}=YV(e,t,r);return[i,n,s,o]}function QV(e,t){if(!e)return null;const i=Xr.create(t,e).dtFormatter(aae()),n=i.formatToParts(),s=i.resolvedOptions();return n.map(o=>iae(o,e,s))}const p$="Invalid DateTime",JL=864e13;function yv(e){return new Ss("unsupported zone",`the zone "${e.name}" is not supported`)}function h$(e){return e.weekData===null&&(e.weekData=zb(e.c)),e.weekData}function f$(e){return e.localWeekData===null&&(e.localWeekData=zb(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Du(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Me({...r,...t,old:r})}function XV(e,t,r){let i=e-t*60*1e3;const n=r.offset(i);if(t===n)return[i,t];i-=(n-t)*60*1e3;const s=r.offset(i);return n===s?[i,n]:[e-Math.min(n,s)*60*1e3,Math.max(n,s)]}function gv(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function I1(e,t,r){return XV(hS(e),t,r)}function KL(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:n,day:Math.min(e.c.day,Vb(i,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=We.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=hS(s);let[l,c]=XV(a,r,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function Bf(e,t,r,i,n,s){const{setZone:o,zone:a}=r;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=Me.fromObject(e,{...r,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return Me.invalid(new Ss("unparsable",`the input "${n}" can't be parsed as ${i}`))}function vv(e,t,r=!0){return e.isValid?Xr.create(ut.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function m$(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=sr(e.c.year,r?6:4),t?(i+="-",i+=sr(e.c.month),i+="-",i+=sr(e.c.day)):(i+=sr(e.c.month),i+=sr(e.c.day)),i}function YL(e,t,r,i,n,s){let o=sr(e.c.hour);return t?(o+=":",o+=sr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=":")):o+=sr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=sr(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=sr(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=sr(Math.trunc(-e.o/60)),o+=":",o+=sr(Math.trunc(-e.o%60))):(o+="+",o+=sr(Math.trunc(e.o/60)),o+=":",o+=sr(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const e7={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},cae={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},dae={ordinal:1,hour:0,minute:0,second:0,millisecond:0},t7=["year","month","day","hour","minute","second","millisecond"],pae=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],hae=["year","ordinal","hour","minute","second","millisecond"];function fae(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new iV(e);return t}function QL(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return fae(e)}}function XL(e,t){const r=jl(t.zone,Jt.defaultZone),i=ut.fromObject(t),n=Jt.now();let s,o;if(Ce(e.year))s=n;else{for(const c of t7)Ce(e[c])&&(e[c]=e7[c]);const a=EV(e)||IV(e);if(a)return Me.invalid(a);const l=r.offset(n);[s,o]=I1(e,l,r)}return new Me({ts:s,zone:r,loc:i,o})}function e4(e,t,r){const i=Ce(r.round)?!0:r.round,n=(o,a)=>(o=WO(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),s=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return n(s(r.unit),r.unit);for(const o of r.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(e>t?-0:0,r.units[r.units.length-1])}function t4(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}class Me{constructor(t){const r=t.zone||Jt.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new Ss("invalid input"):null)||(r.isValid?null:yv(r));this.ts=Ce(t.ts)?Jt.now():t.ts;let n=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[n,s]=[t.old.c,t.old.o];else{const a=r.offset(this.ts);n=gv(this.ts,a),i=Number.isNaN(n.year)?new Ss("invalid input"):null,n=i?null:n,s=i?null:a}this._zone=r,this.loc=t.loc||ut.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new Me({})}static local(){const[t,r]=t4(arguments),[i,n,s,o,a,l,c]=r;return XL({year:i,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,r]=t4(arguments),[i,n,s,o,a,l,c]=r;return t.zone=Fr.utcInstance,XL({year:i,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,r={}){const i=Gse(t)?t.valueOf():NaN;if(Number.isNaN(i))return Me.invalid("invalid input");const n=jl(r.zone,Jt.defaultZone);return n.isValid?new Me({ts:i,zone:n,loc:ut.fromObject(r)}):Me.invalid(yv(n))}static fromMillis(t,r={}){if(ed(t))return t<-JL||t>JL?Me.invalid("Timestamp out of range"):new Me({ts:t,zone:jl(r.zone,Jt.defaultZone),loc:ut.fromObject(r)});throw new Ci(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(ed(t))return new Me({ts:t*1e3,zone:jl(r.zone,Jt.defaultZone),loc:ut.fromObject(r)});throw new Ci("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=jl(r.zone,Jt.defaultZone);if(!i.isValid)return Me.invalid(yv(i));const n=ut.fromObject(r),s=Ub(t,QL),{minDaysInFirstWeek:o,startOfWeek:a}=DL(s,n),l=Jt.now(),c=Ce(r.specificOffset)?i.offset(l):r.specificOffset,h=!Ce(s.ordinal),f=!Ce(s.year),m=!Ce(s.month)||!Ce(s.day),y=f||m,g=s.weekYear||s.weekNumber;if((y||h)&&g)throw new rh("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&h)throw new rh("Can't mix ordinal dates with month/day");const v=g||s.weekday&&!y;let b,w,_=gv(l,c);v?(b=pae,w=cae,_=zb(_,o,a)):h?(b=hae,w=dae,_=c$(_)):(b=t7,w=e7);let $=!1;for(const G of b){const W=s[G];Ce(W)?$?s[G]=w[G]:s[G]=_[G]:$=!0}const E=v?zse(s,o,a):h?Vse(s):EV(s),k=E||IV(s);if(k)return Me.invalid(k);const M=v?NL(s,o,a):h?FL(s):s,[P,N]=I1(M,c,i),j=new Me({ts:P,zone:i,o:N,loc:n});return s.weekday&&y&&t.weekday!==j.weekday?Me.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${j.toISO()}`):j}static fromISO(t,r={}){const[i,n]=Coe(t);return Bf(i,n,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,n]=Roe(t);return Bf(i,n,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,n]=Aoe(t);return Bf(i,n,r,"HTTP",r)}static fromFormat(t,r,i={}){if(Ce(t)||Ce(r))throw new Ci("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,o=ut.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,c,h]=uae(o,t,r);return h?Me.invalid(h):Bf(a,l,i,`format ${r}`,t,c)}static fromString(t,r,i={}){return Me.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,n]=Voe(t);return Bf(i,n,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new Ci("need to specify a reason the DateTime is invalid");const i=t instanceof Ss?t:new Ss(t,r);if(Jt.throwOnInvalid)throw new yse(i);return new Me({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=QV(t,ut.fromObject(r));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(t,r={}){return KV(Xr.parseFormat(t),ut.fromObject(r)).map(n=>n.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?h$(this).weekYear:NaN}get weekNumber(){return this.isValid?h$(this).weekNumber:NaN}get weekday(){return this.isValid?h$(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?f$(this).weekday:NaN}get localWeekNumber(){return this.isValid?f$(this).weekNumber:NaN}get localWeekYear(){return this.isValid?f$(this).weekYear:NaN}get ordinal(){return this.isValid?c$(this.c).ordinal:NaN}get monthShort(){return this.isValid?fv.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?fv.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?fv.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?fv.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=hS(this.c),n=this.zone.offset(i-t),s=this.zone.offset(i+t),o=this.zone.offset(i-n*r),a=this.zone.offset(i-s*r);if(o===a)return[this];const l=i-o*r,c=i-a*r,h=gv(l,o),f=gv(c,a);return h.hour===f.hour&&h.minute===f.minute&&h.second===f.second&&h.millisecond===f.millisecond?[Du(this,{ts:l}),Du(this,{ts:c})]:[this]}get isInLeapYear(){return ig(this.year)}get daysInMonth(){return Vb(this.year,this.month)}get daysInYear(){return this.isValid?bh(this.year):NaN}get weeksInWeekYear(){return this.isValid?w0(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?w0(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:n}=Xr.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:n}}toUTC(t=0,r={}){return this.setZone(Fr.instance(t),r)}toLocal(){return this.setZone(Jt.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=jl(t,Jt.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(r||i){const s=t.offset(this.ts),o=this.toObject();[n]=I1(o,s,t)}return Du(this,{ts:n,zone:t})}else return Me.invalid(yv(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const n=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return Du(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=Ub(t,QL),{minDaysInFirstWeek:i,startOfWeek:n}=DL(r,this.loc),s=!Ce(r.weekYear)||!Ce(r.weekNumber)||!Ce(r.weekday),o=!Ce(r.ordinal),a=!Ce(r.year),l=!Ce(r.month)||!Ce(r.day),c=a||l,h=r.weekYear||r.weekNumber;if((c||o)&&h)throw new rh("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new rh("Can't mix ordinal dates with month/day");let f;s?f=NL({...zb(this.c,i,n),...r},i,n):Ce(r.ordinal)?(f={...this.toObject(),...r},Ce(r.day)&&(f.day=Math.min(Vb(f.year,f.month),f.day))):f=FL({...c$(this.c),...r});const[m,y]=I1(f,this.o,this.zone);return Du(this,{ts:m,o:y})}plus(t){if(!this.isValid)return this;const r=We.fromDurationLike(t);return Du(this,KL(this,r))}minus(t){if(!this.isValid)return this;const r=We.fromDurationLike(t).negate();return Du(this,KL(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},n=We.normalizeUnit(t);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(n==="weeks")if(r){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?Xr.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):p$}toLocaleString(t=jb,r={}){return this.isValid?Xr.create(this.loc.clone(r),t).formatDateTime(this):p$}toLocaleParts(t={}){return this.isValid?Xr.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=m$(this,o);return a+="T",a+=YL(this,o,r,i,n,s),a}toISODate({format:t="extended"}={}){return this.isValid?m$(this,t==="extended"):null}toISOWeekDate(){return vv(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+YL(this,o==="extended",r,t,i,s):null}toRFC2822(){return vv(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return vv(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?m$(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(r||t)&&(i&&(n+=" "),r?n+="z":t&&(n+="ZZ")),vv(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():p$}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return We.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=qse(r).map(We.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=Zoe(a,l,s,n);return o?c.negate():c}diffNow(t="milliseconds",r={}){return this.diff(Me.now(),t,r)}until(t){return this.isValid?Ht.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const n=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(r,i)<=n&&n<=s.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Me.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(n=t.unit,s=void 0),e4(r,this.plus(i),{...t,numeric:"always",units:n,unit:s})}toRelativeCalendar(t={}){return this.isValid?e4(t.base||Me.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Me.isDateTime))throw new Ci("min requires all arguments be DateTimes");return jL(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Me.isDateTime))throw new Ci("max requires all arguments be DateTimes");return jL(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:n=null,numberingSystem:s=null}=i,o=ut.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return YV(o,t,r)}static fromStringExplain(t,r,i={}){return Me.fromFormatExplain(t,r,i)}static get DATE_SHORT(){return jb}static get DATE_MED(){return nV}static get DATE_MED_WITH_WEEKDAY(){return wse}static get DATE_FULL(){return sV}static get DATE_HUGE(){return oV}static get TIME_SIMPLE(){return aV}static get TIME_WITH_SECONDS(){return lV}static get TIME_WITH_SHORT_OFFSET(){return uV}static get TIME_WITH_LONG_OFFSET(){return cV}static get TIME_24_SIMPLE(){return dV}static get TIME_24_WITH_SECONDS(){return pV}static get TIME_24_WITH_SHORT_OFFSET(){return hV}static get TIME_24_WITH_LONG_OFFSET(){return fV}static get DATETIME_SHORT(){return mV}static get DATETIME_SHORT_WITH_SECONDS(){return yV}static get DATETIME_MED(){return gV}static get DATETIME_MED_WITH_SECONDS(){return vV}static get DATETIME_MED_WITH_WEEKDAY(){return bse}static get DATETIME_FULL(){return wV}static get DATETIME_FULL_WITH_SECONDS(){return bV}static get DATETIME_HUGE(){return _V}static get DATETIME_HUGE_WITH_SECONDS(){return SV}}function Hf(e){if(Me.isDateTime(e))return e;if(e&&e.valueOf&&ed(e.valueOf()))return Me.fromJSDate(e);if(e&&typeof e=="object")return Me.fromObject(e);throw new Ci(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const To="system",$d="unknown",hu="UTC",mae=Intl.DateTimeFormat().resolvedOptions().timeZone,yae="shortOffset";function gae(e){return"timeZoneIANA"in e}function vae(e){return e.startsWith("UTC")}function Gb(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?k1(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?wae(r):null}}}}}function k1(e,t=To){return e?gae(e)?e.timeZoneIANA:bae(e,t):t}function wae(e){return{timeZoneIANA:e}}function bae(e,t=To){if(!e||!TL.has(e.timeZone))return t;const r=TL.get(e.timeZone);return vae(e.timeZone)||e.respectsDaylightSaving?r:_ae(r)}function _ae(e){const t=Me.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${Fr.instance(-r).formatOffset(0,"narrow")}`}function aEe(e,t,r,i,n){if(t&&n==="date")return{timeZone:hu,timeZoneName:void 0};const s=i.timeStyle||i.hour,o=r===$d;return{timeZone:o?n==="timestamp-offset"?void 0:e??hu:r,timeZoneName:o&&s?yae:void 0}}const Sae={year:void 0,month:void 0,day:void 0,weekday:void 0},$ae={hour:void 0,minute:void 0,second:void 0},r7={timeZone:hu},Gs={year:"numeric",month:"numeric",day:"numeric"},Wf={year:"numeric",month:"long",day:"numeric"},Zf={year:"numeric",month:"short",day:"numeric"},Jf={year:"numeric",month:"long",weekday:"long",day:"numeric"},Pl={hour:"numeric",minute:"numeric"},Yu={...Pl,second:"numeric"},i7={hourCycle:"h23"},Kf={...Pl,...i7},Yf={...Yu,...i7},n7={"short-date":Gs,"short-date-short-time":{...Gs,...Pl},"short-date-short-time-24":{...Gs,...Kf},"short-date-long-time":{...Gs,...Yu},"short-date-long-time-24":{...Gs,...Yf},"short-date-le":Gs,"short-date-le-short-time":{...Gs,...Pl},"short-date-le-short-time-24":{...Gs,...Kf},"short-date-le-long-time":{...Gs,...Yu},"short-date-le-long-time-24":{...Gs,...Yf},"long-month-day-year":Wf,"long-month-day-year-short-time":{...Wf,...Pl},"long-month-day-year-short-time-24":{...Wf,...Kf},"long-month-day-year-long-time":{...Wf,...Yu},"long-month-day-year-long-time-24":{...Wf,...Yf},"day-short-month-year":Zf,"day-short-month-year-short-time":{...Zf,...Pl},"day-short-month-year-short-time-24":{...Zf,...Kf},"day-short-month-year-long-time":{...Zf,...Yu},"day-short-month-year-long-time-24":{...Zf,...Yf},"long-date":Jf,"long-date-short-time":{...Jf,...Pl},"long-date-short-time-24":{...Jf,...Kf},"long-date-long-time":{...Jf,...Yu},"long-date-long-time-24":{...Jf,...Yf},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Pl,"long-time":Yu},xae=si()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),s7={ar:"ar-u-nu-latn-ca-gregory"};let vM=new WeakMap;const yS=n7["short-date-short-time"];function Tae(e){let t=vM.get(e);if(!t){const r=un(),i=s7[r]||r,n=XO(e.timeZone??To),s={...e,timeZone:n};t=new Intl.DateTimeFormat(i,s),vM.set(e,t)}return t}function lEe(e){return n7[e]}function QO(e,t=yS){return Tae(t).format(e)}function uEe(e,t=yS){return QO(new Date(e),{...t,...r7,...$ae})}function cEe(e,t=yS){return QO(new Date(`1970-01-01T${e}Z`),{...t,...r7,...Sae})}function dEe(e,t=yS){if(t.timeZone)return QO(new Date(e),t);const r=Me.fromISO(e,{setZone:!0}),i=un(),n=s7[i]??i,s=r.offset===0?hu:t.timeZone,o={...t,timeZone:s};return r.toLocaleString(o,{locale:n})}function XO(e){switch(e){case To:return mae;case $d:return hu;default:return e}}kO(()=>{vM=new WeakMap});const r4={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function y$(e,t,r,i=To){const n=new hn(XO(i)),s=Me.fromJSDate(e,{zone:n}),o=r==="decades"||r==="centuries"?"year":a7(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),s.plus({[o]:t}).toJSDate()}function pEe(e,t,r="milliseconds"){const i=e.getTime(),n=o7(t,r,"milliseconds");return new Date(i+n)}function i4(e,t,r=To){const i=new hn(XO(r)),n=Me.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const o=n.startOf("year"),{year:a}=o,l=a-a%(t==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=a7(t);return n.startOf(s).toJSDate()}function o7(e,t,r){return e===0?0:e*r4[t]/r4[r]}function a7(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var xn;let en=xn=class extends q{static get allTime(){return n4}static get empty(){return Mae}static fromArray(e){return new xn({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(xn.allTime)}get isEmpty(){return this.equals(xn.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new xn({end:this.end,start:this.start})}equals(e){var s,o,a,l;if(!e)return!1;const t=((s=this.start)==null?void 0:s.getTime())??this.start,r=((o=this.end)==null?void 0:o.getTime())??this.end,i=((a=e.start)==null?void 0:a.getTime())??e.start,n=((l=e.end)==null?void 0:l.getTime())??e.end;return t===i&&r===n}expandTo(e,t=To){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=i4(r,e,t));let i=this.end;if(i){const n=i4(i,e,t);i=i.getTime()===n.getTime()?n:y$(n,1,e,t)}return new xn({start:r,end:i})}intersection(e){var a,l,c,h;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return xn.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((a=this.start)==null?void 0:a.getTime())??-1/0,r=((l=this.end)==null?void 0:l.getTime())??1/0,i=((c=e.start)==null?void 0:c.getTime())??-1/0,n=((h=e.end)==null?void 0:h.getTime())??1/0;let s,o;return i>=t&&i<=r?s=i:t>=i&&t<=n&&(s=t),r>=i&&r<=n?o=r:n>=t&&n<=r&&(o=n),s==null||o==null||isNaN(s)||isNaN(o)?xn.empty:new xn({start:s===-1/0?null:new Date(s),end:o===1/0?null:new Date(o)})}offset(e,t,r=To){if(this.isEmpty||this.isAllTime)return this.clone();const i=new xn,{start:n,end:s}=this;return n!=null&&(i.start=y$(n,e,t,r)),s!=null&&(i.end=y$(s,e,t,r)),i}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return n4.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new xn({start:t,end:r})}};u([d({type:Date,json:{write:{allowNull:!0}}})],en.prototype,"end",void 0),u([J("end")],en.prototype,"readEnd",null),u([X("end")],en.prototype,"writeEnd",null),u([d({readOnly:!0,json:{read:!1}})],en.prototype,"isAllTime",null),u([d({readOnly:!0,json:{read:!1}})],en.prototype,"isEmpty",null),u([d({type:Date,json:{write:{allowNull:!0}}})],en.prototype,"start",void 0),u([J("start")],en.prototype,"readStart",null),u([X("start")],en.prototype,"writeStart",null),en=xn=u([T("esri.TimeExtent")],en);const n4=new en,Mae=new en({start:void 0,end:void 0}),Mo=en;let l7=0;const eP=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+l7++})}};return t=u([T("esri.core.Identifiable")],t),t},tP=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:l7++})}};return t=u([T("esri.core.Identifiable.NumericIdentifiable")],t),t};let s4=class extends eP(class{}){};s4=u([T("esri.core.Identifiable")],s4);async function Eae(e){var i;const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await ee(async()=>{const{fromItem:n}=await import("./portalLayers-CgbNLB8D.js").then(s=>s.p);return{fromItem:n}},__vite__mapDeps([8,9,10]));try{return await r(t)}catch(n){const s=t==null?void 0:t.portalItem,o=(s==null?void 0:s.id)||"unset",a=((i=s==null?void 0:s.portal)==null?void 0:i.url)||He.portalUrl;throw H.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",n),n}}let Iae=0,Zt=class extends Aa.EventedMixin(eP(ka)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new ct(-180,-90,180,90,Pe.WGS84),this.id=Date.now().toString(16)+"-layer-"+Iae++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Pe.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await ee(async()=>{const{fromUrl:i}=await import("./arcgisLayers-DPynYPf-.js");return{fromUrl:i}},__vite__mapDeps([11,9,10]))).fromUrl(r)}static fromPortalItem(t){return Eae(t)}initialize(){this.when().catch(t=>{Gi(t)||H.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return ii(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Ot(t,{query:{f:"json"},responseType:"json"})).data;throw new D("layer:no-attribution-data","Layer does not have attribution data")}};u([d({type:String})],Zt.prototype,"attributionDataUrl",void 0),u([d({type:ct})],Zt.prototype,"fullExtent",void 0),u([d({readOnly:!0})],Zt.prototype,"hasAttributionData",null),u([d({type:String,clonable:!1})],Zt.prototype,"id",void 0),u([d({type:Boolean,nonNullable:!0})],Zt.prototype,"legendEnabled",void 0),u([d({type:["show","hide","hide-children"]})],Zt.prototype,"listMode",void 0),u([d({type:Number,range:{min:0,max:1},nonNullable:!0})],Zt.prototype,"opacity",void 0),u([d({clonable:!1})],Zt.prototype,"parent",void 0),u([d({readOnly:!0})],Zt.prototype,"parsedUrl",null),u([d({type:Boolean,readOnly:!0})],Zt.prototype,"persistenceEnabled",void 0),u([d({type:Boolean})],Zt.prototype,"popupEnabled",void 0),u([d({type:Boolean})],Zt.prototype,"attributionVisible",void 0),u([d({type:Pe})],Zt.prototype,"spatialReference",void 0),u([d({type:String})],Zt.prototype,"title",void 0),u([d({readOnly:!0,json:{read:!1}})],Zt.prototype,"type",void 0),u([d()],Zt.prototype,"url",void 0),u([d({type:Mo})],Zt.prototype,"visibilityTimeExtent",void 0),u([d({type:Boolean,nonNullable:!0})],Zt.prototype,"visible",void 0),Zt=u([T("esri.layers.Layer")],Zt);const rP=Zt;function wM(e,t,r){let i,n;if(e)for(let s=0,o=e.length;s<o;s++){if(i=e.at(s),(i==null?void 0:i[t])===r)return i;if((i==null?void 0:i.type)==="group"&&(n=wM(i.layers,t,r),n))return n}}const kae=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new ce;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||H.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void H.getLogger(this).error("#add()","Cannot add layer to itself.");i(o.item)}),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}set layers(r){this._set("layers",lu(r,this._get("layers")))}add(r,i){const n=this.layers;if(i=n.getNextIndex(i),r instanceof rP){const s=r;s.parent===this?this.reorder(s,i):n.add(s,i)}else Su(r)?r.then(s=>{this.destroyed||this.add(s,i)}):H.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const n=this.layers;let s=n.getNextIndex(i);r.slice().forEach(o=>{o.parent!==this?(n.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(r){return wM(this.layers,"id",r)}findLayerByUid(r){return wM(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return u([d()],t.prototype,"layers",null),t=u([T("esri.support.LayersMixin")],t),t};function bM(e,t,r){if(e)for(let i=0,n=e.length;i<n;i++){const s=e.at(i);if(s[t]===r)return s;if((s==null?void 0:s.type)==="group"){const o=bM(s.tables,t,r);if(o)return o}}}const Oae=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new ce,this.addHandles([this.tables.on("after-add",i=>{const n=i.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&H.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",lu(r,this._get("tables")))}findTableById(r){return bM(this.tables,"id",r)}findTableByUid(r){return bM(this.tables,"uid",r)}};return u([d()],t.prototype,"tables",null),t=u([T("esri.support.TablesMixin")],t),t};let ns=class extends Oae(kae(Aa.EventedMixin(we))){constructor(t){super(t),this.allLayers=new v0({getCollections:()=>{var r,i,n;return[(r=this.basemap)==null?void 0:r.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:r=>"layers"in r?r.layers:null}),this.allTables=jne(this),this.basemap=null,this.editableLayers=new v0({getCollections:()=>[this.allLayers],itemFilterFunction:Oie}),this.ground=new Fb,this._basemapCache=Nne()}destroy(){Fne(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=xt(this.basemap),xt(this.ground),this._set("ground",null)}castBasemap(t){return Dne(t,this._basemapCache)}castGround(t){return zne(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(r=>r.id===t)}findTableById(t){return this.allTables.find(r=>r.id===t)}};u([d({readOnly:!0,dependsOn:[]})],ns.prototype,"allLayers",void 0),u([d({readOnly:!0})],ns.prototype,"allTables",void 0),u([d({type:My,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],ns.prototype,"basemap",void 0),u([et("basemap")],ns.prototype,"castBasemap",null),u([d({readOnly:!0})],ns.prototype,"editableLayers",void 0),u([d({type:Fb,nonNullable:!0})],ns.prototype,"ground",void 0),u([et("ground")],ns.prototype,"castGround",null),u([d()],ns.prototype,"undoRedo",void 0),ns=u([T("esri.Map")],ns);const u7=ns,dt=e=>{let t=class extends e{clone(){var l;const r=_i(this);r8(r,"unable to clone instance of non-accessor class");const i=r.metadata,n=r.store,s={},o=new Map;for(const c in i){const h=i[c],f=n==null?void 0:n.originOf(c),m=h.clonable;if(h.readOnly||m===!1||f!==Fe.USER&&f!==Fe.DEFAULTS&&f!==Fe.WEB_MAP&&f!==Fe.WEB_SCENE)continue;const y=this[c];let g=null;g=typeof m=="function"?m(y):m==="reference"?y:bT(y),y!=null&&g==null||(f===Fe.DEFAULTS?o.set(c,g):s[c]=g)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const c=(l=_i(a))==null?void 0:l.store;if(c)for(const[h,f]of o)c.set(h,f,Fe.DEFAULTS)}return a}};return t=u([T("esri.core.Clonable")],t),t};let _M=class extends dt(we){};_M=u([T("esri.core.Clonable")],_M);let Qu=class extends _M{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Qu.prototype,"row",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Qu.prototype,"column",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Qu.prototype,"rows",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Qu.prototype,"columns",void 0),Qu=u([T("esri.CameraLayout")],Qu);const c7=Qu;let Pae=class{constructor(t,r){this.min=t,this.max=r,this.range=r-t}normalize(t,r=0,i=!1){return o4(this.range,this.min,this.max,t,r,i)}clamp(t,r=0){return Rs(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+SM(this.range,t-r,i)}minimalMonotonic(t,r,i){return o4(this.range,t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,n=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(n)?i:n}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}};function o4(e,t,r,i,n=0,s=!1){return(i-=n)<t?i+=SM(e,t-i):i>r&&(i-=SM(e,i-r)),s&&i===r&&(i=t),i+n}function SM(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const Cae=new Pae(0,360);let Zs=class extends dt(q){constructor(...t){super(...t),this.position=new Oe([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new c7}normalizeCtorArgs(t,r,i,n){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const s={position:t};return r!=null&&(s.heading=r),i!=null&&(s.tilt=i),n!=null&&(s.fov=n),s}return t}writePosition(t,r,i,n){const s=t.clone();s.x=An(t.x||0),s.y=An(t.y||0),s.z=t.hasZ?An(t.z||0):t.z,r[i]=s.write({},n)}readPosition(t,r){const i=new Oe;return i.read(t,r),i.x=An(i.x||0),i.y=An(i.y||0),i.z=i.hasZ?An(i.z||0):i.z,i}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};u([d({type:Oe,json:{write:{isRequired:!0}}})],Zs.prototype,"position",void 0),u([X("position")],Zs.prototype,"writePosition",null),u([J("position")],Zs.prototype,"readPosition",null),u([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),et(e=>Cae.normalize(An(e)))],Zs.prototype,"heading",void 0),u([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),et(e=>Rs(An(e),-180,180))],Zs.prototype,"tilt",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Zs.prototype,"fov",void 0),u([d({type:c7,nonNullable:!0,json:{read:!1,write:!1}})],Zs.prototype,"layout",void 0),Zs=u([T("esri.Camera")],Zs);const Rae=Zs;var $M;let nl=$M=class extends q{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new $M({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};u([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:g$}}}}})],nl.prototype,"rotation",void 0),u([et("rotation")],nl.prototype,"castRotation",null),u([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:g$}}}}})],nl.prototype,"scale",void 0),u([d({types:Ld,json:{read:pu,write:!0,origins:{"web-scene":{read:pu,write:{overridePolicy:g$}}}}})],nl.prototype,"targetGeometry",void 0),u([d({type:Rae,json:{write:!0}})],nl.prototype,"camera",void 0),nl=$M=u([T("esri.Viewpoint")],nl);const Es=nl;function g$(){return{enabled:!this.camera}}let qb=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new X0,this._items=new Set}get length(){return ve(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return ve(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach(i=>{t(i)||this._items.delete(i)}),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){ve(this._observable),yield*this._items}};const d7=new FinalizationRegistry(e=>{e.close()});function Aae(e,t){d7.register(e,t,t)}function Lae(e){d7.unregister(e)}function p7(e,t){return new Proxy({},{get:(r,i,n)=>(...s)=>{let o,a;const l=s[s.length-1];return Nae(l)&&(o=l.signal,a=l.transferList,s.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),s,{transferList:a,signal:o})}})}function Nae(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const Fae={statsWorker:()=>ee(()=>import("./statsWorker-D7w9N5JQ.js"),__vite__mapDeps([12,13,14,15,16])),geometryEngineWorker:()=>ee(()=>import("./geometryEngineWorker-Dlunx-y-.js"),__vite__mapDeps([17,18,19,20])),CSVSourceWorker:()=>ee(()=>import("./CSVSourceWorker-CbuBLk2d.js"),__vite__mapDeps([21,22,20,23,24,25,26,27,28,29,30,31,32,33,13,14,15,16,34,35])),EdgeProcessingWorker:()=>ee(()=>import("./EdgeProcessingWorker-OcYg_pfN.js"),__vite__mapDeps([36,37,38,39,40,41,42,43,44,45,46])),ElevationSamplerWorker:()=>ee(()=>import("./ElevationSamplerWorker-CpCt9gny.js"),__vite__mapDeps([47,28,48,49,50,51,52,53,54,55,56,57,38,58])),FeatureServiceSnappingSourceWorker:()=>ee(()=>import("./FeatureServiceSnappingSourceWorker-CWImYPgv.js"),__vite__mapDeps([59,24,25,23,26,27,28,29,20,30,31,32,33,13,14,15,16,60,61,62,6])),GeoJSONSourceWorker:()=>ee(()=>import("./GeoJSONSourceWorker-DR0PJrQE.js"),__vite__mapDeps([63,25,23,26,24,27,28,29,20,30,31,32,33,13,14,15,16,64,22,35,65])),LercWorker:()=>ee(()=>import("./LercWorker-DTkBmVqg.js"),[]),MemorySourceWorker:()=>ee(()=>import("./MemorySourceWorker-CYSHG7Nc.js"),__vite__mapDeps([66,25,23,26,67,24,27,28,29,20,30,31,32,33,13,14,15,16,35,65,22])),PBFDecoderWorker:()=>ee(()=>import("./PBFDecoderWorker-CI-vvKb0.js"),__vite__mapDeps([68,25,23,26,60,61])),FeaturePipelineWorker:()=>ee(()=>import("./FeaturePipelineWorker-qwkLa5Zn.js"),__vite__mapDeps([69,70,71,72,73,74,45,75,46,76,77,23,78,79,80,40,81,32,29,25,26,20,82,83,84,85,86,87,88,30,31,33,13,14,15,16,62,60,61,89,64,22,35,65,90,91])),PointCloudWorker:()=>ee(()=>import("./PointCloudWorker-DGX8Sm17.js"),__vite__mapDeps([92,93,50,94,95,96,97,44,98,51,52,53,99])),RasterWorker:()=>ee(()=>import("./RasterWorker-BwAnAF1p.js"),__vite__mapDeps([100,101,102,103,104])),SceneLayerSnappingSourceWorker:()=>ee(()=>import("./SceneLayerSnappingSourceWorker-B-s3yNyV.js"),__vite__mapDeps([105,106,107,99,50,51,94,40,41,42,43,37,38,39,44,45,46])),SceneLayerWorker:()=>ee(()=>import("./SceneLayerWorker-DnKQKGU4.js"),__vite__mapDeps([108,57,48,55,107,99,50,51,94,109,52,97,44,110,111,112,80,98,93,53])),WFSSourceWorker:()=>ee(()=>import("./WFSSourceWorker-BxB32E5Q.js"),__vite__mapDeps([113,25,23,26,24,27,28,29,20,30,31,32,33,13,14,15,16,64,22,65,114,115])),WorkerTileHandler:()=>ee(()=>import("./WorkerTileHandler-CTf2i2DO.js"),__vite__mapDeps([116,117,78,79,118,119,73,61,85,70,120,121,45,46,86,77])),Lyr3DWorker:()=>ee(()=>import("./Lyr3DWorker-B2lUmV3R.js"),[])},h7="worker:port-closed";var Mr;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Mr||(Mr={}));let Dae=0;function f7(){return Dae++}function jae(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function b0(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function iP(e,t,r,i){if(t.type===Mr.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Mr.INVOKE&&t.type!==Mr.RESPONSE)return void e.postMessage(t);let n;if(jae(r)?(n=a4(r.transferList),t.data=r.result):(n=a4(i),t.data=r),n){if(F("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case Mr.INVOKE:throw o;case Mr.RESPONSE:return void iP(e,{type:Mr.RESPONSE,jobId:t.jobId,error:b0(o)})}}}e.postMessage(t,n)}else e.postMessage(t)}function _0(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function a4(e){if(!(e!=null&&e.length))return null;if(F("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!zae(r));return t.length?t:null}function zae(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function _Ee(e){try{return await e}catch(t){const r=(t==null?void 0:t.name)===h7;if(!(Gi(t)||r))throw t;return}}const{CLOSE:l4,ABORT:u4,INVOKE:c4,RESPONSE:Qf,OPEN_PORT:d4,ON:Vae}=Mr,Uae=2;let Gae=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Mr.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},fu=class lp{static connect(t,r){const i=new MessageChannel;let n;n=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new lp(i.port1,{channel:i,client:n,schedule:r});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),lp.clients.set(s,n),i.port2}static loadWorker(t){const r=Fae[t];return r?r():Promise.resolve(null)}constructor(t,r,i){this._port=t,this._jobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Gae(n=>this._onInvokeMessage(n)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:l4}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const n=i==null?void 0:i.signal,s=i==null?void 0:i.transferList;if(!this._port)return Promise.reject(new D(h7,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=f7();return new Promise((a,l)=>{if(Ia(n))return this._processWork(),void l(Yt());const c=Un(n,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),Pt(f.abortHandle),this._post({type:u4,jobId:o}),l(Yt()))}),h={resolve:a,reject:l,abortHandle:c,debugInfo:t};this._outJobs.set(o,h),this._post({type:c4,jobId:o,methodName:t,abortable:n!=null},r,s)})}createInvokeProxy(t){return p7(this,t)}on(t,r){const i=new MessageChannel;function n(s){r(s.data)}return this._port.postMessage({type:Mr.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",n),i.port1.start(),Xe(()=>{i.port1.postMessage({type:Mr.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:d4,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=Uae)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:r,data:i,invokeOptions:n,resolver:s}=t;this.apply(r,i,n).then(a=>s.resolve(a)).catch(a=>s.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Pt(t.abortHandle),t.reject(Yt(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,r){const i=_0(t);if(i)switch(i.type){case Qf:this._onResponseMessage(i);break;case c4:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case u4:this._onAbortMessage(i);break;case l4:this._onCloseMessage();break;case d4:this._onOpenPortMessage(i);break;case Vae:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&lp.clients.get(this)===t&&t.destroy(),lp.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n=[],abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,h=c[r];try{if(!h&&r&&r.includes(".")){const f=r.split(".");for(let m=0;m<f.length-1;m++)c=c[f[m]],h=c[f[m+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);n.push({client:this,signal:o?o.signal:null}),l=h.apply(c,n)}catch(f){return void this._post({type:Qf,jobId:i,error:b0(f)})}Su(l)?(a.set(i,{controller:o,promise:l}),l.then(f=>{a.has(i)&&(a.delete(i),this._post({type:Qf,jobId:i},f))},f=>{a.has(i)&&(a.delete(i),Gi(f)||this._post({type:Qf,jobId:i,error:b0(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:Qf,jobId:i},l)}_onOpenPortMessage(t){new lp(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,s=>{r.postMessage(s)}),n=K0(t.port,"message",s=>{const o=_0(s);(o==null?void 0:o.type)===Mr.CLOSE&&(n.remove(),i.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs;if(!s.has(r))return;const o=s.get(r);s.delete(r),this._processWork(),Pt(o.abortHandle),i?o.reject(D.fromJSON(JSON.parse(i))):o.resolve(n)}_post(t,r,i){return iP(this._port,t,r,i)}};fu.kernelInfo={buildDate:oz,fullVersion:gO,revision:az},fu.clients=new Map;let qae=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new qb}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,r){return new Promise((i,n)=>{let s=!0;const o=a=>{Ct(r.signal),s&&(s=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];Su(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new fu(c,r,this._ongoingJobsQueue),o(i),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new fu(l,r,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(i))}})}broadcast(t,r,i){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a==null?void 0:a.invoke(t,r,i))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(Yt(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(i=>i==null?void 0:i.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,Lae(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const n=pn();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:i,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(a=>a==null?void 0:a.jobAdded())}return n.promise}createInvokeProxy(t){return p7(this,t)}on(t,r){return Promise.all(this._clientPromises).then(()=>W0(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(r[n]=s.openPort()),--i==0&&t(r)})})}get test(){}};const Bae={async request(e,t){var o,a;const r=e.options,i=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&((o=FT(e.url))!=null&&o.after)?i:"array-buffer";const n=await Ot(e.url,r),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((a=n.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},Hae={ar:"ar-u-nu-latn"};let O1=new WeakMap,m7={};function Wae(e){const t=e||m7;if(!O1.has(t)){const r=un(),i=Hae[un()]||r;O1.set(t,new Intl.NumberFormat(i,e))}return O1.get(t)}function xEe(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function TEe(e,t){return Object.is(e,-0)&&(e=0),Wae(t).format(e)}kO(()=>{O1=new WeakMap,m7={}});async function Zae(e,t,r,i){const n=t.exec(r);if(!n)throw new D("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=are(i),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let h;try{h=await p4(e(c))}catch(f){if(c===l)throw new D("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{h=await p4(e(l))}catch(m){throw new D("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:m})}}return h}async function p4(e){if(h4.fetchBundleAsset!=null)return h4.fetchBundleAsset(e);const t=await Ot(e,{responseType:"text"});return JSON.parse(t.data)}let Jae=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let n;n=typeof i=="string"?s=>new URL(s,new URL(i,window.location.href)).href:i instanceof URL?s=>new URL(s,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return Zae(this.getAssetUrl,this.matcher,t,r)}};function Kae(e){return new Jae(e)}const h4={};ore(Kae({pattern:"esri/",location:Ye}));const f4={};function Yae(e){var r;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((r=e.packages)==null?void 0:r.concat())||[],paths:{...f4.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=f4.baseUrl),t}let Qae=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}},P1=class{constructor(){this._dispatcher=new Qae,this._workerPostMessage({type:Mr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){db(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){db(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=_0(t);if(r&&r.type===Mr.OPEN){const{modulePath:i,jobId:n}=r;let s=await fu.loadWorker(i);s||(s=await import(i));const o=fu.connect(s);this._workerPostMessage({type:Mr.OPENED,jobId:n,data:o})}}};const xM=()=>H.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Xae}=Mr,ele='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let wv,bv;const m4="Failed to create Worker. Fallback to execute module in main thread";async function tle(){if(!F("esri-workers"))return y4(new P1);if(!wv&&!bv)try{const t=ele.split("{CONFIGURATION}").join(rle());wv=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){bv=t||{}}let e;if(wv)try{e=new Worker(wv,{name:"esri-worker-"+ile++})}catch{xM().warn(m4,bv),e=new P1}else xM().warn(m4,bv),e=new P1;return y4(e)}async function y4(e){return new Promise(t=>{function r(n){const s=_0(n);s&&s.type===Xae&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(n){n.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),xM().warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new P1).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function rle(){let e;if(He.default!=null){const n={...He};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(He));e.assetsPath=Nn(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Nn(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=un(),e.has={"esri-csp-restrictions":F("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":F("esri-2d-update-debug"),"esri-2d-log-updating":F("esri-2d-log-updating"),"featurelayer-pbf":F("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":F("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":F("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":F("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":F("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":F("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":F("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":F("featurelayer-snapshot-enabled"),"esri-atomics":F("esri-atomics"),"esri-shared-array-buffer":F("esri-shared-array-buffer"),"esri-tiles-debug":F("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":F("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":F("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Nn(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Nn(e.workers.workerPath):e.workers.workerPath=Nn(Ye("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=He.workers.loaderConfig,r=Yae({baseUrl:t==null?void 0:t.baseUrl,locale:un(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:oz,fullVersion:gO,revision:az}})}let ile=0;const{ABORT:g4,INVOKE:nle,OPEN:sle,OPENED:ole,RESPONSE:Xf}=Mr;let ale=class y7{static async create(t){const r=await tle();return new y7(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),H.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,n=f7();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:eO(i,()=>{this._outJobs.delete(n),this._post({type:g4,jobId:n})})};this._outJobs.set(n,a),this._post({type:sle,jobId:n,modulePath:t})})}_onMessage(t){const r=_0(t);if(r)switch(r.type){case ole:this._onOpenedMessage(r);break;case Xf:this._onResponseMessage(r);break;case g4:this._onAbortMessage(r);break;case nle:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);n&&(n.controller&&n.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,l=Bae[r];let c;try{if(typeof l!="function")throw new TypeError(`${r} is not a function`);c=l.call(null,n,{signal:o?o.signal:null})}catch(h){return void this._post({type:Xf,jobId:i,error:b0(h)})}Su(c)?(a.set(i,{controller:o,promise:c}),c.then(h=>{a.has(i)&&(a.delete(i),this._post({type:Xf,jobId:i},h))},h=>{a.has(i)&&(a.delete(i),h||(h={message:"Error encountered at method"+r}),Gi(h)||this._post({type:Xf,jobId:i,error:b0(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:Xf,jobId:i},c)}_onOpenedMessage(t){const{jobId:r,data:i}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),Pt(n.abortHandle),n.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),Pt(s.abortHandle),i?s.reject(D.fromJSON(JSON.parse(i))):s.resolve(n))}_post(t,r,i){return iP(this.worker,t,r,i)}};const v4=F("host-browser")?Math.min(navigator.hardwareConcurrency-1,F("workers-pool-size")):0;let qc=F("esri-mobile")?Math.min(v4,3):v4;qc||(qc=F("safari")&&F("mac")?7:2);let w4=0;const C1=[];function lle(){g7()}async function _v(e,t){const r=new qae,{registryTarget:i,...n}=t;return await r.open(e,n),i&&Aae(i,r),r}async function ule(e,t={}){if(typeof e!="string")throw new D("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(F("host-webworker")&&!F("esri-workers")&&(r="local"),r==="local"){let i=await fu.loadWorker(e);i||(i=await import(e)),Ct(t.signal);const n=t.client||i;return _v([fu.connect(i,t.schedule)],{...t,client:n})}if(await g7(),Ct(t.signal),r==="dedicated"){const i=w4++%qc;return _v([await C1[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,qc);if(i<qc){const n=new Array(i);for(let s=0;s<i;++s){const o=w4++%qc;n[s]=C1[o].open(e,t)}return _v(n,t)}}return _v(C1.map(i=>i.open(e,t)),t)}let Sv=null;async function g7(){if(Sv)return Sv;new AbortController;const e=[];for(let t=0;t<qc;t++){const r=ale.create(t).then(i=>(C1[t]=i,i));e.push(r)}return Sv=Promise.all(e),Sv}const Ja=Vt.radius,ts=Vt.eccentricitySquared,cle={a1:Ja*ts,a2:Ja*ts*Ja*ts,a3:Ja*ts*ts/2,a4:Ja*ts*Ja*ts*2.5,a5:Ja*ts+Ja*ts*ts/2,a6:1-ts};1/294.9786982,1/298.257222101,Vt.radius,Vt.flattening,1/298.257222101,uu.radius,uu.flattening,1/192.0430107526882,bo.radius,bo.flattening,1/10.2079945799458,1/43.61604095563141,bo.radius;var A;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(A||(A={}));const dle={[A.WGS84]:{[A.CGCS2000]:St,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:St,[A.SPHERICAL_ECEF]:Oy,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:Sh,[A.PLATE_CARREE]:$h,[A.WGS84]:St,[A.WGS84_ECEF]:Mh},[A.CGCS2000]:{[A.CGCS2000]:St,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:St,[A.SPHERICAL_ECEF]:Oy,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:Sh,[A.PLATE_CARREE]:$h,[A.WGS84]:St,[A.WGS84_ECEF]:Mh},[A.GCSMARS2000]:{[A.CGCS2000]:null,[A.GCSMARS2000]:St,[A.GCSMOON2000]:null,[A.LON_LAT]:St,[A.SPHERICAL_ECEF]:null,[A.SPHERICAL_MARS_PCPF]:S4,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:null,[A.PLATE_CARREE]:null,[A.WGS84]:null,[A.WGS84_ECEF]:null},[A.GCSMOON2000]:{[A.CGCS2000]:null,[A.GCSMARS2000]:null,[A.GCSMOON2000]:St,[A.LON_LAT]:St,[A.SPHERICAL_ECEF]:null,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:_4,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:null,[A.PLATE_CARREE]:null,[A.WGS84]:null,[A.WGS84_ECEF]:null},[A.WEB_MERCATOR]:{[A.CGCS2000]:ky,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:ky,[A.SPHERICAL_ECEF]:ple,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:St,[A.PLATE_CARREE]:mle,[A.WGS84]:ky,[A.WGS84_ECEF]:hle},[A.WGS84_ECEF]:{[A.CGCS2000]:Eh,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:Eh,[A.SPHERICAL_ECEF]:xle,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:Tle,[A.PLATE_CARREE]:yle,[A.WGS84]:Eh,[A.WGS84_ECEF]:St},[A.SPHERICAL_ECEF]:{[A.CGCS2000]:Th,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:Th,[A.SPHERICAL_ECEF]:St,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:_le,[A.PLATE_CARREE]:gle,[A.WGS84]:Th,[A.WGS84_ECEF]:Sle},[A.SPHERICAL_MARS_PCPF]:{[A.CGCS2000]:null,[A.GCSMARS2000]:x4,[A.GCSMOON2000]:null,[A.LON_LAT]:x4,[A.SPHERICAL_ECEF]:null,[A.SPHERICAL_MARS_PCPF]:St,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:null,[A.PLATE_CARREE]:null,[A.WGS84]:null,[A.WGS84_ECEF]:null},[A.SPHERICAL_MOON_PCPF]:{[A.CGCS2000]:null,[A.GCSMARS2000]:null,[A.GCSMOON2000]:$4,[A.LON_LAT]:$4,[A.SPHERICAL_ECEF]:null,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:St,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:null,[A.PLATE_CARREE]:null,[A.WGS84]:null,[A.WGS84_ECEF]:null},[A.UNKNOWN]:{[A.CGCS2000]:null,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:null,[A.SPHERICAL_ECEF]:null,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:St,[A.WEB_MERCATOR]:null,[A.PLATE_CARREE]:null,[A.WGS84]:null,[A.WGS84_ECEF]:null},[A.LON_LAT]:{[A.CGCS2000]:St,[A.GCSMARS2000]:St,[A.GCSMOON2000]:St,[A.LON_LAT]:St,[A.SPHERICAL_ECEF]:Oy,[A.SPHERICAL_MARS_PCPF]:S4,[A.SPHERICAL_MOON_PCPF]:_4,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:Sh,[A.PLATE_CARREE]:$h,[A.WGS84]:St,[A.WGS84_ECEF]:Mh},[A.PLATE_CARREE]:{[A.CGCS2000]:xh,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:xh,[A.SPHERICAL_ECEF]:vle,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:wle,[A.PLATE_CARREE]:St,[A.WGS84]:xh,[A.WGS84_ECEF]:ble}};function v7(e,t,r=w7()){return e==null||t==null?null:Mle(e,t,r).projector}function b4(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Ad(e,1)),Cb(e)?t.spatialReferenceId=A.SPHERICAL_ECEF:yd(e)?t.spatialReferenceId=A.WGS84:xo(e)?t.spatialReferenceId=A.WEB_MERCATOR:Xee(e)?t.spatialReferenceId=A.PLATE_CARREE:e.wkt===ite.wkt?t.spatialReferenceId=A.WGS84_ECEF:e.wkid===md.CGCS2000?t.spatialReferenceId=A.CGCS2000:e.wkt===TO.wkt?t.spatialReferenceId=A.SPHERICAL_MARS_PCPF:e.wkt===MO.wkt?t.spatialReferenceId=A.SPHERICAL_MOON_PCPF:$z(e)?t.spatialReferenceId=A.GCSMARS2000:xz(e)?t.spatialReferenceId=A.GCSMOON2000:t.spatialReferenceId=A.UNKNOWN):A.UNKNOWN}function St(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function ky(e,t,r,i){r[i]=Kh*(e[t]/td),r[i+1]=Kh*(_7-2*Math.atan(Math.exp(-e[t+1]/td))),r[i+2]=e[t+2]}function ple(e,t,r,i){const n=e[t]/td,s=_7-2*Math.atan(Math.exp(-e[t+1]/td)),o=td+e[t+2],a=Math.cos(s)*o;r[i]=Math.cos(n)*a,r[i+1]=Math.sin(n)*a,r[i+2]=Math.sin(s)*o}function hle(e,t,r,i){ky(e,t,r,i),Mh(r,i,r,i)}function fle(e,t,r,i,n){const s=.4999999*gS,o=Rs(Jh*e[t+1],-s,s),a=Math.sin(o);r[i++]=Jh*e[t]*n.radius,r[i++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[i]=e[t+2]}function Sh(e,t,r,i){fle(e,t,r,i,Vt)}function $h(e,t,r,i){r[i]=e[t]*T4,r[i+1]=e[t+1]*T4,r[i+2]=e[t+2]}function xh(e,t,r,i){r[i]=e[t]*M4,r[i+1]=e[t+1]*M4,r[i+2]=e[t+2]}function mle(e,t,r,i){ky(e,t,r,i),$h(r,i,r,i)}function yle(e,t,r,i){Eh(e,t,r,i),$h(r,i,r,i)}function gle(e,t,r,i){Th(e,t,r,i),$h(r,i,r,i)}function vle(e,t,r,i){xh(e,t,r,i),Oy(r,i,r,i)}function wle(e,t,r,i){xh(e,t,r,i),Sh(r,i,r,i)}function ble(e,t,r,i){xh(e,t,r,i),Mh(r,i,r,i)}function nP(e,t,r,i,n){const s=n+e[t+2],o=Jh*e[t+1],a=Jh*e[t],l=Math.cos(o)*s;r[i]=Math.cos(a)*l,r[i+1]=Math.sin(a)*l,r[i+2]=Math.sin(o)*s}function _4(e,t,r,i){nP(e,t,r,i,uu.radius)}function S4(e,t,r,i){nP(e,t,r,i,bo.radius)}function Oy(e,t,r,i){nP(e,t,r,i,Vt.radius)}function sP(e,t,r,i,n){const s=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(s*s+o*o+a*a),c=d9(a/(l===0?1:l)),h=Math.atan2(o,s);r[i++]=Kh*h,r[i++]=Kh*c,r[i]=l-n}function $4(e,t,r,i){sP(e,t,r,i,uu.radius)}function x4(e,t,r,i){sP(e,t,r,i,bo.radius)}function Th(e,t,r,i){sP(e,t,r,i,Vt.radius)}function _le(e,t,r,i){Th(e,t,r,i),Sh(r,i,r,i)}function Sle(e,t,r,i){Th(e,t,r,i),Mh(r,i,r,i)}function $le(e,t,r,i,n){const s=Jh*e[t],o=Jh*e[t+1],a=e[t+2],l=Math.sin(o),c=Math.cos(o),h=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);r[i++]=(h+a)*c*Math.cos(s),r[i++]=(h+a)*c*Math.sin(s),r[i++]=(h*(1-n.eccentricitySquared)+a)*l}function Mh(e,t,r,i){$le(e,t,r,i,Vt)}function Eh(e,t,r,i){const n=cle,s=e[t],o=e[t+1],a=e[t+2];let l,c,h,f,m,y,g,v,b,w,_,$,E,k,M,P,N,j,G,W,ie;l=Math.abs(a),c=s*s+o*o,h=Math.sqrt(c),f=c+a*a,m=Math.sqrt(f),W=Math.atan2(o,s),y=a*a/f,g=c/f,k=n.a2/m,M=n.a3-n.a4/m,g>.3?(v=l/m*(1+g*(n.a1+k+y*M)/m),G=Math.asin(v),w=v*v,b=Math.sqrt(1-w)):(b=h/m*(1-y*(n.a5-k-g*M)/m),G=Math.acos(b),w=1-b*b,v=Math.sqrt(w)),_=1-Vt.eccentricitySquared*w,$=Vt.radius/Math.sqrt(_),E=n.a6*$,k=h-$*b,M=l-E*v,N=b*k+v*M,P=b*M-v*k,j=P/(E/_+N),G+=j,ie=N+P*j/2,a<0&&(G=-G),r[i++]=Kh*W,r[i++]=Kh*G,r[i]=ie}function xle(e,t,r,i){Eh(e,t,r,i),Oy(r,i,r,i)}function Tle(e,t,r,i){Eh(e,t,r,i),Sh(r,i,r,i)}function Mle(e,t,r){if(e==null||t==null||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const i=b4(e,r.source),n=b4(t,r.dest);return i===A.UNKNOWN&&n===A.UNKNOWN?gr(e,t)?r.projector=St:r.projector=null:r.projector=dle[i][n],r}function w7(){return{source:{spatialReference:null,spatialReferenceId:A.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:A.UNKNOWN,metersPerUnit:1},projector:St}}const kEe={spatialReference:null,spatialReferenceId:A.UNKNOWN},OEe={spatialReference:null,spatialReferenceId:A.UNKNOWN},b7=w7(),Jh=oS(1),Kh=c9(1),gS=Math.PI,_7=.5*gS,td=Vt.radius,T4=td*gS/180,M4=180/(td*gS);function og(e,t,r,i,n,s,o=1){const a=v7(t,n,b7);if(a==null)return!1;if(a===St){if(e===i&&r===s)return!0;const c=r+3*o;for(let h=r,f=s;h<c;h++,f++)i[f]=e[h];return!0}const l=r+3*o;for(let c=r,h=s;c<l;c+=3,h+=3)a(e,c,i,h);return!0}const PEe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:og},Symbol.toStringTag,{value:"Module"}));function E4(e,t,r,i,n,s){return $v[0]=e,$v[1]=t,$v[2]=r,og($v,i,0,n,s,0,1)}const $v=$u();let xv=0,v$=class TM{static fromGE(t){const r=new TM;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=xv++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=xv++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=xv++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=xv++}getInverse(){const t=new TM;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},Bb=class Sm{static cacheKey(t,r){var i,n,s,o,a,l;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((n=t.wkt)==null?void 0:n.toString())??"",((s=t.wkt2)==null?void 0:s.toString())??"",((o=r.wkid)==null?void 0:o.toString())??"-1",((a=r.wkt)==null?void 0:a.toString())??"",((l=r.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(t){const r=new Sm;let i="";for(const n of t.steps){const s=v$.fromGE(n);r.steps.push(s),i+=s.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const r of t.steps)r instanceof v$?this.steps.push(r):this.steps.push(new v$({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new Sm;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[Sm.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const s of this.steps)i+=s.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const n=this._cachedProjection[Sm.cacheKey(t,r)];return n===void 0?null:n}};function S7(e,t,r){if(t==null||r==null||r.vcsWkid||gr(t,r)||cu(t)||cu(r))return null;const i=Rb(t)/Rb(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>Ele(n,i);case"polyline":case"esriGeometryPolyline":return n=>kle(n,i);case"polygon":case"esriGeometryPolygon":return n=>Ile(n,i);case"multipoint":case"esriGeometryMultipoint":return n=>Ole(n,i);case"extent":case"esriGeometryEnvelope":return n=>Ple(n,i);default:return null}}function Ele(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function Ile(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function kle(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function Ole(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function Ple(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Is=null,mu=null,Py=null,R1={};const oP=new X0;function Mu(){return!!Is&&$O()}function $7(){return!!Mu()||(ve(oP),yu(),!1)}function x7(e,t){return!e||!t||Eo(e,t)||$7()}function Cle(e,t){return!Eo(e,t)&&!Mu()}function yu(e){return Py==null&&(Py=Promise.all([gz(),ee(()=>import("./geometryEngineBase-hma4TUJT.js"),[]).then(t=>t.g),ee(()=>import("./hydrated-sDCY79Cf.js"),[])])),Py.then(([,t,{hydratedAdapter:r}])=>{Ct(e),mu=r,Is=t.default,Is._enableProjection(Jee),oP.notify()})}function Eu(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:MM(mu,e,e[0].spatialReference,t,r,i):MM(mu,[e],e.spatialReference,t,r,i)[0]}function MM(e,t,r,i,n=null,s=null){if(r==null||i==null)return t;if(Eo(r,i,n))return t.map(o=>A1(o,r,i));if(n==null&&Cb(r))return t.map(o=>A1(o,r,Pe.WGS84)).map(o=>S0(o,i));if(n==null&&Cb(i))return t.map(o=>S0(o,Pe.WGS84)).map(o=>A1(o,Pe.WGS84,i));if(n==null){const o=Bb.cacheKey(r,i);R1[o]!==void 0?n=R1[o]:((n=M7(r,i,void 0))==null&&(n=new Bb),R1[o]=n)}if(Is==null||e==null)throw new vS;return s!=null?Is._project(e,t,r,i,n,s):Is._project(e,t,r,i,n)}function Rle(e,t){const r=T7([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function T7(e,t){if(!Mu()){for(const r of e)if(r!=null&&!gr(r.spatialReference,t)&&on(r.spatialReference)&&on(t)&&!Eo(r.spatialReference,t))return ve(oP),{pending:yu(),geometries:null}}return{pending:null,geometries:e.map(r=>r==null?null:gr(r.spatialReference,t)?r:on(r.spatialReference)&&on(t)?S0(r,t):null)}}function M7(e,t,r=null){if(e==null||t==null)return null;if(Is==null||mu==null)throw new vS;const i=Is._getTransformation(mu,e,t,r,r==null?void 0:r.spatialReference);return i!==null?Bb.fromGE(i):null}function Ale(e,t,r=null){if(Is==null||mu==null)throw new vS;const i=Is._getTransformationBySuitability(mu,e,t,r,r==null?void 0:r.spatialReference);if(i!==null){const n=[];for(const s of i)n.push(Bb.fromGE(s));return n}return[]}let vS=class extends D{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function Lle(){Is=null,mu=null,Py=null,R1={}}const Nle={get loadPromise(){return Py}};function S0(e,t){try{const r=Eu(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=S7(r.type,e.spatialReference,t);return i!=null&&i(r),r}catch(r){if(!(r instanceof vS))throw r;return null}}async function Fle(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await aP(i,t,null,r),S0(e,t)}function Eo(e,t,r){return!r&&(!!gr(e,t)||on(e)&&on(t)&&!!v7(e,t,b7))}function Dle(e,t){if(gr(e,t))return!0;if(!on(e)||!on(t))return!1;const r=yd(e)||xo(e)||XA(e),i=yd(t)||xo(t)||XA(t);return r&&i}async function aP(e,t,r,i){if(Mu())return kA(i);if(Array.isArray(e)){for(const{source:n,dest:s,geographicTransformation:o}of e)if(n&&s&&!Eo(n,s,o))return yu(i)}else if(e&&t&&!Eo(e,t,r))return yu(i);return kA(i)}function A1(e,t,r){return e?"x"in e?E7(e,t,new Oe,r,0):"xmin"in e?P7(e,t,new ct,r,0):"rings"in e?O7(e,t,new Pa,r,0):"paths"in e?k7(e,t,new Dn,r,0):"points"in e?I7(e,t,new cS,r,0):null:null}function jle(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&E7(e,e.spatialReference,t,r,i)!=null}function E7(e,t,r,i,n){Kr[0]=e.x,Kr[1]=e.y;const s=e.z;return Kr[2]=s!==void 0?s:n,og(Kr,t,0,Kr,i,0,1)?(r.x=Kr[0],r.y=Kr[1],r.spatialReference=i,s!==void 0||cu(i)?(r.z=Kr[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function zle(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&I7(e,e.spatialReference,t,r,i)!=null}function I7(e,t,r,i,n){const{points:s,hasZ:o,hasM:a}=e,l=[],c=s.length,h=[];for(const m of s)h.push(m[0],m[1],o?m[2]:n);if(!og(h,t,0,h,i,0,c))return null;const f=o||cu(i);for(let m=0;m<c;++m){const y=3*m,g=h[y],v=h[y+1];f&&a?l.push([g,v,h[y+2],s[m][3]]):f?l.push([g,v,h[y+2]]):a?l.push([g,v,s[m][2]]):l.push([g,v])}return r.points=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r}function Vle(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&k7(e,e.spatialReference,t,r,i)!=null}function k7(e,t,r,i,n){const{paths:s,hasZ:o,hasM:a}=e,l=[];if(!C7(s,o??!1,a??!1,t,l,i,n))return null;const c=o||cu(i);return r.paths=l,r.spatialReference=i,r.hasZ=c,r.hasM=a,r}function Ule(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&O7(e,e.spatialReference,t,r,i)!=null}function O7(e,t,r,i,n){const{rings:s,hasZ:o,hasM:a}=e,l=[];if(!C7(s,o??!1,a??!1,t,l,i,n))return null;const c=o||cu(i);return r.rings=l,r.spatialReference=i,r.hasZ=c,r.hasM=a,r}function Gle(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&P7(e,e.spatialReference,t,r,i)!=null}function P7(e,t,r,i,n){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:h}=e,f=c?e.zmin:n;if(!E4(s,o,f,t,Kr,i))return null;const m=c||cu(i);r.xmin=Kr[0],r.ymin=Kr[1],m&&(r.zmin=Kr[2]);const y=c?e.zmax:n;return E4(a,l,y,t,Kr,i)?(r.xmax=Kr[0],r.ymax=Kr[1],m&&(r.zmax=Kr[2]),h&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function C7(e,t,r,i,n,s,o=0){const a=new Array;for(const h of e)for(const f of h)a.push(f[0],f[1],t?f[2]:o);if(!og(a,i,0,a,s,0,a.length/3))return!1;let l=0;n.length=0;const c=t||cu(s);for(const h of e){const f=new Array;for(const m of h)c&&r?f.push([a[l++],a[l++],a[l++],m[3]]):c?f.push([a[l++],a[l++],a[l++]]):r?(f.push([a[l++],a[l++],m[2]]),l++):(f.push([a[l++],a[l++]]),l++);n.push(f)}return!0}const Kr=$u(),REe=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Eo,getTransformation:M7,getTransformations:Ale,initializeProjection:aP,isEqualBaseGCS:Dle,isLoaded:Mu,isLoadedOrLoad:$7,isLoadedOrLoadFor:x7,load:yu,project:Eu,projectExtent:Gle,projectMany:MM,projectMultipoint:zle,projectOrLoad:Rle,projectOrLoadMany:T7,projectPoint:jle,projectPolygon:Ule,projectPolyline:Vle,projectWithZConversion:Fle,projectWithoutEngine:A1,requiresLoad:Cle,test:Nle,tryProjectWithZConversion:S0,unload:Lle},Symbol.toStringTag,{value:"Module"}));var EM;let Js=EM=class extends q{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new EM({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Js.prototype,"cols",void 0),u([d({type:it,json:{write:!0}})],Js.prototype,"level",void 0),u([d({type:String,json:{write:!0}})],Js.prototype,"levelValue",void 0),u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Js.prototype,"origin",void 0),u([d({type:Number,json:{write:!0}})],Js.prototype,"resolution",void 0),u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Js.prototype,"rows",void 0),u([d({type:Number,json:{write:!0}})],Js.prototype,"scale",void 0),Js=EM=u([T("esri.layers.support.LOD")],Js);const Cl=Js;let qle=class{constructor(t,r,i,n,s=void 0){this.id=t,this.level=r,this.row=i,this.col=n,this.extent=s}};var sl;const I4=new De({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Cr=sl=class extends q{static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:n=Pe.WebMercator,numLODs:s=24}=e;if(!on(n)){const f=[];if(r)for(let m=0;m<r.length;m++){const y=r[m];f.push(new Cl({level:m,scale:y,resolution:y}))}else{let m=5e-4;for(let y=s-1;y>=0;y--)f.unshift(new Cl({level:y,scale:m,resolution:m})),m*=2}return new sl({dpi:96,lods:f,origin:new Oe(0,0,n),size:[i,i],spatialReference:n})}const o=ji(n),a=e.origin?new Oe({x:e.origin.x,y:e.origin.y,spatialReference:n}):new Oe(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),l=96,c=1/(Ad(n)*39.37*l),h=[];if(r)for(let f=0;f<r.length;f++){const m=r[f],y=m*c;h.push(new Cl({level:f,scale:m,resolution:y}))}else{let f=Q_(n)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const m=Math.ceil(s/t);h.push(new Cl({level:0,scale:f,resolution:f*c}));for(let y=1;y<m;y++){const g=f/2**t,v=g*c;h.push(new Cl({level:y,scale:g,resolution:v})),f=g}}return new sl({dpi:l,lods:h,origin:a,size:[i,i],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=ji(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return Oe.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[],n=this._levelToLOD={};e&&(t=-1/0,r=1/0,e.forEach(s=>{i.push(s.scale),t=s.scale>t?s.scale:t,r=s.scale<r?s.scale:r,n[s.level]=s})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const n=t[i],s=t[i+1];if(n<=e)return i;if(s===e)return i+1;if(n>e&&s<e)return i+Math.log(n/e)/Math.log(n/s)}return i}tileAt(e,t,r,i){const n=this.lodAt(e);if(!n)return null;let s,o;if(typeof t=="number")s=t,o=r;else if(gr(t.spatialReference,this.spatialReference))s=t.x,o=t.y,i=r;else{const c=tS(t,this.spatialReference);if(c==null)return null;s=c.x,o=c.y,i=r}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return i||(i=new qle(null,0,0,0,Ai())),i.level=e,i.row=Math.floor((this.origin.y-o)/l+.001),i.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=sl.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===sl.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const i=e.level-r.level,n=r.resolution*this.size[0]/2**i,s=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Ai()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const r=this.lodAt(t.level);if(r==null)return null;const{resolution:i}=r,n=i*this.size[0],s=i*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+n,e[3]=e[1]+s,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return sl.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const r=[],i=this.lods.length-t;for(let n=0;n<i;n++){const s=n+t,{scale:o,resolution:a}=s>=0?this.lods[s]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Cl({level:n,scale:o,resolution:a}))}return new sl({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};u([d({type:Number,json:{write:!0}})],Cr.prototype,"compressionQuality",void 0),u([d({type:Number,json:{write:!0}})],Cr.prototype,"dpi",void 0),u([d({type:String,json:{read:I4.read,write:I4.write,origins:{"web-scene":{read:!1,write:!1}}}})],Cr.prototype,"format",void 0),u([d({readOnly:!0})],Cr.prototype,"isWrappable",null),u([d({type:Oe,json:{write:!0}})],Cr.prototype,"origin",void 0),u([J("origin")],Cr.prototype,"readOrigin",null),u([d({type:[Cl],value:null,json:{write:!0}})],Cr.prototype,"lods",null),u([d({readOnly:!0})],Cr.prototype,"scales",void 0),u([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Cr.prototype,"size",void 0),u([J("size",["rows","cols"])],Cr.prototype,"readSize",null),u([X("size",{cols:{type:it},rows:{type:it}})],Cr.prototype,"writeSize",null),u([d({type:Pe,json:{write:!0}})],Cr.prototype,"spatialReference",void 0),Cr=sl=u([T("esri.layers.support.TileInfo")],Cr),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Cr||(Cr={}));const Ble=Cr,L1={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],n=this.values;return i>=r?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},w$={xsmall:544,small:768,medium:992,large:1200};function Hle(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function b$(e,t){return t?L1[e].valueToClassName[t].split(" "):[]}const Wle=e=>{let t=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=w$}initialize(){this.addHandles(xe(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),wi))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!Hle(r)){const i=JSON.stringify(w$,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=w$}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=yi.acquire(),i=yi.acquire();let n,s=!1;for(n in L1){const o=this[n],a=L1[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,b$(n,o).forEach(l=>i.push(l)),b$(n,a).forEach(l=>r.push(l)))}s&&(this._applyClassNameChanges(r,i),yi.release(r),yi.release(i))}_applyClassNameChanges(r,i){const n=this.container;n&&(i.forEach(s=>n.classList.remove(s)),r.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in L1)b$(i,this[i]).forEach(n=>r.classList.remove(n))}};return u([d()],t.prototype,"breakpoints",null),u([d()],t.prototype,"orientation",void 0),u([d()],t.prototype,"widthBreakpoint",void 0),u([d()],t.prototype,"heightBreakpoint",void 0),t=u([T("esri.views.BreakpointsOwner")],t),t};function lP(e){return typeof e=="string"?document.getElementById(e):e??null}function R7(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function k4(e,t){const r=t.parentNode;r&&r.insertBefore(e,t)}function O4(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let rd=class extends we{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,r,i={}){return this._installWatch(t,r,i,xe)}addWhen(t,r,i={}){return this._installWatch(t,r,i,Oa)}addOnCollectionChange(t,r,{initial:i=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([Sd(t,"after-changes",this._createSyncUpdatingCallback(),du),Sd(t,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>r({added:[],removed:o.toArray()}):void 0})],s),Xe(()=>this.removeHandles(s))}addPromise(t){if(t==null)return t;const r=++this._handleId;this.addHandles(Xe(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(Tv)||this._set("updating",!1))}),r),this._pendingPromises.add(t),this._set("updating",!0);const i=()=>this.removeHandles(r);return t.then(i,i),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,r,i={},n){const s=++this._handleId;i.sync||this._installSyncUpdatingWatch(t,s);const o=n(t,r,i);return this.addHandles(o,s),Xe(()=>this.removeHandles(s))}_installSyncUpdatingWatch(t,r){const i=this._createSyncUpdatingCallback(),n=xe(t,i,{sync:!0,equals:()=>!1});return this.addHandles(n,r),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Tv),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(sf(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Tv))}),Tv)}}};u([d({readOnly:!0})],rd.prototype,"updating",void 0),rd=u([T("esri.core.support.UpdatingHandles")],rd);const Tv=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.0.3 - Wed Jul 03 2024 17:50:35 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hb=function(){return Hb=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Hb.apply(this,arguments)},IM={exports:{}},Ut={},kM={exports:{}},Fd={};function A7(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Zle(e,t,r){}function Jle(e,t,r){}var Kle=/javascript\s*\:/img;function Yle(e,t){return Kle.test(t)?"":t}Fd.whiteList=A7();Fd.getDefaultWhiteList=A7;Fd.onAttr=Zle;Fd.onIgnoreAttr=Jle;Fd.safeAttrValue=Yle;var Qle={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},em=Qle;function Xle(e,t){e=em.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,n=0,s=0,o="";function a(){if(!i){var h=em.trim(e.slice(n,s)),f=h.indexOf(":");if(f!==-1){var m=em.trim(h.slice(0,f)),y=em.trim(h.slice(f+1));if(m){var g=t(n,o.length,m,y,h);g&&(o+=g+"; ")}}}n=s+1}for(;s<r;s++){var l=e[s];if(l==="/"&&e[s+1]==="*"){var c=e.indexOf("*/",s+2);if(c===-1)break;s=c+1,n=s+1,i=!1}else l==="("?i=!0:l===")"?i=!1:l===";"?i||a():l===`
`&&a()}return em.trim(o)}var eue=Xle,Mv=Fd,tue=eue;function P4(e){return e==null}function rue(e){var t={};for(var r in e)t[r]=e[r];return t}function L7(e){e=rue(e||{}),e.whiteList=e.whiteList||Mv.whiteList,e.onAttr=e.onAttr||Mv.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Mv.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Mv.safeAttrValue,this.options=e}L7.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onAttr,s=r.onIgnoreAttr,o=r.safeAttrValue,a=tue(e,function(l,c,h,f,m){var y=i[h],g=!1;if(y===!0?g=y:typeof y=="function"?g=y(f):y instanceof RegExp&&(g=y.test(f)),g!==!0&&(g=!1),f=o(h,f),!!f){var v={position:c,sourcePosition:l,source:m,isWhite:g};if(g){var b=n(h,f,v);return P4(b)?h+":"+f:b}else{var b=s(h,f,v);if(!P4(b))return b}}});return a};var iue=L7;(function(e,t){var r=Fd,i=iue;function n(o,a){var l=new i(a);return l.process(o)}t=e.exports=n,t.FilterCSS=i;for(var s in r)t[s]=r[s]})(kM,kM.exports);var uP=kM.exports,cP={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},nue=uP.FilterCSS,sue=uP.getDefaultWhiteList,Wb=cP;function N7(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var F7=new nue;function oue(e,t,r){}function aue(e,t,r){}function lue(e,t,r){}function uue(e,t,r){}function D7(e){return e.replace(due,"&lt;").replace(pue,"&gt;")}function cue(e,t,r,i){if(r=q7(r),t==="href"||t==="src"){if(r=Wb.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(Ev.lastIndex=0,Ev.test(r))return""}else if(t==="style"){if(C4.lastIndex=0,C4.test(r)||(R4.lastIndex=0,R4.test(r)&&(Ev.lastIndex=0,Ev.test(r))))return"";i!==!1&&(i=i||F7,r=i.process(r))}return r=B7(r),r}var due=/</g,pue=/>/g,hue=/"/g,fue=/&quot;/g,mue=/&#([a-zA-Z0-9]*);?/gim,yue=/&colon;?/gim,gue=/&newline;?/gim,Ev=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,C4=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,R4=/u\s*r\s*l\s*\(.*/gi;function j7(e){return e.replace(hue,"&quot;")}function z7(e){return e.replace(fue,'"')}function V7(e){return e.replace(mue,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function U7(e){return e.replace(yue,":").replace(gue," ")}function G7(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return Wb.trim(t)}function q7(e){return e=z7(e),e=V7(e),e=U7(e),e=G7(e),e}function B7(e){return e=j7(e),e=D7(e),e}function vue(){return""}function wue(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:Wb.indexOf(e,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,l){if(i(o))if(l.isClosing){var c="[/removed]",h=l.position+c.length;return n.push([s!==!1?s:l.position,h]),s=!1,c}else return s||(s=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return Wb.forEach(n,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function bue(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var n=e.indexOf("-->",i);if(n===-1)break;r=n+3}return t}function _ue(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}Ut.whiteList=N7();Ut.getDefaultWhiteList=N7;Ut.onTag=oue;Ut.onIgnoreTag=aue;Ut.onTagAttr=lue;Ut.onIgnoreTagAttr=uue;Ut.safeAttrValue=cue;Ut.escapeHtml=D7;Ut.escapeQuote=j7;Ut.unescapeQuote=z7;Ut.escapeHtmlEntities=V7;Ut.escapeDangerHtml5Entities=U7;Ut.clearNonPrintableCharacter=G7;Ut.friendlyAttrValue=q7;Ut.escapeAttrValue=B7;Ut.onIgnoreTagStripAll=vue;Ut.StripTagBody=wue;Ut.stripCommentTag=bue;Ut.stripBlankChar=_ue;Ut.cssFilter=F7;Ut.getDefaultCSSWhiteList=sue;var wS={},Rl=cP;function Sue(e){var t=Rl.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=Rl.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function $ue(e){return e.slice(0,2)==="</"}function xue(e,t,r){var i="",n=0,s=!1,o=!1,a=0,l=e.length,c="",h="";e:for(a=0;a<l;a++){var f=e.charAt(a);if(s===!1){if(f==="<"){s=a;continue}}else if(o===!1){if(f==="<"){i+=r(e.slice(n,a)),s=a,n=a;continue}if(f===">"){i+=r(e.slice(n,s)),h=e.slice(s,a+1),c=Sue(h),i+=t(s,i.length,c,h,$ue(h)),n=a+1,s=!1;continue}if(f==='"'||f==="'")for(var m=1,y=e.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=f;continue e}y=e.charAt(a-++m)}}else if(f===o){o=!1;continue}}return n<e.length&&(i+=r(e.substr(n))),i}var Tue=/[^a-zA-Z0-9\\_:.-]/gim;function Mue(e,t){var r=0,i=0,n=[],s=!1,o=e.length;function a(m,y){if(m=Rl.trim(m),m=m.replace(Tue,"").toLowerCase(),!(m.length<1)){var g=t(m,y||"");g&&n.push(g)}}for(var l=0;l<o;l++){var c=e.charAt(l),h,f;if(s===!1&&c==="="){s=e.slice(r,l),r=l+1,i=e.charAt(r)==='"'||e.charAt(r)==="'"?r:Iue(e,l+1);continue}if(s!==!1&&l===i){if(f=e.indexOf(c,l+1),f===-1)break;h=Rl.trim(e.slice(i+1,f)),a(s,h),s=!1,l=f,r=l+1;continue}if(/\s|\n|\t/.test(c))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(f=Eue(e,l),f===-1){h=Rl.trim(e.slice(r,l)),a(h),s=!1,r=l+1;continue}else{l=f-1;continue}else if(f=kue(e,l-1),f===-1){h=Rl.trim(e.slice(r,l)),h=A4(h),a(s,h),s=!1,r=l+1;continue}else continue}return r<e.length&&(s===!1?a(e.slice(r)):a(s,A4(Rl.trim(e.slice(r))))),Rl.trim(n.join(" "))}function Eue(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function Iue(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function kue(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function Oue(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function A4(e){return Oue(e)?e.substr(1,e.length-2):e}wS.parseTag=xue;wS.parseAttr=Mue;var Pue=uP.FilterCSS,ys=Ut,H7=wS,Cue=H7.parseTag,Rue=H7.parseAttr,N1=cP;function Iv(e){return e==null}function Aue(e){var t=N1.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=N1.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=N1.trim(e.slice(0,-1))),{html:e,closing:r}}function Lue(e){var t={};for(var r in e)t[r]=e[r];return t}function Nue(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(i){return i.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function W7(e){e=Lue(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=ys.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Nue(e.whiteList||e.allowList):e.whiteList=ys.whiteList,e.onTag=e.onTag||ys.onTag,e.onTagAttr=e.onTagAttr||ys.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||ys.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||ys.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||ys.safeAttrValue,e.escapeHtml=e.escapeHtml||ys.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Pue(e.css))}W7.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onTag,s=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,l=r.safeAttrValue,c=r.escapeHtml,h=t.cssFilter;r.stripBlankChar&&(e=ys.stripBlankChar(e)),r.allowCommentTag||(e=ys.stripCommentTag(e));var f=!1;r.stripIgnoreTagBody&&(f=ys.StripTagBody(r.stripIgnoreTagBody,s),s=f.onIgnoreTag);var m=Cue(e,function(y,g,v,b,w){var _={sourcePosition:y,position:g,isClosing:w,isWhite:Object.prototype.hasOwnProperty.call(i,v)},$=n(v,b,_);if(!Iv($))return $;if(_.isWhite){if(_.isClosing)return"</"+v+">";var E=Aue(b),k=i[v],M=Rue(E.html,function(P,N){var j=N1.indexOf(k,P)!==-1,G=o(v,P,N,j);return Iv(G)?j?(N=l(v,P,N,h),N?P+'="'+N+'"':P):(G=a(v,P,N,j),Iv(G)?void 0:G):G});return b="<"+v,M&&(b+=" "+M),E.closing&&(b+=" /"),b+=">",b}else return $=s(v,b,_),Iv($)?c(b):$},c);return f&&(m=f.remove(m)),m};var Fue=W7;(function(e,t){var r=Ut,i=wS,n=Fue;function s(a,l){var c=new n(l);return c.process(a)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=n,function(){for(var a in r)t[a]=r[a];for(var l in i)t[l]=i[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(IM,IM.exports);var Yd=IM.exports,Due=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},jue=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],details:["style"],div:["align","style","aria-label","aria-hidden"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=Hb(Hb({},Yd.getDefaultCSSWhiteList()),{flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,"line-height":!0,"justify-content":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?i.sanitizeUrl(a):Yd.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;t&&!r?n=t:t&&r?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(s){if(s==="whiteList")n.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]);else if(s==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return n.css.whiteList[a]=o[a]})}else n[s]=t[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new Yd.FilterXSS(n)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,n=i===void 0?!0:i,s=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?Yd.escapeAttrValue(t):!s&&!n?Yd.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,n):Yd.safeAttrValue(t,r,i,n)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,n){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(n)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(n){Array.isArray(i[n])&&Array.isArray(r[n])?r[n]=r[n].concat(i[n]):r[n]=i[n]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var n=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(a,l){var c=i.validate(l,r);return c.isValid?a.concat([l]):(n=!0,a.concat([c.sanitized]))},[]);else if(Due(t)){var o=Object.keys(t);s=o.reduce(function(a,l){var c=t[l],h=i.validate(c,r);return h.isValid?a[l]=c:(n=!0,a[l]=h.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return n?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const bS=new Map;function Z7(){bS.clear()}function zue(e){return bS.get(e)}function Vue(e,t){bS.set(e,t)}function _$(e){bS.delete(e)}function Uue(...e){const t=yi.acquire();for(let i=0;i<e.length;i++){const n=e[i],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const o in n)n[o]&&t.push(o)}const r=t.join(" ");return yi.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(i=>{var n;Z7();for(const s of i)(n=e.get(s.target))==null||n(s)}),r=(i,n,s)=>(e.set(i,n),t.observe(i,s),Xe(()=>{t.unobserve(i),e.delete(i)}));return(i,n,s)=>{let o=null;return W0([xe(()=>typeof i=="function"?i():i,a=>{o==null||o.remove(),a&&(o=r(a,n,s))},Ln),Xe(()=>o==null?void 0:o.remove())])}})();function Gue(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function NEe(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function FEe(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const que=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],Bue=que.reduce((e,t)=>(e[t]=[],e),{}),Hue=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],J7=new jue({whiteList:Bue,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(Hue.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Wue(e){return e==="Enter"||e===" "}const K7="http://www.w3.org/",_S=`${K7}2000/svg`,Y7=`${K7}1999/xlink`;let L4=[],dP=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},pP=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),Q7=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},Zue=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(pP(e[i],t))return i}return-1},S$=(e,t,r,i)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(pP(a,n))throw new Error(`${r.vnodeSelector} had a ${n.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Jue=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},OM=[],PM=!1,X7=e=>{(e.children||[]).forEach(X7),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},N4=()=>{PM=!1,OM.forEach(X7),OM.length=0},F4=e=>{OM.push(e),PM||(PM=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(N4,{timeout:16}):setTimeout(N4,16))},D4=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),F4(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),F4(e))},Kue=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let o=0;o<s;o++){let a=n[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")RM(e,l,!0);else if(a==="classes"){let c=Object.keys(l),h=c.length;for(let f=0;f<h;f++){let m=c[f];l[m]&&e.classList.add(m)}}else if(a==="styles"){let c=Object.keys(l),h=c.length;for(let f=0;f<h;f++){let m=c[f],y=l[m];y&&(Q7(y),r.styleApplyer(e,m,y))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(i&&(l=i(a,l,e,t)),a==="oninput"&&function(){let h=l;l=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=l):r.namespace===_S?a==="href"?e.setAttributeNS(Y7,a,l):e.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?e[a]=J7.sanitize(l):CM(e)&&a in e?e[a]=l:e.setAttribute(a,l):e[a]=l}}};function CM(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let Zb,Yue=(e,t,r)=>{if(t)for(let i of t)ih(i,e,void 0,r)},eU=(e,t,r)=>{Yue(e,t.children,r),t.text&&(e.textContent=t.text),Kue(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},ih=(e,t,r,i)=>{let n,s=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")n=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(n,r):t.appendChild(n);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let h=o.charAt(s-1),f=o.slice(s,l);h==="."?n.classList.add(f):h==="#"?n.id=f:(f==="svg"&&(i=dP(i,{namespace:_S})),i.namespace!==void 0?n=e.domNode=a.createElementNS(i.namespace,f):(n=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(n,r):n.parentNode!==t&&t.appendChild(n)),s=l+1}}eU(n,e,i)}},RM=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},Que=(e,t,r,i)=>{if(!r)return;let n=!1,s=Object.keys(r),o=s.length;for(let a=0;a<o;a++){let l=s[a],c=r[l],h=t[l];if(l==="class")h!==c&&(RM(e,h,!1),RM(e,c,!0));else if(l==="classes"){let f=e.classList,m=Object.keys(c),y=m.length;for(let g=0;g<y;g++){let v=m[g],b=!!c[v];b!==!!h[v]&&(n=!0,b?f.add(v):f.remove(v))}}else if(l==="styles"){let f=Object.keys(c),m=f.length;for(let y=0;y<m;y++){let g=f[y],v=c[g];v!==h[g]&&(n=!0,v?(Q7(v),i.styleApplyer(e,g,v)):i.styleApplyer(e,g,""))}}else if(c||typeof h!="string"||(c=""),l!=="value"||CM(e)){if(c!==h){let f=typeof c;f==="function"&&i.eventHandlerInterceptor||(i.namespace===_S?l==="href"?e.setAttributeNS(Y7,l,c):e.setAttribute(l,c):f==="string"?l==="innerHTML"?e[l]=J7.sanitize(c):l==="role"&&c===""?e.removeAttribute(l):CM(e)&&l in e?e[l]=c:e.setAttribute(l,c):e[l]!==c&&(e[l]=c),n=!0)}}else{let f=e[l];f!==c&&(e["oninput-value"]?f===e["oninput-value"]:c!==h)&&(e[l]=c,e["oninput-value"]=void 0),c!==h&&(n=!0)}}return n},Xue=(e,t,r,i,n)=>{if(r===i)return!1;i=i||L4;let s,o=(r=r||L4).length,a=i.length,l=0,c=0,h=!1;for(;c<a;){let f=l<o?r[l]:void 0,m=i[c];if(f!==void 0&&pP(f,m))h=Zb(f,m,n)||h,l++;else{let y=Zue(r,m,l+1);if(y>=0){for(s=l;s<y;s++)D4(r[s]),S$(r,s,e,"removed");h=Zb(r[y],m,n)||h,l=y+1}else ih(m,t,l<o?r[l].domNode:void 0,n),Jue(m),S$(i,c,e,"added")}c++}if(o>l)for(s=l;s<o;s++)D4(r[s]),S$(r,s,e,"removed");return h};Zb=(e,t,r)=>{let i=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,n=!0,n}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=dP(r,{namespace:_S})),e.text!==t.text&&(s=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=Xue(t,i,e.children,t.children,r)||s,s=Que(i,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),n};let tm=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,Zb(i,r,t)},domNode:e.domNode});const ece={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let up=e=>dP(ece,e),Hl={create:(e,t)=>(t=up(t),ih(e,document.createElement("div"),void 0,t),tm(e,t)),append:(e,t,r)=>(r=up(r),ih(t,e,void 0,r),tm(t,r)),insertBefore:(e,t,r)=>(r=up(r),ih(t,e.parentNode,e,r),tm(t,r)),merge:(e,t,r)=>(r=up(r),t.domNode=e,eU(e,t,r),tm(t,r)),replace:(e,t,r)=>(r=up(r),ih(t,e.parentNode,e,r),e.parentNode.removeChild(e),tm(t,r))},tU,tce=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};tU=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let rce=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?tU(r.children,n=>n.domNode===i):void 0}),r},ice=(e,t,r)=>{let i=function(n){r("domEvent",n);let s=t(),o=tce(n.currentTarget,s.domNode);o.reverse();let a,l=rce(s.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),r("domEventProcessed",n),a};return(n,s,o,a)=>i},j4=e=>{let t,r,i=up(e),n=i.performanceLogger,s=!0,o=!1,a=[],l=[],c=(f,m,y)=>{let g,v=()=>g;i.eventHandlerInterceptor=ice(t,v,n),g=f(m,y(),i),a.push(g),l.push(y)},h=()=>{if(r=void 0,s){s=!1,n("renderStart",void 0);for(let f=0;f<a.length;f++){let m=l[f]();n("rendered",void 0),a[f].update(m),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:h,scheduleRender:()=>{r||o||(r=requestAnimationFrame(h))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(f,m)=>{c(Hl.append,f,m)},insertBefore:(f,m)=>{c(Hl.insertBefore,f,m)},merge:(f,m)=>{c(Hl.merge,f,m)},replace:(f,m)=>{c(Hl.replace,f,m)},detach:f=>{for(let m=0;m<l.length;m++)if(l[m]===f)return l.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},ol=class extends we{constructor(){super(...arguments),this.items=new ce,this._watchUpdatingTracking=new rd,this._callbacks=new Map,this._projector=j4(),this._hiddenProjector=j4()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const i of r.added){const n=()=>i.render();this._callbacks.set(i,n),this._projector.append(this.surface,n)}for(const i of r.removed){const n=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(n.domNode),this._callbacks.delete(i)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const r=this._hiddenSurface,i=this._hiddenProjector;let n;const s=()=>(n=t.render(),n);i.append(r,s),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(i.detach(s);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(t,r){const i=this.computeBoundingRect(t),n=this.computeBoundingRect(r);return Math.max(i.left,n.left)<=Math.min(i.right,n.right)&&Math.max(i.top,n.top)<=Math.min(i.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,r){const i=!!(r!=null&&r.disableDecorations);if(!this.items.some(s=>s.visible&&!(i&&s.isDecoration)))return;const n=t.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{i&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};u([d({readOnly:!0})],ol.prototype,"surface",void 0),u([d({readOnly:!0})],ol.prototype,"items",void 0),u([d({readOnly:!0})],ol.prototype,"needsRender",null),u([d({readOnly:!0})],ol.prototype,"_watchUpdatingTracking",void 0),u([d({readOnly:!0})],ol.prototype,"updating",null),ol=u([T("esri.views.overlay.ViewOverlay")],ol);const z4=ol,$$=[0,0];function nce(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return $$[0]=r.left+((t==null?void 0:t.pageXOffset)??0),$$[1]=r.top+((t==null?void 0:t.pageYOffset)??0),$$}function V4(e){e&&(R7(e),e.parentNode&&e.parentNode.removeChild(e))}function sce(e){const t=document.createElement("div");return e.appendChild(t),t}const rm=16,kv=750,oce=512,ace=2,lce=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:rm,time:kv},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([xe(()=>this.cursor,i=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",i)}),xe(()=>this.navigating,i=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",i.toString())})])}initialize(){this.addHandles([xe(()=>this.ui,(r,i)=>this._handleUIChange(r,i),wi),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=xt(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),n=lP(r);if(n||typeof r!="string"||H.getLogger(this).error("#container",`element with id '${r}' not found`),i===n)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(V4(this.root),this._set("root",null)),this.userContent&&(O4(this.userContent,i),V4(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",O4(n,s),n.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",n.insertBefore(o,n.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new z4;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(xe(()=>l.needsRender,c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Vh({render:()=>{var h;return(h=this.overlay)==null?void 0:h.render()}}):this._overlayRenderTaskHandle=Pt(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,i,n){const s=this.position;return r-=s?s[0]:0,i-=s?s[1]:0,n?(n[0]=r,n[1]=i):n=[r,i],n}containerToPage(r,i,n){const s=this.position;return r+=s?s[0]:0,i+=s?s[1]:0,n?(n[0]=r,n[1]=i):n=[r,i],n}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(xe(()=>this.root,n=>{r.container=n?sce(n):null},wi),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=rm,r.time=kv,this.addHandles([K0(window,"resize",()=>{r.freq=rm,r.time=kv}),Vh({prepare:i=>{const n=this._measure(),s=this._freqInfo;if(s.time+=i.deltaTime,n&&(s.freq=rm,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||n?rm:Math.min(kv,s.freq*ace),!n&&s.freq>=oce&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,n=r?r.clientHeight:0;if(i===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return i===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:i,height:n}),!0)}_position(){const r=this.container,i=this.position,n=r&&nce(r);return!!n&&(!i||n[0]!==i[0]||n[1]!==i[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return u([d()],t.prototype,"container",null),u([d({readOnly:!0})],t.prototype,"focused",null),u([d({readOnly:!0})],t.prototype,"height",void 0),u([d()],t.prototype,"messagesCommon",void 0),u([d({type:z4})],t.prototype,"overlay",void 0),u([d({readOnly:!0})],t.prototype,"position",void 0),u([d({readOnly:!0})],t.prototype,"resizing",void 0),u([d({readOnly:!0})],t.prototype,"root",void 0),u([d({value:null,readOnly:!0})],t.prototype,"size",null),u([d({readOnly:!0})],t.prototype,"surface",void 0),u([d({readOnly:!0})],t.prototype,"suspended",void 0),u([d()],t.prototype,"ui",void 0),u([d({readOnly:!0})],t.prototype,"userContent",void 0),u([d({readOnly:!0})],t.prototype,"width",void 0),u([d()],t.prototype,"widthBreakpoint",void 0),t=u([T("esri.views.DOMContainer")],t),t};let uce=class{constructor(t,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in t){const n=t[i],s=new f8(n,void 0,void 0,2,2);this._properties[i]={pool:s,acquired:[]}}this._afterDispatchHandle=VQ(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const r=this._properties[t];for(const i of r.acquired)CA(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){const r=this._owner._get(t),i=this._properties[t];let n=i.pool.acquire();for(i.acquired.push(n);n===r;)i.acquired.push(n),n=i.pool.acquire();return n}_release(){for(const t in this._properties){const r=this._properties[t];let i=0;for(const n of r.acquired)CA(n)?r.acquired[i++]=n:r.pool.release(n);r.acquired.length=i}}};const cce=F("mac")?"Meta":"Control",dce=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),pce=e=>dce.has(e);let hce=class{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},vr=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let n;typeof r=="function"?(i=r,n=[]):n=r||[];const s=typeof t=="string"?new hce(t,n):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const f=this._incoming[h.match.eventType];if(f){const m=f.indexOf(h);f.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},l=new fce(s,i,{onPause:a,onRemove:a,onResume:h=>{const f=this._incoming[h.match.eventType];f&&!f.includes(h)&&(f.push(h),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new mce(t,{onEmit:(i,n,s,o)=>{var a;(a=this._manager)==null||a.emit(i.eventType,n,s,o)},onRemove:i=>{var n;delete this._outgoing[i.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!0)}stopCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var i;const r=this._incoming[t.type];if(r){for(const n of r)if(n.match.matches(t)&&((i=n.callback)==null||i.call(n,t),t.shouldStopPropagation()))break}}},fce=class{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},mce=class{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},yce=class extends vr{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>{this._update(r.data)})}_update(t){const r=t.native.pointerType==="touch"?"touch":"mouse",{x:i,y:n}=t;r===this._value&&this._x===i&&this._y===n||(this._value=r,this._x=i,this._y=n,this._onChange(r,i,n))}},gce=class{constructor(t,r){this._observable=new X0,this._value=t,this._equalityFunction=r}get value(){return ve(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function rU(e,t=J6){return new gce(e,t)}let vce=class extends vr{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=rU(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},Tn=class extends we{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=cce,this._latestPointerType="mouse",this._propertiesPool=new uce({latestPointerLocation:_ce},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const r of t)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,r,i=iu.INTERNAL){if(this._nameToGroup[t]||r.length===0)return;const n={name:t,handlers:r.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,h,f)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,f,h)},setPointerCapture:(a,l)=>{this._setPointerCapture(n,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const r=this._nameToGroup[t];r?(r.handlers.forEach(i=>{var n;i.removed=!0,(n=i.uninstallCallback)==null||n.call(i)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):H.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers&&this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const n=this._handlers[i];n.priorityIndex=i,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const n=this._handlersPriority[i];n.priorityIndex=i;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(t.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)pce(a)||r.add(a)}n.active=s}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,i){this._latestPointerType=t;const n=this._get("latestPointerLocation");if(n==null||n.x!==r||n.y!==i){const s=this._propertiesPool.get("latestPointerLocation");s.x=r,s.y=i,this._set("latestPointerLocation",s)}}_onEventReceived(t,r){if(t==="pointer-capture-lost"){const s=r;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(t,r);const i=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,n=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,i,n)}_updateKeyModifiers(t,r){if(!r)return;let i=!1;const n=()=>{if(!i){const a=new Set;this._activeKeyModifiers.forEach(l=>{a.add(l)}),this._activeKeyModifiers=a,i=!0}},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=r.key;this._keyModifiers.has(a)&&s(a,t==="key-down")}const o=r.native;s("Alt",!(!o||!o.altKey)),s("Control",!(!o||!o.ctrlKey)),s("Ctrl",!(!o||!o.ctrlKey)),s("Shift",!(!o||!o.shiftKey)),s("Meta",!(!o||!o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new yce((t,r,i)=>this._setLatestPointer(t,r,i)),this._multiTouchHandler=new vce,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],iu.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,iu.INTERNAL)}_setPointerCapture(t,r,i,n){const s=t.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,r,i,n){this._emitInputEvent(0,t,r,i,n)}_emitInputEvent(t,r,i,n,s,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=s!==void 0&&s,c={event:new wce(r,i,a,o||this._activeKeyModifiers,l),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(t){this._currentPropagation={events:new qb,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var r,i,n;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:s,priorityIndex:o}=t.events.pop(),a=(r=s.data)==null?void 0:r.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(t.currentHandler=this._handlersPriority[o];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!s.shouldStopPropagation()&&((n=(i=t.currentHandler).eventCallback)==null||n.call(i,s)),s.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const r=new qb;r.push(t);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(const i of t.handler.incomingEventMatches)for(const n of r.handler.incomingEventMatches){if(i.eventType!==n.eventType)continue;const s=i.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(s.length===i.keyModifiers.length!=(s.length===n.keyModifiers.length))return i.keyModifiers.length>n.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){const r=[];for(const i of t){let n=0;for(;n<r.length&&this._compareHandlerPriority(i,r[n])>=0;)n++;r.splice(n,0,i)}return r}get debug(){const t=r=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=i};return{injectEvent:(r,i)=>{t(()=>{this._onEventReceived(r,i)})},disablePointerCapture:t}}};u([d({readOnly:!0})],Tn.prototype,"hasPendingInputs",null),u([d({constructOnly:!0})],Tn.prototype,"eventSource",void 0),u([d({constructOnly:!0})],Tn.prototype,"recognizers",void 0),u([d()],Tn.prototype,"_latestPointerType",void 0),u([d()],Tn.prototype,"latestPointerType",null),u([d()],Tn.prototype,"multiTouchActive",null),u([d({readOnly:!0})],Tn.prototype,"latestPointerLocation",void 0),u([d()],Tn.prototype,"_paused",void 0),u([d({readOnly:!0})],Tn.prototype,"updating",null),Tn=u([T("esri.views.input.InputManager")],Tn);let wce=class{constructor(t,r,i,n,s){this.type=t,this.data=r,this.timestamp=i,this.modifiers=n,this.cancelable=s,this._propagationState=Al.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Al.STOPPED}shouldStopPropagation(){return!!(this._propagationState&Al.STOPPED)}async(t){this._propagationState|=Al.PAUSED;const r=(i,n)=>{this._propagationState&=~Al.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw i;return i};return(typeof t=="function"?t():t).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(t){return!!(this._propagationState&Al.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var Al;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Al||(Al={}));const iu={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let bce=class{};const _ce=bce;function Ao(e){return e!=null&&"open"in e&&"declaredClass"in e}function U4(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const Sce=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([xe(()=>[this.ui,this.popup],([r,i],n)=>{const s="popup",o="manual";if(n){const[a,l]=n;a&&Ao(l)&&(l.view=null,U4(l)&&a.remove(l,s))}r&&Ao(i)&&(i.view=this,U4(i)&&r.add(i,{key:s,position:o,internal:!0}))},wi),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(Ao(this.popup)?this.popup.viewModel.handleViewClick(r):r.async(async()=>{await this.setupPopup(),Ao(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)}))},iu.WIDGET)]),DO(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{ee(()=>import("./Popup-jG_htyxk.js"),__vite__mapDeps([122,1,6,123,14,124,125,62,60,61,23,26,126]))})}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(Ao(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void H.getLogger(this).error(new D("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),Ao(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!Ao(this.popup))return this._popupSetupTask=_O(async i=>{const{default:n}=await ee(()=>import("./Popup-jG_htyxk.js"),__vite__mapDeps([122,1,6,123,14,124,125,62,60,61,23,26,126]));if(Ct(i),!this.popup||Ao(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new n(s)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},n){const s=[],o=[];let a=!1;const l=bQ(n,F("popup-view-fetch-timeout")??xce),c=m=>{const y=new $ce(m);return o.push(y),s.push(y.promise),y},h=m=>{const y=o.at(-1);return y&&y.layerView===m&&!a?y:c(m)};for(const m of i)"graphic"in m?(h(m.layerView).graphics.push(m.graphic),a=!1):(s.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,l)),a=!0);o.map(m=>m.resolve(l));const f=wQ(s).then(m=>m.filter(y=>!!y).flat());return{pendingFeatures:s,allGraphicsPromise:f,location:r}}async _getPopupHits(r,i){const{hits:n,location:s}=await this.popupHitTest(r);Ct(i);const o=[];for(const a of n)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,i)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:s}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i==null?void 0:i.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return u([d({cast(r){return!r||Ao(r)||typeof r=="object"&&(r.open=i=>(hd(H.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(i)),r.close=()=>(hd(H.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),r}})],t.prototype,"popup",void 0),u([d()],t.prototype,"popupEnabled",void 0),t=u([T("esri.views.PopupView")],t),t};let $ce=class{constructor(t){this.layerView=t,this._resolver=pn(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:r,graphics:i,_resolver:n}=this;if(!r)return n.resolve(i),n.promise;let s;return r.fetchPopupFeaturesFromGraphics(i,t).catch(o=>(s=o,null)).then(o=>{o?n.resolve(o):n.reject(s)}),n.promise}};const xce=5e3;let Cy=class extends ce{constructor(t){super(t),this.addHandles([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(ce.ofType(this.itemType.Type))(t):new ce(t)}};function AM(e,t){return{type:e,cast:fz,set(r){const i=lu(r,this._get(t),e);i.owner=this,this._set(t,i)}}}u([d()],Cy.prototype,"owner",null),Cy=u([T("esri.core.support.OwningCollection")],Cy);var $m;const Jb=si()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),iU=Jb.jsonValues.slice();$Y(iU,"orthometric");const Ry=si()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let ss=$m=class extends q{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return Jb.write(e,t,r)}readHeightModel(e,t,r){return Jb.read(e)||(r!=null&&r.messages&&r.messages.push(Tce(e,{context:r})),null)}readHeightUnit(e,t,r){return Ry.read(e)||(r!=null&&r.messages&&r.messages.push(G4(e,{context:r})),null)}readHeightUnitService(e,t,r){return kz(e)||Ry.read(e)||(r!=null&&r.messages&&r.messages.push(G4(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new $m({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=fte(t);return new $m({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new $m;return t.read(e,{origin:"web-scene"}),t}};function G4(e,t){return new Zn("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function Tce(e,t){return new Zn("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}u([d({type:Jb.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:iU,default:"ellipsoidal"}}}})],ss.prototype,"heightModel",void 0),u([X("web-scene","heightModel")],ss.prototype,"writeHeightModel",null),u([J(["web-scene","service"],"heightModel")],ss.prototype,"readHeightModel",null),u([d({type:Ry.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Ry.jsonValues,write:Ry.write}}}})],ss.prototype,"heightUnit",void 0),u([J("web-scene","heightUnit")],ss.prototype,"readHeightUnit",null),u([J("service","heightUnit")],ss.prototype,"readHeightUnitService",null),u([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],ss.prototype,"vertCRS",void 0),u([J("service","vertCRS",["vertCRS","ellipsoid","geoid"])],ss.prototype,"readVertCRS",null),ss=$m=u([T("esri.geometry.HeightModelInfo")],ss);const SS=ss;let Kb=class extends Cy{constructor(t){super(t),this.addHandles(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(H.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};Kb=u([T("esri.support.AnalysesCollection")],Kb);async function nU(e,t){const{WhereClause:r}=await ee(()=>import("./WhereClause-DUnwkbdd.js").then(i=>i.W),__vite__mapDeps([31,32]));return r.create(e,t)}function Mce(e,t){return e==="1=1"?t??e:t==="1=1"?e??t:e!=null&&e!==""?t!=null&&t!==""?`(${e}) AND (${t})`:e:t}function XEe(e){return typeof e=="number"}function hP(e){return typeof e=="string"||e instanceof String}const Ece="yyyy-MM-dd",Ice="TT";var Ay;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(Ay||(Ay={}));const kce=[Ay.HMS_MS,Ay.HMS,Ay.HM,Ice];function q4(e){if(!e||!hP(e))return null;const t=Me.fromFormat(e,Ece);return t.isValid?t:null}function B4(e){return e&&hP(e)?qY(kce,t=>{const r=Me.fromFormat(e,t);return r.isValid?r:null})??null:null}function H4(e){if(!e||!hP(e))return null;const t=Me.fromISO(e);return t.isValid?t:null}var Yh;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Yh||(Yh={}));const Oce=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function Pce(e){return e!=null&&Oce.has(e.type)}function sU(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function oU(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function aU(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Cce(e,t,r){const i=e==null?void 0:e.domain;if(!i)return null;switch(i.type){case"range":{const{min:n,max:s}=Rce(e);if(n!=null&&+t<n||s!=null&&+t>s)return Yh.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(i.codedValues==null||i.codedValues.every(n=>n==null||n.code!==t))return Yh.INVALID_CODED_VALUE}return null}function Rce(e,t){const r=e==null?void 0:e.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,n="range"in r?r.range[1]:r.maxValue,s=Pce(e);return sU(e)||aU(e)||oU(e)?{...Ace(e,n,i),isInteger:s}:{min:i!=null&&typeof i=="number"?i:null,max:n!=null&&typeof n=="number"?n:null,rawMin:i,rawMax:n,isInteger:s}}function Ace(e,t,r){var i,n,s,o,a,l;return sU(e)?{min:(i=q4(r))==null?void 0:i.toMillis(),max:(n=q4(t))==null?void 0:n.toMillis(),rawMin:r,rawMax:t}:aU(e)?{min:(s=B4(r))==null?void 0:s.toMillis(),max:(o=B4(t))==null?void 0:o.toMillis(),rawMin:r,rawMax:t}:oU(e)?{min:(a=H4(r))==null?void 0:a.toMillis(),max:(l=H4(t))==null?void 0:l.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}const Lce=()=>H.getLogger("esri.support.arcadeOnDemand");let x$;function xd(){return x$||(x$=(async()=>{const e=await ee(()=>import("./arcadeUtils-6cUoAphG.js").then(t=>t.aN),__vite__mapDeps([127,32,128,34,25,23,26]));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),x$}const Nce=(e,t,r)=>lU.create(e,t,r,null,["$feature","$view"],[]),Fce=(e,t,r,i)=>lU.create(e,t,r,i,["$feature","$view"],[]);let lU=class uU{constructor(t,r,i,n,s,o,a){this.services=null,this.script=t,this.evaluate=n;const l=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=l??[],this._syntaxTree=i,this._arcade=r,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,i,n,s,o){const{arcade:a,Feature:l,Dictionary:c}=await xd(),h=Pe.fromJSON(r);let f;try{f=a.parseScript(t,o)}catch(N){return Lce().error(new D("arcade-bad-expression","Failed to parse arcade script",{script:t,error:N})),null}const m=s.reduce((N,j)=>({...N,[j]:null}),{});let y=null;n!=null&&(y=new c(n),y.immutable=!0,m.$config=null);const g=a.scriptUsesGeometryEngine(f),v=g&&a.enableGeometrySupport(),b=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),w=a.scriptIsAsync(f),_=w&&a.enableAsyncSupport(),$={vars:m,spatialReference:h,useAsync:!!_};await Promise.all([v,b,_]);const E=new Set;await a.loadDependentModules(E,f,null,w,g);const k=new c;k.immutable=!1,k.setField("scale",0);const M=a.compileScript(f,$),P=(N,j)=>{var W;const G=(W=N.$view)==null?void 0:W.timeZone;return"$view"in N&&N.$view&&(k.setField("scale",typeof N.$view=="object"&&"scale"in N.$view?N.$view.scale:void 0),N.$view=k),y&&(N.$config=y),M({vars:N,spatialReference:h,services:j,timeZone:G})};return new uU(t,a,f,P,new l,i,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const Dce=/^([0-9_])/,jce=/[^a-z0-9_\u0080-\uffff]+/gi;function zce(e){return e==null?null:e.trim().replaceAll(jce,"_").replace(Dce,"F$1")||null}const Vce=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Uce=["field","normalizationField"];function W4(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(Z4(Vce,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)Z4(Uce,i,t)}}function Z4(e,t,r){if(e)for(const i of e){const n=j_(i,t),s=n&&typeof n!="function"&&r.get(n);s&&ri(i,s.name,t)}}function cU(e,t){var r;if(e!=null&&((r=t==null?void 0:t.fields)!=null&&r.length))if("startField"in e){const i=t.get(e.startField),n=t.get(e.endField);e.startField=(i==null?void 0:i.name)??null,e.endField=(n==null?void 0:n.name)??null}else{const i=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=(i==null?void 0:i.name)??null,e.endTimeField=(n==null?void 0:n.name)??null}}const T$=new Set;function $S(e,t){return e&&t?(T$.clear(),Td(T$,e,t),Array.from(T$).sort()):[]}function Td(e,t,r){var i;if(r)if((i=t==null?void 0:t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of r)bi(e,t,n);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const n of r)n!=null&&e.add(n)}}function bi(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function e3e(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(r=>r.name):t}function t3e(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const i=$S(e,t);return i.length/e.fields.length>=r?["*"]:i}async function ni(e,t,r){var s;if(!r)return;const{arcadeUtils:i}=await xd(),n=i.extractFieldNames(r,(s=t==null?void 0:t.fields)==null?void 0:s.map(o=>o.name));for(const o of n)bi(e,t,o)}async function dU(e,t,r){if(r&&r!=="1=1"){const i=await nU(r,t);if(!i.isStandardized)throw new D("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});Td(e,t,i.fieldNames)}}function Gce({displayField:e,fields:t}){return e||(t!=null&&t.length?M$(t,"name-or-title")||M$(t,"unique-identifier")||M$(t,"type-or-category")||qce(t):null)}function qce(e){for(const t of e){if(!(t!=null&&t.name))continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function M$(e,t){for(const r of e)if(r!=null&&r.valueType&&r.valueType===t)return r.name;return null}async function r3e(e,t){var i;if(!t)return;const r=(i=t.elevationInfo)==null?void 0:i.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function Bce(e,t,r){r.onStatisticExpression?ni(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function i3e(e,t,r){if(!t||!r||!("fields"in r))return;const i=[],n=r.popupTemplate;i.push(Hce(e,t,n)),r.fields&&i.push(...r.fields.map(async s=>Bce(e,t.fieldsIndex,s))),await Promise.all(i)}async function Hce(e,t,r){const i=[];r!=null&&r.expressionInfos&&i.push(...r.expressionInfos.map(s=>ni(e,t.fieldsIndex,s.expression)));const n=r==null?void 0:r.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&i.push(ni(e,t.fieldsIndex,s.expressionInfo.expression));await Promise.all(i)}async function n3e(e,t,r){t&&(t.timeInfo&&(r!=null&&r.timeExtent)&&Td(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Td(e,t.fieldsIndex,[t.floorInfo.floorField]),(r==null?void 0:r.where)!=null&&await dU(e,t.fieldsIndex,r.where))}async function s3e(e,t,r){t&&r&&await Promise.all(r.map(i=>Wce(e,t,i)))}async function Wce(e,t,r){t&&r&&(r.valueExpression?await ni(e,t.fieldsIndex,r.valueExpression):r.field&&bi(e,t.fieldsIndex,r.field))}function o3e(e){return e?$S(e.fieldsIndex,pU(e)):[]}function Zce(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?$S(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const Jce=new Set(["oid","global-id","guid"]),Kce=new Set(["oid","global-id"]),Yce=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function Qce(e){const t=new Set;hU(e).forEach(i=>t.add(i)),Zce(e).forEach(i=>t.add(i.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(i=>t.add(i.toLowerCase())),Object.values(r.transformFieldRoles).forEach(i=>t.add(i.toLowerCase()))),Array.from(t)}function pU(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:n,editorField:s}=t;return[r,i,n,s].filter(Boolean)}function hU(e){return pU(e).map(t=>t.toLowerCase())}function Xce(e,t){var r;return e.editable&&!Jce.has(e.type)&&!hU(t).includes(((r=e.name)==null?void 0:r.toLowerCase())??"")}function ede(e,t){var i;const r=((i=e.name)==null?void 0:i.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&r===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&r===t.globalIdField.toLowerCase()||Qce(t).includes(r)||Kce.has(e.type)||Yce.some(n=>n.test(r)))}async function a3e(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r!=null&&r.length&&await Promise.all(r.map(n=>tde(e,i,n)))}async function tde(e,t,r){if(!r)return;const i=r.getLabelExpression(),n=r.where;if(i.type==="arcade")await ni(e,t,i.expression);else{const s=i.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{bi(e,t,o.slice(1,-1))})}await dU(e,t,n)}function rde(e){const t=e.defaultValue;return t!==void 0&&yU(e,t)?t:e.nullable?null:void 0}function l3e(e){const t=typeof e=="string"?{type:e}:e;return fde(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function fU(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function ide(e){return e===null||fU(e)}function nde(e){return e===null||Number.isInteger(e)}function mU(e){return e!=null&&typeof e=="string"}function sde(e){return e===null||mU(e)}function ode(){return!0}function yU(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?nde:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?ide:fU;break;case"string":case"esriFieldTypeString":r=e.nullable?sde:mU;break;default:r=ode}return arguments.length===1?r:r(t)}const ade=["integer","small-integer","big-integer"],lde=["single","double"],ude=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],cde=["esriFieldTypeSingle","esriFieldTypeDouble"],dde=new Set([...ade,...ude]),pde=new Set([...lde,...cde]),hde=S8(dde,pde);function gU(e){return e!=null&&hde.has(e.type)}function fde(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function mde(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function u3e(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function c3e(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function yde(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function J4(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function K4(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function d3e(e,t){return gde(e,t)===null}var Yb,Qb;function p3e(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function gde(e,t){return e==null||e.nullable&&t===null?null:gU(e)&&!vde(e.type,Number(t))?Yb.OUT_OF_RANGE:yU(e,t)?e.domain?Cce(e,t):null:Qb.INVALID_TYPE}function vde(e,t){const r=typeof e=="string"?vU(e):e;if(!r)return!1;const i=r.min,n=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=n:t>=i&&t<=n}function vU(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return wde;case"esriFieldTypeInteger":case"integer":return bde;case"esriFieldTypeBigInteger":case"big-integer":return _de;case"esriFieldTypeSingle":case"single":return Sde;case"esriFieldTypeDouble":case"double":return $de}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Yb||(Yb={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Qb||(Qb={}));const wde={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},bde={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},_de={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Sde={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},$de={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function h3e(e,t,r){switch(e){case Yh.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Yh.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Qb.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Yb.OUT_OF_RANGE:{const{min:i,max:n}=vU(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${n}`}}}function f3e(e,t){return!xde(e,t,null)}function xde(e,t,r){if(!(t!=null&&t.attributes)||!e)return!0;const i=new Set(Object.keys(t.attributes));let n=!1;for(const s of e)if(!i.has(s)&&(n=!0,r==null))break;return n}function Tde(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function wU(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let F1=class extends q{constructor(t){super(t),this.type=null}};u([d({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],F1.prototype,"type",void 0),F1=u([T("esri.popup.content.Content")],F1);const Iu=F1;var LM;let Xu=LM=class extends Iu{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new LM({description:this.description,displayType:this.displayType,title:this.title})}};u([d({type:String,json:{write:!0}})],Xu.prototype,"description",void 0),u([d({type:["auto","preview","list"],json:{write:!0}})],Xu.prototype,"displayType",void 0),u([d({type:String,json:{write:!0}})],Xu.prototype,"title",void 0),u([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Xu.prototype,"type",void 0),Xu=LM=u([T("esri.popup.content.AttachmentsContent")],Xu);const $0=Xu;var NM;let ec=NM=class extends Iu{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new NM({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?C(this.outFields):null})}};u([d()],ec.prototype,"creator",void 0),u([d()],ec.prototype,"destroyer",void 0),u([d()],ec.prototype,"outFields",void 0),u([d({type:["custom"],readOnly:!0})],ec.prototype,"type",void 0),ec=NM=u([T("esri.popup.content.CustomContent")],ec);const Mde=ec;var FM;let cp=FM=class extends q{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new FM({title:this.title,expression:this.expression})}};u([d({type:String,json:{write:!0}})],cp.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],cp.prototype,"expression",void 0),u([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],cp.prototype,"returnType",void 0),cp=FM=u([T("esri.popup.ElementExpressionInfo")],cp);const Ede=cp;var DM;let xm=DM=class extends Iu{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new DM({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};u([d({type:Ede,json:{write:!0}})],xm.prototype,"expressionInfo",void 0),u([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],xm.prototype,"type",void 0),xm=DM=u([T("esri.popup.content.ExpressionContent")],xm);const fP=xm;let dp=class extends dt(q){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};u([fe(xae)],dp.prototype,"dateFormat",void 0),u([d({type:Boolean,json:{write:!0}})],dp.prototype,"digitSeparator",void 0),u([d({type:it,json:{write:!0}})],dp.prototype,"places",void 0),dp=u([T("esri.popup.support.FieldInfoFormat")],dp);const D1=dp;var jM;let os=jM=class extends q{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new jM({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};u([d({type:String,json:{write:!0}})],os.prototype,"fieldName",void 0),u([d({type:D1,json:{write:!0}})],os.prototype,"format",void 0),u([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],os.prototype,"isEditable",void 0),u([d({type:String,json:{write:!0}})],os.prototype,"label",void 0),u([fe(new De({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],os.prototype,"stringFieldOption",void 0),u([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],os.prototype,"statisticType",void 0),u([d({type:String,json:{write:!0}})],os.prototype,"tooltip",void 0),u([d({type:Boolean,json:{write:!0}})],os.prototype,"visible",void 0),os=jM=u([T("esri.popup.FieldInfo")],os);const mP=os;var zM;let Go=zM=class extends Iu{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new zM(C({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([d({type:Object,json:{write:!0}})],Go.prototype,"attributes",void 0),u([d({type:String,json:{write:!0}})],Go.prototype,"description",void 0),u([d({type:[mP]})],Go.prototype,"fieldInfos",void 0),u([X("fieldInfos")],Go.prototype,"writeFieldInfos",null),u([d({type:String,json:{write:!0}})],Go.prototype,"title",void 0),u([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Go.prototype,"type",void 0),Go=zM=u([T("esri.popup.content.FieldsContent")],Go);const x0=Go;let tc=class extends q{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};u([d({type:String,json:{write:!0}})],tc.prototype,"altText",void 0),u([d({type:String,json:{write:!0}})],tc.prototype,"caption",void 0),u([d({type:String,json:{write:!0}})],tc.prototype,"title",void 0),u([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],tc.prototype,"type",void 0),tc=u([T("esri.popup.content.mixins.MediaInfo")],tc);const yP=tc;var VM;let rc=VM=class extends we{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new VM({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([d()],rc.prototype,"color",void 0),u([d()],rc.prototype,"fieldName",void 0),u([d()],rc.prototype,"tooltip",void 0),u([d()],rc.prototype,"value",void 0),rc=VM=u([T("esri.popup.content.support.ChartMediaInfoValueSeries")],rc);const Ide=rc;var UM;let al=UM=class extends q{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new UM({colors:C(this.colors),fields:C(this.fields),normalizeField:this.normalizeField,series:C(this.series),tooltipField:this.tooltipField})}};u([d({type:[Se],json:{type:[[it]],write:!0}})],al.prototype,"colors",void 0),u([d({type:[String],json:{write:!0}})],al.prototype,"fields",void 0),u([d({type:String,json:{write:!0}})],al.prototype,"normalizeField",void 0),u([d({type:[Ide],json:{read:!1}})],al.prototype,"series",void 0),u([d({type:String,json:{write:!0}})],al.prototype,"tooltipField",void 0),al=UM=u([T("esri.popup.content.support.ChartMediaInfoValue")],al);const kde=al;let Tm=class extends yP{constructor(t){super(t),this.type=null,this.value=void 0}};u([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Tm.prototype,"type",void 0),u([d({type:kde,json:{write:!0}})],Tm.prototype,"value",void 0),Tm=u([T("esri.popup.content.mixins.ChartMediaInfo")],Tm);const xS=Tm,TS=si()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var GM;let j1=GM=class extends xS{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new GM({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:TS.write}})],j1.prototype,"type",void 0),j1=GM=u([T("esri.popup.content.BarChartMediaInfo")],j1);const bU=j1;var qM;let z1=qM=class extends xS{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new qM({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:TS.write}})],z1.prototype,"type",void 0),z1=qM=u([T("esri.popup.content.ColumnChartMediaInfo")],z1);const _U=z1;var BM;let Mm=BM=class extends q{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new BM({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([d({type:String,json:{write:!0}})],Mm.prototype,"linkURL",void 0),u([d({type:String,json:{write:!0}})],Mm.prototype,"sourceURL",void 0),Mm=BM=u([T("esri.popup.content.support.ImageMediaInfoValue")],Mm);const Ode=Mm;var HM;let pp=HM=class extends yP{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new HM({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:Number,json:{write:!0}})],pp.prototype,"refreshInterval",void 0),u([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],pp.prototype,"type",void 0),u([d({type:Ode,json:{write:!0}})],pp.prototype,"value",void 0),pp=HM=u([T("esri.popup.content.ImageMediaInfo")],pp);const SU=pp;var WM;let V1=WM=class extends xS{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new WM({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:TS.write}})],V1.prototype,"type",void 0),V1=WM=u([T("esri.popup.content.LineChartMediaInfo")],V1);const $U=V1;var ZM;let U1=ZM=class extends xS{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new ZM({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:TS.write}})],U1.prototype,"type",void 0),U1=ZM=u([T("esri.popup.content.PieChartMediaInfo")],U1);const xU=U1,TU={base:yP,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":bU,"column-chart":_U,"line-chart":$U,"pie-chart":xU,image:SU}};var JM;let as=JM=class extends Iu{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?SU.fromJSON(t):t.type==="barchart"?bU.fromJSON(t):t.type==="columnchart"?_U.fromJSON(t):t.type==="linechart"?$U.fromJSON(t):t.type==="piechart"?xU.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new JM(C({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([d()],as.prototype,"activeMediaInfoIndex",void 0),u([d({type:Object,json:{write:!0}})],as.prototype,"attributes",void 0),u([d({type:String,json:{write:!0}})],as.prototype,"description",void 0),u([d({types:[TU]})],as.prototype,"mediaInfos",void 0),u([J("mediaInfos")],as.prototype,"readMediaInfos",null),u([X("mediaInfos")],as.prototype,"writeMediaInfos",null),u([d({type:String,json:{write:!0}})],as.prototype,"title",void 0),u([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],as.prototype,"type",void 0),as=JM=u([T("esri.popup.content.MediaContent")],as);const Xb=as;var KM;let Em=KM=class extends q{constructor(e){super(e),this.field=null,this.order=null}clone(){return new KM({field:this.field,order:this.order})}};u([d({type:String,json:{write:!0}})],Em.prototype,"field",void 0),u([d({type:["asc","desc"],json:{write:!0}})],Em.prototype,"order",void 0),Em=KM=u([T("esri.popup.support.RelatedRecordsInfoFieldOrder")],Em);const gP=Em;let Ks=class extends dt(Iu){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};u([d({type:String,json:{write:!0}})],Ks.prototype,"description",void 0),u([d({type:Number,json:{type:it,write:!0}})],Ks.prototype,"displayCount",void 0),u([d({type:["list"],json:{write:!0}})],Ks.prototype,"displayType",void 0),u([d({type:[gP],json:{write:!0}})],Ks.prototype,"orderByFields",void 0),u([d({type:Number,json:{type:it,write:!0}})],Ks.prototype,"relationshipId",void 0),u([d({type:String,json:{write:!0}})],Ks.prototype,"title",void 0),u([d({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Ks.prototype,"type",void 0),Ks=u([T("esri.popup.content.RelationshipContent")],Ks);const e_=Ks;var YM;let Im=YM=class extends Iu{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new YM({text:this.text})}};u([d({type:String,json:{write:!0}})],Im.prototype,"text",void 0),u([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Im.prototype,"type",void 0),Im=YM=u([T("esri.popup.content.TextContent")],Im);const t_=Im,Pde={base:null,key:"type",typeMap:{attachment:$0,media:Xb,text:t_,expression:fP,field:x0,relationship:e_}};var QM;let ic=QM=class extends q{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new QM({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([d({type:String,json:{write:!0}})],ic.prototype,"name",void 0),u([d({type:String,json:{write:!0}})],ic.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],ic.prototype,"expression",void 0),u([d({type:["string","number"],json:{write:!0}})],ic.prototype,"returnType",void 0),ic=QM=u([T("esri.popup.ExpressionInfo")],ic);const Cde=ic;var XM;let km=XM=class extends q{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new XM({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([d({type:Boolean,json:{write:!0}})],km.prototype,"returnTopmostRaster",void 0),u([d({type:Boolean,json:{write:!0}})],km.prototype,"showNoDataRecords",void 0),km=XM=u([T("esri.popup.LayerOptions")],km);const Rde=km;var eE;let Om=eE=class extends q{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new eE({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?C(this.orderByFields):null})}};u([d({type:Boolean,json:{write:!0}})],Om.prototype,"showRelatedRecords",void 0),u([d({type:[gP],json:{write:!0}})],Om.prototype,"orderByFields",void 0),Om=eE=u([T("esri.popup.RelatedRecordsInfo")],Om);const Ade=Om;var tE;let Mn=tE=class extends eP(we){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new tE({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([d()],Mn.prototype,"active",void 0),u([d()],Mn.prototype,"className",void 0),u([d()],Mn.prototype,"disabled",void 0),u([d()],Mn.prototype,"icon",void 0),u([d()],Mn.prototype,"id",void 0),u([d()],Mn.prototype,"indicator",void 0),u([d()],Mn.prototype,"title",void 0),u([d()],Mn.prototype,"type",void 0),u([d()],Mn.prototype,"visible",void 0),Mn=tE=u([T("esri.support.actions.ActionBase")],Mn);const vP=Mn;var rE;let G1=rE=class extends vP{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new rE({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([d()],G1.prototype,"image",void 0),G1=rE=u([T("esri.support.actions.ActionButton")],G1);const Lde=G1;var iE;let Pm=iE=class extends vP{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new iE({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([d()],Pm.prototype,"image",void 0),u([d()],Pm.prototype,"value",void 0),Pm=iE=u([T("esri.support.actions.ActionToggle")],Pm);const Nde=Pm,im="relationships/",Y4="expression/",Fde=ce.ofType({key:"type",defaultKeyValue:"button",base:vP,typeMap:{button:Lde,toggle:Nde}}),Dde={base:Iu,key:"type",typeMap:{media:Xb,custom:Mde,text:t_,attachments:$0,fields:x0,expression:fP,relationship:e_}},jde=new Set(["attachments","fields","media","text","expression","relationship"]);let pr=class extends dt(q){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(r=>So(Dde,r)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Su(t)?t:(H.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeContent(t,r,i,n){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter(s=>jde.has(s.type)).map(s=>s==null?void 0:s.toJSON(n)),r.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(r):s.type==="media"?this._writeMediaContent(s,r):s.type==="text"?this._writeTextContent(s,r):s.type==="relationship"&&this._writeRelationshipContent(s,r)})):r.description=t}writeFieldInfos(t,r,i,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(t){const a=o?o.filter(c=>c.type==="fields"):[],l=a.length&&a.every(c=>{var h;return(h=c.fieldInfos)==null?void 0:h.length});r.fieldInfos=t.filter(Boolean).map(c=>{const h=c.toJSON(n);return l&&(h.visible=!1),h})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,r)}writeLayerOptions(t,r,i,n){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(n)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),Td(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=C(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach(n=>{const s=r.fieldInfos.find(o=>{var a,l;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((l=n.fieldName)==null?void 0:l.toLowerCase())});s?s.visible=!0:r.fieldInfos.push(n)}):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){var s,o;const i=((s=t.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,t.relationshipId)))||[],n=[...((o=r.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=C(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const n={description:!1,mediaInfos:!1};return i.map(s=>s.type==="media"?(s.mediaInfos||!r||n.mediaInfos||(s.mediaInfos=r,n.mediaInfos=!0),Xb.fromJSON(s)):s.type==="text"?(s.text||!t||n.description||(s.text=t,n.description=!0),t_.fromJSON(s)):s.type==="attachments"?$0.fromJSON(s):s.type==="fields"?x0.fromJSON(s):s.type==="expression"?fP.fromJSON(s):s.type==="relationship"?e_.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!(r!=null&&r.startsWith(im)))return null;const n=r.replace(im,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return typeof s=="number"&&o?e_.fromJSON({relationshipId:s,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:n}=t;return{field:`${im}${r}/${n}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];t?s.push(new t_({text:t})):s.push(new x0),Array.isArray(r)&&r.length&&s.push(Xb.fromJSON({mediaInfos:r})),i&&s.push($0.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&(a!=null&&a.length)&&a.forEach(l=>{const c=this._toRelationshipContent(l);c&&s.push(c)}),s.length?s:t}_getContentElementFields(t){const r=t==null?void 0:t.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return r==="text"?this._extractFieldNames(t.text):[]}_getMediaInfoFields(t){const{caption:r,title:i,value:n}=t,s=n||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:h}=s,f=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(c),...this._extractFieldNames(h),...o??[]];return a&&f.push(a),l&&f.push(l),f}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce((i,n)=>[...i,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map(n=>ni(t,r,n.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(im)||r.startsWith(Y4))).map(r=>r.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(t){const{className:r,title:i,type:n}=t,s=n==="button"||n==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(s)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return wU(t).filter(r=>!(r.indexOf(im)===0||r.indexOf(Y4)===0))}};u([d({type:Fde})],pr.prototype,"actions",void 0),u([d()],pr.prototype,"content",void 0),u([et("content")],pr.prototype,"castContent",null),u([J("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],pr.prototype,"readContent",null),u([X("content",{popupElements:{type:ce.ofType(Pde)},showAttachments:{type:Boolean},mediaInfos:{type:ce.ofType(TU)},description:{type:String},relatedRecordsInfo:{type:Ade}})],pr.prototype,"writeContent",null),u([d({type:[Cde],json:{write:!0}})],pr.prototype,"expressionInfos",void 0),u([d({type:[mP]})],pr.prototype,"fieldInfos",void 0),u([X("fieldInfos")],pr.prototype,"writeFieldInfos",null),u([d({type:Rde})],pr.prototype,"layerOptions",void 0),u([X("layerOptions")],pr.prototype,"writeLayerOptions",null),u([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],pr.prototype,"lastEditInfoEnabled",void 0),u([d()],pr.prototype,"outFields",void 0),u([d()],pr.prototype,"overwriteActions",void 0),u([d()],pr.prototype,"returnGeometry",void 0),u([d({json:{type:String}})],pr.prototype,"title",void 0),u([X("title")],pr.prototype,"writeTitle",null),pr=u([T("esri.PopupTemplate")],pr);const ag=pr,Q4=new De({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let zde=0,hp=class extends q{constructor(t){super(t),this.id="sym"+zde++,this.type=null,this.color=new Se([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([d({type:Q4.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Q4.write}}})],hp.prototype,"type",void 0),u([d({type:Se,json:{write:{allowNull:!0}}})],hp.prototype,"color",void 0),u([J("color")],hp.prototype,"readColor",null),hp=u([T("esri.symbols.Symbol")],hp);const zr=hp;var nE;let ll=nE=class extends zr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var r;if(((r=this.data)==null?void 0:r.type)==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const n=i.map(s=>{const o=s.valueExpressionInfo;return o?ni(e,t,o.expression):null});await Promise.all(n)}}}clone(){return new nE({data:C(this.data)})}hash(){return Q6(JSON.stringify(this.data)).toString()}};u([d({json:{write:!1}})],ll.prototype,"color",void 0),u([d({json:{write:!0}})],ll.prototype,"data",void 0),u([J("data",["symbol"])],ll.prototype,"readData",null),u([X("data",{})],ll.prototype,"writeData",null),u([fe({CIMSymbolReference:"cim"},{readOnly:!0})],ll.prototype,"type",void 0),ll=nE=u([T("esri.symbols.CIMSymbol")],ll);const ku=ll;let fp=class extends q{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};u([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],fp.prototype,"enabled",void 0),u([X("enabled")],fp.prototype,"writeEnabled",null),u([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],fp.prototype,"type",void 0),fp=u([T("esri.symbols.Symbol3DLayer")],fp);const ko=fp;function Vde(e,t){const r=t.transparency!=null?g0(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new Se([i[0]||0,i[1]||0,i[2]||0,r]):null}function Ude(e,t){t.color=e.toJSON().slice(0,3);const r=aS(e.a);r!==0&&(t.transparency=r)}const Ou={type:Se,json:{type:[it],default:null,read:{source:["color","transparency"],reader:Vde},write:{target:{color:{type:[it]},transparency:{type:it}},writer:Ude}}},Io={type:Number,cast:ze,json:{write:!0}};let nc=class extends q{constructor(t){super(t),this.color=new Se([0,0,0,1]),this.extensionLength=0,this.size=Jn(1)}clone(){}cloneProperties(){return{color:C(this.color),size:this.size,extensionLength:this.extensionLength}}};u([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],nc.prototype,"type",void 0),u([d(Ou)],nc.prototype,"color",void 0),u([d({...Io,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],nc.prototype,"extensionLength",void 0),u([d(Io)],nc.prototype,"size",void 0),nc=u([T("esri.symbols.edges.Edges3D")],nc);const wP=nc;var sE;let q1=sE=class extends wP{constructor(e){super(e),this.type="sketch"}clone(){return new sE(this.cloneProperties())}};u([fe({sketch:"sketch"},{readOnly:!0})],q1.prototype,"type",void 0),q1=sE=u([T("esri.symbols.edges.SketchEdges3D")],q1);const Gde=q1;var oE;let B1=oE=class extends wP{constructor(e){super(e),this.type="solid"}clone(){return new oE(this.cloneProperties())}};u([fe({solid:"solid"},{readOnly:!0})],B1.prototype,"type",void 0),B1=oE=u([T("esri.symbols.edges.SolidEdges3D")],B1);const MU=B1,EU={types:{key:"type",base:wP,typeMap:{solid:MU,sketch:Gde}},json:{write:!0}};var aE;let qn=aE=class extends q{constructor(e){super(e),this.color=null}clone(){const e={color:this.color!=null?this.color.clone():null};return new aE(e)}};u([d(Ou)],qn.prototype,"color",void 0),qn=aE=u([T("esri.symbols.support.Symbol3DMaterial")],qn);var lE;let ul=lE=class extends ko{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new lE({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};u([fe({Extrude:"extrude"},{readOnly:!0})],ul.prototype,"type",void 0),u([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],ul.prototype,"size",void 0),u([d({type:qn,json:{write:!0}})],ul.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ul.prototype,"castShadows",void 0),u([d(EU)],ul.prototype,"edges",void 0),ul=lE=u([T("esri.symbols.ExtrudeSymbol3DLayer")],ul);const IU=ul;let Cm=class extends zr{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([fe({esriSLS:"simple-line"},{readOnly:!0})],Cm.prototype,"type",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],Cm.prototype,"width",void 0),Cm=u([T("esri.symbols.LineSymbol")],Cm);const qde=Cm,Bde=["begin","end","begin-end"],kU=["arrow","circle","square","diamond","cross","x"];var uE;let Ys=uE=class extends q{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=(i==null?void 0:i.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){(i==null?void 0:i.origin)==="web-map"||(t[r]=e)}clone(){return new uE({color:C(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};u([d({type:["begin","end","begin-end"],json:{write:!0}})],Ys.prototype,"placement",void 0),u([fe({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],Ys.prototype,"type",void 0),u([d({type:kU})],Ys.prototype,"style",void 0),u([X("style")],Ys.prototype,"writeStyle",null),u([d({type:Se,value:null,json:{write:{allowNull:!0}}})],Ys.prototype,"color",null),u([J("color")],Ys.prototype,"readColor",null),u([X("color")],Ys.prototype,"writeColor",null),Ys=uE=u([T("esri.symbols.LineSymbolMarker")],Ys);const Hde=Ys;var cE;const E$=new De({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let qo=cE=class extends qde{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,n,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=ze(r)),i!=null&&(o.cap=i),n!=null&&(o.join=n),s!=null&&(o.miterLimit=ze(s)),o}clone(){var e;return new cE({color:C(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};u([fe({esriSLS:"simple-line"},{readOnly:!0})],qo.prototype,"type",void 0),u([d({type:E$.apiValues,json:{read:E$.read,write:E$.write}})],qo.prototype,"style",void 0),u([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],qo.prototype,"cap",void 0),u([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],qo.prototype,"join",void 0),u([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Hde}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],qo.prototype,"marker",void 0),u([d({type:Number,json:{read:!1,write:!1}})],qo.prototype,"miterLimit",void 0),qo=cE=u([T("esri.symbols.SimpleLineSymbol")],qo);const yn=qo;let Rm=class extends zr{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};u([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":yn}},json:{default:null,write:!0}})],Rm.prototype,"outline",void 0),u([d({type:["simple-fill","picture-fill"],readOnly:!0})],Rm.prototype,"type",void 0),Rm=u([T("esri.symbols.FillSymbol")],Rm);const OU=Rm;let H1=class extends q{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],H1.prototype,"type",void 0),H1=u([T("esri.symbols.patterns.LinePattern3D")],H1);const PU=H1,Wde=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var dE;const Zde=si()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Am=dE=class extends PU{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new dE(e)}};u([d({type:["style"]})],Am.prototype,"type",void 0),u([fe(Zde),d({type:Wde})],Am.prototype,"style",void 0),Am=dE=u([T("esri.symbols.patterns.LineStylePattern3D")],Am);const bP=Am;let W1=class extends q{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],W1.prototype,"type",void 0),W1=u([T("esri.symbols.patterns.Pattern3D")],W1);const CU=W1,Jde=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var pE;let Lm=pE=class extends CU{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new pE({style:this.style})}};u([d({type:["style"]})],Lm.prototype,"type",void 0),u([d({type:Jde,json:{read:!0,write:!0}})],Lm.prototype,"style",void 0),Lm=pE=u([T("esri.symbols.patterns.StylePattern3D")],Lm);const RU=Lm,Kde={types:{key:"type",base:CU,typeMap:{style:RU}},json:{write:!0}},AU={types:{key:"type",base:PU,typeMap:{style:bP}},json:{write:!0}},Ly=new Se("white");new Se("black");const Yde=new Se([255,255,255,0]);function Qde(e){return e.r===0&&e.g===0&&e.b===0}var hE;let Ny=hE=class extends qn{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new hE(e)}};u([fe({multiply:"multiply",replace:"replace",tint:"tint"})],Ny.prototype,"colorMixMode",void 0),Ny=hE=u([T("esri.symbols.support.Symbol3DFillMaterial")],Ny);function _P(e=ipe){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function SP(e,t,r,i,n,s,o=_P()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function I3e(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new ct(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function k3e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function O3e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function P3e(e,t,r=0,i=t.length/3){let n=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5];for(let h=0;h<i;h++)n=Math.min(n,t[r+3*h]),s=Math.min(s,t[r+3*h+1]),o=Math.min(o,t[r+3*h+2]),a=Math.max(a,t[r+3*h]),l=Math.max(l,t[r+3*h+1]),c=Math.max(c,t[r+3*h+2]);e[0]=n,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=c}function Xde(e){return e[0]>=e[3]?0:e[3]-e[0]}function epe(e){return e[1]>=e[4]?0:e[4]-e[1]}function tpe(e){return e[2]>=e[5]?0:e[5]-e[2]}function C3e(e,t=[0,0,0]){return t[0]=Xde(e),t[1]=epe(e),t[2]=tpe(e),t}function R3e(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function A3e(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function rpe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function L3e(e){return e?rpe(e,eN):_P(eN)}function N3e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function F3e(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function X4(e){return e.length===6}function D3e(e,t,r){if(e==null||t==null)return e===t;if(!X4(e)||!X4(t))return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const eN=[1/0,1/0,1/0,-1/0,-1/0,-1/0],ipe=[0,0,0,0,0,0];_P();const npe=SP(-.5,-.5,-.5,.5,.5,.5),spe=SP(-.5,-.5,0,.5,.5,1),ope=SP(-.5,-.5,0,.5,.5,.5);function j3e(e){switch(e){case"sphere":case"cube":case"diamond":return npe;case"cylinder":case"cone":case"inverted-cone":return spe;case"tetrahedron":return ope;default:return}}const $P=["butt","square","round"],ape=[...$P,"none"],LU=["miter","bevel","round"];var fE;let sc=fE=class extends q{constructor(e){super(e),this.color=new Se([0,0,0,1]),this.size=Jn(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new fE(e)}};u([d(Ou)],sc.prototype,"color",void 0),u([d(Io)],sc.prototype,"size",void 0),u([d(AU)],sc.prototype,"pattern",void 0),u([d({type:$P,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],sc.prototype,"patternCap",void 0),sc=fE=u([T("esri.symbols.support.Symbol3DOutline")],sc);var Z1;let Bo=Z1=class extends ko{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Z1(e)}static fromSimpleFillSymbol(e){var i,n,s;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new bP({style:e.outline.style}):null,r={size:((i=e.outline)==null?void 0:i.width)??0,color:(((n=e.outline)==null?void 0:n.color)??Ly).clone(),pattern:t};return t&&((s=e.outline)!=null&&s.cap)&&(r.patternCap=e.outline.cap),new Z1({material:new Ny({color:(e.color??Yde).clone()}),pattern:e.style&&e.style!=="solid"?new RU({style:e.style}):null,outline:r})}};u([fe({Fill:"fill"},{readOnly:!0})],Bo.prototype,"type",void 0),u([d({type:Ny,json:{write:!0}})],Bo.prototype,"material",void 0),u([d(Kde)],Bo.prototype,"pattern",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Bo.prototype,"castShadows",void 0),u([d({type:sc,json:{write:!0}})],Bo.prototype,"outline",void 0),u([d(EU)],Bo.prototype,"edges",void 0),Bo=Z1=u([T("esri.symbols.FillSymbol3DLayer")],Bo);const Dd=Bo,lpe=["none","underline","line-through"],upe=["normal","italic","oblique"],cpe=["normal","lighter","bold","bolder"],NU={type:Number,cast:e=>{const t=An(e);return t===0?1:Rs(t,.1,4)},nonNullable:!0},dpe=["left","right","center"],ppe=["baseline","top","middle","bottom"],FU={type:dpe,nonNullable:!0},DU={type:ppe,nonNullable:!0},z3e=8;var mE;let Ho=mE=class extends q{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return ze(e)}clone(){return new mE({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([d({type:lpe,json:{default:"none",write:!0}})],Ho.prototype,"decoration",void 0),u([d({type:String,json:{write:!0}})],Ho.prototype,"family",void 0),u([d({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],Ho.prototype,"size",void 0),u([et("size")],Ho.prototype,"castSize",null),u([d({type:upe,json:{default:"normal",write:!0}})],Ho.prototype,"style",void 0),u([d({type:cpe,json:{default:"normal",write:!0}})],Ho.prototype,"weight",void 0),Ho=mE=u([T("esri.symbols.Font")],Ho);const MS=Ho;var yE;const hpe=si()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let oc=yE=class extends q{constructor(e){super(e)}readHref(e,t,r){return e?lf(e,r):t.dataURI}writeHref(e,t,r,i){e&&(Rd(e)?t.dataURI=e:(t.href=tg(e,i),ln(t.href)&&(t.href=Ms(t.href))))}clone(){return new yE({href:this.href,primitive:this.primitive})}};u([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],oc.prototype,"href",void 0),u([J("href")],oc.prototype,"readHref",null),u([X("href",{href:{type:String},dataURI:{type:String}})],oc.prototype,"writeHref",null),u([fe(hpe)],oc.prototype,"primitive",void 0),oc=yE=u([T("esri.symbols.support.IconSymbol3DLayerResource")],oc);var gE;let nh=gE=class extends we{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new gE({x:this.x,y:this.y})}};u([d({type:Number})],nh.prototype,"x",void 0),u([d({type:Number})],nh.prototype,"y",void 0),nh=gE=u([T("esri.symbols.support.Symbol3DAnchorPosition2D")],nh);var vE;let Nm=vE=class extends q{constructor(e){super(e),this.color=new Se([0,0,0,1]),this.size=Jn(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new vE(e)}};u([d(Ou)],Nm.prototype,"color",void 0),u([d(Io)],Nm.prototype,"size",void 0),Nm=vE=u([T("esri.symbols.support.Symbol3DIconOutline")],Nm);var mp;const jU="esri.symbols.IconSymbol3DLayer";let Qs=mp=class extends ko{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new mp({anchor:this.anchor,anchorPosition:C(this.anchorPosition),enabled:this.enabled,material:C(this.material),outline:C(this.outline),resource:C(this.resource),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Ly,r=tN(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Ly).clone()}:null;return new mp({size:e.size,resource:{primitive:mpe(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||Qde(e.color)?Ly:e.color,r=tN(e);return new mp({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new mp({resource:{href:rz({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};u([d({type:qn,json:{write:!0}})],Qs.prototype,"material",void 0),u([d({type:oc,json:{write:!0}})],Qs.prototype,"resource",void 0),u([fe({Icon:"icon"},{readOnly:!0})],Qs.prototype,"type",void 0),u([d(Io)],Qs.prototype,"size",void 0),u([fe({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d({json:{default:"center"}})],Qs.prototype,"anchor",void 0),u([d({type:nh,json:{type:[Number],read:{reader:e=>new nh({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Qs.prototype,"anchorPosition",void 0),u([d({type:Nm,json:{write:!0}})],Qs.prototype,"outline",void 0),Qs=mp=u([T(jU)],Qs);const Bc=Qs;function tN(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=rN(e.xoffset),n=rN(e.yoffset);return(i||n)&&t&&r?{x:-i/t,y:n/r}:null}function rN(e){return isFinite(e)?e:0}const fpe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function mpe(e){return fpe[e]||(H.getLogger(jU).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let ac=class extends dt(q){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ac.prototype,"type",void 0),u([d({type:Bde,json:{default:"begin-end",write:!0}})],ac.prototype,"placement",void 0),u([d({type:kU,json:{default:"arrow",write:!0}})],ac.prototype,"style",void 0),u([d({type:Se,json:{type:[it],default:null,write:!0}})],ac.prototype,"color",void 0),ac=u([T("esri.symbols.LineStyleMarker3D")],ac);const wE=ac;var J1;let Xs=J1=class extends ko{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Jn(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new J1(e)}static fromSimpleLineSymbol(e){var r;const t={enabled:!0,size:e.width??Jn(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new bP({style:e.style}):null,material:new qn({color:(e.color||Ly).clone()}),marker:e.marker?new wE({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new J1(t)}};u([d({type:qn,json:{write:!0}})],Xs.prototype,"material",void 0),u([fe({Line:"line"},{readOnly:!0})],Xs.prototype,"type",void 0),u([d({type:LU,json:{write:!0,default:"miter"}})],Xs.prototype,"join",void 0),u([d({type:$P,json:{write:!0,default:"butt"}})],Xs.prototype,"cap",void 0),u([d(Io)],Xs.prototype,"size",void 0),u([d(AU)],Xs.prototype,"pattern",void 0),u([d({types:{key:"type",base:wE,typeMap:{style:wE}},json:{write:!0}})],Xs.prototype,"marker",void 0),Xs=J1=u([T("esri.symbols.LineSymbol3DLayer")],Xs);const ff=Xs;var bE;const ype=si()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Fm=bE=class extends q{clone(){return new bE({href:this.href,primitive:this.primitive})}};u([d({type:String,json:{read:PO,write:_d}})],Fm.prototype,"href",void 0),u([fe(ype)],Fm.prototype,"primitive",void 0),Fm=bE=u([T("esri.symbols.support.ObjectSymbol3DLayerResource")],Fm);var _E;let Rc=_E=class extends we{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new _E({x:this.x,y:this.y,z:this.z})}};u([d({type:Number})],Rc.prototype,"x",void 0),u([d({type:Number})],Rc.prototype,"y",void 0),u([d({type:Number})],Rc.prototype,"z",void 0),Rc=_E=u([T("esri.symbols.support.Symbol3DAnchorPosition3D")],Rc);var SE;let Wr=SE=class extends ko{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,r;return new SE({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};u([d({type:qn,json:{write:!0}})],Wr.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Wr.prototype,"castShadows",void 0),u([d({type:Fm,json:{write:!0}})],Wr.prototype,"resource",void 0),u([fe({Object:"object"},{readOnly:!0})],Wr.prototype,"type",void 0),u([d({type:Number,json:{write:!0}})],Wr.prototype,"width",void 0),u([d({type:Number,json:{write:!0}})],Wr.prototype,"height",void 0),u([d({type:Number,json:{write:!0}})],Wr.prototype,"depth",void 0),u([fe({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d({json:{default:"origin"}})],Wr.prototype,"anchor",void 0),u([d({type:Rc,json:{type:[Number],read:{reader:e=>new Rc({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Wr.prototype,"anchorPosition",void 0),u([d({type:Number,json:{write:!0}})],Wr.prototype,"heading",void 0),u([d({type:Number,json:{write:!0}})],Wr.prototype,"tilt",void 0),u([d({type:Number,json:{write:!0}})],Wr.prototype,"roll",void 0),u([d({readOnly:!0})],Wr.prototype,"isPrimitive",null),Wr=SE=u([T("esri.symbols.ObjectSymbol3DLayer")],Wr);const xP=Wr;var $E;let ui=$E=class extends ko{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new $E({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};u([d({type:qn,json:{write:!0}})],ui.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ui.prototype,"castShadows",void 0),u([fe({Path:"path"},{readOnly:!0})],ui.prototype,"type",void 0),u([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],ui.prototype,"profile",void 0),u([d({type:LU,json:{write:!0,default:"miter"}})],ui.prototype,"join",void 0),u([d({type:ape,json:{write:!0,default:"butt"}})],ui.prototype,"cap",void 0),u([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],ui.prototype,"width",void 0),u([J("width",["width","size","height"])],ui.prototype,"readWidth",null),u([d({type:Number,json:{write:!0}})],ui.prototype,"height",void 0),u([J("height",["height","size","width"])],ui.prototype,"readHeight",null),u([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],ui.prototype,"anchor",void 0),u([d({type:["heading","all"],json:{write:!0,default:"all"}})],ui.prototype,"profileRotation",void 0),ui=$E=u([T("esri.symbols.PathSymbol3DLayer")],ui);const TP=ui;var xE;let sh=xE=class extends q{constructor(){super(...arguments),this.color=new Se([0,0,0,1]),this.size=0}clone(){const e={color:C(this.color),size:this.size};return new xE(e)}};u([d(Ou)],sh.prototype,"color",void 0),u([d(Io)],sh.prototype,"size",void 0),sh=xE=u([T("esri.symbols.support.Symbol3DHalo")],sh);let Fy=class extends dt(q){constructor(t){super(t),this.color=null}};u([d(Ou)],Fy.prototype,"color",void 0),Fy=u([T("esri.symbols.support.Symbol3DTextBackground")],Fy);var K1;let Ti=K1=class extends ko{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const n={...i,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new K1({enabled:this.enabled,font:this.font&&C(this.font),halo:this.halo&&C(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:C(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new K1({font:e.font!=null?e.font.clone():new MS,halo:gpe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new qn({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Fy({color:e.backgroundColor.clone()}):null})}};function gpe(e,t){return e&&t!=null&&t>0?new sh({color:C(e),size:t}):null}u([d({type:MS,json:{write:!0}})],Ti.prototype,"font",null),u([X("font")],Ti.prototype,"writeFont",null),u([d({type:sh,json:{write:!0}})],Ti.prototype,"halo",void 0),u([d({...FU,json:{default:"center",write:!0}})],Ti.prototype,"horizontalAlignment",void 0),u([d({...NU,json:{default:1,write:!0}})],Ti.prototype,"lineHeight",void 0),u([d({type:qn,json:{write:!0}})],Ti.prototype,"material",void 0),u([d({type:Fy,json:{write:!0}})],Ti.prototype,"background",void 0),u([d(Io)],Ti.prototype,"size",null),u([d({type:String,json:{write:!0}})],Ti.prototype,"text",void 0),u([fe({Text:"text"},{readOnly:!0})],Ti.prototype,"type",void 0),u([d({...DU,json:{default:"baseline",write:!0}})],Ti.prototype,"verticalAlignment",void 0),Ti=K1=u([T("esri.symbols.TextSymbol3DLayer")],Ti);const mf=Ti;var TE;let cl=TE=class extends ko{constructor(e){super(e),this.color=ME.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new TE({color:C(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};u([d({type:Se,nonNullable:!0,json:{type:[it],write:(e,t,r)=>t[r]=e.toArray(Se.AlphaMode.UNLESS_OPAQUE),default:()=>ME.clone(),defaultEquals:e=>e.toCss(!0)===ME.toCss(!0)}})],cl.prototype,"color",void 0),u([fe({Water:"water"},{readOnly:!0})],cl.prototype,"type",void 0),u([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],cl.prototype,"waterbodySize",void 0),u([d({type:Number,json:{write:!0,default:null}})],cl.prototype,"waveDirection",void 0),u([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],cl.prototype,"waveStrength",void 0),cl=TE=u([T("esri.symbols.WaterSymbol3DLayer")],cl);const zU=cl,ME=new Se([0,119,190]);var EE;let lc=EE=class extends we{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new EE({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([d({type:String})],lc.prototype,"name",void 0),u([d({type:String})],lc.prototype,"styleUrl",void 0),u([d({type:String})],lc.prototype,"styleName",void 0),u([d({type:Ui})],lc.prototype,"portal",void 0),lc=EE=u([T("esri.symbols.support.StyleOrigin")],lc);const IE=lc;var kE;let Dy=kE=class extends we{constructor(){super(...arguments),this.url=""}clone(){return new kE({url:this.url})}};u([d({type:String})],Dy.prototype,"url",void 0),Dy=kE=u([T("esri.symbols.support.Thumbnail")],Dy);const VU={icon:Bc,object:xP,line:ff,path:TP,fill:Dd,extrude:IU,text:mf,water:zU},vpe=ce.ofType({base:ko,key:"type",typeMap:VU,errorContext:"symbol-layer"});let eo=class extends zr{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r==null?void 0:r.type,n=i||ce;this._set("symbolLayers",new n)}get color(){return null}set color(t){this.constructed&&H.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){lu(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const n=lf(t.styleUrl,i);return new IE({styleUrl:n,name:t.name})}if(t.styleName&&t.name)return new IE({portal:(i==null?void 0:i.portal)||Ui.getDefault(),styleName:t.styleName,name:t.name});i!=null&&i.messages&&i.messages.push(new Zn("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,n){if(t.styleUrl&&t.name){let s=tg(t.styleUrl,n);ln(s)&&(s=Ms(s)),r.styleOrigin={styleUrl:s,name:t.name}}else t.styleName&&t.name&&(t.portal&&(n!=null&&n.portal)&&!tz(t.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new Zn("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof ko||t&&VU[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};u([d({json:{read:!1,write:!1}})],eo.prototype,"color",null),u([d({type:vpe,nonNullable:!0,json:{write:!0}}),et(fz)],eo.prototype,"symbolLayers",null),u([d({type:IE})],eo.prototype,"styleOrigin",void 0),u([J("styleOrigin")],eo.prototype,"readStyleOrigin",null),u([X("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],eo.prototype,"writeStyleOrigin",null),u([d({type:Dy,json:{read:!1}})],eo.prototype,"thumbnail",void 0),u([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],eo.prototype,"type",void 0),eo=u([T("esri.symbols.Symbol3D")],eo);const yf=eo;let Dm=class extends q{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};u([d({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Dm.prototype,"type",void 0),u([d({readOnly:!0})],Dm.prototype,"visible",void 0),Dm=u([T("esri.symbols.callouts.Callout3D")],Dm);const UU=Dm;var OE;let Y1=OE=class extends q{constructor(e){super(e),this.color=new Se("white")}clone(){return new OE({color:C(this.color)})}};u([d(Ou)],Y1.prototype,"color",void 0),Y1=OE=u([T("esri.symbols.callouts.LineCallout3DBorder")],Y1);const wpe=Y1;var PE;let dl=PE=class extends UU{constructor(e){super(e),this.type="line",this.color=new Se([0,0,0,1]),this.size=Jn(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new PE({color:C(this.color),size:this.size,border:C(this.border)})}};u([fe({line:"line"})],dl.prototype,"type",void 0),u([d(Ou)],dl.prototype,"color",void 0),u([d(Io)],dl.prototype,"size",void 0),u([d({type:wpe,json:{write:!0}})],dl.prototype,"border",void 0),u([d({readOnly:!0})],dl.prototype,"visible",null),dl=PE=u([T("esri.symbols.callouts.LineCallout3D")],dl);const GU=dl;function MP(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function qU(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!MP(e)}const BU={types:{key:"type",base:UU,typeMap:{line:GU}},json:{write:!0}};var CE;let yp=CE=class extends q{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new CE({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([d(Io)],yp.prototype,"screenLength",void 0),u([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],yp.prototype,"minWorldLength",void 0),u([d({type:Number,json:{write:!0}})],yp.prototype,"maxWorldLength",void 0),yp=CE=u([T("esri.symbols.support.Symbol3DVerticalOffset")],yp);const EP=yp;var Q1;const HU=ce.ofType({base:null,key:"type",typeMap:{text:mf}});let pl=Q1=class extends yf{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new HU,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return qU(this)}hasVisibleVerticalOffset(){return MP(this)}clone(){return new Q1({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail),callout:C(this.callout),verticalOffset:C(this.verticalOffset)})}static fromTextSymbol(e){return new Q1({symbolLayers:new ce([mf.fromTextSymbol(e)])})}};u([d({type:EP,json:{write:!0}})],pl.prototype,"verticalOffset",void 0),u([d(BU)],pl.prototype,"callout",void 0),u([d({json:{read:!1,write:!1}})],pl.prototype,"styleOrigin",void 0),u([d({type:HU})],pl.prototype,"symbolLayers",void 0),u([fe({LabelSymbol3D:"label-3d"},{readOnly:!0})],pl.prototype,"type",void 0),pl=Q1=u([T("esri.symbols.LabelSymbol3D")],pl);const ES=pl;var X1;const WU=ce.ofType({base:null,key:"type",typeMap:{line:ff,path:TP}}),bpe=ce.ofType({base:null,key:"type",typeMap:{line:ff,path:TP}});let jm=X1=class extends yf{constructor(e){super(e),this.symbolLayers=new WU,this.type="line-3d"}clone(){return new X1({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleLineSymbol(e){return new X1({symbolLayers:new ce([ff.fromSimpleLineSymbol(e)])})}};u([d({type:WU,json:{type:bpe}})],jm.prototype,"symbolLayers",void 0),u([fe({LineSymbol3D:"line-3d"},{readOnly:!0})],jm.prototype,"type",void 0),jm=X1=u([T("esri.symbols.LineSymbol3D")],jm);const jd=jm;let hl=class extends zr{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],hl.prototype,"angle",void 0),u([d({type:["simple-marker","picture-marker"],readOnly:!0})],hl.prototype,"type",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],hl.prototype,"xoffset",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],hl.prototype,"yoffset",void 0),u([d({type:Number,cast:e=>e==="auto"?e:ze(e),json:{write:!0}})],hl.prototype,"size",void 0),hl=u([T("esri.symbols.MarkerSymbol")],hl);const ZU=hl;var ew;const JU=ce.ofType({base:null,key:"type",typeMap:{fill:Dd}});let zm=ew=class extends yf{constructor(e){super(e),this.symbolLayers=new JU,this.type="mesh-3d"}clone(){return new ew({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleFillSymbol(e){return new ew({symbolLayers:new ce([Dd.fromSimpleFillSymbol(e)])})}};u([d({type:JU})],zm.prototype,"symbolLayers",void 0),u([fe({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],zm.prototype,"type",void 0),zm=ew=u([T("esri.symbols.MeshSymbol3D")],zm);const lg=zm;function _pe(e,t,r){return t.imageData?rz({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):KU(t.url,r)}function KU(e,t){if(!ln(e)){const r=$pe(t);if(r)return Gh(r,"images",e)}return lf(e,t)}function Spe(e,t,r,i){if(Rd(e)){const n=f0(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,r&&r.imageData===t.imageData&&r.url&&_d(r.url,t,"url",i)}else _d(e,t,"url",i)}const YU={json:{read:{source:["imageData","url"],reader:_pe},write:{writer(e,t,r,i){Spe(e,t,this.source,i)}}}},QU={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=KU(t.url,r)),i}}}};function $pe(e){var n,s;if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r==null?void 0:r.type;return i==="feature"||i==="stream"?(n=r.parsedUrl)==null?void 0:n.path:i==="map-image"||i==="tile"?(s=e.url)==null?void 0:s.path:null}var RE;let En=RE=class extends OU{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),r!=null&&(n.width=ze(r)),i!=null&&(n.height=ze(i)),n}clone(){const e=new RE({color:C(this.color),height:this.height,outline:C(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",C(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([fe({esriPFS:"picture-fill"},{readOnly:!0})],En.prototype,"type",void 0),u([d(YU)],En.prototype,"url",void 0),u([d({type:Number,json:{write:!0}})],En.prototype,"xscale",void 0),u([d({type:Number,json:{write:!0}})],En.prototype,"yscale",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],En.prototype,"width",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],En.prototype,"height",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],En.prototype,"xoffset",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],En.prototype,"yoffset",void 0),u([d(QU)],En.prototype,"source",void 0),En=RE=u([T("esri.symbols.PictureFillSymbol")],En);const IP=En;var AE;let ls=AE=class extends ZU{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=ze(t)),r!=null&&(i.height=ze(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new AE({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",C(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([d({json:{write:!1}})],ls.prototype,"color",void 0),u([fe({esriPMS:"picture-marker"},{readOnly:!0})],ls.prototype,"type",void 0),u([d(YU)],ls.prototype,"url",void 0),u([d(QU)],ls.prototype,"source",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],ls.prototype,"height",void 0),u([J("height",["height","size"])],ls.prototype,"readHeight",null),u([d({type:Number,cast:ze,json:{write:!0}})],ls.prototype,"width",void 0),u([d({json:{write:!1}})],ls.prototype,"size",void 0),ls=AE=u([T("esri.symbols.PictureMarkerSymbol")],ls);const ug=ls;var uc;const XU=ce.ofType({base:null,key:"type",typeMap:{icon:Bc,object:xP,text:mf}});let cc=uc=class extends yf{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new XU,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return qU(this)}hasVisibleVerticalOffset(){return MP(this)}clone(){return new uc({verticalOffset:C(this.verticalOffset),callout:C(this.callout),styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new uc({symbolLayers:new ce([Bc.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new uc({symbolLayers:new ce([Bc.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var i,n;if(((n=(i=e.data)==null?void 0:i.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const r=e.data.symbol;return new uc(r!=null&&r.callout?{symbolLayers:new ce([Bc.fromCIMSymbol(e)]),callout:new GU({size:.5,color:new Se([0,0,0])}),verticalOffset:new EP({screenLength:40})}:{symbolLayers:new ce([Bc.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new uc({symbolLayers:new ce([mf.fromTextSymbol(e)])})}};u([d({type:EP,json:{write:!0}})],cc.prototype,"verticalOffset",void 0),u([d(BU)],cc.prototype,"callout",void 0),u([d({type:XU,json:{origins:{"web-scene":{write:!0}}}})],cc.prototype,"symbolLayers",void 0),u([fe({PointSymbol3D:"point-3d"},{readOnly:!0})],cc.prototype,"type",void 0),cc=uc=u([T("esri.symbols.PointSymbol3D")],cc);const va=cc;var Vm;const eG=ce.ofType({base:null,key:"type",typeMap:{extrude:IU,fill:Dd,icon:Bc,line:ff,object:xP,text:mf,water:zU}});let Um=Vm=class extends yf{constructor(e){super(e),this.symbolLayers=new eG,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&hd(H.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&hd(H.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(Sd(()=>this.symbolLayers,"after-add",({item:t})=>e(t),du))}clone(){return new Vm({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromJSON(e){var r;const t=new Vm;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),n=t.symbolLayers.at(1);!n.enabled||(r=e.symbolLayers)!=null&&r[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:n.size,color:n.material!=null?n.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Vm({symbolLayers:new ce([Dd.fromSimpleFillSymbol(e)])})}};u([d({type:eG,json:{write:!0}})],Um.prototype,"symbolLayers",void 0),u([fe({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Um.prototype,"type",void 0),Um=Vm=u([T("esri.symbols.PolygonSymbol3D")],Um);const Pu=Um;var LE;const I$=new De({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let dc=LE=class extends OU{constructor(...e){super(...e),this.color=new Se([0,0,0,.25]),this.outline=new yn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new LE({color:C(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([d()],dc.prototype,"color",void 0),u([d()],dc.prototype,"outline",void 0),u([fe({esriSFS:"simple-fill"},{readOnly:!0})],dc.prototype,"type",void 0),u([d({type:I$.apiValues,json:{read:I$.read,write:I$.write}})],dc.prototype,"style",void 0),dc=LE=u([T("esri.symbols.SimpleFillSymbol")],dc);const Cu=dc;var NE;const k$=new De({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let to=NE=class extends ZU{constructor(...e){super(...e),this.color=new Se([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new yn}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=ze(t)),r&&(n.outline=r),i&&(n.color=i),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new NE({angle:this.angle,color:C(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};u([d()],to.prototype,"color",void 0),u([X("color")],to.prototype,"writeColor",null),u([fe({esriSMS:"simple-marker"},{readOnly:!0})],to.prototype,"type",void 0),u([d()],to.prototype,"size",void 0),u([d({type:k$.apiValues,json:{read:k$.read,write:k$.write}})],to.prototype,"style",void 0),u([d({type:String,json:{write:!0}})],to.prototype,"path",null),u([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":yn}},json:{default:null,write:!0}})],to.prototype,"outline",void 0),to=NE=u([T("esri.symbols.SimpleMarkerSymbol")],to);const Oo=to;var FE;let bt=FE=class extends zr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new MS,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return ze(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new FE({angle:this.angle,backgroundColor:C(this.backgroundColor),borderLineColor:C(this.borderLineColor),borderLineSize:this.borderLineSize,color:C(this.color),font:this.font&&this.font.clone(),haloColor:C(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,r;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(r=this.haloColor)==null?void 0:r.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([d({type:Se,json:{write:!0}})],bt.prototype,"backgroundColor",void 0),u([d({type:Se,json:{write:!0}})],bt.prototype,"borderLineColor",void 0),u([d({type:Number,json:{write:!0},cast:ze})],bt.prototype,"borderLineSize",void 0),u([d({type:MS,json:{write:!0}})],bt.prototype,"font",void 0),u([d({...FU,json:{write:!0}})],bt.prototype,"horizontalAlignment",void 0),u([d({type:Boolean,json:{write:!0}})],bt.prototype,"kerning",void 0),u([d({type:Se,json:{write:!0}})],bt.prototype,"haloColor",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],bt.prototype,"haloSize",void 0),u([d({type:Boolean,json:{write:!0}})],bt.prototype,"rightToLeft",void 0),u([d({type:Boolean,json:{write:!0}})],bt.prototype,"rotated",void 0),u([d({type:String,json:{write:!0}})],bt.prototype,"text",void 0),u([fe({esriTS:"text"},{readOnly:!0})],bt.prototype,"type",void 0),u([d({...DU,json:{write:!0}})],bt.prototype,"verticalAlignment",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],bt.prototype,"xoffset",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],bt.prototype,"yoffset",void 0),u([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],bt.prototype,"angle",void 0),u([d({type:Number,json:{write:!0}})],bt.prototype,"width",void 0),u([d({type:Number})],bt.prototype,"lineWidth",void 0),u([X("lineWidth")],bt.prototype,"writeLineWidth",null),u([et("lineWidth")],bt.prototype,"castLineWidth",null),u([d(NU)],bt.prototype,"lineHeight",void 0),u([X("lineHeight")],bt.prototype,"writeLineHeight",null),bt=FE=u([T("esri.symbols.TextSymbol")],bt);const gf=bt;var DE;let us=DE=class extends zr{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:Ui.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new DE({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=t!=null?t.cache:null,i=r?this._fetchCacheKey:null;if(r!=null){const a=i&&r.get(i);if(a)return a.clone()}const{resolveWebStyleSymbol:n}=await ee(()=>import("./webStyleSymbolUtils-2wX2V9BW.js"),__vite__mapDeps([129,130]));Ct(t);const s=n(this,{portal:this.portal},e,t);s.catch(a=>{H.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(r!=null&&r.set(i,o.clone()),o):null}};u([d({json:{write:!1}})],us.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],us.prototype,"styleName",void 0),u([d({type:Ui,json:{write:!1}})],us.prototype,"portal",void 0),u([d({type:String,json:{read:PO,write:_d}})],us.prototype,"styleUrl",void 0),u([d({type:Dy,json:{read:!1}})],us.prototype,"thumbnail",void 0),u([d({type:String,json:{write:!0}})],us.prototype,"name",void 0),u([fe({styleSymbolReference:"web-style"},{readOnly:!0})],us.prototype,"type",void 0),u([d()],us.prototype,"_fetchCacheKey",null),us=DE=u([T("esri.symbols.WebStyleSymbol")],us);const zd=us;function H3e(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function iN(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const id={base:zr,key:"type",typeMap:{"simple-fill":Cu,"picture-fill":IP,"picture-marker":ug,"simple-line":yn,"simple-marker":Oo,text:gf,"label-3d":ES,"line-3d":jd,"mesh-3d":lg,"point-3d":va,"polygon-3d":Pu,"web-style":zd,cim:ku},errorContext:"symbol"},W3e={base:zr,key:"type",typeMap:{"picture-marker":ug,"simple-marker":Oo,"point-3d":va,cim:ku},errorContext:"symbol"},Z3e={base:zr,key:"type",typeMap:{"simple-line":yn,"line-3d":jd,cim:ku},errorContext:"symbol"},J3e={base:zr,key:"type",typeMap:{"simple-fill":Cu,"picture-fill":IP,"polygon-3d":Pu,cim:ku},errorContext:"symbol"},xpe={base:zr,key:"type",typeMap:{"picture-marker":ug,"simple-marker":Oo,text:gf,"web-style":zd,cim:ku},errorContext:"symbol"},Tpe=of({types:id}),tG={base:zr,key:"type",typeMap:{"simple-fill":Cu,"picture-fill":IP,"picture-marker":ug,"simple-line":yn,"simple-marker":Oo,text:gf,"line-3d":jd,"mesh-3d":lg,"point-3d":va,"polygon-3d":Pu,"web-style":zd,cim:ku},errorContext:"symbol"},Mpe={base:zr,key:"type",typeMap:{text:gf,"label-3d":ES},errorContext:"symbol"},nN={base:zr,key:"type",typeMap:{"line-3d":jd,"mesh-3d":lg,"point-3d":va,"polygon-3d":Pu,"web-style":zd,cim:ku},errorContext:"symbol"},Epe={base:zr,key:"type",typeMap:{"label-3d":ES},errorContext:"symbol"},rG=So(id);var jE;function Ipe(e){if(!e)return null;const t={};for(const r in e){const i=pu(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function kpe(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}let ci=jE=class extends dt(q){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Sy(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&VY(H.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new jE({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:kpe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:Sb(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,i){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:r};e==="origin-transform"&&(n.action=i),e==="attributes"&&(n.attributeName=i),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([Oa(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),Oa(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};u([d({value:null,json:{read:Ipe}})],ci.prototype,"aggregateGeometries",null),u([d({value:null})],ci.prototype,"attributes",null),u([d({value:null,types:Ld,json:{read:pu}})],ci.prototype,"geometry",null),u([d({type:Boolean})],ci.prototype,"isAggregate",void 0),u([d({clonable:"reference"})],ci.prototype,"layer",void 0),u([d({clonable:"reference"})],ci.prototype,"origin",void 0),u([d({type:ag})],ci.prototype,"popupTemplate",void 0),u([d({clonable:"reference"})],ci.prototype,"sourceLayer",void 0),u([d({value:null,types:id})],ci.prototype,"symbol",null),u([d({type:Boolean,value:!0})],ci.prototype,"visible",null),ci=jE=u([T("esri.Graphic")],ci),function(e){e.generateUID=Sy}(ci||(ci={}));const ks=ci;let nd=class extends Cy{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};u([vO({Type:ks,ensureType:Qt(ks)})],nd.prototype,"itemType",void 0),nd=u([T("esri.support.GraphicsCollection")],nd);let fl=class extends we{constructor(t){super(t),this.view=null,this.baseLayerViews=new ce,this.referenceLayerViews=new ce,this._loadingHandle=xe(()=>{var r,i;return(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.basemap},r=>{r&&r.load().catch(()=>{})},wi)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var r,i,n;if((r=this.view)!=null&&r.suspended)return!1;const t=(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};u([d({constructOnly:!0})],fl.prototype,"view",void 0),u([d({readOnly:!0})],fl.prototype,"baseLayerViews",void 0),u([d({readOnly:!0})],fl.prototype,"referenceLayerViews",void 0),u([d({readOnly:!0})],fl.prototype,"suspended",null),u([d({type:Boolean,readOnly:!0})],fl.prototype,"updating",null),fl=u([T("esri.views.BasemapView")],fl);function Ope(e){return"tryRecycleWith"in e}function Ppe(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let Cpe=class{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=pn(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Un(this._controller.signal,()=>{const n=new D("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}tryRecycle(t){if(!this.done||!this.layerView||!Ope(this.layerView))return null;const r=this.layer.type,i=this._controller.signal;for(let n=0;n<t.length;n++){const s=t[n];if(s.type!==r)continue;const o=this.layerView.tryRecycleWith(s,{signal:i});if(o){t.splice(n,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(Ct(this._controller.signal),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((c,h)=>Un(this._controller.signal,()=>h(Yt())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,s;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{let o,a;if(await r.load({signal:t}),r.prefetchResources&&await r.prefetchResources({signal:t}),Ape(r))o=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new D("layer:view-not-supported","No layerview implementation was found");const h=await this.layerViewImporter.importLayerView(r);Ct(t),o="default"in h?new h.default({layer:r,view:i}):new h({layer:r,view:i})}const l=()=>{a=Pt(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=Un(t,l),Ct(t);try{await o.when()}catch(h){throw l(),h}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(r)))return l(),void this._deferred.reject(new D("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:i,error:o}),i.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new D("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}},In=class extends we{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new rd,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const r=(i=this.view.map)==null?void 0:i.allLayers;if(r)for(const n of r)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=pn(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(sf(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var l,c,h;if(this.destroyed)return;const r=this.view.map;if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,n=[],s=this.view.ready,o=f=>{if(f!=null){for(const m of f)if(m){i.add(m);const y=this._layerLayerViewInfoMap.get(m);y&&s?y.start():y||this._recyclingInfoMap.has(m)||n.push(m),"layers"in m&&m.layers&&o(m.layers)}}};for(const f of this._rootCollectionNames)o(Ts(this,f));for(const[f,m]of this._layerLayerViewInfoMap)if(!i.has(f)){this._layerLayerViewInfoMap.delete(m.layer);const y=m.tryRecycle(n);y?(this.notifyChange("updating"),this._recyclingInfoMap.set(m.layer,m),y.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule()})):m.destroy()}for(const[f,m]of this._recyclingInfoMap)i.has(f)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy());for(const f of n)this._createLayerView(f);this._refreshCollections();const a=[(l=r==null?void 0:r.ground)==null?void 0:l.layers,(c=r==null?void 0:r.basemap)==null?void 0:c.baseLayers,(h=r==null?void 0:r.basemap)==null?void 0:h.referenceLayers,r==null?void 0:r.layers].filter(f=>!!f);i.forEach(f=>"layers"in f&&a.push(f.layers)),this.addHandles(a.map(f=>this._watchUpdatingTracking.addOnCollectionChange(()=>f,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Sd(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.map)==null?void 0:r.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),xe(()=>{const t=this.view,r=t==null?void 0:t.map;return[r==null?void 0:r.basemap,r==null?void 0:r.ground,r==null?void 0:r.layers,t==null?void 0:t.ready]},()=>this._reschedule(),Ln)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),a$(this._recyclingInfoMap),a$(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Yt()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||q_(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){this.destroyed||(a$(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new D("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,r){var s;this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(t);if(!(i!=null&&i.done))return!0;const n=i.layerView;return!(!n||!r||n.parent===r)||!!(i.done&&n&&"layers"in t&&((s=t.layers)!=null&&s.length))&&t.layers.some(o=>this.isCreatingLayerViewsForLayer(o,n))}_refreshCollections(){for(const[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(Ts(this,t),Ts(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,r,i){if(!t||!r)return void(r&&r.removeAll());let n=0;for(const s of t){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=s,a.parent=i,r.at(n)!==a&&r.splice(n,0,a),"layers"in s&&Ppe(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),n+=1}n<r.length&&r.splice(n,r.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const r=new Cpe(t,this.view,this.layerViewImporter);r.promise.then(()=>this._refreshCollections(),i=>{i&&(Gi(i)||i.name==="cancelled:layerview-create")||H.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};u([d()],In.prototype,"_workPromise",void 0),u([d({readOnly:!0})],In.prototype,"_watchUpdatingTracking",void 0),u([d({readOnly:!0})],In.prototype,"_layersToLayerViews",null),u([d({readOnly:!0})],In.prototype,"_rootCollectionNames",null),u([d()],In.prototype,"layerViewImporter",void 0),u([d()],In.prototype,"supportsGround",void 0),u([d({readOnly:!0})],In.prototype,"updating",null),u([d({readOnly:!0})],In.prototype,"updatingRemaining",null),u([d({constructOnly:!0})],In.prototype,"view",void 0),In=u([T("esri.views.LayerViewManager")],In);const Rpe=In;function Ape(e){return"createLayerView"in e&&e.createLayerView!=null}let Ki=class extends we{constructor(t){super(t),this.factor=1.5,this.offset=Nr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};u([d({type:Number})],Ki.prototype,"factor",void 0),u([d({nonNullable:!0})],Ki.prototype,"offset",void 0),u([d()],Ki.prototype,"position",void 0),u([d({type:Number,range:{min:0}})],Ki.prototype,"size",void 0),u([d()],Ki.prototype,"maskUrl",void 0),u([d()],Ki.prototype,"maskEnabled",void 0),u([d()],Ki.prototype,"overlayUrl",void 0),u([d()],Ki.prototype,"overlayEnabled",void 0),u([d({readOnly:!0})],Ki.prototype,"version",null),u([d({type:Boolean})],Ki.prototype,"visible",void 0),Ki=u([T("esri.views.Magnifier")],Ki);const iG=Ki;let tw=class{constructor(t){this._observable=new X0,this._map=new Map(t)}get size(){return ve(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const r=this._map.delete(t);return r&&this._observable.notify(),r}entries(){return ve(this._observable),this._map.entries()}forEach(t,r){ve(this._observable),this._map.forEach((i,n)=>t.call(r,i,n,this),r)}get(t){return ve(this._observable),this._map.get(t)}has(t){return ve(this._observable),this._map.has(t)}keys(){return ve(this._observable),this._map.keys()}set(t,r){return this._map.set(t,r),this._observable.notify(),this}values(){return ve(this._observable),this._map.values()}[Symbol.iterator](){return ve(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var zE;let Gm=zE=class extends q{constructor(e){super(e),this.name=null,this.code=null}clone(){return new zE({name:this.name,code:this.code})}};u([d({type:String,json:{write:!0}})],Gm.prototype,"name",void 0),u([d({type:[String,Number],json:{write:!0}})],Gm.prototype,"code",void 0),Gm=zE=u([T("esri.layers.support.CodedValue")],Gm);const Lpe=new De({inherited:"inherited",codedValue:"coded-value",range:"range"});let qm=class extends q{constructor(t){super(t),this.name=null,this.type=null}};u([d({type:String,json:{write:!0}})],qm.prototype,"name",void 0),u([fe(Lpe)],qm.prototype,"type",void 0),qm=u([T("esri.layers.support.Domain")],qm);const IS=qm;var VE;let Bm=VE=class extends IS{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new VE({codedValues:C(this.codedValues),name:this.name})}};u([d({type:[Gm],json:{write:!0}})],Bm.prototype,"codedValues",void 0),u([fe({codedValue:"coded-value"})],Bm.prototype,"type",void 0),Bm=VE=u([T("esri.layers.support.CodedValueDomain")],Bm);const nG=Bm;var UE;let rw=UE=class extends IS{constructor(e){super(e),this.type="inherited"}clone(){return new UE}};u([fe({inherited:"inherited"})],rw.prototype,"type",void 0),rw=UE=u([T("esri.layers.support.InheritedDomain")],rw);const sG=rw;var GE;let gp=GE=class extends IS{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new GE({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};u([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],gp.prototype,"maxValue",void 0),u([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[0]}},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],gp.prototype,"minValue",void 0),u([fe({range:"range"})],gp.prototype,"type",void 0),gp=GE=u([T("esri.layers.support.RangeDomain")],gp);const oG=gp,aG={key:"type",base:IS,typeMap:{range:oG,"coded-value":nG,inherited:sG}};function kS(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return oG.fromJSON(e);case"codedValue":return nG.fromJSON(e);case"inherited":return sG.fromJSON(e)}return null}const Npe=new De({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var qE;const Fpe=new De({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Zr=qE=class extends q{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?Fpe.fromJSON(r.fieldValueType):null}clone(){var e;return new qE({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};u([d({type:String,json:{write:!0}})],Zr.prototype,"alias",void 0),u([d({type:[String,Number],json:{write:{allowNull:!0}}})],Zr.prototype,"defaultValue",void 0),u([d()],Zr.prototype,"description",void 0),u([J("description")],Zr.prototype,"readDescription",null),u([d({types:aG,json:{read:{reader:kS},write:!0}})],Zr.prototype,"domain",void 0),u([d({type:Boolean,json:{write:!0}})],Zr.prototype,"editable",void 0),u([d({type:it,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],Zr.prototype,"length",void 0),u([d({type:String,json:{write:!0}})],Zr.prototype,"name",void 0),u([d({type:Boolean,json:{write:!0}})],Zr.prototype,"nullable",void 0),u([fe(Npe)],Zr.prototype,"type",void 0),u([d()],Zr.prototype,"valueType",void 0),u([J("valueType",["description"])],Zr.prototype,"readValueType",null),u([d({type:Boolean,json:{read:!1}})],Zr.prototype,"visible",void 0),Zr=qE=u([T("esri.layers.support.Field")],Zr);const kP=Zr;var BE;let vp=BE=class extends q{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new BE({mapLayerId:e,gdbVersion:t})}};u([fe({mapLayer:"map-layer"})],vp.prototype,"type",void 0),u([d({type:it,json:{write:!0}})],vp.prototype,"mapLayerId",void 0),u([d({type:String,json:{write:!0}})],vp.prototype,"gdbVersion",void 0),vp=BE=u([T("esri.layers.support.source.MapLayerSource")],vp);var HE;let Wo=HE=class extends q{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:n}=this,s={workspaceId:e,query:t,oidFields:r,spatialReference:(i==null?void 0:i.clone())??void 0,geometryType:n};return new HE(s)}};u([fe({queryTable:"query-table"})],Wo.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Wo.prototype,"workspaceId",void 0),u([d({type:String,json:{write:!0}})],Wo.prototype,"query",void 0),u([d({type:String,json:{write:!0}})],Wo.prototype,"oidFields",void 0),u([d({type:Pe,json:{write:!0}})],Wo.prototype,"spatialReference",void 0),u([fe(hse)],Wo.prototype,"geometryType",void 0),Wo=HE=u([T("esri.layers.support.source.QueryTableDataSource")],Wo);var WE;let wp=WE=class extends q{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new WE({workspaceId:e,dataSourceName:t})}};u([fe({raster:"raster"})],wp.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],wp.prototype,"dataSourceName",void 0),u([d({type:String,json:{write:!0}})],wp.prototype,"workspaceId",void 0),wp=WE=u([T("esri.layers.support.source.RasterDataSource")],wp);var ZE;let pc=ZE=class extends q{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new ZE({workspaceId:e,gdbVersion:t,dataSourceName:r})}};u([fe({table:"table"})],pc.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],pc.prototype,"workspaceId",void 0),u([d({type:String,json:{write:!0}})],pc.prototype,"gdbVersion",void 0),u([d({type:String,json:{write:!0}})],pc.prototype,"dataSourceName",void 0),pc=ZE=u([T("esri.layers.support.source.TableDataSource")],pc);var JE,KE;const Dpe=si()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Yi=JE=class extends q{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return sN()(e,t,r)}castLeftTableSource(e){return So(YE(),e)}readRightTableSource(e,t,r){return sN()(e,t,r)}castRightTableSource(e){return So(YE(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:n}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:(r==null?void 0:r.clone())??void 0,rightTableSource:(i==null?void 0:i.clone())??void 0,joinType:n};return new JE(s)}};u([fe({joinTable:"join-table"})],Yi.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Yi.prototype,"leftTableKey",void 0),u([d({type:String,json:{write:!0}})],Yi.prototype,"rightTableKey",void 0),u([d({json:{write:!0}})],Yi.prototype,"leftTableSource",void 0),u([J("leftTableSource")],Yi.prototype,"readLeftTableSource",null),u([et("leftTableSource")],Yi.prototype,"castLeftTableSource",null),u([d({json:{write:!0}})],Yi.prototype,"rightTableSource",void 0),u([J("rightTableSource")],Yi.prototype,"readRightTableSource",null),u([et("rightTableSource")],Yi.prototype,"castRightTableSource",null),u([fe(Dpe)],Yi.prototype,"joinType",void 0),Yi=JE=u([T("esri.layers.support.source.JoinTableDataSource")],Yi);let O$=null;function sN(){return O$||(O$=of({types:YE()})),O$}let P$=null;function YE(){return P$||(P$={key:"type",base:null,typeMap:{"data-layer":ws,"map-layer":vp}}),P$}const jpe={key:"type",base:null,typeMap:{"join-table":Yi,"query-table":Wo,raster:wp,table:pc}};let ws=KE=class extends q{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new KE({fields:e,dataSource:t})}};u([fe({dataLayer:"data-layer"})],ws.prototype,"type",void 0),u([d({type:[kP],json:{write:!0}})],ws.prototype,"fields",void 0),u([d({types:jpe,json:{write:!0}})],ws.prototype,"dataSource",void 0),ws=KE=u([T("esri.layers.support.source.DataLayerSource")],ws),ws.from=Qt(ws);let hc=class extends dt(q){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};u([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],hc.prototype,"onFields",void 0),u([d({type:String,json:{write:!0}})],hc.prototype,"operator",void 0),u([d({type:String,json:{write:!0}})],hc.prototype,"searchTerm",void 0),u([d({type:String,json:{write:!0}})],hc.prototype,"searchType",void 0),hc=u([T("esri.rest.support.FullTextSearch")],hc);const zpe=hc;var QE;const oN=new De({upperLeft:"upper-left",lowerLeft:"lower-left"});let fc=QE=class extends q{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new QE(C({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([d({type:ct,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],fc.prototype,"extent",void 0),u([d({type:["view","edit"],json:{write:!0}})],fc.prototype,"mode",void 0),u([d({type:String,json:{read:oN.read,write:oN.write}})],fc.prototype,"originPosition",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],fc.prototype,"tolerance",void 0),fc=QE=u([T("esri.rest.support.QuantizationParameters")],fc);const lG=fc,Vpe=new De({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var XE;const aN=new De({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let cs=XE=class extends q{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=C(e))}clone(){return new XE({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:C(this.statisticParameters)})}};u([d({type:Number,json:{write:!0}})],cs.prototype,"maxPointCount",void 0),u([d({type:Number,json:{write:!0}})],cs.prototype,"maxRecordCount",void 0),u([d({type:Number,json:{write:!0}})],cs.prototype,"maxVertexCount",void 0),u([d({type:String,json:{write:!0}})],cs.prototype,"onStatisticField",void 0),u([d({type:String,json:{write:!0}})],cs.prototype,"outStatisticFieldName",void 0),u([d({type:String,json:{read:{source:"statisticType",reader:aN.read},write:{target:"statisticType",writer:aN.write}}})],cs.prototype,"statisticType",void 0),u([d({type:Object})],cs.prototype,"statisticParameters",void 0),u([X("statisticParameters")],cs.prototype,"writeStatisticParameters",null),cs=XE=u([T("esri.rest.support.StatisticDefinition")],cs);const Upe=cs;var iw;const Gpe=new De({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let _e=iw=class extends q{static from(e){return B_(iw,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const n=e[i];Array.isArray(n)?r[i]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?r[i]=n.getTime():r[i]=n}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new iw(C({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};_e.MAX_MAX_RECORD_COUNT_FACTOR=5,u([d({json:{write:!0}})],_e.prototype,"aggregateIds",void 0),u([d({type:Boolean,json:{write:!0}})],_e.prototype,"cacheHint",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],_e.prototype,"compactGeometryEnabled",void 0),u([d({json:{write:!0}})],_e.prototype,"datumTransformation",void 0),u([et("datumTransformation")],_e.prototype,"castDatumTransformation",null),u([d({type:Boolean,json:{default:!1,write:!0}})],_e.prototype,"defaultSpatialReferenceEnabled",void 0),u([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],_e.prototype,"distance",void 0),u([d({type:ws,json:{write:!0}})],_e.prototype,"dynamicDataSource",void 0),u([d({type:String,json:{write:!0}})],_e.prototype,"formatOf3DObjects",void 0),u([d({type:[zpe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],_e.prototype,"fullText",void 0),u([d({type:String,json:{write:!0}})],_e.prototype,"gdbVersion",void 0),u([d({types:Ld,json:{read:pu,write:!0}})],_e.prototype,"geometry",void 0),u([d({type:Number,json:{write:!0}})],_e.prototype,"geometryPrecision",void 0),u([d({type:[String],json:{write:!0}})],_e.prototype,"groupByFieldsForStatistics",void 0),u([d({type:String,json:{write:!0}})],_e.prototype,"having",void 0),u([d({type:Date})],_e.prototype,"historicMoment",void 0),u([X("historicMoment")],_e.prototype,"writeHistoricMoment",null),u([d({type:Number,json:{write:!0}})],_e.prototype,"maxAllowableOffset",void 0),u([d({type:Number,cast:e=>e<1?1:e>_e.MAX_MAX_RECORD_COUNT_FACTOR?_e.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],_e.prototype,"maxRecordCountFactor",void 0),u([d({type:["xyFootprint"],json:{write:!0}})],_e.prototype,"multipatchOption",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],_e.prototype,"num",void 0),u([d({json:{write:!0}})],_e.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],_e.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],_e.prototype,"outFields",void 0),u([d({type:Pe,json:{name:"outSR",write:!0}})],_e.prototype,"outSpatialReference",void 0),u([d({type:[Upe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],_e.prototype,"outStatistics",void 0),u([d({json:{write:!0}})],_e.prototype,"parameterValues",void 0),u([X("parameterValues")],_e.prototype,"writeParameterValues",null),u([d({type:Oe,json:{write:!0}})],_e.prototype,"pixelSize",void 0),u([d({type:lG,json:{write:!0}})],_e.prototype,"quantizationParameters",void 0),u([d({type:[Object],json:{write:!0}})],_e.prototype,"rangeValues",void 0),u([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],_e.prototype,"relationParameter",void 0),u([d({type:String,json:{write:!0}})],_e.prototype,"resultType",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],_e.prototype,"returnCentroid",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],_e.prototype,"returnDistinctValues",void 0),u([d({type:Boolean,json:{default:!0,write:!0}})],_e.prototype,"returnExceededLimitFeatures",void 0),u([d({type:Boolean,json:{write:!0}})],_e.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],_e.prototype,"returnQueryGeometry",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],_e.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],_e.prototype,"returnZ",void 0),u([d({type:Pe,json:{write:!0}})],_e.prototype,"sourceSpatialReference",void 0),u([fe(Vpe,{ignoreUnknown:!1,name:"spatialRel"})],_e.prototype,"spatialRelationship",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],_e.prototype,"start",void 0),u([X("start"),X("num")],_e.prototype,"writeStart",null),u([d({type:String,json:{write:!0}})],_e.prototype,"sqlFormat",void 0),u([d({type:String,json:{write:!0}})],_e.prototype,"text",void 0),u([d({type:Mo,json:{write:!0}})],_e.prototype,"timeExtent",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],_e.prototype,"timeReferenceUnknownClient",void 0),u([fe(Gpe,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],_e.prototype,"units",void 0),u([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],_e.prototype,"where",void 0),u([X("where")],_e.prototype,"writeWhere",null),_e=iw=u([T("esri.rest.support.Query")],_e);const Ca=_e;function Ov(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let Zo=class extends Aa.EventedAccessor{constructor(t){super(t),this._selectionMap=new tw,this._sources=new ce,this._trashCan=[],this._layerEditHandles=new ce,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([xe(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Sd(()=>this.sources,"change",r=>{const i=this._selectionMap;for(const n of r.removed)i.delete(n);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new ce;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(r=>"sublayers"in r&&r.sublayers?r.sublayers:null).forEach(r=>{(Ov(r)&&!hre(r)||Ku(r))&&t.add(r)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(Pt)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[r,i]=t;return{layer:r,selection:[...i.selection]}})}get count(){let t=0;for(const r of this._selectionMap.values())t+=r.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){lu(t,this._sources)}async getSelectedFeatures(t,r={},i="layerView"){const{view:n,selections:s}=this,o=(t!==void 0?s.filter(a=>t.includes(a.layer)):s).filter(a=>a.selection.length>0).map(async a=>{const{layer:l,selection:c}=a,h=Ku(l)?l.parent:l;if(h==null||!uN(h))return null;if(i==="layer")return cN(h,c,r);if(lN(h))return null;const f=await n.whenLayerView(h).catch(()=>null);return f?cN(f,c,r):null});return(await Promise.all(o)).filter(a=>a!=null)}updateSelection(t){const r=new Map;for(const[s,o]of this._selectionMap)r.set(s,[...o.selection]);let i=!1;const n=t.current.concat(t.added);for(const s of n){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Ov(o)||Ku(o))&&a!==null){const l=nO(r,o,()=>[]);l.includes(a)||(l.push(a),i=!0)}}for(const s of t.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Ov(o)||Ku(o))&&a!==null){const l=r.get(o),c=l==null?void 0:l.indexOf(a);c!==void 0&&c>=0&&(l==null||l.splice(c,1),i=!0)}}if(i){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[l,c]of r){const h=s.get(l);h!==void 0&&o.push(h),s.set(l,{selection:c}),a.push({layer:l,selection:c,...cA(h!==void 0?h.selection:[],c)})}this._onSelectionChange(a)}}setSelection(t,r){this._setSelection(t,r)}getSelection(t){const r=this._selectionMap.get(t);return r==null?void 0:r.selection}appendToSelection(t,r){const i=this._selectionMap.get(t),n=i!==void 0?[...i.selection]:[];for(const s of r)n.includes(s)||n.push(s);this._setSelection(t,n)}removeFromSelection(t,r){const i=this._selectionMap.get(t);if(!i)return;const n=[];for(const s of i.selection)r.includes(s)||n.push(s);this._setSelection(t,n)}toggleInSelection(t,r){const i=this._selectionMap.get(t);if(!i||i.selection.length===0)return void this._setSelection(t,r);const n=new Set(i.selection),s=new Set(r),o=RQ(n,s);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const r=[];for(const[i,n]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}const{sources:t,view:r,_selectionMap:i,showHighlight:n}=this,s=this._vizTaskId;for(const a of t){const l=i.get(a),c=Ku(a)?a.parent:a;if(c!=null&&uN(c)){if(lN(c))continue;r.whenLayerView(c).then(h=>{var f;(f=l==null?void 0:l.highlightHandle)==null||f.remove(),l!=null&&n&&s===this._vizTaskId&&"highlight"in h&&typeof h.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=h.highlight(l.selection,"selection"))}).catch(()=>{var h;(h=l==null?void 0:l.highlightHandle)==null||h.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Pt);for(const t of this.sources){const r=Ku(t)?t.parent:t;if(r!=null&&Ov(r)){const i=r.on("edits",n=>{this._handleEditChanges(n,t)});this._layerEditHandles.push(i)}}}_handleEditChanges(t,r){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(r)){const i=t.deletedFeatures.filter(n=>n.error==null).map(n=>n.objectId).filter(pd);this.removeFromSelection(r,i)}}_setSelection(t,r){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const i=this._selectionMap.get(t);if(i===void 0||!Bpe(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(t,{selection:[...r]});const n={layer:t,selection:[...r],...cA(i!==void 0?i.selection:[],r)};this._onSelectionChange([n])}}};u([d({readOnly:!0,nonNullable:!0})],Zo.prototype,"selections",null),u([d({readOnly:!0,nonNullable:!0})],Zo.prototype,"count",null),u([d({constructOnly:!0,nonNullable:!0})],Zo.prototype,"view",void 0),u([d({readOnly:!0,nonNullable:!0})],Zo.prototype,"hasSelection",null),u([d()],Zo.prototype,"showHighlight",void 0),u([d()],Zo.prototype,"sources",null),Zo=u([T("esri.views.SelectionManager")],Zo);const lN=e=>{var t;return Ku(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},qpe=e=>e.layer!==void 0,uN=e=>(e==null?void 0:e.when)!==void 0,Bpe=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const r=[...e.selection],i=[...t.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let n=0;n<r.length;n++)if(r[n]!==i[n])return!1}return!0},cN=async(e,t,r={})=>{let i;if(qpe(e)){const n=e;i=n===void 0?null:await n.queryFeatures(new Ca({...r,objectIds:t})).then(s=>({data:s,layer:e.layer}))}else{const n=e;i=n===void 0?null:await n.queryFeatures(new Ca({...r,objectIds:t})).then(s=>({data:s,layer:n}))}return i},Hpe=Zo;let Hm=class extends dt(we){constructor(t){super(t),this.accentColor=new Se([255,127,0]),this.textColor=new Se([255,255,255])}};u([d({type:Se,nonNullable:!0})],Hm.prototype,"accentColor",void 0),u([d({type:Se,nonNullable:!0})],Hm.prototype,"textColor",void 0),Hm=u([T("esri.views.Theme")],Hm);const e3=Hm;var dN;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(dN||(dN={}));const uG=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],cG={};function dG(e){return!!cG[e]}function Wpe(e){for(const t of e)if(!dG(t))return!1;return!0}uG.forEach(e=>{cG[e]=!0});let Zpe=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:r,priority:i},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[r],i)})}disconnect(){this.inputManager&&this._handlers.forEach((t,r)=>{var i;return(i=this.inputManager)==null?void 0:i.uninstallHandlers(r)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,i,n){const s=Array.isArray(t)?t:t.split(",");if(!Wpe(s))return s.some(dG)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof i=="function"?o=i:n=i,n=n??iu.DEFAULT;const l=this._createUniqueGroupName(),c=new Jpe(this.view,s,a,o);this._handlers.set(l,{handler:c,priority:n});for(const h of s){const f=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,f+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],n),Xe(()=>this._removeHandler(l,s))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t)){this._handlers.delete(t);for(const i of r){const n=this._handlerCounts.get(i);n===void 0||(n===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Jpe=class extends vr{constructor(t,r,i,n){super(!0),this._latestDragStart=void 0,this.view=t;for(const s of r)switch(s){case"click":this.registerIncoming("click",i,o=>n(Qpe(t,o)));break;case"double-click":this.registerIncoming("double-click",i,o=>n(Xpe(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>n(ehe(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>n(the(t,o)));break;case"hold":this.registerIncoming("hold",i,o=>n(rhe(t,o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>n(ihe(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>n(nhe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>n(nm(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>n(nm(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>n(nm(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>n(she(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>n(ohe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>n(nm(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>n(nm(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{n(ahe(o))});break;case"focus":this.registerIncoming("focus",i,o=>{n(Kpe(o))});break;case"blur":this.registerIncoming("blur",i,o=>{n(Ype(o))})}}_wrapDrag(t){const r=t.data,{x:i,y:n}=r.center,{action:s,pointerType:o,button:a}=r;if(s==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const l=r.pointer.native,c=r.buttons,{cancelable:h,timestamp:f}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:i,y:n,origin:m,pointerType:o,button:a,buttons:c,radius:r.radius,angle:c9(r.angle),native:l,timestamp:f,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}};function Kpe(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function Ype(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function Qpe(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:c,timestamp:h}=t;return{type:"click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,screenPoint:Nr(s,o),mapPoint:cg(e,s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function Xpe(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:c,timestamp:h}=t;return{type:"double-click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:cg(e,s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function ehe(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,c=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-click",pointerId:c,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:cg(e,s,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function the(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,c=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-double-click",pointerId:c,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:cg(e,s,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function rhe(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a}=t.data,{cancelable:l,timestamp:c}=t;return{type:"hold",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:c,mapPoint:cg(e,s,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function cg(e,t,r){return e.toMap(Nr(t,r),{exclude:[]})}function ihe(e){const{key:t,repeat:r,native:i}=e.data,{cancelable:n,timestamp:s}=e;return{type:"key-down",key:t,repeat:r,native:i,timestamp:s,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function nhe(e){const{key:t,native:r}=e.data,{cancelable:i,timestamp:n}=e;return{type:"key-up",key:t,native:r,timestamp:n,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:s=>e.async(s),preventDefault:()=>e.preventDefault()}}function nm(e,t){const{x:r,y:i,button:n,buttons:s,native:o,eventId:a}=e.data,l=o.pointerId,c=o.pointerType,{cancelable:h,timestamp:f}=e;return{type:t,x:r,y:i,pointerId:l,pointerType:c,button:n,buttons:s,native:o,timestamp:f,eventId:a,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function she(e){const{x:t,y:r,buttons:i,native:n,eventId:s}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,c=e.data.action,h={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:f,timestamp:m}=e;return{type:"pointer-drag",x:t,y:r,pointerId:a,pointerType:l,button:o,buttons:i,action:c,origin:h,native:n,timestamp:m,eventId:s,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}function ohe(e){const{cancelable:t,data:r,timestamp:i}=e,{x:n,y:s,deltaY:o,native:a}=r;return{type:"mouse-wheel",x:n,y:s,deltaY:o,native:a,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}function ahe(e){const{action:t,state:r,device:i}=e.data,{cancelable:n,timestamp:s}=e,{buttons:o,axes:a}=r;return{type:"gamepad",device:i,timestamp:s,action:t,buttons:o,axes:a,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}var T0,pN,hN;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(T0||(T0={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(pN||(pN={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(hN||(hN={}));function lhe(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return H.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function t3(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(T0.USER)&&e.getEditableFlag(T0.MANAGER)}function ro(e){return Nr(e.x,e.y)}function pG(e,t){var i;const r=(i=e instanceof HTMLElement?e:e.surface)==null?void 0:i.getBoundingClientRect();return r?Nr(t.clientX-r.left,t.clientY-r.top):Nr(0,0)}function hG(e,t){return t instanceof Event?pG(e,t):ro(t)}function fG(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let uhe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":mN(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!yN(t))break;const n=ro(t),s=Qd(n,t.pointerType,r.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,r),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!yN(t))break;const n=this._grabbedManipulators.get(t.pointerId),s=n==null?void 0:n.manipulator,o=n==null?void 0:n.tool;if(s==null||o==null)break;const a=ro(t);a.x=Rs(a.x,0,r.view.width),a.y=Rs(a.y,0,r.view.height);const l=n.start,c=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const n=ro(t),s=Qd(n,t.pointerType,r.forEachTool);if(che(t)||r.forEachTool(c=>{if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let h=!1;c.manipulators.forEach(({manipulator:f})=>{f.selected&&(f.selected=!1,h=!0)}),h&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:i}),C$(o,i);break}case"click":{const n=ro(t),s=Qd(n,t.pointerType,r.forEachTool),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const n=ro(t),s=Qd(n,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),C$(o,i);break}case"immediate-double-click":{const n=ro(t),s=Qd(n,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),C$(o,i);break}}this._onFocusChange(r.forEachTool)}_releaseManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:ro(r)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===t&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,r){var n;const i=(n=this._grabbedManipulators.get(t.pointerId))==null?void 0:n.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:ro(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=fN(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=fN(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:n})=>{r.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{i.add(n)}),t(n=>{n.hasGrabbedManipulators=r.has(n),n.hasHoveredManipulators=i.has(n);const s=this._grabbedManipulators.values(),o=UY(s,({tool:a})=>a===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:r,setActiveTool:i},n=!0,s){const o=(a,l)=>a===t&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:c},h)=>{o(a,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Nr(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!mN(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(ro(t),t.pointerId,t.pointerType,r)}_updateHoveredStateForPointerAtScreenPosition(t,r,i,n){var a;let s=Qd(t,i,n);const o=(a=this._hoveredManipulators.get(r))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(r,s)):this._hoveredManipulators.delete(r),this._onFocusChange(n))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}};function fN(e){let t=null;return q_(e,({manipulator:r})=>!(r==null||!r.interactive)&&(r.grabbing&&r.grabCursor?(t=r.grabCursor,!0):!!r.cursor&&(t=r.cursor,!0))),t}function Qd(e,t,r){let i=null;return r(n=>{if(n.manipulators==null||!t3(n))return!1;const s=n.manipulators.intersect(e,t);return s!=null&&(i={tool:n,manipulator:s},!0)}),i}function mN(e){return e==="mouse"}function yN(e){return e.pointerType!=="mouse"||e.button===0}function che(e){return!!e.native.shiftKey}function C$(e,t){e!=null&&e.consumesClicks&&t()}const gN="attached",R$="tools",dhe=1e3;let io=class extends we{constructor(t){super(t),this._updatingHandles=new rd,this._clock=nf,this._manipulatorState=new uhe,this.tools=new ce,this.cursor=null,this._interacting=!1,this._interactingTimeout=dhe,this._interactingTimeoutHandle=null,this._forEachTool=r=>{for(const i of this.tools.items)if(r(i))return}}initialize(){this.addHandles([this.view.on(uG,t=>{this._handleInputEvent(t)},iu.TOOL),...lhe(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void H.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const r=this.activeTool;this._set("activeTool",t),r!=null&&r.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const i of this.tools){this._updateToolEditableFlag(i);const n=t3(i);this.activeTool!=null&&n||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Pt(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([xe(()=>{const{state:r}=this.view;return"camera"in r&&r.camera},()=>this._forEachManipulator(r=>r.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",r=>this._forEachManipulator(i=>i.onElevationChange(r)))],gN):this.addHandles(xe(()=>this.view.extent,()=>this._forEachManipulator(r=>r.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(gN),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(r=>{r.manipulators&&r.manipulators.forEach(({manipulator:i})=>t(i,r))})}_handleInputEvent(t){let r=!1;const i={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(n=>{!r&&n.visible&&n.handleInputEvent(i)}),!r&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(R$),this._forEachTool(t=>{if(t instanceof we){const r=xe(()=>[t.cursor,t.visible,t.editable],()=>{t3(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(r,R$)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],R$)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var r;(r=t.setEditableFlag)==null||r.call(t,T0.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(r=>!(r.cursor==null||!r.visible)&&(t=r.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(r=>(t==null||r!==t)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}get test(){}};u([d({constructOnly:!0,nonNullable:!0})],io.prototype,"view",void 0),u([d({value:null})],io.prototype,"activeTool",null),u([d({readOnly:!0,type:ce})],io.prototype,"tools",void 0),u([d({readOnly:!0})],io.prototype,"cursor",void 0),u([d({readOnly:!0})],io.prototype,"updating",null),u([d()],io.prototype,"_interacting",void 0),u([d({readOnly:!0})],io.prototype,"interacting",null),io=u([T("esri.views.ToolViewManager")],io);let bp=class extends we{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":phe.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return hhe[this.deviceType]}};u([d({nonNullable:!0,readOnly:!0})],bp.prototype,"nativeIndex",void 0),u([d({type:String,readOnly:!0})],bp.prototype,"deviceType",null),u([d({type:Number,readOnly:!0})],bp.prototype,"axisThreshold",null),bp=u([T("esri.views.input.gamepad.GamepadInputDevice")],bp);const OP=bp,phe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),hhe={standard:.15,spacemouse:.025,unknown:0};let Wm=class extends we{constructor(...t){super(...t),this.devices=new ce,this.enabledFocusMode="document"}};u([d({type:ce.ofType(OP),readOnly:!0})],Wm.prototype,"devices",void 0),u([d({type:["document","view","none"]})],Wm.prototype,"enabledFocusMode",void 0),Wm=u([T("esri.views.input.gamepad.GamepadSettings")],Wm);const fhe=Wm;let nw=class extends we{constructor(){super(...arguments),this.gamepad=new fhe}};u([d({readOnly:!0})],nw.prototype,"gamepad",void 0),nw=u([T("esri.views.input.Input")],nw);const mhe=nw,mG=()=>He.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let ml=class extends we{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};u([d({type:Boolean,nonNullable:!0})],ml.prototype,"enabled",void 0),u([d({type:OP})],ml.prototype,"device",void 0),u([d({type:["pan","zoom"],nonNullable:!0})],ml.prototype,"mode",void 0),u([d({type:["forward-down","forward-up"],nonNullable:!0})],ml.prototype,"tiltDirection",void 0),u([d({type:Number,nonNullable:!0})],ml.prototype,"velocityFactor",void 0),ml=u([T("esri.views.navigation.gamepad.GamepadSettings")],ml);const yG=ml;let mc=class extends we{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new yG,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!mG()}};u([d({type:Boolean})],mc.prototype,"browserTouchPanEnabled",void 0),u([d({type:yG,nonNullable:!0})],mc.prototype,"gamepad",void 0),u([d({type:Boolean})],mc.prototype,"momentumEnabled",void 0),u([d({type:Boolean})],mc.prototype,"mouseWheelZoomEnabled",void 0),mc=u([T("esri.views.navigation.Navigation")],mc);const gG=mc,vG={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},wG=Object.values(vG),bG=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${wG.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),yhe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${wG.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),ghe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function mIe(e){return bG.test(e)}function vf(e){if(e==null)return null;const t=ii(e),r=(t==null?void 0:t.path.match(bG))||(t==null?void 0:t.path.match(yhe));if(!r)return null;const[,i,n,s,o]=r,a=n.indexOf("/");return{title:PP(a!==-1?n.slice(a+1):n),serverType:vG[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function vhe(e){const t=ii(e).path.match(ghe);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function PP(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function whe(e,t){const r=[];if(e){const i=vf(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=PP(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function _G(e){let t=Gn(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function bhe(e,t){return e&&iz(nz(e,t))}function _he(e){let{url:t}=e;if(!t)return{url:t};t=nz(t,e.logger);const r=ii(t),i=vf(r.path);let n;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(n=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const s=vhe(r.path);s!=null&&(t=s.serviceUrl,n=s.sublayerId)}return{url:iz(t),layerId:n}}function She(e,t,r,i,n){_d(t,i,"url",n),i.url&&e.layerId!=null&&(i.url=Gh(i.url,r,e.layerId.toString()))}function yIe(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return r&&(i||n||s)}var vN;function $he(e){var i;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?vf(e.url):void 0;return!(((i=e.spatialReference)==null?void 0:i.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&SG(e)&&e.heightModelInfo?e.heightModelInfo:xhe(e)?SS.deriveUnitFromSR(Mhe,e.spatialReference):null}function SG(e){return"heightModelInfo"in e}function $G(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function xhe(e){return $G(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):xG(e)}function The(e){return e.layers!=null||xG(e)||$G(e)||SG(e)}function xG(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(vN||(vN={}));const Mhe=new SS({heightModel:"gravity-related-height"});var r_;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(r_||(r_={}));let r3,A$=null;async function Ehe(e){A$||(A$=ee(()=>import("./geometryServiceUtils-tjEwd-Go.js"),__vite__mapDeps([131,132])).then(t=>r3=t)),await A$,Ct(e)}async function TG(e,t,r,i){if(!e)return null;const n=e.spatialReference;return Mu()||Eo(n,t)?Eu(e,t):r3?r3.projectGeometry(e,t,r,i):(await Promise.race([Ehe(i),yu(i)]),TG(e,t,r,i))}let ot=class extends we{constructor(t){super(t),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=u0(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,n,s,o;const t=(i=this.map)==null?void 0:i.call(this),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:t==null?void 0:t.basemap,layers:(n=t==null?void 0:t.basemap)==null?void 0:n.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(s=t==null?void 0:t.ground)==null?void 0:s.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),r}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:t,updating:r}=this._allLayers;let i=null;for(const s of t){const o=this._getSupportedSpatialReferences(s);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(i,o);a!=null&&(i=a)}if(i!=null&&i.length===1)break}if(r&&(i==null||i.length!==1))return{updating:!0};const n=this._pickSpatialReferenceCandidate(i);return{spatialReference:(n==null?void 0:n.spatialReference)??null,viewingMode:(n==null?void 0:n.viewingMode)??null,updating:!1}}get _tileInfoTask(){var i,n,s,o,a,l,c;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:t,updating:r}=this._collectLayers([{parent:(n=(i=this.map)==null?void 0:i.call(this))==null?void 0:n.basemap,layers:(a=(o=(s=this.map)==null?void 0:s.call(this))==null?void 0:o.basemap)==null?void 0:a.baseLayers},{layers:(c=(l=this.map)==null?void 0:l.call(this))==null?void 0:c.layers}]);if(t&&t.length>0&&"tileInfo"in t[0]){const h=t[0].tileInfo;return{tileInfo:h!=null&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:r}}get _heightModelInfoTask(){var i,n,s;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))!=null&&i.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:t,updating:r}=this._allLayers;for(const o of t)if(The(o)){const a=$he(o);if(a)return{heightModelInfo:a,vcsWkid:(n=o.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(s=o.spatialReference)==null?void 0:s.latestVcsWkid,updating:!1}}return{updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=this._allLayers,r=t.updating,i=[];for(const n of t.layers){const s="fullExtents"in n&&n.fullExtents||(n.fullExtent!=null?[n.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:s[0],a=s.find(l=>l.spatialReference.equals(this.spatialReference))??o;if(a)return{candidates:[{extent:a,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const l of s)i.push({extent:l,layer:n})}return{candidates:i,updating:r}}get _extentTask(){const{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),n=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=u0(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:n.clone(),task:_O(async s=>{try{const o=await TG(i.extent,n,"portalItem"in i.layer?i.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Ia(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if(t==null)return r;const i=new Array;for(const n of t)for(const s of r){if(!n.spatialReference.equals(s.spatialReference))continue;const o=khe(n.viewingMode,s.viewingMode);if(o!==!1){i.push({spatialReference:n.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const r=this.defaultSpatialReference;return t==null||t.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&t.length>1&&t.some(({spatialReference:i})=>i.equals(r))&&(t=t.filter(({spatialReference:i})=>i.equals(r))),t.length>1&&t.some(({viewingMode:i})=>i!==r_.Local)&&(t=t.filter(({viewingMode:i})=>i!==r_.Local)),t[0])}_getSupportedSpatialReferences(t){const r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const n of r){const s=this.getSpatialReferenceSupport(n,t);if(s!=null){const o=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||i.push({spatialReference:a,viewingMode:l})}}return i}_pickExtentCandidate(t){const r=this.spatialReference;return t.find(({extent:i})=>r.equals(i.spatialReference))||t[0]}_collectLayers(t){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const r=new Ihe;for(const n of t)if(this._collectCollection(n,r),r.preloading===this.sourcePreloadCount)break;return{layers:r.layers,updating:r.updating}}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of t.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":r.updating||r.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(r=>{Gi(r)||console.log(r)}),"loading"):t.loadStatus:"loaded"}};u([d()],ot.prototype,"required",void 0),u([d({constructOnly:!0})],ot.prototype,"map",void 0),u([d({constructOnly:!0})],ot.prototype,"getSpatialReferenceSupport",void 0),u([d()],ot.prototype,"defaultSpatialReference",void 0),u([d()],ot.prototype,"userSpatialReference",void 0),u([d()],ot.prototype,"sourcePreloadCount",void 0),u([d()],ot.prototype,"priorityCollection",void 0),u([d()],ot.prototype,"requiresExtentInSpatialReference",void 0),u([d()],ot.prototype,"suspended",void 0),u([d({readOnly:!0})],ot.prototype,"ready",null),u([d({readOnly:!0})],ot.prototype,"heightModelInfoReady",null),u([d({readOnly:!0})],ot.prototype,"spatialReference",null),u([d({readOnly:!0})],ot.prototype,"extent",null),u([d({readOnly:!0})],ot.prototype,"heightModelInfo",null),u([d({readOnly:!0})],ot.prototype,"vcsWkid",null),u([d({readOnly:!0})],ot.prototype,"latestVcsWkid",null),u([d({readOnly:!0})],ot.prototype,"viewingMode",null),u([d({readOnly:!0})],ot.prototype,"tileInfo",null),u([d({readOnly:!0})],ot.prototype,"mapCollections",null),u([d({readOnly:!0})],ot.prototype,"_allLayers",null),u([d({readOnly:!0})],ot.prototype,"_spatialReferenceTask",null),u([d({readOnly:!0})],ot.prototype,"_tileInfoTask",null),u([d({readOnly:!0})],ot.prototype,"_heightModelInfoTask",null),u([d({readOnly:!0})],ot.prototype,"_extentCandidatesTask",null),u([d()],ot.prototype,"_extentTask",null),u([d()],ot.prototype,"_projectExtentTask",void 0),ot=u([T("esri.views.support.DefaultsFromMap")],ot);let Ihe=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};function khe(e,t){return e!=null?t!=null?e===t&&e:e:t}var Zm;let pe=Zm=class extends Aa.EventedMixin(K_(we)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new H0,this.updatingHandles=new rd,this.allLayerViews=new v0({getCollections:()=>{var t,r,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:Phe}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new nd,this.analyses=new Kb,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ce,this.magnifier=new iG,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new mhe,this.navigation=new gG,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Zpe(this),this.persistableViewModels=new ce,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(xe(()=>this.preconditionsReady,t=>{var i,n;const r=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,Zm.views.add(this)):(this._lockedSpatialReference=null,Zm.views.remove(this)),this.notifyChange("spatialReference"),!t&&r)(i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown();else if(t&&!r){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new D("startup-error",null,s)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},du))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,DO(()=>this.ready)))),this.basemapView=new fl({view:this}),this.layerViewManager=new Rpe({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new io({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new Hpe({view:this}),this.addHandles([xe(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Ln),xe(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},du),xe(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Ln)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([xe(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var i;const r=((i=this.map)==null?void 0:i.allLayers.length)>0;if(t&&!this.spatialReference&&r){if(e!=null)return;const n=Xe(()=>e=u0(e));e=_O(async s=>{try{await w8(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{e=null}H.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(n,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){var e,t;this.destroyed||(Zm.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=xt(this.graphics),this.analyses=xt(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),xt(this.analysisViewManager),this.toolViewManager=xt(this.toolViewManager),this.layerViewManager=xt(this.layerViewManager),this.selectionManager=xt(this.selectionManager),this.basemapView=xt(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(r=>r.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=xt(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return H.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new ot({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||ka.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(H.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),ka.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){var t,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&r.heightModelInfo)){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const t=!gr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??To}set timeZone(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));this._userTimeZone=e,e===To||e===$d||t.has(e.toLowerCase())||r.has(e.toLowerCase())||H.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new e3}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}importLayerView(e){throw new D("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&H.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Oa(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};pe.views=new ce,u([d()],pe.prototype,"_userSpatialReference",void 0),u([d()],pe.prototype,"activeTool",null),u([d({readOnly:!0})],pe.prototype,"allLayerViews",void 0),u([d()],pe.prototype,"groundView",void 0),u([d()],pe.prototype,"animation",null),u([d()],pe.prototype,"basemapView",void 0),u([d()],pe.prototype,"center",null),u([d({readOnly:!0})],pe.prototype,"_defaultsFromMapSettings",null),u([d()],pe.prototype,"defaultsFromMap",null),u([d()],pe.prototype,"fatalError",void 0),u([d({type:ct})],pe.prototype,"extent",null),u([d(AM(nd,"graphics"))],pe.prototype,"graphics",void 0),u([d(AM(Kb,"analyses"))],pe.prototype,"analyses",void 0),u([d({readOnly:!0,type:SS})],pe.prototype,"heightModelInfo",null),u([d({readOnly:!0})],pe.prototype,"interacting",null),u([d({readOnly:!0})],pe.prototype,"navigating",null),u([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],pe.prototype,"preconditionsReady",null),u([d({readOnly:!0})],pe.prototype,"typeSpecificPreconditionsReady",void 0),u([d({type:ce,readOnly:!0})],pe.prototype,"layerViews",void 0),u([d()],pe.prototype,"resolution",null),u([d({type:iG})],pe.prototype,"magnifier",void 0),u([d({value:null,type:u7})],pe.prototype,"map",null),u([d()],pe.prototype,"padding",void 0),u([d({readOnly:!0})],pe.prototype,"ready",void 0),u([d({type:Pe})],pe.prototype,"spatialReference",null),u([d()],pe.prototype,"spatialReferenceWarningDelay",void 0),u([d()],pe.prototype,"stationary",null),u([d({readOnly:!0})],pe.prototype,"supportsGround",void 0),u([d({type:Mo})],pe.prototype,"timeExtent",void 0),u([d({type:String,nonNullable:!0})],pe.prototype,"timeZone",null),u([d()],pe.prototype,"tools",null),u([d()],pe.prototype,"toolViewManager",void 0),u([d({readOnly:!0})],pe.prototype,"type",void 0),u([d({type:Number})],pe.prototype,"scale",void 0),u([d({readOnly:!0})],pe.prototype,"updating",void 0),u([d({readOnly:!0})],pe.prototype,"initialExtentRequired",void 0),u([d({readOnly:!0})],pe.prototype,"initialExtent",null),u([d()],pe.prototype,"cursor",null),u([d({readOnly:!0})],pe.prototype,"input",void 0),u([d({type:gG,nonNullable:!0})],pe.prototype,"navigation",void 0),u([d()],pe.prototype,"layerViewManager",void 0),u([d()],pe.prototype,"analysisViewManager",void 0),u([d()],pe.prototype,"selectionManager",void 0),u([d()],pe.prototype,"width",void 0),u([d()],pe.prototype,"height",void 0),u([d({readOnly:!0})],pe.prototype,"resizing",void 0),u([d({value:null,readOnly:!0})],pe.prototype,"size",null),u([d({readOnly:!0})],pe.prototype,"suspended",void 0),u([d({readOnly:!0})],pe.prototype,"viewEvents",void 0),u([d({readOnly:!0})],pe.prototype,"persistableViewModels",void 0),u([d()],pe.prototype,"_isValid",void 0),u([d()],pe.prototype,"_readyCycleForced",void 0),u([d()],pe.prototype,"_lockedSpatialReference",void 0),u([d()],pe.prototype,"_userTimeZone",void 0),u([d()],pe.prototype,"_lockedTimeZone",void 0),u([d({type:e3})],pe.prototype,"theme",void 0),u([d({readOnly:!0,type:e3})],pe.prototype,"effectiveTheme",null),pe=Zm=u([T("esri.views.View")],pe);const Ohe=pe;function Phe(e){return e.layerViews}function jt(){return[0,0]}function Che(e){return[e[0],e[1]]}function dg(e,t){return[e,t]}function Rhe(e,t=jt()){const r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Ahe(e,t){return new Float64Array(e,t,2)}function MG(){return jt()}function EG(){return dg(1,1)}function IG(){return dg(1,0)}function kG(){return dg(0,1)}const Lhe=MG(),Nhe=EG(),Fhe=IG(),Dhe=kG();Object.freeze(Object.defineProperty({__proto__:null,ONES:Nhe,UNIT_X:Fhe,UNIT_Y:Dhe,ZEROS:Lhe,clone:Che,create:jt,createView:Ahe,fromArray:Rhe,fromValues:dg,ones:EG,unitX:IG,unitY:kG,zeros:MG},Symbol.toStringTag,{value:"Module"}));let yl=class extends Eb{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=pn(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new D("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,r){r||(r=Su(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};u([d({readOnly:!0})],yl.prototype,"done",null),u([d({readOnly:!0,type:String})],yl.prototype,"state",void 0),u([d()],yl.prototype,"target",void 0),yl=u([T("esri.views.ViewAnimation")],yl),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(yl||(yl={}));const i3=yl;function Ih(e,t){return e[0]=t[0],e[1]=t[1],e}function xr(e,t,r){return e[0]=t,e[1]=r,e}function OG(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function M0(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function PG(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function CG(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function jhe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function zhe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Vhe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Uhe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function Ghe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function pg(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function qhe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function OS(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function i_(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function n_(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function RG(e){const t=e[0],r=e[1];return t*t+r*r}function AG(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Bhe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function n3(e,t){const r=t[0],i=t[1];let n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function LG(e,t){return e[0]*t[0]+e[1]*t[1]}function NG(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function Hhe(e,t,r,i){const n=t[0],s=t[1];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e}function Whe(e,t){t=t||1;const r=2*sS()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function Zhe(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e}function fo(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function Jhe(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e}function Khe(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e}function Yhe(e,t,r,i){const n=t[0]-r[0],s=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=n*a-s*o+r[0],e[1]=n*o+s*a+r[1],e}function Qhe(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(r*n+i*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function Xhe(e){return"vec2("+e[0]+", "+e[1]+")"}function efe(e,t){return e[0]===t[0]&&e[1]===t[1]}function tfe(e,t){const r=e[0],i=e[1],n=t[0],s=t[1],o=vi();return Math.abs(r-n)<=o*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))}function rfe(e,t,r,i,n){let s=t[0]-r[0],o=t[1]-r[1];const a=(i[0]*s+i[1]*o)*(n-1);return s=i[0]*a,o=i[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const ife=n_,CP=M0,nfe=PG,sfe=CG,ofe=OS,afe=i_,lfe=RG;Object.freeze(Object.defineProperty({__proto__:null,add:OG,angle:Qhe,ceil:jhe,copy:Ih,cross:NG,dist:ofe,distance:OS,div:sfe,divide:CG,dot:LG,equals:tfe,exactEquals:efe,floor:zhe,inverse:Bhe,len:ife,length:n_,lerp:Hhe,max:Uhe,min:Vhe,mul:nfe,multiply:PG,negate:AG,normalize:n3,projectAndScale:rfe,random:Whe,rotate:Yhe,round:Ghe,scale:pg,scaleAndAdd:qhe,set:xr,sqrDist:afe,sqrLen:lfe,squaredDistance:i_,squaredLength:RG,str:Xhe,sub:CP,subtract:M0,transformMat2:Zhe,transformMat2d:fo,transformMat3:Jhe,transformMat4:Khe},Symbol.toStringTag,{value:"Module"}));function ufe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function cfe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function dfe(e,t,r,i,n,s,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e}function RP(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5];let l=r*s-i*n;return l?(l=1/l,e[0]=s*l,e[1]=-i*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*a-s*o)*l,e[5]=(i*o-r*a)*l,e):null}function pfe(e){return e[0]*e[3]-e[1]*e[2]}function FG(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1],f=r[2],m=r[3],y=r[4],g=r[5];return e[0]=i*c+s*h,e[1]=n*c+o*h,e[2]=i*f+s*m,e[3]=n*f+o*m,e[4]=i*y+s*g+a,e[5]=n*y+o*g+l,e}function PS(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=Math.sin(r),h=Math.cos(r);return e[0]=i*h+s*c,e[1]=n*h+o*c,e[2]=i*-c+s*h,e[3]=n*-c+o*h,e[4]=a,e[5]=l,e}function AP(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1];return e[0]=i*c,e[1]=n*c,e[2]=s*h,e[3]=o*h,e[4]=a,e[5]=l,e}function E0(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=i*c+s*h+a,e[5]=n*c+o*h+l,e}function DG(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function jG(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function LP(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function hfe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function ffe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function mfe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function zG(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function yfe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function gfe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function vfe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function wfe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=t[0],c=t[1],h=t[2],f=t[3],m=t[4],y=t[5],g=vi();return Math.abs(r-l)<=g*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-c)<=g*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-h)<=g*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-f)<=g*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-m)<=g*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=g*Math.max(1,Math.abs(a),Math.abs(y))}const bfe=FG,_fe=zG;Object.freeze(Object.defineProperty({__proto__:null,add:mfe,copy:ufe,determinant:pfe,equals:wfe,exactEquals:vfe,frob:ffe,fromRotation:DG,fromScaling:jG,fromTranslation:LP,identity:cfe,invert:RP,mul:bfe,multiply:FG,multiplyScalar:yfe,multiplyScalarAndAdd:gfe,rotate:PS,scale:AP,set:dfe,str:hfe,sub:_fe,subtract:zG,translate:E0},Symbol.toStringTag,{value:"Module"}));function _a(){return[1,0,0,1,0,0]}function Sfe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function $fe(e,t,r,i,n,s){return[e,t,r,i,n,s]}function xfe(e,t){return new Float64Array(e,t,6)}const Tfe=_a();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Tfe,clone:Sfe,create:_a,createView:xfe,fromValues:$fe},Symbol.toStringTag,{value:"Module"}));const Pv={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Dn({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Pe.WebMercator}),minus180Line:new Dn({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Pe.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Dn({paths:[[[180,-180],[180,180]]],spatialReference:Pe.WGS84}),minus180Line:new Dn({paths:[[[-180,-180],[-180,180]]],spatialReference:Pe.WGS84})}};function Hc(e,t){return Math.ceil((e-t)/(2*t))}function VG(e,t){const r=jy(e);for(const i of r)for(const n of i)n[0]+=t;return e}function jy(e){return wh(e)?e.rings:e.paths}function bIe(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function Mfe(e){return typeof e=="string"?ii(e):C(e)}function Efe(e,t,r){const i={};for(const n in e){if(n==="declaredClass")continue;const s=e[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))i[n]=s.map(o=>Efe(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(r==null?void 0:r[n]);i[n]=JSON.stringify(o)}else i[n]=JSON.stringify(s);else i[n]=s}return i}async function Ife(e,t,r,i){const n=Mfe(e),s=t[0].spatialReference,o={...i,responseType:"json",query:{...n.query,f:"json",sr:Sz(s),target:JSON.stringify({geometryType:GO(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await Ot(n.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(h=>{const f=pu(h);return f.spatialReference=s,f})}}function kfe(e){return{geometryType:GO(e[0]),geometries:e.map(t=>t.toJSON())}}function Ofe(e,t,r){const i=mse(t);return e.map(n=>{const s=i.fromJSON(n);return s.spatialReference=r,s})}async function Pfe(e,t,r){const i=typeof e=="string"?ii(e):e,n=t[0].spatialReference,s=GO(t[0]),o={...r,query:{...i.query,f:"json",sr:Sz(n),geometries:JSON.stringify(kfe(t))}},{data:a}=await Ot(i.path+"/simplify",o);return Ofe(a.geometries,s,n)}const UG=()=>H.getLogger("esri.geometry.support.normalizeUtils");function Cfe(e){return e.type==="polygon"}function Rfe(e){return e[0].type==="polygon"}function Afe(e){return e[0].type==="polyline"}function wN(e){const t=[];let r=0,i=0;for(let n=0;n<e.length;n++){const s=e[n];let o=null;for(let a=0;a<s.length;a++)o=s[a],t.push(o),a===0?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&t.push([(r+i)/2,0])}return t}function Lfe(e,t){if(!(e instanceof Dn||e instanceof Pa)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw UG().error(n),new D(n)}const r=jy(e),i=[];for(const n of r){const s=[];i.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],c=n[o+1][0],h=n[o+1][1],f=Math.sqrt((c-a)*(c-a)+(h-l)*(h-l)),m=(h-l)/f,y=(c-a)/f,g=f/t;if(g>1){for(let _=1;_<=g-1;_++){const $=_*t,E=y*$+a,k=m*$+l;s.push([E,k])}const v=(f+Math.floor(g-1)*t)/2,b=y*v+a,w=m*v+l;s.push([b,w])}s.push([c,h])}}return Cfe(e)?new Pa({rings:i,spatialReference:e.spatialReference}):new Dn({paths:i,spatialReference:e.spatialReference})}function bN(e,t,r){if(t){const i=Lfe(e,1e6);e=th(i,!0)}return r&&(e=VG(e,r)),e}function _N(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const n=Hc(i,t);e[0]=i+n*(-2*t)}else if(i<r){const n=Hc(i,r);e[0]=i+n*(-2*r)}}else{const i=e.x;if(i>t){const n=Hc(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){const n=Hc(i,r);e=e.clone().offset(n*(-2*r),0)}}return e}function Nfe(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const n=t.cutIndexes[i],s=t.geometries[i],o=jy(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let h=0;for(let m=0;m<l.length;m++){const y=l[m][0];h=y>h?y:h}h=Number(h.toFixed(9));const f=-360*Hc(h,180);for(let m=0;m<l.length;m++){const y=s.getPoint(a,m);s.setPoint(a,m,y.clone().offset(f,0))}return!0}})}if(n===r){if(Rfe(e))for(const a of jy(s))e[n]=e[n].addRing(a);else if(Afe(e))for(const a of jy(s))e[n]=e[n].addPath(a)}else r=n,e[n]=s}return e}async function Ffe(e,t,r){if(!Array.isArray(e))return Ffe([e],t);t&&typeof t!="string"&&UG().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:(t==null?void 0:t.url)??He.geometryServiceUrl;let n,s,o,a,l,c,h,f,m=0;const y=[],g=[];for(const E of e)if(E!=null)if(n||(n=E.spatialReference,s=ji(n),o=n.isWebMercator,c=o?102100:4326,a=Pv[c].maxX,l=Pv[c].minX,h=Pv[c].plus180Line,f=Pv[c].minus180Line),s)if(E.type==="mesh")g.push(E);else if(E.type==="point")g.push(_N(E.clone(),a,l));else if(E.type==="multipoint"){const k=E.clone();k.points=k.points.map(M=>_N(M,a,l)),g.push(k)}else if(E.type==="extent"){const k=E.clone()._normalize(!1,!1,s);g.push(k.rings?new Pa(k):k)}else if(E.extent){const k=E.extent,M=Hc(k.xmin,l)*(2*a);let P=M===0?E.clone():VG(E.clone(),M);k.offset(M,0);let{xmin:N,xmax:j}=k;N=Number(N.toFixed(9)),j=Number(j.toFixed(9)),k.intersects(h)&&j!==a?(m=j>m?j:m,P=bN(P,o),y.push(P),g.push("cut")):k.intersects(f)&&N!==l?(m=j*(2*a)>m?j*(2*a):m,P=bN(P,o,360),y.push(P),g.push("cut")):g.push(P)}else g.push(E.clone());else g.push(E);else g.push(E);let v=Hc(m,a),b=-90;const w=v,_=new Dn;for(;v>0;){const E=360*v-180;_.addPath([[E,b],[E,-1*b]]),b*=-1,v--}if(y.length>0&&w>0){const E=Nfe(y,await Ife(i,y,_,r)),k=[],M=[];for(let j=0;j<g.length;j++){const G=g[j];if(G!=="cut")M.push(G);else{const W=E.shift(),ie=e[j];ie!=null&&ie.type==="polygon"&&ie.rings&&ie.rings.length>1&&W.rings.length>=ie.rings.length?(k.push(W),M.push("simplify")):M.push(o?Xc(W):W)}}if(!k.length)return M;const P=await Pfe(i,k,r),N=[];for(let j=0;j<M.length;j++){const G=M[j];G!=="simplify"?N.push(G):N.push(o?Xc(P.shift()):P.shift())}return N}const $=[];for(let E=0;E<g.length;E++){const k=g[E];if(k!=="cut")$.push(k);else{const M=y.shift();$.push(o===!0?Xc(M):M)}}return $}function Dfe(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&ji(e.spatialReference);if(!r)return t;const[i,n]=r.valid,s=2*n,{width:o}=t;let a,{xmin:l,xmax:c}=t;if([l,c]=[c,l],e.type==="extent"||o===0||o<=n||o>s||l<i||c>n)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=wN(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=wN(e.paths);break;case"multipoint":a=e.points}const h=t.clone();for(let f=0;f<a.length;f++){let m=a[f][0];m<0?(m+=n,c=Math.max(m,c)):(m-=n,l=Math.min(m,l))}return h.xmin=l,h.xmax=c,h.width<o?(h.xmin-=n,h.xmax-=n,h):t}function NP(e,t,r){const i=ji(r);if(i==null)return e;const[n,s]=i.valid,o=2*s;let a=0,l=0;t>s?a=Math.ceil(Math.abs(t-s)/o):t<n&&(a=-Math.ceil(Math.abs(t-n)/o)),e>s?l=Math.ceil(Math.abs(e-s)/o):e<n&&(l=-Math.ceil(Math.abs(e-n)/o));let c=e+(a-l)*o;const h=c-t;return h>s?c-=o:h<n&&(c+=o),c}function _Ie(e,t){const r=ji(t);if(r){const[i,n]=r.valid,s=n-i;if(e<i)for(;e<i;)e+=s;if(e>n)for(;e>n;)e-=s}return e}const GG=96,qG=39.37,jfe=180/Math.PI;function BG(e){return e.wkid?e:e.spatialReference||Pe.WGS84}function FP(e,t){return t.type?xr(e,t.x,t.y):Ih(e,t)}function HG(e){return Ad(e)}function CS(e,t,r=0){let i=e.width,n=e.height;if(r!==0){const a=oS(r),l=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));i=e.width*l+e.height*c,n=e.width*c+e.height*l}const s=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(i/s,n/o)*Wfe(e.spatialReference)}async function Jm(e,t,r,i){var a,l;let n,s;if(!e||Array.isArray(e)&&!e.length)return null;if(ce.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const c=e.every(m=>"attributes"in m),h=e.some(m=>!m.geometry);let f=e;if(c&&h&&t&&t.allLayerViews){const m=new Map;for(const b of e){const w=b.layer,_=m.get(w)||[],$=b.attributes[w.objectIdField];$!=null&&_.push($),m.set(w,_)}const y=[];m.forEach((b,w)=>{const _=t.allLayerViews.find($=>$.layer.id===w.id);if(_&&"queryFeatures"in _){const $=w.createQuery();$.objectIds=b,$.returnGeometry=!0,y.push(_.queryFeatures($))}});const g=await Promise.all(y),v=[];for(const b of g)if(b&&b.features&&b.features.length)for(const w of b.features)w.geometry!=null&&v.push(w.geometry);f=v}for(const m of f)i=await Jm(m,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new Oe(e);else if(e instanceof La)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const c=e.layer,h=t.allLayerViews.find(f=>f.layer.id===c.id);if(h&&"queryFeatures"in h){const f=c.createQuery();f.objectIds=[e.attributes[c.objectIdField]],f.returnGeometry=!0;const m=await h.queryFeatures(f);n=(l=(a=m==null?void 0:m.features)==null?void 0:a[0])==null?void 0:l.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new ct({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=Dfe(n);break;default:s=n.extent}if(!s)return null;Mu()||Eo(s.spatialReference,r)||await yu();const o=Eu(s,r);if(!o)return null;if(i){const c=o.center,h=c.clone();h.x=NP(c.x,i.center.x,r),h.x!==c.x&&o.centerAt(h),i=i.union(o)}else i=o;return i}function zfe(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const r=e.layer;return{min:r.minScale,max:r.maxScale}}if(Array.isArray(e)&&e.length&&e.every(r=>"layer"in r)){let r=0,i=0;for(const n of e){const s=n.layer;s!=null&&s.minScale&&s.maxScale&&(r=s.minScale<r?s.minScale:r,i=s.maxScale>i?s.maxScale:i)}return r&&i?{min:r,max:i}:null}}}function SN(e,t){return gr(BG(e),t)?e:Eu(e,t)}async function Vfe(e,t){var b;if(!e||!t)return new Es({targetGeometry:new Oe,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:n,viewpoint:s,size:o}=t,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;e instanceof Es?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let c=null;l!=null&&l.targetGeometry?c=l.targetGeometry:e instanceof ct?c=e:e instanceof La?c=await Jm(e,t,r):e&&(c=await Jm(e.center,t,r)||await Jm(e.target,t,r)||await Jm(e,t,r)),!c&&(s!=null&&s.targetGeometry)?c=s.targetGeometry:!c&&t.extent&&(c=t.extent),r||(r=BG(t.spatialReference||t.extent||c)),Mu()||gr(c.spatialReference,r)||Eo(c.spatialReference,r)||await yu();const h=SN(c,r),f="center"in h?h.center:h;t.pickClosestTarget!==!1&&f.type==="point"&&((b=s.targetGeometry)==null?void 0:b.type)==="point"&&(f.x=NP(f.x,s.targetGeometry.x,f.spatialReference));let m=0;l?m=l.rotation:e.hasOwnProperty("rotation")?m=e.rotation:s&&(m=s.rotation);let y=0;y=(l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(e.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?s.scale:CS(SN(c.extent,r),a,m);const g=zfe(e.target??e);g&&(g.min&&g.min<y?y=g.min:g.max&&g.max>y&&(y=g.max));let v=new Es({targetGeometry:f,scale:y,rotation:m});return i&&(v=i.fit(v),i.constrainByGeometry(v),i.rotationEnabled||(v.rotation=s.rotation)),v}function ei(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function Ufe(e,t,r){return r?xr(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):pg(e,t,.5)}const Gfe=function(){const e=jt();return function(t,r,i){const n=r.targetGeometry;FP(e,n);const s=.5*wf(r);return t.xmin=e[0]-s*i[0],t.ymin=e[1]-s*i[1],t.xmax=e[0]+s*i[0],t.ymax=e[1]+s*i[1],t.spatialReference=n.spatialReference,t}}();function qfe(e,t,r,i,n){var s;return s3(e,t,r.center),e.scale=CS(r,i),(s=n==null?void 0:n.constraints)==null||s.constrain(e),e}function Bfe(e,t,r,i){return zP(e,t,r,i),RP(e,e)}const WG=function(){const e=jt();return function(t,r,i){return CP(t,Zfe(t,r),Ufe(e,r,i))}}(),Hfe=function(){const e=_a(),t=jt();return function(r,i,n,s){const o=wf(i),a=DP(i);return xr(t,o,o),jG(e,t),PS(e,e,a),E0(e,e,WG(t,n,s)),E0(e,e,[0,s.top-s.bottom]),xr(r,e[4],e[5])}}();function wf(e){var t;return e.scale*ZG((t=e.targetGeometry)==null?void 0:t.spatialReference)}function ZG(e){return e!=null&&on(e)?1/(HG(e)*qG*GG):1}function DP(e){return LO(e.rotation)||0}function Wfe(e){return on(e)?HG(e)*qG*GG:1}function Zfe(e,t){return pg(e,t,.5)}const jP=function(){const e=jt(),t=jt(),r=jt();return function(i,n,s,o,a,l){return AG(e,n),pg(t,s,.5*l),xr(r,1/o*l,-1/o*l),LP(i,t),a&&PS(i,i,a),AP(i,i,r),E0(i,i,e),i}}(),zP=function(){const e=jt();return function(t,r,i,n){const s=wf(r),o=DP(r);return FP(e,r.targetGeometry),jP(t,e,i,s,o,n)}}(),Jfe=function(){const e=jt();return function(t,r,i,n){const s=wf(r);return FP(e,r.targetGeometry),jP(t,e,i,s,0,n)}}();function JG(e){const t=ji(e);return t?t.valid[1]-t.valid[0]:0}function Kfe(e,t){return Math.round(JG(e)/t)}const Yfe=function(){const e=jt(),t=jt(),r=[0,0,0];return function(i,n,s){M0(e,i,n),n3(e,e),M0(t,i,s),n3(t,t),NG(r,e,t);let o=Math.acos(LG(e,t)/(n_(e)*n_(t)))*jfe;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),Qfe=function(){const e=jt();return function(t,r,i,n){const s=t.targetGeometry;return ei(t,r),Hfe(e,r,i,n),s.x+=e[0],s.y+=e[1],t}}(),s3=function(e,t,r){ei(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},Xfe=function(){const e=jt();return function(t,r,i,n,s){s||(s="center"),CP(e,i,n),pg(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":xr(e,0,0);break;case"left":xr(e,-o,0);break;case"top":xr(e,0,a);break;case"right":xr(e,o,0);break;case"bottom":xr(e,0,-a);break;case"top-left":xr(e,-o,a);break;case"bottom-left":xr(e,-o,-a);break;case"top-right":xr(e,o,a);break;case"bottom-right":xr(e,o,-a)}return RS(t,r,e),t}}();function SIe(e,t,r){return ei(e,t),e.rotation+=r,e}function eme(e,t,r){return ei(e,t),e.rotation=r,e}const tme=function(){const e=jt();return function(t,r,i,n,s){return ei(t,r),isNaN(i)||i===0||(YG(e,n,r,s),t.scale=r.scale*i,QG(e,e,t,s),RS(t,t,xr(e,e[0]-n[0],n[1]-e[1]))),t}}();function $N(e,t,r){return ei(e,t),e.scale=r,e}const KG=function(){const e=jt();return function(t,r,i,n,s,o){return ei(t,r),isNaN(i)||i===0||(YG(e,s,r,o),t.scale=r.scale*i,t.rotation+=n,QG(e,e,t,o),RS(t,t,xr(e,e[0]-s[0],s[1]-e[1]))),t}}(),$Ie=function(){const e=jt(),t=jt();return function(r,i,n,s,o,a,l){return WG(t,a,l),OG(e,o,t),s?KG(r,i,n,s,e,a):tme(r,i,n,e,a)}}(),YG=function(){const e=_a();return function(t,r,i,n){return fo(t,r,Bfe(e,i,n,1))}}(),QG=function(){const e=_a();return function(t,r,i,n){return fo(t,r,zP(e,i,n,1))}}(),RS=function(){const e=jt(),t=_a();return function(r,i,n){ei(r,i);const s=wf(i),o=r.targetGeometry;return DG(t,DP(i)),AP(t,t,dg(s,s)),fo(e,n,t),o.x+=e[0],o.y+=e[1],r}}();function XG(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function rme(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ime(e,t,r,i,n,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function nme(e,t){return new Float32Array(e,t,6)}function eq(e,t,r,i){const n=t[i],s=t[i+1];e[i]=r[0]*n+r[2]*s+r[4],e[i+1]=r[1]*n+r[3]*s+r[5]}function sme(e,t,r,i=0,n=0,s=2){const o=n||t.length/s;for(let a=i;a<o;a++)eq(e,t,r,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:rme,create:XG,createView:nme,fromValues:ime,transform:eq,transformMany:sme},Symbol.toStringTag,{value:"Module"}));function ome(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function ame(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function tq(e,t,r,i,n,s,o,a,l,c){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e}function rq(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function lme(e,t){if(e===t){const r=t[1],i=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function ume(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=h*o-a*c,m=-h*s+a*l,y=c*s-o*l;let g=r*f+i*m+n*y;return g?(g=1/g,e[0]=f*g,e[1]=(-h*i+n*c)*g,e[2]=(a*i-n*o)*g,e[3]=m*g,e[4]=(h*r-n*l)*g,e[5]=(-a*r+n*s)*g,e[6]=y*g,e[7]=(-c*r+i*l)*g,e[8]=(o*r-i*s)*g,e):null}function cme(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return e[0]=o*h-a*c,e[1]=n*c-i*h,e[2]=i*a-n*o,e[3]=a*l-s*h,e[4]=r*h-n*l,e[5]=n*s-r*a,e[6]=s*c-o*l,e[7]=i*l-r*c,e[8]=r*o-i*s,e}function dme(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*(c*s-o*l)+r*(-c*n+o*a)+i*(l*n-s*a)}function VP(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=r[0],y=r[1],g=r[2],v=r[3],b=r[4],w=r[5],_=r[6],$=r[7],E=r[8];return e[0]=m*i+y*o+g*c,e[1]=m*n+y*a+g*h,e[2]=m*s+y*l+g*f,e[3]=v*i+b*o+w*c,e[4]=v*n+b*a+w*h,e[5]=v*s+b*l+w*f,e[6]=_*i+$*o+E*c,e[7]=_*n+$*a+E*h,e[8]=_*s+$*l+E*f,e}function o3(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=r[0],y=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=m*i+y*o+c,e[7]=m*n+y*a+h,e[8]=m*s+y*l+f,e}function iq(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=Math.sin(r),y=Math.cos(r);return e[0]=y*i+m*o,e[1]=y*n+m*a,e[2]=y*s+m*l,e[3]=y*o-m*i,e[4]=y*a-m*n,e[5]=y*l-m*s,e[6]=c,e[7]=h,e[8]=f,e}function pme(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function hme(e,t,r){const i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function fme(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function mme(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function yme(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function gme(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function vme(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,l=n+n,c=r*o,h=i*o,f=i*a,m=n*o,y=n*a,g=n*l,v=s*o,b=s*a,w=s*l;return e[0]=1-f-g,e[3]=h-w,e[6]=m+b,e[1]=h+w,e[4]=1-c-g,e[7]=y-v,e[2]=m-b,e[5]=y+v,e[8]=1-c-f,e}function wme(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10],f=h*o-a*c,m=-h*s+a*l,y=c*s-o*l,g=r*f+i*m+n*y;if(!g)return null;const v=1/g;return e[0]=f*v,e[1]=(-h*i+n*c)*v,e[2]=(a*i-n*o)*v,e[3]=m*v,e[4]=(h*r-n*l)*v,e[5]=(-a*r+n*s)*v,e[6]=y*v,e[7]=(-c*r+i*l)*v,e[8]=(o*r-i*s)*v,e}function bme(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],b=t[14],w=t[15],_=r*a-i*o,$=r*l-n*o,E=r*c-s*o,k=i*l-n*a,M=i*c-s*a,P=n*c-s*l,N=h*v-f*g,j=h*b-m*g,G=h*w-y*g,W=f*b-m*v,ie=f*w-y*v,me=m*w-y*b;let ne=_*me-$*ie+E*W+k*G-M*j+P*N;return ne?(ne=1/ne,e[0]=(a*me-l*ie+c*W)*ne,e[1]=(l*G-o*me-c*j)*ne,e[2]=(o*ie-a*G+c*N)*ne,e[3]=(n*ie-i*me-s*W)*ne,e[4]=(r*me-n*G+s*j)*ne,e[5]=(i*G-r*ie-s*N)*ne,e[6]=(v*P-b*M+w*k)*ne,e[7]=(b*E-g*P-w*$)*ne,e[8]=(g*M-v*E+w*_)*ne,e):null}function _me(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Sme(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function $me(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function xme(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function nq(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function Tme(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function Mme(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function Eme(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Ime(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=t[0],m=t[1],y=t[2],g=t[3],v=t[4],b=t[5],w=t[6],_=t[7],$=t[8],E=vi();return Math.abs(r-f)<=E*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-m)<=E*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(n-y)<=E*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(s-g)<=E*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-v)<=E*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-b)<=E*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-w)<=E*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-_)<=E*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(h-$)<=E*Math.max(1,Math.abs(h),Math.abs($))}function kme(e){const t=vi(),r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(i*i+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const Ome=VP,Pme=nq;Object.freeze(Object.defineProperty({__proto__:null,add:xme,adjoint:cme,copy:ame,determinant:dme,equals:Ime,exactEquals:Eme,frob:$me,fromMat2d:gme,fromMat4:ome,fromQuat:vme,fromRotation:mme,fromScaling:yme,fromTranslation:fme,identity:rq,invert:ume,isOrthoNormal:kme,mul:Ome,multiply:VP,multiplyScalar:Tme,multiplyScalarAndAdd:Mme,normalFromMat4:bme,normalFromMat4Legacy:wme,projection:_me,rotate:iq,scale:pme,scaleByVec2:hme,set:tq,str:Sme,sub:Pme,subtract:nq,translate:o3,transpose:lme},Symbol.toStringTag,{value:"Module"}));function sw(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function Cme(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Rme(e,t,r,i,n,s,o,a,l){const c=new Float32Array(9);return c[0]=e,c[1]=t,c[2]=r,c[3]=i,c[4]=n,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}function Ame(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:Cme,create:sw,createView:Ame,fromValues:Rme},Symbol.toStringTag,{value:"Module"}));function sq(){return new Float32Array(2)}function Lme(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Qh(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function Nme(e,t){return new Float32Array(e,t,2)}function oq(){return sq()}function aq(){return Qh(1,1)}function lq(){return Qh(1,0)}function uq(){return Qh(0,1)}const Fme=oq(),Dme=aq(),jme=lq(),zme=uq();Object.freeze(Object.defineProperty({__proto__:null,ONES:Dme,UNIT_X:jme,UNIT_Y:zme,ZEROS:Fme,clone:Lme,create:sq,createView:Nme,fromValues:Qh,ones:aq,unitX:lq,unitY:uq,zeros:oq},Symbol.toStringTag,{value:"Module"}));function Vme(e){return e instanceof Float32Array&&e.length>=2}function Ume(e){return Array.isArray(e)&&e.length>=2}function L$(e){return Vme(e)||Ume(e)}var a3;const Lo=[0,0];let gl=a3=class extends q{constructor(e){super(e),this._viewpoint2D={center:jt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new ct,this.id=0,this.inverseTransform=_a(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=_a(),this.transformNoRotation=_a(),this.displayMat3=sw(),this.displayViewMat3=sw(),this.viewMat3=sw(),this.viewMat2d=XG(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=ei(r,e.viewpoint),this._set("size",Ih(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new a3({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return L$(t)?fo(e,t,this.inverseTransform):(Lo[0]=t,Lo[1]=r,fo(e,Lo,this.inverseTransform))}toScreen(e,t,r){return L$(t)?fo(e,t,this.transform):(Lo[0]=t,Lo[1]=r,fo(e,Lo,this.transform))}toScreenNoRotation(e,t,r){return L$(t)?fo(e,t,this.transformNoRotation):(Lo[0]=t,Lo[1]=r,fo(e,Lo,this.transformNoRotation))}wrapMapCoordinate(e,t){Ih(e,t);const[r]=t,[i]=this.center,{extent:n,spatialReference:s}=this;let{xmin:o,xmax:a}=n;if(s.isWrappable){const l=JG(s)/2;o=Math.max(o,i-l),a=Math.min(a,i+l)}return(r<o||r>a)&&(e[0]=NP(r,i,s)),e}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,n=this._get("size");return jP(e,r,n,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new Es({targetGeometry:new Oe(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!s||!t||!r)return;this.resolution=wf(o),this.rotation=i,this.scale=r,this.spatialReference=t,Ih(this.center,e);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;tq(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=rq(this.viewMat3),h=Qh(s[0]/2,s[1]/2),f=Qh(-s[0]/2,-s[1]/2),m=LO(i);o3(c,c,h),iq(c,c,m),o3(c,c,f),VP(this.displayViewMat3,this.displayMat3,c);const y=LP(this.viewMat2d,h);return PS(y,y,m),E0(y,y,f),Gfe(this.extent,o,s),zP(this.transform,o,s,n),RP(this.inverseTransform,this.transform),Jfe(this.transformNoRotation,o,s,n),this.worldScreenWidth=Kfe(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};u([d({readOnly:!0})],gl.prototype,"id",void 0),u([d({value:1,json:{write:!0}})],gl.prototype,"pixelRatio",null),u([d({json:{write:!0}})],gl.prototype,"size",null),u([d()],gl.prototype,"spatialReference",void 0),u([d({type:Es,json:{write:!0}})],gl.prototype,"viewpoint",null),gl=a3=u([T("esri.views.2d.ViewState")],gl);const xN=gl;var l3,u3;let ha=l3=class extends we{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new l3({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};u([d()],ha.prototype,"left",void 0),u([d()],ha.prototype,"top",void 0),u([d()],ha.prototype,"right",void 0),u([d()],ha.prototype,"bottom",void 0),ha=l3=u([T("esri.views.2d.PaddedViewState.Padding")],ha);let _p=u3=class extends xN{constructor(...e){super(...e),this.paddedViewState=new xN,this._updateContent=(()=>{const t=jt();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const n=this.paddedViewState;xr(t,i.left+i.right,i.top+i.bottom),M0(t,r,t),Ih(n.size,t);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(xe(()=>[this.size,this.padding],()=>this._updateContent(),du)),this.padding=new ha,this.size=[0,0]}set padding(e){this._set("padding",e||new ha)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;const t=this._viewpoint2D;if(this._get("padding")){const r=e.clone();Qfe(r,e,this._get("size"),this._get("padding"));const i=r.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=r.rotation,t.scale=r.scale,t.spatialReference=i.spatialReference}else{const r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}}clone(){return new u3({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};u([d()],_p.prototype,"paddedViewState",void 0),u([d({type:ha})],_p.prototype,"padding",null),u([d()],_p.prototype,"viewpoint",null),_p=u3=u([T("esri.views.2d.PaddedViewState")],_p);const UP=_p;function Ac(e,t,r,i){const n=3*e,s=3*(r-e)-n,o=1-n-s,a=3*t,l=3*(i-t)-a,c=1-a-l;function h(g){return((o*g+s)*g+n)*g}function f(g){return((c*g+l)*g+a)*g}function m(g){return(3*o*g+2*s)*g+n}function y(g,v){let b,w,_,$,E,k;for(_=g,k=0;k<8;k++){if($=h(_)-g,Math.abs($)<v)return _;if(E=m(_),Math.abs(E)<1e-6)break;_-=$/E}if(b=0,w=1,_=g,_<b)return b;if(_>w)return w;for(;b<w;){if($=h(_),Math.abs($-g)<v)return _;g>$?b=_:w=_,_=.5*(w-b)+b}return _}return function(g,v=1e-6){return f(y(g,v))}}const Gme=/^cubic-bezier\((.*)\)/,lo={};function qme(e){let t=lo[e]||null;if(!t){const r=Gme.exec(e);if(r){const i=r[1].split(",").map(n=>parseFloat(n.trim()));i.length!==4||i.some(n=>isNaN(n))||(t=Ac.apply(Ac,i))}}return t}lo.ease=Ac(.25,.1,.25,1),lo.linear=Ac(0,0,1,1),lo.easeIn=lo["ease-in"]=Ac(.42,0,1,1),lo.easeOut=lo["ease-out"]=Ac(0,0,.58,1),lo.easeInOut=lo["ease-in-out"]=Ac(.42,0,.58,1);let TN=class{constructor(t){this._view=t,this.viewpoint=new Es({targetGeometry:new Oe,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,r]=this._view.size;return Math.sqrt(t*t+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return ZG(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotateAtZoom(t){return this.size/2}compareTo(t,r){r.pan=Az(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=oS(i),r.sourceZoom=this.scale,r.targetZoom=t.scale}interpolate(t,r,i){const{pan:n,rotate:s,zoom:o,zoomOffset:a}=i,{center:l}=this;l.spatialReference=t.center.spatialReference,l.x=bm(t.center.x,r.center.x,n),l.y=bm(t.center.y,r.center.y,n),this.viewpoint.scale=bm(t.scale,r.scale+a,o);let c=t.rotation;const h=r.rotation;Math.abs(h-c)>=180&&(c+=360*(c<h?1:-1)),this.viewpoint.rotation=bm(c,h,s)}copyFrom(t){ei(this.viewpoint,t.viewpoint),this._view=t.view}};const cq=e=>e*e,Bme=e=>1-cq(1-e),Hme=e=>2**(10*(e-1)),Wme=e=>1-Hme(1-e);function Zme(e){const t=2*(e-Math.sqrt((e-1)*e)),r=t/2/e;return i=>i<r?e*i*i:t*i-t+1}function Jme(e,t){return(r,i)=>r<t?t*e(r/t,i):1-e((1-r)/(1-t),i)*(1-t)}const MN=Jme(Zme(1),.5);let Kme=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const I0={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},dq={...I0,maxDuration:4e3};let Yme=class pq{constructor(t){this._createCamera=t,this.compared=new Kme,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:I0.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new pq(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,r,i){this.source!==t&&this.source.copyFrom(t),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow!=null?i.desiredScreenFlow:I0.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const r=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>vi()}get hasFov(){return Math.abs(this.compared.fov)>vi()}get hasRotate(){return this.compared.rotate>vi()}},Qme=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},Xme=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,r)=>t+r.time,0)}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),t*=this.time;let i=0,n=0;const s=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],c=l.definition;if(t<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:t/l.time,r),s.hasPan&&!isNaN(r.pan)&&isFinite(s.compared.pan)?r.pan=(i+c.compared.pan*r.pan)/s.compared.pan:r.pan=1,s.hasRotate&&!isNaN(r.rotate)&&isFinite(s.compared.rotate)?r.rotate=(n+c.compared.rotate*r.rotate)/s.compared.rotate:r.rotate=1,o&&!isNaN(r.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:h,targetZoom:f}=c.compared,m=r.zoom*(f-h)+h,y=this.segments[0].definition.compared.sourceZoom,g=this.segments[this.segments.length-1].definition.compared.targetZoom,v=Math.abs(f-y)>Math.abs(h-y)?f:h;r.zoomOffset=v-g,r.zoom=(m-y)/(v-y)}else r.zoom=1;return r}t-=l.time,i+=c.compared.pan,n+=c.compared.rotate}}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i)}},N$=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,r=t.compared,i=r.sourceZoom,n=r.targetZoom;this._zoomSign=i>n?1:-1,this._panPixelsAtSource=r.pan*t.source.pixelsPerPanAtZoom(i);const s=(t.source.pixelsPerRotateAtZoom(i)+t.target.pixelsPerRotateAtZoom(n))/2;this._rotatePixels=r.rotate*s}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:n,hasRotate:s}=this.definition;let o=0,a=0;i&&(n&&(o=(r/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(t/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(i&&n&&s){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*l,this._panPixelFlow=a/c*l,this._rotatePixelFlow=o/c*l}else if(i&&n){const c=1+o;this._zoomPixelFlow=o/c*l,this._panPixelFlow=1/c*l}else if(i&&s){const c=1+a;this._zoomPixelFlow=a/c*l,this._rotatePixelFlow=1/c*l}else if(n&&s){const c=this._panPixelsAtSource/this._rotatePixels,h=1+c;this._panPixelFlow=c/h*l,this._rotatePixelFlow=1/h*l}else n?this._panPixelFlow=l:i?this._zoomPixelFlow=l:s&&(this._rotatePixelFlow=l);this._time=this.rotateTime??this.zoomTime??this.panTime??this.fovTime??0}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:null}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:null}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/eye:null}get panTime(){if(this.definition.hasPan){if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=t*this._panPixelsAtSource;return Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-t-r)/(i-r)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+t*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*t*this._time)-1))/(r*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),r.zoom=this._interpolateComponentsZoom(t),r.pan=this._interpolateComponentsPan(t),r.rotate=this._interpolateComponentsRotate(t),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(t)}};const eye=oS(90);function tye(e,t,r){const i=t-e.compared.sourceZoom,n=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(r.ascensionFactor*Math.LN2*e.compared.pan+n)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*n)}function rye(e,t,r){const i=1/t,n=Math.log(e.compared.sourceZoom*i),s=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,l=1/a,c=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*s*o*l*c-e.halfWindowSize*n*s*o*l+e.halfWindowSize*n*s*o*c/(a*a)}function iye(e,t,r){const i=t-e.compared.sourceZoom,n=1/i,s=1/t,o=Math.log(e.compared.sourceZoom*s),a=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*s*a+2*n*o+2*s-2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function nye(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function sye(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function oye(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function aye(e,t,r){return-e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function lye(e,t,r){return e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function uye(e,t,r){return-2*e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function cye(e,t,r){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function dye(e,t,r){const i=Math.log(t/e.compared.targetZoom),n=1/e.desiredPixelFlow,s=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,l=(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*n*s*a+e.halfWindowSize*i*n*s*l/(o*o)+e.halfWindowSize*n*s*a*l/t}function pye(e,t,r){const i=t-e.compared.targetZoom,n=1/i,s=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+r.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*s*a-2*n*o+2*s+2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function hye(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function fye(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function mye(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function yye(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const r=Math.LN2*e.compared.pan,i=t,n=e.halfWindowPanAtZoom(i),s=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*n);return e.compared.sourceZoom<=e.compared.targetZoom?s*(r-n):s*(r+n)}function gye(e,t){let r=vye(e,t);const i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},n=i.ascensionFactor===0,s=i.descensionFactor===0,o=n?nye:tye,a=n?sye:rye,l=n?oye:iye,c=s?hye:cye,h=s?fye:dye,f=s?mye:pye,m=E=>o(e,E,i)+aye(e,E,i)+c(e,E,i),y=E=>a(e,E,i)+lye(e,E,i)+h(e,E,i),g=E=>l(e,E,i)+uye(e,E,i)+f(e,E,i);let v=m(r);const b=yye(e);let w;const _=t.maximumIterations||20,$=t.maximumDistance!=null?t.maximumDistance:1/0;for(w=0;w<_;w++){const E=t.desiredSlope??1e-6;let k=y(r);Math.abs(k)>E&&(k+=E);const M=k/g(r);if(isNaN(M)||r>=$&&M<0){if(!isFinite($))return null;r=$,v=m(r);break}if(r-=M,r<e.compared.sourceZoom||r<e.compared.targetZoom)return null;const P=m(r);if(Math.abs(P-v)/v<=.005)break;v=P}return v>b*(1-.3)||r<e.compared.sourceZoom||r<e.compared.targetZoom?null:r}function vye(e,t){const r=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<r?t.maximumDistance!=null?r+(t.maximumDistance-r)/2:1.5*r:t.maximumDistance?Math.min(t.maximumDistance,i):i}let wye=class extends Xme{constructor(t,r){super(),this._preallocSegments=[new N$,new N$,new N$],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,r)}update(t,r){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const i=r!=null&&r.apex?gye(t,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r==null?void 0:r.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i),t===this._ascensionSegment?i.zoom=Bme(i.zoom):t===this._descensionSegment&&(i.zoom=cq(i.zoom))}_updateWithApex(t,r){const[i,n,s]=this._preallocSegments,o=(r==null?void 0:r.ascensionFactor)??.5,a=Math.min(1-o,(r==null?void 0:r.ascensionFactor)!=null&&r.descensionFactor!=null?r.descensionFactor:.5),l=1-o-a;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),l>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=t,n.definition.compared.targetZoom=t,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=i.definition.segmentEnd,n.definition.segmentEnd=i.definition.segmentEnd+l,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=t,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+l,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const bye=new Qme;let _ye=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=MN,this.definition=new Yme(t),this.path=new wye}update(t,r,i){this.definition.update(t,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(_Q(isFinite(this.path.time)?this.path.time:0),i),this._easing=i.easing??(this._time>=1e3?MN:Wme)}cameraAt(t,r){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const i=this.path.interpolateComponentsAt(t,bye);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(t){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(t,this._time)-r)/(i-r)}_applyTimeSettings(t,r){const i=r.speedFactor!=null?r.speedFactor:1,n=r.minDuration??I0.minDuration/i,s=r.maxDuration??I0.maxDuration/i;return t=r.duration!=null?r.duration:Math.min(Math.max(t/i,n),s)}};const EN=2e3,Sye=64;let $ye=class{constructor(t){this._view=t,this._animation=new _ye(()=>new TN(this._view)),this._current=new TN(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,r,i={}){ei(this._current.viewpoint,t),ei(this._source.viewpoint,t),ei(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(t,r){this._animation.cameraAt(r,this._current),ei(t,this._current.viewpoint)}},Sp=class extends we{constructor(t){super(t),this._animation=null,this._destinationViewState=new UP,this.updateFunction=null,this.easing=lo.ease,this.viewpoint=new Es({targetGeometry:new Oe,scale:0,rotation:0}),this._updateTask=Vh({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new $ye(t.view)}destroy(){this._updateTask=Pt(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,r,i){this.stop();const n=this.viewpoint;ei(n,r);const s=(typeof(i==null?void 0:i.easing)=="string"?qme(i.easing):i==null?void 0:i.easing)||this.easing,o=t.target;this._transition.update(this.viewpoint,o,{apex:{maximumDistance:Math.min(Math.min(r.scale,o.scale)*Sye,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i==null?void 0:i.duration,maxDuration:(i==null?void 0:i.animationMode)==="auto"?1/0:(i==null?void 0:i.maxDuration)??dq.maxDuration,speedFactor:i==null?void 0:i.speedFactor,easing:typeof s=="function"?l=>s(l):void 0}),(i==null?void 0:i.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=o,xye(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,o,{duration:0}));const a=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;const i=new i3({target:t.clone()}),n=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var i,n;const r=this.animation;if(r&&r.state!==i3.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(i=this.animation)==null||i.update(this.viewpoint);else{const s=performance.now()-this._startTime,o=this._transition.duration,a=o>0?s/o:1,l=a>=1;this._transition.applyRatio(this.viewpoint,a),l&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function xye(e,t,r,i){if((t==null?void 0:t.duration)!=null)return!0;const{time:n,isLinear:s}=e,o=(t==null?void 0:t.speedFactor)||1,a=(t==null?void 0:t.maxDuration)??dq.maxDuration/o;if(F("esri-goto-debug")&&(console.log("speed factor:",o),console.log("adjusted duration:		",n),console.log("adjusted max duration:	",a),console.log("is linear:",s)),n>a)return F("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${a/1e3}s`),!1;if(s){const c=jt(),h=Nr(...i.toScreen(c,...r.center)),f=Nr(...r.toScreen(c,...i.center)),m=f!=null&&f.x>-(1.5-.5)*r.size[0]&&f.x<(1.5+.5)*r.size[0]&&f.y>-(1.5-.5)*r.size[1]&&f.y<(1.5+.5)*r.size[1],y=h!=null&&h.x>-(1.5-.5)*i.size[0]&&h.x<(1.5+.5)*i.size[0]&&h.y>-(1.5-.5)*i.size[1]&&h.y<(1.5+.5)*i.size[1];if(F("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,m),console.log(`start is within ${1.5} screens at dest view:`,y)),n>EN/o&&!m&&!y)return F("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${EN/1e3/o}s, or
  - shorter than ${a/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${a/1e3}s and the start point is close enough to the destination screen`),!1}return!0}u([d()],Sp.prototype,"easing",void 0),u([d()],Sp.prototype,"view",void 0),u([d()],Sp.prototype,"viewpoint",void 0),Sp=u([T("esri.views.2d.AnimationManager")],Sp);const Tye=Sp;let Mye=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation&&!("then"in this.view.animation.target)&&(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=()=>{var o,a;if(this._updateRequested=!1,(o=this.view)==null?void 0:o.destroyed)return;const{allLayerViews:r,graphicsView:i,labelManager:n,state:{id:s}}=this.view;r.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==s&&(n.viewChange(),n.lastUpdateId=s),n.updateRequested&&n.processUpdate(this._updateParameters)),i!=null&&(i.lastUpdateId!==s&&(i.viewChange(),i.lastUpdateId=s),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((a=this._frameTaskHandle)==null||a.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new UP,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=xe(()=>t.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=Vh(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var n;if(!t.attached)return void this.requestUpdate();const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((n=t.layerViews)==null||n.forEach(this._updateLayerView,this))}},ow=class extends we{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,r){if(!t)return void H.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new i3;this.view.animation=i,await DO(()=>this.view.ready,r);const n={...r,animate:(r==null?void 0:r.animate)??!mG(),animationMode:(r==null?void 0:r.animationMode)??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:h,allLayerViews:f}=this.view,m=Vfe(t,{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:h,allLayerViews:f,pickClosestTarget:(r==null?void 0:r.pickClosestTarget)??!0});return i==null||i.update(m),this._gotoTask={},n.animate?this._gotoAnimated(m,n):this._gotoImmediate(m,n)}_gotoImmediate(t,r){const i=this._gotoTask,n=this.view.animation,s=t.then(o=>{if(Ct(r),i!==this._gotoTask)throw new D("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(i,n,s,r)}_gotoAnimated(t,r){const i=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=t.then(o=>{if(Ct(r),i!==this._gotoTask)throw new D("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,r),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,n,s,r)}_cancellableGoTo(t,r,i,n){const s=()=>t===this._gotoTask;return v8(i,n).finally(()=>{s()&&(r.done||r.stop())})}};u([d({constructOnly:!0})],ow.prototype,"view",void 0),ow=u([T("esri.views.2d.GoToManager")],ow);function mt(){return Promise.all([ee(()=>import("./webglDeps-BSGJdtVw.js"),__vite__mapDeps([133,75,74,45,134,135])),ee(()=>import("./mapViewDeps-BWar8D2q.js"),__vite__mapDeps([136,76,77,23,78,73,70,79,72,74,45,75,46,80,40,81,137,110,84,85,86,87,138,139,135,95,119,118,25,26,117,133,134,140,90,141,71,32,29,20,142,143,144,112,145,146,147,61,148,88,149,83,150,151,152,153,154,155,156]))])}const sm=()=>mt().then(()=>ee(()=>import("./TileLayerView2D-DX39MREu.js"),__vite__mapDeps([157,78,76,77,23,73,70,79,72,74,45,75,46,80,40,81,110,138,139,135,95,119,118,86,25,26,117,140,90,141,71,32,29,20,61,149,87,84,85,143,144,112,150,151,158,159,155,160,126,161,153,154,162,163,164,165,166,167]))),Xd=()=>mt().then(()=>ee(()=>import("./FeatureLayerView2D-LxxqMLPc.js").then(e=>e.F),__vite__mapDeps([168,138,81,70,45,74,25,23,26,169,160,126,154,76,77,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,90,82,137,110,149,87,170,165,167,162]))),IN={"base-dynamic":()=>mt().then(()=>ee(()=>import("./BaseDynamicLayerView2D-fbioCeA0.js"),__vite__mapDeps([171,172,139,70,72,73,74,45,75,46,135,95,138,81,119,118,86,25,23,26,160,126,173,159,162]))),"base-tile":sm,"bing-maps":sm,catalog:()=>mt().then(()=>ee(()=>import("./CatalogLayerView2D-jtwXpLHk.js"),__vite__mapDeps([174,160,138,81,70,45,74,126]))),"catalog-dynamic-group":()=>mt().then(()=>ee(()=>import("./CatalogDynamicGroupLayerView2D-DfzmJWS6.js"),__vite__mapDeps([175,160,138,81,70,45,74,126]))),"catalog-footprint":()=>mt().then(()=>ee(()=>import("./CatalogFootprintLayerView2D-CEbtmZoo.js"),__vite__mapDeps([176,168,138,81,70,45,74,25,23,26,169,160,126,154,76,77,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,90,82,137,110,149,87,170,165,167,162]))),csv:Xd,"geo-rss":()=>mt().then(()=>ee(()=>import("./GeoRSSLayerView2D-DUJkBB5N.js"),__vite__mapDeps([177,160,138,81,70,45,74,126,152,153,154,76,77,23,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,25,26,149,87,150,71,32,29,20,151]))),feature:Xd,geojson:Xd,graphics:()=>mt().then(()=>ee(()=>import("./GraphicsLayerView2D-Y0H6pqDf.js"),__vite__mapDeps([178,81,160,138,70,45,74,126,152,153,154,76,77,23,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,25,26,149,87,150,71,32,29,20,151,170]))),group:()=>mt().then(()=>ee(()=>import("./GroupLayerView2D-BBMB_kIl.js"),__vite__mapDeps([179,160,138,81,70,45,74,126]))),imagery:()=>mt().then(()=>ee(()=>import("./ImageryLayerView2D-D3UJDtu8.js"),__vite__mapDeps([180,181,75,74,45,135,46,101,139,70,72,73,95,138,81,119,118,86,25,23,26,160,126,150,76,77,78,79,80,40,71,32,29,20,149,87,151,161,153,154,155,172,159,173,104,169,167,162]))),"imagery-tile":()=>mt().then(()=>ee(()=>import("./ImageryTileLayerView2D-CRZ4xEnB.js"),__vite__mapDeps([182,183,181,75,74,45,135,46,101,139,70,72,73,95,138,81,119,118,86,25,23,26,160,126,184,155,185,104,169,167,162]))),kml:()=>mt().then(()=>ee(()=>import("./KMLLayerView2D-BnaRQvft.js"),__vite__mapDeps([186,187,159,138,81,70,45,74,172,139,72,73,75,46,135,95,119,118,86,25,23,26,160,126,152,153,154,76,77,78,79,80,40,155,149,87,150,71,32,29,20,151,104,142,133,134,143,144,112,141,110,145,184]))),"knowledge-graph":()=>mt().then(()=>ee(()=>import("./KnowledgeGraphLayerView2D-Cbd07dvH.js"),__vite__mapDeps([188,160,138,81,70,45,74,126]))),"link-chart":()=>mt().then(()=>ee(()=>import("./KnowledgeGraphLayerView2D-Cbd07dvH.js"),__vite__mapDeps([188,160,138,81,70,45,74,126]))),"knowledge-graph-sublayer":Xd,"map-image":()=>mt().then(()=>ee(()=>import("./MapImageLayerView2D-AJG5ctbo.js"),__vite__mapDeps([189,172,139,70,72,73,74,45,75,46,135,95,138,81,119,118,86,25,23,26,160,126,150,76,77,78,79,80,40,71,32,29,20,149,87,151,161,153,154,155,173,159,190,164,165,166,169,162,163,167]))),"map-notes":()=>mt().then(()=>ee(()=>import("./MapNotesLayerView2D-CmpMzXfA.js"),__vite__mapDeps([191,81,160,138,70,45,74,126,152,153,154,76,77,23,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,25,26,149,87,150,71,32,29,20,151]))),media:()=>mt().then(()=>ee(()=>import("./MediaLayerView2D-B7pPQkwP.js"),__vite__mapDeps([192,193,151,50,78,76,77,23,73,70,79,72,74,45,75,46,80,40,81,110,138,139,135,95,119,118,86,25,26,117,140,90,141,71,32,29,20,61,149,87,84,85,143,144,112,150,148,88,194,160,126]))),"ogc-feature":()=>mt().then(()=>ee(()=>import("./OGCFeatureLayerView2D-B6-X6jyh.js"),__vite__mapDeps([195,168,138,81,70,45,74,25,23,26,169,160,126,154,76,77,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,90,82,137,110,149,87,170,165,167,162]))),"open-street-map":sm,"oriented-imagery":Xd,route:()=>mt().then(()=>ee(()=>import("./RouteLayerView2D-AKphZIjV.js"),__vite__mapDeps([196,197,81,160,138,70,45,74,126,152,153,154,76,77,23,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,25,26,149,87,150,71,32,29,20,151]))),stream:()=>mt().then(()=>ee(()=>import("./StreamLayerView2D-Bmp5GVky.js"),__vite__mapDeps([198,168,138,81,70,45,74,25,23,26,169,160,126,154,76,77,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,90,82,137,110,149,87,170,165,167,162]))),"subtype-group":()=>mt().then(()=>ee(()=>import("./SubtypeGroupLayerView2D-But_NiFr.js"),__vite__mapDeps([199,168,138,81,70,45,74,25,23,26,169,160,126,154,76,77,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,90,82,137,110,149,87,170,165,167,162]))),tile:sm,"vector-tile":()=>mt().then(()=>ee(()=>import("./VectorTileLayerView2D-CC9iwBFE.js"),__vite__mapDeps([200,117,79,45,74,61,147,110,87,78,75,135,118,139,70,72,73,46,95,138,81,119,86,25,23,26,155,28,120,121,160,126]))),video:()=>mt().then(()=>ee(()=>import("./VideoLayerView2D-peSIkteJ.js"),__vite__mapDeps([201,202,194,95,139,70,72,73,74,45,75,46,135,138,81,119,118,86,25,23,26,160,126,152,153,154,76,77,78,79,80,40,155,149,87,150,71,32,29,20,151]))),wcs:()=>mt().then(()=>ee(()=>import("./ImageryTileLayerView2D-CRZ4xEnB.js"),__vite__mapDeps([182,183,181,75,74,45,135,46,101,139,70,72,73,95,138,81,119,118,86,25,23,26,160,126,184,155,185,104,169,167,162]))),"web-tile":sm,wfs:Xd,wms:()=>mt().then(()=>ee(()=>import("./WMSLayerView2D-DadeSme9.js"),__vite__mapDeps([203,172,139,70,72,73,74,45,75,46,135,95,138,81,119,118,86,25,23,26,160,126,173,159,162,204,169]))),wmts:()=>mt().then(()=>ee(()=>import("./WMTSLayerView2D-BLcHuyTG.js"),__vite__mapDeps([205,158,159,138,81,70,45,74,139,72,73,75,46,135,95,119,118,86,25,23,26,155,160,126,162]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Eye(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new D(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const kN={hasLayerViewModule:e=>IN[e.type]!=null,importLayerView:e=>{const t=IN[e.type];if(t==null)throw Eye(e);return t(e)}};function Iye(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let n=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const c of l)for(let h=0;h<c.length-1;h++){qne(a,i,c,h);const f=OS(i,a);f<n&&(n=f,s=a[0],o=a[1])}return{coordinate:new Oe({x:s,y:o,spatialReference:r}),distance:n}}var c3;let Lc=c3=class extends tP(we){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Eu(this.geometry,this.spatialReference)}catch(e){return H.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?eg(this.normalizedGeometry,r):EO(this.normalizedGeometry,r))return e;const{coordinate:i}=Iye(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){var e,t;return new c3({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};u([d({constructOnly:!0})],Lc.prototype,"geometry",void 0),u([d({readOnly:!0})],Lc.prototype,"normalizedGeometry",null),u([d({constructOnly:!0})],Lc.prototype,"spatialReference",void 0),Lc=c3=u([T("esri.views.2d.constraints.GeometryConstraint")],Lc);var d3;let Km=d3=class extends tP(we){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new d3({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};u([d()],Km.prototype,"enabled",void 0),u([d()],Km.prototype,"rotationEnabled",void 0),Km=d3=u([T("esri.views.2d.constraints.RotationConstraint")],Km);const hq=Km;var p3;let Mi=p3=class extends tP(we){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!(t!=null&&t.length))return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map(h=>h.clone()),t.sort((h,f)=>f.scale-h.scale),t.forEach((h,f)=>h.level=f);for(const h of t)!l&&r>0&&r>=h.scale&&(o=h.level,l=!0),!c&&i>0&&i>=h.scale&&(a=e?e.level:-1,c=!0),e=h;n===-1&&(n=r===0?0:o),s===-1&&(s=i===0?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),n>s&&([n,s]=[s,n]),r=t[n].scale,i=t[s].scale,t.splice(0,n),t.splice(s-n+1,t.length),t.forEach((h,f)=>{this._lodByScale[h.scale]=h,this._scales[f]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,n=e.targetGeometry,s=t&&t.targetGeometry,o=i!==0&&e.scale<i,a=r!==0&&e.scale>r;if(o||a){const l=a?r:i;if(t&&s){const c=(l-t.scale)/(e.scale-t.scale);n.x=s.x+(n.x-s.x)*c,n.y=s.y+(n.y-s.y)*c}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.floor(e),i=Math.ceil(e);return t[r]+(e-r)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],i===e)return n+this.effectiveMinZoom+1;if(r>e&&i<e)return n+this.effectiveMinZoom+1-(e-i)/(r-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new p3({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};u([d({readOnly:!0})],Mi.prototype,"effectiveLODs",void 0),u([d({readOnly:!0})],Mi.prototype,"effectiveMinZoom",void 0),u([d({readOnly:!0})],Mi.prototype,"effectiveMaxZoom",void 0),u([d({readOnly:!0})],Mi.prototype,"effectiveMinScale",void 0),u([d({readOnly:!0})],Mi.prototype,"effectiveMaxScale",void 0),u([d()],Mi.prototype,"lods",void 0),u([d()],Mi.prototype,"minZoom",void 0),u([d()],Mi.prototype,"maxZoom",void 0),u([d()],Mi.prototype,"minScale",void 0),u([d()],Mi.prototype,"maxScale",void 0),u([d()],Mi.prototype,"snapToZoom",void 0),Mi=p3=u([T("esri.views.2d.constraints.ZoomConstraint")],Mi);const fq=Mi,kye={base:null,key:"type",typeMap:{extent:ct,polygon:Pa}};let qt=class extends we{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new ce}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,r,i;return`${(t=this._zoom)==null?void 0:t.uid}/${(r=this._rotation)==null?void 0:r.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _geometry(){var r,i;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((r=this.view)==null?void 0:r.constraintsInfo.spatialReference)===t.spatialReference?t:new Lc({geometry:this.geometry,spatialReference:(i=this.view)==null?void 0:i.constraintsInfo.spatialReference})}get _rotation(){return new hq({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const t=this._get("_zoom"),r=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),i=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===r&&t.minZoom===i&&t.maxZoom===n&&t.minScale===s&&t.maxScale===o&&t.snapToZoom===a?t:new fq({lods:r,minZoom:i,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(t){const r=this.effectiveMaxScale;return r===0||t>=r}canZoomOutTo(t){const r=this.effectiveMinScale;return r===0||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),this.customConstraints.forEach(i=>i.constrain(t,r)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(r=>{var i;return(i=r.applyPanConstraint)==null?void 0:i.call(r,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};u([d({readOnly:!0})],qt.prototype,"effectiveLODs",null),u([d({readOnly:!0})],qt.prototype,"effectiveMinScale",null),u([d({readOnly:!0})],qt.prototype,"effectiveMaxScale",null),u([d({readOnly:!0})],qt.prototype,"effectiveMinZoom",null),u([d({readOnly:!0})],qt.prototype,"effectiveMaxZoom",null),u([d({types:kye,value:null})],qt.prototype,"geometry",null),u([d({type:[Cl]})],qt.prototype,"lods",void 0),u([d()],qt.prototype,"minScale",void 0),u([d()],qt.prototype,"maxScale",void 0),u([d()],qt.prototype,"minZoom",void 0),u([d()],qt.prototype,"maxZoom",void 0),u([d()],qt.prototype,"rotationEnabled",void 0),u([d()],qt.prototype,"snapToZoom",void 0),u([d({type:ce})],qt.prototype,"customConstraints",void 0),u([d()],qt.prototype,"view",void 0),u([d({readOnly:!0})],qt.prototype,"version",null),u([d({type:Lc,readOnly:!0})],qt.prototype,"_geometry",null),u([d({type:hq})],qt.prototype,"_rotation",null),u([d({readOnly:!0,type:fq})],qt.prototype,"_zoom",null),qt=u([T("esri.views.2d.MapViewConstraints")],qt);const mq=qt;let gu=class yc{static getId(t,r,i,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${n}`}constructor(t,r,i,n){this.set(t,r,i,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,n){this.set(t,r,i,n)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}containsChild(t){const r=t.level-this.level;return r>0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new yc(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,a,l]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+r,this.col=+i,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new yc(this.level-1,this.row>>1,this.col>>1,this.world)}getNeighborId(t,r){return`${this.level}/${this.row+r}/${this.col+t}/${this.world}`}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,n=this.world;return[new yc(t,r,i,n),new yc(t,r,i+1,n),new yc(t,r+1,i,n),new yc(t,r+1,i+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};gu.pool=new Cd(gu,null,null,25,50);function Ka(e,t){return[e,t]}function ju(e,t,r){return e[0]=t,e[1]=r,e}function Oye(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}const rs=new gu("0/0/0/0");let Pye=class yq{static create(t,r,i=null){const n=ji(t.spatialReference),s=r.origin||Ka(t.origin.x,t.origin.y),o=Ka(t.size[0]*r.resolution,t.size[1]*r.resolution),a=Ka(-1/0,-1/0),l=Ka(1/0,1/0),c=Ka(1/0,1/0);i!=null&&(ju(a,Math.max(0,Math.floor((i.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymax)/o[1]))),ju(l,Math.max(0,Math.floor((i.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymin)/o[1]))),ju(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:f}=r;let m,y,g,v;return!i&&h&&f&&(ju(a,h[0],f[0]),ju(l,h[1],f[1]),ju(c,h[1]-h[0]+1,f[1]-f[0]+1)),t.isWrappable?(m=Ka(Math.ceil(Math.round((n.valid[1]-n.valid[0])/r.resolution)/t.size[0]),c[1]),y=Ka(Math.floor((n.origin[0]-s[0])/o[0]),a[1]),g=Ka(m[0]+y[0]-1,l[1]),v=!0):(y=a,g=l,m=c,v=!1),new yq(r.level,r.resolution,r.scale,s,a,l,c,o,y,g,m,v)}constructor(t,r,i,n,s,o,a,l,c,h,f,m){this.level=t,this.resolution=r,this.scale=i,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldStart=c,this.worldEnd=h,this.worldSize=f,this.wrap=m}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){rs.set(r);const n=i?rs.col:this.denormalizeCol(rs.col,rs.world),s=rs.row;return Oye(t,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),t}getTileCoords(t,r,i=!1){rs.set(r);const n=i?rs.col:this.denormalizeCol(rs.col,rs.world);return Array.isArray(t)?ju(t,this.getXForColumn(n),this.getYForRow(rs.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(rs.row)),t}},k0=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:r,colFrom:i,colTo:n}of this.spans)for(let s=i;s<=n;s++){const o=t.getWorldForColumn(s);yield new gu(t.level,r,t.normalizeCol(s),o)}}forEach(t,r){const{spans:i,lodInfo:n}=this,{level:s}=n;if(i.length!==0)for(const{row:o,colFrom:a,colTo:l}of i)for(let c=a;c<=l;c++)t.call(r,s,o,n.normalizeCol(c),n.getWorldForColumn(c))}};k0.pool=new Cd(k0);let F$=class{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}};const vt=new gu("0/0/0/0");let Cye=class gq{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,n]=t,[s,o]=r,a=s-i,l=o-n,c=l!==0?a/l:0,h=(Math.ceil(n)-n)*c,f=(Math.floor(n)-n)*c;return new gq(i,Math.floor(n),Math.ceil(o),c,a<0?h:f,a<0?f:h,a<0?s:i,a<0?i:s)}constructor(t,r,i,n,s,o,a,l){this.x=t,this.ymin=r,this.ymax=i,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Hi=[[0,0],[0,0],[0,0],[0,0]],Rye=1e-6;let Aye=class{constructor(t,r=null,i=t.lods[0].level,n=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=t.lods.filter(a=>a.level>=i&&a.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>Pye.create(t,a,r));s.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){vt.set(r);const n=this._infoByLevel[vt.level];return n?n.getTileBounds(t,vt,i):t}getTileCoords(t,r,i=!1){vt.set(r);const n=this._infoByLevel[vt.level];return n?n.getTileCoords(t,vt,i):t}getTileCoverage(t,r=192,i=!0,n="closest"){if(!i&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=k0.pool.acquire(s),a=this._wrap;let l,c,h,f=1/0,m=-1/0;const y=o.spans;Hi[0][0]=Hi[0][1]=Hi[1][1]=Hi[3][0]=-r,Hi[1][0]=Hi[2][0]=t.size[0]+r,Hi[2][1]=Hi[3][1]=t.size[1]+r;for(const w of Hi)t.toMap(w,w),w[0]=s.getColumnForX(w[0]),w[1]=s.getRowForY(w[1]);const g=[];let v=3;for(let w=0;w<4;w++){if(Hi[w][1]===Hi[v][1]){v=w;continue}const _=Cye.create(Hi[w],Hi[v]);f=Math.min(_.ymin,f),m=Math.max(_.ymax,m),g[_.ymin]===void 0&&(g[_.ymin]=[]),g[_.ymin].push(_),v=w}if(f==null||m==null||m-f>100)return null;let b=[];for(l=f;l<m;){g[l]!=null&&(b=b.concat(g[l])),c=1/0,h=-1/0;for(let w=b.length-1;w>=0;w--){const _=b[w];c=Math.min(c,_.getLeftCol()),h=Math.max(h,_.getRightCol())}if(c=Math.floor(c),h=Math.floor(h),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const w=Math.floor(h/s.worldSize[0]);for(let _=Math.floor(c/s.worldSize[0]);_<=w;_++)y.push(new F$(l,Math.max(s.getFirstColumnForWorld(_),c),Math.min(s.getLastColumnForWorld(_),h)))}else y.push(new F$(l,c,h));else c>s.last[0]||h<s.first[0]||(c=Math.max(c,s.first[0]),h=Math.min(h,s.last[0]),y.push(new F$(l,c,h)));l+=1;for(let w=b.length-1;w>=0;w--){const _=b[w];_.ymax>=l?_.incrRow():b.splice(w,1)}}return o}getTileParentId(t){vt.set(t);const r=this._infoByLevel[vt.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(vt,this._lodInfos[i],vt),vt.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){vt.set(r);const i=this._infoByLevel[vt.level],n=t.lodInfo;if(n.resolution>i.resolution){this._getTileIdAtLOD(vt,n,vt);const o=n.denormalizeCol(vt.col,vt.world);for(const a of t.spans)if(a.row===vt.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<i.resolution){const[o,a,l,c]=t.spans.reduce((v,b)=>(v[0]=Math.min(v[0],b.row),v[1]=Math.max(v[1],b.row),v[2]=Math.min(v[2],b.colFrom),v[3]=Math.max(v[3],b.colTo),v),[1/0,-1/0,1/0,-1/0]),h=i.denormalizeCol(vt.col,vt.world),f=n.getColumnForX(i.getXForColumn(h)),m=n.getRowForY(i.getYForRow(vt.row)),y=n.getColumnForX(i.getXForColumn(h+1))-1,g=n.getRowForY(i.getYForRow(vt.row+1))-1;return!(f>c||y<l||m>a||g<o)}const s=n.denormalizeCol(vt.col,vt.world);return t.spans.some(o=>o.row===vt.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const n=ji(this.tileInfo.spatialReference),s=-i*(n.valid[1]-n.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+Rye)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((i,n)=>Math.abs(n-t)<Math.abs(i-t)?n:i,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,r,i){const n=this._infoByLevel[i.level];return t.set(i),r.resolution<n.resolution?null:(r.resolution===n.resolution||(t.level=r.level,t.col=Math.floor(i.col*n.resolution/r.resolution+.01),t.row=Math.floor(i.row*n.resolution/r.resolution+.01)),t)}},Lye=class{constructor(t,r){this.item=t,this.controller=r,this.promise=null}},Nye=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new tw,this._controllers=new tw,this._processingItems=new tw,this._pausedSignal=rU(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new qb(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&r&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=Pt(this._schedule),this._task=Pt(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const n=new AbortController;let s=null;r&&(s=Un(r,()=>n.abort()));const o=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),c.reject(Yt())},a=()=>{l.remove(),s!=null&&s.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},l=eO(n.signal,o),c=pn();return this._deferreds.set(t,c),this._controllers.set(t,n),c.promise.then(a,a),this._queue.push(t),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var r;const t=this._queue.popLast();return t&&((r=this._deferreds.get(t))==null||r.reject(Yt("Removed from queue")),this._removeItem(t)),t}reset(){const t=[];this._processingItems.forEach(r=>t.push(r)),this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=sf(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let r;const i=new AbortController,n=new Lye(t,i);this._processingItems.set(t,n);try{r=this.process(t,i.signal)}catch(s){this._processError(n,s)}Su(r)?(n.promise=r,r.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,r)}get test(){}};function Fye(e,t){return e.length=0,t.forEach(r=>e.push(r)),e}const D$=new Set,Cv=[],ep=new Map,ON=[0,0];let vl=class extends we{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:t,process:r,strategy:i}=this;this._queue=new Nye({concurrency:t,process:(n,s)=>{const o=this._keyToItem.get(n);return r(o,{signal:s})},peeker:i==="scale-first"?n=>this._peekByScaleFirst(n):n=>this._peekByCenterFirst(n)})}destroy(){this.clear(),this._queue=xt(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const r=typeof t=="string"?t:t.id;return this.has(r)&&this._queue.isOngoing(r)}pause(){this._queue.pause()}push(t){const r=t.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),n=()=>{this._keyToItem.delete(r)};return this._keyToItem.set(r,t),i.then(n,n),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;const r=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;t.forEach(h=>{const f=this._keyToItem.get(h),m=this.tileInfoView.getTileScale(f.key);ep.has(m)||(ep.set(m,[]),i=Math.max(m,i),n=Math.min(m,n)),ep.get(m).push(f.key),D$.add(m)});let s=this.state.scale;ep.has(s)||(Fye(Cv,D$),Cv.sort((h,f)=>h-f),s=Cv.reduce((h,f)=>Math.abs(f-s)<Math.abs(h-s)?f:h,Cv[0])),s=Math.min(s,i),s=Math.max(s,n);const o=ep.get(s),a=r.getClosestInfoForScale(s),l=a.getColumnForX(this.state.center[0]),c=a.getRowForY(this.state.center[1]);return o.sort((h,f)=>{const m=a.denormalizeCol(h.col,h.world),y=a.denormalizeCol(f.col,f.world);return Math.sqrt((l-m)*(l-m)+(c-h.row)*(c-h.row))-Math.sqrt((l-y)*(l-y)+(c-f.row)*(c-f.row))}),D$.clear(),ep.clear(),o[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;const r=this.tileInfoView,i=this.state.center;let n,s=Number.POSITIVE_INFINITY;return t.forEach(o=>{const a=this._keyToItem.get(o);r.getTileCoords(ON,a.key);const l=OS(ON,i);l<s&&(s=l,n=a.key)}),n.id}};u([d({constructOnly:!0})],vl.prototype,"concurrency",void 0),u([d({constructOnly:!0})],vl.prototype,"process",void 0),u([d()],vl.prototype,"state",void 0),u([d({constructOnly:!0})],vl.prototype,"strategy",void 0),u([d({constructOnly:!0})],vl.prototype,"tileInfoView",void 0),vl=u([T("esri.views.2d.tiling.TileQueue")],vl);const UIe=vl;let Dye=class{constructor(t,r,i){this.maxSize=t,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return;const i=r.key.level,n=this._tileKeysPerLevel[i];PN(this._tilePerId,t);for(let s=0;s<n.length;s++)if(n[s].id===t){n.splice(s,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const n=r.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(r)}prune(t,r,i){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==t&&(n=this._pruneAroundCenterTile(n,r,i,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,r,i,t))}_pruneAroundCenterTile(t,r,i,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=i*o[0],c=i*o[1],h=[0,0],f=[0,0];for(s.sort((m,y)=>(h[0]=a.x+l*(m.col+.5),h[1]=a.y-c*(m.row+.5),f[0]=a.x+l*(y.col+.5),f[1]=a.y-c*(y.row+.5),i_(h,r)-i_(f,r)));s.length>0;){const m=s.pop();if(this._removeTile(m.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),PN(this._tilePerId,t)}};function PN(e,t){e.delete(t)}const zu=new gu(0,0,0,0),No=new Map,Vu=[],j$=[];let qIe=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new Dye(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){var w,_;const{resampling:r,tileIndex:i}=this,{scale:n,center:s,resolution:o}=t.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!t.stationary&&n>this._previousScale;if(this._previousScale=n,!r&&(n>a||n<l))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:f,lodInfo:m}=h,{level:y}=m;this.tiles.length=0,i.forEach($=>$.visible=!0);let g=0,v=0;if(f.length>0)for(const{row:$,colFrom:E,colTo:k}of f)for(let M=E;M<=k;M++){g++;const P=zu.set(y,$,m.normalizeCol(M),m.getWorldForColumn(M)).id;let N=i.get(P);if(N)N.isReady?(No.set(P,N),v++):c||this._addParentTile(P,No);else{if((w=this._tileCache)!=null&&w.has(P)){if(N=this._tileCache.pop(P),this.tileIndex.set(P,N),N.isReady){No.set(P,N),v++;continue}}else N=this.acquireTile(zu),this.tileIndex.set(P,N);c||this._addParentTile(P,No)}}const b=v===g;for(const[$,E]of i){if(No.has($))continue;zu.set($);const k=this.tileInfoView.intersects(h,zu),M=this.cachePolicy==="purge"?zu.level!==y:zu.level>y;!k||!c&&b?!M&&k||Vu.push(E):E.isReady?M&&this.cachePolicy==="purge"&&this._hasReadyAncestor(zu,y)?Vu.push(E):j$.push(E):M&&Vu.push(E)}for(const $ of j$)$.isReady&&No.set($.key.id,$);for(const $ of Vu)this._tileCache?this._tileCache.add($):this.releaseTile($),i.delete($.key.id);for(const $ of No.values())this.tiles.push($);for(const $ of i.values())No.has($.key.id)||($.visible=!1);(_=this._tileCache)==null||_.prune(y,s,o),k0.pool.release(h),j$.length=0,Vu.length=0,No.clear()}clear(){const{tileIndex:t}=this;for(const r of t.values())this.releaseTile(r);t.clear()}refresh(t){var r;for(const i of this.tileIndex.values())this.tiles.includes(i)?t(i):Vu.push(i);for(const i of Vu)this.releaseTile(i),this.tileIndex.delete(i.key.id);(r=this._tileCache)==null||r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){var s;let i=t,n=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(n=this.tileIndex.get(i),n==null?void 0:n.isReady){r.has(n.key.id)||r.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(i)&&(n=this._tileCache.pop(i),this.tileIndex.set(i,n),n==null?void 0:n.isReady)){r.has(n.key.id)||r.set(n.key.id,n);break}}_hasReadyAncestor(t,r){const i=Ai();this.tileInfoView.getTileBounds(i,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=r&&n.key.level<t.level){const s=Ai();if(this.tileInfoView.getTileBounds(s,n.key,!0),rse(s,i))return!0}return!1}},di=class extends we{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([xe(()=>{var r;return(r=this.constraints)==null?void 0:r.version},r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},du)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new Oe({x:t[0],y:t[1],spatialReference:r})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let r;try{r=this._project(t,this.state.spatialReference)}catch(n){return void H.getLogger(this).error(new D("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:n}))}const i=this.viewpoint;s3(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void H.getLogger(this).error(new D("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(t,this.state.spatialReference)}catch(n){return void H.getLogger(this).error(new D("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const i=this.viewpoint;qfe(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const r=this.viewpoint;eme(r,r,t),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;$N(r,r,t),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var s;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new D("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new D("mapview:invalid-viewpoint","geometry not defined"))}catch(o){i=new D("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(i)return void H.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const n=new Es({targetGeometry:new Oe,scale:0,rotation:0});ei(n,r),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var n,s;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const r=((n=this.constraints)==null?void 0:n.zoomToScale(t))??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;$N(i,i,r),this.viewpoint=i,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),h=c!=null&&i!=null&&i.zoomToScale(c)||void 0;let f,m,y;const g=l==null?void 0:l.rotation,v=l==null?void 0:l.targetGeometry;(v==null?void 0:v.type)==="extent"?f=v:(v==null?void 0:v.type)==="point"&&(m=v,y=l==null?void 0:l.scale);const b=s??f;return{center:n??m??(b==null?void 0:b.center),rotation:a??g,scale:(o??h??y??(b&&CS(b,[t[0]-r.left-r.right,t[1]-r.top-r.bottom])))||void 0}}startup(t,r,i,n){var o;const s=t.targetGeometry;try{this._project(t,i)}catch(a){H.getLogger(this).warn(new Zn("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:i,error:a})),t.targetGeometry=n||new Oe({x:0,y:0,spatialReference:i})}(o=this.constraints)==null||o.fit(t),this._set("state",new UP({padding:this.padding,size:r,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,r],spatialReference:i,rotation:n,scale:s}=this.state.paddedViewState,o=new Oe({x:t,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(t){var l;const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const c=r.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=c}const i=r.clone(),[n,s]=r.center;let o=null;try{o=this._project(new Oe({x:n,y:s,spatialReference:r.spatialReference}),t)}catch(c){$O()||H.getLogger(this).warn(new Zn("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:c}))}o||(o=new Oe({x:0,y:0,spatialReference:t}));const a=s3(new Es({targetGeometry:new Oe,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=a;try{const h=[r.size[0]/2,r.size[1]/2],f=[h[0]+20,h[1]],m=r.toMap([0,0],f),{x:y,y:g}=this._project(new Oe({x:m[0],y:m[1],spatialReference:r.spatialReference}),t);m[0]=y,m[1]=g,i.toScreen(m,m);const v=Yfe(h,m,f),b=Math.hypot(m[0]-h[0],m[1]-h[1])/20;!Number.isFinite(b)||Math.abs(b)>4?(a.rotation=0,a.targetGeometry=new Oe({x:0,y:0,spatialReference:t})):(a.scale*=b,a.scale>F("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,r){var o;if(!this.ready)return;const i=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();i.size=[t,r],Xfe(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(t){if(!this.ready)return null;const r=[0,0],[i,n]=this.state.toMap(r,[t.x,t.y]),s=this.state.spatialReference;return new Oe({x:i,y:n,spatialReference:s})}toScreen(t,r){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),n=[i.x,i.y];return(r==null?void 0:r.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),Nr(n[0],n[1])}_project(t,r){var s;const i=(t==null?void 0:t.targetGeometry)||t;if(!r)return t;if(!i)return null;if(r.imageCoordinateSystem||(s=i.spatialReference)!=null&&s.imageCoordinateSystem||gr(r,i.spatialReference))return t;const n=Eu(i,r);if(!n)throw new D("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return jye(t)?(t.targetGeometry=n,t):n}};function jye(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}u([d({type:Oe})],di.prototype,"center",null),u([d()],di.prototype,"constraints",void 0),u([d({type:ct})],di.prototype,"extent",null),u([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],di.prototype,"padding",null),u([d()],di.prototype,"ready",void 0),u([d()],di.prototype,"resizeAlign",void 0),u([d({readOnly:!0})],di.prototype,"resolution",null),u([d({type:Number})],di.prototype,"rotation",null),u([d({type:Number})],di.prototype,"scale",null),u([d({readOnly:!0})],di.prototype,"state",void 0),u([d({type:Es})],di.prototype,"viewpoint",null),u([d()],di.prototype,"zoom",null),di=u([T("esri.views.2d.ViewStateManager")],di);function GP(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let CN=class extends vr{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(t,r){GP(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},zye=class extends vr{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:n,delta:s}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,h=c/this._currentScale;a.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:h}=l;if(!h||!c)return void a.end();const f=l.snapScale(this._currentScale),m=(s.y>0?Math.max(f,l.snapToPreviousScale(this._startScale)):Math.min(f,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}},AS=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var r,i;this._startEvent=t,(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},Vye=class extends vr{constructor(t,r,i){super(!0),this.view=t,this.pointerAction=r,this.registerIncoming("drag",i,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new AS({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&GP(i.data,this.pointerAction)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Uye=class extends vr{constructor(t,r,i){super(!0),this._view=t,this.pointerAction=r;const n=this._view.mapViewNavigation;this._dragEventSeparator=new AS({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&GP(o.data,this.pointerAction)}),this.registerIncoming("drag",i,s=>this._dragEventSeparator.handle(s))}};function is(e){let t=e*e;return e<0&&(t*=-1),t}function Gye(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function qye(e,t,r){const i=r,n=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(i.translation[0]=is(n.axes[0]),i.translation[1]=is(n.axes[1]),i.translation[2]=is(n.buttons[7])-is(n.buttons[6]),i.heading=is(n.axes[2]),i.tilt=is(n.axes[3])):s.deviceType==="spacemouse"&&(i.translation[0]=1.2*is(n.axes[0]),i.translation[1]=1.2*is(n.axes[1]),i.translation[2]=2*-is(n.axes[2]),i.heading=1.2*is(n.axes[5]),i.tilt=1.2*is(n.axes[3])),i.tilt*=o,s9(i.translation,i.translation,a),i}function Bye(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let Hye=class extends vr{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new H0,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([xe(()=>{var r;return(r=this._view.navigation.gamepad)==null?void 0:r.enabled},r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=Vh({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},wi)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const r=this._view.navigation.gamepad.device;r&&t.data.device!==r||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,Gye(this._transformation)):(this._currentDevice=t.data.device,qye(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const r=this._transformation;if(Bye(r))return;const i=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=Zye*n*t;RS(i,i,[r.translation[0]*s,-r.translation[1]*s]);const o=1+r.translation[2]*Jye*t,a=this._view.constraints.rotationEnabled?-r.heading*Wye*t:0,l=this._view.size,c=[l[0]/2,l[1]];KG(i,i,o,a,c,l);const h=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=h}};const Wye=.06,Zye=.7,Jye=6e-4;function vq(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),Xe(()=>document.removeEventListener("visibilitychange",t))}let Kye=class extends vr{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=vq(n=>n?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const r=this._currentDirection!=null;if(t!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},Yye=class extends vr{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyToDirection={[r.clockwiseOption1]:"clockwise",[r.clockwiseOption2]:"clockwise",[r.counterClockwiseOption1]:"counterClockwise",[r.counterClockwiseOption2]:"counterClockwise",[r.resetOption1]:"reset",[r.resetOption2]:"reset"},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=vq(n=>n?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(t.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var oh;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(oh||(oh={}));let Qye=class extends vr{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),r.zoomIn.forEach(n=>this._keysToZoomAction[n]=oh.IN),r.zoomOut.forEach(n=>this._keysToZoomAction[n]=oh.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view;let o=null;switch(n){case oh.IN:o=s.zoomIn();break;case oh.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}};const Xye=.6;let e0e=class extends vr{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:n,deltaY:s}=t.data,o=1/Xye**(1/60*s),a=r.zoom(o,[i,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}},t0e=class extends vr{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new AS({start:(i,n)=>{r.pinch.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{r.pinch.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{r.pinch.end(this.view),n.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function RN(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value||1:0),axes:t.axes.map(r=>n0e(r,e.axisThreshold))}:{buttons:[],axes:[]}}function r0e(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function i0e(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function n0e(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let s0e=class{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,RN(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(AN(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const r=new OP(t);r.deviceType!=="unknown"&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Vh({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!r;AN(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=RN(s),l=i||i0e(a);o&&(o.timestamp===n.timestamp||!o.active&&l||r0e(o.state,a))||this._emitGamepadEvent(n,a,!l)})}_emitGamepadEvent(t,r,i){const n=this._latestUpdate[t.index],s=n&&n.active;if(!s&&!i)return;const o=!s&&i?"start":s&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:o})}};function o0e(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function AN(e){const t=window.navigator.getGamepads();for(let r=0;r<t.length;r++){const i=t[r];o0e(i)&&e(i)}}const LN=F("edge"),a0e=F("chrome"),l0e=F("ff"),u0e=F("safari"),NN="esri-view-surface",tp={touchNone:`${NN}--touch-none`,touchPan:`${NN}--touch-pan`};let wq=class bq{constructor(t,r){this._input=r,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new s0e(t,this._input),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=xt(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(z$[r],i),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&z$[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(z$[r],i),this._active[r]=i}}),this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1}setPointerCapture(t,r){r?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?tp.touchNone:tp.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?tp.touchPan:tp.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(tp.touchNone),this._element.classList.remove(tp.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=pG(this._element,t);return bq.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const{key:i}=r;i&&t==="key-up"&&this._keyDownState.delete(i);const n={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_handleMouseWheel(t,r){let i=r.deltaY;switch(r.deltaMode){case 0:LN&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}LN?i*=.7:a0e||u0e?i*=.6:l0e&&(i*=1.375);const n=100,s=Math.abs(i);s>n&&(i=i/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};wq.test={disableSubpixelCoordinates:!1};const z$={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let c0e=class extends vr{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}};const Lr={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function s_(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function d0e(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function p0e(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Nr()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[$,E]=e,[k,M]=[E.x-$.x,E.y-$.y];return t.radius=Math.sqrt(k*k+M*M)/2,t.center.x=($.x+E.x)/2,t.center.y=($.y+E.y)/2,t}let r=0,i=0;for(let $=0;$<e.length;$++)r+=e[$].x,i+=e[$].y;r/=e.length,i/=e.length;const n=e.map($=>$.x-r),s=e.map($=>$.y-i);let o=0,a=0,l=0,c=0,h=0,f=0,m=0;for(let $=0;$<n.length;$++){const E=n[$],k=s[$],M=E*E,P=k*k;o+=M,a+=P,l+=E*k,c+=M*E,h+=P*k,f+=E*P,m+=k*M}const y=.5*(c+f),g=.5*(h+m),v=o*a-l*l,b=(y*a-g*l)/v,w=(o*g-l*y)/v,_=Nr(b+r,w+i);return{radius:Math.sqrt(b*b+w*w+(o+a)/e.length),center:_}}function sd(e){const{native:t}=e,{pointerId:r,button:i,pointerType:n}=t;return n==="mouse"?`${r}:${i}`:`${n}`}let h0e=class extends vr{constructor(t=Lr.maximumDoubleClickDelay,r=Lr.maximumDoubleClickDistance,i=Lr.maximumDoubleTouchDelay,n=Lr.maximumDoubleTouchDistance,s=nf){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Nr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new AS({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Pt(t.doubleTapTimeout)})}get hasPendingInputs(){return q_(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout=Pt(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:n}=r,{center:s}=i;this._dragStartCenter=s;const o=V$("begin",Nr(0,0),i);this._doubleTapDrag.emit(o,void 0,n),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=V$("update",Nr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(s,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=V$("end",Nr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(s,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=sd(r),n=this._pointerState.get(i),{pointerType:s}=r.native;if(n){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),s_(n.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,n=sd(r),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function V$(e,t,r){const{button:i,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}=r;return{action:e,delta:t,button:i,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}}let f0e=class extends vr{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:n,pointers:m0e(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=Rv(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,n);const s=aw(n,_q(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this._activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=Rv(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=Rv(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=aw(i,r)-t,i.lastAngle=aw(i,r)-t})}_emitEvent(t,r,i){const n=Rv(this._activePointerMap);this._drag.emit(this._createPayload(t,r,n,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,n=t.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,n)):(this._addPointer(i),this._emitEvent("added",i,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function _q(e){const t=[];return e.forEach(r=>{t.push(Nr(r.event.x,r.event.y))}),p0e(t)}function Rv(e){const t=_q(e);let r=0;return e.forEach(i=>{let n=aw(i,t),s=n-i.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=i.lastAngle+s,i.lastAngle=n;const o=n-i.initialAngle;r+=o}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function m0e(e){const t=new Map;return e.forEach((r,i)=>t.set(i,r.event)),t}function aw(e,t){const r=e.event,i=r.x-t.center.x,n=r.y-t.center.y;return Math.atan2(n,i)}var FN;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(FN||(FN={}));let y0e=class extends vr{constructor(t=Lr.maximumDoubleClickDelay,r=Lr.maximumDoubleClickDistance,i=Lr.maximumDoubleTouchDelay,n=Lr.maximumDoubleTouchDistance,s=nf){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=sd(r);if(!this._pointerState.has(i)){const n={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,n),this.startCapturingPointer(r.native)}}_handlePointerUp(t){const r=t.data,i=sd(r),n=this._pointerState.get(i);if(n&&n.downButton===r.native.button){const s=n.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),s_(s,t.data)>o?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(r))):s_(n,t.data)>o?this._removeState(r):this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){const r=sd(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},g0e=class extends vr{constructor(t=Lr.maximumClickDelay,r=Lr.movementUntilMouseDrag,i=Lr.movementUntilPenDrag,n=Lr.movementUntilTouchDrag,s=Lr.holdDelay,o=nf){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=r,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=n,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Pt(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,n=this._pointerState.get(i);n&&(n.isDragging?this._pointerDrag.emit(Av("update",n,r),void 0,n.modifiers):d0e(r,n.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),n.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(Av("start",n,r)):this._pointerDrag.emit(Av("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const i=t.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(Av("end",s,r==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):r==="pointer-up"&&s.downButton===i.native.button&&t.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(n),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function Av(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}let v0e=class extends vr{constructor(t=Lr.maximumDoubleClickDelay,r=Lr.maximumDoubleClickDistance,i=Lr.maximumDoubleTouchDelay,n=Lr.maximumDoubleTouchDistance,s=nf){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Pt(t.doubleClickTimer))}get hasPendingInputs(){return q_(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=Pt(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const r=t.data,{pointerType:i}=r.native,n=w0e(r);if(!this._pointerState.has(n))return void this._startClick(t);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,l=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;s_(o,r)>l?(this._clearDoubleClickTimer(n,!0),this._startClick(t)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const r=sd(t.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:r}=t,{native:{pointerType:i}}=r,n=sd(r),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s);this._pointerState.set(n,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function w0e(e){const{pointerId:t,pointerType:r,button:i}=e.native;return r==="mouse"?`${t}:${i}`:`${r}`}const Lv={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let gc=class extends we{initialize(){const t=()=>{var r;return(r=this.view)==null?void 0:r.ready};this.addHandles([Oa(()=>!t(),()=>this._disconnect()),Oa(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var r;return((r=this._inputManager)==null?void 0:r.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=xt(this._inputManager)}_connect(){const t=this.view.surface,r=new wq(t,this.view.input),i=[new y0e,new g0e,new v0e,new f0e(this.view.navigation),new h0e],n=new Tn({eventSource:r,recognizers:i});n.installHandlers("prevent-context-menu",[new c0e],iu.INTERNAL),n.installHandlers("navigation",[new t0e(this.view),new Hye(this.view),new e0e(this.view),new CN(this.view),new CN(this.view,[Lv.counter]),new Vye(this.view,"primary"),new Kye(this.view,Lv.pan),new Qye(this.view,Lv.zoom),new Yye(this.view,Lv.rotate),new Uye(this.view,"secondary"),new zye(this.view,"touch")],iu.INTERNAL),this.view.viewEvents.connect(n),this._source=r,this._inputManager=n,xe(()=>{var s,o;return(o=(s=this.view)==null?void 0:s.navigation)==null?void 0:o.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},wi)}get test(){}};u([d()],gc.prototype,"view",void 0),u([d()],gc.prototype,"latestPointerType",null),u([d()],gc.prototype,"latestPointerLocation",null),u([d()],gc.prototype,"multiTouchActive",null),gc=u([T("esri.views.2d.input.MapViewInputManager")],gc);const b0e=gc;var pke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _0e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var DN,jN,zN,Sq={exports:{}};DN=Sq,jN=function(){function e(n,s,o,a,l){t(n,s,o||0,a||n.length-1,l||i)}function t(n,s,o,a,l){for(;a>o;){if(a-o>600){var c=a-o+1,h=s-o+1,f=Math.log(c),m=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*m*(c-m)/c)*(h-c/2<0?-1:1);t(n,s,Math.max(o,Math.floor(s-h*m/c+y)),Math.min(a,Math.floor(s+(c-h)*m/c+y)),l)}var g=n[s],v=o,b=a;for(r(n,o,s),l(n[a],g)>0&&r(n,o,a);v<b;){for(r(n,v,b),v++,b--;l(n[v],g)<0;)v++;for(;l(n[b],g)>0;)b--}l(n[o],g)===0?r(n,o,b):r(n,++b,a),b<=s&&(o=b+1),s<=b&&(a=b-1)}}function r(n,s,o){var a=n[s];n[s]=n[o],n[o]=a}function i(n,s){return n<s?-1:n>s?1:0}return e},(zN=jN())!==void 0&&(DN.exports=zN);const S0e=_0e(Sq.exports);function o_(e,t){if(!(this instanceof o_))return new o_(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function $0e(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function rp(e,t){Ym(e,0,e.children.length,t,e)}function Ym(e,t,r,i,n){n||(n=$p(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=t;o<r;o++)s=e.children[o],Qm(n,e.leaf?i(s):s);return n}function Qm(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function VN(e,t){return e.minX-t.minX}function UN(e,t){return e.minY-t.minY}function U$(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Nv(e){return e.maxX-e.minX+(e.maxY-e.minY)}function x0e(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function T0e(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-r)*Math.max(0,s-i)}function G$(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Fv(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function $p(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function GN(e,t,r,i,n){for(var s,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(s=t+Math.ceil((r-t)/i/2)*i,S0e(e,s,t,r,n),o.push(t,s,s,r))}o_.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!Fv(e,t))return r;for(var n,s,o,a,l=[];t;){for(n=0,s=t.children.length;n<s;n++)o=t.children[n],Fv(e,a=t.leaf?i(o):o)&&(t.leaf?r.push(o):G$(e,a)?this._all(o,r):l.push(o));t=l.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!Fv(e,t))return!1;for(var i,n,s,o,a=[];t;){for(i=0,n=t.children.length;i<n;i++)if(s=t.children[i],Fv(e,o=t.leaf?r(s):s)){if(t.leaf||G$(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=$p([]),this},remove:function(e,t){if(e==null)return this;for(var r,i,n,s,o=this.data,a=this.toBBox(e),l=[],c=[];o||l.length;){if(o||(o=l.pop(),i=l[l.length-1],r=c.pop(),s=!0),o.leaf&&(n=$0e(e,o.children,t))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;s||o.leaf||!G$(o,a)?i?(r++,o=i.children[r],s=!1):o=null:(l.push(o),c.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:VN,compareMinY:UN,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var n,s=r-t+1,o=this._maxEntries;if(s<=o)return rp(n=$p(e.slice(t,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),(n=$p([])).leaf=!1,n.height=i;var a,l,c,h,f=Math.ceil(s/o),m=f*Math.ceil(Math.sqrt(o));for(GN(e,t,r,m,this.compareMinX),a=t;a<=r;a+=m)for(GN(e,a,c=Math.min(a+m-1,r),f,this.compareMinY),l=a;l<=c;l+=f)h=Math.min(l+f-1,c),n.children.push(this._build(e,l,h,i-1));return rp(n,this.toBBox),n},_chooseSubtree:function(e,t,r,i){for(var n,s,o,a,l,c,h,f;i.push(t),!t.leaf&&i.length-1!==r;){for(h=f=1/0,n=0,s=t.children.length;n<s;n++)l=U$(o=t.children[n]),(c=x0e(e,o)-l)<f?(f=c,h=l<h?l:h,a=o):c===f&&l<h&&(h=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,n=r?e:i(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),Qm(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var r=e[t],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var s=this._chooseSplitIndex(r,n,i),o=$p(r.children.splice(s,r.children.length-s));o.height=r.height,o.leaf=r.leaf,rp(r,this.toBBox),rp(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=$p([e,t]),this.data.height=e.height+1,this.data.leaf=!1,rp(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,n,s,o,a,l,c,h;for(l=c=1/0,i=t;i<=r-t;i++)o=T0e(n=Ym(e,0,i,this.toBBox),s=Ym(e,i,r,this.toBBox)),a=U$(n)+U$(s),o<l?(l=o,h=i,c=a<c?a:c):o===l&&a<c&&(c=a,h=i);return h},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:VN,n=e.leaf?this.compareMinY:UN;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,n)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var n,s,o=this.toBBox,a=Ym(e,0,t,o),l=Ym(e,r-t,r,o),c=Nv(a)+Nv(l);for(n=t;n<r-t;n++)s=e.children[n],Qm(a,e.leaf?o(s):s),c+=Nv(a);for(n=r-t-1;n>=t;n--)s=e.children[n],Qm(l,e.leaf?o(s):s),c+=Nv(l);return c},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)Qm(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():rp(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};let qN=class $q{constructor(t,r){this.key=new gu(0,0,0,0),this.bounds=Ai(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=t.zoomToScale(i.level-1),this.maxScale=t.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return ct.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return{$view:{scale:this.scale,timeZone:t}}}createChildTiles(){const t=this.key.getChildKeys(),r=yi.acquire();for(let i=0;i<t.length;i++)r[i]=new $q(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return lG.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Uu={added:[],removed:[]},q$=new Set,M0e=new gu(0,0,0,0);function E0e(e,t){const r=ji(t);if(!r)return null;const[i,n]=r.valid;return e[2]>n?[Ai([e[0],e[1],n,e[3]]),Ai([i,e[1],i+e[2]-n,e[3]])]:e[0]<i?[Ai([i,e[1],e[2],e[3]]),Ai([n-(i-e[0]),e[1],n,e[3]])]:null}let I0e=class extends Aa{constructor(t){super(),this._tiles=new Map,this._index=o_(9,F("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||D9(t)===0||j9(t)===0)return[];const r=E0e(t,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const n=new qN(this.tileScheme,i);this._tiles.set(i,n),this._index.insert(n),r.added.push(n)}for(const i of t.removed)if(this.has(i)){const n=this.get(i);this._tiles.delete(i),this._index.remove(n),r.removed.push(n)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:n}=r,{level:s}=n;if(i.length>0)for(const{row:o,colFrom:a,colTo:l}of i)for(let c=a;c<=l;c++){const h=M0e.set(s,o,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(q$.add(h),!this.has(h)){const f=new qN(this.tileScheme,h);this._tiles.set(h,f),this._index.insert(f),this.tiles.push(f),Uu.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];q$.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Uu.removed.push(a))}(Uu.added.length||Uu.removed.length)&&this.emit("update",Uu),k0.pool.release(r),q$.clear(),Uu.added.length=0,Uu.removed.length=0}},wl=class extends we{constructor(){super(...arguments),this.color=new Se([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25,this.multiHighlightEnabled=!1}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.multiHighlightEnabled===t.multiHighlightEnabled}};u([d({type:Se})],wl.prototype,"color",void 0),u([d({type:Se})],wl.prototype,"haloColor",void 0),u([d()],wl.prototype,"haloOpacity",void 0),u([d()],wl.prototype,"fillOpacity",void 0),u([d()],wl.prototype,"multiHighlightEnabled",void 0),wl=u([T("esri.views.2d.support.HighlightOptions")],wl);const xq=wl,Dv=e=>parseFloat(e)/100;function k0e(e,t,r){const i=typeof e.left=="string"?Dv(e.left)*t:e.left,n=typeof e.right=="string"?Dv(e.right)*t:e.right,s=typeof e.top=="string"?Dv(e.top)*r:e.top,o=typeof e.bottom=="string"?Dv(e.bottom)*r:e.bottom,a=s;return{xmin:i,xmax:Math.max(t-n,i),ymin:a,ymax:Math.max(r-o,s)}}function O0e(e,t,r,i){switch(t.type){case"rect":{const{width:n,height:s}=e,{xmin:o,xmax:a,ymin:l,ymax:c}=k0e(t,n,s),{x:h,y:f}=r;return h>o&&h<a&&f>l&&f<c}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||IO(t.path,[r.x,r.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?EO(t.geometry,i):eg(t.geometry,i))}}async function P0e(e,t,r){const i=fG(t)?hG(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let n=new Set;const s=new Set;let o=!1,a=null,l=null;r!=null&&r.include?HN(r.include,BN(e,m=>{n.add(m),B$(m,y=>s.add(y))},(m,y)=>{s.add(m),n.add(y)},m=>{a||(a=new Set),a.add(m)},m=>n.add(m),()=>o=!0)):(o=!0,n=new Set(e.allLayerViews),n.forEach(m=>{B$(m,y=>s.add(y))})),r!=null&&r.exclude&&HN(r.exclude,BN(e,m=>{n.delete(m),B$(m,y=>s.delete(y))},m=>s.delete(m),m=>{l||(l=new Set),l.add(m)}));const c=e.toMap(i),h=e.allLayerViews.filter(m=>!m.suspended&&n.has(m)&&m.clips.every(y=>O0e(e,y,i,c))).reverse();let f=[...o?e.graphicsView.hitTest(c).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:c})):[],...await Promise.all(h.map(m=>m.hitTest(c,i)).toArray())].filter(pd).flat().filter(pd);return f=f.filter(m=>{var y;return m.type!=="graphic"||((y=m.layer)==null?void 0:y.type)!=="subtype-group"||s.has(m.graphic.layer)}),a&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||(a==null?void 0:a.has(h3(m.graphic))))),l&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||!(l!=null&&l.has(h3(m.graphic))))),{screenPoint:i,results:f}}function BN(e,t,r,i,n,s){return o=>{if(o instanceof ks){if(o.layer===e)s==null||s();else{const a=e.allLayerViews.find(l=>l.layer===o.layer);a&&(n==null||n(a))}i(h3(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(l=>l.layer===o.parent);a&&r(o,a)}else{const a=e.allLayerViews.find(l=>l.layer===o);a&&t(a)}}}function HN(e,t){if(e)if(ob(e))for(const r of e)if(ob(r))for(const i of r)t(i);else t(r);else t(e)}function h3(e){var r,i;const t=e.getObjectId();return t?`${((r=e.layer)==null?void 0:r.uid)??((i=e.sourceLayer)==null?void 0:i.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function B$({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(r=>{t(r)})}function C0e(e,t,r){const{ctx:i,canvas:n}=Tq(e,r),s=i.getImageData(0,0,e.width,e.height),o=L0e(n,t);return Mq(n),{dataUrl:o,data:s}}function R0e(e,t){const{ctx:r,canvas:i}=Tq(e,t),n=r.getImageData(0,0,e.width,e.height);return Mq(i),n}function Tq(e,t){const r=A0e();t.premultipliedAlpha&&z0e(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(e,0,0),t.flipY&&j0e(i),{ctx:i,canvas:r}}function Mq(e){e.width=0,e.height=0}function A0e(){return H$==null&&(H$=document.createElement("canvas")),H$}let H$=null;function L0e(e,t){const r=V0e[t.format],i=t.quality/100;return e.toDataURL(r,i)}function N0e(e,t){const r=D0e(e),i=G0e[r];return{format:r,quality:Rs(t??i,0,100)}}function F0e(e,t){return t/Math.max(e[0],e[1])}function mke(e,t,r,i=0,n=0,s=e.width-i,o=e.height-n,a=!1){const{data:l}=e,{width:c,height:h,data:f}=t,m=s/c,y=o/h,g=Math.ceil(m/2),v=Math.ceil(y/2),b=e.width;for(let w=0;w<h;w++)for(let _=0;_<c;_++){const $=4*(_+(a?h-w-1:w)*c);let E=0,k=0,M=0,P=0,N=0,j=0;const G=(w+.5)*y;for(let W=Math.floor(w*y);W<(w+1)*y;W++){const ie=Math.abs(G-(W+.5))/v,me=(_+.5)*m,ne=ie*ie;for(let nt=Math.floor(_*m);nt<(_+1)*m;nt++){const Xt=Math.abs(me-(nt+.5))/g,Ie=Math.sqrt(ne+Xt*Xt);if(Ie>=1)continue;let K=2*Ie*Ie*Ie-3*Ie*Ie+1;const be=4*(i+nt+(n+W)*b);j+=K*l[be+3],k+=K,M+=K*l[be],P+=K*l[be+1],N+=K*l[be+2],E+=K}}f[$]=M/E,f[$+1]=P/E,f[$+2]=N/E,f[$+3]=j/k}return t}function D0e(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return U0e}}function j0e(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function z0e(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const n=t[i+3];if(n!==255&&n>0){const s=255/n;t[i]=t[i]*s,t[i+1]=t[i+1]*s,t[i+2]=t[i+2]*s}}}const V0e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},WN=98,U0e="png",G0e={png:100,jpg:WN,jpeg:WN},Eq={flipY:!0,premultipliedAlpha:!0};async function q0e(e,t){const r=await Iq(e,t),{format:i,quality:n}=N0e(t==null?void 0:t.format,t==null?void 0:t.quality);return C0e(r,{format:i,quality:n,rotation:0,disableDecorations:!1},Eq)}async function B0e(e,t){const r=await Iq(e,t);return R0e(r,Eq)}function Iq(e,t){const r=Z0e(t||{},W0e(e.stage,e.size),e.size,e.padding),i=H0e(t,e.allLayerViews);return e.stage.takeScreenshot(r,i,e.backgroundColor,t==null?void 0:t.rotation)}function H0e(e={},t){if(!e.layers)return;const r=[];return e.layers.forEach(i=>{const n=t.find(s=>s.layer.id===i.id);n!=null&&n.container&&r.push(n.container)}),r}function W0e(e,t){return Math.min(4,F0e(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function Z0e(e,t,r,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let n=null;e.width!=null&&e.height!=null?n=[e.width,e.height]:e.width==null&&e.height!=null?n=[e.height,e.height]:e.width!=null&&e.height==null?n=[e.width,e.width]:e.width==null&&e.height==null&&(n=null);const s=r[0]-(i.left+i.right),o=r[1]-(i.top+i.bottom);let a,l,c=e.area||{x:0,y:0,width:s,height:o};if(n){const h=s/o,f=n[0]/n[1];if(f>h){const m=c.width/f;c={x:c.x,y:Math.round(c.y+(c.height-m)/2),width:c.width,height:Math.round(m)}}else{const m=c.height*f;c={x:Math.round(c.x+(c.width-m)/2),y:c.y,width:Math.round(m),height:c.height}}}else n=[c.width,c.height];return n[0]>c.width?(a=Math.min(n[0]/c.width,t),l=n[0]/c.width/a):(a=1,l=n[0]/c.width),{cropArea:{x:Math.round((c.x+i.left)*a),y:Math.round((c.y+i.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}const ZN=160;let Xm=class extends we{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=ZN&&this.clear()},ZN))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};u([d()],Xm.prototype,"_timer",void 0),u([d()],Xm.prototype,"stationary",null),Xm=u([T("esri.views.2d.support.StationaryManager")],Xm);const J0e=e=>e.includes("Brush");let kq=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),J0e(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function JN(e,t={}){return e.getContext("webgl2",t)||null}let W$;function K0e(){return W$||(W$=X0e()),W$}let Y0e=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}};function Q0e(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let r=JN(t,{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=JN(t),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;e.available=!0,e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),r}function X0e(){const e=new Y0e,t=Q0e(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function ege(e){const t=K0e();return t.available?e==="3d"&&t.majorPerformanceCaveat?new D("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new D("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new D("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new D("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function tge(e){return e&&"nodeType"in e}function rge(e){return e&&typeof e.render=="function"}const KN={component:"esri-component"};let vc=class extends we{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,r;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((r=this.node)==null?void 0:r.id)}set id(t){this._set("id",t)}set node(t){const r=this._get("node");t!==r&&(t&&t.classList.add(KN.component),r&&r.classList.remove(KN.component),this._set("node",t))}castNode(t){var r;return(r=this.widget)==null||r.destroy(),t?typeof t=="string"||tge(t)?(this._set("widget",null),lP(t)):(rge(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};u([d()],vc.prototype,"id",null),u([d()],vc.prototype,"node",null),u([et("node")],vc.prototype,"castNode",null),u([d({readOnly:!0})],vc.prototype,"widget",void 0),vc=u([T("esri.views.ui.Component")],vc);const lw=vc,Oq="calcite-mode-";function ige(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function nge(){return ige().startsWith("dark")}function sge(){return`${Oq}${nge()?"dark":"light"}`}function oge(e){age(e),e.classList.add(sge())}function age(e){Array.from(e.classList).forEach(t=>{t.startsWith(Oq)&&e.classList.remove(t)})}const lge={left:0,top:0,bottom:0,right:0},Pq={bottom:30,top:15,right:15,left:15},Fo="esri-ui",xi={ui:Fo,corner:`${Fo}-corner`,innerContainer:`${Fo}-inner-container`,manualContainer:`${Fo}-manual-container`,cornerContainer:`${Fo}-corner-container`,topLeft:`${Fo}-top-left`,topRight:`${Fo}-top-right`,bottomLeft:`${Fo}-bottom-left`,bottomRight:`${Fo}-bottom-right`};function uge(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function jv(e){return e===0?"0":`${e}px`}function Z$(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function J$(e,{top:t,bottom:r,left:i,right:n}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=n}let no=class extends Aa.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=un(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&J$(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&J$(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([xe(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,wi),xe(()=>this.padding,this._applyUIPadding,wi),xe(()=>[this.container,this._locale],([t,r])=>{t&&t.setAttribute("lang",r)},wi),zz(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const r=this._get("container");t!==r&&(t&&(t.classList.add(xi.ui),oge(t),this._attachContainers(t)),r&&(r.classList.remove(xi.ui),J$(r,{top:"",bottom:"",left:"",right:""}),R7(r)),this._set("container",t))}get height(){var s;const t=((s=this.view)==null?void 0:s.height)??0;if(t===0)return t;const r=this._getViewPadding(),{top:i,bottom:n}=r;return Math.max(t-i-n,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...Pq,...t}}get width(){var s;const t=((s=this.view)==null?void 0:s.width)??0;if(t===0)return t;const r=this._getViewPadding(),{left:i,right:n}=r;return Math.max(t-i-n,0)}add(t,r){let i,n,s;if(Array.isArray(t))return void t.forEach(a=>this.add(a,r));const o=Z$(t);o&&({index:i,position:r,component:t,key:n}=o),r&&typeof r=="object"&&({index:i,key:n,position:r,internal:s}=r),!t||r&&!this._isValidPosition(r)||this._add(t,r,i,n,s)}remove(t,r){var n,s;if(!t)return;if(Array.isArray(t))return t.map(o=>this.remove(o,r));const i=this._find(t);if(i){if(this._componentMap.has(i)&&((n=this._componentMap.get(i))==null?void 0:n.key)!==r)return;const o=this._components.indexOf(i),a=i.node.parentNode;return a==null||a.removeChild(i.node),this._componentMap.delete(i),(s=i.widget)==null||s.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(o,1)[0]}}empty(t,r={removeInternal:!1}){if(Array.isArray(t)){for(const s of t)this.empty(s,r);return}const i=this._positionNameToContainerLookup[t??"manual"],n=Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||r.removeInternal});for(const s of n)this.remove(s)}move(t,r){if(Array.isArray(t)&&t.forEach(o=>this.move(o,r)),!t)return;let i;const n=Z$(t)||Z$(r);if(n&&(i=n.index,r=n.position,t=n.component||t),r&&!this._isValidPosition(r))return;const s=this.remove(t);s&&this.add(s,{position:r,index:i})}find(t){if(!t)return null;const r=this._findById(t);return r&&(r.widget||r.node)}getComponents(t,r={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(i=>this._getComponentsAtPosition(i,r)):this._getComponentsAtPosition(t,r):this._components.filter(i=>{var n;return r.includeInternal||!((n=this._componentMap.get(i))!=null&&n.internal)}).map(({widget:i,node:n})=>i??n)}getPosition(t){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(t))return r;return null}_add(t,r,i,n,s){t instanceof lw||(t=new lw({node:t}));const{widget:o}=t;o!=null&&o instanceof we&&o.addHandles(Xe(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:r,index:i}),this._components.push(t),this._componentMap.set(t,{key:n,internal:s})}_find(t){return t?t instanceof lw?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??lge}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(xi.innerContainer,xi.cornerContainer);const r=document.createElement("div");r.classList.add(xi.innerContainer,xi.manualContainer);const i=document.createElement("div");i.classList.add(xi.topLeft,xi.corner),t.appendChild(i);const n=document.createElement("div");n.classList.add(xi.topRight,xi.corner),t.appendChild(n);const s=document.createElement("div");s.classList.add(xi.bottomLeft,xi.corner),t.appendChild(s);const o=document.createElement("div");o.classList.add(xi.bottomRight,xi.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=r;const a=Gue();this._cornerNameToContainerLookup={"top-left":i,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:i,"top-trailing":a?i:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){const r=t.position??"manual",{component:i,index:n}=t,s=this._positionNameToContainerLookup[r],o=n!=null&&n>-1;if(uge(i.widget)&&i.widget.startup(),!o)return void s.appendChild(i.node);const a=Array.from(s.children);if(n===0)return void(s.firstChild?k4(i.node,s.firstChild):s.appendChild(i.node));n>=a.length?s.appendChild(i.node):k4(i.node,a[n])}_toPixelPosition(t){return{top:jv(t.top),left:jv(t.left),right:jv(t.right),bottom:jv(t.bottom)}}_findByComponent(t){return this._components.find(r=>r===t)??null}_findById(t){return this._components.find(({id:r})=>r===t)??null}_findByNode(t){return this._components.find(({node:r})=>r===t)??null}_getComponentsAtPosition(t,r){const i=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(i.children).map(n=>this._findByNode(n)).filter(pd).filter(n=>{var s;return r.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}};u([d()],no.prototype,"_locale",void 0),u([d()],no.prototype,"container",null),u([d()],no.prototype,"height",null),u([d({value:Pq})],no.prototype,"padding",null),u([et("padding")],no.prototype,"castPadding",null),u([d()],no.prototype,"view",void 0),u([d()],no.prototype,"width",null),no=u([T("esri.views.ui.UI")],no);const cge=no,dge="randomUUID"in crypto;function qP(){if(dge)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function _ke(){return`{${qP().toUpperCase()}}`}function pge(){return`{${qP()}}`}const hge={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},fge={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},mge=e=>({...fge,...e}),yge=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},gge=(e,t)=>e.find(t),YN=(e,t,r=!1)=>{let i=e;return t.forEach((n,s)=>{const o=i!=null&&i.children?gge(i.children,a=>a.domNode===n):void 0;r&&!o&&s!==t.length-1||(i=o)}),i},vge=e=>{let t;const r={...hge,...e},i=mge(r),n=i.performanceLogger;let s,o=!0,a=!1;const l=[],c=[],h=(m,y,g)=>{var w;let v;i.eventHandlerInterceptor=(_,$,E,k)=>function(M){let P;n("domEvent",M);const N=yge(M.currentTarget,v.domNode),j=N.some(W=>{var ie;return customElements.get((ie=W==null?void 0:W.tagName)==null?void 0:ie.toLowerCase())});if(M.eventPhase===Event.CAPTURING_PHASE||!j)N.reverse(),P=YN(v.getLastRender(),N);else{const W=M.composedPath(),ie=W.slice(W.indexOf(M.currentTarget),W.indexOf(v.domNode)).reverse();P=YN(v.getLastRender(),ie,!0)}let G;return P&&(G=r.handleInterceptedEvent(t,P,this,M)),n("domEventProcessed",M),G},(w=r.postProcessProjectionOptions)==null||w.call(r,i);const b=g();v=m(y,b,i),i.eventHandlerInterceptor=void 0,l.push(v),c.push(g),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(v,b)};let f=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let m=0;m<l.length;m++){const y=c[m]();n("rendered",void 0),l[m].update(y),n("patched",void 0)}n("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(f=r.modifyDoRenderImplementation(f,l,c)),t={renderNow:f,scheduleRender:()=>{s||a||(s=requestAnimationFrame(f))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(m,y)=>{h(Hl.append,m,y)},insertBefore:(m,y)=>{h(Hl.insertBefore,m,y)},merge:(m,y)=>{h(Hl.merge,m,y)},replace:(m,y)=>{h(Hl.replace,m,y)},detach:m=>{for(let y=0;y<c.length;y++)if(c[y]===m)return c.splice(y,1),l.splice(y,1)[0];throw new Error("renderFunction was not found")}},t};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Cq="calcite-mode-auto",Rq="calcite-mode-dark",wge="calcite-mode-light",Ske={autoMode:Cq,darkMode:Rq,lightMode:wge,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Wc=globalThis.calciteConfig,$ke=(Wc==null?void 0:Wc.focusTrapStack)||[],QN="2.10.1";function bge(){if(Wc&&Wc.version){console.warn(`[calcite-components] while initializing v${QN}, an existing configuration with version "${Wc.version}" was found. This may cause unexpected behavior. The version will not be added to the existing global configuration.`);return}const e=Wc||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:QN,writable:!1}),globalThis.calciteConfig=e}var ma={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},_ge=Object.defineProperty,Sge=(e,t)=>{for(var r in t)_ge(e,r,{get:t[r],enumerable:!0})},$ge=e=>{const t=new URL(e,kr.$resourcesUrl$);return t.origin!==fg.location.origin?t.href:t.pathname},xge=e=>kr.$resourcesUrl$=e,XN={},Tge="http://www.w3.org/2000/svg",Mge="http://www.w3.org/1999/xhtml",Ege=e=>e!=null,BP=e=>(e=typeof e,e==="object"||e==="function");function Ige(e){var t,r,i;return(i=(r=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:r.getAttribute("content"))!=null?i:void 0}var kge={};Sge(kge,{err:()=>Aq,map:()=>Oge,ok:()=>f3,unwrap:()=>Pge,unwrapErr:()=>Cge});var f3=e=>({isOk:!0,isErr:!1,value:e}),Aq=e=>({isOk:!1,isErr:!0,value:e});function Oge(e,t){if(e.isOk){const r=t(e.value);return r instanceof Promise?r.then(i=>f3(i)):f3(r)}if(e.isErr){const r=e.value;return Aq(r)}throw"should never get here"}var Pge=e=>{if(e.isOk)return e.value;throw e.value},Cge=e=>{if(e.isErr)return e.value;throw e.value},Md=(e,t="")=>()=>{},Rge="slot-fb{display:contents}slot-fb[hidden]{display:none}",e5="http://www.w3.org/1999/xlink",Lq=(e,t,...r)=>{let i=null,n=null,s=null,o=!1,a=!1;const l=[],c=f=>{for(let m=0;m<f.length;m++)i=f[m],Array.isArray(i)?c(i):i!=null&&typeof i!="boolean"&&((o=typeof e!="function"&&!BP(i))&&(i=String(i)),o&&a?l[l.length-1].$text$+=i:l.push(o?a_(null,i):i),a=o)};if(c(r),t){t.key&&(n=t.key),t.name&&(s=t.name);{const f=t.className||t.class;f&&(t.class=typeof f!="object"?f:Object.keys(f).filter(m=>f[m]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,l,Nge);const h=a_(e,null);return h.$attrs$=t,l.length>0&&(h.$children$=l),h.$key$=n,h.$name$=s,h},a_=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return r.$attrs$=null,r.$key$=null,r.$name$=null,r},Age={},Lge=e=>e&&e.$tag$===Age,Nge={forEach:(e,t)=>e.map(t5).forEach(t),map:(e,t)=>e.map(t5).map(t).map(Fge)},t5=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Fge=e=>{if(typeof e.vtag=="function"){const r={...e.vattrs};return e.vkey&&(r.key=e.vkey),e.vname&&(r.name=e.vname),Lq(e.vtag,r,...e.vchildren||[])}const t=a_(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Dge=e=>pve.map(t=>t(e)).find(t=>!!t),jge=(e,t)=>e!=null&&!BP(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,zge=e=>e,xke=(e,t,r)=>{const i=zge(e);return{emit:n=>Vge(i,t,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:n})}},Vge=(e,t,r)=>{const i=kr.ce(t,r);return e.dispatchEvent(i),i},r5=new WeakMap,Uge=(e,t,r)=>{let i=c_.get(e);mve&&r?(i=i||new CSSStyleSheet,typeof i=="string"?i=t:i.replaceSync(t)):i=t,c_.set(e,i)},Gge=(e,t,r)=>{var i;const n=Nq(t,r),s=c_.get(n);if(e=e.nodeType===11?e:Os,s)if(typeof s=="string"){e=e.head||e;let o=r5.get(e),a;if(o||r5.set(e,o=new Set),!o.has(n)){{a=Os.createElement("style"),a.innerHTML=s;const l=(i=kr.$nonce$)!=null?i:Ige(Os);l!=null&&a.setAttribute("nonce",l),e.insertBefore(a,e.querySelector("link"))}t.$flags$&4&&(a.innerHTML+=Rge),o&&o.add(n)}}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return n},qge=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,i=t.$flags$,n=Md("attachStyles",t.$tagName$),s=Gge(r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);i&10&&(r["s-sc"]=s,r.classList.add(s+"-h"),i&2&&r.classList.add(s+"-s")),n()},Nq=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),i5=(e,t,r,i,n,s)=>{if(r!==i){let o=c5(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,c=n5(r),h=n5(i);l.remove(...c.filter(f=>f&&!h.includes(f))),l.add(...h.filter(f=>f&&!c.includes(f)))}else if(t==="style"){for(const l in r)(!i||i[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in i)(!r||i[l]!==r[l])&&(l.includes("-")?e.style.setProperty(l,i[l]):e.style[l]=i[l])}else if(t!=="key")if(t==="ref")i&&i(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):c5(fg,a)?t=a.slice(2):t=a[2]+t.slice(3),r||i){const l=t.endsWith(Fq);t=t.replace(Hge,""),r&&kr.rel(e,t,r,l),i&&kr.ael(e,t,i,l)}}else{const l=BP(i);if((o||l&&i!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=i;else{const h=i??"";t==="list"?o=!1:(r==null||e[t]!=h)&&(e[t]=h)}}catch{}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,c=!0),i==null||i===!1?(i!==!1||e.getAttribute(t)==="")&&(c?e.removeAttributeNS(e5,t):e.removeAttribute(t)):(!o||s&4||n)&&!l&&(i=i===!0?"":i,c?e.setAttributeNS(e5,t,i):e.setAttribute(t,i))}}},Bge=/\s/,n5=e=>e?e.split(Bge):[],Fq="Capture",Hge=new RegExp(Fq+"$"),Dq=(e,t,r)=>{const i=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,n=e&&e.$attrs$||XN,s=t.$attrs$||XN;for(const o of s5(Object.keys(n)))o in s||i5(i,o,n[o],void 0,r,t.$flags$);for(const o of s5(Object.keys(s)))i5(i,o,n[o],s[o],r,t.$flags$)};function s5(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var xp,m3,Xh,HP=!1,l_=!1,WP=!1,rn=!1,u_=(e,t,r,i)=>{var n;const s=t.$children$[r];let o=0,a,l,c;if(HP||(WP=!0,s.$tag$==="slot"&&(xp&&i.classList.add(xp+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)a=s.$elm$=Os.createTextNode(s.$text$);else if(s.$flags$&1)a=s.$elm$=Os.createTextNode("");else{if(rn||(rn=s.$tag$==="svg"),a=s.$elm$=Os.createElementNS(rn?Tge:Mge,s.$flags$&2?"slot-fb":s.$tag$),rn&&s.$tag$==="foreignObject"&&(rn=!1),Dq(null,s,rn),Ege(xp)&&a["s-si"]!==xp&&a.classList.add(a["s-si"]=xp),JP(a,i),s.$children$)for(o=0;o<s.$children$.length;++o)l=u_(e,s,o,a),l&&a.appendChild(l);s.$tag$==="svg"?rn=!1:a.tagName==="foreignObject"&&(rn=!0)}return a["s-hn"]=Xh,s.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=m3,a["s-sn"]=s.$name$||"",a["s-rf"]=(n=s.$attrs$)==null?void 0:n.ref,c=e&&e.$children$&&e.$children$[r],c&&c.$tag$===s.$tag$&&e.$elm$&&O0(e.$elm$,!1)),a},O0=(e,t)=>{kr.$flags$|=1;const r=Array.from(e.childNodes);if(e["s-sr"]&&ma.experimentalSlotFixes){let i=e;for(;i=i.nextSibling;)i&&i["s-sn"]===e["s-sn"]&&i["s-sh"]===Xh&&r.push(i)}for(let i=r.length-1;i>=0;i--){const n=r[i];n["s-hn"]!==Xh&&n["s-ol"]&&(nu(Vq(n),n,ZP(n)),n["s-ol"].remove(),n["s-ol"]=void 0,n["s-sh"]=void 0,WP=!0),t&&O0(n,t)}kr.$flags$&=-2},jq=(e,t,r,i,n,s)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===Xh&&(o=o.shadowRoot);n<=s;++n)i[n]&&(a=u_(null,r,n,e),a&&(i[n].$elm$=a,nu(o,a,ZP(t))))},zq=(e,t,r)=>{for(let i=t;i<=r;++i){const n=e[i];if(n){const s=n.$elm$;qq(n),s&&(l_=!0,s["s-ol"]?s["s-ol"].remove():O0(s,!0),s.remove())}}},Wge=(e,t,r,i,n=!1)=>{let s=0,o=0,a=0,l=0,c=t.length-1,h=t[0],f=t[c],m=i.length-1,y=i[0],g=i[m],v,b;for(;s<=c&&o<=m;)if(h==null)h=t[++s];else if(f==null)f=t[--c];else if(y==null)y=i[++o];else if(g==null)g=i[--m];else if(zv(h,y,n))Tp(h,y,n),h=t[++s],y=i[++o];else if(zv(f,g,n))Tp(f,g,n),f=t[--c],g=i[--m];else if(zv(h,g,n))(h.$tag$==="slot"||g.$tag$==="slot")&&O0(h.$elm$.parentNode,!1),Tp(h,g,n),nu(e,h.$elm$,f.$elm$.nextSibling),h=t[++s],g=i[--m];else if(zv(f,y,n))(h.$tag$==="slot"||g.$tag$==="slot")&&O0(f.$elm$.parentNode,!1),Tp(f,y,n),nu(e,f.$elm$,h.$elm$),f=t[--c],y=i[++o];else{for(a=-1,l=s;l<=c;++l)if(t[l]&&t[l].$key$!==null&&t[l].$key$===y.$key$){a=l;break}a>=0?(b=t[a],b.$tag$!==y.$tag$?v=u_(t&&t[o],r,a,e):(Tp(b,y,n),t[a]=void 0,v=b.$elm$),y=i[++o]):(v=u_(t&&t[o],r,o,e),y=i[++o]),v&&nu(Vq(h.$elm$),v,ZP(h.$elm$))}s>c?jq(e,i[m+1]==null?null:i[m+1].$elm$,r,i,o,m):o>m&&zq(t,s,c)},zv=(e,t,r=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:r?!0:e.$key$===t.$key$:!1,ZP=e=>e&&e["s-ol"]||e,Vq=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Tp=(e,t,r=!1)=>{const i=t.$elm$=e.$elm$,n=e.$children$,s=t.$children$,o=t.$tag$,a=t.$text$;let l;a===null?(rn=o==="svg"?!0:o==="foreignObject"?!1:rn,o==="slot"&&!HP||Dq(e,t,rn),n!==null&&s!==null?Wge(i,n,t,s,r):s!==null?(e.$text$!==null&&(i.textContent=""),jq(i,null,t,s,0,s.length-1)):n!==null&&zq(n,0,n.length-1),rn&&o==="svg"&&(rn=!1)):(l=i["s-cr"])?l.parentNode.textContent=a:e.$text$!==a&&(i.data=a)},Uq=e=>{const t=e.childNodes;for(const r of t)if(r.nodeType===1){if(r["s-sr"]){const i=r["s-sn"];r.hidden=!1;for(const n of t)if(n!==r){if(n["s-hn"]!==r["s-hn"]||i!==""){if(n.nodeType===1&&(i===n.getAttribute("slot")||i===n["s-sn"])||n.nodeType===3&&i===n["s-sn"]){r.hidden=!0;break}}else if(n.nodeType===1||n.nodeType===3&&n.textContent.trim()!==""){r.hidden=!0;break}}}Uq(r)}},fa=[],Gq=e=>{let t,r,i;for(const n of e.childNodes){if(n["s-sr"]&&(t=n["s-cr"])&&t.parentNode){r=t.parentNode.childNodes;const s=n["s-sn"];for(i=r.length-1;i>=0;i--)if(t=r[i],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==n["s-hn"]&&!ma.experimentalSlotFixes)if(o5(t,s)){let o=fa.find(a=>a.$nodeToRelocate$===t);l_=!0,t["s-sn"]=t["s-sn"]||s,o?(o.$nodeToRelocate$["s-sh"]=n["s-hn"],o.$slotRefNode$=n):(t["s-sh"]=n["s-hn"],fa.push({$slotRefNode$:n,$nodeToRelocate$:t})),t["s-sr"]&&fa.map(a=>{o5(a.$nodeToRelocate$,t["s-sn"])&&(o=fa.find(l=>l.$nodeToRelocate$===t),o&&!a.$slotRefNode$&&(a.$slotRefNode$=o.$slotRefNode$))})}else fa.some(o=>o.$nodeToRelocate$===t)||fa.push({$nodeToRelocate$:t})}n.nodeType===1&&Gq(n)}},o5=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",qq=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(qq)},nu=(e,t,r)=>{const i=e==null?void 0:e.insertBefore(t,r);return JP(t,e),i},Bq=e=>{const t=[];return e&&t.push(...e["s-scs"]||[],e["s-si"],e["s-sc"],...Bq(e.parentElement)),t},JP=(e,t,r=!1)=>{var i;if(e&&t&&e.nodeType===1){const n=new Set(Bq(t).filter(Boolean));if(n.size&&((i=e.classList)==null||i.add(...e["s-scs"]=[...n]),e["s-ol"]||r))for(const s of Array.from(e.childNodes))JP(s,e,!0)}},Zge=(e,t,r=!1)=>{var i,n,s,o,a;const l=e.$hostElement$,c=e.$cmpMeta$,h=e.$vnode$||a_(null,null),f=Lge(t)?t:Lq(null,null,t);if(Xh=l.tagName,c.$attrsToReflect$&&(f.$attrs$=f.$attrs$||{},c.$attrsToReflect$.map(([m,y])=>f.$attrs$[y]=l[m])),r&&f.$attrs$)for(const m of Object.keys(f.$attrs$))l.hasAttribute(m)&&!["key","ref","style","class"].includes(m)&&(f.$attrs$[m]=l[m]);f.$tag$=null,f.$flags$|=4,e.$vnode$=f,f.$elm$=h.$elm$=l.shadowRoot||l,xp=l["s-sc"],HP=(c.$flags$&1)!==0,m3=l["s-cr"],l_=!1,Tp(h,f,r);{if(kr.$flags$|=1,WP){Gq(f.$elm$);for(const m of fa){const y=m.$nodeToRelocate$;if(!y["s-ol"]){const g=Os.createTextNode("");g["s-nr"]=y,nu(y.parentNode,y["s-ol"]=g,y)}}for(const m of fa){const y=m.$nodeToRelocate$,g=m.$slotRefNode$;if(g){const v=g.parentNode;let b=g.nextSibling;{let w=(i=y["s-ol"])==null?void 0:i.previousSibling;for(;w;){let _=(n=w["s-nr"])!=null?n:null;if(_&&_["s-sn"]===y["s-sn"]&&v===_.parentNode){for(_=_.nextSibling;_===y||_!=null&&_["s-sr"];)_=_==null?void 0:_.nextSibling;if(!_||!_["s-nr"]){b=_;break}}w=w.previousSibling}}(!b&&v!==y.parentNode||y.nextSibling!==b)&&y!==b&&(!y["s-hn"]&&y["s-ol"]&&(y["s-hn"]=y["s-ol"].parentNode.nodeName),nu(v,y,b),y.nodeType===1&&(y.hidden=(s=y["s-ih"])!=null?s:!1)),y&&typeof g["s-rf"]=="function"&&g["s-rf"](y)}else y.nodeType===1&&(r&&(y["s-ih"]=(o=y.hidden)!=null?o:!1),y.hidden=!0)}}l_&&Uq(f.$elm$),kr.$flags$&=-2,fa.length=0}if(ma.experimentalScopedSlotChanges&&c.$flags$&2)for(const m of f.$elm$.childNodes)m["s-hn"]!==Xh&&!m["s-sh"]&&(r&&m["s-ih"]==null&&(m["s-ih"]=(a=m.hidden)!=null?a:!1),m.hidden=!0);m3=void 0},Jge=(e,t)=>{},KP=(e,t)=>(e.$flags$|=16,Jge(e,e.$ancestorComponent$),gve(()=>Kge(e,t))),Kge=(e,t)=>{const r=e.$hostElement$,i=Md("scheduleUpdate",e.$cmpMeta$.$tagName$),n=r;if(!n)throw new Error(`Can't render component <${r.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let s;return t?s=kh(n,"componentWillLoad"):s=kh(n,"componentWillUpdate"),s=a5(s,()=>kh(n,"componentWillRender")),i(),a5(s,()=>Qge(e,n,t))},a5=(e,t)=>Yge(e)?e.then(t):t(),Yge=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",Qge=async(e,t,r)=>{const i=e.$hostElement$,n=Md("update",e.$cmpMeta$.$tagName$);i["s-rc"],r&&qge(e);const s=Md("render",e.$cmpMeta$.$tagName$);Xge(e,t,i,r),s(),n(),eve(e)},l5=null,Xge=(e,t,r,i)=>{try{l5=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(ma.hasRenderFn||ma.reflect)&&(ma.vdomRender||ma.reflect)&&(ma.hydrateServerSide||Zge(e,t,i))}catch(l){hg(l,e.$hostElement$)}return l5=null,null},eve=e=>{const t=e.$cmpMeta$.$tagName$,r=e.$hostElement$,i=Md("postUpdate",t),n=r;e.$ancestorComponent$,kh(n,"componentDidRender"),e.$flags$&64?(kh(n,"componentDidUpdate"),i()):(e.$flags$|=64,kh(n,"componentDidLoad"),i())},Tke=e=>{{const t=bf(e),r=t.$hostElement$.isConnected;return r&&(t.$flags$&18)===2&&KP(t,!1),r}},kh=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(i){hg(i)}},tve=(e,t)=>bf(e).$instanceValues$.get(t),rve=(e,t,r,i)=>{const n=bf(e),s=e,o=n.$instanceValues$.get(t),a=n.$flags$,l=s;r=jge(r,i.$members$[t][0]);const c=Number.isNaN(o)&&Number.isNaN(r);if(r!==o&&!c){n.$instanceValues$.set(t,r);{if(i.$watchers$&&a&128){const f=i.$watchers$[t];f&&f.map(m=>{try{l[m](r,o,t)}catch(y){hg(y,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(r,o,t)===!1)return;KP(n,!1)}}}},ive=(e,t,r)=>{var i;const n=e.prototype;if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const s=Object.entries(t.$members$);s.map(([o,[a]])=>{(a&31||a&32)&&Object.defineProperty(n,o,{get(){return tve(this,o)},set(l){rve(this,o,l,t)},configurable:!0,enumerable:!0})});{const o=new Map;n.attributeChangedCallback=function(a,l,c){kr.jmp(()=>{var h;const f=o.get(a);if(this.hasOwnProperty(f))c=this[f],delete this[f];else{if(n.hasOwnProperty(f)&&typeof this[f]=="number"&&this[f]==c)return;if(f==null){const m=bf(this),y=m==null?void 0:m.$flags$;if(y&&!(y&8)&&y&128&&c!==l){const v=this,b=(h=t.$watchers$)==null?void 0:h[a];b==null||b.forEach(w=>{v[w]!=null&&v[w].call(v,c,l,a)})}return}}this[f]=c===null&&typeof this[f]=="boolean"?!1:c})},e.observedAttributes=Array.from(new Set([...Object.keys((i=t.$watchers$)!=null?i:{}),...s.filter(([a,l])=>l[0]&15).map(([a,l])=>{var c;const h=l[1]||a;return o.set(h,a),l[0]&512&&((c=t.$attrsToReflect$)==null||c.push([a,h])),h})]))}}return e},nve=async(e,t,r,i)=>{let n;if(!(t.$flags$&32)){t.$flags$|=32,r.$lazyBundleId$;{n=e.constructor;const o=e.localName;customElements.whenDefined(o).then(()=>t.$flags$|=128)}if(n&&n.style){let o=n.style;typeof o!="string"&&(t.$modeName$=Dge(e),t.$modeName$&&(o=o[t.$modeName$]));const a=Nq(r,t.$modeName$);if(!c_.has(a)){const l=Md("registerStyles",r.$tagName$);Uge(a,o,!!(r.$flags$&1)),l()}}}t.$ancestorComponent$,KP(t,!0)},u5=e=>{},sve=e=>{if(!(kr.$flags$&1)){const t=bf(e),r=t.$cmpMeta$,i=Md("connectedCallback",r.$tagName$);t.$flags$&1?(Hq(e,t,r.$listeners$),t!=null&&t.$lazyInstance$?u5(t.$lazyInstance$):t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>u5(t.$lazyInstance$))):(t.$flags$|=1,r.$flags$&12&&ove(e),r.$members$&&Object.entries(r.$members$).map(([n,[s]])=>{if(s&31&&e.hasOwnProperty(n)){const o=e[n];delete e[n],e[n]=o}}),nve(e,t,r)),i()}},ove=e=>{const t=e["s-cr"]=Os.createComment("");t["s-cn"]=!0,nu(e,t,e.firstChild)},ave=async e=>{if(!(kr.$flags$&1)){const t=bf(e);t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0)}},Mke=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};r.$members$=t[2],r.$listeners$=t[3],r.$watchers$=e.$watchers$,r.$attrsToReflect$=[];const i=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){dve(this,r)},connectedCallback(){sve(this),i&&i.call(this)},disconnectedCallback(){ave(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(r.$flags$&16)})}}),e.is=r.$tagName$,ive(e,r)},Eke=(e,t)=>t,Hq=(e,t,r,i)=>{r&&r.map(([n,s,o])=>{const a=uve(e,n),l=lve(t,o),c=cve(n);kr.ael(a,s,l,c),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>kr.rel(a,s,l,c))})},lve=(e,t)=>r=>{var i;try{ma.lazyLoad||e.$hostElement$[t](r)}catch(n){hg(n)}},uve=(e,t)=>t&4?Os:t&8?fg:t&16?Os.body:e,cve=e=>hve?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,Wq=new WeakMap,bf=e=>Wq.get(e),dve=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Hq(e,r,t.$listeners$),Wq.set(e,r)},c5=(e,t)=>t in e,hg=(e,t)=>(0,console.error)(e,t),c_=new Map,pve=[],fg=typeof window<"u"?window:{},Os=fg.document||{head:{}},Ike=fg.HTMLElement||class{},kr={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,i)=>e.addEventListener(t,r,i),rel:(e,t,r,i)=>e.removeEventListener(t,r,i),ce:(e,t)=>new CustomEvent(e,t)},hve=(()=>{let e=!1;try{Os.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),fve=e=>Promise.resolve(e),mve=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),y3=!1,g3=[],Zq=[],Jq=(e,t)=>r=>{e.push(r),y3||(y3=!0,t&&kr.$flags$&4?yve(v3):kr.raf(v3))},d5=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(r){hg(r)}e.length=0},v3=()=>{d5(g3),d5(Zq),(y3=g3.length>0)&&kr.raf(v3)},yve=e=>fve().then(e),kke=Jq(g3,!1),gve=Jq(Zq,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */function p5(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(Rq)||e.contains(Cq)&&t?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&i(o),s=o};let s=r();i(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function vve(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?p5():document.addEventListener("DOMContentLoaded",()=>p5(),{once:!0})),bge()}const wve=vve;wve();let Kq;function bve(){try{$ge(".")}catch{xge(Nn(Ye(Kq)))}}function YP(e){var r;const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push((r=e[i])==null?void 0:r.call(e));return t.length>0?Promise.all(t):null}Kq="components/assets";const Yq=Symbol("widget"),Qq=Symbol("widget-test-data"),_ve=[],Sve={},d_=new WeakMap;function Xq(e,t){let r=t.children;if(r!=null&&r.length)for(let n=0;n<r.length;++n)r[n]=Xq(e,r[n]);else r=_ve;const i=t.vnodeSelector;if(p_(i)){const n=t.properties||Sve,s=n.key||i;return{vnodeSelector:"div",properties:{key:s,afterCreate:$ve,afterUpdate:xve,afterRemoved:eB,parentWidget:e,widgetConstructor:i,widgetProperties:{...n,key:s,children:r}},children:void 0,text:void 0,domNode:null}}return t}function $ve(e,t,r,{parentWidget:i,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=e,d_.set(e,o),(a=o.afterCreate)==null||a.call(o,o,e),i.addHandles(Xe(()=>eB(e))),queueMicrotask(()=>{o[Qq].projector.renderNow()})}function xve(e,t,r,{widgetProperties:i}){var s;const n=d_.get(e);n&&(n.set(i),(s=n.afterUpdate)==null||s.call(n,n,e))}function eB(e){var r;const t=d_.get(e);t&&((r=t.afterRemoved)==null||r.call(t,t,e),t.destroy(),d_.delete(e))}function p_(e){return typeof e=="function"&&e[Yq]}const h5=new Set;function Tve(e){h5.add(e),e.finally(()=>h5.delete(e))}var tB;const Mve="esri.widgets.Widget";let Eve=0;function rB(e,t){const r=Object.prototype.hasOwnProperty;for(const i in t)r.call(t,i)&&r.call(e,i)&&(e[i]!=null&&t[i]!=null&&typeof e[i]=="object"&&typeof t[i]=="object"?rB(e[i],t[i]):e[i]=t[i]);return e}const Ive=vge({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,n,s,o)=>{const a=t==null?void 0:t(i,n,s,o),l=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in s)||l){const c=i[2].toLowerCase()+i.slice(3),h=y=>a==null?void 0:a.call(s,y);s.addEventListener(c,h,l);const f=()=>s.removeEventListener(c,h,l),m=o.afterRemoved;o.afterRemoved=y=>{m==null||m(y),f()}}return a}},handleInterceptedEvent(e,t,r,i){const{eventPhase:n,type:s}=i,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(Z7(),e.scheduleRender(),l[a].call(l.bind||r,i))}});let K$=!1,hr=class extends K_(Aa.EventedAccessor){constructor(t,r){super(t,r),this._attached=!1,this._projector=Ive,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=rO(async()=>{var l;if((l=this._messageBundleProps)!=null&&l.length){const c=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:f})=>{if(this.destroyed)return;let m=await qz(h);this.uiStrings&&Object.keys(this.uiStrings)&&(m=rB(C(m),this.uiStrings)),this[f]=m}));if(this.destroyed)return;for(const h of c)h.status==="rejected"&&H.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),bve();const i="esri-widget-uid-"+qP(),n=this.render.bind(this);this._trackingTarget=new G_(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${i}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var f,m;if(!this._readyForTrueRender||this.destroyed)return null;const l=n()??s(),c=l.properties??(l.properties={});if(c.key??(c.key=i),p_(l.vnodeSelector)){if(!this.visible)return s()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),(f=c.styles).display??(f.display="");let h=0;return(m=l.children)==null||m.forEach(y=>{var g;p_(y.vnodeSelector)||(y.properties??(y.properties={}),(g=y.properties).key??(g.key=`${this.id}--${h++}`))}),Xq(this,l)};this.render=()=>{if(K$)return o();let l=zue(this)??null;if(l)return l;this._trackingTarget.clear(),K$=!0;try{l=Ea(this._trackingTarget,o)}catch(c){throw H.getLogger(this).error(c),c}finally{K$=!1}return l&&Vue(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),Tve(this._resourcesFetch)}normalizeCtorArgs(t,r){const i={...t};return r&&(i.container=r),i}postInitialize(){}beforeFirstRender(){var r;const t=this.loadDependencies();return(r=this._messageBundleProps)!=null&&r.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(EA):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(xt(this._trackingTarget),xt(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,_$(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return lP(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+Eve++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(tB=Yq,Qq)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(_$(this),this._projector.scheduleRender())}own(t){t8(H.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(t)}classes(...t){return Uue.apply(this,t)}renderNow(){_$(this),this._projector.renderNow()}_postInitialize(){var r;if(this.destroyed)return;this.scheduleRender(),(r=this._delegatedEventNames)!=null&&r.length&&this.addHandles(xe(()=>this.viewModel,(i,n)=>{n&&this.removeHandles("delegated-events"),i&&V_(i)&&this.addHandles(this._delegatedEventNames.map(s=>K0(i,s,o=>{this.emit(s,o)})),"delegated-events")},Ln)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(EA),this.scheduleRender()};this.addHandles([zz(t),xe(()=>this.uiStrings,t),Oa(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var r;this._attached&&(this._projector.detach(this.render),this._attached=!1),(r=t==null?void 0:t.parentNode)==null||r.removeChild(t)}};hr[tB]=!0,u([d()],hr.prototype,"_readyForTrueRender",void 0),u([d({value:null})],hr.prototype,"container",null),u([et("container")],hr.prototype,"castContainer",null),u([d()],hr.prototype,"icon",null),u([d()],hr.prototype,"id",null),u([d()],hr.prototype,"label",null),u([d()],hr.prototype,"renderable",null),u([d()],hr.prototype,"uiStrings",void 0),u([d()],hr.prototype,"viewModel",void 0),u([d({value:!0})],hr.prototype,"visible",null),u([d()],hr.prototype,"key",void 0),u([d()],hr.prototype,"children",void 0),u([d()],hr.prototype,"afterCreate",void 0),u([d()],hr.prototype,"afterUpdate",void 0),u([d()],hr.prototype,"afterRemoved",void 0),hr=u([T(Mve)],hr);const LS=hr,kve=new Map;function Ove(e){return kve.get(e)}function f5(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function Pve(e,t){return e.length!==t.length||e.some((r,i)=>r.text!==t[i].text)}function om(e,t,r){!r||!t||e.find(i=>i.layerView===t&&i.text===r)||e.push({text:r,layerView:t})}function Cve(e){return e.type==="bing-maps"}const Do=[];let Mp=class extends we{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ce,this.view=null,this._allLayerViewsChange=r=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const i=(n=this.view)==null?void 0:n.allLayerViews;i&&(this.addHandles(i.map(s=>xe(()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),i.forEach(s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),r!=null&&r.removed&&r.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([Sd(()=>{var r;return(r=this.view)==null?void 0:r.allLayerViews},"change",r=>this._allLayerViewsChange(r),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Oa(()=>{var r;return((r=this.view)==null?void 0:r.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var t;return(t=this.view)!=null&&t.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,r=t==null?void 0:t.allLayerViews;if(Do.length=0,!t||!r)return void this._clear();r.forEach(n=>{var a,l;if(n.suspended||!((a=n.layer)!=null&&a.attributionVisible))return;const s=n.layer;if(f5(s,"user"))return void om(Do,n,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(n)){const c=this._fetchedAttributionData.get(n);return void(c?om(Do,n,this._getDynamicAttribution(c,t,s)):f5(s)&&om(Do,n,s.copyright))}return void this._fetchAttributionData(n)}const o="portalItem"in s?(l=s.portalItem)==null?void 0:l.accessInformation:void 0;om(Do,n,o||s.copyright)});const i=r.find(n=>{var s;return((s=n.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"});if(this.view&&i){const n=Ove(this.view);if(n){const s=n.getAttributionText();for(let o=0;o<s.length;++o)om(Do,i,s[o])}}Pve(this.items,Do)&&(this.items.removeAll(),this.items.addMany(Do)),Do.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const r=await Y_(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const i=r.ok?this._createContributionIndex(r.value,Cve(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)}this._updateAttributionItems()}_createContributionIndex(t,r){const i=t.contributors,n={};if(!i)return n;for(let s=0;s<i.length;s++){const o=i[s],a=o.coverageAreas;if(!a)return;for(const l of a){const c=l.bbox,h=l.zoomMin-(r&&l.zoomMin?1:0),f=l.zoomMax-(r&&l.zoomMax?1:0),m=new ct({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:Pe.WGS84}),y={extent:Xc(m),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:s};for(let g=h;g<=f;g++)n[g]??(n[g]=[]),n[g].push(y)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(t,r,i){var h;const{extent:n,scale:s}=r;let o=((h=i.tileInfo)==null?void 0:h.scaleToZoom(s))??0;if(o=Math.min(t.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=t[o],l=tS(n.center.clone().normalize(),r.spatialReference),c=new Set;return a?a.filter(f=>{const m=f.id,y=!c.has(m)&&l&&f.extent&&eg(f.extent,l);return y&&c.add(m),y}).sort((f,m)=>m.score-f.score||f.objectId-m.objectId).map(f=>f.attribution).join(", "):""}};u([d({readOnly:!0,type:ce})],Mp.prototype,"items",void 0),u([d({readOnly:!0})],Mp.prototype,"state",null),u([d()],Mp.prototype,"view",void 0),Mp=u([T("esri.widgets.Attribution.AttributionViewModel")],Mp);const iB=Mp,_o={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function Rve(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:Lve(e[t])}}}function Ave(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function Lve(e){return function(t,...r){Ave(t)?Wue(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function NS(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var Nve=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},nB=function(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];Array.isArray(n)?nB(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=Nve(n)),t.push(n))}},Fve=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var n=[];return nB(r,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function Li(e,t,...r){return typeof e!="function"||p_(e)?Fve(e,t,...r):e(t,...r)}function Cke(...e){return e}const ip="esri-attribution",np={base:ip,poweredBy:`${ip}__powered-by`,sources:`${ip}__sources`,open:`${ip}--open`,sourcesOpen:`${ip}__sources--open`,link:`${ip}__link`};let pi=class extends LS{constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new iB}initialize(){this.addHandles(Sd(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,r)=>(t.includes(r.text)||t.push(r.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[np.open]:this._isOpen};return Li("div",{bind:this,class:this.classes(np.base,_o.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Li("div",{class:np.poweredBy},"Powered by"," ",Li("a",{class:np.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:n}=this,s={[np.sourcesOpen]:t,[_o.interactive]:r};return Li("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(np.sources,s),innerHTML:n,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1;const{clientHeight:i,clientWidth:n,scrollWidth:s}=t,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(r=!0),this._isOpen){const l=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,l&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};u([d()],pi.prototype,"_isOpen",void 0),u([d()],pi.prototype,"_isInteractive",null),u([d()],pi.prototype,"_attributionTextOverflowed",void 0),u([d()],pi.prototype,"_prevSourceNodeHeight",void 0),u([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],pi.prototype,"attributionText",null),u([d()],pi.prototype,"icon",null),u([d()],pi.prototype,"itemDelimiter",void 0),u([d()],pi.prototype,"label",null),u([d(),NS("esri/widgets/Attribution/t9n/Attribution")],pi.prototype,"messages",void 0),u([d()],pi.prototype,"view",null),u([d({type:iB})],pi.prototype,"viewModel",void 0),u([Rve()],pi.prototype,"_toggleState",null),pi=u([T("esri.widgets.Attribution")],pi);const Dve=pi;function jve(e){var t,r;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((r=e==null?void 0:e.spatialReference)==null?void 0:r.isGeographic)||!1}const zve=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return r8(i),this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return u([d()],t.prototype,"goToOverride",void 0),u([d()],t.prototype,"view",void 0),t=u([T("esri.widgets.support.GoTo")],t),t};let wc=class extends zve(we){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(xe(()=>this.view,this._updateRotationWatcher,wi))}destroy(){this.view=null}get canShowNorth(){return jve(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,r;(t=this.view)!=null&&t.ready&&(((r=this.view)==null?void 0:r.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:F("mapview-essential-goto-duration")}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const r=-t.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(t){this.removeAllHandles(),t&&this.addHandles(t.type==="2d"?xe(()=>t==null?void 0:t.rotation,this._updateForRotation,wi):xe(()=>t==null?void 0:t.camera,this._updateForCamera,wi))}};u([d({readOnly:!0})],wc.prototype,"canShowNorth",null),u([d({readOnly:!0})],wc.prototype,"orientation",void 0),u([d({readOnly:!0})],wc.prototype,"state",null),u([d()],wc.prototype,"view",void 0),wc=u([T("esri.widgets.Compass.CompassViewModel")],wc);const sB=wc,m5="esri-compass",y5={base:m5,iconContainer:`${m5}__icon-container`};let Jo=class extends LS{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new sB,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return YP({button:()=>ee(()=>import("./calcite-button-CKe3h7O7.js"),__vite__mapDeps([206,207,208,209,210,211,212,213,214,215,216,217])),icon:()=>ee(()=>import("./calcite-icon-BHuNyYWw.js"),__vite__mapDeps([218,216,208,209,215]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:r}=this.viewModel,{messages:i}=this;return Li("div",{class:this.classes(y5.base,_o.widget)},Li("calcite-button",{class:_o.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},Li("div",{"aria-hidden":"true",class:y5.iconContainer,title:i.reset},Li("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};u([d()],Jo.prototype,"goToOverride",null),u([d()],Jo.prototype,"icon",null),u([d()],Jo.prototype,"label",null),u([d(),NS("esri/widgets/Compass/t9n/Compass")],Jo.prototype,"messages",void 0),u([d()],Jo.prototype,"view",null),u([d({type:sB})],Jo.prototype,"viewModel",void 0),Jo=u([T("esri.widgets.Compass")],Jo);const Vve=Jo,g5="esri-navigation-toggle",v5={base:g5,isLayoutHorizontal:`${g5}--horizontal`};let Ep=class extends we{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(Oa(()=>{var t;return(t=this.view)==null?void 0:t.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var t,r;return(t=this.view)!=null&&t.ready&&((r=this.view)==null?void 0:r.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){var r;const t=(r=this.view)==null?void 0:r.inputManager;t&&(t.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};u([d({readOnly:!0})],Ep.prototype,"state",null),u([d()],Ep.prototype,"_navigationMode",void 0),u([d()],Ep.prototype,"view",void 0),Ep=u([T("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Ep);const oB=Ep;let Ko=class extends LS{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new oB,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const i=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;i==null||i.setFocus(),this.toggle()}}loadDependencies(){return YP({button:()=>ee(()=>import("./calcite-button-CKe3h7O7.js"),__vite__mapDeps([206,207,208,209,210,211,212,213,214,215,216,217]))})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var n,s;const t=((n=this.viewModel)==null?void 0:n.state)==="disabled",r=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",i=this.messages.toggle;return Li("div",{class:this.classes(v5.base,_o.widget,{[v5.isLayoutHorizontal]:this.layout==="horizontal"})},Li("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:r?"outline-fill":"solid",class:_o.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),Li("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:r?"solid":"outline-fill",class:_o.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};u([d()],Ko.prototype,"icon",null),u([d()],Ko.prototype,"label",null),u([d({value:"vertical"})],Ko.prototype,"layout",null),u([d(),NS("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Ko.prototype,"messages",void 0),u([d()],Ko.prototype,"view",null),u([d({type:oB})],Ko.prototype,"viewModel",void 0),Ko=u([T("esri.widgets.NavigationToggle")],Ko);const Uve=Ko;let bc=class extends we{get canZoomIn(){var i,n,s;if(!((i=this.view)==null?void 0:i.ready))return!1;const r=(s=(n=this.view)==null?void 0:n.constraints)==null?void 0:s.effectiveMaxScale;return r===0||this._scale>r}get canZoomOut(){var n;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const i=(n=t.constraints)==null?void 0:n.effectiveMinScale;return i===0||this._scale<i}get _scale(){var r,i,n;const t=(i=(r=this.view)==null?void 0:r.animation)==null?void 0:i.target;return(t&&"then"in t||t==null?void 0:t.scale)??((n=this.view)==null?void 0:n.scale)??0}};u([d({readOnly:!0})],bc.prototype,"canZoomIn",null),u([d({readOnly:!0})],bc.prototype,"canZoomOut",null),u([d()],bc.prototype,"view",void 0),u([d()],bc.prototype,"_scale",null),bc=u([T("esri.widgets.Zoom.ZoomConditions2D")],bc);const Gve=bc;let Ip=class extends we{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};u([d({readOnly:!0})],Ip.prototype,"canZoomIn",null),u([d({readOnly:!0})],Ip.prototype,"canZoomOut",null),u([d()],Ip.prototype,"view",void 0),Ip=u([T("esri.widgets.Zoom.ZoomConditions3D")],Ip);const qve=Ip;let bl=class extends we{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new Gve({view:t}):t.type==="3d"&&(this._zoomConditions=new qve({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():xT(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():xT(t.goTo({zoomFactor:.5}))}};u([d()],bl.prototype,"_zoomConditions",void 0),u([d()],bl.prototype,"canZoomIn",null),u([d()],bl.prototype,"canZoomOut",null),u([d({readOnly:!0})],bl.prototype,"state",null),u([d()],bl.prototype,"view",null),bl=u([T("esri.widgets.Zoom.ZoomViewModel")],bl);const aB=bl,w5={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Yo=class extends LS{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new aB,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return YP({button:()=>ee(()=>import("./calcite-button-CKe3h7O7.js"),__vite__mapDeps([206,207,208,209,210,211,212,213,214,215,216,217]))})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[w5.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return Li("div",{class:this.classes(w5.base,_o.widget,t)},Li("calcite-button",{class:_o.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),Li("calcite-button",{class:_o.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};u([d()],Yo.prototype,"icon",null),u([d()],Yo.prototype,"label",null),u([d({value:"vertical"})],Yo.prototype,"layout",null),u([d(),NS("esri/widgets/Zoom/t9n/Zoom")],Yo.prototype,"messages",void 0),u([d()],Yo.prototype,"view",null),u([d({type:aB})],Yo.prototype,"viewModel",void 0),Yo=u([T("esri.widgets.Zoom")],Yo);const Bve=Yo;function Hve(e){return(e==null?void 0:e.view)!==void 0}let uw=class extends cge{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=r=>{this.components.forEach(i=>{const n=this._find(i),s=n==null?void 0:n.widget;Hve(s)&&(s.view=r)})},this._componentsWatcher=(r,i)=>{this._removeComponents(i),this._addComponents(r),this._adjustPadding(r)}}initialize(){this.addHandles([xe(()=>this.components,this._componentsWatcher,wi),xe(()=>this.view,this._updateViewAwareWidgets,wi)])}_add(t,r,i,n,s){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,r,i,n,s)}_removeComponents(t){t.forEach(r=>{const i=this._find(r);i&&(this.remove(i),i.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(t){this.constructed&&t.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))}_createComponent(t){const r=this._createWidget(t);return new lw({id:t,node:r})}_createWidget(t){const r=this.view;switch(t){case"attribution":return new Dve({view:r});case"compass":return new Vve({view:r});case"navigation-toggle":return new Uve({view:r});case"zoom":return new Bve({view:r})}}};u([d()],uw.prototype,"components",void 0),uw=u([T("esri.views.ui.DefaultUI")],uw);const lB=uw;let cw=class extends lB{constructor(t){super(t),this.components=["attribution","zoom"]}};u([d()],cw.prototype,"components",void 0),cw=u([T("esri.views.ui.2d.DefaultUI2D")],cw);const uB=cw;function b5(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}var w3;let dw=w3=class extends q{constructor(e){super(e),this.color=new Se([0,0,0,1])}clone(){return new w3(C({color:this.color}))}};u([d({type:Se,json:{write:!0}})],dw.prototype,"color",void 0),dw=w3=u([T("esri.webmap.background.ColorBackground")],dw);const Wve=dw;let cB,dB,pB,hB,fB,mB;async function Zve(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:n,Stage:s}]=await Promise.all([ee(()=>import("./webglDeps-BSGJdtVw.js"),__vite__mapDeps([133,75,74,45,134,135])),ee(()=>import("./mapViewDeps-BWar8D2q.js"),__vite__mapDeps([136,76,77,23,78,73,70,79,72,74,45,75,46,80,40,81,137,110,84,85,86,87,138,139,135,95,119,118,25,26,117,133,134,140,90,141,71,32,29,20,142,143,144,112,145,146,147,61,148,88,149,83,150,151,152,153,154,155,156]))]);dB=e,pB=t,hB=r,fB=i,mB=n,cB=s}let Te=class extends Wle(Sce(lce(Ohe))){constructor(t){super(t),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new v0({getCollections:()=>{var r,i;return[(r=this.basemapView)==null?void 0:r.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new ow({view:this}),this.graphicsView=null,this.stateManager=new di({constraints:new mq({view:this})}),this.stationaryManager=new Xm,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new Mye(this),this.floors=new ce,this.highlightOptions=new xq,this.inputManager=new b0e({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new kq,this.type="2d",this.ui=new uB,this.test={takeScreenshot:async r=>B0e(this._getScreenshotView(r),r)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([xe(()=>this.viewpoint,()=>this.stationaryManager.flip(),du),this.on("resize",r=>this.stateManager.resize(r.width,r.height))]),lle()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=xt(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new I0e(this.featuresTilingScheme)}get constraintsInfo(){var i,n;const t=(i=this.defaultsFromMap)==null?void 0:i.tileInfo,r=this.spatialReference;return{lods:(n=t==null?void 0:t.spatialReference)!=null&&n.equals(r)?t.lods:null,spatialReference:r}}get state(){return this.stateManager.state}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:t,constraints:r,center:i,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(r!=null&&r.effectiveLODs||(o=-1),(!i||t===0&&o===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const r=t.targetGeometry,i=this.spatialReference;return x7(r.spatialReference,i)}set animation(t){const r=this._get("animation");if(t===r)return;if(r&&r.stop(),t!==this.animationManager.animation&&this.animationManager.stop(),!t||t.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",t),this.frameTask.animationInProgress=!0;const i=()=>{var n;this.destroyed||(t===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame()),this.frameTask.animationInProgress=!1)};t.when(i,i)}get background(){return b5(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get constraints(){var t;return(t=this.stateManager)==null?void 0:t.constraints}set constraints(t){t.view=this;const r=this.stateManager.constraints;this.stateManager.constraints=t,r==null||r.destroy()}get extent(){var t;return((t=this.stateManager)==null?void 0:t.extent)??null}set extent(t){this.stateManager.extent=t}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){var t;return((t=this.stage)==null?void 0:t.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(t){this.stateManager.resizeAlign=t}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(t){const{rotationEnabled:r}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=t,this.constraints.rotationEnabled=r}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){var t;return(t=this.featuresTilingScheme)==null?void 0:t.tileInfo}get updating(){var i,n,s,o;const t=!(!this.magnifier.visible||this.magnifier.position===null||!((i=this._magnifierView)!=null&&i.updatingHandles.updating)),r=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0)||t);if(F("esri-2d-log-updating")){const a=this.allLayerViews.reduce((l,c)=>({...l,[`${c.layer.id}(${c.layer.type})`]:!c.destroyed&&!("layerViews"in c)&&c.updating}),{});console.log(`Updating MapView: ${r}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(a)}
-> updatingMagnifier: ${t}
`)}return r}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(t){this.stateManager.viewpoint=t,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){var t;return((t=this.mapViewNavigation)==null?void 0:t.interacting)??!1}goTo(t,r){return this.goToManager.goTo(t,r)}async hitTest(t,r){return P0e(this,t,r)}async takeScreenshot(t){return q0e(this._getScreenshotView(t),t)}toMap(t){if(!this.ready)return null;const r=fG(t)?hG(this,t):t;return this.stateManager.toMap(r)}toScreen(t,r){return this.stateManager.toScreen(t,r)}on(t,r,i,n){return this.inputManager&&this.viewEvents.on(t,r,i,n)||super.on(t,r)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t,r,i;return this.map&&"initialViewProperties"in this.map&&((r=(t=this.map)==null?void 0:t.initialViewProperties)==null?void 0:r.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}getDefaultTimeZone(){return b5(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(t){return kN.hasLayerViewModule(t)}importLayerView(t){return kN.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(H.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(t){var c;const r=this.toMap(t),i=await this.hitTest(t),n=this.allLayerViews.toArray().reverse(),s=new globalThis.Map(n.map(h=>[h.layer.uid,h])),o=[];let a=0,l=0;for(;a<i.results.length||l<n.length;){const h=i.results.at(a);if(h&&h.type!=="graphic"){++a;continue}const f=s.get((c=(h==null?void 0:h.layer)??(h==null?void 0:h.graphic.layer))==null?void 0:c.uid);if((!h||f)&&l<n.length&&n.at(l)!==f){const m=n.at(l);"fetchPopupFeaturesAtLocation"in m&&o.push({mapPoint:r,layerView:m}),++l}else h&&(o.push({graphic:h.graphic,layerView:f}),++a)}return{hits:o,location:r}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=ege(this.type);if(F("safari")&&F("safari")<9&&(t=new D("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:F("safari")})),t!=null)throw H.getLogger(this).warn("#validate()",t.message),t}loadAsyncDependencies(){return Zve()}_getDefaultViewpoint(){var b;const{constraints:t,initialExtent:r,map:i,padding:n,size:s}=this;if(!t)return null;const o=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o==null?void 0:o.viewpoint,c=((b=l==null?void 0:l.targetGeometry)==null?void 0:b.extent)??r,h=c==null?void 0:c.center,f=(l==null?void 0:l.rotation)??0,m=(l==null?void 0:l.scale)||c&&CS(c,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),y=a.center??h,g=a.rotation??f,v=a.scale??m;return y&&v?new Es({targetGeometry:y,scale:v,rotation:g}):null}_startup(){var a;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(a=this.defaultsFromMap.extent)==null?void 0:a.center),this.graphics.owner=this;const r=new cB(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=r,this._magnifierView=new mB,this._magnifierView.magnifier=this.magnifier;const i=new hB({view:this});this._set("labelManager",i);const n=new Tye({view:this});this._set("animationManager",n);const s=new fB({view:this,animationManager:n});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",l=>this.fatalError=l.error),xe(()=>this.stationary,l=>r.stationary=l,Ln),xe(()=>this.background,l=>{r.backgroundColor=l==null?void 0:l.color,this._magnifierView.backgroundColor=l==null?void 0:l.color},Ln),xe(()=>this.magnifier,l=>this._magnifierView.magnifier=l,Ln),xe(()=>this.renderingOptions,l=>r.renderingOptions=l,Ln),xe(()=>this.highlightOptions,l=>r.highlightOptions=l,Ln),xe(()=>this.state.id,()=>r.state=this.state,Ln)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(r=>{this.stage.addChild(r.container)});const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const t=new Aye(Ble.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const r=new dB({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new pB(t)});this._set("graphicsView",r)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){var o;const{allLayerViews:r,padding:i,size:n,stage:s}=this;return{allLayerViews:r,backgroundColor:t!=null&&t.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:i,size:n,stage:s}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const r of this.allLayerViews)r.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const r of this.allLayerViews)r.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};Te.type="2d",u([d({readOnly:!0})],Te.prototype,"animationManager",void 0),u([d({constructOnly:!0})],Te.prototype,"deactivatedWebGLExtensions",void 0),u([d({constructOnly:!0})],Te.prototype,"debugWebGLExtensions",void 0),u([d({readOnly:!0})],Te.prototype,"featuresTilingScheme",void 0),u([d({readOnly:!0})],Te.prototype,"fullOpacity",void 0),u([d()],Te.prototype,"goToManager",void 0),u([d({readOnly:!0})],Te.prototype,"graphicsTileStore",null),u([d()],Te.prototype,"graphicsView",void 0),u([d()],Te.prototype,"stateManager",void 0),u([d()],Te.prototype,"constraintsInfo",null),u([d({readOnly:!0})],Te.prototype,"state",null),u([d()],Te.prototype,"initialExtentRequired",null),u([d()],Te.prototype,"labelManager",void 0),u([d({readOnly:!0})],Te.prototype,"mapViewNavigation",void 0),u([d({constructOnly:!0})],Te.prototype,"renderCanvas",void 0),u([d()],Te.prototype,"renderingOptions",void 0),u([d({constructOnly:!0})],Te.prototype,"supersampleScreenshotsEnabled",void 0),u([d({readOnly:!0})],Te.prototype,"supportsGround",void 0),u([d()],Te.prototype,"_defaultsFromMapSettings",null),u([d({readOnly:!0})],Te.prototype,"typeSpecificPreconditionsReady",null),u([d()],Te.prototype,"animation",null),u([d({type:Wve})],Te.prototype,"background",null),u([d()],Te.prototype,"center",null),u([d({type:mq})],Te.prototype,"constraints",null),u([d()],Te.prototype,"extent",null),u([d()],Te.prototype,"floors",void 0),u([d({type:xq})],Te.prototype,"highlightOptions",void 0),u([d({readOnly:!0})],Te.prototype,"inputManager",void 0),u([d()],Te.prototype,"map",void 0),u([d()],Te.prototype,"padding",null),u([d({readOnly:!0})],Te.prototype,"rendering",null),u([d()],Te.prototype,"resizeAlign",null),u([d({readOnly:!0})],Te.prototype,"resolution",null),u([d()],Te.prototype,"rotation",null),u([d()],Te.prototype,"scale",null),u([d({constructOnly:!0})],Te.prototype,"spatialReferenceLocked",void 0),u([d()],Te.prototype,"stationary",null),u([d({readOnly:!0})],Te.prototype,"tileInfo",null),u([d({type:kq,readOnly:!0})],Te.prototype,"timeline",void 0),u([d({readOnly:!0})],Te.prototype,"type",void 0),u([d({readOnly:!0})],Te.prototype,"updating",null),u([d()],Te.prototype,"viewpoint",null),u([d()],Te.prototype,"zoom",null),u([d({readOnly:!0})],Te.prototype,"navigating",null),u([d(),et(e=>e instanceof lB?e:B_(uB,e))],Te.prototype,"ui",void 0),Te=u([T("esri.views.MapView")],Te);const Jve=Te;var _5,S5,yB={exports:{}};S5=function(){function e(n,s){function o(){this.constructor=n}o.prototype=s.prototype,n.prototype=new o}function t(n,s,o,a){var l=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(l,t.prototype),l.expected=s,l.found=o,l.location=a,l.name="SyntaxError",l}function r(n,s,o){return o=o||" ",n.length>s?n:(s-=n.length,n+(o+=o.repeat(s)).slice(0,s))}function i(n,s){var o,a={},l=(s=s!==void 0?s:{}).grammarSource,c={start:Rt},h=Rt,f="none",m=")",y=",",g="(",v="%",b="px",w="cm",_="mm",$="in",E="pt",k="pc",M="deg",P="rad",N="grad",j="turn",G="#",W=".",ie="e",me=/^[ \t\n\r]/,ne=/^[a-z\-]/,nt=/^[0-9a-fA-F]/,Xt=/^[+\-]/,Ie=/^[0-9]/,K=je("none"),be=he("none",!1),Ee=he(")",!1),Ge=he(",",!1),pt=je("whitespace"),qi=ge([" ","	",`
`,"\r"],!1,!1),lr=je("function"),Bi=he("(",!1),Or=je("identifier"),Po=ge([["a","z"],"-"],!1,!1),Ef=je("percentage"),QS=he("%",!1),XS=je("length"),e2=he("px",!1),Pr=he("cm",!1),Da=he("mm",!1),$g=he("in",!1),t2=he("pt",!1),Co=he("pc",!1),r2=je("angle"),i2=he("deg",!1),xg=he("rad",!1),n2=he("grad",!1),s2=he("turn",!1),o2=je("number"),a2=je("color"),Au=he("#",!1),ja=ge([["0","9"],["a","f"],["A","F"]],!1,!1),If=ge(["+","-"],!1,!1),gn=ge([["0","9"]],!1,!1),Ns=he(".",!1),Kn=he("e",!1),Tg=function(){return[]},Vd=function(I,V){return{type:"function",name:I,parameters:V||[]}},l2=function(I,V){return V.length>0?f2(I,V,3):[I]},Fs=function(I){return{type:"quantity",value:I.value,unit:I.unit}},Mg=function(I){return{type:"color",colorType:I.type,value:I.value}},Eg=function(I){return I},Ig=function(){return te()},u2=function(I){return{value:I,unit:"%"}},kg=function(I){return{value:I,unit:"px"}},Ud=function(I){return{value:I,unit:"cm"}},Og=function(I){return{value:I,unit:"mm"}},kf=function(I){return{value:I,unit:"in"}},Gd=function(I){return{value:I,unit:"pt"}},Of=function(I){return{value:I,unit:"pc"}},c2=function(I){return{value:I,unit:"deg"}},Pg=function(I){return{value:I,unit:"rad"}},d2=function(I){return{value:I,unit:"grad"}},Cg=function(I){return{value:I,unit:"turn"}},Pf=function(I){return{value:I,unit:null}},qd=function(){return{type:"hex",value:te()}},p2=function(I){return{type:"function",value:I}},h2=function(){return{type:"named",value:te()}},O=function(){return parseFloat(te())},x=0,L=0,U=[{line:1,column:1}],re=0,de=[],B=0;if("startRule"in s){if(!(s.startRule in c))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');h=c[s.startRule]}function te(){return n.substring(L,x)}function he(I,V){return{type:"literal",text:I,ignoreCase:V}}function ge(I,V,Z){return{type:"class",parts:I,inverted:V,ignoreCase:Z}}function $e(){return{type:"end"}}function je(I){return{type:"other",description:I}}function qe(I){var V,Z=U[I];if(Z)return Z;for(V=I-1;!U[V];)V--;for(Z={line:(Z=U[V]).line,column:Z.column};V<I;)n.charCodeAt(V)===10?(Z.line++,Z.column=1):Z.column++,V++;return U[I]=Z,Z}function tt(I,V,Z){var Ne=qe(I),er=qe(V);return{source:l,start:{offset:I,line:Ne.line,column:Ne.column},end:{offset:V,line:er.line,column:er.column}}}function se(I){x<re||(x>re&&(re=x,de=[]),de.push(I))}function ur(I,V,Z){return new t(t.buildMessage(I,V),I,V,Z)}function Rt(){var I;return(I=Lu())===a&&(I=Ds()),I}function Lu(){var I,V;return B++,I=x,st(),n.substr(x,4)===f?(V=f,x+=4):(V=a,B===0&&se(be)),V!==a?(st(),L=I,I=Tg()):(x=I,I=a),B--,I===a&&B===0&&se(K),I}function Ds(){var I,V;if(I=[],(V=js())!==a)for(;V!==a;)I.push(V),V=js();else I=a;return I}function js(){var I,V,Z,Ne;return I=x,st(),(V=Bd())!==a?(st(),(Z=za())===a&&(Z=null),st(),n.charCodeAt(x)===41?(Ne=m,x++):(Ne=a,B===0&&se(Ee)),Ne!==a?(st(),L=I,I=Vd(V,Z)):(x=I,I=a)):(x=I,I=a),I}function za(){var I,V,Z,Ne,er,At,vn,Ag;if(I=x,(V=zs())!==a){for(Z=[],Ne=x,er=st(),n.charCodeAt(x)===44?(At=y,x++):(At=a,B===0&&se(Ge)),At===a&&(At=null),vn=st(),(Ag=zs())!==a?Ne=er=[er,At,vn,Ag]:(x=Ne,Ne=a);Ne!==a;)Z.push(Ne),Ne=x,er=st(),n.charCodeAt(x)===44?(At=y,x++):(At=a,B===0&&se(Ge)),At===a&&(At=null),vn=st(),(Ag=zs())!==a?Ne=er=[er,At,vn,Ag]:(x=Ne,Ne=a);L=I,I=l2(V,Z)}else x=I,I=a;return I}function zs(){var I,V;return I=x,(V=Hd())===a&&(V=Le())===a&&(V=Mt())===a&&(V=oi()),V!==a&&(L=I,V=Fs(V)),(I=V)===a&&(I=x,(V=lt())!==a&&(L=I,V=Mg(V)),I=V),I}function st(){var I,V;for(B++,I=[],me.test(n.charAt(x))?(V=n.charAt(x),x++):(V=a,B===0&&se(qi));V!==a;)I.push(V),me.test(n.charAt(x))?(V=n.charAt(x),x++):(V=a,B===0&&se(qi));return B--,V=a,B===0&&se(pt),I}function Bd(){var I,V,Z;return B++,I=x,(V=Nu())!==a?(n.charCodeAt(x)===40?(Z=g,x++):(Z=a,B===0&&se(Bi)),Z!==a?(L=I,I=Eg(V)):(x=I,I=a)):(x=I,I=a),B--,I===a&&(V=a,B===0&&se(lr)),I}function Nu(){var I,V,Z;if(B++,I=x,V=[],ne.test(n.charAt(x))?(Z=n.charAt(x),x++):(Z=a,B===0&&se(Po)),Z!==a)for(;Z!==a;)V.push(Z),ne.test(n.charAt(x))?(Z=n.charAt(x),x++):(Z=a,B===0&&se(Po));else V=a;return V!==a&&(L=I,V=Ig()),B--,(I=V)===a&&(V=a,B===0&&se(Or)),I}function Hd(){var I,V,Z;return B++,I=x,st(),(V=Gt())!==a?(n.charCodeAt(x)===37?(Z=v,x++):(Z=a,B===0&&se(QS)),Z!==a?(L=I,I=u2(V)):(x=I,I=a)):(x=I,I=a),B--,I===a&&B===0&&se(Ef),I}function Le(){var I,V,Z;return B++,I=x,st(),(V=Gt())!==a?(n.substr(x,2)===b?(Z=b,x+=2):(Z=a,B===0&&se(e2)),Z!==a?(L=I,I=kg(V)):(x=I,I=a)):(x=I,I=a),I===a&&(I=x,st(),(V=Gt())!==a?(n.substr(x,2)===w?(Z=w,x+=2):(Z=a,B===0&&se(Pr)),Z!==a?(L=I,I=Ud(V)):(x=I,I=a)):(x=I,I=a),I===a&&(I=x,st(),(V=Gt())!==a?(n.substr(x,2)===_?(Z=_,x+=2):(Z=a,B===0&&se(Da)),Z!==a?(L=I,I=Og(V)):(x=I,I=a)):(x=I,I=a),I===a&&(I=x,st(),(V=Gt())!==a?(n.substr(x,2)===$?(Z=$,x+=2):(Z=a,B===0&&se($g)),Z!==a?(L=I,I=kf(V)):(x=I,I=a)):(x=I,I=a),I===a&&(I=x,st(),(V=Gt())!==a?(n.substr(x,2)===E?(Z=E,x+=2):(Z=a,B===0&&se(t2)),Z!==a?(L=I,I=Gd(V)):(x=I,I=a)):(x=I,I=a),I===a&&(I=x,st(),(V=Gt())!==a?(n.substr(x,2)===k?(Z=k,x+=2):(Z=a,B===0&&se(Co)),Z!==a?(L=I,I=Of(V)):(x=I,I=a)):(x=I,I=a)))))),B--,I===a&&B===0&&se(XS),I}function Mt(){var I,V,Z;return B++,I=x,(V=Gt())!==a?(n.substr(x,3)===M?(Z=M,x+=3):(Z=a,B===0&&se(i2)),Z!==a?(L=I,I=c2(V)):(x=I,I=a)):(x=I,I=a),I===a&&(I=x,(V=Gt())!==a?(n.substr(x,3)===P?(Z=P,x+=3):(Z=a,B===0&&se(xg)),Z!==a?(L=I,I=Pg(V)):(x=I,I=a)):(x=I,I=a),I===a&&(I=x,(V=Gt())!==a?(n.substr(x,4)===N?(Z=N,x+=4):(Z=a,B===0&&se(n2)),Z!==a?(L=I,I=d2(V)):(x=I,I=a)):(x=I,I=a),I===a&&(I=x,(V=Gt())!==a?(n.substr(x,4)===j?(Z=j,x+=4):(Z=a,B===0&&se(s2)),Z!==a?(L=I,I=Cg(V)):(x=I,I=a)):(x=I,I=a)))),B--,I===a&&(V=a,B===0&&se(r2)),I}function oi(){var I,V;return B++,I=x,st(),(V=Gt())!==a?(L=I,I=Pf(V)):(x=I,I=a),B--,I===a&&B===0&&se(o2),I}function lt(){var I,V,Z,Ne;if(B++,I=x,n.charCodeAt(x)===35?(V=G,x++):(V=a,B===0&&se(Au)),V!==a){if(Z=[],nt.test(n.charAt(x))?(Ne=n.charAt(x),x++):(Ne=a,B===0&&se(ja)),Ne!==a)for(;Ne!==a;)Z.push(Ne),nt.test(n.charAt(x))?(Ne=n.charAt(x),x++):(Ne=a,B===0&&se(ja));else Z=a;Z!==a?(L=I,I=qd()):(x=I,I=a)}else x=I,I=a;return I===a&&(I=x,(V=js())!==a&&(L=I,V=p2(V)),(I=V)===a&&(I=x,(V=Nu())!==a&&(L=I,V=h2()),I=V)),B--,I===a&&(V=a,B===0&&se(a2)),I}function Gt(){var I,V,Z,Ne,er,At,vn;for(I=x,Xt.test(n.charAt(x))?(n.charAt(x),x++):B===0&&se(If),V=x,Z=[],Ie.test(n.charAt(x))?(Ne=n.charAt(x),x++):(Ne=a,B===0&&se(gn));Ne!==a;)Z.push(Ne),Ie.test(n.charAt(x))?(Ne=n.charAt(x),x++):(Ne=a,B===0&&se(gn));if(n.charCodeAt(x)===46?(Ne=W,x++):(Ne=a,B===0&&se(Ns)),Ne!==a){if(er=[],Ie.test(n.charAt(x))?(At=n.charAt(x),x++):(At=a,B===0&&se(gn)),At!==a)for(;At!==a;)er.push(At),Ie.test(n.charAt(x))?(At=n.charAt(x),x++):(At=a,B===0&&se(gn));else er=a;er!==a?V=Z=[Z,Ne,er]:(x=V,V=a)}else x=V,V=a;if(V===a)if(V=[],Ie.test(n.charAt(x))?(Z=n.charAt(x),x++):(Z=a,B===0&&se(gn)),Z!==a)for(;Z!==a;)V.push(Z),Ie.test(n.charAt(x))?(Z=n.charAt(x),x++):(Z=a,B===0&&se(gn));else V=a;if(V!==a){if(Z=x,n.charCodeAt(x)===101?(Ne=ie,x++):(Ne=a,B===0&&se(Kn)),Ne!==a){if(Xt.test(n.charAt(x))?(er=n.charAt(x),x++):(er=a,B===0&&se(If)),er===a&&(er=null),At=[],Ie.test(n.charAt(x))?(vn=n.charAt(x),x++):(vn=a,B===0&&se(gn)),vn!==a)for(;vn!==a;)At.push(vn),Ie.test(n.charAt(x))?(vn=n.charAt(x),x++):(vn=a,B===0&&se(gn));else At=a;At!==a?Z=Ne=[Ne,er,At]:(x=Z,Z=a)}else x=Z,Z=a;Z===a&&(Z=null),L=I,I=O()}else x=I,I=a;return I}function Rg(I,V){return I.map(function(Z){return Z[V]})}function f2(I,V,Z){return[I].concat(Rg(V,Z))}if((o=h())!==a&&x===n.length)return o;throw o!==a&&x<n.length&&se($e()),ur(de,re<n.length?n.charAt(re):null,re<n.length?tt(re,re+1):tt(re,re))}return e(t,Error),t.prototype.format=function(n){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<n.length;o++)if(n[o].source===this.location.source){a=n[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,h=this.location.source+":"+c.line+":"+c.column;if(a){var f=this.location.end,m=r("",c.line.toString().length," "),y=a[l.line-1],g=(l.line===f.line?f.column:y.length+1)-l.column||1;s+=`
 --> `+h+`
`+m+` |
`+c.line+" | "+y+`
`+m+" | "+r("",l.column-1," ")+r("",g,"^")}else s+=`
 at `+h}return s},t.buildMessage=function(n,s){var o={literal:function(y){return'"'+l(y.text)+'"'},class:function(y){var g=y.parts.map(function(v){return Array.isArray(v)?c(v[0])+"-"+c(v[1]):c(v)});return"["+(y.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(y){return y.description}};function a(y){return y.charCodeAt(0).toString(16).toUpperCase()}function l(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function c(y){return y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function h(y){return o[y.type](y)}function f(y){var g,v,b=y.map(h);if(b.sort(),b.length>0){for(g=1,v=1;g<b.length;g++)b[g-1]!==b[g]&&(b[v]=b[g],v++);b.length=v}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function m(y){return y?'"'+l(y)+'"':"end of input"}return"Expected "+f(n)+" but "+m(s)+" found."},{SyntaxError:t,parse:i}},(_5=yB).exports&&(_5.exports=S5());var Kve=yB.exports;function gB(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=$5(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new D("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:$5(r.value)}});t.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!Rne(t[r].effects,t[r+1].effects))throw new D("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});Ane(t[r].effects,t[r+1].effects)}return t.sort((r,i)=>i.scale-r.scale),t}function $5(e){let t;if(!e)return[];try{t=Kve.parse(e)}catch(r){throw new D("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>Yve(r))}function Yve(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Qve(e);case"opacity":return Xve(e);case"hue-rotate":return e1e(e);case"blur":return t1e(e);case"drop-shadow":return r1e(e);case"bloom":return i1e(e)}}catch(t){throw t.details.filter=e,t}throw new D("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function Qve(e){let t=1;return _f(e.parameters,1),e.parameters.length===1&&(t=bs(e.parameters[0])),new lM(e.name,t)}function Xve(e){let t=1;return _f(e.parameters,1),e.parameters.length===1&&(t=bs(e.parameters[0])),new P9(t)}function e1e(e){let t=0;return _f(e.parameters,1),e.parameters.length===1&&(t=u1e(e.parameters[0])),new k9(t)}function t1e(e){let t=0;return _f(e.parameters,1),e.parameters.length===1&&(t=eC(e.parameters[0]),mg(t,e.parameters[0])),new x9(t)}function r1e(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new D("effect:type-error","Accepts only one color",{});r=c1e(i)}else{const n=eC(i);if(Object.isFrozen(t))throw new D("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&mg(n,i)}if(t.length<2||t.length>3)throw new D("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new E9(t[0],t[1],t[2]||0,r||vB("black"))}function i1e(e){let t=1,r=0,i=0;return _f(e.parameters,3),e.parameters[0]&&(t=bs(e.parameters[0])),e.parameters[1]&&(r=eC(e.parameters[1]),mg(r,e.parameters[1])),e.parameters[2]&&(i=bs(e.parameters[2])),new S9(t,r,i)}function _f(e,t){if(e.length>t)throw new D("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function FS(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in XP)return"<length>";if(e.unit in QP)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function mg(e,t){if(e<0)throw new D("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function n1e(e){if(e.type!=="quantity"||e.unit!==null)throw new D("effect:type-error",`Expected <double>, Actual: ${FS(e)}`,{term:e})}function s1e(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new D("effect:type-error",`Expected <double> or <percentage>, Actual: ${FS(e)}`,{term:e})}const QP={deg:1,grad:.9,rad:180/Math.PI,turn:360};function o1e(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&QP[e.unit]!=null))throw new D("effect:type-error",`Expected <angle>, Actual: ${FS(e)}`,{term:e})}const XP={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function a1e(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&XP[e.unit]!=null))throw new D("effect:type-error",`Expected <length>, Actual: ${FS(e)}`,{term:e})}function bs(e){s1e(e);const t=e.value;return mg(t,e),e.unit==="%"?.01*t:t}function l1e(e){return n1e(e),mg(e.value,e),e.value}function u1e(e){return o1e(e),e.value*QP[e.unit]||0}function eC(e){return a1e(e),e.value*XP[e.unit]||0}function c1e(e){switch(e.colorType){case"hex":return kre(e.value);case"named":return vB(e.value);case"function":return h1e(e.value)}}function vB(e){if(!Zz(e))throw new D("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Ire(e)}const d1e=/^rgba?/i,p1e=/^hsla?/i;function h1e(e){if(_f(e.parameters,4),d1e.test(e.name))return[bs(e.parameters[0]),bs(e.parameters[1]),bs(e.parameters[2]),e.parameters[3]?bs(e.parameters[3]):1];if(p1e.test(e.name))return Jz(l1e(e.parameters[0]),bs(e.parameters[1]),bs(e.parameters[2]),e.parameters[3]?bs(e.parameters[3]):1);throw new D("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function P0(e,t,r){var i;try{return m1e(e)}catch(n){(i=r==null?void 0:r.messages)==null||i.push(n)}return null}function C0(e,t,r,i){try{const n=f1e(e);ri(r,n,t)}catch(n){i.messages&&i.messages.push(n)}}function f1e(e){const t=gB(e);return t?Lne(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:i})=>({scale:r,value:i.map(n=>n.toJSON())})):null}function m1e(e){if(!e||e.length===0)return null;if(y1e(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:x5(r.value)});return t}return x5(e)}function y1e(e){const t=e[0];return!!t&&"scale"in t}function x5(e){if(!(e!=null&&e.length))return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[jo(r,"amount")];break;case"blur":i=[jo(r,"radius","pt")];break;case"hue-rotate":i=[jo(r,"angle","deg")];break;case"drop-shadow":i=[jo(r,"xoffset","pt"),jo(r,"yoffset","pt"),jo(r,"blurRadius","pt"),g1e(r,"color")];break;case"bloom":i=[jo(r,"strength"),jo(r,"radius","pt"),jo(r,"threshold")]}const n=`${r.type}(${i.filter(Boolean).join(" ")})`;gB(n),t.push(n)}return t.join(" ")}function jo(e,t,r){if(e[t]==null)throw new D("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function g1e(e,t){if(e[t]==null)throw new D("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const v1e={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},T5={read:{reader:P0},write:{allowNull:!0,writer:C0}},w1e={json:{read:!1,write:!1,origins:{"web-map":T5,"portal-item":T5}}},wB=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([d(v1e)],t.prototype,"blendMode",void 0),u([d(w1e)],t.prototype,"effect",void 0),t=u([T("esri.layers.mixins.BlendLayer")],t),t},bB=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&b1e(r,i.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===r.minScale&&n.maxScale===r.maxScale?n:r}};return u([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),u([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),u([d({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=u([T("esri.layers.mixins.ScaleRangeLayer")],t),t};function b1e(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}var b3;let ey=b3=class extends q{constructor(e){super(e)}async collectRequiredFields(e,t){return ni(e,t,this.expression)}clone(){return new b3({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};u([d({type:String,json:{write:!0}})],ey.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],ey.prototype,"title",void 0),ey=b3=u([T("esri.symbols.support.FeatureExpressionInfo")],ey);const M5=ey,tC={unknown:1,inches:_n(1,"meters","inches"),feet:_n(1,"meters","feet"),"us-feet":_n(1,"meters","us-feet"),yards:_n(1,"meters","yards"),miles:_n(1,"meters","miles"),"nautical-miles":_n(1,"meters","nautical-miles"),millimeters:_n(1,"meters","millimeters"),centimeters:_n(1,"meters","centimeters"),decimeters:_n(1,"meters","decimeters"),meters:_n(1,"meters","meters"),kilometers:_n(1,"meters","kilometers"),"decimal-degrees":1/hte(1,"meters",Vt.radius)};function Bke(e){return 1/(tC[e]||1)}function _1e(){const e=Object.keys(tC);return e.sort(),e}const S1e=_1e();var _3;const Vv=si()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),E5=new De({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Qo=_3=class extends q{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write({},i),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new _3({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&GY(this.featureExpressionInfo,e.featureExpressionInfo)}};u([d({type:M5,json:{write:!0}})],Qo.prototype,"featureExpressionInfo",void 0),u([J("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Qo.prototype,"readFeatureExpressionInfo",null),u([X("featureExpressionInfo",{featureExpressionInfo:{type:M5},"featureExpression.value":{type:[0]}})],Qo.prototype,"writeFeatureExpressionInfo",null),u([d({type:Vv.apiValues,nonNullable:!0,json:{type:Vv.jsonValues,read:Vv.read,write:{writer:Vv.write,isRequired:!0}}})],Qo.prototype,"mode",null),u([d({type:Number,json:{write:!0}})],Qo.prototype,"offset",void 0),u([d({type:S1e,json:{type:String,read:E5.read,write:E5.write}})],Qo.prototype,"unit",null),Qo=_3=u([T("esri.symbols.support.ElevationInfo")],Qo);const _B=Qo;let Xo=class extends wB(bB(rP)){constructor(t){super(t),this.elevationInfo=null,this.graphics=new nd,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}on(t,r){return super.on(t,r)}graphicChanged(t){this.emit("graphic-update",t)}};u([d({type:_B})],Xo.prototype,"elevationInfo",void 0),u([d(AM(nd,"graphics"))],Xo.prototype,"graphics",void 0),u([d({type:["show","hide"]})],Xo.prototype,"listMode",void 0),u([d()],Xo.prototype,"screenSizePerspectiveEnabled",void 0),u([d({readOnly:!0})],Xo.prototype,"type",void 0),u([d({constructOnly:!0})],Xo.prototype,"internal",void 0),Xo=u([T("esri.layers.GraphicsLayer")],Xo);const I5=Xo;var S3;let ty=S3=class extends q{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new S3({minValue:this.minValue,maxValue:this.maxValue})}};u([d({type:Number,json:{write:!0}})],ty.prototype,"minValue",void 0),u([d({type:Number,json:{write:!0}})],ty.prototype,"maxValue",void 0),ty=S3=u([T("esri.renderers.support.AuthoringInfoClassBreakInfo")],ty);var $3;let Ll=$3=class extends q{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new $3({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:C(this.classBreakInfos)})}};u([d({type:String,json:{write:!0}})],Ll.prototype,"field",void 0),u([d({type:String,json:{write:!0}})],Ll.prototype,"normalizationField",void 0),u([d({type:String,json:{write:!0}})],Ll.prototype,"label",void 0),u([d({type:[ty],json:{write:!0}})],Ll.prototype,"classBreakInfos",void 0),Ll=$3=u([T("esri.renderers.support.AuthoringInfoFieldInfo")],Ll);var x3;let kp=x3=class extends q{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new x3({label:this.label,value:this.value,size:this.size})}};u([d({type:String,json:{write:!0}})],kp.prototype,"label",void 0),u([d({type:Number,json:{write:!0}})],kp.prototype,"size",void 0),u([d({type:Number,json:{write:!0}})],kp.prototype,"value",void 0),kp=x3=u([T("esri.renderers.support.AuthoringInfoSizeStop")],kp);const $1e=kp;var T3;const Uv=new De({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),Gv=new De({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),k5={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},O5=["high-to-low","above-and-below","centered-on","extremes"],P5=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],C5=["seconds","minutes","hours","days","months","years"],x1e=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let br=T3=class extends q{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new T3({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:C(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};u([d({types:k5,json:{write:!0}})],br.prototype,"endTime",void 0),u([et("endTime")],br.prototype,"castEndTime",null),u([d({type:String,json:{write:!0}})],br.prototype,"field",void 0),u([d({type:Number,json:{write:!0}})],br.prototype,"maxSliderValue",void 0),u([d({type:Number,json:{write:!0}})],br.prototype,"minSliderValue",void 0),u([d({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],br.prototype,"normalizationField",null),u([d({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],br.prototype,"referenceSizeScale",null),u([d({type:x1e,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],br.prototype,"referenceSizeSymbolStyle",null),u([d({types:k5,json:{write:!0}})],br.prototype,"startTime",void 0),u([et("startTime")],br.prototype,"castStartTime",null),u([d({type:[$1e],json:{origins:{"web-scene":{write:!1}},write:!0}})],br.prototype,"sizeStops",null),u([d({type:Uv.apiValues,value:null,json:{type:Uv.jsonValues,read:Uv.read,write:Uv.write}})],br.prototype,"style",null),u([d({type:P5,value:null,json:{type:P5,origins:{"web-scene":{type:O5,write:{writer:(e,t)=>{O5.includes(e)&&(t.theme=e)}}}},write:!0}})],br.prototype,"theme",null),u([d({type:Gv.apiValues,json:{type:Gv.jsonValues,read:Gv.read,write:Gv.write}})],br.prototype,"type",void 0),u([d({type:C5,json:{type:C5,write:!0}})],br.prototype,"units",void 0),br=T3=u([T("esri.renderers.support.AuthoringInfoVisualVariable")],br);const T1e=br;let pw=class extends q{constructor(t){super(t),this.type=null}};u([d({readOnly:!0,json:{read:!1,write:!0}})],pw.prototype,"type",void 0),pw=u([T("esri.rest.support.ColorRamp")],pw);const rC=pw;var M3;let _c=M3=class extends rC{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new M3({fromColor:C(this.fromColor),toColor:C(this.toColor),algorithm:this.algorithm})}};u([fe({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],_c.prototype,"algorithm",void 0),u([d({type:Se,json:{type:[it],write:!0}})],_c.prototype,"fromColor",void 0),u([d({type:Se,json:{type:[it],write:!0}})],_c.prototype,"toColor",void 0),u([d({type:["algorithmic"]})],_c.prototype,"type",void 0),_c=M3=u([T("esri.rest.support.AlgorithmicColorRamp")],_c);const iC=_c;var E3;let ry=E3=class extends rC{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new E3({colorRamps:C(this.colorRamps)})}};u([d({type:[iC],json:{write:!0}})],ry.prototype,"colorRamps",void 0),u([d({type:["multipart"]})],ry.prototype,"type",void 0),ry=E3=u([T("esri.rest.support.MultipartColorRamp")],ry);const SB=ry,M1e={key:"type",base:rC,typeMap:{algorithmic:iC,multipart:SB}};function E1e(e){return e!=null&&e.type?e.type==="algorithmic"?iC.fromJSON(e):e.type==="multipart"?SB.fromJSON(e):null:null}var I3;const Gu=new De({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),qv=new De({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),R5=new De({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),A5=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],I1e=["high-to-low","above-and-below","above","below"],k1e=["flow-line","wave-front"],O1e=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Lt=I3=class extends q{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?E1e(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new I3({classificationMethod:this.classificationMethod,colorRamp:C(this.colorRamp),fadeRatio:C(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(0),field1:C(this.field1),field2:C(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};u([d({type:Gu.apiValues,value:null,json:{type:Gu.jsonValues,read:Gu.read,write:Gu.write,origins:{"web-document":{default:"manual",type:Gu.jsonValues,read:Gu.read,write:Gu.write}}}})],Lt.prototype,"classificationMethod",null),u([d({types:M1e,json:{write:!0}})],Lt.prototype,"colorRamp",void 0),u([J("colorRamp")],Lt.prototype,"readColorRamp",null),u([d({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Lt.prototype,"fadeRatio",void 0),u([d({type:[String],value:null,json:{write:!0}})],Lt.prototype,"fields",null),u([d({type:Ll,value:null,json:{write:!0}})],Lt.prototype,"field1",null),u([d({type:Ll,value:null,json:{write:!0}})],Lt.prototype,"field2",null),u([d({type:k1e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Lt.prototype,"flowTheme",null),u([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Lt.prototype,"focus",null),u([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Lt.prototype,"isAutoGenerated",void 0),u([d({type:Number,value:null,json:{type:it,write:!0}})],Lt.prototype,"numClasses",null),u([d({type:A5,json:{type:A5,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Lt.prototype,"lengthUnit",void 0),u([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Lt.prototype,"maxSliderValue",void 0),u([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Lt.prototype,"minSliderValue",void 0),u([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Lt.prototype,"statistics",null),u([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Lt.prototype,"standardDeviationInterval",null),u([d({type:qv.apiValues,value:null,json:{type:qv.jsonValues,read:qv.read,write:qv.write,origins:{"web-scene":{type:R5.jsonValues,write:{writer:R5.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Lt.prototype,"type",null),u([d({type:[T1e],json:{write:!0}})],Lt.prototype,"visualVariables",void 0),u([d({type:O1e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Lt.prototype,"univariateSymbolStyle",null),u([d({type:I1e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Lt.prototype,"univariateTheme",null),Lt=I3=u([T("esri.renderers.support.AuthoringInfo")],Lt);const nC=Lt,Y$=new De({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let iy=class extends q{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,t),Array.from(r).sort()}getSymbol(t,r){}async getSymbolAsync(t,r){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};u([d({type:nC,json:{write:!0}})],iy.prototype,"authoringInfo",void 0),u([d({type:Y$.apiValues,readOnly:!0,json:{type:Y$.jsonValues,read:!1,write:{writer:Y$.write,ignoreOrigin:!0}}})],iy.prototype,"type",void 0),iy=u([T("esri.renderers.Renderer")],iy);const Na=iy;function P1e(e){var t,r;return((r=(t=e.match(C1e))==null?void 0:t[1])==null?void 0:r.replace(/\\'/g,"'"))??null}const C1e=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var k3;let Oh=k3=class extends q{constructor(){super(...arguments),this.title=null}clone(){return new k3({title:this.title})}};u([d({type:String,json:{write:!0}})],Oh.prototype,"title",void 0),Oh=k3=u([T("esri.renderers.support.LegendOptions")],Oh);var O3;let hw=O3=class extends Oh{constructor(){super(...arguments),this.showLegend=null}clone(){return new O3({title:this.title,showLegend:this.showLegend})}};u([d({type:Boolean,json:{write:!0}})],hw.prototype,"showLegend",void 0),hw=O3=u([T("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],hw);const $B=hw,Q$=new De({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let ds=class extends q{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(H.getLogger(this).error(".field: field must be a string value"),null):Y0(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};u([d()],ds.prototype,"index",void 0),u([d({type:Q$.apiValues,readOnly:!0,json:{read:Q$.read,write:Q$.write}})],ds.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],ds.prototype,"field",void 0),u([et("field")],ds.prototype,"castField",null),u([d({type:String,json:{write:!0}})],ds.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],ds.prototype,"valueExpressionTitle",void 0),u([d({readOnly:!0})],ds.prototype,"arcadeRequired",null),u([d({type:$B,json:{write:!0}})],ds.prototype,"legendOptions",void 0),ds=u([T("esri.renderers.visualVariables.VisualVariable")],ds);const yg=ds;var P3;let Sc=P3=class extends q{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new P3({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};u([d({type:Se,json:{type:[it],write:!0}})],Sc.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],Sc.prototype,"label",void 0),u([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Sc.prototype,"value",void 0),u([X("value")],Sc.prototype,"writeValue",null),Sc=P3=u([T("esri.renderers.visualVariables.support.ColorStop")],Sc);const R1e=Sc;var C3;let $c=C3=class extends yg{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){var e;return new C3({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};u([d({readOnly:!0})],$c.prototype,"cache",null),u([d({type:["color"],json:{type:["colorInfo"]}})],$c.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],$c.prototype,"normalizationField",void 0),u([d({type:[R1e],json:{write:!0}})],$c.prototype,"stops",null),$c=C3=u([T("esri.renderers.visualVariables.ColorVariable")],$c);const xB=$c;var R3;let _l=R3=class extends q{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return g0(t.transparency)}writeOpacity(e,t,r){t[r]=aS(e)}clone(){return new R3({label:this.label,opacity:this.opacity,value:this.value})}};u([d({type:String,json:{write:!0}})],_l.prototype,"label",void 0),u([d({type:Number,json:{type:it,write:{target:"transparency"}}})],_l.prototype,"opacity",void 0),u([J("opacity",["transparency"])],_l.prototype,"readOpacity",null),u([X("opacity")],_l.prototype,"writeOpacity",null),u([d({type:Number,json:{write:!0}})],_l.prototype,"value",void 0),_l=R3=u([T("esri.renderers.visualVariables.support.OpacityStop")],_l);const A1e=_l;var A3;let xc=A3=class extends yg{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){var e;return new A3({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};u([d({readOnly:!0})],xc.prototype,"cache",null),u([d({type:["opacity"],json:{type:["transparencyInfo"]}})],xc.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],xc.prototype,"normalizationField",void 0),u([d({type:[A1e],json:{write:!0}})],xc.prototype,"stops",null),xc=A3=u([T("esri.renderers.visualVariables.OpacityVariable")],xc);const TB=xc;var L3;let ea=L3=class extends yg{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,r,i){if(i!=null&&i.messages){const n=`visualVariables[${this.index}]`;i.messages.push(new D("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:i}))}}clone(){var e;return new L3({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};u([d({readOnly:!0})],ea.prototype,"cache",null),u([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],ea.prototype,"axis",void 0),u([d({type:["rotation"],json:{type:["rotationInfo"]}})],ea.prototype,"type",void 0),u([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],ea.prototype,"rotationType",void 0),u([d({type:String,json:{write:!0}})],ea.prototype,"valueExpressionTitle",void 0),u([X("web-scene","valueExpressionTitle")],ea.prototype,"writeValueExpressionTitleWebScene",null),ea=L3=u([T("esri.renderers.visualVariables.RotationVariable")],ea);const MB=ea;function L1e(e){return ze(e)}var N3;let Sl=N3=class extends q{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new N3({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};u([d({type:String,json:{write:!0}})],Sl.prototype,"label",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],Sl.prototype,"size",void 0),u([d({type:Number,json:{write:!0}})],Sl.prototype,"value",void 0),u([d({type:Boolean,json:{write:!1}})],Sl.prototype,"useMinValue",void 0),u([d({type:Boolean,json:{write:!1}})],Sl.prototype,"useMaxValue",void 0),Sl=N3=u([T("esri.renderers.visualVariables.support.SizeStop")],Sl);const fw=Sl;var F3;let mw=F3=class extends $B{constructor(){super(...arguments),this.customValues=null}clone(){var e;return new F3({title:this.title,showLegend:this.showLegend,customValues:(e=this.customValues)==null?void 0:e.slice(0)})}};u([d({type:[Number],json:{write:!0}})],mw.prototype,"customValues",void 0),mw=F3=u([T("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],mw);const N1e=mw;var Sa,mr;function ah(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function R0(e){return e!=null&&!isNaN(e)&&isFinite(e)}function EB(e){return e.valueExpression?Sa.Expression:e.field&&typeof e.field=="string"?Sa.Field:Sa.Unknown}function F1e(e,t){const r=t||EB(e),i=e.valueUnit||"unknown";return r===Sa.Unknown?mr.Constant:e.stops?mr.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?mr.ClampedLinear:i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?mr.Proportional:mr.Additive:mr.Identity:mr.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Sa||(Sa={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(mr||(mr={}));const IB=()=>H.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),DS=e=>IB().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),jS=()=>IB().error("Use of arcade expressions requires an arcade context"),L5=new ks,yw=Math.PI,kB=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function OB(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void DS("ColorVariable");const n=typeof t=="number",s=n?null:t,o=s==null?void 0:s.attributes;let a=n?t:null;const l=i.field,{ipData:c,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!l&&!h){const g=i.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if((r==null?void 0:r.arcade)==null)return void jS();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,b=v.getViewInfo(g),w=v.createExecContext(s,b,r.timeZone);if(!f){const _=v.createSyntaxTree(i.valueExpression);f=v.createFunction(_),i.cache.compiledFunc=f}a=v.executeFunction(f,w)}else o&&(a=o[l]);const m=i.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=sC(a,c);if(g){const v=g[0],b=g[1],w=v===b?i.stops[v].color:Se.blendColors(i.stops[v].color,i.stops[b].color,g[2],r!=null?r.color:void 0);return new Se(w)}}}function PB(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void DS("OpacityVariable");const n=typeof t=="number",s=n?null:t,o=s==null?void 0:s.attributes;let a=n?t:null;const l=i.field,{ipData:c,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!l&&!h){const g=i.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if((r==null?void 0:r.arcade)==null)return void jS();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,b=v.getViewInfo(g),w=v.createExecContext(s,b,r.timeZone);if(!f){const _=v.createSyntaxTree(i.valueExpression);f=v.createFunction(_),i.cache.compiledFunc=f}a=v.executeFunction(f,w)}else o&&(a=o[l]);const m=i.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=sC(a,c);if(g){const v=g[0],b=g[1];if(v===b)return i.stops[v].opacity;{const w=i.stops[v].opacity;return w+(i.stops[b].opacity-w)*g[2]}}}}function CB(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(y=>y.type==="rotation"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void DS("RotationVariable");const n=i.axis||"heading",s=n==="heading"&&i.rotationType==="arithmetic"?90:0,o=n==="heading"&&i.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,l=a==null?void 0:a.attributes,c=i.field,{hasExpression:h}=i.cache;let f=i.cache.compiledFunc,m=0;if(!c&&!h)return m;if(h){if((r==null?void 0:r.arcade)==null)return void jS();const y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,v=g.getViewInfo(y),b=g.createExecContext(a,v,r.timeZone);if(!f){const w=g.createSyntaxTree(i.valueExpression);f=g.createFunction(w),i.cache.compiledFunc=f}m=g.executeFunction(f,b)}else l&&(m=l[c]||0);return m=typeof m!="number"||isNaN(m)?null:s+o*m,m}function D1e(e,t,r){const i=typeof t=="number",n=i?null:t,s=n==null?void 0:n.attributes;let o=i?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const h=r!=null?r.scale:void 0,f=r!=null?r.view:void 0;o=h==null||f==="3d"?j1e(e):h}else if(!i)switch(e.inputValueType){case Sa.Expression:{if((r==null?void 0:r.arcade)==null)return void jS();const h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,m=f.getViewInfo(h),y=f.createExecContext(n,m,r.timeZone);if(!l){const g=f.createSyntaxTree(e.valueExpression);l=f.createFunction(g),e.cache.compiledFunc=l}o=f.executeFunction(l,y);break}case Sa.Field:s&&(o=s[e.field]);break;case Sa.Unknown:o=null}if(!R0(o))return null;if(i||!e.normalizationField)return o;const c=s?parseFloat(s[e.normalizationField]):null;return R0(c)&&c!==0?o/c:null}function j1e(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function zS(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void DS("SizeVariable");const n=AB(D1e(i,t,r),i,t,r,i.cache.ipData);return n==null||isNaN(n)?0:n}function zi(e,t,r){return e==null?null:ah(e)?zS(e,t,r):R0(e)?e:null}function RB(e,t,r){return R0(r)&&e>r?r:R0(t)&&e<t?t:e}function z1e(e,t,r,i){return e+((zi(t.minSize,r,i)||t.minDataValue)??0)}function V1e(e,t,r){const i=e.stops;let n=(i==null?void 0:i.length)&&i[0].size;return n==null&&(n=e.minSize),zi(n,t,r)}function U1e(e,t,r,i){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=zi(t.minSize,r,i),o=zi(t.maxSize,r,i),a=i!=null?i.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(s==null||o==null)return null;if(t.scaleBy==="area"&&a){const l=a==="circle",c=l?yw*(s/2)**2:s*s,h=c+n*((l?yw*(o/2)**2:o*o)-c);return l?2*Math.sqrt(h/yw):Math.sqrt(h)}return s+n*(o-s)}function G1e(e,t,r,i){const n=i!=null?i.shape:void 0,s=e/t.minDataValue,o=zi(t.minSize,r,i),a=zi(t.maxSize,r,i);let l=null;return l=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,RB(l,o,a)}function q1e(e,t,r,i,n){var l,c,h;const[s,o,a]=sC(e,n);if(s===o)return zi((l=t.stops)==null?void 0:l[s].size,r,i);{const f=zi((c=t.stops)==null?void 0:c[s].size,r,i);return f+(zi((h=t.stops)==null?void 0:h[o].size,r,i)-f)*a}}function B1e(e,t,r,i){const n=((i==null?void 0:i.resolution)??1)*tC[t.valueUnit],s=zi(t.minSize,r,i),o=zi(t.maxSize,r,i),{valueRepresentation:a}=t;let l=null;return l=a==="area"?2*Math.sqrt(e/yw)/n:a==="radius"||a==="distance"?2*e/n:e/n,RB(l,s,o)}function AB(e,t,r,i,n){switch(t.transformationType){case mr.Additive:return z1e(e,t,r,i);case mr.Constant:return V1e(t,r,i);case mr.ClampedLinear:return U1e(e,t,r,i);case mr.Proportional:return G1e(e,t,r,i);case mr.Stops:return q1e(e,t,r,i,n);case mr.RealWorldSize:return B1e(e,t,r,i);case mr.Identity:return e;case mr.Unknown:return null}}function H1e(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&r==="3d"||t))return null;const n={scale:t,view:r};let s=zi(e.minSize,L5,n),o=zi(e.maxSize,L5,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function W1e(e,t,r){if(!e.visualVariables)return;const i=[],n=[],s=[],o=[],a=[];for(const l of e.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return n.forEach(l=>{const c=OB(l,t,r);i.push({variable:l,value:c})}),s.forEach(l=>{const c=PB(l,t,r);i.push({variable:l,value:c})}),a.forEach(l=>{const c=CB(l,t,r);i.push({variable:l,value:c})}),o.forEach(l=>{const c=zS(l,t,r);i.push({variable:l,value:c})}),i.filter(l=>l.value!=null)}function sC(e,t){if(!t)return;let r=0,i=t.length-1;return t.some((n,s)=>e<n?(i=s,!0):(r=s,!1)),[r,i,(e-t[r])/(t[i]-t[r])]}function Z1e(e,t,r){const i=["proportional","proportional","proportional"];for(const n of e){const s=n.useSymbolValue?"symbol-value":zS(n,t,r);switch(n.axis){case"width":i[0]=s;break;case"depth":i[1]=s;break;case"height":i[2]=s;break;case"width-and-depth":i[0]=s,i[1]=s;break;case"all":case void 0:case null:i[0]=s,i[1]=s,i[2]=s;break;default:n.axis}}return i}const Kke=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Z1e,getColor:OB,getOpacity:PB,getRotationAngle:CB,getSize:zS,getSizeForValue:AB,getSizeFromNumberOrVariable:zi,getSizeRangeAtScale:H1e,getVisualVariableValues:W1e,viewScaleRE:kB},Symbol.toStringTag,{value:"Module"}));var D3;const Bv=new De({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),j3=new De({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function N5(e){if(e!=null)return typeof e=="string"||typeof e=="number"?L1e(e):e.type==="size"?ah(e)?e:(delete(e={...e}).type,new Ke(e)):void 0}function F5(e,t,r){if(typeof e!="object")return e;const i=new Ke;return i.read(e,r),i}let Ke=D3=class extends yg{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&kB.test(this.valueExpression)}}set index(e){ah(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),ah(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return EB(this)}set maxDataValue(e){e&&this.stops&&(H.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(H.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return N5(e)}readMaxSize(e,t,r){return F5(e,t,r)}set minDataValue(e){e&&this.stops&&(H.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(H.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return N5(e)}readMinSize(e,t,r){return F5(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(H.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return F1e(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i!=null&&i.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;i.messages.push(new D("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?j3.read(e):null}clone(){var e,t;return new D3({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:ah(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:ah(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(r=>r.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===mr.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===mr.Stops){const e=this.stops;if(!e)return this;const t=e.map(i=>i.size).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};u([d({readOnly:!0})],Ke.prototype,"cache",null),u([d({type:Bv.apiValues,json:{type:Bv.jsonValues,origins:{"web-map":{read:!1}},read:Bv.read,write:Bv.write}})],Ke.prototype,"axis",void 0),u([d()],Ke.prototype,"index",null),u([d({type:String,readOnly:!0})],Ke.prototype,"inputValueType",null),u([d({type:N1e,json:{write:!0}})],Ke.prototype,"legendOptions",void 0),u([d({type:Number,value:null,json:{write:!0}})],Ke.prototype,"maxDataValue",null),u([d({type:Number,value:null,json:{write:!0}})],Ke.prototype,"maxSize",null),u([et("maxSize")],Ke.prototype,"castMaxSize",null),u([J("maxSize")],Ke.prototype,"readMaxSize",null),u([d({type:Number,value:null,json:{write:!0}})],Ke.prototype,"minDataValue",null),u([d({type:Number,value:null,json:{write:!0}})],Ke.prototype,"minSize",null),u([et("minSize")],Ke.prototype,"castMinSize",null),u([J("minSize")],Ke.prototype,"readMinSize",null),u([d({type:String,json:{write:!0}})],Ke.prototype,"normalizationField",void 0),u([d({readOnly:!0})],Ke.prototype,"arcadeRequired",null),u([d({type:String})],Ke.prototype,"scaleBy",void 0),u([d({type:[fw],value:null,json:{write:!0}})],Ke.prototype,"stops",null),u([d({type:["outline"],json:{write:!0}})],Ke.prototype,"target",void 0),u([d({type:String,readOnly:!0})],Ke.prototype,"transformationType",null),u([d({type:["size"],json:{type:["sizeInfo"]}})],Ke.prototype,"type",void 0),u([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Ke.prototype,"useSymbolValue",void 0),u([d({type:String,json:{write:!0}})],Ke.prototype,"valueExpression",void 0),u([J("valueExpression",["valueExpression","expression"])],Ke.prototype,"readValueExpression",null),u([X("web-scene","valueExpression")],Ke.prototype,"writeValueExpressionWebScene",null),u([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Ke.prototype,"valueRepresentation",void 0),u([d({type:j3.apiValues,json:{write:j3.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Ke.prototype,"valueUnit",void 0),u([J("valueUnit")],Ke.prototype,"readValueUnit",null),Ke=D3=u([T("esri.renderers.visualVariables.SizeVariable")],Ke);const oC=Ke,J1e={color:xB,size:oC,opacity:TB,rotation:MB},K1e=new De({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Y1e=/^\[([^\]]+)\]$/i;let gw=class extends we{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t&&t.filter(r=>!!r),t==null?void 0:t.length){for(const r of t)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some(r=>!!r.target)&&t.sort((r,i)=>{let n=null;return n=r.target===i.target?0:r.target?1:-1,n});for(let r=0;r<t.length;r++)t[r].index=r;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,r,i){const{rotationExpression:n,rotationType:s}=r,o=n==null?void 0:n.match(Y1e),a=o==null?void 0:o[1];if(a&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:s,field:a})),t)return t.map(l=>{const c=K1e.read(l.type),h=J1e[c];h||(H.getLogger(this).warn(`Unknown variable type: ${c}`),i!=null&&i.messages&&i.messages.push(new Zn("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:l,context:i})));const f=new h;return f.read(l,i),f})}writeVariables(t,r){const i=[];for(const n of t){const s=n.toJSON(r);s&&i.push(s)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};u([d()],gw.prototype,"visualVariables",null),gw=u([T("esri.renderers.visualVariables.VisualVariableFactory")],gw);const Q1e=gw,X1e={base:yg,key:"type",typeMap:{opacity:TB,color:xB,rotation:MB,size:oC}},Sf=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Q1e}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,n){return this._vvFactory.readVariables(r,i,n)}writeVisualVariables(r,i,n,s){i[n]=this._vvFactory.writeVariables(r,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){const n=this.visualVariables;return n?n.filter(s=>s.type===r&&(typeof i=="string"?s.target===i:i!==!1||!s.target)):[]}async collectVVRequiredFields(r,i){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&bi(r,i,s.field),s.normalizationField&&bi(r,i,s.normalizationField),s.valueExpression&&(ewe(s.valueExpression,r,i)||await ni(r,i,s.valueExpression)))}};return u([d({types:[X1e],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),u([J("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),u([X("visualVariables")],t.prototype,"writeVisualVariables",null),t=u([T("esri.renderers.mixins.VisualVariablesMixin")],t),t};function ewe(e,t,r){const i=P1e(e);return i!=null&&(bi(t,r,i),!0)}const aC=[252,146,31,255],twe=[153,153,153,255],rwe={type:"esriSMS",style:"esriSMSCircle",size:6,color:aC,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},iwe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:aC},nwe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},swe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},owe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},awe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},lwe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},uwe=Oo.fromJSON(rwe),cwe=yn.fromJSON(iwe),dwe=Cu.fromJSON(nwe),pwe=gf.fromJSON(swe),Qke=Oo.fromJSON(owe),Xke=yn.fromJSON(awe),eOe=Cu.fromJSON(lwe);va.fromSimpleMarkerSymbol(uwe);jd.fromSimpleLineSymbol(cwe);Pu.fromSimpleFillSymbol(dwe);new lg({symbolLayers:new ce([new Dd({material:{color:aC},edges:new MU({size:Jn(1),color:new Se(twe)})})])});const hwe=new jd({symbolLayers:new ce([new ff({material:{color:new Se([0,0,0])},size:Jn(1)})])}),fwe=new Pu({symbolLayers:new ce([new Dd({outline:{color:new Se([0,0,0]),size:Jn(1)}})])}),sp={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function mwe(e,t=sp){var l,c,h,f;if(!e)return{symbol:null};const{retainId:r=sp.retainId,ignoreDrivers:i=sp.ignoreDrivers,hasLabelingContext:n=sp.hasLabelingContext,retainCIM:s=sp.retainCIM,cimFallbackEnabled:o=sp.cimFallbackEnabled}=t;let a=null;if(iN(e)||e instanceof zd)a=e.clone();else if(e.type==="cim"){const m=(c=(l=e.data)==null?void 0:l.symbol)==null?void 0:c.type;switch(m){case"CIMPointSymbol":a=s?e.clone():va.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(a=hwe.clone(),(h=t==null?void 0:t.logWarning)==null||h.call(t,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=fwe.clone(),(f=t==null?void 0:t.logWarning)==null||f.call(t,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new D("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${m||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof yn)a=jd.fromSimpleLineSymbol(e);else if(e instanceof Oo)a=va.fromSimpleMarkerSymbol(e);else if(e instanceof ug)a=va.fromPictureMarkerSymbol(e);else if(e instanceof Cu)a=t.geometryType&&t.geometryType==="mesh"?lg.fromSimpleFillSymbol(e):Pu.fromSimpleFillSymbol(e);else{if(!(e instanceof gf))return{error:new D("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};a=n?ES.fromTextSymbol(e):va.fromTextSymbol(e)}return r&&a&&a.type!=="cim"&&(a.id=e.id),i&&iN(a)&&a.symbolLayers.forEach(m=>m.ignoreDrivers=!0),{symbol:a}}function h_(e,t,r,i){const n=LB(e,{},{context:i,isLabelSymbol:!1});n!=null&&(t[r]=n)}function D5(e,t,r,i){const n=LB(e,{},{context:i,isLabelSymbol:!0});n!=null&&(t[r]=n)}function j5(e){return e instanceof yf||e instanceof zd}function LB(e,t,r){if(e==null)return null;const{context:i,isLabelSymbol:n}=r,s=i==null?void 0:i.origin,o=i==null?void 0:i.messages;if(s==="web-scene"&&!j5(e)){const a=mwe(e,{retainCIM:!0,hasLabelingContext:n});return a.symbol!=null?a.symbol.write(t,i):(o==null||o.push(new D("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:a.error})),null)}return(s==="web-map"||s==="portal-item"&&!Hz(i==null?void 0:i.layer))&&j5(e)?(o==null||o.push(new D("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function tOe(e,t){return Tpe(e,null,t)}const VS={types:tG,json:{write:{writer:h_},origins:{"web-scene":{types:nN,write:{writer:h_},read:{reader:of({types:nN})}}}}},lC=Yk({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},VS),NB={types:{base:zr,key:"type",typeMap:{"simple-fill":id.typeMap["simple-fill"],"picture-fill":id.typeMap["picture-fill"],"polygon-3d":id.typeMap["polygon-3d"]}},json:{write:{writer:h_},origins:{"web-scene":{type:Pu,write:{writer:h_}}}}},vw={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var z3;let $l=z3=class extends q{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new z3({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};u([d({type:String,json:{write:!0}})],$l.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],$l.prototype,"label",void 0),u([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],$l.prototype,"minValue",void 0),u([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],$l.prototype,"maxValue",void 0),u([d(lC)],$l.prototype,"symbol",void 0),$l=z3=u([T("esri.renderers.support.ClassBreakInfo")],$l);const f_=$l;var V3;const FB="log",ww="percent-of-total",bw="field",Hv=new De({esriNormalizeByLog:FB,esriNormalizeByPercentOfTotal:ww,esriNormalizeByField:bw}),ywe=Qt(f_);let rr=V3=class extends Sf(Na){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map(n=>{const s=new f_;return s.read(n,r),s.minValue==null&&(s.minValue=i),s.maxValue==null&&(s.maxValue=s.minValue),i=s.maxValue,s})}writeClassBreakInfos(e,t,r,i){const n=e.map(s=>s.write({},i));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),t[r]=n}castField(e){return e==null?e:typeof e=="function"?(H.getLogger(this).error(".field: field must be a string value"),null):Y0(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&bw||r&&ww||null,t&&r&&H.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==bw&&e!==ww||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new f_({minValue:e,maxValue:t,symbol:rG(r)}):ywe(C(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&H.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await xd()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void H.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const n=await xd(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((i,n)=>i+n.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new V3({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:C(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:C(this.visualVariables),legendOptions:C(this.legendOptions),authoringInfo:C(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),ni(e,t,this.valueExpression)];bi(e,t,this.field),bi(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s,timeZone:o}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=s.arcadeUtils;if(!l){const f=c.createSyntaxTree(a);l=c.createFunction(f),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const h=c.executeFunction(l,c.createExecContext(e,c.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let n=parseFloat(r[t]);if(i){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(i===FB)n=Math.log(n)*Math.LOG10E;else if(i!==ww||s==null||isNaN(s)){if(i===bw&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};u([d(NB)],rr.prototype,"backgroundFillSymbol",void 0),u([d({type:[f_]})],rr.prototype,"classBreakInfos",void 0),u([J("classBreakInfos")],rr.prototype,"readClassBreakInfos",null),u([X("classBreakInfos")],rr.prototype,"writeClassBreakInfos",null),u([d({type:String,json:{write:!0}})],rr.prototype,"defaultLabel",void 0),u([d(VS)],rr.prototype,"defaultSymbol",void 0),u([d({type:String,json:{write:!0}})],rr.prototype,"field",void 0),u([et("field")],rr.prototype,"castField",null),u([d({type:Boolean})],rr.prototype,"isMaxInclusive",void 0),u([d({type:Oh,json:{write:!0}})],rr.prototype,"legendOptions",void 0),u([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],rr.prototype,"minValue",null),u([d({type:String,json:{write:!0}})],rr.prototype,"normalizationField",void 0),u([d({type:Number,cast:e=>An(e),json:{write:!0}})],rr.prototype,"normalizationTotal",void 0),u([d({type:Hv.apiValues,value:null,json:{type:Hv.jsonValues,read:Hv.read,write:Hv.write}})],rr.prototype,"normalizationType",null),u([fe({classBreaks:"class-breaks"})],rr.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],rr.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],rr.prototype,"valueExpressionTitle",void 0),rr=V3=u([T("esri.renderers.ClassBreaksRenderer")],rr);const DB=rr,U3=-3,gwe=U3-1;var ua;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(ua||(ua={}));let rOe=class{constructor(t,r,i){this.name=t,this._storage=r,this.id=wwe+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(t){return this._storage.getSize(this,t)}resetHitRate(){this._hit=this._miss=0}put(t,r,i,n=0){this._storage.put(this,t,r,i,n)}pop(t){const r=this._storage.pop(this,t);return r===void 0?++this._miss:++this._hit,r}get(t){const r=this._storage.get(this,t);return r===void 0?++this._miss:++this._hit,r}peek(t){return this._storage.peek(this,t)}updateSize(t,r,i){this._storage.updateSize(this,t,r,i)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},vwe=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new pb,this._users=new pb}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,r){const i=this._db.get(t.id+r);return(i==null?void 0:i.size)??0}put(t,r,i,n,s){r=t.id+r;const o=this._db.get(r);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(r),o.entry!==i&&this._notifyRemove(r,o.entry,o.size,ua.ALL)),n>this._maxSize)return void this._notifyRemove(r,i,n,ua.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${r}`),void this._notifyRemove(r,i,0,ua.ALL);const a=1+Math.max(s,gwe)-U3;this._db.set(r,new bwe(i,n,a)),this._size+=n,t.size+=n,this._checkSize()}updateSize(t,r,i,n){r=t.id+r;const s=this._db.get(r);if(s&&s.entry===i){for(this._size-=s.size,t.size-=s.size;n>this._maxSize;){const o=this._notifyRemove(r,i,n,ua.SOME);if(!(o!=null&&o>0))return void this._db.delete(r);n=o}s.size=n,this._size+=n,t.size+=n,this._checkSize()}}pop(t,r){r=t.id+r;const i=this._db.get(r);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(r),++this._hit,i.entry;++this._miss}get(t,r){r=t.id+r;const i=this._db.get(r);if(i!==void 0)return this._db.delete(r),i.lives=i.lifetime,this._db.set(r,i),++this._hit,i.entry;++this._miss}peek(t,r){const i=this._db.get(t.id+r);return i?++this._hit:++this._miss,i==null?void 0:i.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;i[l]=(i[l]||0)+o.size,this._users.forAll(c=>{const{id:h,name:f}=c;if(a.startsWith(h)){const m=r[f]||0;r[f]=m+o.size}})});const n={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=r[a]||0;r[a]=l,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(r);s.sort((o,a)=>r[a]-r[o]),s.forEach(o=>t[o]=Math.round(r[o]/2**20)+"MB / "+n[o]);for(let o=i.length-1;o>=0;--o){const a=i[o];a&&(t["Priority "+(o+U3-1)]=Math.round(a/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const r=t.id;this._db.forEach((i,n)=>{n.startsWith(r)&&(this._size-=i.size,this._db.delete(n),this._notifyRemove(n,i.entry,i.size,ua.ALL))}),t.size=0}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,t.size,ua.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i,n){let s;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const a=o[1](r,n,i);return typeof a=="number"&&(s=a),!0}return!1}),s}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const r=t??this;if(r.maxSize<0||r.size<=r.maxSize)return;const i=t==null?void 0:t.id;let n=!0;for(;n;){n=!1;for(const[s,o]of this._db)if(o.lifetime===0&&(!i||s.startsWith(i))){if(this._purgeItem(s,o,t),r.size<=.9*r.maxSize)return;n||(n=this._db.has(s))}}for(const[s,o]of this._db)if((!i||s.startsWith(i))&&(this._purgeItem(s,o,t),r.size<=.9*r.maxSize))return}_purgeItem(t,r,i=this._users.find(n=>t.startsWith(n.id))){if(this._db.delete(t),r.lives<=1){this._size-=r.size,i&&(i.size-=r.size);const n=this._notifyRemove(t,r.entry,r.size,ua.SOME);n!=null&&n>0&&(this._size+=n,i&&(i.size+=n),r.lives=r.lifetime,r.size=n,this._db.set(t,r))}else--r.lives,this._db.set(t,r)}},wwe=0,bwe=class{constructor(t,r,i){this.entry=t,this.size=r,this.lifetime=i,this.lives=i}},_we=class{constructor(t,r){this._storage=new vwe,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,r,i=1){this._storage.put(this,t,r,i,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}},Swe=class G3{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}since(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new D(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new G3(this.major,this.minor,this._context)}static parse(t,r=""){const[i,n]=t.split("."),s=/^\s*\d+\s*$/;if(!(i!=null&&i.match)||!s.test(i))throw new D((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(n!=null&&n.match)||!s.test(n))throw new D((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),a=parseInt(n,10);return new G3(o,a,r)}},US=class{};function $we(e){return e instanceof uf?e===US.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function lOe(e){return $we(e)?US.instance:e}US.instance=new hn("Etc/UTC");function xwe(e){return"timeZone"in e}function Twe(e){return"timeZone"in e}function Mwe(e){return"dateFieldsTimeZone"in e}const Ewe=new Map;let jB=class _w{static fromJSON(t){return new _w(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new _w(t.fields??[],V5(t))}static fromLayerJSON(t){return new _w(t.fields??[],V5(t))}constructor(t=[],r){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=r?new Map(r):null;const i=[];for(const s of this.fields){const o=s==null?void 0:s.name,a=z5(o);if(o&&a){const l=Nc(o);this._fieldsMap.set(o,s),this._fieldsMap.set(l,s),this._normalizedFieldsMap.set(a,s),i.push(`${l}:${s.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),mde(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):gU(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),J4(s)||K4(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)J4(t)||K4(t)||t.nullable||rde(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||(r=this._fieldsMap.get(Nc(t))??this._normalizedFieldsMap.get(z5(t)),r&&this._fieldsMap.set(t,r),r)}getTimeZone(t){const r=this.get(t&&typeof t!="string"?t.name:t);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(H.getLogger("esri.layers.support.FieldsIndex").error(new D("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),hu):zB.has(r.type)?$d:null:null}getLuxonTimeZone(t){const r=this.getTimeZone(t);return r?r===$d?US.instance:r===hu?Fr.utcInstance:nO(Ewe,r,()=>hn.create(r)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return yde(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var r;return((r=this.get(t))==null?void 0:r.name)??void 0}toJSON(){return{fields:this.fields.map(t=>Sb(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Nc(e){return e.trim().toLowerCase()}function z5(e){var t;return((t=zce(e))==null?void 0:t.toLowerCase())??""}const zB=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function V5(e){const t=new Map;if(!e.fields)return t;const r=e.datesInUnknownTimezone===!0,{timeInfo:i,editFieldsInfo:n}=e,s=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",a=Mwe(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?k1(e.dateFieldsTimeReference):null,l=n?xwe(n)?n.timeZone??a:n.dateFieldsTimeReference?k1(n.dateFieldsTimeReference):a??hu:null,c=i?Twe(i)?i.timeZone??a:i.timeReference?k1(i.timeReference):a:null,h=new Map([[Nc((n==null?void 0:n.creationDateField)??""),l],[Nc((n==null?void 0:n.editDateField)??""),l],[Nc(s),c],[Nc(o),c]]);for(const{name:f,type:m}of e.fields)if(zB.has(m))t.set(f,$d);else if(m!=="date"&&m!=="esriFieldTypeDate")t.set(f,null);else if(r)t.set(f,$d);else{const y=h.get(Nc(f??""))??a;t.set(f,y)}return t}function Iwe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function kwe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Owe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function Pwe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function VB(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function UB(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function GB(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function Cwe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Rwe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Awe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function Lwe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function Nwe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Fwe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Dwe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function qB(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+s*s)}function BB(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return r*r+i*i+n*n+s*s}function HB(e){const t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function WB(e){const t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function jwe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function zwe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function Vwe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3];let o=r*r+i*i+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=n*o,e[3]=s*o),e}function Uwe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ZB(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e[3]=a+i*(r[3]-a),e}function Gwe(e,t){const r=sS;let i,n,s,o,a,l;t=t||1;do i=2*r()-1,n=2*r()-1,a=i*i+n*n;while(a>=1);do s=2*r()-1,o=2*r()-1,l=s*s+o*o;while(l>=1);const c=Math.sqrt((1-a)/l);return e[0]=t*i,e[1]=t*n,e[2]=t*s*c,e[3]=t*o*c,e}function qwe(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12]*o,e[1]=r[1]*i+r[5]*n+r[9]*s+r[13]*o,e[2]=r[2]*i+r[6]*n+r[10]*s+r[14]*o,e[3]=r[3]*i+r[7]*n+r[11]*s+r[15]*o,e}function Bwe(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2],c=r[3],h=c*i+a*s-l*n,f=c*n+l*i-o*s,m=c*s+o*n-a*i,y=-o*i-a*n-l*s;return e[0]=h*c+y*-o+f*-l-m*-a,e[1]=f*c+y*-a+m*-o-h*-l,e[2]=m*c+y*-l+h*-a-f*-o,e[3]=t[3],e}function Hwe(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Wwe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Zwe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=t[0],a=t[1],l=t[2],c=t[3],h=vi();return Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=h*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-l)<=h*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-c)<=h*Math.max(1,Math.abs(s),Math.abs(c))}const Jwe=VB,Kwe=UB,Ywe=GB,Qwe=qB,Xwe=BB,ebe=HB,tbe=WB;Object.freeze(Object.defineProperty({__proto__:null,add:Pwe,ceil:Cwe,copy:Iwe,copyVec3:kwe,dist:Qwe,distance:qB,div:Ywe,divide:GB,dot:Uwe,equals:Zwe,exactEquals:Wwe,floor:Rwe,inverse:zwe,len:ebe,length:HB,lerp:ZB,max:Lwe,min:Awe,mul:Kwe,multiply:UB,negate:jwe,normalize:Vwe,random:Gwe,round:Nwe,scale:Fwe,scaleAndAdd:Dwe,set:Owe,sqrDist:Xwe,sqrLen:tbe,squaredDistance:BB,squaredLength:WB,str:Hwe,sub:Jwe,subtract:VB,transformMat4:qwe,transformQuat:Bwe},Symbol.toStringTag,{value:"Module"}));function GS(){return[0,0,0,0]}function rbe(e){return[e[0],e[1],e[2],e[3]]}function $f(e,t,r,i){return[e,t,r,i]}function ibe(e,t=GS()){const r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function nbe(e,t){return new Float64Array(e,t,4)}function JB(){return GS()}function KB(){return $f(1,1,1,1)}function YB(){return $f(1,0,0,0)}function QB(){return $f(0,1,0,0)}function XB(){return $f(0,0,1,0)}function eH(){return $f(0,0,0,1)}const sbe=JB(),obe=KB(),abe=YB(),lbe=QB(),ube=XB(),cbe=eH();Object.freeze(Object.defineProperty({__proto__:null,ONES:obe,UNIT_W:cbe,UNIT_X:abe,UNIT_Y:lbe,UNIT_Z:ube,ZEROS:sbe,clone:rbe,create:GS,createView:nbe,fromArray:ibe,fromValues:$f,ones:KB,unitW:eH,unitX:YB,unitY:QB,unitZ:XB,zeros:JB},Symbol.toStringTag,{value:"Module"}));function tH(e){return"r"in e&&"g"in e&&"b"in e}function rH(e){return"h"in e&&"s"in e&&"v"in e}function iH(e){return"l"in e&&"a"in e&&"b"in e}function nH(e){return"l"in e&&"c"in e&&"h"in e}function dbe(e){return"x"in e&&"y"in e&&"z"in e}const pbe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],hbe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function sH(e,t){const r=[];let i,n;if(e[0].length!==t.length)throw new Error("dimensions do not match");const s=e.length,o=e[0].length;let a=0;for(i=0;i<s;i++){for(a=0,n=0;n<o;n++)a+=e[i][n]*t[n];r.push(a)}return r}function oH(e){const t=[e.r/255,e.g/255,e.b/255].map(i=>i<=.04045?i/12.92:((i+.055)/1.055)**2.4),r=sH(pbe,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function uC(e){const t=sH(hbe,[e.x/100,e.y/100,e.z/100]).map(r=>{const i=r<=.0031308?12.92*r:1.055*r**.4166666666666667-.055;return Math.min(1,Math.max(i,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function aH(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(r=>r>.008856451679035631?r**.3333333333333333:7.787037037037035*r+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function lH(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(i=>i>6/29?i**3:3*(6/29)**2*(i-4/29));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function fbe(e){const t=e.l,r=e.a,i=e.b,n=Math.sqrt(r*r+i*i);let s=Math.atan2(i,r);return s=s>0?s:s+2*Math.PI,{l:t,c:n,h:s}}function mbe(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}function ybe(e){return aH(oH(e))}function gbe(e){return uC(lH(e))}function vbe(e){return fbe(aH(oH(e)))}function wbe(e){return uC(lH(mbe(e)))}function bbe(e){const t=e.r,r=e.g,i=e.b,n=Math.max(t,r,i),s=n-Math.min(t,r,i);let o=n,a=s===0?0:n===t?(r-i)/s%6:n===r?(i-t)/s+2:(t-r)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function _be(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,n=i*r,s=n*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+i-n),o.g=Math.round(o.g+i-n),o.b=Math.round(o.b+i-n),o}function cC(e){return tH(e)?e:nH(e)?wbe(e):iH(e)?gbe(e):dbe(e)?uC(e):rH(e)?_be(e):e}function uOe(e){return rH(e)?e:bbe(cC(e))}function cOe(e){return iH(e)?e:ybe(cC(e))}function dOe(e){return nH(e)?e:vbe(cC(e))}var U5;(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(U5||(U5={}));const Sbe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},q3={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0}};function pOe(e){return[e.r,e.g,e.b,e.a]}const $be=` /-,
`;function G5(e){let t=e.length;for(;t--;)if(!$be.includes(e.charAt(t)))return!1;return!0}function xbe(e,t){const r=[];let i=0,n=-1;do if(n=e.indexOf("[",i),n>=i){if(n>i){const s=e.substr(i,n-i);r.push([s,null,G5(s)])}if(i=n+1,n=e.indexOf("]",i),n>=i){if(n>i){const s=t[e.substr(i,n-i)];s&&r.push([null,s,!1])}i=n+1}}while(n!==-1);if(i<e.length-1){const s=e.substr(i);r.push([s,null,G5(s)])}return r}function Tbe(e,t,r,i){let n="",s=null;for(const o of t){const[a,l,c]=o;if(a)c?s=a:(s&&(n+=s,s=null),n+=a);else{let h=l;r!=null&&(h=uH(l,r));const f=e.attributes[h];f&&(s&&(n+=s,s=null),n+=f)}}return Mbe(n,i)}function Mbe(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function hOe(e,t,r,i,n,s,o=!0){const a=t/n,l=r/s,c=Math.ceil(a/2),h=Math.ceil(l/2);for(let f=0;f<s;f++)for(let m=0;m<n;m++){const y=4*(m+(o?s-f-1:f)*n);let g=0,v=0,b=0,w=0,_=0,$=0,E=0;const k=(f+.5)*l;for(let M=Math.floor(f*l);M<(f+1)*l;M++){const P=Math.abs(k-(M+.5))/h,N=(m+.5)*a,j=P*P;for(let G=Math.floor(m*a);G<(m+1)*a;G++){let W=Math.abs(N-(G+.5))/c;const ie=Math.sqrt(j+W*W);ie>=-1&&ie<=1&&(g=2*ie*ie*ie-3*ie*ie+1,g>0&&(W=4*(G+M*t),E+=g*e[W+3],b+=g,e[W+3]<255&&(g=g*e[W+3]/250),w+=g*e[W],_+=g*e[W+1],$+=g*e[W+2],v+=g))}}i[y]=w/v,i[y+1]=_/v,i[y+2]=$/v,i[y+3]=E/b}}function Ebe(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function fOe(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function mOe(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function yOe(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function gOe(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function Ibe(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const vOe=(e,t=0)=>e==null||isNaN(e)?t:e,wOe=(e,t)=>e??t,bOe=e=>e.tintColor?Ebe(e.tintColor):[255,255,255,1],_Oe=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function SOe(){return ee(()=>import("./geometryEngineJSON-CxL1fJRD.js").then(e=>e.g),__vite__mapDeps([18,19,20]))}function $Oe(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function xOe(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function TOe(e){let t="normal",r="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function MOe(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function q5(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=q5(t);if(r!=null)return r}break;case"CIMTextSymbol":return q5(e.symbol);case"CIMSolidFill":return e.color}return null}function B5(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const r of t){const i=B5(r);if(i!=null)return i}break}case"CIMTextSymbol":return B5(e.symbol);case"CIMSolidStroke":return e.color}}function H5(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=H5(t);if(r!==void 0)return r}break;case"CIMTextSymbol":return H5(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function EOe(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function IOe(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function kbe(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const kOe=e=>e.includes("data:image/svg+xml");function dC(e){return e&&e.charAt(0).toLowerCase()+e.substring(1)}function OOe(e,t,r,i,n,s){const{infos:o}=s;let a=1,l=0,c=0,h=0;for(const{offsetX:y,offsetY:g,rotation:v,size:b,frameHeight:w,rotateClockWise:_}of o)c=J5(y,g,l,a,c),h=Z5(y,g,l,a,h),w&&(a*=b/w),l=K5(v,_,l);const f=J5(i,n,l,a,c),m=Z5(i,n,l,a,h);return{size:e*a,rotation:K5(t,r,l),offsetX:f,offsetY:m}}function Obe(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>Obe(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function POe(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...Sbe[t]];const r=q3[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function Pbe(e){return e!=null&&e.dashTemplate&&typeof e.dashTemplate=="string"&&(e.dashTemplate=e.dashTemplate.split(" ").map(Number)),e}function B3(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const r of t)if(r.type==="CIMVectorMarker")return B3(r)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const r of t)if(r.symbol)return B3(r.symbol)}}return"Normal"}function COe(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const i=r.size??q3.CIMVectorMarker.size;i>t&&(t=i);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const i=r.width;i!=null&&i>t&&(t=i);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&Ibe(r.markerPlacement)){const i=r.size??q3.CIMVectorMarker.size;i>t&&(t=i)}break;case"CIMPictureFill":{const i=r.height;i!=null&&i>t&&(t=i)}}}return t}}}function uH(e,t){if(t!==null){const r=t.get(e);return r?r.name:e}return e}function Cbe(e){return e.map(t=>({...t,propertyName:dC(t.propertyName)}))}function W5(e){const t={};for(const r in e){const i=e[r];t[dC(r)]=i}return t}function Z5(e,t,r,i,n){const s=r*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*e+o*t)*i+n}return t*i+n}function J5(e,t,r,i,n){const s=r*Math.PI/180;return s?(Math.cos(s)*e-Math.sin(s)*t)*i+n:e*i+n}function K5(e,t,r){return t?r-e:r+e}function ROe(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:e.extent!=null?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function Rbe(e){return e.originPosition==="lowerLeft"&&e.scale.length===4&&e.translate.length===4}function gg(e){if(Rbe(e))return e;const{originPosition:t,scale:r,translate:i}=e,n=r[0]??1,s=r[1]??1;return{originPosition:"lowerLeft",scale:[n,t==="lowerLeft"?s:-s,r[2]??1,r[3]??1],translate:[i[0]??0,i[1]??0,i[2]??0,i[3]??0]}}function Abe({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function Lbe({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function Nbe({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}function Fbe({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}function vg({scale:e,translate:t},r){return r*e[0]+t[0]}function wg({scale:e,translate:t},r){return r*e[1]+t[1]}function A0({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function L0({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function pC(e,t){return e&&t?Vbe:e&&!t?jbe:!e&&t?zbe:Dbe}const Dbe=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=vg(e,i[0]),s=wg(e,i[1]);r[0]=[n,s];const{scale:o,originPosition:a}=e,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,m]=t[h];n+=l*f,s+=c*m,r[h]=[n,s]}return r},jbe=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=vg(e,i[0]),s=wg(e,i[1]);r[0]=[n,s,A0(e,i[2])];const{scale:o,originPosition:a}=e,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,m,y]=t[h];n+=l*f,s+=c*m,r[h]=[n,s,A0(e,y)]}return r},zbe=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=vg(e,i[0]),s=wg(e,i[1]);r[0]=[n,s,L0(e,i[2])];const{scale:o,originPosition:a}=e,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,m,y]=t[h];n+=l*f,s+=c*m,r[h]=[n,s,L0(e,y)]}return r},Vbe=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=vg(e,i[0]),s=wg(e,i[1]);r[0]=[n,s,A0(e,i[2]),L0(e,i[3])];const{scale:o,originPosition:a}=e,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,m,y,g]=t[h];n+=l*f,s+=c*m,r[h]=[n,s,A0(e,y),L0(e,g)]}return r};function cH(e,t,r){const i=new Array(r.length);for(let n=0;n<r.length;n++)i[n]=t(e,r[n]);return i}function AOe(e,t,r){const i=gg(e);return t.x=Abe(i,r.x),t.y=Lbe(i,r.y),r.z!=null&&(t.z=Nbe(i,r.z)),r.m!=null&&(t.m=Fbe(i,r.m)),t}function Ube(e,t,r,i=(r==null?void 0:r.hasZ)??!1,n=(r==null?void 0:r.hasM)??!1){if(r!=null){const s=gg(e);t.points=pC(i,n)(s,r.points),t.hasZ=i,t.hasM=n}return t}function Gbe(e,t,r,i=(r==null?void 0:r.z)!=null,n=(r==null?void 0:r.m)!=null){if(r==null)return t;const s=gg(e);return t.x=vg(s,r.x),t.y=wg(s,r.y),i&&(t.z=A0(s,r.z)),n&&(t.m=L0(s,r.m)),t}function qbe(e,t,r,i=(r==null?void 0:r.hasZ)??!1,n=(r==null?void 0:r.hasM)??!1){if(r!=null){const s=gg(e);t.rings=cH(s,pC(i,n),r.rings),t.hasZ=i,t.hasM=n}return t}function Bbe(e,t,r,i=(r==null?void 0:r.hasZ)??!1,n=(r==null?void 0:r.hasM)??!1){if(r!=null){const s=gg(e);t.paths=cH(s,pC(i,n),r.paths),t.hasZ=i,t.hasM=n}return t}function Hbe(e,t,r,i,n){if(e==null)return null;const s=e.referencesGeometry()&&n?Wbe(t,i,n):t,o=e.repurposeFeature(s);try{return e.evaluate({...r,$feature:o},e.services)}catch(a){return H.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",a),null}}const X$=new Map;function Wbe(e,t,r){const{transform:i,hasZ:n,hasM:s}=r;X$.has(t)||X$.set(t,Zbe(t));const o=X$.get(t)(e.geometry,i,n,s);return{...e,geometry:o}}function Zbe(e){const t={};switch(e){case"esriGeometryPoint":return(r,i,n,s)=>Gbe(i,t,r,n,s);case"esriGeometryPolygon":return(r,i,n,s)=>qbe(i,t,r,n,s);case"esriGeometryPolyline":return(r,i,n,s)=>Bbe(i,t,r,n,s);case"esriGeometryMultipoint":return(r,i,n,s)=>Ube(i,t,r,n,s);default:return H.getLogger("esri.views.2d.support.arcadeOnDemand").error(new D("mapview-arcade",`Unable to handle geometryType: ${e}`)),r=>r}}const Jbe=e=>{if(!e)return[0,0,0,0];const{r:t,g:r,b:i,a:n}=e;return[t,r,i,255*n]};let dH=class Et{static findApplicableOverrides(t,r,i){if(t&&r){if(t.primitiveName){let n=!1;for(const s of i)if(s.primitiveName===t.primitiveName){n=!0;break}if(!n)for(const s of r)s.primitiveName===t.primitiveName&&i.push(s)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const n of t.effects)Et.findApplicableOverrides(n,r,i);if(t.symbolLayers)for(const n of t.symbolLayers)Et.findApplicableOverrides(n,r,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects)for(const n of t.effects)Et.findApplicableOverrides(n,r,i);if(t.markerPlacement&&Et.findApplicableOverrides(t.markerPlacement,r,i),t.type==="CIMVectorMarker"){if(t.markerGraphics)for(const n of t.markerGraphics)Et.findApplicableOverrides(n,r,i),Et.findApplicableOverrides(n.symbol,r,i)}else t.type==="CIMCharacterMarker"?Et.findApplicableOverrides(t.symbol,r,i):t.type==="CIMHatchFill"?Et.findApplicableOverrides(t.lineSymbol,r,i):t.type==="CIMPictureMarker"&&Et.findApplicableOverrides(t.animatedSymbolProperties,r,i)}}}static findEffectOverrides(t,r){if(!t)return null;if(t.type==="CIMGeometricEffectDashes"&&Pbe(t),!r||!t.primitiveName)return{type:"cim-effect-param",effect:t,overrides:[]};const i=W5(t),n=t.primitiveName,s=[];for(const o of r)o.primitiveName===n&&s.push(W5(o));return{type:"cim-effect-param",effect:i,overrides:Cbe(s)}}static async resolveSymbolOverrides(t,r,i,n,s,o,a){if(!(t!=null&&t.symbol))return null;let{symbol:l,primitiveOverrides:c}=t;const h=!!c;if(!h&&!n)return l;l=C(l),c=C(c);let f=!0;if(r||(r={attributes:{}},f=!1),h){if(f||(c=c.filter(m=>{var y;return!((y=m.valueExpressionInfo)!=null&&y.expression.includes("$feature"))})),a||(c=c.filter(m=>{var y;return!((y=m.valueExpressionInfo)!=null&&y.expression.includes("$view"))})),c.length>0){const m={spatialReference:i,fields:kbe(r.attributes),geometryType:s};await Et.createRenderExpressions(c,m),Et.evaluateOverrides(c,r,s??"esriGeometryPoint",o,a)}Et.applyOverrides(l,c)}return n&&Et.applyDictionaryTextOverrides(l,r,n,null),l}static async createRenderExpressions(t,r){const i=[];for(const n of t){const s=n.valueExpressionInfo;if(!s||Et._expressionToRenderExpression.has(s.expression))continue;const o=Nce(s.expression,r.spatialReference,r.fields);i.push(o),o.then(a=>Et._expressionToRenderExpression.set(s.expression,a))}i.length>0&&await Promise.all(i)}static evaluateOverrides(t,r,i,n,s){const o={$view:{scale:s==null?void 0:s.scale}};for(const a of t){a.value&&typeof a.value=="object"&&tH(a.value)&&(a.propertyName==="Color"||a.propertyName==="StrokeColor")&&(a.value=Jbe(a.value));const l=a.valueExpressionInfo;if(!l)continue;const c=Et._expressionToRenderExpression.get(l.expression);c&&(a.value=Hbe(c,r,o,i,n))}}static applyDictionaryTextOverrides(t,r,i,n,s="Normal"){if(t!=null&&t.type)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=t.symbolLayers;if(!o)return;for(const a of o)a&&a.type==="CIMVectorMarker"&&Et.applyDictionaryTextOverrides(a,r,i,n,t.type==="CIMTextSymbol"?t.textCase:s)}break;case"CIMVectorMarker":{const o=t.markerGraphics;if(!o)return;for(const a of o)a&&Et.applyDictionaryTextOverrides(a,r,i,n)}break;case"CIMMarkerGraphic":{const o=t.textString;if(o&&o.includes("[")){const a=xbe(o,i);t.textString=Tbe(r,a,n,s)}}}}static applyOverrides(t,r,i,n){if(t.primitiveName){for(const s of r)if(s.primitiveName===t.primitiveName){const o=dC(s.propertyName);if(n&&n.push({cim:t,nocapPropertyName:o,value:t[o]}),i){let a=!1;for(const l of i)l.primitiveName===t.primitiveName&&(a=!0);a||i.push(s)}s.value!=null&&(t[o]=s.value)}}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const s of t.effects)Et.applyOverrides(s,r,i,n);if(t.symbolLayers)for(const s of t.symbolLayers)Et.applyOverrides(s,r,i,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects)for(const s of t.effects)Et.applyOverrides(s,r,i,n);if(t.type==="CIMVectorMarker"&&t.markerGraphics)for(const s of t.markerGraphics)Et.applyOverrides(s,r,i,n),Et.applyOverrides(s.symbol,r,i,n)}}static restoreOverrides(t){for(const r of t)r.cim[r.nocapPropertyName]=r.value}static buildOverrideKey(t){let r="";for(const i of t)i.value!==void 0&&(r+=`${i.primitiveName}${i.propertyName}${JSON.stringify(i.value)}`);return r}static toValue(t,r){if(t==="DashTemplate")return r.split(" ").map(i=>Number(i));if(t==="Color"){const i=new Se(r).toRgba();return i[3]*=255,i}return r}};dH._expressionToRenderExpression=new Map;const Y5="esri.renderers.support.DictionaryLoader",Kbe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let pH=class{constructor(t,r,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new _we(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=r,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){var f;let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{i=await this._dictionaryPromise}catch(m){if(Gi(m))return this._dictionaryPromise=null,null}const n=(f=this._dictionaryVersion)==null?void 0:f.since(4,0),s={};if(this.fieldMap)for(const m of this._symbolFields){const y=uH(this.fieldMap[m],this._fieldIndex);if(y){const g=t.attributes[y];s[m]=n?g:g!=null?""+t.attributes[y]:""}else s[m]=""}let o=null;try{o=i==null?void 0:i(s,r)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const a=o.split(";"),l=[],c=[];for(const m of a)if(m)if(m.includes("po:")){const y=m.substr(3).split("|");if(y.length===3){const g=y[0],v=y[1];let b=y[2];if(v==="DashTemplate")b=b.split(" ").map(w=>Number(w));else if(v==="Color"){const w=new Se(b).toRgba();b=[w[0],w[1],w[2],255*w[3]]}else b=Number(b);c.push({primitiveName:g,propertyName:v,value:b,defaultValue:null})}}else if(m.includes("|")){for(const y of m.split("|"))if(this._itemNames.has(y)){l.push(y);break}}else this._itemNames.has(m)&&l.push(m);const h=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,l,c,h,r)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void H.getLogger(Y5).error("no valid URL!");const r=Ot(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:i}]=await Promise.all([r,xd()]);if(!i)throw this._dictionaryPromise=null,new D("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:s,expression:o,itemsNames:a}=i,l=o;let c=!1;s&&(this._dictionaryVersion=Swe.parse(s),c=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=n.symbol;const h={};if(this.config){const y=this.config;for(const g in y)h[g]=y[g]}if(n.configuration)for(const y of n.configuration)h.hasOwnProperty(y.name)||(h[y.name]=y.value);const f=[];if(t!=null&&t.fields&&this.fieldMap)for(const y in this.fieldMap){const g=this.fieldMap[y],v=t.fields.filter(b=>b.name.toLowerCase()===(g==null?void 0:g.toLowerCase()));v.length>0&&f.push({...v[0],type:c?v[0].type:"esriFieldTypeString"})}f.length>0&&(this._fieldIndex=new jB(f));const m=Fce(l,t!=null?t.spatialReference:null,f,h).then(y=>{const g={scale:0};return(v,b)=>{if(y==null)return null;const w=y.repurposeFeature({geometry:null,attributes:v});return g.scale=b!=null?b.scale??void 0:void 0,y.evaluate({$feature:w,$view:g},y.services)}}).catch(y=>(H.getLogger(Y5).error("Creating dictionary expression failed:",y),null));return this._dictionaryPromise=m,m}async _cimPartsToCIMSymbol(t,r,i,n,s){const o=new Array(r.length);for(let c=0;c<r.length;c++)o[c]=this._getSymbolPart(r[c],s);let a=await Promise.all(o);const l=this.fieldMap;if(l){a=C(a);for(const c of a)dH.applyDictionaryTextOverrides(c,t,l,this._fieldIndex,B3(c))}return new ku({data:Ybe(a,i,n)})}async _getSymbolPart(t,r){const i=this._symbolCache.get(t);if(i)return i;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const n=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),s=Ot(n,{responseType:"json",query:{f:"json"},...r});this._ongoingRequests.set(t,s),s.finally(()=>this._ongoingRequests.delete(t));try{const o=await s;return this._symbolCache.put(t,o.data),o.data}catch(o){throw o}}};function Ybe(e,t,r){if(!e||e.length===0)return null;const i={...e[0]};if(e.length>1){i.symbolLayers=[];for(const n of e){const s=n;i.symbolLayers.unshift(...s.symbolLayers)}}return r&&(i.callout=Kbe),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}var H3;let ps=H3=class extends Sf(Na){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new pH(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i!=null&&i.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new H3({config:C(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:C(this.fieldMap),url:C(this.url),visualVariables:C(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await ni(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};u([d({type:pH})],ps.prototype,"_loader",null),u([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],ps.prototype,"config",void 0),u([d({type:Object,json:{write:!0}})],ps.prototype,"fieldMap",void 0),u([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],ps.prototype,"scaleExpression",void 0),u([X("scaleExpression")],ps.prototype,"writeData",null),u([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],ps.prototype,"scaleExpressionTitle",void 0),u([d({type:String,json:{write:!0}})],ps.prototype,"url",void 0),u([X("visualVariables")],ps.prototype,"writeVisualVariables",null),ps=H3=u([T("esri.renderers.DictionaryRenderer")],ps);const Qbe=ps;var W3;let ta=W3=class extends q{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(H.getLogger(this).error(".field: field must be a string value"),null):Y0(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new W3({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([d({type:Se,json:{type:[Number],write:!0}})],ta.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],ta.prototype,"field",void 0),u([et("field")],ta.prototype,"castField",null),u([d({type:String,json:{write:!0}})],ta.prototype,"label",void 0),u([d({type:String,json:{write:!0}})],ta.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],ta.prototype,"valueExpressionTitle",void 0),ta=W3=u([T("esri.renderers.support.AttributeColorInfo")],ta);const hH=ta;var Z3;let Sw=Z3=class extends q{constructor(){super(...arguments),this.unit=null}clone(){return new Z3({unit:this.unit})}};u([d({type:String,json:{write:!0}})],Sw.prototype,"unit",void 0),Sw=Z3=u([T("esri.renderers.support.DotDensityLegendOptions")],Sw);const Xbe=Sw;var J3;let Ei=J3=class extends Sf(Na){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Se([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new yn,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Cu({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new J3({attributes:C(this.attributes),backgroundColor:C(this.backgroundColor),dotBlendingEnabled:C(this.dotBlendingEnabled),dotShape:C(this.dotShape),dotSize:C(this.dotSize),dotValue:C(this.dotValue),legendOptions:C(this.legendOptions),outline:C(this.outline),referenceScale:C(this.referenceScale),seed:C(this.seed),visualVariables:C(this.visualVariables),authoringInfo:C(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(r=>r.field||r.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await ni(e,t,r.valueExpression),r.field&&e.add(r.field)}};u([d({type:[hH],json:{write:!0}})],Ei.prototype,"attributes",void 0),u([d({type:Se,json:{write:!0}})],Ei.prototype,"backgroundColor",void 0),u([d({type:Boolean,json:{write:!0}})],Ei.prototype,"dotBlendingEnabled",void 0),u([d({type:String,json:{write:!1}})],Ei.prototype,"dotShape",void 0),u([d({type:Number,json:{write:!0}})],Ei.prototype,"dotSize",void 0),u([d({type:Xbe,json:{write:!0}})],Ei.prototype,"legendOptions",void 0),u([d({type:yn,json:{default:null,write:!0}})],Ei.prototype,"outline",void 0),u([d({type:Number,json:{write:!0}})],Ei.prototype,"dotValue",void 0),u([d({type:Number,json:{write:!0}})],Ei.prototype,"referenceScale",void 0),u([d({type:Number,json:{write:!0}})],Ei.prototype,"seed",void 0),u([fe({dotDensity:"dot-density"})],Ei.prototype,"type",void 0),Ei=J3=u([T("esri.renderers.DotDensityRenderer")],Ei);const e_e=Ei;var K3;let ny=K3=class extends q{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new K3({color:this.color&&this.color.clone(),ratio:this.ratio})}};u([d({type:Se,json:{type:[it],default:null,write:!0}})],ny.prototype,"color",void 0),u([d({type:Number,json:{write:!0}})],ny.prototype,"ratio",void 0),ny=K3=u([T("esri.renderers.support.HeatmapColorStop")],ny);const $w=ny;let Op=class extends dt(q){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};u([d({type:String,json:{write:!0}})],Op.prototype,"minLabel",void 0),u([d({type:String,json:{write:!0}})],Op.prototype,"maxLabel",void 0),u([d({type:String,json:{write:!0}})],Op.prototype,"title",void 0),Op=u([T("esri.renderers.support.HeatmapLegendOptions")],Op);const hC=2.4;function t_e(e){return Jn(e*hC)}function r_e(e){return Rie(e)/hC}function i_e(e,t,r,i){let{color:n,ratio:s}=t,{color:o,ratio:a}=r;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=Rs((i-s)/(a-s),0,1);ZB(e,n.toArray(),o.toArray(),l)}function FOe(e){const r=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),e.length<1)return r;let i=e[0],n=e[0],s=1;const o=GS();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>n.ratio&&s<e.length;)i=n,n=e[s++];i_e(o,i,n,l),r.set(o,4*a)}return r}function DOe(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function jOe(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var Y3;function Q5(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:i}=e;if(t!=null||r!=null||i!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=e;return a}}return e}let _r=Y3=class extends Na{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new $w({ratio:0,color:new Se("rgba(255, 140, 0, 0)")}),new $w({ratio:.75,color:new Se("rgba(255, 140, 0, 1)")}),new $w({ratio:.9,color:new Se("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return Q5(e)}get blurRadius(){return r_e(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",t_e(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(hC**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||_i(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,sf(()=>{zY(H.getLogger(this),e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=Q5(e),super.read(e,t)}getSymbol(){return new Oo}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&bi(e,t,r),i&&typeof i=="string"&&await ni(e,t,i)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new Y3({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:C(this.colorStops),field:this.field,legendOptions:C(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([d({type:nC,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],_r.prototype,"authoringInfo",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_r.prototype,"blurRadius",null),u([d({type:[$w],json:{write:!0}})],_r.prototype,"colorStops",void 0),u([d({type:String,json:{write:!0}})],_r.prototype,"field",void 0),u([d({type:Op,json:{write:!0}})],_r.prototype,"legendOptions",void 0),u([d({type:Number,json:{write:!0}})],_r.prototype,"maxDensity",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_r.prototype,"maxPixelIntensity",null),u([d({type:Number,json:{write:!0}})],_r.prototype,"minDensity",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_r.prototype,"minPixelIntensity",null),u([d({type:Number,cast:ze,json:{write:!0}})],_r.prototype,"radius",void 0),u([d({type:Number,range:{min:0},json:{default:0,write:!0}})],_r.prototype,"referenceScale",void 0),u([fe({heatmap:"heatmap"})],_r.prototype,"type",void 0),u([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],_r.prototype,"valueExpression",void 0),u([d({type:String})],_r.prototype,"valueExpressionTitle",void 0),u([d({readOnly:!0})],_r.prototype,"_pixelIntensityToDensity",null),_r=Y3=u([T("esri.renderers.HeatmapRenderer")],_r);const fH=_r;let Fc=class extends dt(q){constructor(){super(...arguments),this.color=new Se([0,0,0,0]),this.label=null,this.threshold=0}};u([d({type:Se,json:{write:!0}})],Fc.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],Fc.prototype,"label",void 0),u([d({type:Number,range:{min:0,max:1},json:{write:!0}})],Fc.prototype,"threshold",void 0),Fc=u([T("esri.renderers.support.OthersCategory")],Fc);let xw=class extends dt(q){constructor(){super(...arguments),this.title=null}};u([d({type:String,json:{write:!0}})],xw.prototype,"title",void 0),xw=u([T("esri.renderers.support.PieChartLegendOptions")],xw);let Qi=class extends Sf(dt(Na)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Se([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Fc,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var t;return new Oo({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(pd)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,r)=>t+r.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,r)=>t+JSON.stringify(r),"")}async collectRequiredFields(t,r){await this.collectVVRequiredFields(t,r);for(const i of this.attributes)i.valueExpression&&await ni(t,r,i.valueExpression),i.field&&t.add(i.field)}};u([d({type:[hH],json:{write:!0}})],Qi.prototype,"attributes",void 0),u([d({type:Cu,json:{default:null,write:!0}})],Qi.prototype,"backgroundFillSymbol",void 0),u([d({type:Se,json:{write:!0}})],Qi.prototype,"defaultColor",void 0),u([d({type:String,json:{write:!0}})],Qi.prototype,"defaultLabel",void 0),u([d({type:Number,range:{min:0,max:1},json:{write:!0}})],Qi.prototype,"holePercentage",void 0),u([d({type:Fc,json:{write:!0}})],Qi.prototype,"othersCategory",void 0),u([d({type:xw,json:{write:!0}})],Qi.prototype,"legendOptions",void 0),u([d({type:yn,json:{default:null,write:!0}})],Qi.prototype,"outline",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],Qi.prototype,"size",void 0),u([fe({pieChart:"pie-chart"})],Qi.prototype,"type",void 0),Qi=u([T("esri.renderers.PieChartRenderer")],Qi);const n_e=Qi;var Q3;let Tc=Q3=class extends Sf(Na){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new Q3({description:this.description,label:this.label,symbol:C(this.symbol),visualVariables:C(this.visualVariables),authoringInfo:C(this.authoringInfo)})}};u([d({type:String,json:{write:!0}})],Tc.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],Tc.prototype,"label",void 0),u([d(lC)],Tc.prototype,"symbol",void 0),u([fe({simple:"simple"})],Tc.prototype,"type",void 0),Tc=Q3=u([T("esri.renderers.SimpleRenderer")],Tc);const xf=Tc,s_e=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function X3(e){return e instanceof we}function X5(e){return e instanceof ce?Object.keys(e.items):X3(e)?_i(e).keys():e?Object.keys(e):[]}function Wv(e,t){return e instanceof ce?e.items[t]:e[t]}function o_e(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function zy(e){return e?e.declaredClass:null}function mH(e,t){var f;const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=X5(e),n=X5(t);if(i.length===0&&n.length===0)return;if(!i.length||!n.length||o_e(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter(m=>!i.includes(m)),o=i.filter(m=>!n.includes(m)),a=i.filter(m=>n.includes(m)&&Wv(e,m)!==Wv(t,m)).concat(s,o).sort(),l=zy(e);if(l&&s_e.has(l)&&a.length)return{type:"complete",oldValue:e,newValue:t};let c;const h=X3(e)&&X3(t);for(const m of a){const y=Wv(e,m),g=Wv(t,m);let v;if((h||typeof y!="function"&&typeof g!="function")&&y!==g&&(y!=null||g!=null)){if(r&&r[m]&&typeof r[m]=="function")v=(f=r[m])==null?void 0:f.call(r,y,g);else if(y instanceof Date&&g instanceof Date){if(y.getTime()===g.getTime())continue;v={type:"complete",oldValue:y,newValue:g}}else v=typeof y=="object"&&typeof g=="object"&&zy(y)===zy(g)?mH(y,g):{type:"complete",oldValue:y,newValue:g};v!=null&&(c!=null?c.diff[m]=v:c={type:"partial",diff:{[m]:v}})}}return c}function GOe(e,t){return a_e(e,t)}function a_e(e,t){if(e==null)return!1;const r=t.split(".");let i=e;for(const n of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const s=i.diff[n];if(!s)return!1;i=s}}return!0}function qOe(e,t){if(!e)return!1;if(e.type==="partial"){const r=Object.keys(e.diff);return r.length===1&&r[0]===t}return!1}function l_e(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&zy(e)!==zy(t)?{type:"complete",oldValue:e,newValue:t}:mH(e,t)}let Pp=class extends dt(q){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};u([d(vw)],Pp.prototype,"value",void 0),u([d(vw)],Pp.prototype,"value2",void 0),u([d(vw)],Pp.prototype,"value3",void 0),Pp=u([T("esri.renderers.support.UniqueValue")],Pp);const Ph=Pp;let xl=class extends dt(q){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const r=typeof(t=Array.isArray(t)?t:[t])[0];return r==="string"||r==="number"?t.map(i=>new Ph({value:i})):r==="object"?t[0]instanceof Ph?t:t.map(i=>new Ph(i)):null}};u([d({type:String,json:{write:!0}})],xl.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],xl.prototype,"label",void 0),u([d(VS)],xl.prototype,"symbol",void 0),u([d({type:[Ph],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new Ph({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const r=[];for(const i of e){const n=[i.value,i.value2,i.value3].filter(pd).map(s=>s.toString());r.push(n)}t.values=r}}}})],xl.prototype,"values",void 0),u([et("values")],xl.prototype,"castValues",null),xl=u([T("esri.renderers.support.UniqueValueClass")],xl);const yH=xl;let sy=class extends dt(q){constructor(t){super(t),this.heading=null,this.classes=null}};u([d({type:String,json:{write:!0}})],sy.prototype,"heading",void 0),u([d({type:[yH],json:{write:!0}})],sy.prototype,"classes",void 0),sy=u([T("esri.renderers.support.UniqueValueGroup")],sy);const eI=sy;var tI;let Mc=tI=class extends q{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new tI({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};u([d({type:String,json:{write:!0}})],Mc.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],Mc.prototype,"label",void 0),u([d(lC)],Mc.prototype,"symbol",void 0),u([d(vw)],Mc.prototype,"value",void 0),Mc=tI=u([T("esri.renderers.support.UniqueValueInfo")],Mc);const Vy=Mc,u_e=()=>!!F("enable-feature:force-wosr"),c_e=()=>F.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),d_e=()=>F.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),p_e=()=>F.add("enable-i3s-patching",!0,!0,!0),h_e=()=>F.add("enable-i3s-patching",!1,!0,!0),ZOe=()=>!!F("enable-feature:SceneLayer-editing"),f_e=(e="i3s-patching")=>{switch(h_e(),d_e(),F.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":c_e();break;case"i3s-patching":p_e()}};f_e("i3s-patching");let ex={};async function m_e(e,t){try{return{data:(await w_e(e,t)).data,baseUrl:lee(e),styleUrl:e}}catch(r){return ho(r),null}}function y_e(e,t,r){var o;const i=t.portal!=null?t.portal:Ui.getDefault();let n;const s=`${i.url} - ${(o=i.user)==null?void 0:o.username} - ${e}`;return ex[s]||(ex[s]=g_e(e,i,r).then(a=>(n=a,a.fetchData())).then(a=>({data:a,baseUrl:n.itemUrl??"",styleName:e}))),ex[s]}function g_e(e,t,r){return t.load(r).then(()=>{const i=new yo({disableExtraQuery:!0,query:`owner:${eF} AND type:${tF} AND typekeywords:"${e}"`});return t.queryItems(i,r)}).then(({results:i})=>{var o;let n=null;const s=e.toLowerCase();if(i&&Array.isArray(i)){for(const a of i)if(((o=a.typeKeywords)==null?void 0:o.some(c=>c.toLowerCase()===s))&&a.type===tF&&a.owner===eF){n=a;break}}if(!n)throw new D("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(r)})}function v_e(e,t,r){return(e==null?void 0:e.styleUrl)!=null?m_e(e.styleUrl,r):(e==null?void 0:e.styleName)!=null?y_e(e.styleName,t,r):Promise.reject(new D("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function JOe(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function KOe(e,t,r=["gltf"]){if(t==="cimRef")return encodeURI(e.cimRef);if(e.formatInfos&&!u_e())for(const i of r){const n=e.formatInfos.find(s=>s.type===i);if(n)return n.href}return encodeURI(e.webRef)}function w_e(e,t){const r={responseType:"json",query:{f:"json"},...t};return Ot(Ms(e),r)}const eF="esri_en",tF="Style",YOe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var oy;const gH="esri.renderers.UniqueValueRenderer",Ya=()=>H.getLogger(gH),rF="uvInfos-watcher",iF="uvGroups-watcher",b_e=",",__e=Qt(Vy);function S_e(e){const{field1:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=e,a=!(!t||!r);return[{classes:(s??[]).map(l=>{var w;const{symbol:c,label:h,value:f,description:m}=l,[y,g,v]=a?((w=f==null?void 0:f.toString())==null?void 0:w.split(n||""))||[]:[f],b=[];return(t||o)&&b.push(y),r&&b.push(g),i&&b.push(v),{symbol:c,label:h,values:[b],description:m}})}]}let _t=oy=class extends Sf(Na){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<r.length;s++){const o=t.find(a=>a.value===r[s].value);o?l_e(o,r[s])?(n.changed.push({type:"complete",oldValue:o,newValue:r[s]}),i=!0):n.unchanged.push({oldValue:o,newValue:r[s]}):(n.added.push(r[s]),i=!0)}for(let s=0;s<t.length;s++)r.find(o=>o.value===t[s].value)||(n.removed.push(t[s]),i=!0);return i?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:Y0(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i!=null&&i.messages?i.messages.push(new D("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ya().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||Ui.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=lf(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=tg(e.styleUrl,i))}set uniqueValueGroups(e){this.styleOrigin?Ya().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Ya().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var i;if(this.styleOrigin)return void Ya().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?__e(e):new Vy({value:e,symbol:rG(t)}),(i=this.uniqueValueInfos)==null||i.push(r),this._valueInfoMap[r.value]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Ya().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const i=t[r];if(String(i.value)===String(e)){delete this._valueInfoMap[e],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await xd()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void Ya().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return(r==null?void 0:r.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(r==null?void 0:r.arcade)==null){const n=await xd(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this._getUniqueValueInfo(e,r);return(i==null?void 0:i.symbol)||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){var i;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=(i=this.uniqueValueInfos)==null?void 0:i.reduce((n,s)=>n+s.getMeshHash(),"");return`${e}.${t}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new oy({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:C(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:C(this.visualVariables),legendOptions:C(this.legendOptions),authoringInfo:C(this.authoringInfo),backgroundFillSymbol:C(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=C(this.uniqueValueInfos),r=C(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(C(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),ni(e,t,this.valueExpression)];bi(e,t,this.field),bi(e,t,this.field2),bi(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return v_e(this.styleOrigin,{portal:this.portal}).then(e=>{var r;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const n=new zd({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new Vy({value:i.name,symbol:n});t.push(s),this._valueInfoMap[i.name]=s}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((r=this.uniqueValueInfos)!=null&&r.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",b_e)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(rF);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(xe(()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description}),(i,n)=>{i!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,rF)}}_watchUniqueValueGroups(){this.removeHandles(iF);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(xe(()=>({classes:r.classes}),(i,n)=>{i!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const i of r.classes??[])t.push(xe(()=>({symbol:i.symbol,values:i.values,label:i.label,description:i.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,iF)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!r);for(const l of s)for(const c of l.classes??[]){const{symbol:h,label:f,values:m,description:y}=c;for(const g of m??[]){const{value:v,value2:b,value3:w}=g,_=[v];r&&_.push(b),i&&_.push(w);const $=a?_.join(n||""):_[0]??void 0;e.push(new Vy({symbol:h,label:f,value:$,description:y}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:i,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!t&&!i||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!r),a=s.map(c=>{var w;const{symbol:h,label:f,value:m,description:y}=c,[g,v,b]=o?((w=m==null?void 0:m.toString())==null?void 0:w.split(n||""))||[]:[m];return new yH({symbol:h,label:f,description:y,values:[new Ph({value:g,value2:v,value3:b})]})}),l=[new eI({classes:a})];e&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s,timeZone:o}=t??{};let a=this._cache.compiledFunc;const l=s.arcadeUtils;if(!a){const h=l.createSyntaxTree(this.valueExpression);a=l.createFunction(h),this._cache.compiledFunc=a}const c=l.executeFunction(a,l.createExecContext(e,l.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),o));return this._valueInfoMap[c+""]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(this.field2){const n=this.field2,s=this.field3,o=[];t&&o.push(r[t]),n&&o.push(r[n]),s&&o.push(r[s]),i=o.join(this.fieldDelimiter||"")}else t&&(i=r[t]);return this._valueInfoMap[i+""]}static fromPortalStyle(e,t){const r=new oy(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",(t==null?void 0:t.portal)||Ui.getDefault());const i=r.populateFromStyle();return i.catch(n=>{Ya().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),i}static fromStyleUrl(e,t){const r=new oy(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch(n=>{Ya().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),i}};u([d({readOnly:!0})],_t.prototype,"_cache",null),u([fe({uniqueValue:"unique-value"})],_t.prototype,"type",void 0),u([d(NB)],_t.prototype,"backgroundFillSymbol",void 0),u([d({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],_t.prototype,"field",null),u([et("field")],_t.prototype,"castField",null),u([X("field")],_t.prototype,"writeField",null),u([d({type:String,value:null,json:{write:!0}})],_t.prototype,"field2",null),u([d({type:String,value:null,json:{write:!0}})],_t.prototype,"field3",null),u([d({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],_t.prototype,"orderByClassesEnabled",void 0),u([d({type:String,value:null,json:{write:!0}})],_t.prototype,"valueExpression",null),u([d({type:String,json:{write:!0}})],_t.prototype,"valueExpressionTitle",void 0),u([d({type:Oh,json:{write:!0}})],_t.prototype,"legendOptions",void 0),u([d({type:String,json:{write:!0}})],_t.prototype,"defaultLabel",void 0),u([d(Yk({...VS},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],_t.prototype,"defaultSymbol",null),u([d({type:String,value:null,json:{write:!0}})],_t.prototype,"fieldDelimiter",null),u([d({type:Ui,readOnly:!0})],_t.prototype,"portal",void 0),u([J("portal",["styleName"])],_t.prototype,"readPortal",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],_t.prototype,"styleOrigin",void 0),u([J("styleOrigin",["styleName","styleUrl"])],_t.prototype,"readStyleOrigin",null),u([X("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],_t.prototype,"writeStyleOrigin",null),u([d({type:[eI],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||S_e(t)).map(i=>eI.fromJSON(i,r))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],_t.prototype,"uniqueValueGroups",null),u([d({type:[Vy],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],_t.prototype,"uniqueValueInfos",null),_t=oy=u([T(gH)],_t);const fC=_t,qS={key:"type",base:Na,typeMap:{heatmap:fH,simple:xf,"unique-value":fC,"class-breaks":DB,"dot-density":e_e,dictionary:Qbe,"pie-chart":n_e},errorContext:"renderer"},$_e={key:"type",base:Na,typeMap:{simple:xf,"unique-value":fC,"class-breaks":DB,heatmap:fH},errorContext:"renderer",validate:x_e};function x_e(e){switch(e.type){case"simple":return T_e(e);case"unique-value":return M_e(e);case"class-breaks":return E_e(e);case"heatmap":return e}}function T_e(e){if(e.symbol)return e;H.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function M_e(e){const t=e.uniqueValueInfos,r=t==null?void 0:t.filter(({symbol:i,label:n},s)=>(i||H.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!i));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=r),e}function E_e(e){const t=e.classBreakInfos,r=t==null?void 0:t.filter(({symbol:i,label:n},s)=>(i||H.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!i));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=r),e}function QOe(e,t){return N0(e,null,t)}const I_e=of({types:qS});function N0(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r!=null&&r.messages&&r.messages.push(new Zn("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):I_e(e,t,r):null}let k_e=class vH{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(ST),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new vH,i=this._originStores[Fe.DEFAULTS];i&&i.forEach((n,s)=>{r.set(s,C(n),Fe.DEFAULTS)});for(let n=Fe.SERVICE;n<ST;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{t&&t.has(a)||r.set(a,C(o),n)})}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=Fe.USER){let n=this._originStores[i];if(n||(n=new Map,this._originStores[i]=n),n.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const s=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),s!==r}return!1}delete(t,r=Fe.USER){const i=this._originStores[r];if(!i)return;const n=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let s=r-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return n}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],n=i==null?void 0:i.get(t),s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,r),s!==n}originOf(t){return this._propertyOriginMap.get(t)||Fe.DEFAULTS}forEach(t){this._values.forEach(t)}};const wH=e=>{let t=class extends e{constructor(...r){super(...r);const i=_i(this),n=i.store,s=new k_e;i.store=s,H8(i,n,s)}read(r,i){Z8(this,r,i)}getAtOrigin(r,i){const n=tx(this),s=Gl(i);if(typeof r=="string")return n.get(r,s);const o={};return r.forEach(a=>{o[a]=n.get(a,s)}),o}originOf(r){return lb(this.originIdOf(r))}originIdOf(r){return tx(this).originOf(r)}revert(r,i){const n=tx(this),s=Gl(i),o=_i(this);let a;a=typeof r=="string"?r==="*"?n.keys(s):[r]:r,a.forEach(l=>{o.invalidate(l),n.revert(l,s),o.commit(l)})}};return t=u([T("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function tx(e){return _i(e).store}let nF=class extends wH(we){};nF=u([T("esri.core.ReadOnlyMultiOriginJSONSupport")],nF);const O_e=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){return rx(this).delete(r,Gl(i))}write(r,i){return K8(this,r=r||{},i),r}setAtOrigin(r,i,n){_i(this).setAtOrigin(r,i,Gl(n))}removeOrigin(r){const i=rx(this),n=Gl(r),s=i.keys(n);for(const o of s)i.originOf(o)===n&&i.set(o,i.get(o,n),Fe.USER)}updateOrigin(r,i){const n=rx(this),s=Gl(i),o=Ts(this,r);for(let a=s+1;a<ST;++a)n.delete(r,a);n.set(r,o,s)}toJSON(r){return this.write({},r)}};return t=u([T("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function rx(e){return _i(e).store}const bH=e=>{let t=class extends O_e(wH(e)){constructor(...r){super(...r)}};return t=u([T("esri.core.MultiOriginJSONSupport")],t),t};let sF=class extends bH(we){};sF=u([T("esri.core.MultiOriginJSONSupport")],sF);const Ir=(e=>e)(["operational-layers","basemap","ground"]);var rI;let Ec=rI=class extends q{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new rI({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([d({type:String,json:{write:!0}})],Ec.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],Ec.prototype,"name",void 0),u([d({type:["boolean","date","number","string"],json:{write:!0}})],Ec.prototype,"returnType",void 0),u([d({type:String,json:{write:!0}})],Ec.prototype,"title",void 0),Ec=rI=u([T("esri.form.ExpressionInfo")],Ec);const P_e=Ec;let Ic=class extends q{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};u([d({type:String,json:{write:!0}})],Ic.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],Ic.prototype,"label",void 0),u([d()],Ic.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Ic.prototype,"visibilityExpression",void 0),Ic=u([T("esri.form.elements.Element")],Ic);const Ed=Ic;var iI;let Tw=iI=class extends q{constructor(e){super(e),this.type=null}clone(){return new iI({type:this.type})}};u([d({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Tw.prototype,"type",void 0),Tw=iI=u([T("esri.form.elements.inputs.AttachmentInput")],Tw);const C_e=Tw;var nI;let kc=nI=class extends Ed{constructor(e){super(e),this.attachmentKeyword=null,this.editableExpression=null,this.input=null,this.type="attachment"}clone(){return new nI({attachmentKeyword:this.attachmentKeyword,description:this.description,editableExpression:this.editableExpression,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};u([d({type:String,json:{write:!0}})],kc.prototype,"attachmentKeyword",void 0),u([d({type:String,json:{write:!0}})],kc.prototype,"editableExpression",void 0),u([d({type:C_e,json:{read:{source:"inputType"},write:{target:"inputType"}}})],kc.prototype,"input",void 0),u([d({type:["attachment"],json:{read:!1,write:!0}})],kc.prototype,"type",void 0),kc=nI=u([T("esri.form.elements.AttachmentElement")],kc);const oF=kc;let Mw=class extends q{constructor(t){super(t),this.type=null}};u([d()],Mw.prototype,"type",void 0),Mw=u([T("esri.form.elements.inputs.Input")],Mw);const Fa=Mw;let ay=class extends Fa{constructor(t){super(t),this.maxLength=null,this.minLength=0}};u([d({type:Number,json:{write:!0}})],ay.prototype,"maxLength",void 0),u([d({type:Number,json:{write:!0}})],ay.prototype,"minLength",void 0),ay=u([T("esri.form.elements.inputs.TextInput")],ay);const mC=ay;var sI;let Ew=sI=class extends mC{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new sI({maxLength:this.maxLength,minLength:this.minLength})}};u([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],Ew.prototype,"type",void 0),Ew=sI=u([T("esri.form.elements.inputs.BarcodeScannerInput")],Ew);const R_e=Ew;var oI;let Cp=oI=class extends Fa{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new oI({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};u([d({type:String,json:{write:!0}})],Cp.prototype,"noValueOptionLabel",void 0),u([d({type:Boolean,json:{write:!0}})],Cp.prototype,"showNoValueOption",void 0),u([d({type:["combo-box"],json:{read:!1,write:!0}})],Cp.prototype,"type",void 0),Cp=oI=u([T("esri.form.elements.inputs.ComboBoxInput")],Cp);const A_e=Cp;var aI;function aF(e){return e??null}function lF(e){return e??null}let so=aI=class extends Fa{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return aF(t.max)}writeMax(e,t){t.max=lF(e)}readMin(e,t){return aF(t.min)}writeMin(e,t){t.min=lF(e)}clone(){return new aI({max:this.max,min:this.min})}};u([d({type:String,json:{type:String,write:!0}})],so.prototype,"max",void 0),u([J("max")],so.prototype,"readMax",null),u([X("max")],so.prototype,"writeMax",null),u([d({type:String,json:{type:String,write:!0}})],so.prototype,"min",void 0),u([J("min")],so.prototype,"readMin",null),u([X("min")],so.prototype,"writeMin",null),u([d({type:["date-picker"],json:{read:!1,write:!0}})],so.prototype,"type",void 0),so=aI=u([T("esri.form.elements.inputs.DatePickerInput")],so);const L_e=so;var lI;function ix(e){return e??null}function nx(e){return e??null}let Ii=lI=class extends Fa{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return ix(t.max)}writeMax(e,t){t.max=nx(e)}readMin(e,t){return ix(t.min)}writeMin(e,t){t.min=nx(e)}readTimeResolution(e,t){return ix(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=nx(e)}clone(){return new lI({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([d({type:Boolean,json:{write:!0}})],Ii.prototype,"includeTimeOffset",void 0),u([d({type:String,json:{type:String,write:!0}})],Ii.prototype,"max",void 0),u([J("max")],Ii.prototype,"readMax",null),u([X("max")],Ii.prototype,"writeMax",null),u([d({type:String,json:{type:String,write:!0}})],Ii.prototype,"min",void 0),u([J("min")],Ii.prototype,"readMin",null),u([X("min")],Ii.prototype,"writeMin",null),u([d({type:String,json:{type:String,write:!0}})],Ii.prototype,"timeResolution",void 0),u([J("timeResolution")],Ii.prototype,"readTimeResolution",null),u([X("timeResolution")],Ii.prototype,"writeTimeResolution",null),u([d({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Ii.prototype,"type",void 0),Ii=lI=u([T("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Ii);const N_e=Ii;var uI;function uF(e){return e!=null?new Date(e):null}function cF(e){return e?e.getTime():null}let hs=uI=class extends Fa{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return uF(t.max)}writeMax(e,t){t.max=cF(e)}readMin(e,t){return uF(t.min)}writeMin(e,t){t.min=cF(e)}clone(){return new uI({includeTime:this.includeTime,max:this.max,min:this.min})}};u([d({type:Boolean,json:{write:!0}})],hs.prototype,"includeTime",void 0),u([d({type:Date,json:{type:Number,write:!0}})],hs.prototype,"max",void 0),u([J("max")],hs.prototype,"readMax",null),u([X("max")],hs.prototype,"writeMax",null),u([d({type:Date,json:{type:Number,write:!0}})],hs.prototype,"min",void 0),u([J("min")],hs.prototype,"readMin",null),u([X("min")],hs.prototype,"writeMin",null),u([d({type:["datetime-picker"],json:{read:!1,write:!0}})],hs.prototype,"type",void 0),hs=uI=u([T("esri.form.elements.inputs.DateTimePickerInput")],hs);const F_e=hs;var cI;let Rp=cI=class extends Fa{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new cI({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};u([d({type:String,json:{write:!0}})],Rp.prototype,"noValueOptionLabel",void 0),u([d({type:Boolean,json:{write:!0}})],Rp.prototype,"showNoValueOption",void 0),u([d({type:["radio-buttons"],json:{read:!1,write:!0}})],Rp.prototype,"type",void 0),Rp=cI=u([T("esri.form.elements.inputs.RadioButtonsInput")],Rp);const D_e=Rp;var dI;let Ap=dI=class extends Fa{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new dI({offValue:this.offValue,onValue:this.onValue})}};u([d({type:[String,Number],json:{write:!0}})],Ap.prototype,"offValue",void 0),u([d({type:[String,Number],json:{write:!0}})],Ap.prototype,"onValue",void 0),u([d({type:["switch"],json:{read:!1,write:!0}})],Ap.prototype,"type",void 0),Ap=dI=u([T("esri.form.elements.inputs.SwitchInput")],Ap);const j_e=Ap;var pI;let Iw=pI=class extends mC{constructor(e){super(e),this.type="text-area"}clone(){return new pI({maxLength:this.maxLength,minLength:this.minLength})}};u([d({type:["text-area"],json:{read:!1,write:!0}})],Iw.prototype,"type",void 0),Iw=pI=u([T("esri.form.elements.inputs.TextAreaInput")],Iw);const z_e=Iw;var hI;let kw=hI=class extends mC{constructor(e){super(e),this.type="text-box"}clone(){return new hI({maxLength:this.maxLength,minLength:this.minLength})}};u([d({type:["text-box"],json:{read:!1,write:!0}})],kw.prototype,"type",void 0),kw=hI=u([T("esri.form.elements.inputs.TextBoxInput")],kw);const V_e=kw;var fI;function sx(e){return e??null}function ox(e){return e??null}let Xi=fI=class extends Fa{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return sx(t.max)}writeMax(e,t){t.max=ox(e)}readMin(e,t){return sx(t.min)}writeMin(e,t){t.min=ox(e)}readTimeResolution(e,t){return sx(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=ox(e)}clone(){return new fI({max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([d({type:String,json:{type:String,write:!0}})],Xi.prototype,"max",void 0),u([J("max")],Xi.prototype,"readMax",null),u([X("max")],Xi.prototype,"writeMax",null),u([d({type:String,json:{type:String,write:!0}})],Xi.prototype,"min",void 0),u([J("min")],Xi.prototype,"readMin",null),u([X("min")],Xi.prototype,"writeMin",null),u([d({type:String,json:{type:String,write:!0}})],Xi.prototype,"timeResolution",void 0),u([J("timeResolution")],Xi.prototype,"readTimeResolution",null),u([X("timeResolution")],Xi.prototype,"writeTimeResolution",null),u([d({type:["time-picker"],json:{read:!1,write:!0}})],Xi.prototype,"type",void 0),Xi=fI=u([T("esri.form.elements.inputs.TimePickerInput")],Xi);const U_e=Xi,G_e={base:Fa,key:"type",typeMap:{"barcode-scanner":R_e,"combo-box":A_e,"date-picker":L_e,"datetime-picker":F_e,"datetimeoffset-picker":N_e,"radio-buttons":D_e,switch:j_e,"text-area":z_e,"text-box":V_e,"time-picker":U_e}};var mI;let kn=mI=class extends Ed{constructor(e){super(e),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return this._get("editable")??!0}set editable(e){this._set("editable",e)}clone(){return new mI({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};u([d({types:aG,json:{read:{reader:kS},write:!0}})],kn.prototype,"domain",void 0),u([d({type:Boolean,json:{write:!0}})],kn.prototype,"editable",null),u([d({type:String,json:{write:!0}})],kn.prototype,"editableExpression",void 0),u([d({type:String,json:{write:!0}})],kn.prototype,"fieldName",void 0),u([d({type:String,json:{write:!0}})],kn.prototype,"hint",void 0),u([d({types:G_e,json:{read:{source:"inputType"},write:{target:"inputType"}}})],kn.prototype,"input",void 0),u([d({type:String,json:{write:!0}})],kn.prototype,"requiredExpression",void 0),u([d({type:String,json:{read:!1,write:!0}})],kn.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],kn.prototype,"valueExpression",void 0),kn=mI=u([T("esri.form.elements.FieldElement")],kn);const dF=kn;var yI;let ra=yI=class extends Ed{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new yI({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:C(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};u([d({type:Number,json:{write:!0}})],ra.prototype,"displayCount",void 0),u([d({type:["list"],json:{write:!0}})],ra.prototype,"displayType",void 0),u([d({type:String,json:{write:!0}})],ra.prototype,"editableExpression",void 0),u([d({type:[gP],json:{write:!0}})],ra.prototype,"orderByFields",void 0),u([d({type:Number,json:{write:!0}})],ra.prototype,"relationshipId",void 0),u([d({type:["relationship"],json:{read:!1,write:!0}})],ra.prototype,"type",void 0),ra=yI=u([T("esri.form.elements.RelationshipElement")],ra);const pF=ra;var gI;let Lp=gI=class extends Ed{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new gI({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};u([d({type:String,json:{write:!0}})],Lp.prototype,"text",void 0),u([d({type:String,json:{write:!0}})],Lp.prototype,"textFormat",void 0),u([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Lp.prototype,"type",void 0),Lp=gI=u([T("esri.form.elements.TextElement")],Lp);const hF=Lp;function _H(e){return{typesWithGroup:{base:Ed,key:"type",typeMap:{attachment:oF,field:dF,group:e,relationship:pF,text:hF}},typesWithoutGroup:{base:Ed,key:"type",typeMap:{attachment:oF,field:dF,relationship:pF,text:hF}}}}function SH(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function $H(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function xH(e,t,r=!0){return e?e.map(i=>So(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var vI;let uo=vI=class extends Ed{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return xH(e,ax,!1)}readElements(e,t){return SH(t.formElements,ax,!1)}writeElements(e,t){t.formElements=$H(e,ax,!1)}clone(){return new vI({description:this.description,elements:C(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};u([d({json:{write:!0}})],uo.prototype,"elements",void 0),u([et("elements")],uo.prototype,"castElements",null),u([J("elements",["formElements"])],uo.prototype,"readElements",null),u([X("elements")],uo.prototype,"writeElements",null),u([d({type:["collapsed","expanded"],json:{write:!0}})],uo.prototype,"initialState",void 0),u([d({type:String,json:{read:!1,write:!0}})],uo.prototype,"type",void 0),uo=vI=u([T("esri.form.elements.GroupElement")],uo);const ax=_H(uo),q_e=uo,B_e=e=>e.type==="field",H_e=e=>e.type==="group",W_e=e=>e.type==="text";var wI;const lx=_H(q_e);let fs=wI=class extends q{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return xH(e,lx)}readElements(e,t){return SH(t.formElements,lx)}writeElements(e,t){t.formElements=$H(e,lx)}clone(){return new wI({description:this.description,expressionInfos:C(this.expressionInfos),elements:C(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const r=new Set,{description:i,elements:n,expressionInfos:s,title:o}=this;if(Uy(r,e,i),Uy(r,e,o),!n)return[];const a=Z_e(n,s).map(l=>ni(r,e,l));await Promise.all(a);for(const l of n)TH(r,{fieldsIndex:e,relationships:t},l);return Array.from(r).sort()}};function TH(e,t,r){var n;const{fieldsIndex:i}=t;if(!i||i.fields.length!==e.size)switch(Uy(e,i,r.label),Uy(e,i,r.description),r.type){case"field":bi(e,i,r.fieldName);break;case"group":r.elements.forEach(s=>TH(e,t,s));break;case"relationship":if(t.relationships){const s=t.relationships.find(o=>o.id===r.relationshipId);s&&bi(e,i,s.keyField)}Td(e,i,(n=r.orderByFields)==null?void 0:n.map(s=>s.field));break;case"text":Uy(e,i,r.text)}}function Z_e(e,t){if(!t||t.length===0)return[];const r=MH(e),i=[];for(const n of t)r.has(n.name)&&i.push(n.expression);return i}function MH(e){const t=new Set;for(const r of e)if(OA(t,r.visibilityExpression),!W_e(r)){if(H_e(r))fb(t,MH(r.elements));else if(OA(t,r.editableExpression),B_e(r)){const{requiredExpression:i,valueExpression:n}=r;fb(t,[i,n])}}return t}function Uy(e,t,r){Td(e,t,wU(r))}u([d({type:String,json:{write:!0}})],fs.prototype,"description",void 0),u([d({json:{write:!0}})],fs.prototype,"elements",void 0),u([et("elements")],fs.prototype,"castElements",null),u([J("elements",["formElements"])],fs.prototype,"readElements",null),u([X("elements")],fs.prototype,"writeElements",null),u([d({type:[P_e],json:{write:!0}})],fs.prototype,"expressionInfos",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],fs.prototype,"preserveFieldValuesWhenHidden",void 0),u([d({type:String,json:{write:!0}})],fs.prototype,"title",void 0),fs=wI=u([T("esri.form.FormTemplate")],fs);const J_e=fs;function fF(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const n of i)n.length>2&&(n[2]*=r)}function K_e(e,t,r){if(!e&&!t||!r)return;const i=Rb(r);mF(e,r,i),mF(t,r,i)}function mF(e,t,r){if(e)for(const i of e)Y_e(i.geometry,t,r)}function Y_e(e,t,r){if(!(e!=null&&e.spatialReference)||gr(e.spatialReference,t))return;const i=Rb(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)fF(e,e.rings,i);else if("paths"in e)fF(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=i)}}function yF(e,t,r){if(!(r!=null&&r.features)||!r.hasZ)return;const i=S7(r.geometryType,t,e.outSpatialReference);if(i!=null)for(const n of r.features)i(n.geometry)}var bI;const _I=new De({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Sr=bI=class extends q{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var n;const r=Pe.fromJSON(t.spatialReference),i=[];for(let s=0;s<e.length;s++){const o=e[s],a=ks.fromJSON(o),l=(n=o.geometry)==null?void 0:n.spatialReference;a.geometry==null||l||(a.geometry.spatialReference=r);const c=o.aggregateGeometries,h=a.aggregateGeometries;if(c&&h!=null)for(const f in h){const m=h[f],y=c[f],g=y==null?void 0:y.spatialReference;m==null||g||(m.spatialReference=r)}i.push(a)}return i}writeGeometryType(e,t,r,i){if(e)return void _I.write(e,t,r,i);const{features:n}=this;if(n){for(const s of n)if((s==null?void 0:s.geometry)!=null)return void _I.write(s.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=pu(e);return i&&!r&&t.spatialReference&&(i.spatialReference=Pe.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&i.geometry!=null&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new bI(this.cloneProperties())}cloneProperties(){return C({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const n=e==null?void 0:e[r];i.geometry=(n==null?void 0:n.toJSON())||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,n]}=e,s=c=>Math.round((c-i)/t),o=c=>Math.round((n-c)/r),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let c=0,h=a.length;c<h;c++)l!=null&&l(a[c].geometry)||(a.splice(c,1),c--,h--);return this.transform=e,this}unquantize(){var m,y;const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,n],scale:[s,o]}=r,a=g=>g*s+i,l=g=>n-g*o;let c=null,h=null;if(this.hasZ&&((m=r==null?void 0:r.scale)==null?void 0:m[2])!=null){const{translate:[,,g],scale:[,,v]}=r;c=b=>b*v+g}if(this.hasM&&((y=r==null?void 0:r.scale)==null?void 0:y[3])!=null){const{translate:[,,,g],scale:[,,,v]}=r;h=b=>b==null?b:b*v+g}const f=this._getHydrationFunction(e,a,l,c,h);for(const{geometry:g}of t)g!=null&&f&&f(g);return this.transform=null,this}_quantizePoints(e,t,r){let i,n;const s=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];if(o>0){const c=t(l[0]),h=r(l[1]);c===i&&h===n||(s.push([c-i,h-n]),i=c,n=h)}else i=t(l[0]),n=r(l[1]),s.push([i,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const n=wh(i)?i.rings:i.paths,s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o],c=this._quantizePoints(l,t,r);c&&s.push(c)}return s.length>0?(wh(i)?i.rings=s:i.paths=s,i):null}:e==="multipoint"?i=>{const n=this._quantizePoints(i.points,t,r);return n&&n.length>0?(i.points=n,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r,i,n){return e==="point"?s=>{s.x=t(s.x),s.y=r(s.y),i&&(s.z=i(s.z))}:e==="polyline"||e==="polygon"?s=>{const o=wh(s)?s.rings:s.paths;let a,l;for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];m>0?(a+=g[0],l+=g[1]):(a=g[0],l=g[1]),g[0]=t(a),g[1]=r(l)}}if(i&&n)for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=i(g[2]),g[3]=n(g[3])}}else if(i)for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=i(g[2])}}else if(n)for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=n(g[2])}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=r(s.ymin),s.xmax=t(s.xmax),s.ymax=r(s.ymax),i&&s.zmax!=null&&s.zmin!=null&&(s.zmax=i(s.zmax),s.zmin=i(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:e==="multipoint"?s=>{const o=s.points;let a,l;for(let c=0,h=o.length;c<h;c++){const f=o[c];c>0?(a+=f[0],l+=f[1]):(a=f[0],l=f[1]),f[0]=t(a),f[1]=r(l)}if(i&&n)for(let c=0,h=o.length;c<h;c++){const f=o[c];f[2]=i(f[2]),f[3]=n(f[3])}else if(i)for(let c=0,h=o.length;c<h;c++){const f=o[c];f[2]=i(f[2])}else if(n)for(let c=0,h=o.length;c<h;c++){const f=o[c];f[2]=n(f[2])}}:null}};u([d({type:String,json:{write:!0}})],Sr.prototype,"displayFieldName",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Sr.prototype,"exceededTransferLimit",void 0),u([d({type:[ks],json:{write:!0}})],Sr.prototype,"features",void 0),u([J("features")],Sr.prototype,"readFeatures",null),u([d({type:[kP],json:{write:!0}})],Sr.prototype,"fields",void 0),u([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:_I.read}}})],Sr.prototype,"geometryType",void 0),u([X("geometryType")],Sr.prototype,"writeGeometryType",null),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Sr.prototype,"hasM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Sr.prototype,"hasZ",void 0),u([d({types:Ld,json:{write:!0}})],Sr.prototype,"queryGeometry",void 0),u([J("queryGeometry")],Sr.prototype,"readQueryGeometry",null),u([d({type:Pe,json:{write:!0}})],Sr.prototype,"spatialReference",void 0),u([X("spatialReference")],Sr.prototype,"writeSpatialReference",null),u([d({json:{write:!0}})],Sr.prototype,"transform",void 0),Sr=bI=u([T("esri.rest.support.FeatureSet")],Sr),Sr.prototype.toJSON.isDefaultToJSON=!0;const EH=Sr;let Q_e=0,ca=class extends ka.LoadableMixin(K_(ce)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var r;const t=(r=this.layer)==null?void 0:r.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,r={}){await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);yF(t,this.layer.spatialReference,i);const n=EH.fromJSON(i);if(!this._requiresClientGraphicMapping())return n;const s=this.layer.objectIdField;for(const o of n.features){const a=o.attributes[s],l=this._idToClientGraphic.get(a);l&&(o.geometry=l.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(t,r={}){if(this._requiresClientGraphicMapping())throw new D("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);return yF(t,this.layer.spatialReference,i),i}queryFeatureCount(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r))}queryObjectIds(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r))}queryExtent(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r)).then(i=>({count:i.count,extent:ct.fromJSON(i.extent)}))}querySnapping(t,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",t,r))}async _applyEdits(t){if(!this._connection)throw new D("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let i=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[r]!=null?h.attributes[r]:null;if(t.addFeatures&&(i=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const h of t.deleteFeatures){const f=o(h);f!=null&&n.push(f)}const a=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const h of t.updateFeatures)if(s.push(this._serializeFeature(h)),a){const f=o(h);f!=null&&a.set(f,h)}}K_e(i?i.features:null,s,this.layer.spatialReference);const{fullExtent:l,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:n});return this.fullExtent=l,i&&i.finish(c.uidToObjectId),this._updateClientGraphicIds(a,c),this._createEditsResult(c)}async _prepareClientMapping(t,r){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const i=[];for(const{geometry:n}of t)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||i.push(n.load({signal:r}));i.length&&await Promise.all(i)}_updateClientGraphicIds(t,r){if(this._idToClientGraphic){if(t)for(const i of r.updateResults){if(!i.success)continue;const n=t.get(i.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const i of r.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const r=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:r?new D("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(t){const r=new Map,i=new Array(t.length);let n=null;for(let o=0;o<t.length;o++){const a=t[o],l=this._serializeFeature(a);n||a.geometry==null||(n=a.geometry.type),i[o]=l,r.set(`${l.uid}`,a)}const s=this;return{features:i,inferredGeometryType:n,finish(o){const a=s.sourceJSON.objectIdField;for(const l in o){const c=o[l],h=r.get(l);h&&(h.attributes||(h.attributes={}),c===-1?delete h.attributes[a]:h.attributes[a]=c,s._addIdToClientGraphic(h))}}}}_addIdToClientGraphic(t){var n;if(!this._idToClientGraphic)return;const r=this.sourceJSON.objectIdField,i=(n=t.attributes)==null?void 0:n[r];i!=null&&this._idToClientGraphic.set(i,t)}get _layerOrSourceGeometryType(){var t,r;return((t=this.layer)==null?void 0:t.geometryType)??((r=this.sourceJSON)==null?void 0:r.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:r}=t,i=this._geometryForSerialization(t),n=(Q_e++).toString();return i?{uid:n,geometry:i.toJSON(),attributes:r}:{uid:n,attributes:r}}_geometryForSerialization(t){const{geometry:r}=t;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?Pa.fromExtent(r.extent):null:r}async _startWorker(t){this._connection=await ule("MemorySourceWorker",{strategy:F("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:r,spatialReference:i,objectIdField:n,hasM:s,hasZ:o,timeInfo:a,dateFieldsTimeZone:l}=this.layer,c=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",g=>{H.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),g.preventDefault()}));const f={features:h.features,fields:r==null?void 0:r.map(g=>g.toJSON()),geometryType:xL.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:c?null:i&&i.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:l},m=await this._connection.invoke("load",f,{signal:t});for(const g of m.warnings)H.getLogger(this.layer).warn("#load()",`${g.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:g});m.featureErrors.length&&H.getLogger(this.layer).warn("#load()",`Encountered ${m.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:m.featureErrors});const y=m.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(y.geometryType=xL.toJSON(h.inferredGeometryType)),this.sourceJSON=y,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),h.finish(m.assignedObjectIds)}};u([vO({Type:ks,ensureType:Qt(ks)})],ca.prototype,"itemType",void 0),u([d()],ca.prototype,"type",void 0),u([d({constructOnly:!0})],ca.prototype,"layer",void 0),u([d({readOnly:!0})],ca.prototype,"_workerGeometryType",null),u([d()],ca.prototype,"sourceJSON",void 0),ca=u([T("esri.layers.graphics.sources.MemorySource")],ca);function X_e(e){return"portalItem"in e}const eSe=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):X_e(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return u([d({type:String})],t.prototype,"apiKey",null),t=u([T("esri.layers.mixins.APIKeyMixin")],t),t},tSe=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=vf(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",bhe(r,H.getLogger(this)))}};return u([d()],t.prototype,"title",null),u([d({type:String})],t.prototype,"url",null),t=u([T("esri.layers.mixins.ArcGISService")],t),t},rSe=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return u([d({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=u([T("esri.layers.mixins.CustomParametersMixin")],t),t},iSe=pge(),IH=new Map,kH=new Map;async function sPe(e,t,r){if(!e||!r)return!1;if(!t)return!0;const i=new URL(e).host;let n=IH.get(i);if(!n){const s=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await Ot(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===t}async function oPe(e,t,r=!1){var s,o,a;if(!e||!t)return!0;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=kH.get(i))==null?void 0:s.entries();if(n){for(const[l,c]of n)if(c.name===t){const h=!((o=c.stack)!=null&&o.hasForwardEdits());if(!h&&r){const[{deleteForwardEdits:f},{default:m}]=await Promise.all([ee(()=>import("./deleteForwardEdits-DCgAUOtY.js"),[]),ee(()=>import("./DeleteForwardEditsParameters-BghHd4Gi.js"),[])]),y=await f(i,l,new m({sessionId:iSe,moment:c.moment}));return y.success&&((a=c.stack)==null||a.clearForwardEdits()),y.success}return h}}return!0}function nSe(e,t){var n;if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=(n=kH.get(r))==null?void 0:n.entries();if(i){for(const[s,o]of i)if(o.name===t)return o.lockType==="edit"}return!1}const yC=new Aa.EventEmitter;function sSe(e){return yC.on("apply-edits",new WeakRef(e))}function oSe(e){return yC.on("update-moment",new WeakRef(e))}function aPe(e,t,r=null,i=!1){const n=pn();return i=t==null||i,yC.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:i,result:n.promise}),n}const OH=Symbol();function lPe(e){return e!=null&&typeof e=="object"&&OH in e}function am(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function ux(e,t,r){const i=new URL(e).host,n=IH.get(i),s=o=>!o||o===n;return s(t)&&s(r)||t===r}const aSe=e=>{var t;let r=class extends e{constructor(...i){super(...i),this[t]=!0,this._applyEditsHandler=n=>{const{serviceUrl:s,layerId:o,gdbVersion:a,mayReceiveServiceEdits:l,result:c}=n,h=s===this.url,f=o!=null&&this.layerId!=null&&o===this.layerId,m=am(this),y=am(this)&&ux(s,a,this.gdbVersion);if(!h||m&&!y||!f&&!l)return;const g=c.then(v=>{var _;if(this.lastEditsEventDate=new Date,f&&(v.addedFeatures.length||v.updatedFeatures.length||v.deletedFeatures.length||v.addedAttachments.length||v.updatedAttachments.length||v.deletedAttachments.length))return this.emit("edits",C(v)),v;const b=(_=v.editedFeatures)==null?void 0:_.find(({layerId:$})=>$===this.layerId);if(b){const{adds:$,updates:E,deletes:k}=b.editedFeatures,M={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:$?$.map(({attributes:P})=>({objectId:this.objectIdField&&P[this.objectIdField],globalId:this.globalIdField&&P[this.globalIdField]})):[],deletedFeatures:k?k.map(({attributes:P})=>({objectId:this.objectIdField&&P[this.objectIdField],globalId:this.globalIdField&&P[this.globalIdField]})):[],updatedFeatures:E?E.map(({current:{attributes:P}})=>({objectId:this.objectIdField&&P[this.objectIdField],globalId:this.globalIdField&&P[this.globalIdField]})):[],editedFeatures:C(v.editedFeatures),exceededTransferLimit:!1,historicMoment:C(v.historicMoment)};return this.emit("edits",M),M}const w={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:C(v.editedFeatures),exceededTransferLimit:!1,historicMoment:C(v.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,w.historicMoment)&&this.emit("edits",w),w}).then(v=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,v.historicMoment)&&(this.historicMoment=v.historicMoment),v));this.emit("apply-edits",{result:g})},this._updateMomentHandler=n=>{const{serviceUrl:s,gdbVersion:o,moment:a}=n,l=s===this.url,c=am(this),h=am(this)&&ux(s,o,this.gdbVersion),f=am(this)&&!ux(s,this.gdbVersion,null);l&&c&&h&&f&&"historicMoment"in this&&this.historicMoment!==a&&(this.historicMoment=a)},this.when().then(()=>{this.addHandles(sSe(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(oSe(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(i,n,s){return"historicMoment"in this&&this.historicMoment!==s&&nSe(i,n)}};return t=OH,u([d()],r.prototype,"lastEditsEventDate",void 0),r=u([T("esri.layers.mixins.EditBusLayer")],r),r};var SI;const cx=new De({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),dx=new De({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let oo=SI=class extends q{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new Ca({geometry:C(r),objectIds:C(s),spatialRelationship:i,timeExtent:C(n),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:n,units:s,distance:o}=this;return new SI({geometry:C(t),objectIds:C(n),spatialRelationship:r,timeExtent:C(i),where:e,units:s,distance:o})}};u([d({type:String,json:{write:!0}})],oo.prototype,"where",void 0),u([d({types:Ld,json:{write:!0}})],oo.prototype,"geometry",void 0),u([d({type:cx.apiValues,json:{name:"spatialRel",read:{reader:cx.read},write:{allowNull:!1,writer:cx.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],oo.prototype,"spatialRelationship",void 0),u([d({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],oo.prototype,"distance",void 0),u([d({type:[Number],json:{write:!0}})],oo.prototype,"objectIds",void 0),u([d({type:dx.apiValues,json:{read:dx.read,write:{writer:dx.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],oo.prototype,"units",void 0),u([d({type:Mo,json:{write:!0}})],oo.prototype,"timeExtent",void 0),oo=SI=u([T("esri.layers.support.FeatureFilter")],oo);const lSe=oo;var $I;const gF={read:{reader:P0},write:{writer:C0,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},vF={read:{reader:P0},write:{writer:C0,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},wF={name:"showExcludedLabels",default:!0};let Oc=$I=class extends q{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var i,n;const r=super.write(e,t);if(t!=null&&t.origin){if(r.filter){const s=Object.keys(r.filter);if(s.length>1||s[0]!=="where")return(i=t.messages)==null||i.push(new D("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return(n=t.messages)==null||n.push(new D("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new $I({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};u([d({type:lSe,json:{write:{allowNull:!0,writer(e,t,r,i){const n=e==null?void 0:e.write({},i);n&&Object.keys(n).length!==0?ri(r,n,t):ri(r,null,t)}}}})],Oc.prototype,"filter",void 0),u([d({json:{read:P0,write:{writer:C0,allowNull:!0},origins:{"web-map":gF,"portal-item":gF}}})],Oc.prototype,"includedEffect",void 0),u([d({json:{read:P0,write:{writer:C0,allowNull:!0},origins:{"web-map":vF,"portal-item":vF}}})],Oc.prototype,"excludedEffect",void 0),u([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":wF,"portal-item":wF}}})],Oc.prototype,"excludedLabelsVisible",void 0),Oc=$I=u([T("esri.layers.support.FeatureEffect")],Oc);const uSe=Oc,bF={write:{allowNull:!0}},cSe={type:uSe,json:{origins:{"web-map":bF,"portal-item":bF}}},dSe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return u([d(cSe)],t.prototype,"featureEffect",void 0),t=u([T("esri.layers.mixins.FeatureEffectLayer")],t),t},pSe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Ir}}},gC={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},vC={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Ir}}},hSe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:_d}}},fSe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Ir}}},mSe={value:null,type:_B,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Ir}}};function uPe(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const PH={write:{enabled:!0,layerContainerTypes:Ir},read:!0},xI={type:Number,json:{origins:{"web-document":PH,"portal-item":{write:!0}}}},ySe={...xI,json:{...xI.json,origins:{"web-document":{...PH,write:{enabled:!0,layerContainerTypes:Ir,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>{var i;return r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(i=t.layerDefinition)!=null&&i.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?g0(t.layerDefinition.drawingInfo.transparency):void 0:g0(t.drawingInfo.transparency)}}}},cPe={type:ct,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=ct.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=Pe.fromJSON(t.spatialReference)),r}}}},read:!1}},gSe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},vSe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:Ir}}},name:"layerDefinition.minScale",write:!0}},wSe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:Ir}}},name:"layerDefinition.maxScale",write:!0}},CH={json:{write:{ignoreOrigin:!0,layerContainerTypes:Ir},origins:{"web-map":{read:!1,write:!1}}}};let ia=class extends dt(q){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};u([d()],ia.prototype,"creatorField",void 0),u([d()],ia.prototype,"creationDateField",void 0),u([d()],ia.prototype,"editorField",void 0),u([d()],ia.prototype,"editDateField",void 0),u([d()],ia.prototype,"realm",void 0),u([d(Gb("dateFieldsTimeReference",!0))],ia.prototype,"timeZone",void 0),ia=u([T("esri.layers.support.EditFieldsInfo")],ia);const bSe=ia;let co=class extends dt(q){constructor(t){super(t)}};u([d({constructOnly:!0,json:{write:!0}})],co.prototype,"name",void 0),u([d({constructOnly:!0,json:{write:!0}})],co.prototype,"fields",void 0),u([d({constructOnly:!0,json:{write:!0}})],co.prototype,"isAscending",void 0),u([d({constructOnly:!0,json:{write:!0}})],co.prototype,"indexType",void 0),u([d({constructOnly:!0,json:{write:!0}})],co.prototype,"isUnique",void 0),u([d({constructOnly:!0,json:{write:!0}})],co.prototype,"description",void 0),co=u([T("esri.layers.support.FeatureIndex")],co);async function _Se(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=RH(e));const i=SSe(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let s=null;for(;;){const o=await e.source.queryFeaturesJSON(t,r);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;t.start+=i}return s}function SSe(e){return RH(e)*$Se(e)}function $Se(e){return e.capabilities.query.maxRecordCount||2e3}function RH(e){return e.capabilities.query.supportsMaxRecordCountFactor?Ca.MAX_MAX_RECORD_COUNT_FACTOR:1}var TI;let $r=TI=class extends q{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new TI(C({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};u([d({type:[String],json:{write:!0}})],$r.prototype,"attachmentTypes",void 0),u([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],$r.prototype,"attachmentsWhere",void 0),u([d({type:Boolean,json:{write:!0}})],$r.prototype,"cacheHint",void 0),u([d({type:[String],json:{write:!0}})],$r.prototype,"keywords",void 0),u([d({type:[Number],json:{write:!0}})],$r.prototype,"globalIds",void 0),u([d({json:{write:!0}})],$r.prototype,"name",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],$r.prototype,"num",void 0),u([d({type:[Number],json:{write:!0}})],$r.prototype,"objectIds",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],$r.prototype,"returnMetadata",void 0),u([d({type:[Number],json:{write:!0}})],$r.prototype,"size",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],$r.prototype,"start",void 0),u([X("start"),X("num")],$r.prototype,"writeStart",null),u([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],$r.prototype,"where",void 0),$r=TI=u([T("esri.rest.support.AttachmentQuery")],$r),$r.from=Qt($r);const xSe=$r;var MI;let It=MI=class extends q{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new MI(C({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};u([d({type:Boolean,json:{write:!0}})],It.prototype,"cacheHint",void 0),u([d({type:ws,json:{write:!0}})],It.prototype,"dynamicDataSource",void 0),u([d({type:String,json:{write:!0}})],It.prototype,"gdbVersion",void 0),u([d({type:Number,json:{write:!0}})],It.prototype,"geometryPrecision",void 0),u([d({type:Date})],It.prototype,"historicMoment",void 0),u([X("historicMoment")],It.prototype,"_writeHistoricMoment",null),u([d({type:Number,json:{write:!0}})],It.prototype,"maxAllowableOffset",void 0),u([d({json:{write:!0}})],It.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],It.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],It.prototype,"outFields",void 0),u([d({type:Pe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],It.prototype,"outSpatialReference",void 0),u([d({json:{write:!0}})],It.prototype,"relationshipId",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],It.prototype,"start",void 0),u([X("start"),X("num")],It.prototype,"writeStart",null),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],It.prototype,"num",void 0),u([d({json:{write:!0}})],It.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],It.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],It.prototype,"returnZ",void 0),u([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],It.prototype,"where",void 0),It=MI=u([T("esri.rest.support.RelationshipQuery")],It),It.from=Qt(It);const wC=It,hPe=Object.freeze(Object.defineProperty({__proto__:null,default:wC},Symbol.toStringTag,{value:"Module"})),EI=new De({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function TSe(e,t,r,i){const n=await Ru(e);if(await bC(e,t,i),!n.addAttachment)throw new D(i,"Layer source does not support addAttachment capability");return n.addAttachment(t,r)}function bC(e,t,r){var s,o;const{attributes:i}=t,{objectIdField:n}=e;return(o=(s=e.capabilities)==null?void 0:s.data)!=null&&o.supportsAttachment?t?i?n&&i[n]?Promise.resolve():Promise.reject(new D(r,`feature is missing the identifying attribute ${n}`)):Promise.reject(new D(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new D(r,"A feature is required to add/delete/update attachments")):Promise.reject(new D(r,"this layer doesn't support attachments"))}async function MSe(e,t,r,i,n){const s=await Ru(e);if(await bC(e,t,n),!s.updateAttachment)throw new D(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(t,r,i)}async function ESe(e,t,r){const{applyEdits:i}=await ee(()=>import("./editingSupport-C7uS14GR.js"),__vite__mapDeps([219,220])),n=await e.load();let s=r;return n.type==="feature"&&n.infoFor3D&&t.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await BSe(n,t.deleteFeatures,n.globalIdField)}),i(n,n.source,t,r)}async function ISe(e,t,r){const{uploadAssets:i}=await ee(()=>import("./editingSupport-C7uS14GR.js"),__vite__mapDeps([219,220])),n=await e.load();return i(n,n.source,t,r)}async function kSe(e,t,r,i){const n=await Ru(e);if(await bC(e,t,i),!n.deleteAttachments)throw new D(i,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,r)}async function OSe(e,t,r){const i=(await e.load({signal:t==null?void 0:t.signal})).source;if(!i.fetchRecomputedExtents)throw new D(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function PSe(e,t,r,i){var y,g;t=xSe.from(t),await e.load();const n=e.source,s=e.capabilities;if(!((y=s==null?void 0:s.data)!=null&&y.supportsAttachment))throw new D(i,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:c,size:h,start:f,where:m}=t;if(!((g=s==null?void 0:s.operations)!=null&&g.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(l==null?void 0:l.length)>0||(h==null?void 0:h.length)>0||c||f||m))throw new D(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a!=null&&a.length||l!=null&&l.length||m))throw new D(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new D(i,"Layer source does not support queryAttachments capability",t);return n.queryAttachments(t)}async function CSe(e,t,r,i){const n=await Ru(e);if(!n.queryObjectIds)throw new D(i,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(Ca.from(t)??e.createQuery(),r)}async function RSe(e,t,r,i){const n=await Ru(e);if(!n.queryFeatureCount)throw new D(i,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(Ca.from(t)??e.createQuery(),r)}async function ASe(e,t,r,i){const n=await Ru(e);if(!n.queryExtent)throw new D(i,"Layer source does not support queryExtent capability");return n.queryExtent(Ca.from(t)??e.createQuery(),r)}async function LSe(e,t,r,i){const n=await Ru(e);if(!n.queryRelatedFeatures)throw new D(i,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(wC.from(t),r)}async function NSe(e,t,r,i){const n=await Ru(e);if(!n.queryRelatedFeaturesCount)throw new D(i,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(wC.from(t),r)}async function FSe(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:r,updates:i}=await t.refresh();if(i!=null&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await nU(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function DSe(e){var o,a;const t=new Ca,r=(o=e.capabilities)==null?void 0:o.data,i=(a=e.capabilities)==null?void 0:a.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,i&&(t.compactGeometryEnabled=i.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),r&&(r.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),r.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:n,timeExtent:s}=e;return t.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function AH(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeGlobalID")return i.name}}function LH(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeOID")return i.name}}function jSe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function zSe(e,t){const{subtypes:r,subtypeField:i}=e;if(!t||!(r!=null&&r.length)||!i)return null;const n=t.attributes[i];return n==null?null:r.find(s=>s.code===n)}async function Ru(e){return(await e.load()).source}async function VSe(e,t){if(!Re||Re.findCredential(e))return;let r;try{const i=await Wz(e,t);i&&(r=await Re.checkSignInStatus(`${i}/sharing`))}catch{}if(r)try{const i=t!=null?t.signal:null;await Re.getCredential(e,{signal:i})}catch{}}async function USe(e,t,r){var n;const i=(n=e.parsedUrl)==null?void 0:n.path;i&&e.authenticationTriggerEvent===t&&await VSe(i,r)}function GSe(e){return!Ow(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const px=of({types:tG});function _C(e,t){var r;if(e.defaultSymbol)return(r=e.types)!=null&&r.length?new fC({defaultSymbol:px(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(i=>({id:i.id,symbol:px(i.symbol,i,t)}))}):new xf({symbol:px(e.defaultSymbol,e,t)})}function qSe(e){var i,n,s;let t=(i=e.sourceJSON)==null?void 0:i.cacheMaxAge;if(!t)return!1;const r=(s=(n=e.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:s.getTime();return r==null||(t*=1e3,Date.now()-r<t)}async function BSe(e,t,r){if(t==null)return null;const i=[],{objectIdField:n}=e;if(t.forEach(c=>{let h=null;if("attributes"in c){const{attributes:f}=c;h={globalId:f[r],objectId:f[n]!=null&&f[n]!==-1?f[n]:null}}else h={globalId:c.globalId,objectId:c.objectId!=null&&c.objectId!==-1?c.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||i.push(h.globalId))}),i.length===0)return null;const s=e.createQuery();s.where=i.map(c=>`${r}='${c}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[n,r],s.cacheHint=!1;const o=await qee(_Se(e,s));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const c of l){const h=c.attributes[r],f=c.attributes[n];h!=null&&f!=null&&f!==-1&&a.set(h,f)}return a}function HSe(e,t,r){if(!t||!r||!e)return null;const i=r.getAttribute(t);return i==null?null:e.find(n=>{const{id:s}=n;return s!=null&&s.toString()===i.toString()})??null}function Ow(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||WSe(e)}function WSe(e){var t,r;return!!((r=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&r.toLowerCase().split(",").map(i=>i.trim()).includes("map"))}let Np=class extends dt(q){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};u([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Np.prototype,"shapeAreaField",void 0),u([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Np.prototype,"shapeLengthField",void 0),u([d({type:String,json:{read:e=>_te.read(e)||Ste.read(e)}})],Np.prototype,"units",void 0),Np=u([T("esri.layers.support.GeometryFieldsInfo")],Np);const ZSe=Np;var II;let Fp=II=class extends q{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ce}clone(){return new II({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};u([d({type:String,json:{write:!0}})],Fp.prototype,"floorField",void 0),u([d({json:{read:!1,write:!1}})],Fp.prototype,"viewAllMode",void 0),u([d({json:{read:!1,write:!1}})],Fp.prototype,"viewAllLevelIds",void 0),Fp=II=u([T("esri.layers.support.LayerFloorInfo")],Fp);const JSe=Fp,_F=new De({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),SF=new De({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let On=class extends dt(q){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};u([d({json:{read:_F.read,write:_F.write}})],On.prototype,"cardinality",void 0),u([d({json:{read:!0,write:!0}})],On.prototype,"composite",void 0),u([d({json:{read:!0,write:!0}})],On.prototype,"id",void 0),u([d({json:{read:!0,write:!0}})],On.prototype,"keyField",void 0),u([d({json:{read:!0,write:!0}})],On.prototype,"keyFieldInRelationshipTable",void 0),u([d({json:{read:!0,write:!0}})],On.prototype,"name",void 0),u([d({json:{read:!0,write:!0}})],On.prototype,"relatedTableId",void 0),u([d({json:{read:!0,write:!0}})],On.prototype,"relationshipTableId",void 0),u([d({json:{read:SF.read,write:SF.write}})],On.prototype,"role",void 0),On=u([T("esri.layers.support.Relationship")],On);const KSe=On;function ye(e,t,r){return!!NH(e,t,r)}function ly(e,t,r){return NH(e,t,r)}function NH(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const YSe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function QSe(e){var r;const t=(r=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:r.map(i=>i.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function bg(e,t){var i;const r=(i=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:i.map(n=>n.toLowerCase());return!!(r!=null&&r.includes(t.toLowerCase()))}function FH(e,t){return{analytics:XSe(e),attachment:e2e(e),data:t2e(e),metadata:r2e(e),operations:i2e(e.capabilities,e,t),query:n2e(e,t),queryRelated:s2e(e),queryTopFeatures:o2e(e),editing:a2e(e)}}function XSe(e){return{supportsCacheHint:bg(e.advancedQueryCapabilities,"queryAnalytics")}}function e2e(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:bg(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:ye(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(i=>{const n=YSe[i.name];n&&(r[n]=!!i.isEnabled)}),r}function t2e(e){return{isVersioned:ye(e,"isDataVersioned",!1),supportsAttachment:ye(e,"hasAttachments",!1),supportsM:ye(e,"hasM",!1),supportsZ:ye(e,"hasZ",!1)}}function r2e(e){return{supportsAdvancedFieldProperties:ye(e,"supportsFieldDescriptionProperty",!1)}}function i2e(e,t,r){const i=e?e.toLowerCase().split(",").map(m=>m.trim()):[],n=r?vf(r):null,s=i.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),o=i.includes("editing")&&!t.datesInUnknownTimezone;let a=o&&i.includes("create"),l=o&&i.includes("delete"),c=o&&i.includes("update");const h=i.includes("changetracking"),f=t.advancedQueryCapabilities;return o&&!(a||l||c)&&(a=l=c=!0),{supportsCalculate:ye(t,"supportsCalculate",!1),supportsTruncate:ye(t,"supportsTruncate",!1),supportsValidateSql:ye(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:h,supportsQuery:s,supportsQueryAnalytics:ye(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:ye(f,"supportsQueryAttachments",!1),supportsQueryTopFeatures:ye(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:ye(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:ye(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:ye(t,"supportsAsyncConvert3D",!1)}}function n2e(e,t){const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,s=e.currentVersion,o=t==null?void 0:t.includes("MapServer"),a=!o||s>=F("mapserver-pbf-version-support"),l=_G(t),c=new Set((e.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:ly(e,"maxRecordCount",void 0),maxRecordCountFactor:ly(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:ly(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:QSe(r),supportsCacheHint:ye(r,"supportsQueryWithCacheHint",!1)||bg(r,"query"),supportsCentroid:ye(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:l,supportsDefaultSpatialReference:ye(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:ye(r,"supportsDisjointSpatialRel",!1),supportsDistance:ye(r,"supportsQueryWithDistance",!1),supportsDistinct:ye(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:ye(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&c.has("pbf"),supportsFullTextSearch:ye(r,"supportsFullTextSearch",!1),supportsGeometryProperties:ye(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:ye(r,"supportsHavingClause",!1),supportsHistoricMoment:ye(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:ye(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:ye(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:ye(r,"supportsPagination",!1),supportsPercentileStatistics:ye(r,"supportsPercentileStatistics",!1),supportsQuantization:ye(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ye(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:ye(i,"allowAnonymousToQuery",!0),supportsQueryByOthers:ye(i,"allowOthersToQuery",!0),supportsQueryGeometry:ye(e,"supportsReturningQueryGeometry",!1),supportsResultType:ye(r,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:ye(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:ye(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ye(e,"useStandardizedQueries",!1),supportsStatistics:ye(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:ye(r,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:ly(e,"tileMaxRecordCount",void 0)}}function s2e(e){const t=e.advancedQueryCapabilities,r=ye(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ye(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:bg(t,"queryRelated")}}function o2e(e){return{supportsCacheHint:bg(e.advancedQueryCapabilities,"queryTopFilter")}}function a2e(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:ye(e,"allowGeometryUpdates",!0),supportsGlobalId:ye(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:ye(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:ye(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ye(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ye(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ye(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ye(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ye(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ye(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:ye(r,"supportsAsyncApplyEdits",!1),zDefault:ly(e,"zDefault",void 0)}}function yPe(e){var t;return{operations:{supportsAppend:ye(e,"supportsAppend",!1),supportsExportClip:ye(e,"supportsExportClip",!1),supportsExportFrameset:ye(e,"supportsExportFrameset",!1),supportsMensuration:ye(e,"supportsMensuration",!1),supportsUpdate:ye(e,"supportsUpdate",!1)},query:{supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1}}}let na=class extends dt(q){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const r={};for(const i of Object.keys(t))r[i]=kS(t[i]);return r}writeDomains(t,r){var n;if(!t)return;const i={};for(const s of Object.keys(t))t[s]&&(i[s]=(n=t[s])==null?void 0:n.toJSON());r.domains=i}};u([d({type:Number,json:{write:!0}})],na.prototype,"code",void 0),u([d({type:Object,json:{write:!0}})],na.prototype,"defaultValues",void 0),u([d({json:{write:!0}})],na.prototype,"domains",void 0),u([J("domains")],na.prototype,"readDomains",null),u([X("domains")],na.prototype,"writeDomains",null),u([d({type:String,json:{write:!0}})],na.prototype,"name",void 0),na=u([T("esri.layers.support.Subtype")],na);const l2e=na,u2e=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(ce.ofType(co)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Pe.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:n,operations:s,editing:o}=r;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||s.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(this.userHasUpdateItemPrivileges){if(qSe(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const i=this.editFieldsInfo;return(i!=null&&i.creatorField||i!=null&&i.editorField)&&(r!=null&&r.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(r,i){return FH(i,this.url)}readEditingInfo(r,i){const{editingInfo:n}=i;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const i=C(r),{operations:n,editing:s}=i;return Ow(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),i):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,i):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=s.supportsGeometryUpdate=!0),i)}readGlobalIdFieldFromService(r,i){return AH(i)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||Ow(this))return!1;const{operations:i,editing:n}=r;return i.supportsEditing&&!(i.supportsAdd&&i.supportsDelete&&i.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:i,editing:n}=r;return Ow(this)?!i.supportsQuery:!(i.supportsAdd&&i.supportsDelete&&i.supportsEditing&&i.supportsQuery&&i.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(r,i){return i.type==="Table"}readMaxScale(r,i){return i.effectiveMaxScale||r||0}readMinScale(r,i){return i.effectiveMinScale||r||0}readObjectIdFieldFromService(r,i){return LH(i)}readServiceDefinitionExpression(r,i){return i.definitionQuery||i.definitionExpression}set url(r){if(r==null)return void this._set("url",r);const i=_he({layer:this,url:r,nonStandardUrlAllowed:!0,logger:H.getLogger(this)});this._set("url",i.url),i.layerId!=null&&this._set("layerId",i.layerId)}writeUrl(r,i,n,s){She(this,r,null,i,s)}readVersion(r,i){return jSe(i)}};return u([d({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),u([d({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),u([d({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),u([J("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),u([d(Gb("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),u([d({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),u([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),u([d({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),u([d({readOnly:!0,type:bSe})],t.prototype,"editFieldsInfo",void 0),u([d({readOnly:!0})],t.prototype,"editingInfo",void 0),u([J("editingInfo")],t.prototype,"readEditingInfo",null),u([d({readOnly:!0})],t.prototype,"effectiveCapabilities",null),u([d((()=>{const r=C(mSe),i=r.json.origins;return i["web-map"]={read:!1,write:!1},i["portal-item"]={read:!1,write:!1},r})())],t.prototype,"elevationInfo",void 0),u([d({type:JSe,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:Ir}}}}})],t.prototype,"floorInfo",void 0),u([d({type:ct,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),u([d()],t.prototype,"gdbVersion",void 0),u([d({readOnly:!0,type:ZSe,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),u([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:EI.read}}}})],t.prototype,"geometryType",void 0),u([d({type:String})],t.prototype,"globalIdField",void 0),u([J("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),u([d({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),u([d({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),u([d({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),u([d({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),u([d({readOnly:!0,type:SS})],t.prototype,"heightModelInfo",void 0),u([d({type:Date})],t.prototype,"historicMoment",void 0),u([d({type:ce.ofType(co),readOnly:!0})],t.prototype,"indexes",void 0),u([d({readOnly:!0})],t.prototype,"isTable",void 0),u([J("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),u([d({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),u([d(wSe)],t.prototype,"maxScale",void 0),u([J("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),u([d(vSe)],t.prototype,"minScale",void 0),u([J("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),u([d({type:String})],t.prototype,"objectIdField",void 0),u([J("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),u([d(Gb("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),u([d({type:[KSe],readOnly:!0})],t.prototype,"relationships",void 0),u([d({type:Boolean})],t.prototype,"returnM",void 0),u([d({type:Boolean})],t.prototype,"returnZ",void 0),u([d({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),u([d({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),u([J("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),u([d({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),u([d()],t.prototype,"sourceJSON",void 0),u([d({type:Pe,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),u([d({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),u([d({type:[l2e],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),u([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),u([d(hSe)],t.prototype,"url",null),u([X("url")],t.prototype,"writeUrl",null),u([d({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),u([J("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=u([T("esri.layers.mixins.FeatureLayerBase")],t),t};let Dp=class extends dt(q){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};u([d({type:String,json:{write:!0}})],Dp.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],Dp.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],Dp.prototype,"returnType",void 0),Dp=u([T("esri.layers.support.ExpressionInfo")],Dp);const SC=Dp;var kI;let sa=kI=class extends q{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new kI({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:C(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};u([d({type:Boolean,json:{write:!0}})],sa.prototype,"isAutoGenerated",void 0),u([d({type:String,json:{write:!0}})],sa.prototype,"name",void 0),u([d({type:String,json:{write:!0}})],sa.prototype,"alias",void 0),u([d({type:String,json:{write:!0}})],sa.prototype,"onStatisticField",void 0),u([d({type:SC,json:{write:!0}})],sa.prototype,"onStatisticExpression",void 0),u([d({type:String,json:{write:!0}})],sa.prototype,"statisticType",void 0),sa=kI=u([T("esri.layers.support.AggregateField")],sa);const Id=sa;let su=class extends q{constructor(){super(...arguments),this.type=null}};u([d({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],su.prototype,"type",void 0),su=u([T("esri.layers.support.FeatureReduction")],su);const $C="__begin__",xC="__end__",c2e=new RegExp($C,"ig"),d2e=new RegExp(xC,"ig"),$F=new RegExp("^"+$C,"i"),xF=new RegExp(xC+"$","i"),m_='"',p2e=m_+" + ",h2e=" + "+m_;function f2e(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function m2e(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function TC(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=f2e(e.labelExpression),t.type="conventional"),t}function y2e(e){const t=TC(e);if(!t)return null;switch(t.type){case"conventional":return OI(t.expression);case"arcade":return t.expression}return null}function g2e(e){const t=TC(e);if(!t)return null;switch(t.type){case"conventional":return w2e(t.expression);case"arcade":return DH(t.expression)}return null}function OI(e){let t;return e?(t=Qk(e,r=>$C+'$feature["'+r+'"]'+xC),t=$F.test(t)?t.replace($F,""):m_+t,t=xF.test(t)?t.replace(xF,""):t+m_,t=t.replaceAll(c2e,p2e).replaceAll(d2e,h2e)):t='""',t}const v2e=/^\s*\{([^}]+)\}\s*$/i;function w2e(e){const t=e==null?void 0:e.match(v2e);return(t==null?void 0:t[1].trim())||null}const b2e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,_2e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,S2e=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function DH(e){if(!e)return null;let t=b2e.exec(e)||_2e.exec(e);return t?t[1]||t[3]:(t=S2e.exec(e),t?t[2]:null)}var PI;let Tl=PI=class extends q{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?OI(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=OI(this.value)),e!=null&&(t[r]=e)}clone(){return new PI({expression:this.expression,title:this.title,value:this.value})}};u([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Tl.prototype,"expression",void 0),u([J("expression",["expression","value"])],Tl.prototype,"readExpression",null),u([X("expression")],Tl.prototype,"writeExpression",null),u([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Tl.prototype,"title",void 0),u([d({json:{read:!1,write:!1}})],Tl.prototype,"value",void 0),Tl=PI=u([T("esri.layers.support.LabelExpressionInfo")],Tl);const jH=Tl;var CI;const Zv=new De({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function Jv(e,t,r){return{enabled:!Hz(r==null?void 0:r.layer)}}function zH(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function $2e(e){return(e==null?void 0:e.type)==="map-image"}function VH(e){var t,r;return!!$2e(e)&&!!((r=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&r.supportsArcadeExpressionForLabeling)}function x2e(e){return zH(e)||VH(e==null?void 0:e.layer)}let Bt=CI=class extends q{static evaluateWhere(e,t){const r=(i,n,s)=>{switch(n){case"=":return i==s;case"<>":return i!=s;case">":return i>s;case">=":return i>=s;case"<":return i<s;case"<=":return i<=s}return!1};try{if(e==null)return!0;const i=e.split(" ");if(i.length===3)return r(t[i[0]],i[1],i[2]);if(i.length===7){const n=r(t[i[0]],i[1],i[2]),s=i[3],o=r(t[i[4]],i[5],i[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=pwe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=m2e(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const i=DH(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(e==null&&this.labelExpression!=null&&zH(i))e=new jH({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(i);n.expression&&(t[r]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return TC(this)}getLabelExpressionArcade(){return y2e(this)}getLabelExpressionSingleField(){return g2e(this)}hash(){return JSON.stringify(this)}clone(){return new CI({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:C(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:C(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};u([d({type:String,json:{write:!0}})],Bt.prototype,"name",void 0),u([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:Jv}}}}})],Bt.prototype,"allowOverrun",void 0),u([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:Jv}}}}})],Bt.prototype,"deconflictionStrategy",void 0),u([d({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&(r==null?void 0:r.origin)==="service"&&VH(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],Bt.prototype,"labelExpression",void 0),u([J("labelExpression")],Bt.prototype,"readLabelExpression",null),u([X("labelExpression")],Bt.prototype,"writeLabelExpression",null),u([d({type:jH,json:{write:{overridePolicy:(e,t,r)=>x2e(r)?{allowNull:!0}:{enabled:!1}}}})],Bt.prototype,"labelExpressionInfo",void 0),u([X("labelExpressionInfo")],Bt.prototype,"writeLabelExpressionInfo",null),u([d({type:Zv.apiValues,json:{type:Zv.jsonValues,read:Zv.read,write:Zv.write}})],Bt.prototype,"labelPlacement",void 0),u([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Bt.prototype,"labelPosition",void 0),u([d({type:Number})],Bt.prototype,"maxScale",void 0),u([X("maxScale")],Bt.prototype,"writeMaxScale",null),u([d({type:Number})],Bt.prototype,"minScale",void 0),u([X("minScale")],Bt.prototype,"writeMinScale",null),u([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Jv}}}}})],Bt.prototype,"repeatLabel",void 0),u([d({type:Number,cast:ze,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Jv}}}}})],Bt.prototype,"repeatLabelDistance",void 0),u([d({types:Mpe,json:{origins:{"web-scene":{types:Epe,write:D5,default:null}},write:D5,default:null}})],Bt.prototype,"symbol",void 0),u([d({type:Boolean,json:{write:!0}})],Bt.prototype,"useCodedValues",void 0),u([d({type:String,json:{write:!0}})],Bt.prototype,"where",void 0),Bt=CI=u([T("esri.layers.support.LabelClass")],Bt);const BS=Bt;var RI;let Jr=RI=class extends su{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=ze("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const i=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());ri(r,i,t)}readRenderer(e,t,r){var n;const i=(n=t.drawingInfo)==null?void 0:n.renderer;return i?N0(i,t,r)??void 0:_C(t,r)}clone(){return new RI({fields:C(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:C(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:C(this.popupTemplate),renderer:C(this.renderer),binType:C(this.binType),size:this.size})}};u([fe({binning:"binning"})],Jr.prototype,"type",void 0),u([fe({geohash:"geohash",square:"square"}),d({type:["geohash","square"]})],Jr.prototype,"binType",void 0),u([d({type:Number,json:{write:!0}})],Jr.prototype,"fixedBinLevel",void 0),u([d({type:[BS],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Jr.prototype,"labelingInfo",void 0),u([d(vC)],Jr.prototype,"labelsVisible",void 0),u([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Jr.prototype,"maxScale",void 0),u([d(gC)],Jr.prototype,"popupEnabled",void 0),u([d({type:ag,json:{name:"popupInfo",write:!0}})],Jr.prototype,"popupTemplate",void 0),u([d({type:Number,cast:e=>e==="auto"?e:ze(e)})],Jr.prototype,"size",void 0),u([d({type:[Id],json:{write:!0}})],Jr.prototype,"fields",void 0),u([X("fields")],Jr.prototype,"writeFields",null),u([d({types:qS,json:{write:{target:"drawingInfo.renderer"}}})],Jr.prototype,"renderer",void 0),u([J("renderer",["drawingInfo.renderer"])],Jr.prototype,"readRenderer",null),Jr=RI=u([T("esri.layers.support.FeatureReductionBinning")],Jr);const UH=Jr;var AI;function TF(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let ir=AI=class extends q{constructor(e){super(e),this.type="cluster",this.clusterRadius=ze("80px"),this.clusterMinSize=ze("12px"),this.clusterMaxSize=ze("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){var n,s;const i=(n=t.drawingInfo)==null?void 0:n.renderer;return(s=i==null?void 0:i.authoringInfo)!=null&&s.isAutoGenerated?null:i?TF(i)?null:N0(i,t,r)??void 0:_C(t,r)}readSymbol(e,t,r){var n,s;const i=(n=t.drawingInfo)==null?void 0:n.renderer;if((s=i==null?void 0:i.authoringInfo)!=null&&s.isAutoGenerated)return null;if(i&&TF(i)){const o=N0(i,t,r);return o==null?void 0:o.symbol}return null}writeSymbol(e,t,r,i){var s,o;const n=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const a=new xf({symbol:e});t.drawingInfo={renderer:a.write({},i)}}}writeFields(e,t,r){const i=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());ri(r,i,t)}readFields(e,t,r){return e.filter(i=>!i.isAutoGenerated).map(i=>Id.fromJSON(i))}clone(){return new AI({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:C(this.labelingInfo),labelsVisible:this.labelsVisible,fields:C(this.fields),maxScale:this.maxScale,renderer:C(this.renderer),symbol:C(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:C(this.popupTemplate)})}};u([d({type:["cluster"],readOnly:!0,json:{write:!0}})],ir.prototype,"type",void 0),u([d({type:Number,cast:e=>e==="auto"?e:ze(e),json:{write:!0}})],ir.prototype,"clusterRadius",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],ir.prototype,"clusterMinSize",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],ir.prototype,"clusterMaxSize",void 0),u([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ir.prototype,"maxScale",void 0),u([d(gC)],ir.prototype,"popupEnabled",void 0),u([d({type:ag,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ir.prototype,"popupTemplate",void 0),u([d({types:qS,json:{write:{target:"drawingInfo.renderer"}}})],ir.prototype,"renderer",void 0),u([J("renderer",["drawingInfo.renderer"])],ir.prototype,"readRenderer",null),u([d({types:xpe})],ir.prototype,"symbol",void 0),u([J("symbol",["drawingInfo.renderer"])],ir.prototype,"readSymbol",null),u([X("symbol")],ir.prototype,"writeSymbol",null),u([d({type:[BS],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ir.prototype,"labelingInfo",void 0),u([d(vC)],ir.prototype,"labelsVisible",void 0),u([d({type:[Id],json:{write:!0}})],ir.prototype,"fields",void 0),u([X("fields")],ir.prototype,"writeFields",null),u([J("fields")],ir.prototype,"readFields",null),ir=AI=u([T("esri.layers.support.FeatureReductionCluster")],ir);const GH=ir;var LI;let Pw=LI=class extends su{constructor(e){super(e),this.type="selection"}clone(){return new LI}};u([d({type:["selection"]})],Pw.prototype,"type",void 0),Pw=LI=u([T("esri.layers.support.FeatureReductionSelection")],Pw);const MF=Pw,EF={key:"type",base:su,typeMap:{cluster:GH,binning:UH}},T2e={types:{key:"type",base:su,typeMap:{selection:MF,cluster:GH,binning:UH}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:EF},"portal-item":{types:EF},"web-scene":{types:{key:"type",base:su,typeMap:{selection:MF}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Ir}}}}},op={Base64:0,Hex:1,String:2,Raw:3},Ch=8,qH=(1<<Ch)-1;function Wl(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function M2e(e){const t=[];for(let r=0,i=e.length*Ch;r<i;r+=Ch)t[r>>5]|=(e.charCodeAt(r/Ch)&qH)<<r%32;return t}function E2e(e){const t=[];for(let r=0,i=32*e.length;r<i;r+=Ch)t.push(String.fromCharCode(e[r>>5]>>>r%32&qH));return t.join("")}function I2e(e){const t="0123456789abcdef",r=[];for(let i=0,n=4*e.length;i<n;i++)r.push(t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15));return r.join("")}function k2e(e){const t="=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let n=0,s=4*e.length;n<s;n+=3){const o=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*e.length?i.push(t):i.push(r.charAt(o>>6*(3-a)&63))}return i.join("")}function O2e(e,t){return e<<t|e>>>32-t}function HS(e,t,r,i,n,s){return Wl(O2e(Wl(Wl(t,e),Wl(i,s)),n),r)}function Gr(e,t,r,i,n,s,o){return HS(t&r|~t&i,e,t,n,s,o)}function qr(e,t,r,i,n,s,o){return HS(t&i|r&~i,e,t,n,s,o)}function Br(e,t,r,i,n,s,o){return HS(t^r^i,e,t,n,s,o)}function Hr(e,t,r,i,n,s,o){return HS(r^(t|~i),e,t,n,s,o)}function P2e(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let r=1732584193,i=-271733879,n=-1732584194,s=271733878;for(let o=0;o<e.length;o+=16){const a=r,l=i,c=n,h=s;r=Gr(r,i,n,s,e[o],7,-680876936),s=Gr(s,r,i,n,e[o+1],12,-389564586),n=Gr(n,s,r,i,e[o+2],17,606105819),i=Gr(i,n,s,r,e[o+3],22,-1044525330),r=Gr(r,i,n,s,e[o+4],7,-176418897),s=Gr(s,r,i,n,e[o+5],12,1200080426),n=Gr(n,s,r,i,e[o+6],17,-1473231341),i=Gr(i,n,s,r,e[o+7],22,-45705983),r=Gr(r,i,n,s,e[o+8],7,1770035416),s=Gr(s,r,i,n,e[o+9],12,-1958414417),n=Gr(n,s,r,i,e[o+10],17,-42063),i=Gr(i,n,s,r,e[o+11],22,-1990404162),r=Gr(r,i,n,s,e[o+12],7,1804603682),s=Gr(s,r,i,n,e[o+13],12,-40341101),n=Gr(n,s,r,i,e[o+14],17,-1502002290),i=Gr(i,n,s,r,e[o+15],22,1236535329),r=qr(r,i,n,s,e[o+1],5,-165796510),s=qr(s,r,i,n,e[o+6],9,-1069501632),n=qr(n,s,r,i,e[o+11],14,643717713),i=qr(i,n,s,r,e[o],20,-373897302),r=qr(r,i,n,s,e[o+5],5,-701558691),s=qr(s,r,i,n,e[o+10],9,38016083),n=qr(n,s,r,i,e[o+15],14,-660478335),i=qr(i,n,s,r,e[o+4],20,-405537848),r=qr(r,i,n,s,e[o+9],5,568446438),s=qr(s,r,i,n,e[o+14],9,-1019803690),n=qr(n,s,r,i,e[o+3],14,-187363961),i=qr(i,n,s,r,e[o+8],20,1163531501),r=qr(r,i,n,s,e[o+13],5,-1444681467),s=qr(s,r,i,n,e[o+2],9,-51403784),n=qr(n,s,r,i,e[o+7],14,1735328473),i=qr(i,n,s,r,e[o+12],20,-1926607734),r=Br(r,i,n,s,e[o+5],4,-378558),s=Br(s,r,i,n,e[o+8],11,-2022574463),n=Br(n,s,r,i,e[o+11],16,1839030562),i=Br(i,n,s,r,e[o+14],23,-35309556),r=Br(r,i,n,s,e[o+1],4,-1530992060),s=Br(s,r,i,n,e[o+4],11,1272893353),n=Br(n,s,r,i,e[o+7],16,-155497632),i=Br(i,n,s,r,e[o+10],23,-1094730640),r=Br(r,i,n,s,e[o+13],4,681279174),s=Br(s,r,i,n,e[o],11,-358537222),n=Br(n,s,r,i,e[o+3],16,-722521979),i=Br(i,n,s,r,e[o+6],23,76029189),r=Br(r,i,n,s,e[o+9],4,-640364487),s=Br(s,r,i,n,e[o+12],11,-421815835),n=Br(n,s,r,i,e[o+15],16,530742520),i=Br(i,n,s,r,e[o+2],23,-995338651),r=Hr(r,i,n,s,e[o],6,-198630844),s=Hr(s,r,i,n,e[o+7],10,1126891415),n=Hr(n,s,r,i,e[o+14],15,-1416354905),i=Hr(i,n,s,r,e[o+5],21,-57434055),r=Hr(r,i,n,s,e[o+12],6,1700485571),s=Hr(s,r,i,n,e[o+3],10,-1894986606),n=Hr(n,s,r,i,e[o+10],15,-1051523),i=Hr(i,n,s,r,e[o+1],21,-2054922799),r=Hr(r,i,n,s,e[o+8],6,1873313359),s=Hr(s,r,i,n,e[o+15],10,-30611744),n=Hr(n,s,r,i,e[o+6],15,-1560198380),i=Hr(i,n,s,r,e[o+13],21,1309151649),r=Hr(r,i,n,s,e[o+4],6,-145523070),s=Hr(s,r,i,n,e[o+11],10,-1120210379),n=Hr(n,s,r,i,e[o+2],15,718787259),i=Hr(i,n,s,r,e[o+9],21,-343485551),r=Wl(r,a),i=Wl(i,l),n=Wl(n,c),s=Wl(s,h)}return[r,i,n,s]}function BH(e,t=op.Hex){const r=t||op.Base64,i=P2e(M2e(e),e.length*Ch);switch(r){case op.Raw:return i;case op.Hex:return I2e(i);case op.String:return E2e(i);case op.Base64:return k2e(i)}}const C2e=()=>H.getLogger("esri.views.2d.layers.support.clusterUtils");F.add("esri-cluster-arcade-enabled",!0);const R2e=F("esri-cluster-arcade-enabled"),A2e=new Set(["simple-line","simple-fill","picture-fill"]);function IF(e,t){let r=t.clone();if(!L2e(r))return r;if(t.getSymbols().some(i=>A2e.has(i.type))&&(r=new xf({symbol:new Oo})),r.authoringInfo||(r.authoringInfo=new nC),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const i=(r.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");i.forEach(n=>{n.type==="rotation"?n.field?n.field=qu(e,n.field,"avg_angle","number"):n.valueExpression&&(n.field=lm(e,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=qu(e,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=qu(e,n.field,"avg","number"):n.valueExpression&&(n.field=lm(e,n.valueExpression,"avg","number"),n.valueExpression=null)}),r.visualVariables=i}switch(r.type){case"simple":break;case"pie-chart":for(const i of r.attributes)i.field?i.field=qu(e,i.field,"sum","number"):i.valueExpression&&(i.field=lm(e,i.valueExpression,"sum","number"),i.valueExpression=null);break;case"unique-value":r.field?r.field=qu(e,r.field,"mode","string"):r.valueExpression&&(r.field=lm(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=qu(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=qu(e,r.field,"avg","number"):r.valueExpression&&(r.field=lm(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const L2e=e=>{const t=r=>C2e().error(new D("Unsupported-renderer",r,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if(r!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!R2e){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(r=>!(!("valueExpression"in r)||!r.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function N2e(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const i=r,n="field",s=t.toLowerCase()+",norm:"+n+","+i.toLowerCase();return"cluster_avg_"+BH(s)}}}function lm(e,t,r,i){const n=BH(t),s=r==="mode"?`cluster_type_${n}`:r==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return e.some(o=>o.name===s)||e.push(new Id({name:s,isAutoGenerated:!0,onStatisticExpression:new SC({expression:t,returnType:i}),statisticType:r})),s}function qu(e,t,r,i,n){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const s=N2e(r,t,n);return e.some(o=>o.name===s)||(r==="avg_norm"?e.push(new Id({name:s,isAutoGenerated:!0,onStatisticExpression:new SC({expression:`$feature.${t} / $feature.${n}`,returnType:i}),statisticType:"avg"})):e.push(new Id({name:s,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),s}const F2e=e=>{let t=class extends e{constructor(...r){super(...r),this.addHandles(xe(()=>this.renderer,()=>{if(this.featureReduction){const i=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",i)}},du))}set featureReduction(r){const i=this._normalizeFeatureReduction(r);this._set("featureReduction",i)}set renderer(r){}_withClusterVariable(r,i,n){const s=r.clone();return"visualVariables"in s&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.some(o=>o.type==="size")||s.visualVariables.push(new oC({field:"cluster_count",stops:[new fw({value:1}),new fw({useMinValue:!0,size:i}),new fw({useMaxValue:!0,size:n})]}))),s}_normalizeFeatureReduction(r){var f;if((r==null?void 0:r.type)!=="cluster")return r;const i=r.clone(),n=[new Id({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(i.fields??[]).filter(m=>!m.isAutoGenerated),o=r.renderer&&!((f=r.renderer.authoringInfo)!=null&&f.isAutoGenerated),{clusterMinSize:a,clusterMaxSize:l}=i;if(o){i.fields=[...n,...s];const m=this._withClusterVariable(i.renderer,a,l);return i.effectiveFeatureRenderer=m,i.effectiveClusterRenderer=m,i}if(r.symbol){if(i.fields=[...n,...s],i.renderer=null,!this.renderer)return i.effectiveFeatureRenderer=null,i.effectiveClusterRenderer=null,i;const m=IF(n,this.renderer),y=this._withClusterVariable(m,a,l),g="visualVariables"in y&&y.visualVariables?y.visualVariables:[],v=new xf({symbol:r.symbol,visualVariables:g});return i.fields=[...n,...s],i.effectiveFeatureRenderer=y,i.effectiveClusterRenderer=v,i}if(!this.renderer)return r;const c=IF(n,this.renderer);i.fields=[...n,...s],i.renderer=c;const h=this._withClusterVariable(c,a,l);return i.effectiveFeatureRenderer=h,i.effectiveClusterRenderer=h,i}};return u([d(T2e)],t.prototype,"featureReduction",null),t=u([T("esri.layers.mixins.FeatureReductionLayer")],t),t},kF={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},OF={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},PF={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},D2e={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":kF,"web-map/basemap":OF,"web-map/tables":PF,"link-chart/operational-layers":{...kF,LinkChartLayer:!0},"link-chart/basemap":OF,"link-chart/tables":PF,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}},j2e=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,i,n){var s;return((s=n==null?void 0:n.portalItem)==null?void 0:s.type)==="Group Layer"?void 0:r}writeListMode(r,i,n,s){(s&&s.layerContainerType==="ground"||r&&AX(this,n,{},s))&&(i[n]=r)}writeOperationalLayerType(r,i,n,s){r&&(s==null?void 0:s.layerContainerType)!=="tables"&&(i.layerType=r)}writeTitle(r,i){i.title=r??"Layer"}readTimeExtent(r){return r?Mo.fromArray(r):null}writeTimeExtent(r,i,n,s){r&&s.layerContainerType!=="tables"&&(r.isEmpty?s!=null&&s.messages&&s.messages.push(new D("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):i[n]=r.toArray())}read(r,i){i&&(i.layer=this),PX(this,r,n=>super.read(r,n),i)}write(r,i){var o,a;if(!this.persistenceEnabled&&!(i!=null&&i.ignorePersistenceEnabled))return null;if(i!=null&&i.origin){const l=`${i.origin}/${i.layerContainerType||"operational-layers"}`,c=D2e[l];let h=!!(c!=null&&c[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(h=!1),!h)return(o=i.messages)==null||o.push(new D("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const n=super.write(r,{...i,layer:this}),s=!!i&&!!i.messages&&!!i.messages.filter(l=>l instanceof D&&l.name==="web-document-write:property-required").length;return J_(n==null?void 0:n.url)?((a=i==null?void 0:i.messages)==null||a.push(new D("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return u([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),u([J("id",["id"])],t.prototype,"readId",null),u([d(CH)],t.prototype,"listMode",void 0),u([X("listMode")],t.prototype,"writeListMode",null),u([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Ir}}}}})],t.prototype,"operationalLayerType",void 0),u([X("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),u([d(xI)],t.prototype,"opacity",void 0),u([d({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),u([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),u([X("title"),X(["web-scene"],"title")],t.prototype,"writeTitle",null),u([d({type:Mo,json:{origins:{"web-scene":{write:{layerContainerTypes:Ir}}}}})],t.prototype,"visibilityTimeExtent",void 0),u([J("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),u([X(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[it,W_]]}})],t.prototype,"writeTimeExtent",null),u([d({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:Ir}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=u([T("esri.layers.mixins.OperationalLayer")],t),t};var NI;const Kv=new De({asc:"ascending",desc:"descending"});let jp=NI=class extends q{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new NI({field:this.field,valueExpression:this.valueExpression,order:this.order})}};u([d({type:String,json:{write:!0}})],jp.prototype,"field",void 0),u([d({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],jp.prototype,"valueExpression",void 0),u([d({type:Kv.apiValues,json:{type:Kv.jsonValues,read:Kv.read,write:Kv.write}})],jp.prototype,"order",void 0),jp=NI=u([T("esri.layers.support.OrderByInfo")],jp);const HH=jp;function z2e(e,t,r){if(!e)return null;const i=e.find(s=>!!s.field);if(!i)return null;const n=new HH;return n.read(i,r),[n]}function V2e(e,t,r,i){const n=e.find(s=>!!s.field);n&&ri(r,[n.toJSON()],t)}const U2e={type:[HH],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:z2e},write:{writer:V2e}}},G2e=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return u([d(U2e)],t.prototype,"orderBy",void 0),t=u([T("esri.layers.mixins.OrderedLayer")],t),t};async function q2e(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return th(e);const r=Pe.WGS84;return await aP(t,r),Eu(e,r)}function B2e(e,t){if(!WH(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function WH(e,t){var r;return!!((r=e.typeKeywords)!=null&&r.includes(t))}function bPe(e){return WH(e,W2e.HOSTED_SERVICE)}function H2e(e,t){const r=e.typeKeywords;if(r){const i=r.indexOf(t);i>-1&&r.splice(i,1)}}function _Pe(e,t,r){r?B2e(e,t):H2e(e,t)}async function SPe(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return q2e(r)}const W2e={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function CF(e){var l;const{portal:t,isOrgItem:r,itemControl:i}=e,n=(l=t.user)==null?void 0:l.privileges;let s=!n||n.includes("features:user:edit"),o=!!r&&!!(n!=null&&n.includes("features:user:fullEdit"));const a=i==="update"||i==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}const Z2e=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=xt(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,n){if(i.itemId)return new Ty({id:i.itemId,portal:n==null?void 0:n.portal})}writePortalItem(r,i){r!=null&&r.id&&(i.itemId=r.id)}async loadFromPortal(r,i){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:s}=await ee(()=>import("./layersLoader-BWKosyAC.js"),__vite__mapDeps([221,10,8,9,7,222]));return Ct(i),await s({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap},i)}catch(s){throw Gi(s)||H.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(i=>(ho(i),!0)))}async setUserPrivileges(r,i){if(!He.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(i);if(this.url)try{const{features:{edit:n,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(r,i);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(n){ho(n)}}async _fetchUserPrivileges(r,i){let n=this.portalItem;if(!r||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(i);const s=r===n.id;if(s&&n.portal.user)return CF(n);let o,a;if(s)o=n.portal.url;else try{o=await Wz(this.url,i)}catch(f){ho(f)}if(!o||!XX(o,n.portal.url))return this._fetchFallbackUserPrivileges(i);try{const f=i!=null?i.signal:null;a=await(Re==null?void 0:Re.getCredential(`${o}/sharing`,{prompt:!1,signal:f}))}catch(f){ho(f)}const l=!0,c=!1,h=!1;if(!a)return{features:{edit:l,fullEdit:c},content:{updateItem:h}};try{if(s?await n.reload():(n=new Ty({id:r,portal:{url:o}}),await n.load(i)),n.portal.user)return CF(n)}catch(f){ho(f)}return{features:{edit:l,fullEdit:c},content:{updateItem:h}}}async _fetchFallbackUserPrivileges(r){let i=!0;try{i=await this._fetchUserHasEditingPrivileges(r)}catch(n){ho(n)}return{features:{edit:i,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const i=this.url?Re==null?void 0:Re.findCredential(this.url):null;if(!i)return!0;const n=Yv.credential===i?Yv.user:await this._fetchEditingUser(r);return Yv.credential=i,Yv.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var h,f;const i=(f=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:f.user;if(i)return i;const n=Re==null?void 0:Re.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=Ui.getDefault();if(o&&o.loaded&&Ms(o.restUrl)===Ms(s))return o.user;const a=`${s}/community/self`,l=r!=null?r.signal:null,c=await Y_(Ot(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return c.ok?OO.fromJSON(c.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){var o;const n=i==null?void 0:i.portal,s=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||Ui.getDefault());return n&&s&&!tz(s.restUrl,n.restUrl)?(i.messages&&i.messages.push(new D("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return u([d({type:Ty})],t.prototype,"portalItem",null),u([J("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),u([X("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),u([d({clonable:!1})],t.prototype,"resourceReferences",void 0),u([d({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),u([d({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),u([d({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=u([T("esri.layers.mixins.PortalLayer")],t),t},Yv={credential:null,user:null};let uy=class extends we{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};u([d()],uy.prototype,"updating",void 0),u([d()],uy.prototype,"status",void 0),uy=u([T("esri.layers.support.PublishingInfo")],uy);const J2e=uy,K2e=Symbol(),Y2e=e=>{var t;let r=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const i=this._get("publishingInfo");if(i)return i;const n=new J2e;return this._checkPublishingStatus(n),n}_checkPublishingStatus(i){let o=0;const a=async c=>{let h;i.updating=!0;try{h=await this.fetchPublishingStatus()}catch{h="unavailable"}h!=="published"&&h!=="unavailable"||(i.status==="publishing"&&this.refresh(),l.remove()),i.status=h,i.updating=!1,l.removed||(o=setTimeout(a,c,c+125))},l={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>l.remove()),a(250),this.addHandles(l)}};return t=K2e,u([d({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=u([T("esri.layers.mixins.PublishableLayer")],r),r},Zl=new ce,Gy=new WeakMap;function Q2e(e){e$e(e)&&Zl.push(new WeakRef(e))}function X2e(e){const t=Zl.find(r=>r.deref()===e);t&&Zl.remove(t)}function e$e(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function ZH(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:ZH(t,e%t):0}let hx=0,Qv=0;function t$e(){const e=Date.now();let t=!1;for(const r of Zl){const i=r.deref();i?i.refreshInterval&&e-(Gy.get(i)??0)+5>=6e4*i.refreshInterval&&(Gy.set(i,e),i.refresh(e)):t=!0}if(t)for(let r=Zl.length-1;r>=0;r--)Zl.at(r).deref()||Zl.removeAt(r)}T8(()=>{const e=Date.now();let t=0;for(const r of Zl){const i=r.deref();i&&(t=ZH(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?Gy.get(i)||Gy.set(i,e):Gy.delete(i))}if(t!==Qv){if(Qv=t,clearInterval(hx),Qv===0)return void(hx=0);hx=setInterval(t$e,Qv)}});const RF=.1,r$e=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=rO(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||Q2e(this)},()=>{})}destroy(){X2e(this)}castRefreshInterval(r){return r>=RF?r:r<=0?0:RF}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){xT(this._debounceHasDataChanged()).then(i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})},i=>{H.getLogger(this).error(i),this.emit("refresh",{dataChanged:!1,error:i})})}async hasDataChanged(){return!0}get test(){}};return u([d({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Ir}}}}})],t.prototype,"refreshInterval",void 0),u([et("refreshInterval")],t.prototype,"castRefreshInterval",null),u([d({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),u([d({readOnly:!0})],t.prototype,"refreshParameters",null),t=u([T("esri.layers.mixins.RefreshableLayer")],t),t},JH=si()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let cy=class extends dt(q){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return o7(this.value,this.unit,"milliseconds")}};u([fe(JH,{nonNullable:!0})],cy.prototype,"unit",void 0),u([d({type:Number,json:{write:!0},nonNullable:!0})],cy.prototype,"value",void 0),cy=u([T("esri.TimeInterval")],cy);const y_=cy;function AF(e,t){return y_.fromJSON({value:e,unit:t})}let Rr=class extends dt(q){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&t.timeExtent.length===2?Mo.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){(e==null?void 0:e.start)!=null&&e.end!=null?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?AF(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?AF(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=(e==null?void 0:e.toJSON().value)??null,t.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};u([d({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Rr.prototype,"cumulative",void 0),u([d({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Rr.prototype,"endField",void 0),u([d({type:Mo,json:{write:{enabled:!0,allowNull:!0}}})],Rr.prototype,"fullTimeExtent",void 0),u([J("fullTimeExtent",["timeExtent"])],Rr.prototype,"readFullTimeExtent",null),u([X("fullTimeExtent")],Rr.prototype,"writeFullTimeExtent",null),u([d({type:Boolean,json:{write:!0}})],Rr.prototype,"hasLiveData",void 0),u([d({type:y_,json:{write:{enabled:!0,allowNull:!0}}})],Rr.prototype,"interval",void 0),u([J("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Rr.prototype,"readInterval",null),u([X("interval")],Rr.prototype,"writeInterval",null),u([d({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Rr.prototype,"startField",void 0),u([d(Gb("timeReference",!0))],Rr.prototype,"timeZone",void 0),u([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Rr.prototype,"trackIdField",void 0),u([d({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Rr.prototype,"useTime",void 0),u([d({type:[Date],json:{read:!1}})],Rr.prototype,"stops",void 0),Rr=u([T("esri.layers.support.TimeInfo")],Rr);const KH=Rr,i$e={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Ir}}},n$e=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const n=i.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=JH.fromJSON(n.timeOffsetUnits);return s&&o?new y_({value:s,unit:o}):null}set timeInfo(r){cU(r,this.fieldsIndex),this._set("timeInfo",r)}};return u([d({type:Mo,json:{write:!1}})],t.prototype,"timeExtent",void 0),u([d({type:y_})],t.prototype,"timeOffset",void 0),u([J("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),u([d({value:null,type:KH,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),u([d(i$e)],t.prototype,"useViewTime",void 0),t=u([T("esri.layers.mixins.TemporalLayer")],t),t},LF=new De({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Ml=class extends dt(q){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};u([d({json:{write:!0}})],Ml.prototype,"name",void 0),u([d({json:{write:!0}})],Ml.prototype,"description",void 0),u([d({json:{read:LF.read,write:LF.write}})],Ml.prototype,"drawingTool",void 0),u([d({json:{write:!0}})],Ml.prototype,"prototype",void 0),u([d({json:{write:!0}})],Ml.prototype,"thumbnail",void 0),Ml=u([T("esri.layers.support.FeatureTemplate")],Ml);const MC=Ml;let oa=class extends dt(q){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const r={};for(const i of Object.keys(t))r[i]=kS(t[i]);return r}writeDomains(t,r){var n;const i={};for(const s of Object.keys(t))t[s]&&(i[s]=(n=t[s])==null?void 0:n.toJSON());r.domains=i}};u([d({json:{write:!0}})],oa.prototype,"id",void 0),u([d({json:{write:!0}})],oa.prototype,"name",void 0),u([d({json:{write:!0}})],oa.prototype,"domains",void 0),u([J("domains")],oa.prototype,"readDomains",null),u([X("domains")],oa.prototype,"writeDomains",null),u([d({type:[MC],json:{write:!0}})],oa.prototype,"templates",void 0),oa=u([T("esri.layers.support.FeatureType")],oa);const YH=oa;function s$e(){return{fields:{type:[kP],value:null,set:function(e){if(e&&F("big-integer-warning-enabled")){const t=e.filter(r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8);if(t.length){const r=t.map(i=>`'${i.name}'`).join(", ");H.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return jB.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const r of e)((t=this.fieldsIndex)==null?void 0:t.has(r))||H.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${r} found in outFields`,{layer:this,outFields:e});return $S(this.fieldsIndex,e)}}}}const fx=()=>H.getLogger("esri.layers.support.labelingInfo"),o$e=/\[([^[\]]+)\]/gi;function mx(e,t,r){return e?e.map(i=>{var s;const n=new BS;if(n.read(i,r),n.labelExpression){const o=t.fields||((s=t.layerDefinition)==null?void 0:s.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(o$e,(a,l)=>`[${a$e(l,o)}]`)}return n}):null}function a$e(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const n=t[i].name;if(n.toLowerCase()===r)return n}return e}const l$e={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function EPe(e,t){const r=[];for(const i of e){const n=i.labelPlacement,s=l$e[t];if(!i.symbol)return fx().warn("No ILabelClass symbol specified."),[];if(!s)return fx().error(new D("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(s.includes(n))r.push(i);else{const o=s[0];n&&fx().warn(`Found invalid label placement type ${n} for ${t}. Defaulting to ${o}`);const a=i.clone();a.labelPlacement=o,r.push(a)}}return r}const zp=[];function u$e(e,t){if(_G(e.url??""))return!0;const{wkid:r}=t;for(const i of zp){if((e.version??0)>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}zp.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),zp.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),zp.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),zp.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),zp.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function c$e(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const n=await Y_(i.populateFromStyle());if(Ct(r),n.ok===!1){const s=n.error;t!=null&&t.messages&&t.messages.push(new Zn("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}var FI;let Vp=FI=class extends q{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new FI({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};u([d({type:[String],json:{write:!0}})],Vp.prototype,"groupByFields",void 0),u([d({type:Number,json:{write:!0}})],Vp.prototype,"topCount",void 0),u([d({type:[String],json:{write:!0}})],Vp.prototype,"orderByFields",void 0),Vp=FI=u([T("esri.rest.support.TopFilter")],Vp);const d$e=Vp;var DI;const NF=new De({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),FF=new De({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ft=DI=class extends q{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new DI(C({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};u([d({type:Boolean,json:{write:!0}})],ft.prototype,"cacheHint",void 0),u([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ft.prototype,"distance",void 0),u([d({types:Ld,json:{read:pu,write:!0}})],ft.prototype,"geometry",void 0),u([d({type:Number,json:{write:!0}})],ft.prototype,"geometryPrecision",void 0),u([d({type:Number,json:{write:!0}})],ft.prototype,"maxAllowableOffset",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],ft.prototype,"num",void 0),u([d({json:{write:!0}})],ft.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],ft.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],ft.prototype,"outFields",void 0),u([d({type:Pe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ft.prototype,"outSpatialReference",void 0),u([d({type:String,json:{write:!0}})],ft.prototype,"resultType",void 0),u([d({json:{write:!0}})],ft.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ft.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ft.prototype,"returnZ",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],ft.prototype,"start",void 0),u([X("start"),X("num")],ft.prototype,"writeStart",null),u([d({type:String,json:{read:{source:"spatialRel",reader:NF.read},write:{target:"spatialRel",writer:NF.write}}})],ft.prototype,"spatialRelationship",void 0),u([d({type:Mo,json:{write:!0}})],ft.prototype,"timeExtent",void 0),u([d({type:d$e,json:{write:!0}})],ft.prototype,"topFilter",void 0),u([d({type:String,json:{read:FF.read,write:{writer:FF.write,overridePolicy(e){return{enabled:e!=null&&this.distance!=null&&this.distance>0}}}}})],ft.prototype,"units",void 0),u([d({type:String,json:{write:!0}})],ft.prototype,"where",void 0),ft=DI=u([T("esri.rest.support.TopFeaturesQuery")],ft),ft.from=Qt(ft);const Xv=ft;function p$e({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:n},s){if(!r)return null;const o=y$e({editFieldsInfo:t,fields:r,objectIdField:i},s);if(!o.length)return null;const a=w$e({titleBase:n,fields:r,displayField:e}),l=v$e();return new ag({title:a,content:l,fieldInfos:o})}const h$e=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):ede(e,t);function f$e(e,t){const r=e;return t&&(e=e.filter(i=>!t.includes(i.type))),e===r&&(e=e.slice()),e.sort(m$e),e}function m$e(e,t){return e.type==="oid"?-1:t.type==="oid"?1:DF(e)?-1:DF(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function y$e(e,t){const r=t==null?void 0:t.visibleFieldNames;return f$e(e.fields??[],(t==null?void 0:t.ignoreFieldTypes)||b$e).map(i=>new mP({fieldName:i.name,isEditable:Xce(i,e),label:i.alias,format:g$e(i),visible:h$e(i,{...e,visibleFieldNames:r})}))}function g$e(e){switch(e.type){case"small-integer":case"integer":case"single":return new D1({digitSeparator:!0,places:0});case"double":return new D1({digitSeparator:!0,places:2});case"string":return Tde(e.name)?new D1({digitSeparator:!0,places:0}):void 0;default:return}}function v$e(){return[new x0,new $0]}function w$e(e){const t=Gce(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}function DF(e){var r;return(e.name&&e.name.toLowerCase())==="name"?!0:((r=e.alias)==null?void 0:r.toLowerCase())==="name"}const b$e=["geometry","blob","raster","guid","xml"];var lh;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(lh||(lh={}));const ai="FeatureLayer";function e1(e,t){return new D("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function jF(e){return e&&e instanceof ce}const yx=s$e();function gx(e,t,r){const i=!!(r!=null&&r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}let le=class extends u2e(F2e(dSe(Y2e(aSe(wB(G2e(n$e(bB(r$e(tSe(j2e(Z2e(bH(rSe(eSe(dt(rP))))))))))))))))){constructor(...e){super(...e),this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Pe.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=rO(async(t,r,i)=>{const{save:n,saveAs:s}=await ee(()=>import("./featureLayerUtils-uDAohEpW.js"),__vite__mapDeps([223,224,225,226,222,227,228,10]));switch(t){case lh.SAVE:return n(this,r);case lh.SAVE_AS:return s(this,i,r)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var i;const t=e!=null?e.signal:null;if((i=this.portalItem)!=null&&i.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(n=>this.initLayerProperties(n))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(ho).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const n=await this._fetchFirstValidLayerId(t);n!=null&&(this.layerId=n)}if(!this.url&&!this._hasMemorySource())throw new D("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>USe(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,FH(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}get effectiveEditingEnabled(){return GSe(this)}readIsTable(e,t){return(t=(t==null?void 0:t.layerDefinition)??t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,i){i!=null&&i.writeLayerSchema&&ri(r,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return AH(t.layerDefinition||t)}readObjectIdField(e,t){return LH(t.layerDefinition||t)}get parsedUrl(){const e=ii(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Gh(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Gh(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){W4(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){var n;t=t.layerDefinition||t;const i=(n=t.drawingInfo)==null?void 0:n.renderer;if(i){const s=N0(i,t,r)??void 0;return s||H.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),s}return _C(t,r)}set source(e){const t=this._get("source");t!==e&&(jF(t)&&this._resetMemorySource(t),jF(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof ce?new ca({layer:this,items:e}):e:null}readSource(e,t){const r=EH.fromJSON(t.featureSet);return new ca({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,t){const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,n=r==null?void 0:r.editorField;return e=e==null?void 0:e.map(s=>MC.fromJSON(s)),this._fixTemplates(e,i),this._fixTemplates(e,n),e}readTitle(e,t){var n,s,o;const r=((n=t.layerDefinition)==null?void 0:n.name)??t.name,i=t.title||((s=t.layerDefinition)==null?void 0:s.title);if(r){const a=(o=this.portalItem)==null?void 0:o.title;if(this.sublayerTitleMode==="item-title")return this.url?whe(this.url,r):r;let l=r;if(!l&&this.url){const c=vf(this.url);c!=null&&(l=c.title)}return l?(this.sublayerTitleMode==="item-title-and-service-name"&&a&&a!==l&&(l=a+" - "+l),PP(l)):void 0}if(this.sublayerTitleMode==="item-title"&&i)return i}readTitleFromWebMap(e,t){var r;return t.title||((r=t.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find(n=>n.name.toLowerCase()===r);i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,n=r==null?void 0:r.editorField;return e==null?void 0:e.map(s=>(s=YH.fromJSON(s),this._fixTemplates(s.templates,i),this._fixTemplates(s.templates,n),s))}readVisible(e,t){var r;return((r=t.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){return TSe(this,e,t,ai)}async updateAttachment(e,t,r){return MSe(this,e,t,r,ai)}async applyEdits(e,t){return ESe(this,e,t)}async uploadAssets(e,t){return ISe(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return p$e(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await v8(ee(()=>import("./FeatureLayerSource-DfVxPIVO.js"),__vite__mapDeps([229,48,54,230,220,51,93,50,94,219,35,33,231,232,62,60,61,23,26,125,233,25])),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=DSe(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=Mce(this.definitionExpression,t);return e.where=r||"1=1",e}async deleteAttachments(e,t){return kSe(this,e,t,ai)}async fetchRecomputedExtents(e){return OSe(this,e,ai)}getFeatureType(e){return HSe(this.types,this.typeIdField,e)}getFieldDomain(e,t){var s;const r=t==null?void 0:t.feature,i=zSe(this,r);if(i){const o=(s=i.domains)==null?void 0:s[e];return(o==null?void 0:o.type)==="inherited"?this._getLayerDomain(e):o}const n=this.getFeatureType(r);if(n){const o=n.domains&&n.domains[e];if(o&&o.type!=="inherited")return o}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return PSe(this,e,t,ai)}async queryFeatures(e,t){const r=await this.load(),i=await r.source.queryFeatures(Ca.from(e)??r.createQuery(),t);if(i!=null&&i.features)for(const n of i.features)n.layer=n.sourceLayer=r;return i}async queryObjectIds(e,t){return CSe(this,e,t,ai)}async queryFeatureCount(e,t){return RSe(this,e,t,ai)}async queryExtent(e,t){return ASe(this,e,t,ai)}async queryRelatedFeatures(e,t){return LSe(this,e,t,ai)}async queryRelatedFeaturesCount(e,t){return NSe(this,e,t,ai)}async queryTopFeatures(e,t){var s;const{source:r,capabilities:i}=await this.load();if(!r.queryTopFeatures||!((s=i==null?void 0:i.query)!=null&&s.supportsTopFeaturesQuery))throw new D(ai,"Layer source does not support queryTopFeatures capability");const n=await r.queryTopFeatures(Xv.from(e),t);if(n!=null&&n.features)for(const o of n.features)o.layer=o.sourceLayer=this;return n}async queryTopObjectIds(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopObjectIds||!(i!=null&&i.query.supportsTopFeaturesQuery))throw new D(ai,"Layer source does not support queryTopObjectIds capability");return r.queryTopObjectIds(Xv.from(e),t)}async queryTopFeaturesExtent(e,t){var n;const{source:r,capabilities:i}=await this.load();if(!r.queryTopExtents||!((n=i==null?void 0:i.query)!=null&&n.supportsTopFeaturesQuery))throw new D(ai,"Layer source does not support queryTopExtents capability");return r.queryTopExtents(Xv.from(e),t)}async queryTopFeatureCount(e,t){var n;const{source:r,capabilities:i}=await this.load();if(!r.queryTopCount||!((n=i==null?void 0:i.query)!=null&&n.supportsTopFeaturesQuery))throw new D(ai,"Layer source does not support queryFeatureCount capability");return r.queryTopCount(Xv.from(e),t)}read(e,t){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const i=r.layers;i&&i.length===1&&(super.read(i[0],t),r.showLegend!=null&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:(t==null?void 0:t.origin)??void 0,writeLayerSchema:(t==null?void 0:t.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:i,messages:n}=t;if(this.dynamicDataSource)return n==null||n.push(e1(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&i!=="tables")return n==null||n.push(e1(this,`a table source can only be written to tables, not ${i}`)),null;if(this._hasMemorySource())return n==null||n.push(e1(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&i==="tables")return n==null||n.push(e1(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new D(ai,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||u$e(this,e))}async save(e){return this._debouncedSaveOperations(lh.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(lh.SAVE_AS,t,e)}_readEditingEnabled(e,t,r){var n;let i=(n=e.layerDefinition)==null?void 0:n.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,r,i){var n,s;if(!e){const o=(s=(n=this.capabilities)==null?void 0:n.operations)!=null&&s.supportsSync?"Query,Sync":"Query";ri("layerDefinition.capabilities",o,t),r&&!(i!=null&&i.writeLayerSchema)&&(t.capabilities=o)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstValidLayerId(e){return Ot(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const r=t.data;if(r)return this.findFirstValidLayerId(r)})}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),W4(this.renderer,this.fieldsIndex),cU(this.timeInfo,this.fieldsIndex),c$e(this,{origin:"service"})}async hasDataChanged(){return FSe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,r;const e=((t=this.parsedUrl)==null?void 0:t.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(i=>i.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(r=>{var n;const i=(n=r.prototype)==null?void 0:n.attributes;i&&t&&delete i[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new D("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new D("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this.addHandles([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};u([J("service","capabilities")],le.prototype,"readCapabilities",null),u([d({json:{origins:{"web-scene":{write:!1}},write:!0}})],le.prototype,"charts",void 0),u([d({readOnly:!0})],le.prototype,"createQueryVersion",null),u([d({json:{read:{source:"layerDefinition.copyrightText"}}})],le.prototype,"copyright",void 0),u([d({json:{read:{source:"layerDefinition.displayField"}}})],le.prototype,"displayField",void 0),u([d({types:id,readOnly:!0})],le.prototype,"defaultSymbol",void 0),u([d({type:ws})],le.prototype,"dynamicDataSource",void 0),u([d({type:Boolean})],le.prototype,"editingEnabled",null),u([J(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],le.prototype,"readEditingEnabled",null),u([J("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],le.prototype,"readEditingEnabledFromWebMap",null),u([X(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],le.prototype,"writeEditingEnabled",null),u([X("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],le.prototype,"writeEditingEnabledToWebMap",null),u([d({readOnly:!0})],le.prototype,"effectiveEditingEnabled",null),u([d({...yx.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:gx}}}}})],le.prototype,"fields",void 0),u([d(yx.fieldsIndex)],le.prototype,"fieldsIndex",void 0),u([d({type:J_e,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],le.prototype,"formTemplate",void 0),u([d({json:{read:{source:"layerDefinition.extent"}}})],le.prototype,"fullExtent",void 0),u([d({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:gx,writer(e,t,r){const i=e?EI.toJSON(e):null;i&&ri(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:EI.read}}})],le.prototype,"geometryType",void 0),u([d({json:{read:{source:"layerDefinition.hasM"}}})],le.prototype,"hasM",void 0),u([d({json:{read:{source:"layerDefinition.hasZ"}}})],le.prototype,"hasZ",void 0),u([d(gSe)],le.prototype,"id",void 0),u([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],le.prototype,"infoFor3D",void 0),u([d({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],le.prototype,"isTable",void 0),u([J("service","isTable",["type","geometryType"]),J("isTable",["layerDefinition.type","layerDefinition.geometryType"])],le.prototype,"readIsTable",null),u([X("web-map","isTable")],le.prototype,"writeIsTable",null),u([d(vC)],le.prototype,"labelsVisible",void 0),u([d({type:[BS],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:mx,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:mx,write:{enabled:!0,layerContainerTypes:Ir}}},name:"layerDefinition.drawingInfo.labelingInfo",read:mx,write:!0}})],le.prototype,"labelingInfo",void 0),u([d((()=>{const e=C(ySe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){ri(i,aS(t),r)}}},e})())],le.prototype,"opacity",void 0),u([d(fSe)],le.prototype,"legendEnabled",void 0),u([d({type:["show","hide"],json:(()=>{const e=C(CH.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],le.prototype,"listMode",void 0),u([J("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],le.prototype,"readGlobalIdField",null),u([d({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:gx}}}}})],le.prototype,"objectIdField",void 0),u([J("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],le.prototype,"readObjectIdField",null),u([d({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],le.prototype,"operationalLayerType",void 0),u([d(yx.outFields)],le.prototype,"outFields",void 0),u([d({readOnly:!0})],le.prototype,"parsedUrl",null),u([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],le.prototype,"path",void 0),u([d(gC)],le.prototype,"popupEnabled",void 0),u([d({type:ag,json:{name:"popupInfo",write:!0}})],le.prototype,"popupTemplate",void 0),u([d({readOnly:!0})],le.prototype,"defaultPopupTemplate",null),u([d({types:qS,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:$_e,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Ir,overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}})],le.prototype,"renderer",null),u([J("service","renderer",["drawingInfo.renderer","defaultSymbol"]),J("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],le.prototype,"readRenderer",null),u([d()],le.prototype,"resourceInfo",void 0),u([d((()=>{const e=C(pSe);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],le.prototype,"screenSizePerspectiveEnabled",void 0),u([d({clonable:!1})],le.prototype,"source",null),u([et("source")],le.prototype,"castSource",null),u([J("portal-item","source",["featureSet"]),J("web-map","source",["featureSet"])],le.prototype,"readSource",null),u([d({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],le.prototype,"spatialReference",void 0),u([d({type:Number})],le.prototype,"subtypeCode",void 0),u([d({type:[MC]})],le.prototype,"templates",void 0),u([J("templates",["editFieldsInfo","creatorField","editorField","templates"])],le.prototype,"readTemplates",null),u([d({type:KH})],le.prototype,"timeInfo",void 0),u([d()],le.prototype,"title",void 0),u([J("service","title",["name"]),J("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],le.prototype,"readTitle",null),u([J("web-map","title",["layerDefinition.name","title"])],le.prototype,"readTitleFromWebMap",null),u([d({type:String})],le.prototype,"sublayerTitleMode",void 0),u([d({json:{read:!1}})],le.prototype,"type",void 0),u([d({type:String})],le.prototype,"typeIdField",void 0),u([J("service","typeIdField"),J("typeIdField",["layerDefinition.typeIdField"])],le.prototype,"readTypeIdField",null),u([d({type:[YH]})],le.prototype,"types",void 0),u([J("service","types",["types"]),J("types",["layerDefinition.types"])],le.prototype,"readTypes",null),u([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],le.prototype,"visible",void 0),u([J("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],le.prototype,"readVisible",null),le=u([T("esri.layers.FeatureLayer")],le);const QH=le,IPe=Object.freeze(Object.defineProperty({__proto__:null,default:QH},Symbol.toStringTag,{value:"Module"}));function XH(e,t){return function(){return e.apply(t,arguments)}}const{toString:_$e}=Object.prototype,{getPrototypeOf:EC}=Object,WS=(e=>t=>{const r=_$e.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ls=e=>(e=e.toLowerCase(),t=>WS(t)===e),ZS=e=>t=>typeof t===e,{isArray:Tf}=Array,F0=ZS("undefined");function S$e(e){return e!==null&&!F0(e)&&e.constructor!==null&&!F0(e.constructor)&&Bn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const eW=Ls("ArrayBuffer");function $$e(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&eW(e.buffer),t}const x$e=ZS("string"),Bn=ZS("function"),tW=ZS("number"),JS=e=>e!==null&&typeof e=="object",T$e=e=>e===!0||e===!1,Cw=e=>{if(WS(e)!=="object")return!1;const t=EC(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},M$e=Ls("Date"),E$e=Ls("File"),I$e=Ls("Blob"),k$e=Ls("FileList"),O$e=e=>JS(e)&&Bn(e.pipe),P$e=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Bn(e.append)&&((t=WS(e))==="formdata"||t==="object"&&Bn(e.toString)&&e.toString()==="[object FormData]"))},C$e=Ls("URLSearchParams"),[R$e,A$e,L$e,N$e]=["ReadableStream","Request","Response","Headers"].map(Ls),F$e=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _g(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let i,n;if(typeof e!="object"&&(e=[e]),Tf(e))for(i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else{const s=r?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(i=0;i<o;i++)a=s[i],t.call(null,e[a],a,e)}}function rW(e,t){t=t.toLowerCase();const r=Object.keys(e);let i=r.length,n;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const iW=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,nW=e=>!F0(e)&&e!==iW;function jI(){const{caseless:e}=nW(this)&&this||{},t={},r=(i,n)=>{const s=e&&rW(t,n)||n;Cw(t[s])&&Cw(i)?t[s]=jI(t[s],i):Cw(i)?t[s]=jI({},i):Tf(i)?t[s]=i.slice():t[s]=i};for(let i=0,n=arguments.length;i<n;i++)arguments[i]&&_g(arguments[i],r);return t}const D$e=(e,t,r,{allOwnKeys:i}={})=>(_g(t,(n,s)=>{r&&Bn(n)?e[s]=XH(n,r):e[s]=n},{allOwnKeys:i}),e),j$e=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),z$e=(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},V$e=(e,t,r,i)=>{let n,s,o;const a={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),s=n.length;s-- >0;)o=n[s],(!i||i(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=r!==!1&&EC(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},U$e=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return i!==-1&&i===r},G$e=e=>{if(!e)return null;if(Tf(e))return e;let t=e.length;if(!tW(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},q$e=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&EC(Uint8Array)),B$e=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=i.next())&&!n.done;){const s=n.value;t.call(e,s[0],s[1])}},H$e=(e,t)=>{let r;const i=[];for(;(r=e.exec(t))!==null;)i.push(r);return i},W$e=Ls("HTMLFormElement"),Z$e=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,n){return i.toUpperCase()+n}),zF=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),J$e=Ls("RegExp"),sW=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};_g(r,(n,s)=>{let o;(o=t(n,s,e))!==!1&&(i[s]=o||n)}),Object.defineProperties(e,i)},K$e=e=>{sW(e,(t,r)=>{if(Bn(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=e[r];if(Bn(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Y$e=(e,t)=>{const r={},i=n=>{n.forEach(s=>{r[s]=!0})};return Tf(e)?i(e):i(String(e).split(t)),r},Q$e=()=>{},X$e=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,vx="abcdefghijklmnopqrstuvwxyz",VF="0123456789",oW={DIGIT:VF,ALPHA:vx,ALPHA_DIGIT:vx+vx.toUpperCase()+VF},exe=(e=16,t=oW.ALPHA_DIGIT)=>{let r="";const{length:i}=t;for(;e--;)r+=t[Math.random()*i|0];return r};function txe(e){return!!(e&&Bn(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const rxe=e=>{const t=new Array(10),r=(i,n)=>{if(JS(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[n]=i;const s=Tf(i)?[]:{};return _g(i,(o,a)=>{const l=r(o,n+1);!F0(l)&&(s[a]=l)}),t[n]=void 0,s}}return i};return r(e,0)},ixe=Ls("AsyncFunction"),nxe=e=>e&&(JS(e)||Bn(e))&&Bn(e.then)&&Bn(e.catch),z={isArray:Tf,isArrayBuffer:eW,isBuffer:S$e,isFormData:P$e,isArrayBufferView:$$e,isString:x$e,isNumber:tW,isBoolean:T$e,isObject:JS,isPlainObject:Cw,isReadableStream:R$e,isRequest:A$e,isResponse:L$e,isHeaders:N$e,isUndefined:F0,isDate:M$e,isFile:E$e,isBlob:I$e,isRegExp:J$e,isFunction:Bn,isStream:O$e,isURLSearchParams:C$e,isTypedArray:q$e,isFileList:k$e,forEach:_g,merge:jI,extend:D$e,trim:F$e,stripBOM:j$e,inherits:z$e,toFlatObject:V$e,kindOf:WS,kindOfTest:Ls,endsWith:U$e,toArray:G$e,forEachEntry:B$e,matchAll:H$e,isHTMLForm:W$e,hasOwnProperty:zF,hasOwnProp:zF,reduceDescriptors:sW,freezeMethods:K$e,toObjectSet:Y$e,toCamelCase:Z$e,noop:Q$e,toFiniteNumber:X$e,findKey:rW,global:iW,isContextDefined:nW,ALPHABET:oW,generateString:exe,isSpecCompliantForm:txe,toJSONObject:rxe,isAsyncFn:ixe,isThenable:nxe};function Ae(e,t,r,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n)}z.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const aW=Ae.prototype,lW={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{lW[e]={value:e}});Object.defineProperties(Ae,lW);Object.defineProperty(aW,"isAxiosError",{value:!0});Ae.from=(e,t,r,i,n,s)=>{const o=Object.create(aW);return z.toFlatObject(e,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Ae.call(o,e.message,t,r,i,n),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const sxe=null;function zI(e){return z.isPlainObject(e)||z.isArray(e)}function uW(e){return z.endsWith(e,"[]")?e.slice(0,-2):e}function UF(e,t,r){return e?e.concat(t).map(function(n,s){return n=uW(n),!r&&s?"["+n+"]":n}).join(r?".":""):t}function oxe(e){return z.isArray(e)&&!e.some(zI)}const axe=z.toFlatObject(z,{},null,function(t){return/^is[A-Z]/.test(t)});function KS(e,t,r){if(!z.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=z.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,b){return!z.isUndefined(b[v])});const i=r.metaTokens,n=r.visitor||h,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(t);if(!z.isFunction(n))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(z.isDate(g))return g.toISOString();if(!l&&z.isBlob(g))throw new Ae("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(g)||z.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function h(g,v,b){let w=g;if(g&&!b&&typeof g=="object"){if(z.endsWith(v,"{}"))v=i?v:v.slice(0,-2),g=JSON.stringify(g);else if(z.isArray(g)&&oxe(g)||(z.isFileList(g)||z.endsWith(v,"[]"))&&(w=z.toArray(g)))return v=uW(v),w.forEach(function($,E){!(z.isUndefined($)||$===null)&&t.append(o===!0?UF([v],E,s):o===null?v:v+"[]",c($))}),!1}return zI(g)?!0:(t.append(UF(b,v,s),c(g)),!1)}const f=[],m=Object.assign(axe,{defaultVisitor:h,convertValue:c,isVisitable:zI});function y(g,v){if(!z.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(g),z.forEach(g,function(w,_){(!(z.isUndefined(w)||w===null)&&n.call(t,w,z.isString(_)?_.trim():_,v,m))===!0&&y(w,v?v.concat(_):[_])}),f.pop()}}if(!z.isObject(e))throw new TypeError("data must be an object");return y(e),t}function GF(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function IC(e,t){this._pairs=[],e&&KS(e,this,t)}const cW=IC.prototype;cW.append=function(t,r){this._pairs.push([t,r])};cW.toString=function(t){const r=t?function(i){return t.call(this,i,GF)}:GF;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function lxe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function dW(e,t,r){if(!t)return e;const i=r&&r.encode||lxe,n=r&&r.serialize;let s;if(n?s=n(t,r):s=z.isURLSearchParams(t)?t.toString():new IC(t,r).toString(i),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class qF{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){z.forEach(this.handlers,function(i){i!==null&&t(i)})}}const pW={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uxe=typeof URLSearchParams<"u"?URLSearchParams:IC,cxe=typeof FormData<"u"?FormData:null,dxe=typeof Blob<"u"?Blob:null,pxe={isBrowser:!0,classes:{URLSearchParams:uxe,FormData:cxe,Blob:dxe},protocols:["http","https","file","blob","url","data"]},kC=typeof window<"u"&&typeof document<"u",hxe=(e=>kC&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),fxe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mxe=kC&&window.location.href||"http://localhost",yxe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:kC,hasStandardBrowserEnv:hxe,hasStandardBrowserWebWorkerEnv:fxe,origin:mxe},Symbol.toStringTag,{value:"Module"})),Ps={...yxe,...pxe};function gxe(e,t){return KS(e,new Ps.classes.URLSearchParams,Object.assign({visitor:function(r,i,n,s){return Ps.isNode&&z.isBuffer(r)?(this.append(i,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function vxe(e){return z.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function wxe(e){const t={},r=Object.keys(e);let i;const n=r.length;let s;for(i=0;i<n;i++)s=r[i],t[s]=e[s];return t}function hW(e){function t(r,i,n,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&z.isArray(n)?n.length:o,l?(z.hasOwnProp(n,o)?n[o]=[n[o],i]:n[o]=i,!a):((!n[o]||!z.isObject(n[o]))&&(n[o]=[]),t(r,i,n[o],s)&&z.isArray(n[o])&&(n[o]=wxe(n[o])),!a)}if(z.isFormData(e)&&z.isFunction(e.entries)){const r={};return z.forEachEntry(e,(i,n)=>{t(vxe(i),n,r,0)}),r}return null}function bxe(e,t,r){if(z.isString(e))try{return(t||JSON.parse)(e),z.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}const Sg={transitional:pW,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const i=r.getContentType()||"",n=i.indexOf("application/json")>-1,s=z.isObject(t);if(s&&z.isHTMLForm(t)&&(t=new FormData(t)),z.isFormData(t))return n?JSON.stringify(hW(t)):t;if(z.isArrayBuffer(t)||z.isBuffer(t)||z.isStream(t)||z.isFile(t)||z.isBlob(t)||z.isReadableStream(t))return t;if(z.isArrayBufferView(t))return t.buffer;if(z.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return gxe(t,this.formSerializer).toString();if((a=z.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return KS(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||n?(r.setContentType("application/json",!1),bxe(t)):t}],transformResponse:[function(t){const r=this.transitional||Sg.transitional,i=r&&r.forcedJSONParsing,n=this.responseType==="json";if(z.isResponse(t)||z.isReadableStream(t))return t;if(t&&z.isString(t)&&(i&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?Ae.from(a,Ae.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ps.classes.FormData,Blob:Ps.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],e=>{Sg.headers[e]={}});const _xe=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sxe=e=>{const t={};let r,i,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),i=o.substring(n+1).trim(),!(!r||t[r]&&_xe[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t},BF=Symbol("internals");function um(e){return e&&String(e).trim().toLowerCase()}function Rw(e){return e===!1||e==null?e:z.isArray(e)?e.map(Rw):String(e)}function $xe(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}const xxe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function wx(e,t,r,i,n){if(z.isFunction(i))return i.call(this,t,r);if(n&&(t=r),!!z.isString(t)){if(z.isString(i))return t.indexOf(i)!==-1;if(z.isRegExp(i))return i.test(t)}}function Txe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function Mxe(e,t){const r=z.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(n,s,o){return this[i].call(this,t,n,s,o)},configurable:!0})})}class Vi{constructor(t){t&&this.set(t)}set(t,r,i){const n=this;function s(a,l,c){const h=um(l);if(!h)throw new Error("header name must be a non-empty string");const f=z.findKey(n,h);(!f||n[f]===void 0||c===!0||c===void 0&&n[f]!==!1)&&(n[f||l]=Rw(a))}const o=(a,l)=>z.forEach(a,(c,h)=>s(c,h,l));if(z.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(z.isString(t)&&(t=t.trim())&&!xxe(t))o(Sxe(t),r);else if(z.isHeaders(t))for(const[a,l]of t.entries())s(l,a,i);else t!=null&&s(r,t,i);return this}get(t,r){if(t=um(t),t){const i=z.findKey(this,t);if(i){const n=this[i];if(!r)return n;if(r===!0)return $xe(n);if(z.isFunction(r))return r.call(this,n,i);if(z.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=um(t),t){const i=z.findKey(this,t);return!!(i&&this[i]!==void 0&&(!r||wx(this,this[i],i,r)))}return!1}delete(t,r){const i=this;let n=!1;function s(o){if(o=um(o),o){const a=z.findKey(i,o);a&&(!r||wx(i,i[a],a,r))&&(delete i[a],n=!0)}}return z.isArray(t)?t.forEach(s):s(t),n}clear(t){const r=Object.keys(this);let i=r.length,n=!1;for(;i--;){const s=r[i];(!t||wx(this,this[s],s,t,!0))&&(delete this[s],n=!0)}return n}normalize(t){const r=this,i={};return z.forEach(this,(n,s)=>{const o=z.findKey(i,s);if(o){r[o]=Rw(n),delete r[s];return}const a=t?Txe(s):String(s).trim();a!==s&&delete r[s],r[a]=Rw(n),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return z.forEach(this,(i,n)=>{i!=null&&i!==!1&&(r[n]=t&&z.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const i=new this(t);return r.forEach(n=>i.set(n)),i}static accessor(t){const i=(this[BF]=this[BF]={accessors:{}}).accessors,n=this.prototype;function s(o){const a=um(o);i[a]||(Mxe(n,o),i[a]=!0)}return z.isArray(t)?t.forEach(s):s(t),this}}Vi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(Vi.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[r]=i}}});z.freezeMethods(Vi);function bx(e,t){const r=this||Sg,i=t||r,n=Vi.from(i.headers);let s=i.data;return z.forEach(e,function(a){s=a.call(r,s,n.normalize(),t?t.status:void 0)}),n.normalize(),s}function fW(e){return!!(e&&e.__CANCEL__)}function Mf(e,t,r){Ae.call(this,e??"canceled",Ae.ERR_CANCELED,t,r),this.name="CanceledError"}z.inherits(Mf,Ae,{__CANCEL__:!0});function mW(e,t,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):t(new Ae("Request failed with status code "+r.status,[Ae.ERR_BAD_REQUEST,Ae.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Exe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Ixe(e,t){e=e||10;const r=new Array(e),i=new Array(e);let n=0,s=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),h=i[s];o||(o=c),r[n]=l,i[n]=c;let f=s,m=0;for(;f!==n;)m+=r[f++],f=f%e;if(n=(n+1)%e,n===s&&(s=(s+1)%e),c-o<t)return;const y=h&&c-h;return y?Math.round(m*1e3/y):void 0}}function kxe(e,t){let r=0;const i=1e3/t;let n=null;return function(){const o=this===!0,a=Date.now();if(o||a-r>i)return n&&(clearTimeout(n),n=null),r=a,e.apply(null,arguments);n||(n=setTimeout(()=>(n=null,r=Date.now(),e.apply(null,arguments)),i-(a-r)))}}const g_=(e,t,r=3)=>{let i=0;const n=Ixe(50,250);return kxe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-i,c=n(l),h=o<=a;i=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:s,lengthComputable:a!=null};f[t?"download":"upload"]=!0,e(f)},r)},Oxe=Ps.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let i;function n(s){let o=s;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=n(window.location.href),function(o){const a=z.isString(o)?n(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}(),Pxe=Ps.hasStandardBrowserEnv?{write(e,t,r,i,n,s){const o=[e+"="+encodeURIComponent(t)];z.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),z.isString(i)&&o.push("path="+i),z.isString(n)&&o.push("domain="+n),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Cxe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Rxe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function yW(e,t){return e&&!Cxe(t)?Rxe(e,t):t}const HF=e=>e instanceof Vi?{...e}:e;function kd(e,t){t=t||{};const r={};function i(c,h,f){return z.isPlainObject(c)&&z.isPlainObject(h)?z.merge.call({caseless:f},c,h):z.isPlainObject(h)?z.merge({},h):z.isArray(h)?h.slice():h}function n(c,h,f){if(z.isUndefined(h)){if(!z.isUndefined(c))return i(void 0,c,f)}else return i(c,h,f)}function s(c,h){if(!z.isUndefined(h))return i(void 0,h)}function o(c,h){if(z.isUndefined(h)){if(!z.isUndefined(c))return i(void 0,c)}else return i(void 0,h)}function a(c,h,f){if(f in t)return i(c,h);if(f in e)return i(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h)=>n(HF(c),HF(h),!0)};return z.forEach(Object.keys(Object.assign({},e,t)),function(h){const f=l[h]||n,m=f(e[h],t[h],h);z.isUndefined(m)&&f!==a||(r[h]=m)}),r}const gW=e=>{const t=kd({},e);let{data:r,withXSRFToken:i,xsrfHeaderName:n,xsrfCookieName:s,headers:o,auth:a}=t;t.headers=o=Vi.from(o),t.url=dW(yW(t.baseURL,t.url),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(z.isFormData(r)){if(Ps.hasStandardBrowserEnv||Ps.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(Ps.hasStandardBrowserEnv&&(i&&z.isFunction(i)&&(i=i(t)),i||i!==!1&&Oxe(t.url))){const c=n&&s&&Pxe.read(s);c&&o.set(n,c)}return t},Axe=typeof XMLHttpRequest<"u",Lxe=Axe&&function(e){return new Promise(function(r,i){const n=gW(e);let s=n.data;const o=Vi.from(n.headers).normalize();let{responseType:a}=n,l;function c(){n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let h=new XMLHttpRequest;h.open(n.method.toUpperCase(),n.url,!0),h.timeout=n.timeout;function f(){if(!h)return;const y=Vi.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),v={data:!a||a==="text"||a==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:y,config:e,request:h};mW(function(w){r(w),c()},function(w){i(w),c()},v),h=null}"onloadend"in h?h.onloadend=f:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(f)},h.onabort=function(){h&&(i(new Ae("Request aborted",Ae.ECONNABORTED,n,h)),h=null)},h.onerror=function(){i(new Ae("Network Error",Ae.ERR_NETWORK,n,h)),h=null},h.ontimeout=function(){let g=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const v=n.transitional||pW;n.timeoutErrorMessage&&(g=n.timeoutErrorMessage),i(new Ae(g,v.clarifyTimeoutError?Ae.ETIMEDOUT:Ae.ECONNABORTED,n,h)),h=null},s===void 0&&o.setContentType(null),"setRequestHeader"in h&&z.forEach(o.toJSON(),function(g,v){h.setRequestHeader(v,g)}),z.isUndefined(n.withCredentials)||(h.withCredentials=!!n.withCredentials),a&&a!=="json"&&(h.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&h.addEventListener("progress",g_(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",g_(n.onUploadProgress)),(n.cancelToken||n.signal)&&(l=y=>{h&&(i(!y||y.type?new Mf(null,e,h):y),h.abort(),h=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const m=Exe(n.url);if(m&&Ps.protocols.indexOf(m)===-1){i(new Ae("Unsupported protocol "+m+":",Ae.ERR_BAD_REQUEST,e));return}h.send(s||null)})},Nxe=(e,t)=>{let r=new AbortController,i;const n=function(l){if(!i){i=!0,o();const c=l instanceof Error?l:this.reason;r.abort(c instanceof Ae?c:new Mf(c instanceof Error?c.message:c))}};let s=t&&setTimeout(()=>{n(new Ae(`timeout ${t} of ms exceeded`,Ae.ETIMEDOUT))},t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",n):l.unsubscribe(n))}),e=null)};e.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",n));const{signal:a}=r;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]},Fxe=function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let i=0,n;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},Dxe=async function*(e,t,r){for await(const i of e)yield*Fxe(ArrayBuffer.isView(i)?i:await r(String(i)),t)},WF=(e,t,r,i,n)=>{const s=Dxe(e,t,n);let o=0;return new ReadableStream({type:"bytes",async pull(a){const{done:l,value:c}=await s.next();if(l){a.close(),i();return}let h=c.byteLength;r&&r(o+=h),a.enqueue(new Uint8Array(c))},cancel(a){return i(a),s.return()}},{highWaterMark:2})},ZF=(e,t)=>{const r=e!=null;return i=>setTimeout(()=>t({lengthComputable:r,total:e,loaded:i}))},YS=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",vW=YS&&typeof ReadableStream=="function",VI=YS&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),jxe=vW&&(()=>{let e=!1;const t=new Request(Ps.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),JF=64*1024,UI=vW&&!!(()=>{try{return z.isReadableStream(new Response("").body)}catch{}})(),v_={stream:UI&&(e=>e.body)};YS&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!v_[t]&&(v_[t]=z.isFunction(e[t])?r=>r[t]():(r,i)=>{throw new Ae(`Response type '${t}' is not supported`,Ae.ERR_NOT_SUPPORT,i)})})})(new Response);const zxe=async e=>{if(e==null)return 0;if(z.isBlob(e))return e.size;if(z.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(z.isArrayBufferView(e))return e.byteLength;if(z.isURLSearchParams(e)&&(e=e+""),z.isString(e))return(await VI(e)).byteLength},Vxe=async(e,t)=>{const r=z.toFiniteNumber(e.getContentLength());return r??zxe(t)},Uxe=YS&&(async e=>{let{url:t,method:r,data:i,signal:n,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:f="same-origin",fetchOptions:m}=gW(e);c=c?(c+"").toLowerCase():"text";let[y,g]=n||s||o?Nxe([n,s],o):[],v,b;const w=()=>{!v&&setTimeout(()=>{y&&y.unsubscribe()}),v=!0};let _;try{if(l&&jxe&&r!=="get"&&r!=="head"&&(_=await Vxe(h,i))!==0){let M=new Request(t,{method:"POST",body:i,duplex:"half"}),P;z.isFormData(i)&&(P=M.headers.get("content-type"))&&h.setContentType(P),M.body&&(i=WF(M.body,JF,ZF(_,g_(l)),null,VI))}z.isString(f)||(f=f?"cors":"omit"),b=new Request(t,{...m,signal:y,method:r.toUpperCase(),headers:h.normalize().toJSON(),body:i,duplex:"half",withCredentials:f});let $=await fetch(b);const E=UI&&(c==="stream"||c==="response");if(UI&&(a||E)){const M={};["status","statusText","headers"].forEach(N=>{M[N]=$[N]});const P=z.toFiniteNumber($.headers.get("content-length"));$=new Response(WF($.body,JF,a&&ZF(P,g_(a,!0)),E&&w,VI),M)}c=c||"text";let k=await v_[z.findKey(v_,c)||"text"]($,e);return!E&&w(),g&&g(),await new Promise((M,P)=>{mW(M,P,{data:k,headers:Vi.from($.headers),status:$.status,statusText:$.statusText,config:e,request:b})})}catch($){throw w(),$&&$.name==="TypeError"&&/fetch/i.test($.message)?Object.assign(new Ae("Network Error",Ae.ERR_NETWORK,e,b),{cause:$.cause||$}):Ae.from($,$&&$.code,e,b)}}),GI={http:sxe,xhr:Lxe,fetch:Uxe};z.forEach(GI,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const KF=e=>`- ${e}`,Gxe=e=>z.isFunction(e)||e===null||e===!1,wW={getAdapter:e=>{e=z.isArray(e)?e:[e];const{length:t}=e;let r,i;const n={};for(let s=0;s<t;s++){r=e[s];let o;if(i=r,!Gxe(r)&&(i=GI[(o=String(r)).toLowerCase()],i===void 0))throw new Ae(`Unknown adapter '${o}'`);if(i)break;n[o||"#"+s]=i}if(!i){const s=Object.entries(n).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(KF).join(`
`):" "+KF(s[0]):"as no adapter specified";throw new Ae("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:GI};function _x(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Mf(null,e)}function YF(e){return _x(e),e.headers=Vi.from(e.headers),e.data=bx.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),wW.getAdapter(e.adapter||Sg.adapter)(e).then(function(i){return _x(e),i.data=bx.call(e,e.transformResponse,i),i.headers=Vi.from(i.headers),i},function(i){return fW(i)||(_x(e),i&&i.response&&(i.response.data=bx.call(e,e.transformResponse,i.response),i.response.headers=Vi.from(i.response.headers))),Promise.reject(i)})}const bW="1.7.2",OC={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{OC[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const QF={};OC.transitional=function(t,r,i){function n(s,o){return"[Axios v"+bW+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(t===!1)throw new Ae(n(o," has been removed"+(r?" in "+r:"")),Ae.ERR_DEPRECATED);return r&&!QF[o]&&(QF[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,o,a):!0}};function qxe(e,t,r){if(typeof e!="object")throw new Ae("options must be an object",Ae.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let n=i.length;for(;n-- >0;){const s=i[n],o=t[s];if(o){const a=e[s],l=a===void 0||o(a,s,e);if(l!==!0)throw new Ae("option "+s+" must be "+l,Ae.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ae("Unknown option "+s,Ae.ERR_BAD_OPTION)}}const qI={assertOptions:qxe,validators:OC},Qa=qI.validators;class od{constructor(t){this.defaults=t,this.interceptors={request:new qF,response:new qF}}async request(t,r){try{return await this._request(t,r)}catch(i){if(i instanceof Error){let n;Error.captureStackTrace?Error.captureStackTrace(n={}):n=new Error;const s=n.stack?n.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=kd(this.defaults,r);const{transitional:i,paramsSerializer:n,headers:s}=r;i!==void 0&&qI.assertOptions(i,{silentJSONParsing:Qa.transitional(Qa.boolean),forcedJSONParsing:Qa.transitional(Qa.boolean),clarifyTimeoutError:Qa.transitional(Qa.boolean)},!1),n!=null&&(z.isFunction(n)?r.paramsSerializer={serialize:n}:qI.assertOptions(n,{encode:Qa.function,serialize:Qa.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&z.merge(s.common,s[r.method]);s&&z.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),r.headers=Vi.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let h,f=0,m;if(!l){const g=[YF.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),m=g.length,h=Promise.resolve(r);f<m;)h=h.then(g[f++],g[f++]);return h}m=a.length;let y=r;for(f=0;f<m;){const g=a[f++],v=a[f++];try{y=g(y)}catch(b){v.call(this,b);break}}try{h=YF.call(this,y)}catch(g){return Promise.reject(g)}for(f=0,m=c.length;f<m;)h=h.then(c[f++],c[f++]);return h}getUri(t){t=kd(this.defaults,t);const r=yW(t.baseURL,t.url);return dW(r,t.params,t.paramsSerializer)}}z.forEach(["delete","get","head","options"],function(t){od.prototype[t]=function(r,i){return this.request(kd(i||{},{method:t,url:r,data:(i||{}).data}))}});z.forEach(["post","put","patch"],function(t){function r(i){return function(s,o,a){return this.request(kd(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}od.prototype[t]=r(),od.prototype[t+"Form"]=r(!0)});class PC{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const i=this;this.promise.then(n=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](n);i._listeners=null}),this.promise.then=n=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(n);return o.cancel=function(){i.unsubscribe(s)},o},t(function(s,o,a){i.reason||(i.reason=new Mf(s,o,a),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new PC(function(n){t=n}),cancel:t}}}function Bxe(e){return function(r){return e.apply(null,r)}}function Hxe(e){return z.isObject(e)&&e.isAxiosError===!0}const BI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(BI).forEach(([e,t])=>{BI[t]=e});function _W(e){const t=new od(e),r=XH(od.prototype.request,t);return z.extend(r,od.prototype,t,{allOwnKeys:!0}),z.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return _W(kd(e,n))},r}const ar=_W(Sg);ar.Axios=od;ar.CanceledError=Mf;ar.CancelToken=PC;ar.isCancel=fW;ar.VERSION=bW;ar.toFormData=KS;ar.AxiosError=Ae;ar.Cancel=ar.CanceledError;ar.all=function(t){return Promise.all(t)};ar.spread=Bxe;ar.isAxiosError=Hxe;ar.mergeConfig=kd;ar.AxiosHeaders=Vi;ar.formToJSON=e=>hW(z.isHTMLForm(e)?new FormData(e):e);ar.getAdapter=wW.getAdapter;ar.HttpStatusCode=BI;ar.default=ar;const Wxe=()=>{const e=ae.useRef(void 0),t=ae.useRef(null),r=ae.useRef(null),i=ae.useRef(null),n=ae.useRef(!1),[s,o]=ae.useState([]);let{latlong:a}=JK();const l=()=>{if(n.current)return;n.current=!0;const m=new u7({basemap:"hybrid"}),y=new Jve({container:e.current,map:m,center:[31.6744,30.02],zoom:12});y.when(()=>{i.current=y,t.current=new I5,r.current=new I5,m.add(t.current),m.add(r.current);const g=new QH({url:"https://arcgis.itechs-eg.com/server/rest/services/WFM/Technician_Location_Task_Detail/MapServer/4"}),v=g.createQuery();v.where="1=1",v.outFields=["*"],g.queryFeatures(v).then(b=>{const w={};b.features.forEach(_=>{const $=_.attributes.user_id,E=_.uid;(!w[$]||E>w[$].uid)&&(w[$]=_)}),c()}).catch(b=>{console.error("Error querying features:",b)})})},c=()=>{if(console.log("calling addPins"),t.current&&a){t.current.removeAll(),r.current.removeAll();const m=a.split(",");if(m.length===4){const y=new ks({geometry:{type:"point",longitude:parseFloat(m[1]),latitude:parseFloat(m[0]),spatialReference:{wkid:4326}},symbol:{type:"simple-marker",color:"red",size:"12px"}});t.current.add(y);const g=new ks({geometry:{type:"point",longitude:parseFloat(m[3]),latitude:parseFloat(m[2]),spatialReference:{wkid:4326}},symbol:{type:"simple-marker",color:"red",size:"12px"}});t.current.add(g),o([y,g]),h({long:parseFloat(m[1]),lat:parseFloat(m[0])},{long:parseFloat(m[3]),lat:parseFloat(m[2])})}else console.error("Invalid latlong parameter")}},h=async(m,y)=>{const g="5b3ce3597851110001cf62485957637fb4de40aab06043d6f78f646e",v="https://api.openrouteservice.org/v2/directions/driving-car";try{const w=(await ar.get(v,{params:{api_key:g,start:`${m.long},${m.lat}`,end:`${y.long},${y.lat}`}})).data.features[0].geometry.coordinates;console.log("Route coordinates:",w);const _=new Dn({paths:w.map(E=>[E[0],E[1]]),spatialReference:{wkid:4326}}),$=new ks({geometry:_,symbol:{type:"simple-line",color:"black",width:3}});r.current.add($),console.log("Route graphic added:",$)}catch(b){console.error("Error fetching route:",b)}};ae.useEffect(()=>{l()},[a]);const f=m=>{i.current.goTo({target:m,zoom:15})};return po.jsxs("div",{children:[po.jsx("div",{ref:e,style:{width:"100%",height:"650px"}}),po.jsxs("div",{className:"bg-danger-subtle",style:{width:"400px",height:"12px"},children:[po.jsx("p",{children:"List of Features:"}),po.jsx("div",{children:s.map((m,y)=>{var g,v;return po.jsxs("div",{children:[`${((g=m.attributes)==null?void 0:g.first_name)??"Start"} ${((v=m.attributes)==null?void 0:v.last_name)??"End"}`," ",po.jsx("button",{onClick:()=>f(m.geometry),children:"Zoom To"})]},y)})})]})]})},Zxe=cY([{path:":latlong",element:po.jsx(Wxe,{})}]);Sx.createRoot(document.getElementById("root")).render(po.jsx(wD.StrictMode,{children:po.jsx(wY,{router:Zxe})}));export{jX as $,ks as A,Lhe as B,lu as C,fz as D,Sd as E,MTe as F,gr as G,v0 as H,F as I,X9 as J,OMe as K,IMe as L,sw as M,_Ie as N,pd as O,wi as P,rq as Q,VP as R,o3 as S,Qh as T,pme as U,ce as V,iq as W,ji as X,JG as Y,f0 as Z,ee as _,H2e as a,$u as a$,Ot as a0,xq as a1,Se as a2,tV as a3,wh as a4,rV as a5,eV as a6,X4 as a7,F3e as a8,WMe as a9,Ca as aA,lPe as aB,aPe as aC,pn as aD,gre as aE,mre as aF,_ke as aG,Ffe as aH,d3e as aI,Q_ as aJ,yd as aK,vi as aL,Iwe as aM,Owe as aN,Pwe as aO,Fwe as aP,Uwe as aQ,ZB as aR,HB as aS,WB as aT,Vwe as aU,Wwe as aV,Zwe as aW,u9 as aX,tie as aY,Sie as aZ,nM as a_,r8 as aa,Rs as ab,Q6 as ac,Ai as ad,Sb as ae,xo as af,Pv as ag,iEe as ah,VG as ai,Hne as aj,Hc as ak,Cd as al,_0e as am,Ty as an,Ui as ao,ii as ap,He as aq,lz as ar,Oe as as,hd as at,fie as au,rwe as av,iwe as aw,nwe as ax,C as ay,Mfe as az,Aye as b,Tke as b$,rg as b0,sS as b1,ho as b2,Re as b3,Pa as b4,Dn as b5,cS as b6,ct as b7,Qk as b8,j_ as b9,Pe as bA,M7 as bB,J2 as bC,_P as bD,eN as bE,sEe as bF,k3e as bG,D3e as bH,we as bI,Mce as bJ,pb as bK,wT as bL,S0e as bM,N6 as bN,dt as bO,q as bP,vhe as bQ,KTe as bR,EMe as bS,c$e as bT,WH as bU,J as bV,Ble as bW,kA as bX,Gh as bY,QTe as bZ,Lq as b_,TEe as ba,QO as bb,mde as bc,u3e as bd,c3e as be,aEe as bf,lEe as bg,dEe as bh,cEe as bi,hu as bj,uEe as bk,Ad as bl,mMe as bm,o$ as bn,o3e as bo,$S as bp,Fe as bq,Mu as br,yu as bs,Eu as bt,Eo as bu,GT as bv,$t as bw,UT as bx,BT as by,Pb as bz,nd as c,gU as c$,Mke as c0,Ike as c1,Age as c2,$ge as c3,un as c4,lTe as c5,v_e as c6,lf as c7,lee as c8,w_e as c9,rte as cA,TO as cB,MO as cC,ite as cD,X_ as cE,eS as cF,og as cG,bme as cH,NMe as cI,ome as cJ,aie as cK,wMe as cL,Rre as cM,w9 as cN,bne as cO,XA as cP,$z as cQ,xz as cR,v9 as cS,Tz as cT,jB as cU,Npe as cV,rde as cW,l3e as cX,_O as cY,GO as cZ,zce as c_,JOe as ca,tOe as cb,iN as cc,Dy as cd,IE as ce,YOe as cf,KOe as cg,bIe as ch,Efe as ci,B_ as cj,ete as ck,AOe as cl,DOe as cm,r4 as cn,yde as co,xd as cp,Rie as cq,jOe as cr,De as cs,fe as ct,Aa as cu,N3e as cv,tEe as cw,kMe as cx,kY as cy,nTe as cz,vf as d,J_ as d$,gde as d0,h3e as d1,fde as d2,p3e as d3,on as d4,AMe as d5,Nn as d6,tS as d7,Ore as d8,Gre as d9,bH as dA,gSe as dB,fSe as dC,hSe as dD,zr as dE,yn as dF,ug as dG,Oo as dH,Cu as dI,rP as dJ,tSe as dK,rSe as dL,eSe as dM,c9 as dN,oie as dO,Jre as dP,Kre as dQ,gie as dR,mSe as dS,R8 as dT,z_ as dU,PO as dV,tg as dW,y0 as dX,Gl as dY,ln as dZ,tre as d_,r9 as da,l9 as db,s9 as dc,qre as dd,Ct as de,Zn as df,pTe as dg,iee as dh,Uh as di,yO as dj,UY as dk,aP as dl,kP as dm,hse as dn,mIe as dp,qP as dq,TTe as dr,tO as ds,Q0 as dt,eP as du,wB as dv,r$e as dw,j2e as dx,Z2e as dy,bB as dz,Xe as e,Nr as e$,rre as e0,BH as e1,ZTe as e2,TMe as e3,lb as e4,nO as e5,X as e6,n$e as e7,Sz as e8,Mo as e9,ule as eA,Kxe as eB,_we as eC,C3e as eD,j3e as eE,La as eF,Su as eG,th as eH,Xc as eI,pke as eJ,rO as eK,W0 as eL,xT as eM,du as eN,JN as eO,u0 as eP,mee as eQ,dO as eR,jt as eS,fTe as eT,Oa as eU,K0 as eV,xr as eW,IO as eX,jte as eY,lSe as eZ,H0 as e_,yz as ea,u$e as eb,Gb as ec,it as ed,gf as ee,QH as ef,YMe as eg,Rle as eh,rEe as ei,JMe as ej,ri as ek,I5 as el,SL as em,Cl as en,et as eo,h0 as ep,_G as eq,sf as er,HTe as es,tMe as et,Xv as eu,yF as ev,$ke as ew,kke as ex,xke as ey,pu as ez,W2e as f,$_e as f$,VMe as f0,Ye as f1,Dle as f2,A1 as f3,yMe as f4,XTe as f5,ka as f6,USe as f7,K_e as f8,oPe as f9,Tu as fA,b4 as fB,kEe as fC,OEe as fD,A as fE,Zie as fF,dle as fG,uS as fH,oS as fI,rTe as fJ,lie as fK,Qt as fL,Ofe as fM,qle as fN,_d as fO,G2e as fP,F2e as fQ,dSe as fR,W4 as fS,cU as fT,p$e as fU,vC as fV,BS as fW,mx as fX,xI as fY,gC as fZ,qS as f_,nSe as fa,sPe as fb,iSe as fc,TY as fd,w8 as fe,ws as ff,v8 as fg,S7 as fh,eO as fi,hme as fj,EA as fk,y$ as fl,zTe as fm,ZMe as fn,t9 as fo,lme as fp,cme as fq,tq as fr,eh as fs,MM as ft,S0 as fu,wne as fv,RMe as fw,Xre as fx,Gie as fy,_n as fz,cA as g,Ibe as g$,pSe as g0,MC as g1,s$e as g2,Oae as g3,kae as g4,jne as g5,hL as g6,lh as g7,_i as g8,Ln as g9,TSe as gA,MSe as gB,ESe as gC,kSe as gD,OSe as gE,PSe as gF,CSe as gG,RSe as gH,ASe as gI,LSe as gJ,NSe as gK,FSe as gL,KH as gM,ySe as gN,wC as gO,OY as gP,Lre as gQ,Nre as gR,Fre as gS,nne as gT,Pre as gU,sne as gV,Rb as gW,fOe as gX,Ebe as gY,yOe as gZ,mOe as g_,DO as ga,uTe as gb,xL as gc,YH as gd,gh as ge,uee as gf,$o as gg,Ms as gh,N0 as gi,_C as gj,_B as gk,wSe as gl,vSe as gm,of as gn,DSe as go,J_e as gp,Na as gq,fC as gr,DB as gs,dwe as gt,cwe as gu,uwe as gv,u2e as gw,aSe as gx,GSe as gy,whe as gz,N_ as h,Kie as h$,H3e as h0,uMe as h1,Are as h2,qn as h3,iTe as h4,PTe as h5,Ia as h6,Un as h7,Yt as h8,FMe as h9,Y8 as hA,tz as hB,Ule as hC,Swe as hD,bPe as hE,FH as hF,sO as hG,vp as hH,xSe as hI,EPe as hJ,JSe as hK,KSe as hL,sF as hM,Me as hN,Fr as hO,yIe as hP,AX as hQ,XMe as hR,Y_ as hS,rse as hT,US as hU,uf as hV,hn as hW,mTe as hX,CMe as hY,$f as hZ,o9 as h_,Sy as ha,Wre as hb,_ie as hc,$ie as hd,vme as he,qwe as hf,Xee as hg,v7 as hh,GS as hi,ote as hj,r_ as hk,NO as hl,Qre as hm,Zre as hn,i9 as ho,db as hp,Bb as hq,SS as hr,PP as hs,_he as ht,She as hu,tw as hv,HH as hw,q_ as hx,rU as hy,HSe as hz,B2e as i,i$e as i$,Db as i0,LMe as i1,a9 as i2,rie as i3,_Q as i4,ETe as i5,DG as i6,XG as i7,E0 as i8,CP as i9,Qke as iA,dH as iB,K_ as iC,rd as iD,q2 as iE,NS as iF,LS as iG,YP as iH,Li as iI,sge as iJ,PY as iK,WTe as iL,DX as iM,Z_ as iN,eMe as iO,Eke as iP,Ld as iQ,Td as iR,Zk as iS,Jk as iT,nU as iU,fu as iV,v1e as iW,w1e as iX,cSe as iY,T2e as iZ,U2e as i_,n3 as ia,OG as ib,pg as ic,FTe as id,ze as ie,Jn as ig,_M as ih,Cae as ii,An as ij,T7 as ik,GY as il,SP as im,O3e as io,I3e as ip,S as iq,fMe as ir,Ske as is,Jne as it,Zne as iu,GMe as iv,eEe as iw,o_ as ix,Xke as iy,eOe as iz,Gi as j,qMe as j$,q6 as j0,B6 as j1,Xxe as j2,rS as j3,w1 as j4,oEe as j5,Pz as j6,Nte as j7,Gte as j8,eg as j9,BTe as jA,Mz as jB,VA as jC,Vz as jD,K0e as jE,rMe as jF,Vt as jG,yPe as jH,lOe as jI,$we as jJ,ume as jK,Yhe as jL,Hhe as jM,dg as jN,PMe as jO,LO as jP,tP as jQ,Rd as jR,JTe as jS,g8 as jT,XEe as jU,si as jV,id as jW,Oh as jX,R1e as jY,ROe as jZ,Y9 as j_,bMe as ja,yie as jb,Cde as jc,y_ as jd,ZOe as je,e3e as jf,BSe as jg,su as jh,MF as ji,g0 as jj,gB as jk,Rne as jl,Ane as jm,sq as jn,Bke as jo,qee as jp,S8 as jq,RTe as jr,CTe as js,CQ as jt,PQ as ju,tTe as jv,IY as jw,QMe as jx,G6 as jy,iz as jz,gu as k,Z1e as k$,m8 as k0,Pt as k1,IA as k2,vwe as k3,rOe as k4,U_ as k5,rpe as k6,op as k7,Upe as k8,fme as k9,fO as kA,one as kB,ine as kC,eie as kD,rne as kE,t8 as kF,iu as kG,Es as kH,RS as kI,jMe as kJ,WG as kK,KG as kL,Ufe as kM,SIe as kN,Yfe as kO,Ih as kP,$Ie as kQ,k0 as kR,Cme as kS,l_e as kT,a_e as kU,Sf as kV,nC as kW,M1e as kX,E1e as kY,oC as kZ,MB as k_,dOe as ka,cC as kb,cOe as kc,Ac as kd,yi as ke,oTe as kf,aTe as kg,sTe as kh,tee as ki,Yie as kj,Uie as kk,qie as kl,wQ as km,U6 as kn,uPe as ko,Bee as kp,EU as kq,cPe as kr,Nye as ks,bhe as kt,zY as ku,Hte as kv,hMe as kw,A9 as kx,ipe as ky,P3e as kz,SPe as l,mke as l$,CB as l0,f_ as l1,SB as l2,Vy as l3,W3e as l4,Z3e as l5,J3e as l6,Ts as l7,uOe as l8,Vre as l9,dfe as lA,FG as lB,k0e as lC,YT as lD,tH as lE,pOe as lF,COe as lG,bOe as lH,vOe as lI,Cbe as lJ,POe as lK,wOe as lL,q5 as lM,B5 as lN,H5 as lO,MOe as lP,TOe as lQ,EOe as lR,IOe as lS,Obe as lT,dC as lU,q3 as lV,AP as lW,_a as lX,hOe as lY,kq as lZ,Vh as l_,bm as la,pEe as lb,n9 as lc,Nce as ld,Rce as le,f2e as lf,To as lg,$d as lh,zMe as li,OOe as lj,fo as lk,cfe as ll,PS as lm,mr as ln,tC as lo,FOe as lp,uSe as lq,a3e as lr,r3e as ls,n3e as lt,i3e as lu,s3e as lv,bi as lw,f3e as lx,pA as ly,t3e as lz,UIe as m,R3e as m$,YTe as m0,Jxe as m1,Ste as m2,_te as m3,gMe as m4,Vpe as m5,sX as m6,gL as m7,_Ee as m8,qae as m9,vP as mA,Lde as mB,Nde as mC,zve as mD,Une as mE,Pbe as mF,UMe as mG,nEe as mH,nse as mI,BMe as mJ,Bne as mK,HMe as mL,z3e as mM,sme as mN,gOe as mO,kOe as mP,$Oe as mQ,xOe as mR,MS as mS,KMe as mT,_Oe as mU,SOe as mV,Fme as mW,Dme as mX,bie as mY,gee as mZ,Qxe as m_,qOe as ma,GOe as mb,qN as mc,JT as md,Tde as me,xEe as mf,_o as mg,FEe as mh,NEe as mi,Gue as mj,Uue as mk,mP as ml,$w as mm,Yxe as mn,Ide as mo,mG as mp,nge as mq,Ede as mr,Xb as ms,t_ as mt,x0 as mu,cTe as mv,Cke as mw,X0 as mx,ve as my,j4 as mz,H as n,A3e as n0,Sne as n1,_ne as n2,Nhe as n3,MY as n4,L3e as n5,PEe as n6,REe as n7,Kke as n8,hPe as n9,IPe as na,u as o,T as p,xe as q,qIe as r,D as s,EH as t,_Pe as u,ag as v,QOe as w,xf as x,d as y,xt as z};
