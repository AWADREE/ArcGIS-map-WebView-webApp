const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/IdentityManager-Dr_jY1k_.js","assets/substitute-DBSDlRyY.js","assets/ElevationLayer-o3nCuZUJ.js","assets/ArcGISCachedService-BiiOa3iY.js","assets/TileInfoTilemapCache-BOSCHBO6.js","assets/TilemapCache-Beokhphx.js","assets/ByteSizeUnit-BsxeN7wM.js","assets/layersCreator-DlJAumMp.js","assets/portalLayers-DVk7M_Bl.js","assets/associatedFeatureServiceUtils-CrF_vcDj.js","assets/fetchService-BfCF4u57.js","assets/arcgisLayers-BQoRyFjY.js","assets/statsWorker-BbXjcs3U.js","assets/utils-DuGggA5Q.js","assets/utils-CPe4OUf_.js","assets/utils-CvZOsMR0.js","assets/ClassBreaksDefinition-GXfenc9M.js","assets/geometryEngineWorker-BwXkxe4S.js","assets/geometryEngineJSON-utgjDhCC.js","assets/geometryEngineBase-C-hLirDw.js","assets/json-Wa8cmqdu.js","assets/CSVSourceWorker-DoVJ4XB-.js","assets/date-M6n_RqpC.js","assets/OptimizedFeature-DUj7o6ET.js","assets/FeatureStore-DfxTKBSF.js","assets/featureConversionUtils-CClVFUWU.js","assets/OptimizedFeatureSet-Blu9Ckm7.js","assets/BoundsStore-DjcwXrXQ.js","assets/PooledRBush-Ch6mouT0.js","assets/timeSupport-Sldv1L4a.js","assets/QueryEngine-pikahsJ2.js","assets/WhereClause-Bpx0qv4O.js","assets/TimeOnly-DbmWfbI5.js","assets/QueryEngineCapabilities-CTDe3LlQ.js","assets/number-DAvOpiAf.js","assets/clientSideDefaults-Dfx6-nav.js","assets/EdgeProcessingWorker-CwzfJDBh.js","assets/InterleavedLayout-kljGNGxF.js","assets/BufferView-DQ4hvl-0.js","assets/types-D0PSWh4d.js","assets/Util-n1Pj7GN5.js","assets/edgeProcessing-DNgAUKQ9.js","assets/deduplicate-CfX0z3bF.js","assets/Indices-IIuaEUBQ.js","assets/VertexAttribute-BlT9lbVY.js","assets/enums-BlUEVwJR.js","assets/VertexElementDescriptor-BOD-G50G.js","assets/ElevationSamplerWorker-Br6aTPFF.js","assets/MeshLocalVertexSpace-DoV88qP7.js","assets/vertexSpaceConversion-83GpjSoF.js","assets/mat3f64-q3fE-ZOt.js","assets/mat4f64-CSKppSlJ.js","assets/spatialReferenceEllipsoidUtils-D6eWko7x.js","assets/computeTranslationToOriginAndRotation-CkHkFfSN.js","assets/meshVertexSpaceUtils-DbmwyP0Q.js","assets/vec3-CftQLgpO.js","assets/projection-BphL6MCt.js","assets/DoubleArray-CNHF4zf7.js","assets/vec4-qrS08aiv.js","assets/FeatureServiceSnappingSourceWorker-X_B8hLE3.js","assets/pbfQueryUtils-Bz1spQwK.js","assets/pbf-CgWkWbTT.js","assets/query-DU-xOla4.js","assets/GeoJSONSourceWorker-Ckycg3w2.js","assets/geojson-AWMImjx5.js","assets/sourceUtils-BqI2l3rb.js","assets/MemorySourceWorker-wAbp3Saw.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-ioCqJ5k-.js","assets/FeaturePipelineWorker-DKvLjeg5.js","assets/definitions-Y_v3njP4.js","assets/AttributeStore-CJP2vFWU.js","assets/LabelMetric-DpaE1p3S.js","assets/enums-BRXbslMp.js","assets/Texture-B4o73kxg.js","assets/Program-DoeiLafD.js","assets/UpdateTracking2D-WhBvUFpw.js","assets/BidiEngine-BwB1Df7c.js","assets/GeometryUtils-DtaNgGui.js","assets/Rect-CUzevAry.js","assets/BindType-BmZEZMMh.js","assets/highlightReasons-Bp_kSljk.js","assets/tileUtils-B7X19rIS.js","assets/MeshWriterRegistry-B3kfDE0k.js","assets/PieChartMeshWriter-vSoYwvwZ.js","assets/TurboLine-BZd45Rj-.js","assets/earcut-HpBaasox.js","assets/constants-D5zmR9t2.js","assets/grouping-B0w0bRQz.js","assets/ogcFeatureUtils-H5Wd8IkR.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-0XkNwi5l.js","assets/PointCloudWorker-CFJ6e3Ca.js","assets/quat-C5d9Wik6.js","assets/quatf64-Bdb9ZJJK.js","assets/vec3f32-nZdmKIgz.js","assets/PointCloudUniqueValueRenderer-Bp3NABrg.js","assets/I3SBinaryReader-B7NezOUL.js","assets/orientedBoundingBox-DXBs_6j0.js","assets/plane-B6fn5oky.js","assets/RasterWorker-IMXs5SVf.js","assets/dataUtils-wGrf0rQl.js","assets/RasterSymbolizer-Cr3Q8lLC.js","assets/PolynomialTransform-CfL3n8mt.js","assets/rasterProjectionHelper-Dp3rqVIQ.js","assets/SceneLayerSnappingSourceWorker-DHq89f_E.js","assets/lineSegment-De8nHcA1.js","assets/sphere-BOsUPBYk.js","assets/SceneLayerWorker-BaG7WWKv.js","assets/I3SUtil-C-1H1slz.js","assets/floatRGBA-YdDdDM3-.js","assets/NormalAttribute.glsl-BQ2i_F_u.js","assets/interfaces-B8ge7Jg9.js","assets/WFSSourceWorker-DZZvd0IB.js","assets/wfsUtils-D1oHS5nP.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-Cbouurg3.js","assets/enums-BRzLM11V.js","assets/config-MDUrh2eL.js","assets/StyleDefinition-BK3ROBTO.js","assets/SourceLayerData-_rQzjDgn.js","assets/StyleRepository-D99OUEFm.js","assets/Popup-1-Ii80og.js","assets/AttachmentInfo-QbFK5gCD.js","assets/utils-CW7aBDIR.js","assets/executeQueryJSON-BHuZrSP2.js","assets/layerViewUtils-DaObYqcz.js","assets/arcadeUtils-BT_srKO4.js","assets/ImmutableArray-BPVd6ESQ.js","assets/webStyleSymbolUtils-BH87z9JU.js","assets/devEnvironmentUtils-D6qIi8Ky.js","assets/geometryServiceUtils-C0Vt0WjX.js","assets/project-BuvyuRzV.js","assets/webglDeps-wl8dfZuV.js","assets/NestedMap-DgiGbX8E.js","assets/ProgramTemplate-CKwdXi9z.js","assets/mapViewDeps-Bymes7ld.js","assets/SDFHelper-C6ncn8-z.js","assets/Container-BfZfETYd.js","assets/WGLContainer-CqM9BaS8.js","assets/MagnifierPrograms-DLg1pHTX.js","assets/testSVGPremultipliedAlpha-eql7j0jo.js","assets/RenderingContext-Cbh73rAN.js","assets/renderState-C37QfRey.js","assets/basicInterfaces-DngWxyLO.js","assets/doublePrecisionUtils-B0owpBza.js","assets/imageUtils-CuMbzDt2.js","assets/rasterizingUtils-C-MZy7fx.js","assets/utils-C5AUjHOx.js","assets/FeatureCommandQueue-CFym4o7y.js","assets/GraphicsView2D-BDJVKFC2.js","assets/normalizeUtilsSync-CfhMVrSz.js","assets/GraphicContainer-BXdM84zW.js","assets/AGraphicContainer-Dhobidam.js","assets/TechniqueInstance-RhoNwrVV.js","assets/TileContainer-6PiNVl3F.js","assets/requestImageUtils-B7oT3m3V.js","assets/TileLayerView2D-DImKaVrP.js","assets/imageUtils-C4ryUErl.js","assets/Bitmap-BLl0p-GX.js","assets/LayerView-BFcItbad.js","assets/HighlightGraphicContainer-DqR9FjMC.js","assets/RefreshableLayerView-CN8DgsAT.js","assets/drapedUtils-Bdhmtjma.js","assets/scaleUtils-CqxREnit.js","assets/floorFilterUtils-DZ5C6FQv.js","assets/sublayerUtils-D4kupCAE.js","assets/popupUtils-C0rC_cWU.js","assets/FeatureLayerView2D-CU7qDH2E.js","assets/timeSupport-USjFL91m.js","assets/HighlightCounter-DsI7j-U6.js","assets/BaseDynamicLayerView2D-C53nMHSD.js","assets/BitmapContainer-BAMCadWm.js","assets/ExportStrategy-2RqB7EK5.js","assets/CatalogLayerView2D-CxHb8IQa.js","assets/CatalogDynamicGroupLayerView2D-DXJ-VGB5.js","assets/CatalogFootprintLayerView2D-DsFyOiVm.js","assets/GeoRSSLayerView2D-B8B1axyn.js","assets/GraphicsLayerView2D-N3AtYsNd.js","assets/GroupLayerView2D-BaSyzdRt.js","assets/ImageryLayerView2D-BogRHmlh.js","assets/RasterVFDisplayObject-Ceo6rLCP.js","assets/ImageryTileLayerView2D-DysdlJ6j.js","assets/multidimensionalUtils-CP6Ueldu.js","assets/rasterUtils-C9lRt6Ss.js","assets/RawBlockCache-CKCpFIGb.js","assets/KMLLayerView2D--z9l6aWy.js","assets/kmlUtils-Y5wwkq95.js","assets/KnowledgeGraphLayerView2D-hXolP5tR.js","assets/MapImageLayerView2D-DZjyZCUK.js","assets/ExportImageParameters-DbsMU4Md.js","assets/MapNotesLayerView2D-BdKmyxmS.js","assets/MediaLayerView2D-NtF_Li0w.js","assets/perspectiveUtils-BVVzX2Sv.js","assets/OverlayContainer-nx9N9vVl.js","assets/OGCFeatureLayerView2D-BR4x78g4.js","assets/RouteLayerView2D-CKCE8W-v.js","assets/Stop-CfZD9V4Q.js","assets/StreamLayerView2D-CQJwS01S.js","assets/SubtypeGroupLayerView2D-BdcZEYmS.js","assets/VectorTileLayerView2D-CsIcPt03.js","assets/VideoLayerView2D-t6MasYUr.js","assets/TelemetryDisplay-p4hWLOJM.js","assets/WMSLayerView2D-1yY9fGvs.js","assets/ExportWMSImageParameters-DhxJtJrQ.js","assets/WMTSLayerView2D-s-Mntcfp.js","assets/calcite-button-PjL6gqqj.js","assets/form-FiuvSYLV.js","assets/dom-CZeUaRuV.js","assets/guid-6Y9utpk5.js","assets/interactive-DBNu7rN4.js","assets/label-DKhIsKyU.js","assets/component-RjiOe4wK.js","assets/loadable-4ML6c0wz.js","assets/t9n-CZON7GYm.js","assets/observers-DvrEim4U.js","assets/icon-Psui7f_z.js","assets/loader-CaWKwDAB.js","assets/calcite-icon-CHm37ziK.js","assets/editingSupport-Oegzi8XQ.js","assets/infoFor3D-DsOdlPuA.js","assets/layersLoader-CjIXQsBn.js","assets/jsonContext-C1udtOuc.js","assets/featureLayerUtils-Ckl58DSC.js","assets/originUtils-D69mHv66.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw.js","assets/utils-CaRrPOo9.js","assets/saveAPIKeyUtils-xtOerexA.js","assets/saveUtils-BfZZdkP2.js","assets/FeatureLayerSource-Cofr7zhr.js","assets/MeshTransform-BhyT2tQp.js","assets/QueryTask-EvVMEeKD.js","assets/executeForIds-Bv7yYBiC.js","assets/executeQueryPBF-C4mA-0l9.js"])))=>i.map(i=>d[i]);
function TH(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in e)){const s=Object.getOwnPropertyDescriptor(i,n);s&&Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();function g5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var v5={exports:{}},sb={},w5={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly=Symbol.for("react.element"),MH=Symbol.for("react.portal"),EH=Symbol.for("react.fragment"),IH=Symbol.for("react.strict_mode"),kH=Symbol.for("react.profiler"),OH=Symbol.for("react.provider"),PH=Symbol.for("react.context"),CH=Symbol.for("react.forward_ref"),AH=Symbol.for("react.suspense"),RH=Symbol.for("react.memo"),LH=Symbol.for("react.lazy"),rP=Symbol.iterator;function NH(e){return e===null||typeof e!="object"?null:(e=rP&&e[rP]||e["@@iterator"],typeof e=="function"?e:null)}var b5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_5=Object.assign,S5={};function ah(e,t,r){this.props=e,this.context=t,this.refs=S5,this.updater=r||b5}ah.prototype.isReactComponent={};ah.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ah.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $5(){}$5.prototype=ah.prototype;function m3(e,t,r){this.props=e,this.context=t,this.refs=S5,this.updater=r||b5}var y3=m3.prototype=new $5;y3.constructor=m3;_5(y3,ah.prototype);y3.isPureReactComponent=!0;var iP=Array.isArray,x5=Object.prototype.hasOwnProperty,g3={current:null},T5={key:!0,ref:!0,__self:!0,__source:!0};function M5(e,t,r){var i,n={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)x5.call(t,i)&&!T5.hasOwnProperty(i)&&(n[i]=t[i]);var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];n.children=u}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:Ly,type:e,key:s,ref:o,props:n,_owner:g3.current}}function FH(e,t){return{$$typeof:Ly,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function v3(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ly}function DH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var nP=/\/+/g;function U_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?DH(""+e.key):t.toString(36)}function Vg(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ly:case MH:o=!0}}if(o)return o=e,n=n(o),e=i===""?"."+U_(o,0):i,iP(n)?(r="",e!=null&&(r=e.replace(nP,"$&/")+"/"),Vg(n,t,r,"",function(c){return c})):n!=null&&(v3(n)&&(n=FH(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(nP,"$&/")+"/")+e)),t.push(n)),1;if(o=0,i=i===""?".":i+":",iP(e))for(var a=0;a<e.length;a++){s=e[a];var u=i+U_(s,a);o+=Vg(s,t,r,u,n)}else if(u=NH(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=i+U_(s,a++),o+=Vg(s,t,r,u,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function _0(e,t,r){if(e==null)return e;var i=[],n=0;return Vg(e,i,"","",function(s){return t.call(r,s,n++)}),i}function jH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qr={current:null},Ug={transition:null},zH={ReactCurrentDispatcher:Qr,ReactCurrentBatchConfig:Ug,ReactCurrentOwner:g3};function E5(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:_0,forEach:function(e,t,r){_0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return _0(e,function(){t++}),t},toArray:function(e){return _0(e,function(t){return t})||[]},only:function(e){if(!v3(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=ah;ke.Fragment=EH;ke.Profiler=kH;ke.PureComponent=m3;ke.StrictMode=IH;ke.Suspense=AH;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zH;ke.act=E5;ke.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=_5({},e.props),n=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=g3.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)x5.call(t,u)&&!T5.hasOwnProperty(u)&&(i[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Ly,type:e.type,key:n,ref:s,props:i,_owner:o}};ke.createContext=function(e){return e={$$typeof:PH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:OH,_context:e},e.Consumer=e};ke.createElement=M5;ke.createFactory=function(e){var t=M5.bind(null,e);return t.type=e,t};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:CH,render:e}};ke.isValidElement=v3;ke.lazy=function(e){return{$$typeof:LH,_payload:{_status:-1,_result:e},_init:jH}};ke.memo=function(e,t){return{$$typeof:RH,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=Ug.transition;Ug.transition={};try{e()}finally{Ug.transition=t}};ke.unstable_act=E5;ke.useCallback=function(e,t){return Qr.current.useCallback(e,t)};ke.useContext=function(e){return Qr.current.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e){return Qr.current.useDeferredValue(e)};ke.useEffect=function(e,t){return Qr.current.useEffect(e,t)};ke.useId=function(){return Qr.current.useId()};ke.useImperativeHandle=function(e,t,r){return Qr.current.useImperativeHandle(e,t,r)};ke.useInsertionEffect=function(e,t){return Qr.current.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return Qr.current.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return Qr.current.useMemo(e,t)};ke.useReducer=function(e,t,r){return Qr.current.useReducer(e,t,r)};ke.useRef=function(e){return Qr.current.useRef(e)};ke.useState=function(e){return Qr.current.useState(e)};ke.useSyncExternalStore=function(e,t,r){return Qr.current.useSyncExternalStore(e,t,r)};ke.useTransition=function(){return Qr.current.useTransition()};ke.version="18.3.1";w5.exports=ke;var de=w5.exports;const VH=g5(de),UH=TH({__proto__:null,default:VH},[de]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GH=de,qH=Symbol.for("react.element"),BH=Symbol.for("react.fragment"),HH=Object.prototype.hasOwnProperty,WH=GH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZH={key:!0,ref:!0,__self:!0,__source:!0};function I5(e,t,r){var i,n={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)HH.call(t,i)&&!ZH.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:qH,type:e,key:s,ref:o,props:n,_owner:WH.current}}sb.Fragment=BH;sb.jsx=I5;sb.jsxs=I5;v5.exports=sb;var Br=v5.exports,k5={exports:{}},Vi={},O5={exports:{}},P5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,pe){var Me=q.length;q.push(pe);e:for(;0<Me;){var ot=Me-1>>>1,Ct=q[ot];if(0<n(Ct,pe))q[ot]=pe,q[Me]=Ct,Me=ot;else break e}}function r(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var pe=q[0],Me=q.pop();if(Me!==pe){q[0]=Me;e:for(var ot=0,Ct=q.length,Xl=Ct>>>1;ot<Xl;){var Ys=2*(ot+1)-1,Ah=q[Ys],Qs=Ys+1,eu=q[Qs];if(0>n(Ah,Me))Qs<Ct&&0>n(eu,Ah)?(q[ot]=eu,q[Qs]=Me,ot=Qs):(q[ot]=Ah,q[Ys]=Me,ot=Ys);else if(Qs<Ct&&0>n(eu,Me))q[ot]=eu,q[Qs]=Me,ot=Qs;else break e}}return pe}function n(q,pe){var Me=q.sortIndex-pe.sortIndex;return Me!==0?Me:q.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,f=null,m=3,y=!1,g=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(q){for(var pe=r(c);pe!==null;){if(pe.callback===null)i(c);else if(pe.startTime<=q)i(c),pe.sortIndex=pe.expirationTime,t(u,pe);else break;pe=r(c)}}function T(q){if(v=!1,$(q),!g)if(r(u)!==null)g=!0,Nr(E);else{var pe=r(c);pe!==null&&Ye(T,pe.startTime-q)}}function E(q,pe){g=!1,v&&(v=!1,b(L),L=-1),y=!0;var Me=m;try{for($(pe),f=r(u);f!==null&&(!(f.expirationTime>pe)||q&&!Y());){var ot=f.callback;if(typeof ot=="function"){f.callback=null,m=f.priorityLevel;var Ct=ot(f.expirationTime<=pe);pe=e.unstable_now(),typeof Ct=="function"?f.callback=Ct:f===r(u)&&i(u),$(pe)}else i(u);f=r(u)}if(f!==null)var Xl=!0;else{var Ys=r(c);Ys!==null&&Ye(T,Ys.startTime-pe),Xl=!1}return Xl}finally{f=null,m=Me,y=!1}}var I=!1,C=null,L=-1,H=5,V=-1;function Y(){return!(e.unstable_now()-V<H)}function ee(){if(C!==null){var q=e.unstable_now();V=q;var pe=!0;try{pe=C(!0,q)}finally{pe?Te():(I=!1,C=null)}}else I=!1}var Te;if(typeof _=="function")Te=function(){_(ee)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,St=oe.port2;oe.port1.onmessage=ee,Te=function(){St.postMessage(null)}}else Te=function(){w(ee,0)};function Nr(q){C=q,I||(I=!0,Te())}function Ye(q,pe){L=w(function(){q(e.unstable_now())},pe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,Nr(E))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var pe=3;break;default:pe=m}var Me=m;m=pe;try{return q()}finally{m=Me}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,pe){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Me=m;m=q;try{return pe()}finally{m=Me}},e.unstable_scheduleCallback=function(q,pe,Me){var ot=e.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?ot+Me:ot):Me=ot,q){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=Me+Ct,q={id:h++,callback:pe,priorityLevel:q,startTime:Me,expirationTime:Ct,sortIndex:-1},Me>ot?(q.sortIndex=Me,t(c,q),r(u)===null&&q===r(c)&&(v?(b(L),L=-1):v=!0,Ye(T,Me-ot))):(q.sortIndex=Ct,t(u,q),g||y||(g=!0,Nr(E))),q},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(q){var pe=m;return function(){var Me=m;m=pe;try{return q.apply(this,arguments)}finally{m=Me}}}})(P5);O5.exports=P5;var JH=O5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KH=de,Di=JH;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C5=new Set,Gm={};function qc(e,t){Vp(e,t),Vp(e+"Capture",t)}function Vp(e,t){for(Gm[e]=t,e=0;e<t.length;e++)C5.add(t[e])}var Bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),H2=Object.prototype.hasOwnProperty,YH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sP={},oP={};function QH(e){return H2.call(oP,e)?!0:H2.call(sP,e)?!1:YH.test(e)?oP[e]=!0:(sP[e]=!0,!1)}function XH(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function eW(e,t,r,i){if(t===null||typeof t>"u"||XH(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xr(e,t,r,i,n,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mr[e]=new Xr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];mr[t]=new Xr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){mr[e]=new Xr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){mr[e]=new Xr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mr[e]=new Xr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){mr[e]=new Xr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){mr[e]=new Xr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){mr[e]=new Xr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){mr[e]=new Xr(e,5,!1,e.toLowerCase(),null,!1,!1)});var w3=/[\-:]([a-z])/g;function b3(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(w3,b3);mr[t]=new Xr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(w3,b3);mr[t]=new Xr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(w3,b3);mr[t]=new Xr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){mr[e]=new Xr(e,1,!1,e.toLowerCase(),null,!1,!1)});mr.xlinkHref=new Xr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){mr[e]=new Xr(e,1,!1,e.toLowerCase(),null,!0,!0)});function _3(e,t,r,i){var n=mr.hasOwnProperty(t)?mr[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(eW(t,r,n,i)&&(r=null),i||n===null?QH(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var ta=KH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S0=Symbol.for("react.element"),Jd=Symbol.for("react.portal"),Kd=Symbol.for("react.fragment"),S3=Symbol.for("react.strict_mode"),W2=Symbol.for("react.profiler"),A5=Symbol.for("react.provider"),R5=Symbol.for("react.context"),$3=Symbol.for("react.forward_ref"),Z2=Symbol.for("react.suspense"),J2=Symbol.for("react.suspense_list"),x3=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),L5=Symbol.for("react.offscreen"),aP=Symbol.iterator;function Lh(e){return e===null||typeof e!="object"?null:(e=aP&&e[aP]||e["@@iterator"],typeof e=="function"?e:null)}var wt=Object.assign,G_;function df(e){if(G_===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);G_=t&&t[1]||""}return`
`+G_+e}var q_=!1;function B_(e,t){if(!e||q_)return"";q_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),s=i.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var u=`
`+n[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{q_=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?df(e):""}function tW(e){switch(e.tag){case 5:return df(e.type);case 16:return df("Lazy");case 13:return df("Suspense");case 19:return df("SuspenseList");case 0:case 2:case 15:return e=B_(e.type,!1),e;case 11:return e=B_(e.type.render,!1),e;case 1:return e=B_(e.type,!0),e;default:return""}}function K2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Kd:return"Fragment";case Jd:return"Portal";case W2:return"Profiler";case S3:return"StrictMode";case Z2:return"Suspense";case J2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case R5:return(e.displayName||"Context")+".Consumer";case A5:return(e._context.displayName||"Context")+".Provider";case $3:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case x3:return t=e.displayName||null,t!==null?t:K2(e.type)||"Memo";case Ha:t=e._payload,e=e._init;try{return K2(e(t))}catch{}}return null}function rW(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K2(t);case 8:return t===S3?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ml(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function N5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function iW(e){var t=N5(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $0(e){e._valueTracker||(e._valueTracker=iW(e))}function F5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=N5(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function w1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Y2(e,t){var r=t.checked;return wt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function lP(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Ml(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function D5(e,t){t=t.checked,t!=null&&_3(e,"checked",t,!1)}function Q2(e,t){D5(e,t);var r=Ml(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?X2(e,t.type,r):t.hasOwnProperty("defaultValue")&&X2(e,t.type,Ml(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function uP(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function X2(e,t,r){(t!=="number"||w1(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var pf=Array.isArray;function yp(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Ml(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function e$(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return wt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cP(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(B(92));if(pf(r)){if(1<r.length)throw Error(B(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ml(r)}}function j5(e,t){var r=Ml(t.value),i=Ml(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function dP(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function z5(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function t$(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?z5(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var x0,V5=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(x0=x0||document.createElement("div"),x0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=x0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qm(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var dm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nW=["Webkit","ms","Moz","O"];Object.keys(dm).forEach(function(e){nW.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dm[t]=dm[e]})});function U5(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||dm.hasOwnProperty(e)&&dm[e]?(""+t).trim():t+"px"}function G5(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=U5(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var sW=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function r$(e,t){if(t){if(sW[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function i$(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n$=null;function T3(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var s$=null,gp=null,vp=null;function pP(e){if(e=Dy(e)){if(typeof s$!="function")throw Error(B(280));var t=e.stateNode;t&&(t=cb(t),s$(e.stateNode,e.type,t))}}function q5(e){gp?vp?vp.push(e):vp=[e]:gp=e}function B5(){if(gp){var e=gp,t=vp;if(vp=gp=null,pP(e),t)for(e=0;e<t.length;e++)pP(t[e])}}function H5(e,t){return e(t)}function W5(){}var H_=!1;function Z5(e,t,r){if(H_)return e(t,r);H_=!0;try{return H5(e,t,r)}finally{H_=!1,(gp!==null||vp!==null)&&(W5(),B5())}}function Bm(e,t){var r=e.stateNode;if(r===null)return null;var i=cb(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(B(231,t,typeof r));return r}var o$=!1;if(Bo)try{var Nh={};Object.defineProperty(Nh,"passive",{get:function(){o$=!0}}),window.addEventListener("test",Nh,Nh),window.removeEventListener("test",Nh,Nh)}catch{o$=!1}function oW(e,t,r,i,n,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(h){this.onError(h)}}var pm=!1,b1=null,_1=!1,a$=null,aW={onError:function(e){pm=!0,b1=e}};function lW(e,t,r,i,n,s,o,a,u){pm=!1,b1=null,oW.apply(aW,arguments)}function uW(e,t,r,i,n,s,o,a,u){if(lW.apply(this,arguments),pm){if(pm){var c=b1;pm=!1,b1=null}else throw Error(B(198));_1||(_1=!0,a$=c)}}function Bc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function J5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hP(e){if(Bc(e)!==e)throw Error(B(188))}function cW(e){var t=e.alternate;if(!t){if(t=Bc(e),t===null)throw Error(B(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return hP(n),e;if(s===i)return hP(n),t;s=s.sibling}throw Error(B(188))}if(r.return!==i.return)r=n,i=s;else{for(var o=!1,a=n.child;a;){if(a===r){o=!0,r=n,i=s;break}if(a===i){o=!0,i=n,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,i=n;break}if(a===i){o=!0,i=s,r=n;break}a=a.sibling}if(!o)throw Error(B(189))}}if(r.alternate!==i)throw Error(B(190))}if(r.tag!==3)throw Error(B(188));return r.stateNode.current===r?e:t}function K5(e){return e=cW(e),e!==null?Y5(e):null}function Y5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Y5(e);if(t!==null)return t;e=e.sibling}return null}var Q5=Di.unstable_scheduleCallback,fP=Di.unstable_cancelCallback,dW=Di.unstable_shouldYield,pW=Di.unstable_requestPaint,kt=Di.unstable_now,hW=Di.unstable_getCurrentPriorityLevel,M3=Di.unstable_ImmediatePriority,X5=Di.unstable_UserBlockingPriority,S1=Di.unstable_NormalPriority,fW=Di.unstable_LowPriority,eF=Di.unstable_IdlePriority,ob=null,Fs=null;function mW(e){if(Fs&&typeof Fs.onCommitFiberRoot=="function")try{Fs.onCommitFiberRoot(ob,e,void 0,(e.current.flags&128)===128)}catch{}}var Jn=Math.clz32?Math.clz32:vW,yW=Math.log,gW=Math.LN2;function vW(e){return e>>>=0,e===0?32:31-(yW(e)/gW|0)|0}var T0=64,M0=4194304;function hf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $1(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~n;a!==0?i=hf(a):(s&=o,s!==0&&(i=hf(s)))}else o=r&~n,o!==0?i=hf(o):s!==0&&(i=hf(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Jn(t),n=1<<r,i|=e[r],t&=~n;return i}function wW(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bW(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Jn(s),a=1<<o,u=n[o];u===-1?(!(a&r)||a&i)&&(n[o]=wW(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function l$(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function tF(){var e=T0;return T0<<=1,!(T0&4194240)&&(T0=64),e}function W_(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ny(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jn(t),e[t]=r}function _W(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Jn(r),s=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~s}}function E3(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Jn(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var Ge=0;function rF(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var iF,I3,nF,sF,oF,u$=!1,E0=[],ml=null,yl=null,gl=null,Hm=new Map,Wm=new Map,tl=[],SW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mP(e,t){switch(e){case"focusin":case"focusout":ml=null;break;case"dragenter":case"dragleave":yl=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":Hm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wm.delete(t.pointerId)}}function Fh(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=Dy(t),t!==null&&I3(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function $W(e,t,r,i,n){switch(t){case"focusin":return ml=Fh(ml,e,t,r,i,n),!0;case"dragenter":return yl=Fh(yl,e,t,r,i,n),!0;case"mouseover":return gl=Fh(gl,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return Hm.set(s,Fh(Hm.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,Wm.set(s,Fh(Wm.get(s)||null,e,t,r,i,n)),!0}return!1}function aF(e){var t=tc(e.target);if(t!==null){var r=Bc(t);if(r!==null){if(t=r.tag,t===13){if(t=J5(r),t!==null){e.blockedOn=t,oF(e.priority,function(){nF(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=c$(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);n$=i,r.target.dispatchEvent(i),n$=null}else return t=Dy(r),t!==null&&I3(t),e.blockedOn=r,!1;t.shift()}return!0}function yP(e,t,r){Gg(e)&&r.delete(t)}function xW(){u$=!1,ml!==null&&Gg(ml)&&(ml=null),yl!==null&&Gg(yl)&&(yl=null),gl!==null&&Gg(gl)&&(gl=null),Hm.forEach(yP),Wm.forEach(yP)}function Dh(e,t){e.blockedOn===t&&(e.blockedOn=null,u$||(u$=!0,Di.unstable_scheduleCallback(Di.unstable_NormalPriority,xW)))}function Zm(e){function t(n){return Dh(n,e)}if(0<E0.length){Dh(E0[0],e);for(var r=1;r<E0.length;r++){var i=E0[r];i.blockedOn===e&&(i.blockedOn=null)}}for(ml!==null&&Dh(ml,e),yl!==null&&Dh(yl,e),gl!==null&&Dh(gl,e),Hm.forEach(t),Wm.forEach(t),r=0;r<tl.length;r++)i=tl[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<tl.length&&(r=tl[0],r.blockedOn===null);)aF(r),r.blockedOn===null&&tl.shift()}var wp=ta.ReactCurrentBatchConfig,x1=!0;function TW(e,t,r,i){var n=Ge,s=wp.transition;wp.transition=null;try{Ge=1,k3(e,t,r,i)}finally{Ge=n,wp.transition=s}}function MW(e,t,r,i){var n=Ge,s=wp.transition;wp.transition=null;try{Ge=4,k3(e,t,r,i)}finally{Ge=n,wp.transition=s}}function k3(e,t,r,i){if(x1){var n=c$(e,t,r,i);if(n===null)iS(e,t,i,T1,r),mP(e,i);else if($W(n,e,t,r,i))i.stopPropagation();else if(mP(e,i),t&4&&-1<SW.indexOf(e)){for(;n!==null;){var s=Dy(n);if(s!==null&&iF(s),s=c$(e,t,r,i),s===null&&iS(e,t,i,T1,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else iS(e,t,i,null,r)}}var T1=null;function c$(e,t,r,i){if(T1=null,e=T3(i),e=tc(e),e!==null)if(t=Bc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=J5(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return T1=e,null}function lF(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hW()){case M3:return 1;case X5:return 4;case S1:case fW:return 16;case eF:return 536870912;default:return 16}default:return 16}}var sl=null,O3=null,qg=null;function uF(){if(qg)return qg;var e,t=O3,r=t.length,i,n="value"in sl?sl.value:sl.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var o=r-e;for(i=1;i<=o&&t[r-i]===n[s-i];i++);return qg=n.slice(e,1<i?1-i:void 0)}function Bg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function I0(){return!0}function gP(){return!1}function Ui(e){function t(r,i,n,s,o){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?I0:gP,this.isPropagationStopped=gP,this}return wt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=I0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=I0)},persist:function(){},isPersistent:I0}),t}var lh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},P3=Ui(lh),Fy=wt({},lh,{view:0,detail:0}),EW=Ui(Fy),Z_,J_,jh,ab=wt({},Fy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:C3,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jh&&(jh&&e.type==="mousemove"?(Z_=e.screenX-jh.screenX,J_=e.screenY-jh.screenY):J_=Z_=0,jh=e),Z_)},movementY:function(e){return"movementY"in e?e.movementY:J_}}),vP=Ui(ab),IW=wt({},ab,{dataTransfer:0}),kW=Ui(IW),OW=wt({},Fy,{relatedTarget:0}),K_=Ui(OW),PW=wt({},lh,{animationName:0,elapsedTime:0,pseudoElement:0}),CW=Ui(PW),AW=wt({},lh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),RW=Ui(AW),LW=wt({},lh,{data:0}),wP=Ui(LW),NW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jW(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DW[e])?!!t[e]:!1}function C3(){return jW}var zW=wt({},Fy,{key:function(e){if(e.key){var t=NW[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?FW[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:C3,charCode:function(e){return e.type==="keypress"?Bg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),VW=Ui(zW),UW=wt({},ab,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bP=Ui(UW),GW=wt({},Fy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:C3}),qW=Ui(GW),BW=wt({},lh,{propertyName:0,elapsedTime:0,pseudoElement:0}),HW=Ui(BW),WW=wt({},ab,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ZW=Ui(WW),JW=[9,13,27,32],A3=Bo&&"CompositionEvent"in window,hm=null;Bo&&"documentMode"in document&&(hm=document.documentMode);var KW=Bo&&"TextEvent"in window&&!hm,cF=Bo&&(!A3||hm&&8<hm&&11>=hm),_P=" ",SP=!1;function dF(e,t){switch(e){case"keyup":return JW.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pF(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yd=!1;function YW(e,t){switch(e){case"compositionend":return pF(t);case"keypress":return t.which!==32?null:(SP=!0,_P);case"textInput":return e=t.data,e===_P&&SP?null:e;default:return null}}function QW(e,t){if(Yd)return e==="compositionend"||!A3&&dF(e,t)?(e=uF(),qg=O3=sl=null,Yd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cF&&t.locale!=="ko"?null:t.data;default:return null}}var XW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $P(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XW[e.type]:t==="textarea"}function hF(e,t,r,i){q5(i),t=M1(t,"onChange"),0<t.length&&(r=new P3("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var fm=null,Jm=null;function eZ(e){xF(e,0)}function lb(e){var t=ep(e);if(F5(t))return e}function tZ(e,t){if(e==="change")return t}var fF=!1;if(Bo){var Y_;if(Bo){var Q_="oninput"in document;if(!Q_){var xP=document.createElement("div");xP.setAttribute("oninput","return;"),Q_=typeof xP.oninput=="function"}Y_=Q_}else Y_=!1;fF=Y_&&(!document.documentMode||9<document.documentMode)}function TP(){fm&&(fm.detachEvent("onpropertychange",mF),Jm=fm=null)}function mF(e){if(e.propertyName==="value"&&lb(Jm)){var t=[];hF(t,Jm,e,T3(e)),Z5(eZ,t)}}function rZ(e,t,r){e==="focusin"?(TP(),fm=t,Jm=r,fm.attachEvent("onpropertychange",mF)):e==="focusout"&&TP()}function iZ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lb(Jm)}function nZ(e,t){if(e==="click")return lb(t)}function sZ(e,t){if(e==="input"||e==="change")return lb(t)}function oZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ns=typeof Object.is=="function"?Object.is:oZ;function Km(e,t){if(ns(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!H2.call(t,n)||!ns(e[n],t[n]))return!1}return!0}function MP(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function EP(e,t){var r=MP(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=MP(r)}}function yF(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yF(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gF(){for(var e=window,t=w1();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=w1(e.document)}return t}function R3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function aZ(e){var t=gF(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&yF(r.ownerDocument.documentElement,r)){if(i!==null&&R3(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!e.extend&&s>i&&(n=i,i=s,s=n),n=EP(r,s);var o=EP(r,i);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lZ=Bo&&"documentMode"in document&&11>=document.documentMode,Qd=null,d$=null,mm=null,p$=!1;function IP(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;p$||Qd==null||Qd!==w1(i)||(i=Qd,"selectionStart"in i&&R3(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),mm&&Km(mm,i)||(mm=i,i=M1(d$,"onSelect"),0<i.length&&(t=new P3("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Qd)))}function k0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Xd={animationend:k0("Animation","AnimationEnd"),animationiteration:k0("Animation","AnimationIteration"),animationstart:k0("Animation","AnimationStart"),transitionend:k0("Transition","TransitionEnd")},X_={},vF={};Bo&&(vF=document.createElement("div").style,"AnimationEvent"in window||(delete Xd.animationend.animation,delete Xd.animationiteration.animation,delete Xd.animationstart.animation),"TransitionEvent"in window||delete Xd.transitionend.transition);function ub(e){if(X_[e])return X_[e];if(!Xd[e])return e;var t=Xd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in vF)return X_[e]=t[r];return e}var wF=ub("animationend"),bF=ub("animationiteration"),_F=ub("animationstart"),SF=ub("transitionend"),$F=new Map,kP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dl(e,t){$F.set(e,t),qc(t,[e])}for(var eS=0;eS<kP.length;eS++){var tS=kP[eS],uZ=tS.toLowerCase(),cZ=tS[0].toUpperCase()+tS.slice(1);Dl(uZ,"on"+cZ)}Dl(wF,"onAnimationEnd");Dl(bF,"onAnimationIteration");Dl(_F,"onAnimationStart");Dl("dblclick","onDoubleClick");Dl("focusin","onFocus");Dl("focusout","onBlur");Dl(SF,"onTransitionEnd");Vp("onMouseEnter",["mouseout","mouseover"]);Vp("onMouseLeave",["mouseout","mouseover"]);Vp("onPointerEnter",["pointerout","pointerover"]);Vp("onPointerLeave",["pointerout","pointerover"]);qc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qc("onBeforeInput",["compositionend","keypress","textInput","paste"]);qc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ff="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(ff));function OP(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,uW(i,t,void 0,e),e.currentTarget=null}function xF(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&n.isPropagationStopped())break e;OP(n,a,c),s=u}else for(o=0;o<i.length;o++){if(a=i[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&n.isPropagationStopped())break e;OP(n,a,c),s=u}}}if(_1)throw e=a$,_1=!1,a$=null,e}function Xe(e,t){var r=t[g$];r===void 0&&(r=t[g$]=new Set);var i=e+"__bubble";r.has(i)||(TF(t,e,2,!1),r.add(i))}function rS(e,t,r){var i=0;t&&(i|=4),TF(r,e,i,t)}var O0="_reactListening"+Math.random().toString(36).slice(2);function Ym(e){if(!e[O0]){e[O0]=!0,C5.forEach(function(r){r!=="selectionchange"&&(dZ.has(r)||rS(r,!1,e),rS(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[O0]||(t[O0]=!0,rS("selectionchange",!1,t))}}function TF(e,t,r,i){switch(lF(t)){case 1:var n=TW;break;case 4:n=MW;break;default:n=k3}r=n.bind(null,t,r,e),n=void 0,!o$||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function iS(e,t,r,i,n){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===n||u.nodeType===8&&u.parentNode===n))return;o=o.return}for(;a!==null;){if(o=tc(a),o===null)return;if(u=o.tag,u===5||u===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Z5(function(){var c=s,h=T3(r),f=[];e:{var m=$F.get(e);if(m!==void 0){var y=P3,g=e;switch(e){case"keypress":if(Bg(r)===0)break e;case"keydown":case"keyup":y=VW;break;case"focusin":g="focus",y=K_;break;case"focusout":g="blur",y=K_;break;case"beforeblur":case"afterblur":y=K_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=vP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=kW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=qW;break;case wF:case bF:case _F:y=CW;break;case SF:y=HW;break;case"scroll":y=EW;break;case"wheel":y=ZW;break;case"copy":case"cut":case"paste":y=RW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=bP}var v=(t&4)!==0,w=!v&&e==="scroll",b=v?m!==null?m+"Capture":null:m;v=[];for(var _=c,$;_!==null;){$=_;var T=$.stateNode;if($.tag===5&&T!==null&&($=T,b!==null&&(T=Bm(_,b),T!=null&&v.push(Qm(_,T,$)))),w)break;_=_.return}0<v.length&&(m=new y(m,g,null,r,h),f.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&r!==n$&&(g=r.relatedTarget||r.fromElement)&&(tc(g)||g[Ho]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(g=r.relatedTarget||r.toElement,y=c,g=g?tc(g):null,g!==null&&(w=Bc(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=c),y!==g)){if(v=vP,T="onMouseLeave",b="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(v=bP,T="onPointerLeave",b="onPointerEnter",_="pointer"),w=y==null?m:ep(y),$=g==null?m:ep(g),m=new v(T,_+"leave",y,r,h),m.target=w,m.relatedTarget=$,T=null,tc(h)===c&&(v=new v(b,_+"enter",g,r,h),v.target=$,v.relatedTarget=w,T=v),w=T,y&&g)t:{for(v=y,b=g,_=0,$=v;$;$=td($))_++;for($=0,T=b;T;T=td(T))$++;for(;0<_-$;)v=td(v),_--;for(;0<$-_;)b=td(b),$--;for(;_--;){if(v===b||b!==null&&v===b.alternate)break t;v=td(v),b=td(b)}v=null}else v=null;y!==null&&PP(f,m,y,v,!1),g!==null&&w!==null&&PP(f,w,g,v,!0)}}e:{if(m=c?ep(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var E=tZ;else if($P(m))if(fF)E=sZ;else{E=iZ;var I=rZ}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=nZ);if(E&&(E=E(e,c))){hF(f,E,r,h);break e}I&&I(e,m,c),e==="focusout"&&(I=m._wrapperState)&&I.controlled&&m.type==="number"&&X2(m,"number",m.value)}switch(I=c?ep(c):window,e){case"focusin":($P(I)||I.contentEditable==="true")&&(Qd=I,d$=c,mm=null);break;case"focusout":mm=d$=Qd=null;break;case"mousedown":p$=!0;break;case"contextmenu":case"mouseup":case"dragend":p$=!1,IP(f,r,h);break;case"selectionchange":if(lZ)break;case"keydown":case"keyup":IP(f,r,h)}var C;if(A3)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Yd?dF(e,r)&&(L="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(cF&&r.locale!=="ko"&&(Yd||L!=="onCompositionStart"?L==="onCompositionEnd"&&Yd&&(C=uF()):(sl=h,O3="value"in sl?sl.value:sl.textContent,Yd=!0)),I=M1(c,L),0<I.length&&(L=new wP(L,e,null,r,h),f.push({event:L,listeners:I}),C?L.data=C:(C=pF(r),C!==null&&(L.data=C)))),(C=KW?YW(e,r):QW(e,r))&&(c=M1(c,"onBeforeInput"),0<c.length&&(h=new wP("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=C))}xF(f,t)})}function Qm(e,t,r){return{instance:e,listener:t,currentTarget:r}}function M1(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Bm(e,r),s!=null&&i.unshift(Qm(e,s,n)),s=Bm(e,t),s!=null&&i.push(Qm(e,s,n))),e=e.return}return i}function td(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function PP(e,t,r,i,n){for(var s=t._reactName,o=[];r!==null&&r!==i;){var a=r,u=a.alternate,c=a.stateNode;if(u!==null&&u===i)break;a.tag===5&&c!==null&&(a=c,n?(u=Bm(r,s),u!=null&&o.unshift(Qm(r,u,a))):n||(u=Bm(r,s),u!=null&&o.push(Qm(r,u,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var pZ=/\r\n?/g,hZ=/\u0000|\uFFFD/g;function CP(e){return(typeof e=="string"?e:""+e).replace(pZ,`
`).replace(hZ,"")}function P0(e,t,r){if(t=CP(t),CP(e)!==t&&r)throw Error(B(425))}function E1(){}var h$=null,f$=null;function m$(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var y$=typeof setTimeout=="function"?setTimeout:void 0,fZ=typeof clearTimeout=="function"?clearTimeout:void 0,AP=typeof Promise=="function"?Promise:void 0,mZ=typeof queueMicrotask=="function"?queueMicrotask:typeof AP<"u"?function(e){return AP.resolve(null).then(e).catch(yZ)}:y$;function yZ(e){setTimeout(function(){throw e})}function nS(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),Zm(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);Zm(t)}function vl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function RP(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var uh=Math.random().toString(36).slice(2),Ls="__reactFiber$"+uh,Xm="__reactProps$"+uh,Ho="__reactContainer$"+uh,g$="__reactEvents$"+uh,gZ="__reactListeners$"+uh,vZ="__reactHandles$"+uh;function tc(e){var t=e[Ls];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ho]||r[Ls]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=RP(e);e!==null;){if(r=e[Ls])return r;e=RP(e)}return t}e=r,r=e.parentNode}return null}function Dy(e){return e=e[Ls]||e[Ho],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ep(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function cb(e){return e[Xm]||null}var v$=[],tp=-1;function jl(e){return{current:e}}function st(e){0>tp||(e.current=v$[tp],v$[tp]=null,tp--)}function Ke(e,t){tp++,v$[tp]=e.current,e.current=t}var El={},Pr=jl(El),pi=jl(!1),_c=El;function Up(e,t){var r=e.type.contextTypes;if(!r)return El;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function hi(e){return e=e.childContextTypes,e!=null}function I1(){st(pi),st(Pr)}function LP(e,t,r){if(Pr.current!==El)throw Error(B(168));Ke(Pr,t),Ke(pi,r)}function MF(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(B(108,rW(e)||"Unknown",n));return wt({},r,i)}function k1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||El,_c=Pr.current,Ke(Pr,e),Ke(pi,pi.current),!0}function NP(e,t,r){var i=e.stateNode;if(!i)throw Error(B(169));r?(e=MF(e,t,_c),i.__reactInternalMemoizedMergedChildContext=e,st(pi),st(Pr),Ke(Pr,e)):st(pi),Ke(pi,r)}var Ao=null,db=!1,sS=!1;function EF(e){Ao===null?Ao=[e]:Ao.push(e)}function wZ(e){db=!0,EF(e)}function zl(){if(!sS&&Ao!==null){sS=!0;var e=0,t=Ge;try{var r=Ao;for(Ge=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Ao=null,db=!1}catch(n){throw Ao!==null&&(Ao=Ao.slice(e+1)),Q5(M3,zl),n}finally{Ge=t,sS=!1}}return null}var rp=[],ip=0,O1=null,P1=0,on=[],an=0,Sc=null,Do=1,jo="";function uu(e,t){rp[ip++]=P1,rp[ip++]=O1,O1=e,P1=t}function IF(e,t,r){on[an++]=Do,on[an++]=jo,on[an++]=Sc,Sc=e;var i=Do;e=jo;var n=32-Jn(i)-1;i&=~(1<<n),r+=1;var s=32-Jn(t)+n;if(30<s){var o=n-n%5;s=(i&(1<<o)-1).toString(32),i>>=o,n-=o,Do=1<<32-Jn(t)+n|r<<n|i,jo=s+e}else Do=1<<s|r<<n|i,jo=e}function L3(e){e.return!==null&&(uu(e,1),IF(e,1,0))}function N3(e){for(;e===O1;)O1=rp[--ip],rp[ip]=null,P1=rp[--ip],rp[ip]=null;for(;e===Sc;)Sc=on[--an],on[an]=null,jo=on[--an],on[an]=null,Do=on[--an],on[an]=null}var Ri=null,Ci=null,ct=!1,Wn=null;function kF(e,t){var r=dn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function FP(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ri=e,Ci=vl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ri=e,Ci=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Sc!==null?{id:Do,overflow:jo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=dn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ri=e,Ci=null,!0):!1;default:return!1}}function w$(e){return(e.mode&1)!==0&&(e.flags&128)===0}function b$(e){if(ct){var t=Ci;if(t){var r=t;if(!FP(e,t)){if(w$(e))throw Error(B(418));t=vl(r.nextSibling);var i=Ri;t&&FP(e,t)?kF(i,r):(e.flags=e.flags&-4097|2,ct=!1,Ri=e)}}else{if(w$(e))throw Error(B(418));e.flags=e.flags&-4097|2,ct=!1,Ri=e}}}function DP(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ri=e}function C0(e){if(e!==Ri)return!1;if(!ct)return DP(e),ct=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!m$(e.type,e.memoizedProps)),t&&(t=Ci)){if(w$(e))throw OF(),Error(B(418));for(;t;)kF(e,t),t=vl(t.nextSibling)}if(DP(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ci=vl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ci=null}}else Ci=Ri?vl(e.stateNode.nextSibling):null;return!0}function OF(){for(var e=Ci;e;)e=vl(e.nextSibling)}function Gp(){Ci=Ri=null,ct=!1}function F3(e){Wn===null?Wn=[e]:Wn.push(e)}var bZ=ta.ReactCurrentBatchConfig;function zh(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(B(309));var i=r.stateNode}if(!i)throw Error(B(147,e));var n=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=n.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(B(284));if(!r._owner)throw Error(B(290,e))}return e}function A0(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jP(e){var t=e._init;return t(e._payload)}function PF(e){function t(b,_){if(e){var $=b.deletions;$===null?(b.deletions=[_],b.flags|=16):$.push(_)}}function r(b,_){if(!e)return null;for(;_!==null;)t(b,_),_=_.sibling;return null}function i(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function n(b,_){return b=Sl(b,_),b.index=0,b.sibling=null,b}function s(b,_,$){return b.index=$,e?($=b.alternate,$!==null?($=$.index,$<_?(b.flags|=2,_):$):(b.flags|=2,_)):(b.flags|=1048576,_)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function a(b,_,$,T){return _===null||_.tag!==6?(_=pS($,b.mode,T),_.return=b,_):(_=n(_,$),_.return=b,_)}function u(b,_,$,T){var E=$.type;return E===Kd?h(b,_,$.props.children,T,$.key):_!==null&&(_.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ha&&jP(E)===_.type)?(T=n(_,$.props),T.ref=zh(b,_,$),T.return=b,T):(T=Qg($.type,$.key,$.props,null,b.mode,T),T.ref=zh(b,_,$),T.return=b,T)}function c(b,_,$,T){return _===null||_.tag!==4||_.stateNode.containerInfo!==$.containerInfo||_.stateNode.implementation!==$.implementation?(_=hS($,b.mode,T),_.return=b,_):(_=n(_,$.children||[]),_.return=b,_)}function h(b,_,$,T,E){return _===null||_.tag!==7?(_=cc($,b.mode,T,E),_.return=b,_):(_=n(_,$),_.return=b,_)}function f(b,_,$){if(typeof _=="string"&&_!==""||typeof _=="number")return _=pS(""+_,b.mode,$),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case S0:return $=Qg(_.type,_.key,_.props,null,b.mode,$),$.ref=zh(b,null,_),$.return=b,$;case Jd:return _=hS(_,b.mode,$),_.return=b,_;case Ha:var T=_._init;return f(b,T(_._payload),$)}if(pf(_)||Lh(_))return _=cc(_,b.mode,$,null),_.return=b,_;A0(b,_)}return null}function m(b,_,$,T){var E=_!==null?_.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return E!==null?null:a(b,_,""+$,T);if(typeof $=="object"&&$!==null){switch($.$$typeof){case S0:return $.key===E?u(b,_,$,T):null;case Jd:return $.key===E?c(b,_,$,T):null;case Ha:return E=$._init,m(b,_,E($._payload),T)}if(pf($)||Lh($))return E!==null?null:h(b,_,$,T,null);A0(b,$)}return null}function y(b,_,$,T,E){if(typeof T=="string"&&T!==""||typeof T=="number")return b=b.get($)||null,a(_,b,""+T,E);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case S0:return b=b.get(T.key===null?$:T.key)||null,u(_,b,T,E);case Jd:return b=b.get(T.key===null?$:T.key)||null,c(_,b,T,E);case Ha:var I=T._init;return y(b,_,$,I(T._payload),E)}if(pf(T)||Lh(T))return b=b.get($)||null,h(_,b,T,E,null);A0(_,T)}return null}function g(b,_,$,T){for(var E=null,I=null,C=_,L=_=0,H=null;C!==null&&L<$.length;L++){C.index>L?(H=C,C=null):H=C.sibling;var V=m(b,C,$[L],T);if(V===null){C===null&&(C=H);break}e&&C&&V.alternate===null&&t(b,C),_=s(V,_,L),I===null?E=V:I.sibling=V,I=V,C=H}if(L===$.length)return r(b,C),ct&&uu(b,L),E;if(C===null){for(;L<$.length;L++)C=f(b,$[L],T),C!==null&&(_=s(C,_,L),I===null?E=C:I.sibling=C,I=C);return ct&&uu(b,L),E}for(C=i(b,C);L<$.length;L++)H=y(C,b,L,$[L],T),H!==null&&(e&&H.alternate!==null&&C.delete(H.key===null?L:H.key),_=s(H,_,L),I===null?E=H:I.sibling=H,I=H);return e&&C.forEach(function(Y){return t(b,Y)}),ct&&uu(b,L),E}function v(b,_,$,T){var E=Lh($);if(typeof E!="function")throw Error(B(150));if($=E.call($),$==null)throw Error(B(151));for(var I=E=null,C=_,L=_=0,H=null,V=$.next();C!==null&&!V.done;L++,V=$.next()){C.index>L?(H=C,C=null):H=C.sibling;var Y=m(b,C,V.value,T);if(Y===null){C===null&&(C=H);break}e&&C&&Y.alternate===null&&t(b,C),_=s(Y,_,L),I===null?E=Y:I.sibling=Y,I=Y,C=H}if(V.done)return r(b,C),ct&&uu(b,L),E;if(C===null){for(;!V.done;L++,V=$.next())V=f(b,V.value,T),V!==null&&(_=s(V,_,L),I===null?E=V:I.sibling=V,I=V);return ct&&uu(b,L),E}for(C=i(b,C);!V.done;L++,V=$.next())V=y(C,b,L,V.value,T),V!==null&&(e&&V.alternate!==null&&C.delete(V.key===null?L:V.key),_=s(V,_,L),I===null?E=V:I.sibling=V,I=V);return e&&C.forEach(function(ee){return t(b,ee)}),ct&&uu(b,L),E}function w(b,_,$,T){if(typeof $=="object"&&$!==null&&$.type===Kd&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case S0:e:{for(var E=$.key,I=_;I!==null;){if(I.key===E){if(E=$.type,E===Kd){if(I.tag===7){r(b,I.sibling),_=n(I,$.props.children),_.return=b,b=_;break e}}else if(I.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ha&&jP(E)===I.type){r(b,I.sibling),_=n(I,$.props),_.ref=zh(b,I,$),_.return=b,b=_;break e}r(b,I);break}else t(b,I);I=I.sibling}$.type===Kd?(_=cc($.props.children,b.mode,T,$.key),_.return=b,b=_):(T=Qg($.type,$.key,$.props,null,b.mode,T),T.ref=zh(b,_,$),T.return=b,b=T)}return o(b);case Jd:e:{for(I=$.key;_!==null;){if(_.key===I)if(_.tag===4&&_.stateNode.containerInfo===$.containerInfo&&_.stateNode.implementation===$.implementation){r(b,_.sibling),_=n(_,$.children||[]),_.return=b,b=_;break e}else{r(b,_);break}else t(b,_);_=_.sibling}_=hS($,b.mode,T),_.return=b,b=_}return o(b);case Ha:return I=$._init,w(b,_,I($._payload),T)}if(pf($))return g(b,_,$,T);if(Lh($))return v(b,_,$,T);A0(b,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,_!==null&&_.tag===6?(r(b,_.sibling),_=n(_,$),_.return=b,b=_):(r(b,_),_=pS($,b.mode,T),_.return=b,b=_),o(b)):r(b,_)}return w}var qp=PF(!0),CF=PF(!1),C1=jl(null),A1=null,np=null,D3=null;function j3(){D3=np=A1=null}function z3(e){var t=C1.current;st(C1),e._currentValue=t}function _$(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function bp(e,t){A1=e,D3=np=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ui=!0),e.firstContext=null)}function bn(e){var t=e._currentValue;if(D3!==e)if(e={context:e,memoizedValue:t,next:null},np===null){if(A1===null)throw Error(B(308));np=e,A1.dependencies={lanes:0,firstContext:e}}else np=np.next=e;return t}var rc=null;function V3(e){rc===null?rc=[e]:rc.push(e)}function AF(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,V3(t)):(r.next=n.next,n.next=r),t.interleaved=r,Wo(e,i)}function Wo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Wa=!1;function U3(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RF(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wl(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ae&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,Wo(e,r)}return n=i.interleaved,n===null?(t.next=t,V3(i)):(t.next=n.next,n.next=t),i.interleaved=t,Wo(e,r)}function Hg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,E3(e,r)}}function zP(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function R1(e,t,r,i){var n=e.updateQueue;Wa=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var f=n.baseState;o=0,h=c=u=null,a=s;do{var m=a.lane,y=a.eventTime;if((i&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,v=a;switch(m=t,y=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(y,f,m);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(y,f,m):g,m==null)break e;f=wt({},f,m);break e;case 2:Wa=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=n.effects,m===null?n.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,u=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;m=a,a=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);if(h===null&&(u=f),n.baseState=u,n.firstBaseUpdate=c,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);xc|=o,e.lanes=o,e.memoizedState=f}}function VP(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(B(191,n));n.call(i)}}}var jy={},Ds=jl(jy),ey=jl(jy),ty=jl(jy);function ic(e){if(e===jy)throw Error(B(174));return e}function G3(e,t){switch(Ke(ty,t),Ke(ey,e),Ke(Ds,jy),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:t$(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=t$(t,e)}st(Ds),Ke(Ds,t)}function Bp(){st(Ds),st(ey),st(ty)}function LF(e){ic(ty.current);var t=ic(Ds.current),r=t$(t,e.type);t!==r&&(Ke(ey,e),Ke(Ds,r))}function q3(e){ey.current===e&&(st(Ds),st(ey))}var yt=jl(0);function L1(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oS=[];function B3(){for(var e=0;e<oS.length;e++)oS[e]._workInProgressVersionPrimary=null;oS.length=0}var Wg=ta.ReactCurrentDispatcher,aS=ta.ReactCurrentBatchConfig,$c=0,gt=null,qt=null,ir=null,N1=!1,ym=!1,ry=0,_Z=0;function gr(){throw Error(B(321))}function H3(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ns(e[r],t[r]))return!1;return!0}function W3(e,t,r,i,n,s){if($c=s,gt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wg.current=e===null||e.memoizedState===null?TZ:MZ,e=r(i,n),ym){s=0;do{if(ym=!1,ry=0,25<=s)throw Error(B(301));s+=1,ir=qt=null,t.updateQueue=null,Wg.current=EZ,e=r(i,n)}while(ym)}if(Wg.current=F1,t=qt!==null&&qt.next!==null,$c=0,ir=qt=gt=null,N1=!1,t)throw Error(B(300));return e}function Z3(){var e=ry!==0;return ry=0,e}function ks(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?gt.memoizedState=ir=e:ir=ir.next=e,ir}function _n(){if(qt===null){var e=gt.alternate;e=e!==null?e.memoizedState:null}else e=qt.next;var t=ir===null?gt.memoizedState:ir.next;if(t!==null)ir=t,qt=e;else{if(e===null)throw Error(B(310));qt=e,e={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},ir===null?gt.memoizedState=ir=e:ir=ir.next=e}return ir}function iy(e,t){return typeof t=="function"?t(e):t}function lS(e){var t=_n(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var i=qt,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if(($c&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=i):u=u.next=f,gt.lanes|=h,xc|=h}c=c.next}while(c!==null&&c!==s);u===null?o=i:u.next=a,ns(i,t.memoizedState)||(ui=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=u,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do s=n.lane,gt.lanes|=s,xc|=s,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function uS(e){var t=_n(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do s=e(s,o.action),o=o.next;while(o!==n);ns(s,t.memoizedState)||(ui=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function NF(){}function FF(e,t){var r=gt,i=_n(),n=t(),s=!ns(i.memoizedState,n);if(s&&(i.memoizedState=n,ui=!0),i=i.queue,J3(zF.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||ir!==null&&ir.memoizedState.tag&1){if(r.flags|=2048,ny(9,jF.bind(null,r,i,n,t),void 0,null),sr===null)throw Error(B(349));$c&30||DF(r,t,n)}return n}function DF(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=gt.updateQueue,t===null?(t={lastEffect:null,stores:null},gt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function jF(e,t,r,i){t.value=r,t.getSnapshot=i,VF(t)&&UF(e)}function zF(e,t,r){return r(function(){VF(t)&&UF(e)})}function VF(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ns(e,r)}catch{return!0}}function UF(e){var t=Wo(e,1);t!==null&&Kn(t,e,1,-1)}function UP(e){var t=ks();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iy,lastRenderedState:e},t.queue=e,e=e.dispatch=xZ.bind(null,gt,e),[t.memoizedState,e]}function ny(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=gt.updateQueue,t===null?(t={lastEffect:null,stores:null},gt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function GF(){return _n().memoizedState}function Zg(e,t,r,i){var n=ks();gt.flags|=e,n.memoizedState=ny(1|t,r,void 0,i===void 0?null:i)}function pb(e,t,r,i){var n=_n();i=i===void 0?null:i;var s=void 0;if(qt!==null){var o=qt.memoizedState;if(s=o.destroy,i!==null&&H3(i,o.deps)){n.memoizedState=ny(t,r,s,i);return}}gt.flags|=e,n.memoizedState=ny(1|t,r,s,i)}function GP(e,t){return Zg(8390656,8,e,t)}function J3(e,t){return pb(2048,8,e,t)}function qF(e,t){return pb(4,2,e,t)}function BF(e,t){return pb(4,4,e,t)}function HF(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function WF(e,t,r){return r=r!=null?r.concat([e]):null,pb(4,4,HF.bind(null,t,e),r)}function K3(){}function ZF(e,t){var r=_n();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&H3(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function JF(e,t){var r=_n();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&H3(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function KF(e,t,r){return $c&21?(ns(r,t)||(r=tF(),gt.lanes|=r,xc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ui=!0),e.memoizedState=r)}function SZ(e,t){var r=Ge;Ge=r!==0&&4>r?r:4,e(!0);var i=aS.transition;aS.transition={};try{e(!1),t()}finally{Ge=r,aS.transition=i}}function YF(){return _n().memoizedState}function $Z(e,t,r){var i=_l(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},QF(e))XF(t,r);else if(r=AF(e,t,r,i),r!==null){var n=Wr();Kn(r,e,i,n),eD(r,t,i)}}function xZ(e,t,r){var i=_l(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(QF(e))XF(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(n.hasEagerState=!0,n.eagerState=a,ns(a,o)){var u=t.interleaved;u===null?(n.next=n,V3(t)):(n.next=u.next,u.next=n),t.interleaved=n;return}}catch{}finally{}r=AF(e,t,n,i),r!==null&&(n=Wr(),Kn(r,e,i,n),eD(r,t,i))}}function QF(e){var t=e.alternate;return e===gt||t!==null&&t===gt}function XF(e,t){ym=N1=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function eD(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,E3(e,r)}}var F1={readContext:bn,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},TZ={readContext:bn,useCallback:function(e,t){return ks().memoizedState=[e,t===void 0?null:t],e},useContext:bn,useEffect:GP,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Zg(4194308,4,HF.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Zg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zg(4,2,e,t)},useMemo:function(e,t){var r=ks();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=ks();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=$Z.bind(null,gt,e),[i.memoizedState,e]},useRef:function(e){var t=ks();return e={current:e},t.memoizedState=e},useState:UP,useDebugValue:K3,useDeferredValue:function(e){return ks().memoizedState=e},useTransition:function(){var e=UP(!1),t=e[0];return e=SZ.bind(null,e[1]),ks().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=gt,n=ks();if(ct){if(r===void 0)throw Error(B(407));r=r()}else{if(r=t(),sr===null)throw Error(B(349));$c&30||DF(i,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,GP(zF.bind(null,i,s,e),[e]),i.flags|=2048,ny(9,jF.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=ks(),t=sr.identifierPrefix;if(ct){var r=jo,i=Do;r=(i&~(1<<32-Jn(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=ry++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=_Z++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},MZ={readContext:bn,useCallback:ZF,useContext:bn,useEffect:J3,useImperativeHandle:WF,useInsertionEffect:qF,useLayoutEffect:BF,useMemo:JF,useReducer:lS,useRef:GF,useState:function(){return lS(iy)},useDebugValue:K3,useDeferredValue:function(e){var t=_n();return KF(t,qt.memoizedState,e)},useTransition:function(){var e=lS(iy)[0],t=_n().memoizedState;return[e,t]},useMutableSource:NF,useSyncExternalStore:FF,useId:YF,unstable_isNewReconciler:!1},EZ={readContext:bn,useCallback:ZF,useContext:bn,useEffect:J3,useImperativeHandle:WF,useInsertionEffect:qF,useLayoutEffect:BF,useMemo:JF,useReducer:uS,useRef:GF,useState:function(){return uS(iy)},useDebugValue:K3,useDeferredValue:function(e){var t=_n();return qt===null?t.memoizedState=e:KF(t,qt.memoizedState,e)},useTransition:function(){var e=uS(iy)[0],t=_n().memoizedState;return[e,t]},useMutableSource:NF,useSyncExternalStore:FF,useId:YF,unstable_isNewReconciler:!1};function Un(e,t){if(e&&e.defaultProps){t=wt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function S$(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:wt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var hb={isMounted:function(e){return(e=e._reactInternals)?Bc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Wr(),n=_l(e),s=Vo(i,n);s.payload=t,r!=null&&(s.callback=r),t=wl(e,s,n),t!==null&&(Kn(t,e,n,i),Hg(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Wr(),n=_l(e),s=Vo(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=wl(e,s,n),t!==null&&(Kn(t,e,n,i),Hg(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Wr(),i=_l(e),n=Vo(r,i);n.tag=2,t!=null&&(n.callback=t),t=wl(e,n,i),t!==null&&(Kn(t,e,i,r),Hg(t,e,i))}};function qP(e,t,r,i,n,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!Km(r,i)||!Km(n,s):!0}function tD(e,t,r){var i=!1,n=El,s=t.contextType;return typeof s=="object"&&s!==null?s=bn(s):(n=hi(t)?_c:Pr.current,i=t.contextTypes,s=(i=i!=null)?Up(e,n):El),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hb,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function BP(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&hb.enqueueReplaceState(t,t.state,null)}function $$(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},U3(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=bn(s):(s=hi(t)?_c:Pr.current,n.context=Up(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(S$(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&hb.enqueueReplaceState(n,n.state,null),R1(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Hp(e,t){try{var r="",i=t;do r+=tW(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function cS(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function x$(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var IZ=typeof WeakMap=="function"?WeakMap:Map;function rD(e,t,r){r=Vo(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){j1||(j1=!0,R$=i),x$(e,t)},r}function iD(e,t,r){r=Vo(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){x$(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){x$(e,t),typeof i!="function"&&(bl===null?bl=new Set([this]):bl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function HP(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new IZ;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=UZ.bind(null,e,t,r),t.then(e,e))}function WP(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ZP(e,t,r,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Vo(-1,1),t.tag=2,wl(r,t,1))),r.lanes|=1),e)}var kZ=ta.ReactCurrentOwner,ui=!1;function qr(e,t,r,i){t.child=e===null?CF(t,null,r,i):qp(t,e.child,r,i)}function JP(e,t,r,i,n){r=r.render;var s=t.ref;return bp(t,n),i=W3(e,t,r,i,s,n),r=Z3(),e!==null&&!ui?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Zo(e,t,n)):(ct&&r&&L3(t),t.flags|=1,qr(e,t,i,n),t.child)}function KP(e,t,r,i,n){if(e===null){var s=r.type;return typeof s=="function"&&!nI(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,nD(e,t,s,i,n)):(e=Qg(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&n)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Km,r(o,i)&&e.ref===t.ref)return Zo(e,t,n)}return t.flags|=1,e=Sl(s,i),e.ref=t.ref,e.return=t,t.child=e}function nD(e,t,r,i,n){if(e!==null){var s=e.memoizedProps;if(Km(s,i)&&e.ref===t.ref)if(ui=!1,t.pendingProps=i=s,(e.lanes&n)!==0)e.flags&131072&&(ui=!0);else return t.lanes=e.lanes,Zo(e,t,n)}return T$(e,t,r,i,n)}function sD(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(op,Oi),Oi|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ke(op,Oi),Oi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,Ke(op,Oi),Oi|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,Ke(op,Oi),Oi|=i;return qr(e,t,n,r),t.child}function oD(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function T$(e,t,r,i,n){var s=hi(r)?_c:Pr.current;return s=Up(t,s),bp(t,n),r=W3(e,t,r,i,s,n),i=Z3(),e!==null&&!ui?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Zo(e,t,n)):(ct&&i&&L3(t),t.flags|=1,qr(e,t,r,n),t.child)}function YP(e,t,r,i,n){if(hi(r)){var s=!0;k1(t)}else s=!1;if(bp(t,n),t.stateNode===null)Jg(e,t),tD(t,r,i),$$(t,r,i,n),i=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=bn(c):(c=hi(r)?_c:Pr.current,c=Up(t,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||u!==c)&&BP(t,o,i,c),Wa=!1;var m=t.memoizedState;o.state=m,R1(t,i,o,n),u=t.memoizedState,a!==i||m!==u||pi.current||Wa?(typeof h=="function"&&(S$(t,r,h,i),u=t.memoizedState),(a=Wa||qP(t,r,a,i,m,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),o.props=i,o.state=u,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,RF(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Un(t.type,a),o.props=c,f=t.pendingProps,m=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=bn(u):(u=hi(r)?_c:Pr.current,u=Up(t,u));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==u)&&BP(t,o,i,u),Wa=!1,m=t.memoizedState,o.state=m,R1(t,i,o,n);var g=t.memoizedState;a!==f||m!==g||pi.current||Wa?(typeof y=="function"&&(S$(t,r,y,i),g=t.memoizedState),(c=Wa||qP(t,r,c,i,m,g,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=u,i=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return M$(e,t,r,i,s,n)}function M$(e,t,r,i,n,s){oD(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return n&&NP(t,r,!1),Zo(e,t,s);i=t.stateNode,kZ.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=qp(t,e.child,null,s),t.child=qp(t,null,a,s)):qr(e,t,a,s),t.memoizedState=i.state,n&&NP(t,r,!0),t.child}function aD(e){var t=e.stateNode;t.pendingContext?LP(e,t.pendingContext,t.pendingContext!==t.context):t.context&&LP(e,t.context,!1),G3(e,t.containerInfo)}function QP(e,t,r,i,n){return Gp(),F3(n),t.flags|=256,qr(e,t,r,i),t.child}var E$={dehydrated:null,treeContext:null,retryLane:0};function I$(e){return{baseLanes:e,cachePool:null,transitions:null}}function lD(e,t,r){var i=t.pendingProps,n=yt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Ke(yt,n&1),e===null)return b$(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yb(o,i,0,null),e=cc(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=I$(r),t.memoizedState=E$,e):Y3(t,o));if(n=e.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return OZ(e,t,o,i,a,n,r);if(s){s=i.fallback,o=t.mode,n=e.child,a=n.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=u,t.deletions=null):(i=Sl(n,u),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=Sl(a,s):(s=cc(s,o,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=e.child.memoizedState,o=o===null?I$(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=E$,i}return s=e.child,e=s.sibling,i=Sl(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Y3(e,t){return t=yb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function R0(e,t,r,i){return i!==null&&F3(i),qp(t,e.child,null,r),e=Y3(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function OZ(e,t,r,i,n,s,o){if(r)return t.flags&256?(t.flags&=-257,i=cS(Error(B(422))),R0(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=yb({mode:"visible",children:i.children},n,0,null),s=cc(s,n,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&qp(t,e.child,null,o),t.child.memoizedState=I$(o),t.memoizedState=E$,s);if(!(t.mode&1))return R0(e,t,o,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(B(419)),i=cS(s,i,void 0),R0(e,t,o,i)}if(a=(o&e.childLanes)!==0,ui||a){if(i=sr,i!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|o)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,Wo(e,n),Kn(i,e,n,-1))}return iI(),i=cS(Error(B(421))),R0(e,t,o,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=GZ.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,Ci=vl(n.nextSibling),Ri=t,ct=!0,Wn=null,e!==null&&(on[an++]=Do,on[an++]=jo,on[an++]=Sc,Do=e.id,jo=e.overflow,Sc=t),t=Y3(t,i.children),t.flags|=4096,t)}function XP(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),_$(e.return,t,r)}function dS(e,t,r,i,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function uD(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(qr(e,t,i.children,r),i=yt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&XP(e,r,t);else if(e.tag===19)XP(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ke(yt,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&L1(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),dS(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&L1(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}dS(t,!0,r,null,s);break;case"together":dS(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),xc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,r=Sl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Sl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function PZ(e,t,r){switch(t.tag){case 3:aD(t),Gp();break;case 5:LF(t);break;case 1:hi(t.type)&&k1(t);break;case 4:G3(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;Ke(C1,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ke(yt,yt.current&1),t.flags|=128,null):r&t.child.childLanes?lD(e,t,r):(Ke(yt,yt.current&1),e=Zo(e,t,r),e!==null?e.sibling:null);Ke(yt,yt.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return uD(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ke(yt,yt.current),i)break;return null;case 22:case 23:return t.lanes=0,sD(e,t,r)}return Zo(e,t,r)}var cD,k$,dD,pD;cD=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};k$=function(){};dD=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,ic(Ds.current);var s=null;switch(r){case"input":n=Y2(e,n),i=Y2(e,i),s=[];break;case"select":n=wt({},n,{value:void 0}),i=wt({},i,{value:void 0}),s=[];break;case"textarea":n=e$(e,n),i=e$(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=E1)}r$(r,i);var o;r=null;for(c in n)if(!i.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var a=n[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Gm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var u=i[c];if(a=n!=null?n[c]:void 0,i.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(s||(s=[]),s.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Gm.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Xe("scroll",e),s||a===u||(s=[])):(s=s||[]).push(c,u))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};pD=function(e,t,r,i){r!==i&&(t.flags|=4)};function Vh(e,t){if(!ct)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function vr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function CZ(e,t,r){var i=t.pendingProps;switch(N3(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vr(t),null;case 1:return hi(t.type)&&I1(),vr(t),null;case 3:return i=t.stateNode,Bp(),st(pi),st(Pr),B3(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(C0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wn!==null&&(F$(Wn),Wn=null))),k$(e,t),vr(t),null;case 5:q3(t);var n=ic(ty.current);if(r=t.type,e!==null&&t.stateNode!=null)dD(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(B(166));return vr(t),null}if(e=ic(Ds.current),C0(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[Ls]=t,i[Xm]=s,e=(t.mode&1)!==0,r){case"dialog":Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":case"embed":Xe("load",i);break;case"video":case"audio":for(n=0;n<ff.length;n++)Xe(ff[n],i);break;case"source":Xe("error",i);break;case"img":case"image":case"link":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"input":lP(i,s),Xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Xe("invalid",i);break;case"textarea":cP(i,s),Xe("invalid",i)}r$(r,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&P0(i.textContent,a,e),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&P0(i.textContent,a,e),n=["children",""+a]):Gm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Xe("scroll",i)}switch(r){case"input":$0(i),uP(i,s,!0);break;case"textarea":$0(i),dP(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=E1)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=z5(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(r,{is:i.is}):(e=o.createElement(r),r==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,r),e[Ls]=t,e[Xm]=i,cD(e,t,!1,!1),t.stateNode=e;e:{switch(o=i$(r,i),r){case"dialog":Xe("cancel",e),Xe("close",e),n=i;break;case"iframe":case"object":case"embed":Xe("load",e),n=i;break;case"video":case"audio":for(n=0;n<ff.length;n++)Xe(ff[n],e);n=i;break;case"source":Xe("error",e),n=i;break;case"img":case"image":case"link":Xe("error",e),Xe("load",e),n=i;break;case"details":Xe("toggle",e),n=i;break;case"input":lP(e,i),n=Y2(e,i),Xe("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=wt({},i,{value:void 0}),Xe("invalid",e);break;case"textarea":cP(e,i),n=e$(e,i),Xe("invalid",e);break;default:n=i}r$(r,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?G5(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&V5(e,u)):s==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&qm(e,u):typeof u=="number"&&qm(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Gm.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Xe("scroll",e):u!=null&&_3(e,s,u,o))}switch(r){case"input":$0(e),uP(e,i,!1);break;case"textarea":$0(e),dP(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Ml(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?yp(e,!!i.multiple,s,!1):i.defaultValue!=null&&yp(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=E1)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vr(t),null;case 6:if(e&&t.stateNode!=null)pD(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(B(166));if(r=ic(ty.current),ic(Ds.current),C0(t)){if(i=t.stateNode,r=t.memoizedProps,i[Ls]=t,(s=i.nodeValue!==r)&&(e=Ri,e!==null))switch(e.tag){case 3:P0(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&P0(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ls]=t,t.stateNode=i}return vr(t),null;case 13:if(st(yt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ct&&Ci!==null&&t.mode&1&&!(t.flags&128))OF(),Gp(),t.flags|=98560,s=!1;else if(s=C0(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(B(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[Ls]=t}else Gp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vr(t),s=!1}else Wn!==null&&(F$(Wn),Wn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||yt.current&1?Ht===0&&(Ht=3):iI())),t.updateQueue!==null&&(t.flags|=4),vr(t),null);case 4:return Bp(),k$(e,t),e===null&&Ym(t.stateNode.containerInfo),vr(t),null;case 10:return z3(t.type._context),vr(t),null;case 17:return hi(t.type)&&I1(),vr(t),null;case 19:if(st(yt),s=t.memoizedState,s===null)return vr(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)Vh(s,!1);else{if(Ht!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=L1(e),o!==null){for(t.flags|=128,Vh(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ke(yt,yt.current&1|2),t.child}e=e.sibling}s.tail!==null&&kt()>Wp&&(t.flags|=128,i=!0,Vh(s,!1),t.lanes=4194304)}else{if(!i)if(e=L1(o),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Vh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ct)return vr(t),null}else 2*kt()-s.renderingStartTime>Wp&&r!==1073741824&&(t.flags|=128,i=!0,Vh(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=kt(),t.sibling=null,r=yt.current,Ke(yt,i?r&1|2:r&1),t):(vr(t),null);case 22:case 23:return rI(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Oi&1073741824&&(vr(t),t.subtreeFlags&6&&(t.flags|=8192)):vr(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function AZ(e,t){switch(N3(t),t.tag){case 1:return hi(t.type)&&I1(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bp(),st(pi),st(Pr),B3(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return q3(t),null;case 13:if(st(yt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));Gp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return st(yt),null;case 4:return Bp(),null;case 10:return z3(t.type._context),null;case 22:case 23:return rI(),null;case 24:return null;default:return null}}var L0=!1,Er=!1,RZ=typeof WeakSet=="function"?WeakSet:Set,X=null;function sp(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Mt(e,t,i)}else r.current=null}function O$(e,t,r){try{r()}catch(i){Mt(e,t,i)}}var eC=!1;function LZ(e,t){if(h$=x1,e=gF(),R3(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,u=-1,c=0,h=0,f=e,m=null;t:for(;;){for(var y;f!==r||n!==0&&f.nodeType!==3||(a=o+n),f!==s||i!==0&&f.nodeType!==3||(u=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===e)break t;if(m===r&&++c===n&&(a=o),m===s&&++h===i&&(u=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}r=a===-1||u===-1?null:{start:a,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(f$={focusedElem:e,selectionRange:r},x1=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,w=g.memoizedState,b=t.stateNode,_=b.getSnapshotBeforeUpdate(t.elementType===t.type?v:Un(t.type,v),w);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var $=t.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(T){Mt(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return g=eC,eC=!1,g}function gm(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&O$(t,r,s)}n=n.next}while(n!==i)}}function fb(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function P$(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function hD(e){var t=e.alternate;t!==null&&(e.alternate=null,hD(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ls],delete t[Xm],delete t[g$],delete t[gZ],delete t[vZ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fD(e){return e.tag===5||e.tag===3||e.tag===4}function tC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fD(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function C$(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=E1));else if(i!==4&&(e=e.child,e!==null))for(C$(e,t,r),e=e.sibling;e!==null;)C$(e,t,r),e=e.sibling}function A$(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(A$(e,t,r),e=e.sibling;e!==null;)A$(e,t,r),e=e.sibling}var cr=null,qn=!1;function aa(e,t,r){for(r=r.child;r!==null;)mD(e,t,r),r=r.sibling}function mD(e,t,r){if(Fs&&typeof Fs.onCommitFiberUnmount=="function")try{Fs.onCommitFiberUnmount(ob,r)}catch{}switch(r.tag){case 5:Er||sp(r,t);case 6:var i=cr,n=qn;cr=null,aa(e,t,r),cr=i,qn=n,cr!==null&&(qn?(e=cr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):cr.removeChild(r.stateNode));break;case 18:cr!==null&&(qn?(e=cr,r=r.stateNode,e.nodeType===8?nS(e.parentNode,r):e.nodeType===1&&nS(e,r),Zm(e)):nS(cr,r.stateNode));break;case 4:i=cr,n=qn,cr=r.stateNode.containerInfo,qn=!0,aa(e,t,r),cr=i,qn=n;break;case 0:case 11:case 14:case 15:if(!Er&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&O$(r,t,o),n=n.next}while(n!==i)}aa(e,t,r);break;case 1:if(!Er&&(sp(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(a){Mt(r,t,a)}aa(e,t,r);break;case 21:aa(e,t,r);break;case 22:r.mode&1?(Er=(i=Er)||r.memoizedState!==null,aa(e,t,r),Er=i):aa(e,t,r);break;default:aa(e,t,r)}}function rC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new RZ),t.forEach(function(i){var n=qZ.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function xn(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:cr=a.stateNode,qn=!1;break e;case 3:cr=a.stateNode.containerInfo,qn=!0;break e;case 4:cr=a.stateNode.containerInfo,qn=!0;break e}a=a.return}if(cr===null)throw Error(B(160));mD(s,o,n),cr=null,qn=!1;var u=n.alternate;u!==null&&(u.return=null),n.return=null}catch(c){Mt(n,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yD(t,e),t=t.sibling}function yD(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xn(t,e),us(e),i&4){try{gm(3,e,e.return),fb(3,e)}catch(v){Mt(e,e.return,v)}try{gm(5,e,e.return)}catch(v){Mt(e,e.return,v)}}break;case 1:xn(t,e),us(e),i&512&&r!==null&&sp(r,r.return);break;case 5:if(xn(t,e),us(e),i&512&&r!==null&&sp(r,r.return),e.flags&32){var n=e.stateNode;try{qm(n,"")}catch(v){Mt(e,e.return,v)}}if(i&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&D5(n,s),i$(a,o);var c=i$(a,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?G5(n,f):h==="dangerouslySetInnerHTML"?V5(n,f):h==="children"?qm(n,f):_3(n,h,f,c)}switch(a){case"input":Q2(n,s);break;case"textarea":j5(n,s);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?yp(n,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?yp(n,!!s.multiple,s.defaultValue,!0):yp(n,!!s.multiple,s.multiple?[]:"",!1))}n[Xm]=s}catch(v){Mt(e,e.return,v)}}break;case 6:if(xn(t,e),us(e),i&4){if(e.stateNode===null)throw Error(B(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(v){Mt(e,e.return,v)}}break;case 3:if(xn(t,e),us(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Zm(t.containerInfo)}catch(v){Mt(e,e.return,v)}break;case 4:xn(t,e),us(e);break;case 13:xn(t,e),us(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(eI=kt())),i&4&&rC(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Er=(c=Er)||h,xn(t,e),Er=c):xn(t,e),us(e),i&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&e.mode&1)for(X=e,h=e.child;h!==null;){for(f=X=h;X!==null;){switch(m=X,y=m.child,m.tag){case 0:case 11:case 14:case 15:gm(4,m,m.return);break;case 1:sp(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){i=m,r=m.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Mt(i,r,v)}}break;case 5:sp(m,m.return);break;case 22:if(m.memoizedState!==null){nC(f);continue}}y!==null?(y.return=m,X=y):nC(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{n=f.stateNode,c?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=U5("display",o))}catch(v){Mt(e,e.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Mt(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xn(t,e),us(e),i&4&&rC(e);break;case 21:break;default:xn(t,e),us(e)}}function us(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(fD(r)){var i=r;break e}r=r.return}throw Error(B(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(qm(n,""),i.flags&=-33);var s=tC(e);A$(e,s,n);break;case 3:case 4:var o=i.stateNode.containerInfo,a=tC(e);C$(e,a,o);break;default:throw Error(B(161))}}catch(u){Mt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function NZ(e,t,r){X=e,gD(e)}function gD(e,t,r){for(var i=(e.mode&1)!==0;X!==null;){var n=X,s=n.child;if(n.tag===22&&i){var o=n.memoizedState!==null||L0;if(!o){var a=n.alternate,u=a!==null&&a.memoizedState!==null||Er;a=L0;var c=Er;if(L0=o,(Er=u)&&!c)for(X=n;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?sC(n):u!==null?(u.return=o,X=u):sC(n);for(;s!==null;)X=s,gD(s),s=s.sibling;X=n,L0=a,Er=c}iC(e)}else n.subtreeFlags&8772&&s!==null?(s.return=n,X=s):iC(e)}}function iC(e){for(;X!==null;){var t=X;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Er||fb(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Er)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Un(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&VP(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}VP(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Zm(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Er||t.flags&512&&P$(t)}catch(m){Mt(t,t.return,m)}}if(t===e){X=null;break}if(r=t.sibling,r!==null){r.return=t.return,X=r;break}X=t.return}}function nC(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var r=t.sibling;if(r!==null){r.return=t.return,X=r;break}X=t.return}}function sC(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{fb(4,t)}catch(u){Mt(t,r,u)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(u){Mt(t,n,u)}}var s=t.return;try{P$(t)}catch(u){Mt(t,s,u)}break;case 5:var o=t.return;try{P$(t)}catch(u){Mt(t,o,u)}}}catch(u){Mt(t,t.return,u)}if(t===e){X=null;break}var a=t.sibling;if(a!==null){a.return=t.return,X=a;break}X=t.return}}var FZ=Math.ceil,D1=ta.ReactCurrentDispatcher,Q3=ta.ReactCurrentOwner,mn=ta.ReactCurrentBatchConfig,Ae=0,sr=null,Dt=null,fr=0,Oi=0,op=jl(0),Ht=0,sy=null,xc=0,mb=0,X3=0,vm=null,oi=null,eI=0,Wp=1/0,ko=null,j1=!1,R$=null,bl=null,N0=!1,ol=null,z1=0,wm=0,L$=null,Kg=-1,Yg=0;function Wr(){return Ae&6?kt():Kg!==-1?Kg:Kg=kt()}function _l(e){return e.mode&1?Ae&2&&fr!==0?fr&-fr:bZ.transition!==null?(Yg===0&&(Yg=tF()),Yg):(e=Ge,e!==0||(e=window.event,e=e===void 0?16:lF(e.type)),e):1}function Kn(e,t,r,i){if(50<wm)throw wm=0,L$=null,Error(B(185));Ny(e,r,i),(!(Ae&2)||e!==sr)&&(e===sr&&(!(Ae&2)&&(mb|=r),Ht===4&&rl(e,fr)),fi(e,i),r===1&&Ae===0&&!(t.mode&1)&&(Wp=kt()+500,db&&zl()))}function fi(e,t){var r=e.callbackNode;bW(e,t);var i=$1(e,e===sr?fr:0);if(i===0)r!==null&&fP(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&fP(r),t===1)e.tag===0?wZ(oC.bind(null,e)):EF(oC.bind(null,e)),mZ(function(){!(Ae&6)&&zl()}),r=null;else{switch(rF(i)){case 1:r=M3;break;case 4:r=X5;break;case 16:r=S1;break;case 536870912:r=eF;break;default:r=S1}r=TD(r,vD.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function vD(e,t){if(Kg=-1,Yg=0,Ae&6)throw Error(B(327));var r=e.callbackNode;if(_p()&&e.callbackNode!==r)return null;var i=$1(e,e===sr?fr:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=V1(e,i);else{t=i;var n=Ae;Ae|=2;var s=bD();(sr!==e||fr!==t)&&(ko=null,Wp=kt()+500,uc(e,t));do try{zZ();break}catch(a){wD(e,a)}while(!0);j3(),D1.current=s,Ae=n,Dt!==null?t=0:(sr=null,fr=0,t=Ht)}if(t!==0){if(t===2&&(n=l$(e),n!==0&&(i=n,t=N$(e,n))),t===1)throw r=sy,uc(e,0),rl(e,i),fi(e,kt()),r;if(t===6)rl(e,i);else{if(n=e.current.alternate,!(i&30)&&!DZ(n)&&(t=V1(e,i),t===2&&(s=l$(e),s!==0&&(i=s,t=N$(e,s))),t===1))throw r=sy,uc(e,0),rl(e,i),fi(e,kt()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(B(345));case 2:cu(e,oi,ko);break;case 3:if(rl(e,i),(i&130023424)===i&&(t=eI+500-kt(),10<t)){if($1(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){Wr(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=y$(cu.bind(null,e,oi,ko),t);break}cu(e,oi,ko);break;case 4:if(rl(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var o=31-Jn(i);s=1<<o,o=t[o],o>n&&(n=o),i&=~s}if(i=n,i=kt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*FZ(i/1960))-i,10<i){e.timeoutHandle=y$(cu.bind(null,e,oi,ko),i);break}cu(e,oi,ko);break;case 5:cu(e,oi,ko);break;default:throw Error(B(329))}}}return fi(e,kt()),e.callbackNode===r?vD.bind(null,e):null}function N$(e,t){var r=vm;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),e=V1(e,t),e!==2&&(t=oi,oi=r,t!==null&&F$(t)),e}function F$(e){oi===null?oi=e:oi.push.apply(oi,e)}function DZ(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!ns(s(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rl(e,t){for(t&=~X3,t&=~mb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Jn(t),i=1<<r;e[r]=-1,t&=~i}}function oC(e){if(Ae&6)throw Error(B(327));_p();var t=$1(e,0);if(!(t&1))return fi(e,kt()),null;var r=V1(e,t);if(e.tag!==0&&r===2){var i=l$(e);i!==0&&(t=i,r=N$(e,i))}if(r===1)throw r=sy,uc(e,0),rl(e,t),fi(e,kt()),r;if(r===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cu(e,oi,ko),fi(e,kt()),null}function tI(e,t){var r=Ae;Ae|=1;try{return e(t)}finally{Ae=r,Ae===0&&(Wp=kt()+500,db&&zl())}}function Tc(e){ol!==null&&ol.tag===0&&!(Ae&6)&&_p();var t=Ae;Ae|=1;var r=mn.transition,i=Ge;try{if(mn.transition=null,Ge=1,e)return e()}finally{Ge=i,mn.transition=r,Ae=t,!(Ae&6)&&zl()}}function rI(){Oi=op.current,st(op)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,fZ(r)),Dt!==null)for(r=Dt.return;r!==null;){var i=r;switch(N3(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&I1();break;case 3:Bp(),st(pi),st(Pr),B3();break;case 5:q3(i);break;case 4:Bp();break;case 13:st(yt);break;case 19:st(yt);break;case 10:z3(i.type._context);break;case 22:case 23:rI()}r=r.return}if(sr=e,Dt=e=Sl(e.current,null),fr=Oi=t,Ht=0,sy=null,X3=mb=xc=0,oi=vm=null,rc!==null){for(t=0;t<rc.length;t++)if(r=rc[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,s=r.pending;if(s!==null){var o=s.next;s.next=n,i.next=o}r.pending=i}rc=null}return e}function wD(e,t){do{var r=Dt;try{if(j3(),Wg.current=F1,N1){for(var i=gt.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}N1=!1}if($c=0,ir=qt=gt=null,ym=!1,ry=0,Q3.current=null,r===null||r.return===null){Ht=1,sy=t,Dt=null;break}e:{var s=e,o=r.return,a=r,u=t;if(t=fr,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=WP(o);if(y!==null){y.flags&=-257,ZP(y,o,a,s,t),y.mode&1&&HP(s,c,t),t=y,u=c;var g=t.updateQueue;if(g===null){var v=new Set;v.add(u),t.updateQueue=v}else g.add(u);break e}else{if(!(t&1)){HP(s,c,t),iI();break e}u=Error(B(426))}}else if(ct&&a.mode&1){var w=WP(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),ZP(w,o,a,s,t),F3(Hp(u,a));break e}}s=u=Hp(u,a),Ht!==4&&(Ht=2),vm===null?vm=[s]:vm.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var b=rD(s,u,t);zP(s,b);break e;case 1:a=u;var _=s.type,$=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(bl===null||!bl.has($)))){s.flags|=65536,t&=-t,s.lanes|=t;var T=iD(s,a,t);zP(s,T);break e}}s=s.return}while(s!==null)}SD(r)}catch(E){t=E,Dt===r&&r!==null&&(Dt=r=r.return);continue}break}while(!0)}function bD(){var e=D1.current;return D1.current=F1,e===null?F1:e}function iI(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),sr===null||!(xc&268435455)&&!(mb&268435455)||rl(sr,fr)}function V1(e,t){var r=Ae;Ae|=2;var i=bD();(sr!==e||fr!==t)&&(ko=null,uc(e,t));do try{jZ();break}catch(n){wD(e,n)}while(!0);if(j3(),Ae=r,D1.current=i,Dt!==null)throw Error(B(261));return sr=null,fr=0,Ht}function jZ(){for(;Dt!==null;)_D(Dt)}function zZ(){for(;Dt!==null&&!dW();)_D(Dt)}function _D(e){var t=xD(e.alternate,e,Oi);e.memoizedProps=e.pendingProps,t===null?SD(e):Dt=t,Q3.current=null}function SD(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=AZ(r,t),r!==null){r.flags&=32767,Dt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ht=6,Dt=null;return}}else if(r=CZ(r,t,Oi),r!==null){Dt=r;return}if(t=t.sibling,t!==null){Dt=t;return}Dt=t=e}while(t!==null);Ht===0&&(Ht=5)}function cu(e,t,r){var i=Ge,n=mn.transition;try{mn.transition=null,Ge=1,VZ(e,t,r,i)}finally{mn.transition=n,Ge=i}return null}function VZ(e,t,r,i){do _p();while(ol!==null);if(Ae&6)throw Error(B(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(_W(e,s),e===sr&&(Dt=sr=null,fr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||N0||(N0=!0,TD(S1,function(){return _p(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=mn.transition,mn.transition=null;var o=Ge;Ge=1;var a=Ae;Ae|=4,Q3.current=null,LZ(e,r),yD(r,e),aZ(f$),x1=!!h$,f$=h$=null,e.current=r,NZ(r),pW(),Ae=a,Ge=o,mn.transition=s}else e.current=r;if(N0&&(N0=!1,ol=e,z1=n),s=e.pendingLanes,s===0&&(bl=null),mW(r.stateNode),fi(e,kt()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(j1)throw j1=!1,e=R$,R$=null,e;return z1&1&&e.tag!==0&&_p(),s=e.pendingLanes,s&1?e===L$?wm++:(wm=0,L$=e):wm=0,zl(),null}function _p(){if(ol!==null){var e=rF(z1),t=mn.transition,r=Ge;try{if(mn.transition=null,Ge=16>e?16:e,ol===null)var i=!1;else{if(e=ol,ol=null,z1=0,Ae&6)throw Error(B(331));var n=Ae;for(Ae|=4,X=e.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:gm(8,h,s)}var f=h.child;if(f!==null)f.return=h,X=f;else for(;X!==null;){h=X;var m=h.sibling,y=h.return;if(hD(h),h===c){X=null;break}if(m!==null){m.return=y,X=m;break}X=y}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:gm(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,X=b;break e}X=s.return}}var _=e.current;for(X=_;X!==null;){o=X;var $=o.child;if(o.subtreeFlags&2064&&$!==null)$.return=o,X=$;else e:for(o=_;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fb(9,a)}}catch(E){Mt(a,a.return,E)}if(a===o){X=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,X=T;break e}X=a.return}}if(Ae=n,zl(),Fs&&typeof Fs.onPostCommitFiberRoot=="function")try{Fs.onPostCommitFiberRoot(ob,e)}catch{}i=!0}return i}finally{Ge=r,mn.transition=t}}return!1}function aC(e,t,r){t=Hp(r,t),t=rD(e,t,1),e=wl(e,t,1),t=Wr(),e!==null&&(Ny(e,1,t),fi(e,t))}function Mt(e,t,r){if(e.tag===3)aC(e,e,r);else for(;t!==null;){if(t.tag===3){aC(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(bl===null||!bl.has(i))){e=Hp(r,e),e=iD(t,e,1),t=wl(t,e,1),e=Wr(),t!==null&&(Ny(t,1,e),fi(t,e));break}}t=t.return}}function UZ(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Wr(),e.pingedLanes|=e.suspendedLanes&r,sr===e&&(fr&r)===r&&(Ht===4||Ht===3&&(fr&130023424)===fr&&500>kt()-eI?uc(e,0):X3|=r),fi(e,t)}function $D(e,t){t===0&&(e.mode&1?(t=M0,M0<<=1,!(M0&130023424)&&(M0=4194304)):t=1);var r=Wr();e=Wo(e,t),e!==null&&(Ny(e,t,r),fi(e,r))}function GZ(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),$D(e,r)}function qZ(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(B(314))}i!==null&&i.delete(t),$D(e,r)}var xD;xD=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||pi.current)ui=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ui=!1,PZ(e,t,r);ui=!!(e.flags&131072)}else ui=!1,ct&&t.flags&1048576&&IF(t,P1,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Jg(e,t),e=t.pendingProps;var n=Up(t,Pr.current);bp(t,r),n=W3(null,t,i,e,n,r);var s=Z3();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,hi(i)?(s=!0,k1(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,U3(t),n.updater=hb,t.stateNode=n,n._reactInternals=t,$$(t,i,e,r),t=M$(null,t,i,!0,s,r)):(t.tag=0,ct&&s&&L3(t),qr(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Jg(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=HZ(i),e=Un(i,e),n){case 0:t=T$(null,t,i,e,r);break e;case 1:t=YP(null,t,i,e,r);break e;case 11:t=JP(null,t,i,e,r);break e;case 14:t=KP(null,t,i,Un(i.type,e),r);break e}throw Error(B(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Un(i,n),T$(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Un(i,n),YP(e,t,i,n,r);case 3:e:{if(aD(t),e===null)throw Error(B(387));i=t.pendingProps,s=t.memoizedState,n=s.element,RF(e,t),R1(t,i,null,r);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=Hp(Error(B(423)),t),t=QP(e,t,i,r,n);break e}else if(i!==n){n=Hp(Error(B(424)),t),t=QP(e,t,i,r,n);break e}else for(Ci=vl(t.stateNode.containerInfo.firstChild),Ri=t,ct=!0,Wn=null,r=CF(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Gp(),i===n){t=Zo(e,t,r);break e}qr(e,t,i,r)}t=t.child}return t;case 5:return LF(t),e===null&&b$(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,o=n.children,m$(i,n)?o=null:s!==null&&m$(i,s)&&(t.flags|=32),oD(e,t),qr(e,t,o,r),t.child;case 6:return e===null&&b$(t),null;case 13:return lD(e,t,r);case 4:return G3(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=qp(t,null,i,r):qr(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Un(i,n),JP(e,t,i,n,r);case 7:return qr(e,t,t.pendingProps,r),t.child;case 8:return qr(e,t,t.pendingProps.children,r),t.child;case 12:return qr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,o=n.value,Ke(C1,i._currentValue),i._currentValue=o,s!==null)if(ns(s.value,o)){if(s.children===n.children&&!pi.current){t=Zo(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===i){if(s.tag===1){u=Vo(-1,r&-r),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),_$(s.return,r,t),a.lanes|=r;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),_$(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}qr(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,bp(t,r),n=bn(n),i=i(n),t.flags|=1,qr(e,t,i,r),t.child;case 14:return i=t.type,n=Un(i,t.pendingProps),n=Un(i.type,n),KP(e,t,i,n,r);case 15:return nD(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Un(i,n),Jg(e,t),t.tag=1,hi(i)?(e=!0,k1(t)):e=!1,bp(t,r),tD(t,i,n),$$(t,i,n,r),M$(null,t,i,!0,e,r);case 19:return uD(e,t,r);case 22:return sD(e,t,r)}throw Error(B(156,t.tag))};function TD(e,t){return Q5(e,t)}function BZ(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(e,t,r,i){return new BZ(e,t,r,i)}function nI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HZ(e){if(typeof e=="function")return nI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$3)return 11;if(e===x3)return 14}return 2}function Sl(e,t){var r=e.alternate;return r===null?(r=dn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Qg(e,t,r,i,n,s){var o=2;if(i=e,typeof e=="function")nI(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Kd:return cc(r.children,n,s,t);case S3:o=8,n|=8;break;case W2:return e=dn(12,r,t,n|2),e.elementType=W2,e.lanes=s,e;case Z2:return e=dn(13,r,t,n),e.elementType=Z2,e.lanes=s,e;case J2:return e=dn(19,r,t,n),e.elementType=J2,e.lanes=s,e;case L5:return yb(r,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A5:o=10;break e;case R5:o=9;break e;case $3:o=11;break e;case x3:o=14;break e;case Ha:o=16,i=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=dn(o,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function cc(e,t,r,i){return e=dn(7,e,i,t),e.lanes=r,e}function yb(e,t,r,i){return e=dn(22,e,i,t),e.elementType=L5,e.lanes=r,e.stateNode={isHidden:!1},e}function pS(e,t,r){return e=dn(6,e,null,t),e.lanes=r,e}function hS(e,t,r){return t=dn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WZ(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=W_(0),this.expirationTimes=W_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=W_(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function sI(e,t,r,i,n,s,o,a,u){return e=new WZ(e,t,r,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=dn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},U3(s),e}function ZZ(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jd,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function MD(e){if(!e)return El;e=e._reactInternals;e:{if(Bc(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(hi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var r=e.type;if(hi(r))return MF(e,r,t)}return t}function ED(e,t,r,i,n,s,o,a,u){return e=sI(r,i,!0,e,n,s,o,a,u),e.context=MD(null),r=e.current,i=Wr(),n=_l(r),s=Vo(i,n),s.callback=t??null,wl(r,s,n),e.current.lanes=n,Ny(e,n,i),fi(e,i),e}function gb(e,t,r,i){var n=t.current,s=Wr(),o=_l(n);return r=MD(r),t.context===null?t.context=r:t.pendingContext=r,t=Vo(s,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=wl(n,t,o),e!==null&&(Kn(e,n,o,s),Hg(e,n,o)),o}function U1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function oI(e,t){lC(e,t),(e=e.alternate)&&lC(e,t)}function JZ(){return null}var ID=typeof reportError=="function"?reportError:function(e){console.error(e)};function aI(e){this._internalRoot=e}vb.prototype.render=aI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));gb(e,t,null,null)};vb.prototype.unmount=aI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Tc(function(){gb(null,e,null,null)}),t[Ho]=null}};function vb(e){this._internalRoot=e}vb.prototype.unstable_scheduleHydration=function(e){if(e){var t=sF();e={blockedOn:null,target:e,priority:t};for(var r=0;r<tl.length&&t!==0&&t<tl[r].priority;r++);tl.splice(r,0,e),r===0&&aF(e)}};function lI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uC(){}function KZ(e,t,r,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var c=U1(o);s.call(c)}}var o=ED(t,i,e,0,null,!1,!1,"",uC);return e._reactRootContainer=o,e[Ho]=o.current,Ym(e.nodeType===8?e.parentNode:e),Tc(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var c=U1(u);a.call(c)}}var u=sI(e,0,!1,null,null,!1,!1,"",uC);return e._reactRootContainer=u,e[Ho]=u.current,Ym(e.nodeType===8?e.parentNode:e),Tc(function(){gb(t,u,r,i)}),u}function bb(e,t,r,i,n){var s=r._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var u=U1(o);a.call(u)}}gb(t,o,e,n)}else o=KZ(r,t,e,n,i);return U1(o)}iF=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=hf(t.pendingLanes);r!==0&&(E3(t,r|1),fi(t,kt()),!(Ae&6)&&(Wp=kt()+500,zl()))}break;case 13:Tc(function(){var i=Wo(e,1);if(i!==null){var n=Wr();Kn(i,e,1,n)}}),oI(e,1)}};I3=function(e){if(e.tag===13){var t=Wo(e,134217728);if(t!==null){var r=Wr();Kn(t,e,134217728,r)}oI(e,134217728)}};nF=function(e){if(e.tag===13){var t=_l(e),r=Wo(e,t);if(r!==null){var i=Wr();Kn(r,e,t,i)}oI(e,t)}};sF=function(){return Ge};oF=function(e,t){var r=Ge;try{return Ge=e,t()}finally{Ge=r}};s$=function(e,t,r){switch(t){case"input":if(Q2(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=cb(i);if(!n)throw Error(B(90));F5(i),Q2(i,n)}}}break;case"textarea":j5(e,r);break;case"select":t=r.value,t!=null&&yp(e,!!r.multiple,t,!1)}};H5=tI;W5=Tc;var YZ={usingClientEntryPoint:!1,Events:[Dy,ep,cb,q5,B5,tI]},Uh={findFiberByHostInstance:tc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QZ={bundleType:Uh.bundleType,version:Uh.version,rendererPackageName:Uh.rendererPackageName,rendererConfig:Uh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ta.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=K5(e),e===null?null:e.stateNode},findFiberByHostInstance:Uh.findFiberByHostInstance||JZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var F0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!F0.isDisabled&&F0.supportsFiber)try{ob=F0.inject(QZ),Fs=F0}catch{}}Vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YZ;Vi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lI(t))throw Error(B(200));return ZZ(e,t,null,r)};Vi.createRoot=function(e,t){if(!lI(e))throw Error(B(299));var r=!1,i="",n=ID;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=sI(e,1,!1,null,null,r,!1,i,n),e[Ho]=t.current,Ym(e.nodeType===8?e.parentNode:e),new aI(t)};Vi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=K5(t),e=e===null?null:e.stateNode,e};Vi.flushSync=function(e){return Tc(e)};Vi.hydrate=function(e,t,r){if(!wb(t))throw Error(B(200));return bb(null,e,t,!0,r)};Vi.hydrateRoot=function(e,t,r){if(!lI(e))throw Error(B(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",o=ID;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=ED(t,null,e,1,r??null,n,!1,s,o),e[Ho]=t.current,Ym(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new vb(t)};Vi.render=function(e,t,r){if(!wb(t))throw Error(B(200));return bb(null,e,t,!1,r)};Vi.unmountComponentAtNode=function(e){if(!wb(e))throw Error(B(40));return e._reactRootContainer?(Tc(function(){bb(null,null,e,!1,function(){e._reactRootContainer=null,e[Ho]=null})}),!0):!1};Vi.unstable_batchedUpdates=tI;Vi.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!wb(r))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return bb(e,t,r,!1,i)};Vi.version="18.3.1-next-f1338f8080-20240426";function kD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kD)}catch(e){console.error(e)}}kD(),k5.exports=Vi;var XZ=k5.exports;const eJ=g5(XZ);/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function G1(){return G1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},G1.apply(this,arguments)}var al;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(al||(al={}));const cC="popstate";function tJ(e){e===void 0&&(e={});function t(i,n){let{pathname:s,search:o,hash:a}=i.location;return D$("",{pathname:s,search:o,hash:a},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(i,n){return typeof n=="string"?n:PD(n)}return iJ(t,r,null,e)}function vi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function OD(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rJ(){return Math.random().toString(36).substr(2,8)}function dC(e,t){return{usr:e.state,key:e.key,idx:t}}function D$(e,t,r,i){return r===void 0&&(r=null),G1({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?_b(t):t,{state:r,key:t&&t.key||i||rJ()})}function PD(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function _b(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function iJ(e,t,r,i){i===void 0&&(i={});let{window:n=document.defaultView,v5Compat:s=!1}=i,o=n.history,a=al.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(G1({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=al.Pop;let w=h(),b=w==null?null:w-c;c=w,u&&u({action:a,location:v.location,delta:b})}function m(w,b){a=al.Push;let _=D$(v.location,w,b);c=h()+1;let $=dC(_,c),T=v.createHref(_);try{o.pushState($,"",T)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;n.location.assign(T)}s&&u&&u({action:a,location:v.location,delta:1})}function y(w,b){a=al.Replace;let _=D$(v.location,w,b);c=h();let $=dC(_,c),T=v.createHref(_);o.replaceState($,"",T),s&&u&&u({action:a,location:v.location,delta:0})}function g(w){let b=n.location.origin!=="null"?n.location.origin:n.location.href,_=typeof w=="string"?w:PD(w);return _=_.replace(/ $/,"%20"),vi(b,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,b)}let v={get action(){return a},get location(){return e(n,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return n.addEventListener(cC,f),u=w,()=>{n.removeEventListener(cC,f),u=null}},createHref(w){return t(n,w)},createURL:g,encodeLocation(w){let b=g(w);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:y,go(w){return o.go(w)}};return v}var pC;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(pC||(pC={}));function nJ(e,t,r){return r===void 0&&(r="/"),sJ(e,t,r,!1)}function sJ(e,t,r,i){let n=typeof t=="string"?_b(t):t,s=RD(n.pathname||"/",r);if(s==null)return null;let o=CD(e);oJ(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=gJ(s);a=mJ(o[u],c,i)}return a}function CD(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let n=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(vi(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let c=Sp([i,u.relativePath]),h=r.concat(u);s.children&&s.children.length>0&&(vi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),CD(s.children,t,h,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:hJ(c,s.index),routesMeta:h})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))n(s,o);else for(let u of AD(s.path))n(s,o,u)}),t}function AD(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,n=r.endsWith("?"),s=r.replace(/\?$/,"");if(i.length===0)return n?[s,""]:[s];let o=AD(i.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),n&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function oJ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:fJ(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const aJ=/^:[\w-]+$/,lJ=3,uJ=2,cJ=1,dJ=10,pJ=-2,hC=e=>e==="*";function hJ(e,t){let r=e.split("/"),i=r.length;return r.some(hC)&&(i+=pJ),t&&(i+=uJ),r.filter(n=>!hC(n)).reduce((n,s)=>n+(aJ.test(s)?lJ:s===""?cJ:dJ),i)}function fJ(e,t){return e.length===t.length&&e.slice(0,-1).every((i,n)=>i===t[n])?e[e.length-1]-t[t.length-1]:0}function mJ(e,t,r){let{routesMeta:i}=e,n={},s="/",o=[];for(let a=0;a<i.length;++a){let u=i[a],c=a===i.length-1,h=s==="/"?t:t.slice(s.length)||"/",f=fC({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!f&&c&&r&&!i[i.length-1].route.index&&(f=fC({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(n,f.params),o.push({params:n,pathname:Sp([s,f.pathname]),pathnameBase:vJ(Sp([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Sp([s,f.pathnameBase]))}return o}function fC(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=yJ(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let s=n[0],o=s.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:i.reduce((c,h,f)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let v=a[f]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[f];return y&&!g?c[m]=void 0:c[m]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:e}}function yJ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),OD(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(i.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),i]}function gJ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return OD(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function RD(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}const Sp=e=>e.join("/").replace(/\/\/+/g,"/"),vJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function wJ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const LD=["post","put","patch","delete"];new Set(LD);const bJ=["get",...LD];new Set(bJ);/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function q1(){return q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},q1.apply(this,arguments)}const _J=de.createContext(null),SJ=de.createContext(null),ND=de.createContext(null),Sb=de.createContext(null),zy=de.createContext({outlet:null,matches:[],isDataRoute:!1}),FD=de.createContext(null);function uI(){return de.useContext(Sb)!=null}function $J(){return uI()||vi(!1),de.useContext(Sb).location}function xJ(){let{matches:e}=de.useContext(zy),t=e[e.length-1];return t?t.params:{}}function TJ(e,t){return MJ(e,t)}function MJ(e,t,r,i){uI()||vi(!1);let{navigator:n}=de.useContext(ND),{matches:s}=de.useContext(zy),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=$J(),h;if(t){var f;let w=typeof t=="string"?_b(t):t;u==="/"||(f=w.pathname)!=null&&f.startsWith(u)||vi(!1),h=w}else h=c;let m=h.pathname||"/",y=m;if(u!=="/"){let w=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=nJ(e,{pathname:y}),v=PJ(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Sp([u,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Sp([u,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,r,i);return t&&v?de.createElement(Sb.Provider,{value:{location:q1({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:al.Pop}},v):v}function EJ(){let e=LJ(),t=wJ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return de.createElement(de.Fragment,null,de.createElement("h2",null,"Unexpected Application Error!"),de.createElement("h3",{style:{fontStyle:"italic"}},t),r?de.createElement("pre",{style:n},r):null,null)}const IJ=de.createElement(EJ,null);class kJ extends de.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?de.createElement(zy.Provider,{value:this.props.routeContext},de.createElement(FD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OJ(e){let{routeContext:t,match:r,children:i}=e,n=de.useContext(_J);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),de.createElement(zy.Provider,{value:t},i)}function PJ(e,t,r,i){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),i===void 0&&(i=null),e==null){var s;if((s=r)!=null&&s.errors)e=r.matches;else return null}let o=e,a=(n=r)==null?void 0:n.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||vi(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(r&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:y}=r,g=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||g){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let y,g=!1,v=null,w=null;r&&(y=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||IJ,u&&(c<0&&m===0?(g=!0,w=null):c===m&&(g=!0,w=f.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,m+1)),_=()=>{let $;return y?$=v:g?$=w:f.route.Component?$=de.createElement(f.route.Component,null):f.route.element?$=f.route.element:$=h,de.createElement(OJ,{match:f,routeContext:{outlet:h,matches:b,isDataRoute:r!=null},children:$})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?de.createElement(kJ,{location:r.location,revalidation:r.revalidation,component:v,error:y,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):_()},null)}var j$=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(j$||{});function CJ(e){let t=de.useContext(SJ);return t||vi(!1),t}function AJ(e){let t=de.useContext(zy);return t||vi(!1),t}function RJ(e){let t=AJ(),r=t.matches[t.matches.length-1];return r.route.id||vi(!1),r.route.id}function LJ(){var e;let t=de.useContext(FD),r=CJ(j$.UseRouteError),i=RJ(j$.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[i]}function z$(e){vi(!1)}function NJ(e){let{basename:t="/",children:r=null,location:i,navigationType:n=al.Pop,navigator:s,static:o=!1,future:a}=e;uI()&&vi(!1);let u=t.replace(/^\/*/,"/"),c=de.useMemo(()=>({basename:u,navigator:s,static:o,future:q1({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof i=="string"&&(i=_b(i));let{pathname:h="/",search:f="",hash:m="",state:y=null,key:g="default"}=i,v=de.useMemo(()=>{let w=RD(h,u);return w==null?null:{location:{pathname:w,search:f,hash:m,state:y,key:g},navigationType:n}},[u,h,f,m,y,g,n]);return v==null?null:de.createElement(ND.Provider,{value:c},de.createElement(Sb.Provider,{children:r,value:v}))}function FJ(e){let{children:t,location:r}=e;return TJ(V$(t),r)}new Promise(()=>{});function V$(e,t){t===void 0&&(t=[]);let r=[];return de.Children.forEach(e,(i,n)=>{if(!de.isValidElement(i))return;let s=[...t,n];if(i.type===de.Fragment){r.push.apply(r,V$(i.props.children,s));return}i.type!==z$&&vi(!1),!i.props.index||!i.props.children||vi(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=V$(i.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const DJ="6";try{window.__reactRouterVersion=DJ}catch{}const jJ="startTransition",mC=UH[jJ];function zJ(e){let{basename:t,children:r,future:i,window:n}=e,s=de.useRef();s.current==null&&(s.current=tJ({window:n,v5Compat:!0}));let o=s.current,[a,u]=de.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=de.useCallback(f=>{c&&mC?mC(()=>u(f)):u(f)},[u,c]);return de.useLayoutEffect(()=>o.listen(h),[o,h]),de.createElement(NJ,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:o,future:i})}var yC;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(yC||(yC={}));var gC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(gC||(gC={}));function l(e,t,r,i){var n,s=arguments.length,o=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function f$e(e,t){return function(r,i){t(r,i,e)}}function m$e(e,t,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(h){try{c(i.next(h))}catch(f){o(f)}}function u(h){try{c(i.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):n(h.value).then(a,u)}c((i=i.apply(e,[])).next())})}const VJ="modulepreload",UJ=function(e){return"/ArcGIS-map-WebView-webApp/"+e},vC={},J=function(t,r,i){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));n=Promise.all(r.map(a=>{if(a=UJ(a),a in vC)return;vC[a]=!0;const u=a.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":VJ,u||(h.as="script",h.crossOrigin=""),h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return n.then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};let ll;function R(e){return typeof ll[e]=="function"?ll[e]=ll[e](globalThis):ll[e]}var u5,c5,d5,p5;ll=(u5=globalThis.dojoConfig)!=null&&u5.has||(c5=globalThis.esriConfig)!=null&&c5.has?{...(d5=globalThis.dojoConfig)==null?void 0:d5.has,...(p5=globalThis.esriConfig)==null?void 0:p5.has}:{},R.add=(e,t,r,i)=>((i||ll[e]===void 0)&&(ll[e]=t),r&&R(e)),R.cache=ll,R.add("big-integer-warning-enabled",!0),R.add("esri-deprecation-warnings",!0),R.add("esri-tests-disable-screenshots",!1),R.add("esri-tests-use-full-window",!1),R.add("esri-tests-post-to-influx",!0),(()=>{var t;R.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(R.add("host-browser",e),R.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),R.add("dom",e),R("host-browser")){const r=navigator,i=r.userAgent,n=r.appVersion,s=parseFloat(n);if(R.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),R.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),R.add("khtml",n.includes("Konqueror")?s:void 0),R.add("edge",parseFloat(i.split("Edge/")[1])||void 0),R.add("opr",parseFloat(i.split("OPR/")[1])||void 0),R.add("webkit",!R("wp")&&!R("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),R.add("chrome",!R("edge")&&!R("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),R.add("android",!R("wp")&&parseFloat(i.split("Android ")[1])||void 0),R.add("safari",!n.includes("Safari")||R("wp")||R("chrome")||R("android")||R("edge")||R("opr")?void 0:parseFloat(n.split("Version/")[1])),R.add("mac",n.includes("Macintosh")),!R("wp")&&/(iPhone|iPod|iPad)/.test(i)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",u=parseFloat(a.replace(/_/,".").replaceAll("_",""));R.add(o,u),R.add("ios",u)}R("webkit")||(!i.includes("Gecko")||R("wp")||R("khtml")||R("edge")||R.add("mozilla",s),R("mozilla")&&R.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&R.add("esri-mobile",t),r&&R.add("esri-iPhone",r),R.add("esri-geolocation",!!navigator.geolocation)}R.add("esri-wasm","WebAssembly"in globalThis),R.add("esri-performance-mode-frames-between-render",20),R.add("esri-force-performance-mode",!1),R.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),R.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),R.add("esri-atomics","Atomics"in globalThis),R.add("esri-workers","Worker"in globalThis),R.add("web-feat:cache","caches"in globalThis),R.add("esri-workers-arraybuffer-transfer",!R("safari")||Number(R("safari"))>=12),R.add("workers-pool-size",8),R.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),R.add("featurelayer-simplify-payload-size-factors",[1,1,4]),R.add("featurelayer-fast-triangulation-enabled",!0),R.add("featurelayer-animation-enabled",!0),R.add("featurelayer-snapshot-enabled",!0),R.add("featurelayer-snapshot-point-min-threshold",8e4),R.add("featurelayer-snapshot-point-max-threshold",4e5),R.add("featurelayer-snapshot-point-coverage",.1),R.add("featurelayer-query-max-depth",4),R.add("featurelayer-query-pausing-enabled",!1),R.add("featurelayer-advanced-symbols",!1),R.add("featurelayer-pbf",!0),R.add("featurelayer-pbf-statistics",!1),R.add("feature-layers-workers",!0),R.add("feature-polyline-generalization-factor",1),R.add("mapview-transitions-duration",200),R.add("mapview-essential-goto-duration",200),R.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),R.add("mapserver-pbf-version-support",10.81),R.add("mapservice-popup-identify-max-tolerance",20),R("host-webworker")||R("host-browser")&&(R.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),R.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{R.add("esri-image-decode",!0,!0,!0)}).catch(()=>{R.add("esri-image-decode",!1,!0,!0)})}return!1}),R.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();let fS=class du{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*du._m}getInt(){return this._seed=(du._a*this._seed+du._c)%du._m,this._seed}getFloat(){return this.getInt()/(du._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/du._m*i}};fS._m=2147483647,fS._a=48271,fS._c=0;function y$e(e,t){return t?e.filter((r,i,n)=>n.findIndex(t.bind(null,r))===i):Array.from(new Set(e))}function $b(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function g$e(e,t){let r=e.length!==t.length;r&&(e.length=t.length);for(let i=0;i<t.length;++i)e[i]!==t[i]&&(e[i]=t[i],r=!0);return r}function wC(e,t,r){let i,n;return r?(i=t.filter(s=>!e.some(o=>r(o,s))),n=e.filter(s=>!t.some(o=>r(o,s)))):(i=t.filter(s=>!e.includes(s)),n=e.filter(s=>!t.includes(s))),{added:i,removed:n}}function v$e(e){return e&&typeof e.length=="number"}let DD=class{constructor(){this.last=0}};const jD=new DD;function U$(e,t,r,i){i=i||jD;const n=Math.max(0,i.last-10);for(let o=n;o<r;++o)if(e[o]===t)return i.last=o,o;const s=Math.min(n,r);for(let o=0;o<s;++o)if(e[o]===t)return i.last=o,o;return-1}function GJ(e,t,r,i){const n=e.length,s=U$(e,t,n,i);if(s!==-1)return e[s]=e[n-1],e.pop(),t}const Tn=new Set;function qJ(e,t,r=e.length,i=t.length,n,s){if(i===0||r===0)return r;Tn.clear();for(let a=0;a<i;++a)Tn.add(t[a]);n=n||jD;const o=Math.max(0,n.last-10);for(let a=o;a<r;++a)if(Tn.has(e[a])&&(s==null||s.push(e[a]),Tn.delete(e[a]),e[a]=e[r-1],--r,--a,Tn.size===0||r===0))return Tn.clear(),r;for(let a=0;a<o;++a)if(Tn.has(e[a])&&(s==null||s.push(e[a]),Tn.delete(e[a]),e[a]=e[r-1],--r,--a,Tn.size===0||r===0))return Tn.clear(),r;return Tn.clear(),r}function BJ(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function Mc(e,t){return e!=null}function zD(e){return 32+e.length}function cI(){return 16}function b$e(e){if(!e)return 0;let t=UD;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(typeof i){case"string":t+=zD(i);break;case"number":t+=cI();break;case"boolean":t+=4}}return t}function HJ(e){if(!e)return 0;if(Array.isArray(e))return WJ(e);let t=UD;for(const r in e)e.hasOwnProperty(r)&&(t+=VD(e[r]));return t}function WJ(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let r=GD;for(let i=0;i<t;i++)r+=VD(e[i]);return r}function VD(e){switch(typeof e){case"object":return HJ(e);case"string":return zD(e);case"number":return cI();case"boolean":return 4;default:return 8}}function ZJ(e,t){return GD+e.length*t}const UD=32,GD=16;function _$e(e){return e instanceof ArrayBuffer}function dI(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function qD(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function BD(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function pI(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function HD(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function hI(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function WD(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function xb(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function Tb(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function JJ(e){return!("buffer"in e)}function S$e(...e){return e.reduce((t,r)=>t+(r?JJ(r)?ZJ(r,cI()):r.byteLength+KJ:0),0)}const KJ=145,$$e=1024;function x$e(e){return Tb(e)||xb(e)||hI(e)||pI(e)||dI(e)}function T$e(e){return Tb(e)||xb(e)}function M$e(e){return Tb(e)?179769e303:xb(e)?3402823e32:WD(e)?4294967295:HD(e)?65535:qD(e)||BD(e)?255:hI(e)?2147483647:pI(e)?32767:dI(e)?127:256}function YJ(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function k(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=KD(e);if(t!=null)return t;if(B1(e))return e.clone();if(ZD(e))return e.map(k);if(JD(e))return e.clone();const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=k(e[i]);return r}function G$(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=KD(e);if(t!=null)return t;if(ZD(e)){let r=!0;const i=e.map(n=>{const s=G$(n);return n!=null&&s==null&&(r=!1),s});return r?i:null}if(B1(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!JD(e)){const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const n=e[i],s=G$(n);if(n!=null&&s==null)return null;r[i]=s}return r}return null}function B1(e){return typeof e.clone=="function"}function ZD(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function JD(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function bC(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function KD(e){if(dI(e)||qD(e)||BD(e)||pI(e)||HD(e)||hI(e)||WD(e)||xb(e)||Tb(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,k(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(k(r));return t}return null}function fI(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function YD(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&$b(e,t):e instanceof Set?t instanceof Set&&XJ(e,t):e instanceof Map?t instanceof Map&&eK(e,t):!!bC(e)&&bC(t)&&QJ(e,t))}function QJ(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function XJ(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function eK(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const n=t.get(r);if(n!==i||n===void 0&&!t.has(r))return!1}return!0}function mI(e,t,r=!1){return XD(e,t,r)}function Mb(e,t){if(t!=null)return t[e]||QD(e.split("."),!1,t)}function Cr(e,t,r){const i=e.split("."),n=i.pop(),s=QD(i,!0,r);s&&n&&(s[n]=t)}function _C(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(_C(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(_C(e[r],t[r]))return!0;return!1}return e!==t}function QD(e,t,r){let i=r;for(const n of e){if(i==null)return;if(!(n in i)){if(!t)return;i[n]={}}i=i[n]}return i}function XD(e,t,r){return t?Object.keys(t).reduce((i,n)=>{let s=i[n],o=t[n];return s===o?i:s===void 0?(i[n]=k(o),i):(Array.isArray(o)||Array.isArray(i)?(s=s?Array.isArray(s)?i[n]=s.concat():i[n]=[s]:i[n]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{s.includes(a)||s.push(a)}):i[n]=o.concat())):o&&typeof o=="object"?i[n]=XD(s,o,r):i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[n]=o),i)},e||{}):e}var h5;const Pe={apiKey:void 0,applicationName:"",applicationUrl:(h5=globalThis.location)==null?void 0:h5.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(mI(Pe,globalThis.esriConfig,!0),delete Pe.has),!Pe.assetsPath){{const e="4.30";Pe.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}Pe.defaultAssetsPath=Pe.assetsPath}const tK=/\{([^}]+)\}/g;function SC(e){return e??""}function yI(e,t){return t?e.replaceAll(tK,typeof t=="object"?(r,i)=>SC(Mb(i,t)):(r,i)=>SC(t(i))):e}function E$e(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>t!=null&&t.includes(r)?r:`\\${r}`)}function ej(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let $C;function I$e(e){return $C??($C=new DOMParser),$C.parseFromString(e||"","text/html").body.innerText||""}function k$e(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const xC={info:0,warn:1,error:2,none:3};let z=class Si{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Si._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Si.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Si._loggers.get(t)||new Si({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!Si._throttlingDisabled){const n=iK(i),s=this._loggedMessages[t].get(n);if(r==="once"&&s!=null||r==="oncePerTick"&&s&&s>=Si._tickCounter)return;this._loggedMessages[t].set(n,Si._tickCounter),Si._scheduleTickCounterIncrement()}for(const n of Pe.log.interceptors)if(n(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const n=i[t];if(n!=null)return n;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",rK)}_matchLevel(t){const r=Pe.log.level||"warn";return xC[this._parentWithMember("level",r)]<=xC[t]}static _scheduleTickCounterIncrement(){Si._tickCounterScheduled||(Si._tickCounterScheduled=!0,Promise.resolve().then(()=>{Si._tickCounter++,Si._tickCounterScheduled=!1}))}};function rK(e,t,...r){console[e](`[${t}]`,...r)}function iK(...e){return ej(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}z._loggers=new Map,z._tickCounter=0,z._tickCounterScheduled=!1,z._throttlingDisabled=!1;function nK(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,i)=>i===""?"$":(Mb(i,t)??"").toString())}let tj=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&nK(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},N=class rj extends tj{constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return k(r)}catch{return"[object]"}}))}}catch(t){throw z.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new rj(t.name,t.message,t.details)}};N.prototype.type="error";const TC=new WeakMap;function sK(e,t,r=!1){const i=`🛑 DEPRECATED - ${t}`;if(!r)return void e.warn(i);let n=TC.get(e);n||(n=new Set,TC.set(e,n)),n.has(t)||(n.add(t),e.warn(i))}function ij(e,t,r={}){if(R("esri-deprecation-warnings")){const{moduleName:i}=r;Ec(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function oK(e,t,r={}){if(R("esri-deprecation-warnings")){const{moduleName:i}=r;Ec(e,`Property: ${(i?i+"::":"")+t}`,r)}}function aK(e,t,r={}){R("esri-deprecation-warnings")&&Ec(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function Ec(e,t,r={}){if(R("esri-deprecation-warnings")){const{replacement:i,version:n,see:s,warnOnce:o}=r;let a=t;i&&(a+=`
	🛠️ Replacement: ${i}`),n&&(a+=`
	⚙️ Version: ${n}`),s&&(a+=`
	🔗 See ${s} for more details.`),sK(e,a,o)}}function P$e(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function lK(e,t){for(const r of e)if(r!=null&&t(r))return r}function H1(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let Vy=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if(H1(t)){const i=this._getOrCreateGroup(r);for(const n of t)EC(n)&&i.push(n)}else EC(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach(i=>i.forEach(t));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(D0(t))}remove(t){if(typeof t!="string"&&H1(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(MC(this._getGroup(t)),this._groups.delete(D0(t)),this):this}removeAll(){return this._groups.forEach(MC),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(D0(t),r),r}_getGroup(t){return this._groups.get(D0(t))}};function D0(e){return e||"_default_"}function MC(e){for(const t of e)t instanceof Vy?t.removeAll():t.remove()}function EC(e){return e!=null&&(!!e.remove||e instanceof Vy)}function nj(e,t){if(e==null)throw new Error(t??"value is None")}function nt(e){return e==null||e.destroy(),null}function A$e(e){return e==null||e.dispose(),null}function pt(e){return e==null||e.remove(),null}function oy(e){return e==null||e.abort(),null}function R$e(e){return e==null||e.release(),null}function uK(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function cK(e,t){let r;return e.some((i,n)=>(r=t(i,n),r!=null)),r??void 0}const sj=Symbol("Accessor-beforeDestroy"),dK={remove:()=>{}};function De(e){return e?{remove(){e&&(e(),e=void 0)}}:dK}function pK(e){e.forEach(t=>t==null?void 0:t.remove())}function Uy(e){return De(()=>pK(e))}function Yr(e){return e.__accessor__??null}function hK(e,t){var r;return((r=e==null?void 0:e.metadata)==null?void 0:r[t])!=null}function Xg(e,t,r){return r?W1(e,t,{policy:r,path:""}):W1(e,t,null)}function W1(e,t,r){return t?Object.keys(t).reduce((i,n)=>{const s=n;let o=null,a="merge";if(r&&(o=r.path?`${r.path}.${n}`:n,a=r.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(i[s]))return i[s]=t[s],i;if(i[s]===void 0)return i[s]=k(t[s]),i;let u=i[s],c=t[s];if(u===c)return i;if(Array.isArray(c)||Array.isArray(i))u=u?Array.isArray(u)?i[s]=u.concat():i[s]=[u]:i[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(h=>{u.includes(h)||u.push(h)}));else if(c&&typeof c=="object")if(r){const h=r.path;r.path=o,i[s]=W1(u,c,r),r.path=h}else i[s]=W1(u,c,null);else i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[s]=c);return i},e||{}):e}function oj(e){return Array.isArray(e)?e:e.split(".")}function IC(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function fK(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...IC(r));return t}return IC(e)}function aj(e,t,r,i){const n=fK(t);if(n.length!==1){const s=n.map(o=>i(e,o,r));return Uy(s)}return i(e,n[0],r)}function lj(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const i=Yr(t);return hK(i,r)?i.get(r):t[r]}function uj(e,t,r){if(e==null)return e;const i=lj(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:uj(i,t,r+1)}function Gy(e,t,r=0){return typeof t!="string"||t.includes(".")?uj(e,oj(t),r):lj(t,e)}function Yn(e,t){return Gy(e,t)}function kC(e,t){return Gy(t,e)!==void 0}var ai;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(ai||(ai={}));function qy(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=k(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function Eb(e,t){const r=qy(e);let i=r[t];return i||(i=r[t]={}),i}function mK(e,t){return Xg(e,t,gK)}const yK=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function gK(e){return yK.test(e)?"replace":"merge"}function vK(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function wK(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let Hc=class q${constructor(t,r,i,n=1,s=0){if(this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s,this._ctor)for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let r;if(q$.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let n=0;n<i;n++)this._pool[n]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):wK(r)&&r.acquire(...t),r}release(t){t&&!q$.test.disabled&&(this._releaseFunction?this._releaseFunction(t):vK(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Hc.test={disabled:!1};let bK=class{constructor(t,r){this._observers=t,this._observer=r}remove(){BJ(this._observers,this._observer)}},cj=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return _K;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,n=!1;const s=r.length;for(let o=0;o<s;++o){const a=r[o];if(a.destroyed)n=!0;else if(a===t){i=!0;break}}return i||(r.push(t),n&&this._removeDestroyedObservers()),new bK(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let n=0;n<r;++n){for(;n+i<r&&t[n+i].destroyed;)++i;if(i>0){if(!(n+i<r))break;t[n]=t[n+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const _K=De();var xe;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(xe||(xe={}));const B$=xe.USER+1;function ul(e){switch(e){case"defaults":return xe.DEFAULTS;case"service":return xe.SERVICE;case"portal-item":return xe.PORTAL_ITEM;case"web-scene":return xe.WEB_SCENE;case"web-map":return xe.WEB_MAP;case"link-chart":return xe.LINK_CHART;case"user":return xe.USER;default:return null}}function Z1(e){switch(e){case xe.DEFAULTS:return"defaults";case xe.SERVICE:return"service";case xe.PORTAL_ITEM:return"portal-item";case xe.WEB_SCENE:return"web-scene";case xe.WEB_MAP:return"web-map";case xe.LINK_CHART:return"link-chart";case xe.USER:return"user"}}function SK(e){return Z1(e)}var ze;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(ze||(ze={}));const J1={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},mf=[];let bm=J1;function ae(e){bm.onObservableAccessed(e)}let ev=!1,tv=!1;function Jo(e,t,r){if(ev)return gI(e,t,r);dj(e);const i=t.call(r);return pj(),i}function $K(e,t){return Jo(J1,e,t)}function gI(e,t,r){const i=ev;ev=!0,dj(e);let n=null;try{n=t.call(r)}catch(s){tv&&z.getLogger("esri.core.accessorSupport.tracking").error(s)}return pj(),ev=i,n}function dj(e){bm=e,mf.push(e)}function pj(){const e=mf.length;if(e>1){const t=mf.pop();bm=mf[e-2],t.onTrackingEnd()}else if(e===1){const t=mf.pop();bm=J1,t.onTrackingEnd()}else bm=J1}function hj(e,t){if(t.flags&ze.DepTrackingInitialized)return;const r=tv;tv=!1,t.flags&ze.AutoTracked?gI(t,t.metadata.get,e):fj(e,t),tv=r}const xK=[];function fj(e,t){t.flags&ze.ExplicitlyTracking||(t.flags|=ze.ExplicitlyTracking,gI(t,()=>{const r=t.metadata.dependsOn||xK;for(const i of r)if(typeof i!="string"||i.includes(".")){const n=oj(i);for(let s=0,o=e;s<n.length&&o!=null&&typeof o=="object";++s)o=OC(o,n[s],s!==n.length-1)}else OC(e,i,!1)}),t.flags&=~ze.ExplicitlyTracking)}function OC(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const n=Yr(e);if(n){const s=n.propertiesByName.get(i);s&&(ae(s),hj(e,s))}return r?e[i]:void 0}let PC=class extends cj{constructor(t,r){super(),this.propertyName=t,this.metadata=r,this._accessed=null,this._handles=null,this.flags=0,this.flags=ze.Dirty|(r.nonNullable?ze.NonNullable:0)|(r.hasOwnProperty("value")?ze.HasDefaultValue:0)|(r.get===void 0?ze.DepTrackingInitialized:0)|(r.dependsOn===void 0?ze.AutoTracked:0)}destroy(){this.flags&ze.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(t){ae(this);const r=t.store,i=this.propertyName,n=this.flags,s=r.get(i);if(n&ze.Computing||~n&ze.Dirty&&r.has(i))return s;this.flags|=ze.Computing;const o=t.host;let a;n&ze.AutoTracked?a=Jo(this,this.metadata.get,o):(fj(o,this),a=this.metadata.get.call(o)),r.set(i,a,xe.COMPUTED);const u=r.get(i);return u===s?this.flags&=~ze.Dirty:$K(this.commit,this),this.flags&=~ze.Computing,u}onObservableAccessed(t){t!==this&&(this._accessed??(this._accessed=new Set),this._accessed.add(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=ze.DepTrackingInitialized,this._accessed!=null&&(this._handles??(this._handles=[]),this._accessed.forEach(t=>{this._handles.push(t.observe(this))}),this._accessed.clear())}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~ze.Dirty,this.onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}onInvalidated(){~this.flags&ze.Overridden&&(this.flags|=ze.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},TK=class mj{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new mj;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,k(i))}),r}get(t){return this._values.get(t)}originOf(){return xe.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function j0(e,t,r){return e!==void 0}function CC(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&ze.NonNullable)||(i.lifecycle,ai.INITIALIZING,!1))}let MK=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=ai.INITIALIZING,this.store=new TK,this._origin=xe.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const n=new PC(i,r[i]);this.propertiesByName.set(i,n)}this.metadata=r}initialize(){this.lifecycle=ai.CONSTRUCTING}constructed(){this.lifecycle=ai.CONSTRUCTED}destroy(){this.lifecycle=ai.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==ai.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(r.metadata.get)return r.getComputed(this);ae(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&ze.HasDefaultValue)return"defaults"}return Z1(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(j0(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);j0(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const n=this.propertiesByName.get(r);if(!j0(n))return"";const s=new Set,o=Jo({onObservableAccessed:u=>s.add(u),onTrackingEnd:()=>{}},()=>{var u;return(u=n.metadata.get)==null?void 0:u.call(t)});let a=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;if(s.size===0)return a;i+="  ";for(const u of s)u instanceof PC&&(a+=`${i}${u.propertyName}: undefined
`);return a}setAtOrigin(t,r,i){const n=this.propertiesByName.get(t);if(j0(n))return this._setAtOrigin(n,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&ze.Overridden)}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&ze.Overridden&&(r.flags&=~ze.Overridden,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!CC(i,t,r,this))return;const n=i.metadata.cast;if(n){const s=this._cast(n,r),{valid:o,value:a}=s;if(mS.release(s),!o)return;r=a}i.flags|=ze.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!CC(i,t,r,this))return;const n=i.metadata.cast;if(n){const o=this._cast(n,r),{valid:a,value:u}=o;if(mS.release(o),!a)return;r=u}const s=i.metadata.set;s?s.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=ul(t)}getDefaultOrigin(){return Z1(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==ai.INITIALIZING?this._origin:xe.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const n=this.store,s=t.propertyName;n.has(s,i)&&fI(r,n.get(s))&&~t.flags&ze.Overridden&&i===n.originOf(s)||(t.invalidate(),n.set(s,r,i),t.commit(),hj(this.host,t))}_cast(t,r){const i=mS.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},EK=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const mS=new Hc(EK);function K1(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))K1(e,i,t[i]);else{if(t.includes(".")){const n=t.split("."),s=n.splice(-1,1)[0];return void K1(Yn(e,n),s,r)}const i=e.__accessor__;i!=null&&IK(t,i),e[t]=r}}function IK(e,t){if(R("esri-unknown-property-errors")&&!kK(e,t))throw new N("set:unknown-property",OK(e,t))}function kK(e,t){return t.metadata[e]!=null}function OK(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let PK;function CK(){return PK}var AC;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(AC||(AC={}));function AK(e){e.length=0}let Hr=class{constructor(t=50,r=50){this._pool=new Hc(Array,void 0,AK,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return yS.acquire()}static release(t){return yS.release(t)}static prune(){yS.prune()}};const yS=new Hr(100);let yj=class extends Hc{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const z0=[];function Y1(e){z0.push(e),z0.length===1&&queueMicrotask(()=>{const t=z0.slice();z0.length=0;for(const r of t)r()})}let gj=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}record(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var H$;(function(e){const t=(s,o,a,u)=>{let c=o,h=o;const f=a>>>1,m=s[c-1];for(;h<=f;){h=c<<1,h<a&&u(s[h-1],s[h])<0&&++h;const y=s[h-1];if(u(y,m)<=0)break;s[c-1]=y,c=h}s[c-1]=m},r=(s,o)=>s<o?-1:s>o?1:0;function i(s,o,a,u){o===void 0&&(o=0),a===void 0&&(a=s.length),u===void 0&&(u=r);for(let h=a>>>1;h>o;h--)t(s,h,a,u);const c=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,c,h,u)}}function*n(s,o,a,u){o===void 0&&(o=0),a===void 0&&(a=s.length),u===void 0&&(u=r);for(let h=a>>>1;h>o;h--)t(s,h,a,u),yield;const c=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,c,h,u),yield}}e.sort=i,e.iterableSort=n})(H$||(H$={}));const RC=H$,RK=1.5,LK=1.1;let Q1=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new DD,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>LC(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const n=this.data[i];t(n)&&r.push(n)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,LC(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=U$(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(U$(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=qJ(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){RC.sort(this.data,0,this.length,t)}iterableSort(t){return RC.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){for(let i=0;i<this.length;++i){const n=this.data[i];if(t.call(r,n,i))return n}}filterInPlace(t,r){let i=0;for(let n=0;n<this._length;++n){const s=this.data[n];t.call(r,s,n,this.data)&&(this.data[n]=this.data[i],this.data[i]=s,i++)}if(this._deallocator)for(let n=i;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:n}=this;for(let s=0;s<n;++s)t.call(r,i[s],s,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let n=0;n<this.length;++n)i[n]=t.call(r,this.data[n],n,this.data);return i}reduce(t,r){let i=r;for(let n=0;n<this.length;++n)i=t(i,this.data[n],n,this.data);return i}has(t){const r=this.length,i=this.data;for(let n=0;n<r;++n)if(i[n]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function LC(e){e.data.length>RK*e.length&&(e.data.length=Math.floor(e.length*LK))}function NK(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return De(()=>e.clearTimeout(i))}}}const ch=NK(globalThis);function Ib(e){return FK(e)||vj(e)}function FK(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function vj(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function By(e,t,r){if(!Ib(e))throw new TypeError("target is not a Evented or EventTarget object");return vj(e)?DK(e,t,r):e.on(t,r)}function DK(e,t,r,i){if(Array.isArray(t)){const n=t.slice();for(const s of n)e.addEventListener(s,r,i);return De(()=>{for(const s of n)e.removeEventListener(s,r,i)})}return e.addEventListener(t,r,i),De(()=>e.removeEventListener(t,r,i))}function wj(e,t,r){if(!Ib(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=By(e,t,n=>{i.remove(),r.call(e,n)});return i}function Ot(e="Aborted"){return new N("AbortError",e)}function ht(e,t="Aborted"){if(Ko(e))throw Ot(t)}function kb(e){return e instanceof AbortSignal?e:e==null?void 0:e.signal}function Ko(e){const t=kb(e);return t!=null&&t.aborted}function As(e){if(bi(e))throw e}function NC(e){if(!bi(e))throw e}function yn(e,t){const r=kb(e);if(r!=null){if(!r.aborted)return wj(r,"abort",()=>t());t()}}function vI(e,t){const r=kb(e);if(r!=null)return ht(r),wj(r,"abort",()=>t(Ot()))}function bj(e,t){return kb(t)==null?e:new Promise((r,i)=>{let n=yn(t,()=>i(Ot()));const s=()=>{n=pt(n)};e.then(s,s),e.then(r,i)})}function bi(e){return(e==null?void 0:e.name)==="AbortError"}async function W$(e){try{return await e}catch(t){if(!bi(t))throw t;return}}async function wI(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map(o=>e[o]),n=await wI(i),s={};return r.map((o,a)=>s[o]=n[a]),s}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(i,n)=>{const s=r[n];return s.status==="fulfilled"?{promise:i,value:s.value}:{promise:i,error:s.reason}}))}async function jK(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function q$e(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function _j(e,t=void 0,r){const i=new AbortController;return yn(r,()=>i.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(t)},e);yn(i,()=>{o&&(clearTimeout(o),s(Ot()))})})}function zK(e,t){const r=new AbortController,i=setTimeout(()=>r.abort(),t);return yn(e,()=>{r.abort(),clearTimeout(i)}),{...e,signal:r.signal}}function Vl(e){return e&&typeof e.then=="function"}function FC(e){return Vl(e)?e:Promise.resolve(e)}function bI(e,t=-1){let r,i,n,s,o=null;const a=(...u)=>{if(r){i=u,s&&s.reject(Ot()),s=ji();const m=s.promise;if(o){const y=o;o=null,y.abort()}return m}if(n=s||ji(),s=null,t>0){const m=new AbortController;r=FC(e(...u,m.signal));const y=r;_j(t).then(()=>{r===y&&(s?m.abort():o=m)})}else r=1,r=FC(e(...u));const c=()=>{const m=i;i=n=r=o=null,m!=null&&a(...m)},h=r,f=n;return h.then(c,c),h.then(f.resolve,f.reject),f.promise};return a}function ji(){let e,t;const r=new Promise((n,s)=>{e=n,t=s}),i=n=>{e(n)};return i.resolve=n=>e(n),i.reject=n=>t(n),i.timeout=(n,s)=>ch.setTimeout(()=>i.reject(s),n),i.promise=r,i}async function DC(e){await Promise.resolve(),ht(e)}function B$e(e){return e}function VK(e){return 1e3*e}function H$e(e){return e}let UK=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},GK=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},Z$=0;const Gh={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},J$=["prepare","preRender","render","postRender","update","finish"],K$=[],Ic=new Q1;let qK=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function BK(){dc!=null&&(cancelAnimationFrame(dc),dc=requestAnimationFrame(_I))}const X1={frameTasks:Ic,willDispatch:!1,clearFrameTasks:HK,dispatch:$j,executeFrameTasks:WK,reschedule:BK};function dh(e){const t=new GK(e);return K$.push(t),X1.willDispatch||(X1.willDispatch=!0,Y1($j)),t}function Zp(e){const t=new UK(e);return Ic.push(t),dc==null&&(Z$=performance.now(),dc=requestAnimationFrame(_I)),new qK(t)}let dc=null;function HK(e=!1){Ic.forAll(t=>{t.removed=!0}),e&&Sj()}function _I(){const e=performance.now();dc=null,dc=Ic.length>0?requestAnimationFrame(_I):null,X1.executeFrameTasks(e)}function WK(e){const t=e-Z$;Z$=e;const r=1e3/60,i=Math.max(0,t-r);Gh.time=e,Gh.frameDuration=r-i;for(let n=0;n<J$.length;n++){const s=performance.now(),o=J$[n];Ic.forAll(a=>{var u;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(Gh.elapsedFrameTime=performance.now()-e,Gh.deltaTime=a.ticks===0?0:t,(u=a.phases[o])==null||u.call(a,Gh)))}),ZK[n].record(performance.now()-s)}Sj(),JK.record(performance.now()-e)}const V0=new Q1;function Sj(){Ic.forAll(e=>{e.removed&&V0.push(e)}),Ic.removeUnorderedMany(V0.data,V0.length),V0.clear()}function $j(){for(;K$.length;){const e=K$.shift();e.isActive&&e.callback()}X1.willDispatch=!1}function K$e(e=1,t){const r=ji(),i=()=>{Ko(t)?r.reject(Ot()):e===0?r():(--e,Y1(()=>i()))};return i(),r.promise}const ZK=J$.map(e=>new gj(e)),JK=new gj("total");function KK(e,t){for(const r of e.entries())if(t(r[0]))return!0;return!1}function ew(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function jC(e,t){return t!=null&&e.add(t),e}function xj(e,t){const r=new Set;return ew(r,e),ew(r,t),r}function YK(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function Y$e(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function Q$e(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function QK(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}function XK(e,t){return QK(xj(e,t),YK(e,t))}let eY=0;function _m(){return++eY}let Ob=class{constructor(t){this._accessed=new Set,this._handles=[],this._observerObject=new tY(t),zC.register(this,new WeakRef(this._observerObject),this)}destroy(){var t;zC.unregister(this._observerObject),this._accessed.clear(),(t=this._observerObject)==null||t.destroy(),this.clear()}onObservableAccessed(t){this._accessed.add(t)}onTrackingEnd(){const t=this._handles,r=this._observerObject;this._accessed.forEach(i=>{t.push(i.observe(r))}),this._accessed.clear()}clear(){const t=this._handles;for(let r=0;r<t.length;++r)t[r].remove();t.length=0}},tY=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=rY}};const zC=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function rY(){}let $p=!1;const tw=[];function Tj(e,t){let r=new Ob(s),i=null,n=!1;function s(){if(!r||n)return;if($p)return void Ij(s);const a=i;r.clear(),$p=!0,n=!0,i=Jo(r,e),n=!1,$p=!1,t(i,a),kj()}function o(){r&&(r.destroy(),r=null,i=null)}return n=!0,i=Jo(r,e),n=!1,De(o)}function Mj(e,t){let r=new Ob(n),i=null;function n(){t(i,o)}function s(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=Jo(r,e),i):null}return o(),De(s)}function Ej(e){let t=new Ob(i),r=!1;function i(){t&&!r&&($p?Ij(i):(t.clear(),$p=!0,r=!0,Jo(t,e),r=!1,$p=!1,kj()))}function n(){t&&(t.destroy(),t=null)}return r=!0,Jo(t,e),r=!1,De(n)}function Ij(e){tw.includes(e)||tw.unshift(e)}function kj(){for(;tw.length;)tw.pop()()}var Sm;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(Sm||(Sm={}));let ay=class{constructor(){this.uid=_m(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,n,s){return this.pool.acquire(Sm.Untracked,t,r,i,n,s,fI)}static acquireTracked(t,r,i,n){return this.pool.acquire(Sm.Tracked,t,r,i,null,null,n)}notify(t,r){this.type===Sm.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,n,s,o,a){this.uid=_m(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=_m(),this.removed=!0}};ay.pool=new yj(ay);const rv=new Hr,Uo=new Set;let rw;function iw(e){Uo.delete(e),Uo.add(e),rw||(rw=dh(sY))}function iY(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function nY(e){for(const t of Uo.values())t.target===e&&(t.removed=!0)}function sY(){let e=10;for(;rw&&e--;){rw=null;const t=oY(),r=rv.acquire();for(const i of t){const n=i.uid;iY(i),n===i.uid&&i.removed&&r.push(i)}for(const i of Uo)i.removed&&(r.push(i),Uo.delete(i));for(const i of r)ay.pool.release(i);rv.release(r),rv.release(t),Y$.forEach(i=>i())}}function oY(){const e=rv.acquire();e.length=Uo.size;let t=0;for(const r of Uo)e[t]=r,++t;return Uo.clear(),e}const Y$=new Set;function aY(e){return Y$.add(e),De(()=>Y$.delete(e))}function lY(e,t,r){let i=aj(e,t,r,(n,s,o)=>{let a,u,c=Mj(()=>Gy(n,s),(h,f)=>{var m;((m=n.__accessor__)==null?void 0:m.lifecycle)===ai.DESTROYED||a&&a.uid!==u?i.remove():(a||(a=ay.acquireUntracked(h,o,f,n,s),u=a.uid),iw(a))});return De(()=>{c.remove(),a&&(a.uid!==u||a.removed||(a.removed=!0,iw(a)),a=null),i=c=null})});return i}function uY(e,t,r){const i=aj(e,t,r,(n,s,o)=>{let a=!1;return Tj(()=>Gy(n,s),(u,c)=>{n.__accessor__.lifecycle!==ai.DESTROYED?a||(a=!0,fI(c,u)||o.call(n,u,c,s,n),a=!1):i.remove()})});return i}function cY(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==ai.DESTROYED?i?uY(e,t,r):lY(e,t,r):De()}function dY(e,t,r){let i,n,s=Mj(e,(o,a)=>{i&&i.uid!==n?s.remove():(i||(i=ay.acquireTracked(o,t,a,r),n=i.uid),iw(i))});return De(()=>{s.remove(),i&&(i.uid!==n||i.removed||(i.removed=!0,iw(i)),i=null),s=null})}function pY(e,t,r){let i=!1;return Tj(e,(n,s)=>{i||(i=!0,r(s,n)||t(n,s),i=!1)})}function hY(e,t,r=!1,i=YD){return r?pY(e,t,i):dY(e,t,i)}function VC(e){return KK(Uo,t=>t.oldValue===e)}function Pb(e,t){for(const[r,i]of e)if(t(i,r))return!0;return!1}function SI(e,t,r){const i=e.get(t);if(i!==void 0)return i;const n=r();return e.set(t,n),n}function rxe(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const xp=()=>z.getLogger("esri.core.accessorSupport.ensureTypes");function fY(e){return e==null?e:new Date(e)}function mY(e){return e==null?e:!!e}function Hy(e){return e==null?e:e.toString()}function ln(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function $I(e){return e==null?e:Math.round(parseFloat(e))}function yY(e){return null}function Oj(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function nw(e,t){return t!=null&&e&&!(t instanceof e)}function Pj(e){return e&&"isCollection"in e}function UC(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function gY(e,t){if(!(t!=null&&t.constructor)||!Pj(t.constructor))return Q$(e,t)?t:new e(t);const r=UC(e.prototype.itemType),i=UC(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(Q$(e,t),t):new e(t):t}function Q$(e,t){return!!Oj(t)&&(xp().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Ab(e)+"'"),!0)}function Cb(e,t){return t==null?t:Pj(e)?gY(e,t):nw(e,t)?Q$(e,t)?t:new e(t):t}function Ab(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const vY=new WeakMap;function wY(e){switch(e){case Number:return ln;case Ve:return $I;case Boolean:return mY;case String:return Hy;case Date:return fY;case Rb:return yY;default:return SI(vY,e,()=>Cb.bind(null,e))}}function Pt(e,t){const r=wY(e);return arguments.length===1?r:r(t)}function ly(e,t,r){return arguments.length===1?ly.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function bY(e,t){return arguments.length===1?ly(r=>Pt(e,r)):ly(r=>Pt(e,r),t)}function Cj(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>Cj(e,t-1,i)):e(r)}function sw(e,t,r){if(arguments.length===2)return s=>sw(e,t,s);if(!r)return r;r=Cj(e,t,r);let i=t,n=r;for(;i>0&&Array.isArray(n);)i--,n=n[0];if(n!==void 0)for(let s=0;s<i;s++)r=[r];return r}function _Y(e,t,r){return arguments.length===2?sw(i=>Pt(e,i),t):sw(i=>Pt(e,i),t,r)}function Aj(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function X$(e,t){if(arguments.length===2)return X$(e).call(null,t);const r=new Set,i=e.filter(a=>typeof a!="function"),n=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let s=null,o=null;return(a,u)=>{if(a==null)return a;const c=typeof a,h=c==="string"||c==="number";return h&&(r.has(a)||n.some(f=>c==="string"&&f===String||c==="number"&&f===Number))||c==="object"&&n.some(f=>!nw(a,f))?a:(h&&i.length?(s||(s=i.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),xp().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(f=>Ab(f)).join(", ")),xp().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):xp().error("Accessor#set",`'${a}' is not a valid value for this property`),u&&(u.valid=!1),null)}}function Us(e,t){if(arguments.length===2)return Us(e).call(null,t);const r={},i=[],n=[];for(const u in e.typeMap){const c=e.typeMap[u];r[u]=Pt(c),i.push(Ab(c)),n.push(u)}const s=()=>`'${i.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof e.key=="string"?u=>u[e.key]:e.key;return u=>{if(e.base&&!nw(e.base,u)||u==null)return u;const c=a(u)||e.defaultKeyValue,h=r[c];if(!h)return xp().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!nw(e.typeMap[c],u))return u;if(typeof e.key=="string"&&!Oj(u)){const f={};for(const m in u)m!==e.key&&(f[m]=u[m]);return h(f)}return h(u)}}let Ve=class{},Rb=class{};const sxe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function SY(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function Rj(e){switch(e.type){case"native":return Pt(e.value);case"array":return ly(Rj(e.value));case"one-of":return $Y(e);default:return null}}function $Y(e){let t=null;return(r,i)=>tx(r,e)?r:(t==null&&(t=ex(e)),xp().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function ex(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ve:return"integer";case Date:return"date";case Rb:return"null";default:return Ab(e.value)}case"array":return`array of ${ex(e.value)}`;case"one-of":{const t=e.values.map(r=>ex(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function tx(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Ve:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case Rb:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!tx(r,t.value));case"one-of":return t.values.some(r=>tx(e,r))}}function d(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),n=Eb(t,r);i&&(i.get||i.set?(n.get=i.get||n.get,n.set=i.set||n.set):"value"in i&&("value"in e&&z.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=i.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const s=e.aliasOf;if(s){const u=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let h;n.dependsOn=[u],n.get=function(){let f=Yn(this,u);if(typeof f=="function"){h||(h=u.split(".").slice(0,-1).join("."));const m=Yn(this,h);m&&(f=f.bind(m))}return f},n.readOnly||(n.set=c?function(f){this._override(r,f)}:function(f){K1(this,u,f)})}const o=e.type,a=e.types;n.cast||(o?n.cast=xY(o):a&&(Array.isArray(a)?n.cast=ly(Us(a[0])):n.cast=Us(a))),mK(n,e),e.range&&(n.cast=TY(n.cast,e.range))}}function Lj(e,t,r){const i=Eb(e,r);i.json||(i.json={});let n=i.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function xY(e){let t=0,r=e;if(SY(e))return Rj(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(Aj(i))return t===0?X$(i):sw(X$(i),t);if(t===1)return bY(i);if(t>1)return _Y(i,t);const n=e;return n.from?n.from:Pt(n)}function TY(e,t){return r=>{let i=+e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function MY(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const n=t[i];r[i].forEach(s=>{t[s]=n}),delete t[i]}}}let Sn=class extends tj{constructor(t,r,i){super(t,r,i)}};Sn.prototype.type="warning";function Nj(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const rx=()=>z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function GC(e,t,r){var i,n;e&&(!r&&!t.read||(i=t.read)!=null&&i.reader||((n=t.read)==null?void 0:n.enabled)===!1||kY(e)&&Cr("read.reader",ph(e),t))}function ph(e){var r,i;const t=e.ndimArray??0;if(t>1)return IY(e);if(t===1)return qC(e);if("type"in e&&Dj(e.type)){const n=(i=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:i.Type,s=qC(typeof n=="function"?{type:n}:{types:n});return(o,a,u)=>{const c=s(o,a,u);return c&&new e.type(c)}}return xI(e)}function xI(e){return"type"in e?EY(e.type):OY(e.types)}function EY(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void rx().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const s=new e;return s.read(t,i),s}:e.fromJSON}function Fj(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(n=>Fj(e,n,r,i-1)):e(t,void 0,r)}function IY(e){const t=xI(e),r=Fj.bind(null,t),i=e.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=r(n,o,i);let a=i,u=n;for(;a>0&&Array.isArray(u);)a--,u=u[0];if(u!==void 0)for(let c=0;c<a;c++)n=[n];return n}}function qC(e){const t=xI(e);return(r,i,n)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const u=t(a,void 0,n);u!==void 0&&o.push(u)}return o}const s=t(r,void 0,n);return s!==void 0?[s]:void 0}}function Dj(e){if(!Nj(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?TI(t.Type):jj(t.Type))}function kY(e){return"types"in e?jj(e.types):TI(e.type)}function TI(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||Dj(e))}function jj(e){for(const t in e.typeMap)if(!TI(e.typeMap[t]))return!1;return!0}function OY(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void rx().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=PY(e));const u=e.key;if(typeof u!="string")return;const c=n[u],h=c?t[c]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const m=`Type '${c||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new Sn(`${r}:unsupported`,m,{definition:n,context:o})),void rx().error(m)}const f=new h;return f.read(n,o),i?i(f):f}}function PY(e){var r,i;const t={};for(const n in e.typeMap){const s=e.typeMap[n],o=qy(s.prototype);if(typeof e.key=="function")continue;const a=o[e.key];if(!a)continue;if((r=a.json)!=null&&r.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){t[a.json.type[0]]=s;continue}const u=(i=a.json)==null?void 0:i.write;if(!(u!=null&&u.writer)){t[n]=s;continue}const c=u.target,h=typeof c=="string"?c:e.key,f={};u.writer(n,f,h),f[h]&&(t[f[h]]=s)}return t}function CY(e){if(e.json||(e.json={}),HC(e.json),WC(e.json),BC(e.json),e.json.origins)for(const t in e.json.origins)HC(e.json.origins[t]),WC(e.json.origins[t]),BC(e.json.origins[t]);return!0}function BC(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function HC(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function WC(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function ZC(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&Nj(e.type))?t.write.writer=LY:r>1?t.write.writer=NY(r):t.types?Array.isArray(t.types)?t.write.writer=RY(t.types[0]):t.write.writer=AY(t.types):t.write.writer=uy}function AY(e){return(t,r,i,n)=>t?zj(t,e,n)?uy(t,r,i,n):void 0:uy(t,r,i,n)}function zj(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r!=null&&r.messages){const i=t.errorContext??"type",n=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new N(`${i}:unsupported`,n,{definition:e,context:r})),z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function RY(e){return(t,r,i,n)=>!t||!Array.isArray(t)?uy(t,r,i,n):uy(t.filter(s=>zj(s,e,n)),r,i,n)}function uy(e,t,r,i){Cr(r,ow(e,i),t)}function ow(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?aw(e):e}function aw(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function LY(e,t,r,i){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(s=>ow(s,i)),typeof n.toArray=="function"&&(n=n.toArray())):n=[ow(e,i)],Cr(r,n,t)}function Vj(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>Vj(i,t,r-1)):ow(e,t)}function NY(e){return(t,r,i,n)=>{let s;if(t===null)s=null;else{s=Vj(t,n,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let u=0;u<o;u++)s=[s]}Cr(i,s,r)}}function FY(e,t){return MI(e,"any",t==null?void 0:t.origin)}function ix(e,t){return MI(e,"read",t==null?void 0:t.origin)}function Uj(e,t){return MI(e,"write",t==null?void 0:t.origin)}function MI(e,t,r){let i=e==null?void 0:e.json;if(i!=null&&i.origins&&r){let n;n=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],n&&(t==="any"||t in n)&&(i=n)}return i}function DY(e){var r;const t=jY(e);if(e.json.origins)for(const i in e.json.origins){const n=e.json.origins[i],s=n.types?zY(n):t;GC(s,n,!1),n.types&&!n.write&&((r=e.json.write)!=null&&r.enabled)&&(n.write={...e.json.write}),ZC(s,n)}GC(t,e.json,!0),ZC(t,e.json)}function jY(e){return e.json.types?nx(e.json):e.type?Gj(e):nx(e)}function zY(e){return e.type?Gj(e):nx(e)}function Gj(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!Aj(r);)r=r[0],t++;return{type:r,ndimArray:t}}function nx(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function VY(e){CY(e)&&(MY(e),DY(e))}const gS=new Set,vS=new Set;function x(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,GY(t);const r=[],i=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!gS.has(n.initialize)&&(gS.add(n.initialize),r.push(n.initialize)),n.hasOwnProperty("destroy")&&!vS.has(n.destroy)&&(vS.add(n.destroy),i.push(n.destroy)),n=Object.getPrototypeOf(n);gS.clear(),vS.clear();const s=class extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let u=r.length-1;u>=0;u--)r[u].call(this)}}),i.length){let u=!1;const c=this[sj];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!u){u=!0,c.call(this);for(let h=0;h<i.length;h++)i[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=qy(t.prototype),s.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function UY(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;ae(i);const n=r.store;return n.has(e)?n.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function GY(e){const t=e.prototype,r=qy(t),i={};for(const n of Object.getOwnPropertyNames(r)){const s=r[n];VY(s),i[n]={enumerable:!0,configurable:!0,get:UY(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this))return a.initialized&&s.readOnly?JC("read-only",n):a.lifecycle===ai.CONSTRUCTED&&s.constructOnly?JC("construct-only",n):void a.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}const JC=(e,t)=>{z.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var qj,Bj;function qY(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const ps=Symbol("Accessor-Handles"),sx=Symbol("Accessor-Initialized");let le=class Hj{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...u){super(...u),this.inherited=null,n&&n.apply(this,u)}}qy(o.prototype);for(const a in t){const u=t[a];o.prototype[a]=typeof u=="function"?function(...c){const h=this.inherited;let f;this.inherited=function(...m){if(s.prototype[a])return s.prototype[a].apply(this,m)};try{f=u.apply(this,c)}catch(m){throw this.inherited=h,m}return this.inherited=h,f}:t[a]}for(const a in r){const u=qY(r[a]);d(u)(o.prototype,a)}return x(i)(o)}constructor(...t){var i;if(this[qj]=null,this[Bj]=!1,this.constructor===Hj)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new MK(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=((i=this.normalizeCtorArgs)==null?void 0:i.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[sx]=!0}initialize(){}[sj](){this[ps]=nt(this[ps])}destroy(){var t;this.destroyed||(nY(this),this.__accessor__.destroy(),(t=CK())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[sx]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===ai.DESTROYED||!1}commitProperty(t){Yn(this,t)}get(t){return ij(z.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Yn(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return K1(this,t,r),this}watch(t,r,i){return cY(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const n of i)n.remove();return}(this[ps]??(this[ps]=new Vy)).add(t,r)}removeHandles(t){var r;(r=this[ps])==null||r.remove(t)}removeAllHandles(){var t;(t=this[ps])==null||t.removeAll()}removeHandlesReference(t){var r;(r=this[ps])==null||r.removeReference(t)}hasHandles(t){var r;return((r=this[ps])==null?void 0:r.has(t))===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};qj=ps,Bj=sx;let BY=class Wj{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new Wj;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,k(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??xe.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(i=>{var n;return((n=this._values.get(i))==null?void 0:n.origin)===t})}set(t,r,i){if((i=this._normalizeOrigin(i))===xe.DEFAULTS){const n=this._values.get(t);if((n==null?void 0:n.origin)!=null&&n.origin>i)return}this._values.set(t,new HY(r,i))}delete(t,r){var i;(r=this._normalizeOrigin(r))!=null&&((i=this._values.get(t))==null?void 0:i.origin)!==r||this._values.delete(t)}has(t,r){var i;return(r=this._normalizeOrigin(r))!=null?((i=this._values.get(t))==null?void 0:i.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(t!=null)return t===xe.DEFAULTS?t:xe.USER}},HY=class{constructor(t,r){this.value=t,this.origin=r}};function Zj(e,t,r){t.keys().forEach(n=>{r.set(n,t.get(n),xe.DEFAULTS)});const i=e.metadata;Object.keys(i).forEach(n=>{e.internalGet(n)&&r.set(n,e.internalGet(n),xe.DEFAULTS)})}function WY(e,t,r){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&kC(i,r))return!0}else for(const n of i)if(n===t||n.includes(".")&&n.indexOf(t)===0&&kC(n,r))return!0;return!1}function ZY(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function JY(e,t,r,i,n){let s=ix(t[r],n);ZY(s)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))s=ix(t[o],n),WY(s,r,i)&&(e[o]=!0)}function KY(e,t,r,i){const n=r.metadata,s=FY(n[t],i),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,i):o;a!==void 0&&r.set(t,a)}const Jj={origin:"service"};function Kj(e,t,r=Jj){if(!t||typeof t!="object")return;const i=Yr(e),n=i.metadata,s={};for(const o of Object.getOwnPropertyNames(t))JY(s,n,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(s)){const a=ix(n[o],r).read,u=a==null?void 0:a.source;let c;c=u&&typeof u=="string"?Gy(t,u):t[o],a!=null&&a.reader&&(c=a.reader.call(e,c,t,r)),c!==void 0&&i.set(o,c)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||KY(e,o,i,r)}i.setDefaultOrigin("user")}function YY(e,t,r,i=Jj){var s;const n={...i,messages:[]};r(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||e.loaded?i!=null&&i.messages&&i.messages.push(o):e.loadWarnings.push(o)})}function QY(e,t,r,i,n){var o,a;const s={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,i,s,r,n),s}function Yj(e,t,r,i,n,s){if(!(i!=null&&i.write))return!1;const o=Yn(e,r);if(!n&&i.write.overridePolicy){const a=i.write.overridePolicy.call(e,o,r,s??void 0);a!==void 0&&(n=a)}if(n||(n=i.write),!n||n.enabled===!1||n.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new N("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&z.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===xe.DEFAULTS)&&XY(e,r,s,i,o)||!n.ignoreOrigin&&(s!=null&&s.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<ul(s.origin))}function XY(e,t,r,i,n){const s=i.default;if(s===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(e,t,r??void 0);return $b(o,n)}return!1}return s===n}function eQ(e,t,r,i){const n=Yr(e),s=n.metadata,o=Uj(s[t],i);return!!o&&Yj(e,n,t,o,r,i)}function Qj(e,t,r){var s,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Xg(t,e.toJSON(r));const i=Yr(e),n=i.metadata;for(const a in n){const u=Uj(n[a],r);if(!Yj(e,i,a,u,void 0,r))continue;const c=Yn(e,a),h=QY(e,u,u.write&&typeof u.write.target=="string"?u.write.target:a,c,r);Object.keys(h).length>0&&(t=Xg(t,h),(o=(s=r==null?void 0:r.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>Xg(t,h,()=>"replace-arrays"))),r!=null&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:a,oldOrigin:SK(i.store.originOf(a)),newOrigin:r.origin}))}return t}const Wy=e=>{let t=class extends e{constructor(...r){super(...r);const i=Yr(this),n=i.store,s=new BY;i.store=s,Zj(i,n,s)}read(r,i){Kj(this,r,i)}write(r,i){return Qj(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return tQ.call(this,r,i)}};return t=l([x("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function tQ(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}function lw(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let j=class extends Wy(le){};j=l([x("esri.core.JSONSupport")],j);const rQ=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,iQ={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function KC(e){const t=e==null?void 0:e.match(rQ);if(!t)return null;const[,r,i,n]=t;if(!r)return null;let s=null,o=null,a=null;const{devext:u,qaext:c,www:h}=iQ;if(i)if(s=r,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=u);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=u);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function nQ(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function Xj(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function sQ(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function oQ(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const aQ=()=>z.getLogger("esri.core.urlUtils"),hh=Pe.request,YC="esri/config: esriConfig.request.proxyUrl is not set.",e6=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,t6=/^\s*http:/i,lQ=/^\s*https:/i,uQ=/^\s*file:/i,cQ=/:\d+$/,dQ=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,pQ=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),hQ=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Tp=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(pQ);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(hQ),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const U0={},fQ=new Tp(Pe.applicationUrl);let Ir=fQ;const mQ=yQ();let EI=mQ;const II=()=>Ir,cxe=()=>EI;function yQ(){const e=Ir.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${Ir.scheme}://${Ir.host}${Ir.port!=null?`:${Ir.port}`:""}`}${t}`}function Ar(e){if(!e)return null;const t={path:null,query:null},r=new Tp(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.substring(0,i),t.query=kI(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function kI(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const n=i.indexOf("=");let s,o;n<0?(s=decodeURIComponent(i),o=""):(s=decodeURIComponent(i.slice(0,n)),o=decodeURIComponent(i.slice(n+1)));let a=r[s];typeof a=="string"&&(a=r[s]=[a]),Array.isArray(a)?a.push(o):r[s]=o}return r}function cy(e,t){return e?Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const n=encodeURIComponent(r)+"=",s=t==null?void 0:t[r];return s?n+encodeURIComponent(s(i)):Array.isArray(i)?i.map(o=>lw(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):lw(i)?n+encodeURIComponent(JSON.stringify(i)):n+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function gQ(e=!1){let t,r=hh.proxyUrl;if(typeof e=="string"){t=$Q(e);const i=Lb(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw aQ().warn(YC),new N("urlUtils:proxy-not-set",YC);return t&&ax()&&(r=RI(r)),Ar(r)}function dxe(e){const t=Lb(e);let r,i;if(t){const n=OI(t.proxyUrl);r=n.path,i=n.query?kI(n.query):null}if(r){const n=Ar(e);e=r+"?"+n.path;const s=cy({...i,...n.query});s&&(e=`${e}?${s}`)}return e}const qh={path:"",query:""};function OI(e){const t=e.indexOf("?");return t!==-1?(qh.path=e.slice(0,t),qh.query=e.slice(t+1)):(qh.path=e,qh.query=null),qh}function r6(e){return e=(e=cw(e=kQ(e=OI(e).path),!0)).toLowerCase()}function vQ(e){const t={proxyUrl:e.proxyUrl,urlPrefix:r6(e.urlPrefix)},r=hh.proxyRules,i=t.urlPrefix;let n=r.length;for(let s=0;s<r.length;s++){const o=r[s].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;n=s;break}o.indexOf(i)===0&&(n=s+1)}return r.splice(n,0,t),n}function Lb(e){const t=hh.proxyRules,r=r6(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function wQ(e,t){if(!e||!t)return!1;e=uw(e),t=uw(t);const r=KC(e),i=KC(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&Jp(e,t,!0)}function i6(e,t){return e=uw(e),t=uw(t),cw(e)===cw(t)}function uw(e){const t=(e=Qn(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function ox(e,t=hh.interceptors){const r=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i);if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function Jp(e,t,r=!1){if(!e||!t)return!1;const i=ux(e),n=ux(t);return!(!r&&i.scheme!==n.scheme)&&i.host!=null&&n.host!=null&&i.host.toLowerCase()===n.host.toLowerCase()&&i.port===n.port}function PI(e){if(typeof e=="string"){if(!Li(e))return!0;e=ux(e)}if(Jp(e,Ir))return!0;const t=hh.trustedServers||[];for(let r=0;r<t.length;r++){const i=bQ(t[r]);for(let n=0;n<i.length;n++)if(Jp(e,i[n]))return!0}return!1}function bQ(e){return U0[e]||(AI(e)||Gs(e)?U0[e]=[new Tp(cn(e))]:U0[e]=[new Tp(`http://${e}`),new Tp(`https://${e}`)]),U0[e]}function cn(e,t=EI,r){return Gs(e)?r!=null&&r.preserveProtocolRelative?e:Ir.scheme==="http"&&Ir.authority===gn(e).slice(2)?`http:${e}`:`https:${e}`:AI(e)?e:Kp(e[0]==="/"?EQ(t):t,e)}function CI(e,t=EI,r){if(e==null||!Li(e))return e;const i=Qn(e),n=i.toLowerCase(),s=Qn(t).toLowerCase().replace(/\/+$/,""),o=r?Qn(r).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(f,m,y)=>(y=f.indexOf(m,y))===-1?f.length:y;let u=a(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,u+1)===s.slice(0,u)+"/"&&(c=u+1,u!==n.length);)u=a(n,"/",u+1);if(c===-1||o&&c<o.length)return e;e=i.slice(c);const h=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function Qn(e){return e=CQ(e=PQ(e=OQ(e=cn(e=e.trim()))))}function Kp(...e){const t=e.filter(Mc);if(!(t!=null&&t.length))return;const r=[];if(Li(t[0])){const n=t[0],s=n.indexOf("//");s!==-1&&(r.push(n.slice(0,s+1)),TQ(t[0])&&(r[0]+="/"),t[0]=n.slice(s+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<i.length;n++){const s=i[n];s===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!s&&n===i.length-1||s&&(s!=="."||r.length===0))&&r.push(s)}return r.join("/")}function gn(e,t=!1){if(e==null||Nb(e)||Wc(e))return null;let r=e.indexOf("://");if(r===-1&&Gs(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=cw(e,!0)),e}function Li(e){return Gs(e)||AI(e)}function Nb(e){return e!=null&&e.slice(0,5)==="blob:"}function Wc(e){return e!=null&&e.slice(0,5)==="data:"}function _Q(e){const t=dy(e);return t!=null&&t.isBase64?sQ(t.data):null}function pxe(e){return oQ(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const SQ=/^data:(.*?)(;base64)?,(.*)$/;function dy(e){const t=e.match(SQ);if(!t)return null;const[,r,i,n]=t;return{mediaType:r,isBase64:!!i,data:n}}function n6(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function hxe(e){return(await fetch(e)).blob()}function fxe(e){const t=_Q(e);if(!t)return null;const r=dy(e);return new Blob([t],{type:r.mediaType})}function Gs(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function AI(e){return e!=null&&e6.test(e)}function $Q(e){return e!=null&&lQ.test(e)||Ir.scheme==="https"&&Gs(e)}function xQ(e){return e!=null&&t6.test(e)||Ir.scheme==="http"&&Gs(e)}function TQ(e){return e!=null&&uQ.test(e)}function RI(e){return Gs(e)?`https:${e}`:e.replace(t6,"https:")}function MQ(){return Ir.scheme==="http"}function ax(){return Ir.scheme==="https"}function cw(e,t=!1){return Gs(e)?e.slice(2):(e=e.replace(e6,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function EQ(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function IQ(e){let t=0;if(Li(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function mxe(e,t){if(!e)return"";const r=Ar(e).path.replace(/\/+$/,""),i=r.substring(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return i;const n=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(n,"")}function kQ(e){return e.endsWith("/")?e:`${e}/`}function s6(e){return e.replace(/\/+$/,"")}function OQ(e){if(/^https?:\/\//i.test(e)){const t=OI(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function PQ(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function CQ(e){const t=hh.httpsDomains;if(!xQ(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),cQ.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return MQ()&&i===Ir.authority&&!dQ.test(e)||(ax()&&i===Ir.authority||t&&t.some(n=>i===n||i.endsWith(`.${n}`))||ax()&&!Lb(e))&&(e=RI(e)),e}function lx(e,t,r){if(!(t&&r&&e&&Li(e)))return e;const i=e.indexOf("//"),n=e.indexOf("/",i+2),s=e.indexOf(":",i+2),o=Math.min(n<0?e.length:n,s<0?e.length:s);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function ux(e){return typeof e=="string"?new Tp(cn(e)):(e.scheme||(e.scheme=Ir.scheme),e)}function yxe(e){return RQ.test(e)}function o6(e,t){const r=Ar(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function AQ(e,t,r){const i=Ar(e),n=i.query||{};return n[t]=String(r),`${i.path}?${cy(n)}`}function wS(e,t){if(!t)return e;const r=Ar(e),i=r.query||{};for(const[s,o]of Object.entries(t))o!=null&&(i[s]=o);const n=cy(i);return n?`${r.path}?${n}`:r.path}function gxe(e){if(e==null)return null;const t=e.match(a6);return t?t[2]:null}function QC(e){if(e==null)return null;const t=e.match(a6);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function vxe(e){return typeof e=="string"?dy(e)??{data:e}:new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(dy(i.result)),i.onerror=n=>r(n)})}const a6=/([^.]*)\.([^/]*)$/,RQ=/(^data:image\/svg|\.svg$)/i,l6="20240703",u6="c2e27693be5ad62ff80ac547c420439d7fa3d50b";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const LQ="4.30";let _e,LI=LQ;LI="4.30.5";function wxe(e){_e=e}function bxe(e){const t=_e==null?void 0:_e.findCredential(e);return t!=null&&t.token?AQ(e,"token",t.token):e}R("host-webworker");const NQ=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function c6(e){const t=gn(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!NQ.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function FQ(e,t,r=!1,i){return new Promise((n,s)=>{if(Ko(i))return void s(XC());let o=()=>{c(),s(new Error(`Unable to load ${t}`))},a=()=>{const h=e;c(),n(h)},u=()=>{if(!e)return;const h=e;c(),h.src="",s(XC())};const c=()=>{R("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,i!=null&&i.removeEventListener("abort",u),u=null,r&&URL.revokeObjectURL(t)};i!=null&&i.addEventListener("abort",u),R("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function XC(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const d6="Timeout exceeded";function DQ(){return new Error(d6)}function _xe(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===d6}function jQ(e){Pe.request.crossOriginNoCorsDomains||(Pe.request.crossOriginNoCorsDomains={});const t=Pe.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[gn(r)??""]=0:(t[gn("http://"+r)??""]=0,t[gn("https://"+r)??""]=0)}function zQ(e){const t=Pe.request.crossOriginNoCorsDomains;if(t){let r=gn(e);if(r)return r=r.toLowerCase(),!Jp(r,II())&&t[r]<Date.now()-36e5}return!1}async function VQ(e){var n;const t=Pe.request.crossOriginNoCorsDomains,r=gn(e);t&&r&&(t[r.toLowerCase()]=Date.now());const i=Ar(e);e=i.path,((n=i.query)==null?void 0:n.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function dt(e,t){var m;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=kI(t.query.toString().replaceAll("+"," ")));const r=Wc(e),i=Nb(e);i||r||(e=Qn(e));const n={url:e,requestOptions:{...t}},s=y=>({data:y,getAllHeaders:Yp,getHeader:Yp,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=ox(e,sn.internalInterceptors);if(o){const y=await tA(o,n);if(y!=null)return s(y)}let a=ox(e);if(a){const y=await tA(a,n);if(y!=null)return s(y);a.after||a.error||(a=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"&&(R("host-webworker")||R("host-node")))throw js("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(t.method==="head"){if(t.body)throw js("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(r||i)throw js("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await HQ(),dw)return dw.execute(e,t);const u=new AbortController,c=yn(t,()=>u.abort()),h={controller:u,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:n,redoRequest:!1,useIdentity:sn.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=await KQ(h).finally(()=>c==null?void 0:c.remove());return(m=a==null?void 0:a.after)==null||m.call(a,f),f}let dw;const sn=Pe.request,p6="FormData"in globalThis,UQ=new Set([499,498,403,401]),GQ=new Set(["COM_0056","COM_0057","SB_0008"]),qQ=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Yp=()=>null,pw=Symbol();function BQ(e){const t=gn(e);t&&!dt._corsServers.includes(t)&&dt._corsServers.push(t)}function eA(e){const t=gn(e);return!t||t.endsWith(".arcgis.com")||dt._corsServers.includes(t)||PI(t)}function js(e,t,r,i){let n="Error";const s={url:r.url,requestOptions:r.requestOptions,getAllHeaders:Yp,getHeader:Yp,ssl:!1};if(t instanceof N)return t.details?(t.details=k(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const o=i&&(()=>Array.from(i.headers)),a=i&&(h=>i.headers.get(h)),u=i==null?void 0:i.status,c=t.message;c&&(n=c),o&&a&&(s.getAllHeaders=o,s.getHeader=a),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||u||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=pw in t?t[pw]:t}return bi(t)?Ot():new N(e,n,s)}async function HQ(){R("host-webworker")&&!dw&&(dw=await J(()=>import("./request-D-_PFacx.js"),[]))}async function cx(){_e||await J(()=>import("./IdentityManager-Dr_jY1k_.js"),__vite__mapDeps([0,1]))}async function WQ(e){var a;const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,n=r.body;let s=null,o=null;if(p6&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:sn.priority,redirect:"follow",signal:i},(s||o)&&(e.fetchOptions.body=s||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(a=r.query)!=null&&a.token||s!=null&&s.get("token")),!e.hasToken&&Pe.apiKey&&c6(t)&&(r.query||(r.query={}),r.query.token=Pe.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!h6(t)&&!Ko(i)){let u;r.authMode==="immediate"?(await cx(),u=await _e.getCredential(t,{signal:i}),e.credential=u):r.authMode==="no-prompt"?(await cx(),u=await _e.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=u):_e&&(u=_e.findCredential(t)),u&&(e.credentialToken=u.token,e.useSSL=!!u.ssl)}}function h6(e){return qQ.some(t=>t.test(e))}async function ZQ(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions??{},n=Nb(t)||Wc(t),s=r.responseType||"json",o=n?0:r.timeout!=null?r.timeout:sn.timeout;let a=!1;if(!n){e.useSSL&&(t=RI(t));let m={...r.query};e.credentialToken&&(m.token=e.credentialToken);let y=cy(m);R("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const g=t.length+1+y.length;let v;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||g>sn.maxUrlLength;const w=r.useProxy||!!Lb(t);if(w){const b=gQ(t);v=b.path,!a&&v.length+1+g>sn.maxUrlLength&&(a=!0),b.query&&(m={...b.query,...m})}if(i.method==="HEAD"&&(a||w)){if(a)throw g>sn.maxUrlLength?js("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):js("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(w)throw js("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=wS(t,m):(i.body=cy(m),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=wS(t,m),w&&(e.useProxy=!0,t=`${v}?${t}`),m.token&&p6&&i.body instanceof FormData&&!nQ(t)&&i.body.set("token",m.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!Jp(t,II())){if(PI(t))e.withCredentials=!0;else if(_e){const b=_e.findServerInfo(t);b!=null&&b.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(i.credentials="include",zQ(t)&&await VQ(a?wS(t,m):t))}let u,c,h=0,f=!1;o>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")c=i,c.url=t;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||a||JQ(r.headers)||!n&&!e.useProxy&&sn.proxyUrl&&!eA(t)){if(dt._beforeFetch&&await dt._beforeFetch(t,i),u=await fetch(t,i),dt._afterFetch&&await dt._afterFetch(u),e.useProxy||BQ(t),r.responseType==="native")c=u;else if(i.method!=="HEAD")if(u.ok){switch(s){case"array-buffer":c=await u.arrayBuffer();break;case"blob":case"image":c=await u.blob();break;default:c=await u.text()}if(h&&(clearTimeout(h),h=0),s==="json"||s==="xml"||s==="document")if(c)switch(s){case"json":c=JSON.parse(c);break;case"xml":c=rA(c,"application/xml");break;case"document":c=rA(c,"text/html")}else c=null;if(c){if(s==="array-buffer"||s==="blob"){const m=u.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&c[s==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(c).json();y.error&&(c=y)}catch{}}s==="image"&&c instanceof Blob&&(c=await iA(URL.createObjectURL(c),e,!0))}}else{c=await u.text();try{c=JSON.parse(c)}catch{}}}else c=await iA(t,e)}catch(m){if(m.name==="AbortError")throw f?DQ():Ot("Request canceled");if(!(!u&&m instanceof TypeError&&sn.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||eA(t))throw m;e.redoRequest=!0,vQ({proxyUrl:sn.proxyUrl,urlPrefix:gn(t)??""})}finally{h&&clearTimeout(h)}return[u,c]}async function tA(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(n){r=js("request:interceptor",n,t)}if((i instanceof Error||i instanceof N)&&(r=js("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function JQ(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function rA(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function KQ(e){var s,o;let t,r;await WQ(e);try{do[t,r]=await ZQ(e);while(!await YQ(e,t,r))}catch(a){const u=js("request:server",a,e.params,t);throw u.details.ssl=e.useSSL,(s=e.interceptor)!=null&&s.error&&e.interceptor.error(u),u}const i=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&((o=r.user)!=null&&o.username)&&!PI(i)){const a=gn(i,!0);a&&sn.trustedServers.push(a)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&jQ(r.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&_e){const a=_e.findServerInfo(n.server);let u=a==null?void 0:a.owningSystemUrl;if(u){u=u.replace(/\/?$/,"/sharing");const c=_e.findCredential(u,n.userId);c&&_e._getIdenticalSvcIdx(u,c)===-1&&c.resources.unshift(u)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):Yp,getHeader:t?a=>t.headers.get(a):Yp,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function YQ(e,t,r){var c;if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let n,s;if(r&&(r.error&&typeof r.error=="object"?n=r.error:r.status==="error"&&Array.isArray(r.messages)&&(n={...r},n[pw]=r,n.details=r.messages)),!n&&!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[pw]=r,n;let o,a=null;n&&(s=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const u=i.authMode;if(s===403&&(a===4||(c=n.message)!=null&&c.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(u!=="no-prompt"||s===498)&&s!==void 0&&UQ.has(s)&&!h6(e.params.url)&&(s!==403||(!o||!GQ.has(o))&&(a==null||a===2&&e.credentialToken))){await cx();try{const h=await _e.getCredential(e.params.url,{error:js("request:server",n,e.params),prompt:u!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=h,e.credentialToken=h.token,e.useSSL=e.useSSL||h.ssl,!1}catch(h){if(u==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;n=h}}if(n)throw n;return!0}function iA(e,t,r=!1){const i=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=sn.priority,n.src=e,FQ(n,e,r,i)}dt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],dt._beforeFetch=void 0,dt._afterFetch=void 0;let iv=class f6{constructor(){this._emitter=new f6.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){var c;let o=(c=this._listenersMap)==null?void 0:c.get(n);if(!o)return!1;const a=this._target||this;let u=!1;for(const h of o.slice()){const f="deref"in h?h.deref():h;f?f==null||f.call(a,s):u=!0}return u&&(o=o.filter(h=>!("deref"in h)||h.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(u=>this.on(u,s));return Uy(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),De(()=>{var c;const a=(c=this._listenersMap)==null?void 0:c.get(n),u=(a==null?void 0:a.indexOf(s))??-1;u>=0&&a.splice(u,1)})}once(n,s){const o=this.on(n,a=>{o.remove();const u="deref"in s?s.deref():s;u==null||u.call(null,a)});return o}hasEventListener(n){var o;const s=(o=this._listenersMap)==null?void 0:o.get(n);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let n=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=l([x("esri.core.Evented")],n),n};let r=class extends le{constructor(){super(...arguments),this._emitter=new iv.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,n){return this._emitter.emit(i,n)}on(i,n){return this._emitter.on(i,n)}once(i,n){return this._emitter.once(i,n)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=l([x("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(iv||(iv={}));const ra=iv;var Re;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Re||(Re={}));function NI(e){return(t,r)=>{t[r]=e}}let Zy=class extends cj{notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};var Ro;let QQ=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},XQ=class{constructor(t,r,i,n,s){this.target=t,this.added=r,this.removed=i,this.start=n,this.deleteCount=s}};const Hi=new Hc(QQ,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function nA(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function bS(e){return e?e instanceof Oo?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function _S(e){if(e!=null&&e.length)return e[0]}function eX(e,t,r,i){const n=Math.min(e.length-r,t.length-i);let s=0;for(;s<n&&e[r+s]===t[i+s];)s++;return s}function m6(e,t,r,i){t&&t.forEach((n,s,o)=>{e.push(n),m6(e,r.call(i,n,s,o),r,i)})}const la=new Set,ua=new Set,ca=new Set,SS=new Map;let tX=0,Oo=Ro=class extends ra.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Ro}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new Zy,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:tX++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Ro?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return ae(this._observable),this._items}set items(e){this._emitBeforeChanges(Re.ADD)||(this._splice(0,this.length,bS(e)),this._emitAfterChanges(Re.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return De();if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),De(()=>{i.removed=!0,r.splice(r.indexOf(i),1)})}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,i=this.on(e,n=>{var s;(s=r())==null||s.call(null,n),i.remove()});return i}add(e,t){if(ae(this._observable),this._emitBeforeChanges(Re.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(Re.ADD),this}addMany(e,t=this._items.length){if(ae(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(Re.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,bS(e)),this._emitAfterChanges(Re.ADD),this}at(e){if(ae(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(ae(this._observable),!this.length||this._emitBeforeChanges(Re.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(Re.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return ae(this._observable),this._createNewInstance({items:this._items.map(k)})}concat(...e){ae(this._observable);const t=e.map(bS);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(ae(this._observable),!this.length||this._emitBeforeChanges(Re.REMOVE))return;const r=this._splice(0,this.length),i=r.length;for(let n=0;n<i;n++)e.call(t,r[n],n,r);this._emitAfterChanges(Re.REMOVE)}destroyAll(){this.drain(nA)}destroyMany(e){const t=this.removeMany(e);return t.forEach(nA),t}every(e,t){return ae(this._observable),this._items.every(e,t)}filter(e,t){let r;return ae(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return ae(this._observable),this._items.find(e,t)}findIndex(e,t){return ae(this._observable),this._items.findIndex(e,t)}flatten(e,t){ae(this._observable);const r=[];return m6(r,this,e,t),new Ro(r)}forEach(e,t){return ae(this._observable),this._items.forEach(e,t)}getItemAt(e){return ae(this._observable),this._items[e]}getNextIndex(e){ae(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return ae(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return ae(this._observable),this._items.indexOf(e,t)}join(e=","){return ae(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return ae(this._observable),this._items.lastIndexOf(e,t)}map(e,t){ae(this._observable);const r=this._items.map(e,t);return new Ro({items:r})}reorder(e,t=this.length-1){ae(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(Re.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(Re.MOVE)}return e}}pop(){if(ae(this._observable),!this.length||this._emitBeforeChanges(Re.REMOVE))return;const e=_S(this._splice(this.length-1,1));return this._emitAfterChanges(Re.REMOVE),e}push(...e){return ae(this._observable),this._emitBeforeChanges(Re.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Re.ADD)),this.length}reduce(e,t){ae(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){ae(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return ae(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(ae(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Re.REMOVE))return;const t=_S(this._splice(e,1));return this._emitAfterChanges(Re.REMOVE),t}removeMany(e){if(ae(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(Re.REMOVE))return[];const t=e instanceof Ro?e.toArray():e,r=this._items,i=[],n=t.length;for(let s=0;s<n;s++){const o=t[s],a=r.indexOf(o);if(a>-1){const u=1+eX(t,r,s+1,a+1),c=this._splice(a,u);c&&c.length>0&&i.push.apply(i,c),s+=u-1}}return this._emitAfterChanges(Re.REMOVE),i}reverse(){if(ae(this._observable),this._emitBeforeChanges(Re.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Re.MOVE),this}shift(){if(ae(this._observable),!this.length||this._emitBeforeChanges(Re.REMOVE))return;const e=_S(this._splice(0,1));return this._emitAfterChanges(Re.REMOVE),e}slice(e=0,t=this.length){return ae(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return ae(this._observable),this._items.some(e,t)}sort(e){if(ae(this._observable),!this.length||this._emitBeforeChanges(Re.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Re.MOVE),this}splice(e,t,...r){ae(this._observable);const i=(t?Re.REMOVE:0)|(r.length?Re.ADD:0);if(this._emitBeforeChanges(i))return[];const n=this._splice(e,t,r)||[];return this._emitAfterChanges(i),n}toArray(){return ae(this._observable),this._items.slice()}toJSON(){return ae(this._observable),this.toArray()}toLocaleString(){return ae(this._observable),this._items.toLocaleString()}toString(){return ae(this._observable),this._items.toString()}unshift(...e){return ae(this._observable),!e.length||this._emitBeforeChanges(Re.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Re.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=dh(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const a=Hi.acquire();a.target=this,a.cancellable=!0;for(let u=0,c=o.length;u<c;u++)s=o[u],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(u,1),i.splice(e,0,s),e+=1,u-=1,c-=1);Hi.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Hi.acquire();a.target=this,a.cancellable=!1;const u=o.length;for(let c=0;c<u;c++)a.reset(o[c]),this.emit("after-remove",a);Hi.release(a)}}if(r!=null&&r.length){if(n){const h=[];for(const f of r){const m=n.ensureType(f);m==null&&f!=null||h.push(m)}r=h}const a=this.hasEventListener("before-add"),u=this.hasEventListener("after-add"),c=e===this.length;if(a||u){const h=Hi.acquire();h.target=this,h.cancellable=!0;const f=Hi.acquire();f.target=this,f.cancellable=!1;for(const m of r)a?(h.reset(m),this.emit("before-add",h),h.defaultPrevented||(c?i.push(m):i.splice(e++,0,m),this._set("length",i.length),u&&(f.reset(m),this.emit("after-add",f)))):(c?i.push(m):i.splice(e++,0,m),this._set("length",i.length),f.reset(m),this.emit("after-add",f));Hi.release(f),Hi.release(h)}else{if(c)for(const h of r)i.push(h);else i.splice(e,0,...r);this._set("length",i.length)}}if((r!=null&&r.length||o!=null&&o.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const a=new XQ(this,r,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=Hi.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,Hi.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Hi.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Hi.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;la.clear(),ua.clear(),ca.clear();for(const{added:u,removed:c}of r){if(u)if(ca.size===0&&ua.size===0)for(const h of u)la.add(h);else for(const h of u)ua.has(h)?(ca.add(h),ua.delete(h)):ca.has(h)||la.add(h);if(c)if(ca.size===0&&la.size===0)for(const h of c)ua.add(h);else for(const h of c)la.has(h)?la.delete(h):(ca.delete(h),ua.add(h))}const i=Hr.acquire();la.forEach(u=>{i.push(u)});const n=Hr.acquire();ua.forEach(u=>{n.push(u)});const s=this._items,o=t.items,a=Hr.acquire();if(ca.forEach(u=>{o.indexOf(u)!==s.indexOf(u)&&a.push(u)}),t.listeners&&(i.length||n.length||a.length)){const u={target:this,added:i,removed:n,moved:a},c=t.listeners.length;for(let h=0;h<c;h++){const f=t.listeners[h];f.removed||f.callback.call(this,u)}}Hr.release(i),Hr.release(n),Hr.release(a)}la.clear(),ua.clear(),ca.clear()}};Oo.ofType=e=>{if(!e)return Ro;if(SS.has(e))return SS.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const n=e.typeMap[i].prototype.declaredClass;t?t+=` | ${n}`:t=n}let r=class extends Ro{};return l([NI({Type:e,ensureType:typeof e=="function"?Pt(e):Us(e)})],r.prototype,"itemType",void 0),r=l([x(`esri.core.Collection<${t}>`)],r),SS.set(e,r),r},l([d()],Oo.prototype,"_updating",void 0),l([d()],Oo.prototype,"length",void 0),l([d()],Oo.prototype,"items",null),l([d({readOnly:!0})],Oo.prototype,"updating",null),Oo=Ro=l([x("esri.core.Collection")],Oo);const te=Oo;function Il(e,t,r=te){return t||(t=new r),t===e||(t.removeAll(),rX(e)?t.addMany(e):e&&t.add(e)),t}function y6(e){return e}function rX(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var Za;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Za||(Za={}));let iX=class{constructor(){this._resolver=ji(),this._status=Za.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Za.RESOLVED,this._cleanUp()},()=>{this._status=Za.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Za.RESOLVED}isRejected(){return this._status===Za.REJECTED}isFulfilled(){return this._status!==Za.PENDING}abort(){this._resolver.reject(Ot())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=ji(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==i||bi(n)||this._resolver.reject(n)}),t.resolve()}};const Fb=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new iX,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=l([x("esri.core.Promise")],t),t};let hw=class extends Fb(le){};hw=l([x("esri.core.Promise")],hw);const nX="not-loaded",sX="loading",oX="failed",sA="loaded",g6=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((a,u)=>{const c=vI(s,u);this.destroyed&&u(new N("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,u).finally(()=>{c&&c.remove()})});if(this.loadStatus===nX){this._set("loadStatus",sX);const a=this._loadController=new AbortController;n({signal:a.signal})}return i(),o}})),this.when(()=>{this._set("loadStatus",sA),this._loadController=null},i=>{this._set("loadStatus",oX),this._set("loadError",i),this._loadController=null})}destroy(){this._loadController&&(this._loadController=oy(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===sA}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new N("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return l([d({readOnly:!0})],t.prototype,"loaded",null),l([d({readOnly:!0})],t.prototype,"loadError",void 0),l([d({clonable:!1})],t.prototype,"loadStatus",void 0),l([d({type:[Sn],readOnly:!0})],t.prototype,"loadWarnings",null),t=l([x("esri.core.Loadable")],t),t};let yf=class extends g6(hw){};yf=l([x("esri.core.Loadable")],yf),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=g6,e.isLoadable=t}(yf||(yf={}));const Yo=yf;function Ixe(e,t,r){return wI(e.map((i,n)=>t.apply(r,[i,n])))}async function aX(e,t,r){return(await wI(e.map((i,n)=>t.apply(r,[i,n])))).map(i=>i.value)}function FI(e){return{ok:!0,value:e}}function DI(e){return{ok:!1,error:e}}function lX(e){return e!=null&&e.ok===!0?e.value:null}function uX(e){return e!=null&&e.ok===!1?e.error:null}async function Db(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return FI(await e)}catch(t){return DI(t)}}async function cX(e){try{return FI(await e)}catch(t){return As(t),DI(t)}}function jI(e,t){return new wa(e,t)}let wa=class extends le{get value(){return lX(this._result)}get error(){return uX(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=oy(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then(n=>{this._result=FI(n),this._cleanup()},n=>{this._result=DI(n),this._cleanup()}),this._abortHandle=yn(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=pt(this._abortHandle),this._abortController=null}};l([d()],wa.prototype,"value",null),l([d()],wa.prototype,"error",null),l([d()],wa.prototype,"finished",null),l([d()],wa.prototype,"promise",void 0),l([d()],wa.prototype,"_result",void 0),wa=l([x("esri.core.asyncUtils.ReactiveTask")],wa);async function v6(e,t){return await e.load(),dX(e,t)}async function dX(e,t){const r=[],i=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?i(...o):te.isCollection(o)?o.forEach(a=>i(a)):Yo.isLoadable(o)&&r.push(o))};t(i);let n=null;if(await aX(r,async s=>{const o=await Db(pX(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return e}function pX(e){return"loadAll"in e&&typeof e.loadAll=="function"}function Z(e,t,r){let i,n;return t===void 0?(n=e,i=[void 0]):typeof t!="string"?(n=e,i=[void 0],r=t):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const u of i){const c=Lj(s,u,n);c.write&&typeof c.write=="object"||(c.write={}),r&&(c.write.target=r),c.write.writer=a[o]}}}let Ee=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=hX(t),this.apiValues=oA(this._apiToJSON),this.jsonValues=oA(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,n,s)=>{const o=this.toJSON(i);o!==void 0&&Cr(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function hX(e){const t={};for(const r in e)t[e[r]]=r;return t}function oA(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function Lr(){return function(e,t){return new Ee(e,{ignoreUnknown:!0,...t})}}let zI=class{constructor(t,r,i,n){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const bt=new zI(6378137,1/298.257223563,3e5,.006694379990137799),zs=new zI(3396190,1/169.8944472236118,23e4),kl=new zI(1737400,0,0);function Ne(e){if(!Pe.assetsPath)throw z.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new N("assets:path-not-set","config.assetsPath is not set");return Kp(Pe.assetsPath,e)}let $S,O=null;function VI(){return!!O}function fX(){return!!R("esri-wasm")}function w6(){return $S||($S=J(()=>import("./pe-wasm-B0dNp_jY.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Ne(`esri/geometry/support/${t}`)})).then(e=>{_6(e)}),$S)}var dx,it,px;(function(e){function t(s,o,a){O.ensureCache.prepare();const u=Ju(a),c=a===u,h=O.ensureFloat64(u),f=O._pe_geog_to_proj(O.getPointer(s),o,h);return f&&il(a,o,h,c),f}function r(s,o,a,u){switch(u){case it.PE_TRANSFORM_P_TO_G:return i(s,o,a);case it.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function i(s,o,a){return n(s,o,a,0)}function n(s,o,a,u){O.ensureCache.prepare();const c=Ju(a),h=a===c,f=O.ensureFloat64(c),m=O._pe_proj_to_geog_center(O.getPointer(s),o,f,u);return m&&il(a,o,f,h),m}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=n})(dx||(dx={})),function(e){function t(){e.PE_BUFFER_MAX=O.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=O.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=O.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=O.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=O.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=O.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=O.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=O.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=O.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=O.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=O.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=O.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=O.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=O.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=O.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=O.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=O.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=O.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=O.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=O.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=O.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=O.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=O.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=O.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=O.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=O.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=O.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=O.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=O.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=O.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=O.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=O.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(it||(it={})),function(e){const t={},r={},i=y=>{if(y){const g=y.getType();switch(g){case it.PE_TYPE_GEOGCS:y=O.castObject(y,O.PeGeogcs);break;case it.PE_TYPE_PROJCS:y=O.castObject(y,O.PeProjcs);break;case it.PE_TYPE_GEOGTRAN:y=O.castObject(y,O.PeGeogtran);break;default:g&it.PE_TYPE_UNIT&&(y=O.castObject(y,O.PeUnit))}}return y};function n(){O.PeFactory.prototype.initialize(null)}function s(y){return o(it.PE_TYPE_COORDSYS,y)}function o(y,g){let v=null,w=t[y];if(w||(w={},t[y]=w),w.hasOwnProperty(String(g)))v=w[g];else{const b=O.PeFactory.prototype.factoryByType(y,g);O.compare(b,O.NULL)||(v=b,w[g]=v)}return v=i(v),v}function a(y,g){let v=null,w=r[y];if(w||(w={},r[y]=w),w.hasOwnProperty(g))v=w[g];else{const b=O.PeFactory.prototype.fromString(y,g);O.compare(b,O.NULL)||(v=b,w[g]=v)}return v=i(v),v}function u(y){return o(it.PE_TYPE_GEOGCS,y)}function c(y){return o(it.PE_TYPE_GEOGTRAN,y)}function h(y){return O.PeFactory.prototype.getCode(y)}function f(y){return o(it.PE_TYPE_PROJCS,y)}function m(y){return o(it.PE_TYPE_UNIT,y)}e.initialize=n,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=u,e.geogtran=c,e.getCode=h,e.projcs=f,e.unit=m}(px||(px={}));let b6=null;var fw,hx,fx,mx,mw,yx,yw,gw,gx;function _6(e){function t(s,o,a){s[o]=a(s[o])}O=e,it.init(),fw.init(),mw.init(),yw.init(),gw.init(),b6=class extends O.PeGCSExtent{destroy(){O.destroy(this)}};const r=[O.PeDatum,O.PeGeogcs,O.PeGeogtran,O.PeObject,O.PeParameter,O.PePrimem,O.PeProjcs,O.PeSpheroid,O.PeUnit];for(const s of r)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(it.PE_NAME_MAX))});for(const s of[O.PeGeogtran,O.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array(it.PE_PARM_MAX);let u=o.call(this);for(let c=0;c<a.length;c++){const h=O.getValue(u,"*");a[c]=h?O.wrapPointer(h,O.PeParameter):null,u+=Int32Array.BYTES_PER_ELEMENT}return a});t(O.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return il(a,o,s.call(this)),a}),t(O.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=O._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const u=s.call(this);if(!O.compare(u,O.NULL)){a=[u];const c=this.getSteps();if(c>1){const h=O.getPointer(u);for(let f=1;f<c;f++)a.push(O.wrapPointer(h+o*f,O.PeGTlistExtendedGTs))}}return a}});const i=O._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const u=s.call(this);if(!O.compare(u,O.NULL)){a=[u];const c=u.getNump();if(c>1){const h=O.getPointer(u);for(let f=1;f<c;f++)a.push(O.wrapPointer(h+i*f,O.PeHorizon))}}return o.set(s,a),a};t(O.PeProjcs.prototype,"horizonGcsGenerate",n),t(O.PeProjcs.prototype,"horizonPcsGenerate",n),O.PeObject.prototype.toString=function(s=it.PE_STR_OPTS_NONE){O.ensureCache.prepare();const o=O.getPointer(this),a=O.ensureInt8(new Array(it.PE_BUFFER_MAX));return O.UTF8ToString(O._pe_object_to_string_ext(o,s,a))}}function eo(e){if(!e)return;const t=O.getClass(e);if(!t)return;const r=O.getCache(t);if(!r)return;const i=O.getPointer(e);i&&delete r[i]}function G0(e,t){const r=[],i=new Array(t);for(let n=0;n<e;n++)r.push(O.ensureInt8(i));return r}function Ju(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(r=>{t.push(r[0],r[1])})):t=e,t}function il(e,t,r,i=!1){if(i)for(let n=0;n<2*t;n++)e[n]=O.getValue(r+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let s=0;s<t;s++)n&&(e[s]=new Array(2)),e[s][0]=O.getValue(r,"double"),e[s][1]=O.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=O.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=O._pe_getPeGTlistExtendedEntrySize()}function i(n,s,o,a,u,c){let h=null;const f=new O.PeInteger(c);try{const m=O.PeGTlistExtended.prototype.getGTlist(n,s,o,a,u,f);if((c=f.val)&&(h=[m],c>1)){const y=O.getPointer(m);for(let g=1;g<c;g++)h.push(O.wrapPointer(y+t*g,O.PeGTlistExtendedEntry))}}finally{O.destroy(f)}return h}e.init=r,e.getGTlist=i})(fw||(fw={})),function(e){function t(r){if(r!=null&&r.length){for(const i of r)eo(i),i.getEntries().forEach(n=>{eo(n);const s=n.getGeogtran();eo(s),s.getParameters().forEach(eo),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{eo(o);const a=o.getDatum();eo(a),eo(a.getSpheroid()),eo(o.getPrimem()),eo(o.getUnit())})});O.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(hx||(hx={})),function(e){function t(r,i,n,s,o){O.ensureCache.prepare();const a=Ju(n),u=n===a,c=O.ensureFloat64(a);let h=0;s&&(h=O.ensureFloat64(s));const f=O._pe_geog_to_geog(O.getPointer(r),i,c,h,o);return f&&il(n,i,c,u),f}e.geogToGeog=t}(fx||(fx={})),function(e){const t=(c,h,f,m,y,g)=>{let v,w;switch(O.ensureCache.prepare(),c){case"dd":v=O._pe_geog_to_dd,w=it.PE_DD_MAX;break;case"ddm":v=O._pe_geog_to_ddm,w=it.PE_DDM_MAX;break;case"dms":v=O._pe_geog_to_dms,w=it.PE_DMS_MAX}let b=0;h&&(b=O.getPointer(h));const _=Ju(m),$=O.ensureFloat64(_),T=G0(f,w),E=v(b,f,$,y,O.ensureInt32(T));if(E)for(let I=0;I<f;I++)g[I]=O.UTF8ToString(T[I]);return E},r=(c,h,f,m,y)=>{let g;switch(O.ensureCache.prepare(),c){case"dd":g=O._pe_dd_to_geog;break;case"ddm":g=O._pe_ddm_to_geog;break;case"dms":g=O._pe_dms_to_geog}let v=0;h&&(v=O.getPointer(h));const w=m.map(T=>O.ensureString(T)),b=O.ensureInt32(w),_=O.ensureFloat64(new Array(2*f)),$=g(v,f,b,_);return $&&il(y,f,_),$};function i(c,h,f,m,y){return t("dms",c,h,f,m,y)}function n(c,h,f,m){return r("dms",c,h,f,m)}function s(c,h,f,m,y){return t("ddm",c,h,f,m,y)}function o(c,h,f,m){return r("ddm",c,h,f,m)}function a(c,h,f,m,y){return t("dd",c,h,f,m,y)}function u(c,h,f,m){return r("dd",c,h,f,m)}e.geogToDms=i,e.dmsToGeog=n,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=u}(mx||(mx={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=O.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=O.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=O.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=O.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=O.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(n,s,o,a,u,c,h){O.ensureCache.prepare();let f=0;n&&(f=O.getPointer(n));const m=Ju(o),y=O.ensureFloat64(m),g=G0(s,it.PE_MGRS_MAX),v=O.ensureInt32(g),w=O._pe_geog_to_mgrs_extended(f,s,y,a,u,c,v);if(w)for(let b=0;b<s;b++)h[b]=O.UTF8ToString(g[b]);return w}function i(n,s,o,a,u){O.ensureCache.prepare();let c=0;n&&(c=O.getPointer(n));const h=o.map(g=>O.ensureString(g)),f=O.ensureInt32(h),m=O.ensureFloat64(new Array(2*s)),y=O._pe_mgrs_to_geog_extended(c,s,f,a,m);return y&&il(u,s,m),y}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i}(mw||(mw={})),function(e){function t(i,n,s,o,a,u,c){O.ensureCache.prepare();let h=0;i&&(h=O.getPointer(i));const f=Ju(s),m=O.ensureFloat64(f),y=G0(n,it.PE_MGRS_MAX),g=O.ensureInt32(y),v=O._pe_geog_to_usng(h,n,m,o,a,u,g);if(v)for(let w=0;w<n;w++)c[w]=O.UTF8ToString(y[w]);return v}function r(i,n,s,o){O.ensureCache.prepare();let a=0;i&&(a=O.getPointer(i));const u=s.map(m=>O.ensureString(m)),c=O.ensureInt32(u),h=O.ensureFloat64(new Array(2*n)),f=O._pe_usng_to_geog(a,n,c,h);return f&&il(o,n,h),f}e.geogToUsng=t,e.usngToGeog=r}(yx||(yx={})),function(e){function t(){e.PE_UTM_OPTS_NONE=O.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=O.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=O.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(n,s,o,a,u){O.ensureCache.prepare();let c=0;n&&(c=O.getPointer(n));const h=Ju(o),f=O.ensureFloat64(h),m=G0(s,it.PE_UTM_MAX),y=O.ensureInt32(m),g=O._pe_geog_to_utm(c,s,f,a,y);if(g)for(let v=0;v<s;v++)u[v]=O.UTF8ToString(m[v]);return g}function i(n,s,o,a,u){O.ensureCache.prepare();let c=0;n&&(c=O.getPointer(n));const h=o.map(g=>O.ensureString(g)),f=O.ensureInt32(h),m=O.ensureFloat64(new Array(2*s)),y=O._pe_utm_to_geog(c,s,f,a,m);return y&&il(u,s,m),y}e.init=t,e.geogToUtm=r,e.utmToGeog=i}(yw||(yw={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=O.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=O.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=O.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=O.PePCSInfo.prototype.PE_POLE_POINT}function i(n,s=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(n)&&(a=t.get(n),a[s]&&(o=a[s])),o||(o=O.PePCSInfo.prototype.generate(n,s),a||(a=[],t.set(n,a)),a[s]=o),o}e.init=r,e.generate=i}(gw||(gw={})),function(e){function t(){return O.PeVersion.prototype.version_string()}e.versionString=t}(gx||(gx={}));const mX=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return dx},get PeDefs(){return it},get PeFactory(){return px},get PeGCSExtent(){return b6},get PeGTTransformations(){return fx},get PeGTlistExtended(){return fw},get PeGTlistExtendedEntry(){return hx},get PeNotationDms(){return mx},get PeNotationMgrs(){return mw},get PeNotationUsng(){return yx},get PeNotationUtm(){return yw},get PePCSInfo(){return gw},get PeVersion(){return gx},_init:_6,get _pe(){return O},isLoaded:VI,isSupported:fX,load:w6},Symbol.toStringTag,{value:"Module"}));var kc;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(kc||(kc={}));let p;const S={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(p=2e3;p<=2045;p++)S[p]=0;for(p=2056;p<=2065;p++)S[p]=0;for(p=2067;p<=2135;p++)S[p]=0;for(p=2137;p<=2154;p++)S[p]=0;for(p=2161;p<=2170;p++)S[p]=0;for(p=2172;p<=2193;p++)S[p]=0;for(p=2195;p<=2198;p++)S[p]=0;for(p=2200;p<=2203;p++)S[p]=0;for(p=2205;p<=2217;p++)S[p]=0;for(p=2222;p<=2224;p++)S[p]=1;for(p=2225;p<=2250;p++)S[p]=2;for(p=2251;p<=2253;p++)S[p]=1;for(p=2257;p<=2264;p++)S[p]=2;for(p=2274;p<=2279;p++)S[p]=2;for(p=2280;p<=2282;p++)S[p]=1;for(p=2283;p<=2289;p++)S[p]=2;for(p=2290;p<=2292;p++)S[p]=0;for(p=2308;p<=2313;p++)S[p]=0;for(p=2315;p<=2491;p++)S[p]=0;for(p=2494;p<=2866;p++)S[p]=0;for(p=2867;p<=2869;p++)S[p]=1;for(p=2870;p<=2888;p++)S[p]=2;for(p=2891;p<=2895;p++)S[p]=2;for(p=2896;p<=2898;p++)S[p]=1;for(p=2902;p<=2908;p++)S[p]=2;for(p=2915;p<=2920;p++)S[p]=2;for(p=2921;p<=2923;p++)S[p]=1;for(p=2924;p<=2930;p++)S[p]=2;for(p=2931;p<=2962;p++)S[p]=0;for(p=2964;p<=2968;p++)S[p]=2;for(p=2969;p<=2973;p++)S[p]=0;for(p=2975;p<=2991;p++)S[p]=0;for(p=2995;p<=3051;p++)S[p]=0;for(p=3054;p<=3079;p++)S[p]=0;for(p=3081;p<=3088;p++)S[p]=0;for(p=3092;p<=3101;p++)S[p]=0;for(p=3106;p<=3138;p++)S[p]=0;for(p=3146;p<=3151;p++)S[p]=0;for(p=3153;p<=3166;p++)S[p]=0;for(p=3168;p<=3172;p++)S[p]=0;for(p=3174;p<=3203;p++)S[p]=0;for(p=3294;p<=3358;p++)S[p]=0;for(p=3367;p<=3403;p++)S[p]=0;for(p=3408;p<=3416;p++)S[p]=0;for(p=3417;p<=3438;p++)S[p]=2;for(p=3441;p<=3446;p++)S[p]=2;for(p=3447;p<=3450;p++)S[p]=0;for(p=3451;p<=3459;p++)S[p]=2;for(p=3460;p<=3478;p++)S[p]=0;for(p=3554;p<=3559;p++)S[p]=0;for(p=3560;p<=3570;p++)S[p]=2;for(p=3571;p<=3581;p++)S[p]=0;for(p=3594;p<=3597;p++)S[p]=0;for(p=3601;p<=3604;p++)S[p]=0;for(p=3637;p<=3639;p++)S[p]=0;for(p=3665;p<=3667;p++)S[p]=0;for(p=3693;p<=3695;p++)S[p]=0;for(p=3701;p<=3727;p++)S[p]=0;for(p=3728;p<=3739;p++)S[p]=2;for(p=3740;p<=3751;p++)S[p]=0;for(p=3753;p<=3760;p++)S[p]=2;for(p=3761;p<=3773;p++)S[p]=0;for(p=3775;p<=3777;p++)S[p]=0;for(p=3779;p<=3781;p++)S[p]=0;for(p=3783;p<=3785;p++)S[p]=0;for(p=3788;p<=3791;p++)S[p]=0;for(p=3797;p<=3802;p++)S[p]=0;for(p=3814;p<=3816;p++)S[p]=0;for(p=3825;p<=3829;p++)S[p]=0;for(p=3832;p<=3841;p++)S[p]=0;for(p=3844;p<=3852;p++)S[p]=0;for(p=3873;p<=3885;p++)S[p]=0;for(p=3890;p<=3893;p++)S[p]=0;for(p=3907;p<=3912;p++)S[p]=0;for(p=3942;p<=3950;p++)S[p]=0;for(p=3968;p<=3970;p++)S[p]=0;for(p=3973;p<=3976;p++)S[p]=0;for(p=3986;p<=3989;p++)S[p]=0;for(p=3994;p<=3997;p++)S[p]=0;for(p=4048;p<=4051;p++)S[p]=0;for(p=4056;p<=4063;p++)S[p]=0;for(p=4093;p<=4096;p++)S[p]=0;for(p=4390;p<=4398;p++)S[p]=0;for(p=4399;p<=4413;p++)S[p]=2;for(p=4418;p<=4433;p++)S[p]=2;for(p=4455;p<=4457;p++)S[p]=2;for(p=4484;p<=4489;p++)S[p]=0;for(p=4491;p<=4554;p++)S[p]=0;for(p=4568;p<=4589;p++)S[p]=0;for(p=4652;p<=4656;p++)S[p]=0;for(p=4766;p<=4800;p++)S[p]=0;for(p=5014;p<=5016;p++)S[p]=0;for(p=5069;p<=5072;p++)S[p]=0;for(p=5105;p<=5130;p++)S[p]=0;for(p=5167;p<=5188;p++)S[p]=0;for(p=5253;p<=5259;p++)S[p]=0;for(p=5269;p<=5275;p++)S[p]=0;for(p=5292;p<=5311;p++)S[p]=0;for(p=5329;p<=5331;p++)S[p]=0;for(p=5343;p<=5349;p++)S[p]=0;for(p=5355;p<=5357;p++)S[p]=0;for(p=5387;p<=5389;p++)S[p]=0;for(p=5459;p<=5463;p++)S[p]=0;for(p=5479;p<=5482;p++)S[p]=0;for(p=5518;p<=5520;p++)S[p]=0;for(p=5530;p<=5539;p++)S[p]=0;for(p=5550;p<=5552;p++)S[p]=0;for(p=5562;p<=5583;p++)S[p]=0;for(p=5623;p<=5625;p++)S[p]=2;for(p=5631;p<=5639;p++)S[p]=0;for(p=5649;p<=5653;p++)S[p]=0;for(p=5663;p<=5680;p++)S[p]=0;for(p=5682;p<=5685;p++)S[p]=0;for(p=5875;p<=5877;p++)S[p]=0;for(p=5896;p<=5899;p++)S[p]=0;for(p=5921;p<=5940;p++)S[p]=0;for(p=6050;p<=6125;p++)S[p]=0;for(p=6244;p<=6275;p++)S[p]=0;for(p=6328;p<=6348;p++)S[p]=0;for(p=6350;p<=6356;p++)S[p]=0;for(p=6366;p<=6372;p++)S[p]=0;for(p=6381;p<=6387;p++)S[p]=0;for(p=6393;p<=6404;p++)S[p]=0;for(p=6480;p<=6483;p++)S[p]=0;for(p=6511;p<=6514;p++)S[p]=0;for(p=6579;p<=6581;p++)S[p]=0;for(p=6619;p<=6624;p++)S[p]=0;for(p=6625;p<=6627;p++)S[p]=2;for(p=6628;p<=6632;p++)S[p]=0;for(p=6634;p<=6637;p++)S[p]=0;for(p=6669;p<=6692;p++)S[p]=0;for(p=6707;p<=6709;p++)S[p]=0;for(p=6720;p<=6723;p++)S[p]=0;for(p=6732;p<=6738;p++)S[p]=0;for(p=6931;p<=6933;p++)S[p]=0;for(p=6956;p<=6959;p++)S[p]=0;for(p=7005;p<=7007;p++)S[p]=0;for(p=7057;p<=7070;p++)S[p]=2;for(p=7074;p<=7082;p++)S[p]=0;for(p=7109;p<=7118;p++)S[p]=0;for(p=7119;p<=7127;p++)S[p]=1;for(p=7374;p<=7376;p++)S[p]=0;for(p=7528;p<=7586;p++)S[p]=0;for(p=7587;p<=7645;p++)S[p]=2;for(p=7692;p<=7696;p++)S[p]=0;for(p=7755;p<=7787;p++)S[p]=0;for(p=7791;p<=7795;p++)S[p]=0;for(p=7799;p<=7801;p++)S[p]=0;for(p=7803;p<=7805;p++)S[p]=0;for(p=7825;p<=7831;p++)S[p]=0;for(p=7845;p<=7859;p++)S[p]=0;for(p=8013;p<=8032;p++)S[p]=0;for(p=8065;p<=8068;p++)S[p]=1;for(p=8518;p<=8529;p++)S[p]=2;for(p=8533;p<=8536;p++)S[p]=2;for(p=8538;p<=8540;p++)S[p]=2;for(p=8677;p<=8679;p++)S[p]=0;for(p=8836;p<=8840;p++)S[p]=0;for(p=8857;p<=8859;p++)S[p]=0;for(p=8908;p<=8910;p++)S[p]=0;for(p=9154;p<=9159;p++)S[p]=0;for(p=9205;p<=9218;p++)S[p]=0;for(p=9271;p<=9273;p++)S[p]=0;for(p=9295;p<=9297;p++)S[p]=0;for(p=9356;p<=9360;p++)S[p]=0;for(p=9404;p<=9407;p++)S[p]=0;for(p=9476;p<=9482;p++)S[p]=0;for(p=9487;p<=9494;p++)S[p]=0;for(p=9697;p<=9699;p++)S[p]=0;for(p=9821;p<=9865;p++)S[p]=0;for(p=10285;p<=10291;p++)S[p]=0;for(p=10314;p<=10317;p++)S[p]=0;for(p=10448;p<=10465;p++)S[p]=0;for(p=10731;p<=10733;p++)S[p]=0;for(p=11114;p<=11118;p++)S[p]=0;for(p=20004;p<=20032;p++)S[p]=0;for(p=20047;p<=20049;p++)S[p]=0;for(p=20062;p<=20092;p++)S[p]=0;for(p=20135;p<=20138;p++)S[p]=0;for(p=20248;p<=20258;p++)S[p]=0;for(p=20348;p<=20358;p++)S[p]=0;for(p=20436;p<=20440;p++)S[p]=0;for(p=20822;p<=20824;p++)S[p]=0;for(p=20904;p<=20932;p++)S[p]=0;for(p=20934;p<=20936;p++)S[p]=0;for(p=21004;p<=21032;p++)S[p]=0;for(p=21035;p<=21037;p++)S[p]=0;for(p=21095;p<=21097;p++)S[p]=0;for(p=21148;p<=21150;p++)S[p]=0;for(p=21207;p<=21264;p++)S[p]=0;for(p=21307;p<=21364;p++)S[p]=0;for(p=21413;p<=21423;p++)S[p]=0;for(p=21453;p<=21463;p++)S[p]=0;for(p=21473;p<=21483;p++)S[p]=0;for(p=21780;p<=21782;p++)S[p]=0;for(p=21891;p<=21894;p++)S[p]=0;for(p=21896;p<=21899;p++)S[p]=0;for(p=22171;p<=22177;p++)S[p]=0;for(p=22181;p<=22187;p++)S[p]=0;for(p=22191;p<=22197;p++)S[p]=0;for(p=22207;p<=22222;p++)S[p]=0;for(p=22229;p<=22232;p++)S[p]=0;for(p=22234;p<=22236;p++)S[p]=0;for(p=22243;p<=22250;p++)S[p]=0;for(p=22262;p<=22265;p++)S[p]=0;for(p=22307;p<=22322;p++)S[p]=0;for(p=22348;p<=22357;p++)S[p]=0;for(p=22407;p<=22422;p++)S[p]=0;for(p=22462;p<=22465;p++)S[p]=0;for(p=22521;p<=22525;p++)S[p]=0;for(p=22607;p<=22622;p++)S[p]=0;for(p=22641;p<=22646;p++)S[p]=0;for(p=22648;p<=22657;p++)S[p]=0;for(p=22707;p<=22722;p++)S[p]=0;for(p=22762;p<=22765;p++)S[p]=0;for(p=22807;p<=22822;p++)S[p]=0;for(p=22991;p<=22994;p++)S[p]=0;for(p=23028;p<=23038;p++)S[p]=0;for(p=23301;p<=23333;p++)S[p]=2;for(p=23830;p<=23853;p++)S[p]=0;for(p=23866;p<=23872;p++)S[p]=0;for(p=23877;p<=23884;p++)S[p]=0;for(p=23886;p<=23894;p++)S[p]=0;for(p=23946;p<=23948;p++)S[p]=0;for(p=24311;p<=24313;p++)S[p]=0;for(p=24342;p<=24347;p++)S[p]=0;for(p=24370;p<=24374;p++)S[p]=10;for(p=24375;p<=24381;p++)S[p]=0;for(p=24718;p<=24721;p++)S[p]=0;for(p=24817;p<=24821;p++)S[p]=0;for(p=24877;p<=24882;p++)S[p]=0;for(p=24891;p<=24893;p++)S[p]=0;for(p=25391;p<=25395;p++)S[p]=0;for(p=25828;p<=25838;p++)S[p]=0;for(p=26191;p<=26195;p++)S[p]=0;for(p=26391;p<=26393;p++)S[p]=0;for(p=26701;p<=26722;p++)S[p]=0;for(p=26729;p<=26799;p++)S[p]=2;for(p=26801;p<=26803;p++)S[p]=2;for(p=26811;p<=26813;p++)S[p]=2;for(p=26847;p<=26870;p++)S[p]=2;for(p=26891;p<=26899;p++)S[p]=0;for(p=26901;p<=26923;p++)S[p]=0;for(p=26929;p<=26946;p++)S[p]=0;for(p=26948;p<=26998;p++)S[p]=0;for(p=27037;p<=27040;p++)S[p]=0;for(p=27205;p<=27232;p++)S[p]=0;for(p=27258;p<=27260;p++)S[p]=0;for(p=27391;p<=27398;p++)S[p]=0;for(p=27561;p<=27564;p++)S[p]=0;for(p=27571;p<=27574;p++)S[p]=0;for(p=27581;p<=27584;p++)S[p]=0;for(p=27591;p<=27594;p++)S[p]=0;for(p=27700;p<=27707;p++)S[p]=0;for(p=28191;p<=28193;p++)S[p]=0;for(p=28348;p<=28358;p++)S[p]=0;for(p=28402;p<=28432;p++)S[p]=0;for(p=28462;p<=28492;p++)S[p]=0;for(p=29118;p<=29122;p++)S[p]=0;for(p=29168;p<=29172;p++)S[p]=0;for(p=29177;p<=29185;p++)S[p]=0;for(p=29187;p<=29195;p++)S[p]=0;for(p=29900;p<=29903;p++)S[p]=0;for(p=30161;p<=30179;p++)S[p]=0;for(p=30491;p<=30494;p++)S[p]=0;for(p=30729;p<=30732;p++)S[p]=0;for(p=31251;p<=31259;p++)S[p]=0;for(p=31265;p<=31268;p++)S[p]=0;for(p=31275;p<=31279;p++)S[p]=0;for(p=31281;p<=31297;p++)S[p]=0;for(p=31461;p<=31469;p++)S[p]=0;for(p=31491;p<=31495;p++)S[p]=0;for(p=31917;p<=31922;p++)S[p]=0;for(p=31965;p<=32e3;p++)S[p]=0;for(p=32001;p<=32003;p++)S[p]=2;for(p=32005;p<=32031;p++)S[p]=2;for(p=32033;p<=32060;p++)S[p]=2;for(p=32064;p<=32067;p++)S[p]=2;for(p=32074;p<=32077;p++)S[p]=2;for(p=32081;p<=32086;p++)S[p]=0;for(p=32107;p<=32130;p++)S[p]=0;for(p=32133;p<=32159;p++)S[p]=0;for(p=32164;p<=32167;p++)S[p]=2;for(p=32180;p<=32199;p++)S[p]=0;for(p=32201;p<=32260;p++)S[p]=0;for(p=32301;p<=32360;p++)S[p]=0;for(p=32401;p<=32460;p++)S[p]=0;for(p=32501;p<=32560;p++)S[p]=0;for(p=32601;p<=32662;p++)S[p]=0;for(p=32664;p<=32667;p++)S[p]=2;for(p=32701;p<=32761;p++)S[p]=0;for(p=53001;p<=53004;p++)S[p]=0;for(p=53008;p<=53019;p++)S[p]=0;for(p=53021;p<=53032;p++)S[p]=0;for(p=53034;p<=53037;p++)S[p]=0;for(p=53042;p<=53046;p++)S[p]=0;for(p=53074;p<=53080;p++)S[p]=0;for(p=54001;p<=54004;p++)S[p]=0;for(p=54008;p<=54019;p++)S[p]=0;for(p=54021;p<=54032;p++)S[p]=0;for(p=54034;p<=54037;p++)S[p]=0;for(p=54042;p<=54046;p++)S[p]=0;for(p=54048;p<=54053;p++)S[p]=0;for(p=54074;p<=54080;p++)S[p]=0;for(p=54098;p<=54101;p++)S[p]=0;for(p=102001;p<=102040;p++)S[p]=0;for(p=102042;p<=102063;p++)S[p]=0;for(p=102065;p<=102067;p++)S[p]=0;for(p=102070;p<=102117;p++)S[p]=0;for(p=102122;p<=102216;p++)S[p]=0;for(p=102221;p<=102377;p++)S[p]=0;for(p=102382;p<=102388;p++)S[p]=0;for(p=102389;p<=102398;p++)S[p]=2;for(p=102399;p<=102444;p++)S[p]=0;for(p=102445;p<=102447;p++)S[p]=2;for(p=102448;p<=102458;p++)S[p]=0;for(p=102459;p<=102468;p++)S[p]=2;for(p=102469;p<=102499;p++)S[p]=0;for(p=102500;p<=102519;p++)S[p]=1;for(p=102520;p<=102524;p++)S[p]=0;for(p=102525;p<=102529;p++)S[p]=2;for(p=102530;p<=102588;p++)S[p]=0;for(p=102590;p<=102598;p++)S[p]=0;for(p=102601;p<=102603;p++)S[p]=0;for(p=102605;p<=102628;p++)S[p]=0;for(p=102629;p<=102646;p++)S[p]=2;for(p=102648;p<=102700;p++)S[p]=2;for(p=102701;p<=102703;p++)S[p]=0;for(p=102707;p<=102730;p++)S[p]=2;for(p=102733;p<=102758;p++)S[p]=2;for(p=102767;p<=102900;p++)S[p]=0;for(p=102901;p<=102933;p++)S[p]=2;for(p=102934;p<=102950;p++)S[p]=13;for(p=102951;p<=102963;p++)S[p]=0;for(p=102965;p<=102969;p++)S[p]=0;for(p=102971;p<=102973;p++)S[p]=0;for(p=102975;p<=102989;p++)S[p]=0;for(p=102990;p<=102992;p++)S[p]=1;for(p=102997;p<=103002;p++)S[p]=0;for(p=103003;p<=103008;p++)S[p]=2;for(p=103009;p<=103011;p++)S[p]=0;for(p=103012;p<=103014;p++)S[p]=2;for(p=103019;p<=103021;p++)S[p]=0;for(p=103022;p<=103024;p++)S[p]=2;for(p=103029;p<=103031;p++)S[p]=0;for(p=103032;p<=103034;p++)S[p]=2;for(p=103065;p<=103068;p++)S[p]=0;for(p=103074;p<=103076;p++)S[p]=0;for(p=103077;p<=103079;p++)S[p]=1;for(p=103080;p<=103082;p++)S[p]=0;for(p=103083;p<=103085;p++)S[p]=2;for(p=103090;p<=103093;p++)S[p]=0;for(p=103097;p<=103099;p++)S[p]=0;for(p=103100;p<=103102;p++)S[p]=2;for(p=103107;p<=103109;p++)S[p]=0;for(p=103110;p<=103112;p++)S[p]=2;for(p=103113;p<=103116;p++)S[p]=0;for(p=103117;p<=103120;p++)S[p]=2;for(p=103153;p<=103157;p++)S[p]=0;for(p=103158;p<=103162;p++)S[p]=2;for(p=103163;p<=103165;p++)S[p]=0;for(p=103166;p<=103168;p++)S[p]=1;for(p=103169;p<=103171;p++)S[p]=2;for(p=103186;p<=103188;p++)S[p]=0;for(p=103189;p<=103191;p++)S[p]=2;for(p=103192;p<=103195;p++)S[p]=0;for(p=103196;p<=103199;p++)S[p]=2;for(p=103200;p<=103224;p++)S[p]=0;for(p=103225;p<=103227;p++)S[p]=1;for(p=103232;p<=103237;p++)S[p]=0;for(p=103238;p<=103243;p++)S[p]=2;for(p=103244;p<=103246;p++)S[p]=0;for(p=103247;p<=103249;p++)S[p]=2;for(p=103254;p<=103256;p++)S[p]=0;for(p=103257;p<=103259;p++)S[p]=2;for(p=103264;p<=103266;p++)S[p]=0;for(p=103267;p<=103269;p++)S[p]=2;for(p=103300;p<=103375;p++)S[p]=0;for(p=103381;p<=103383;p++)S[p]=0;for(p=103384;p<=103386;p++)S[p]=1;for(p=103387;p<=103389;p++)S[p]=0;for(p=103390;p<=103392;p++)S[p]=2;for(p=103397;p<=103399;p++)S[p]=0;for(p=103400;p<=103471;p++)S[p]=2;for(p=103476;p<=103478;p++)S[p]=0;for(p=103479;p<=103481;p++)S[p]=2;for(p=103486;p<=103488;p++)S[p]=0;for(p=103489;p<=103491;p++)S[p]=2;for(p=103492;p<=103495;p++)S[p]=0;for(p=103496;p<=103499;p++)S[p]=2;for(p=103528;p<=103543;p++)S[p]=0;for(p=103544;p<=103548;p++)S[p]=2;for(p=103549;p<=103551;p++)S[p]=0;for(p=103552;p<=103554;p++)S[p]=1;for(p=103555;p<=103557;p++)S[p]=2;for(p=103558;p<=103560;p++)S[p]=0;for(p=103571;p<=103573;p++)S[p]=0;for(p=103574;p<=103576;p++)S[p]=2;for(p=103577;p<=103580;p++)S[p]=0;for(p=103581;p<=103583;p++)S[p]=2;for(p=103595;p<=103694;p++)S[p]=0;for(p=103696;p<=103699;p++)S[p]=0;for(p=103700;p<=103793;p++)S[p]=2;for(p=103794;p<=103890;p++)S[p]=0;for(p=103891;p<=103896;p++)S[p]=2;for(p=103900;p<=103971;p++)S[p]=2;for(p=103972;p<=103977;p++)S[p]=0;for(p=112e3;p<=112101;p++)S[p]=0;const S6=[102100,102113,3857,3785],yX=[104905,104971],gX=[4326,...S6,...yX],aA='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',q0=[-20037508342788905e-9,20037508342788905e-9],B0=[-20037508342787e-6,20037508342787e-6],$6={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:q0,origin:B0,dx:1e-5},102100:{wkTemplate:aA,valid:q0,origin:B0,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:q0,origin:B0,dx:1e-5},3857:{wkTemplate:aA,valid:q0,origin:B0,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Wt(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||qs(e)&&qs(t))return!0;const o=e.latestWkid;if(o!=null&&i===o)return!0;const a=t.latestWkid;return a!=null&&r===a}let n,s;return e.wkt2&&t.wkt2?(n=e.wkt2,s=t.wkt2):e.wkt&&t.wkt&&(n=e.wkt,s=t.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function mi(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&$6[t]||null}function x6(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function jb(e){if(!Ai(e))return!1;const{wkid:t}=e;if(t)return S[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function vX(e){return!(T6(e)||M6(e))}function Oc(e){return(e==null?void 0:e.wkid)===4326}function Cxe(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function lA(e){return(e==null?void 0:e.wkid)===kc.CGCS2000}function qs(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&S6.includes(t)}function wX(e){return(e==null?void 0:e.wkid)===32662}function zb(e){return e===kc.GCSMARS2000||e===kc.GCSMARS2000_SPHERE}function T6(e){return zb(e==null?void 0:e.wkid)}function Vb(e){return e===kc.GCSMOON2000}function M6(e){return Vb(e==null?void 0:e.wkid)}function bX(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&gX.includes(t)}function Ai(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const E6={wkid:4326,wkt:yI($6[4326].wkTemplate,{Central_Meridian:"0.0"})},I6={wkid:102100,latestWkid:3857},_X={wkid:32662};function UI(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const SX=UI(bt),GI=UI(zs),qI=UI(kl),$X={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${bt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},xX=GI.wkt.toUpperCase(),TX=qI.wkt.toUpperCase();function MX(e){if(e!=null&&Ai(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(zb(t))return zs;const i=r==null?void 0:r.toUpperCase();if(r&&i===xX)return zs;if(Vb(t)||i&&i===TX)return kl}return bt}function Axe(e){return zb(e)?zs:Vb(e)?kl:bt}function vw(e){return Wt(e,SX)}function Ol(e){return vw(e)||Wt(e,GI)||Wt(e,qI)}const Rxe=39.37,EX=bt.radius*Math.PI/200,k6=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,pc=S,O6=/UNIT\[([^\]]+)]/i,IX=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),kX=Lr()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),cs=e=>e*e,da=e=>e*e*e,py={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:cs(.001)},"square-centimeters":{inBaseUnits:cs(.01)},"square-decimeters":{inBaseUnits:cs(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:cs(1e3)},"square-inches":{inBaseUnits:cs(.0254)},"square-feet":{inBaseUnits:cs(.3048)},"square-yards":{inBaseUnits:cs(.9144)},"square-miles":{inBaseUnits:cs(1609.344)},"square-us-feet":{inBaseUnits:cs(1200/3937)},acres:{inBaseUnits:.0015625*cs(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*da(.001)},"cubic-centimeters":{inBaseUnits:1e3*da(.01)},"cubic-decimeters":{inBaseUnits:1e3*da(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*da(1e3)},"cubic-inches":{inBaseUnits:1e3*da(.0254)},"cubic-feet":{inBaseUnits:1e3*da(.3048)},"cubic-yards":{inBaseUnits:1e3*da(.9144)},"cubic-miles":{inBaseUnits:1e3*da(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},OX=(()=>{const e={};for(const t in py)for(const r in py[t].units)e[r]=t;return e})();function PX(e,t,r){return e*py[r].units[t].inBaseUnits}function CX(e,t,r){return e/py[r].units[t].inBaseUnits}function vx(e){const t=OX[e];if(!t)throw new Error("unknown type");return t}function uA(e,t=null){return t=t||vx(e),py[t].baseUnit===e}function Zi(e,t,r){if(t===r)return e;const i=vx(t);if(i!==vx(r))throw new Error("incompatible units");const n=uA(t,i)?e:PX(e,t,i);return uA(r,i)?n:CX(n,r,i)}function AX(e,t,r){return Zi(e,t,"meters")/(r*Math.PI/180)}function P6(e){return kX.fromJSON(e.toLowerCase())||null}function ww(e){if(e!=null&&!vX(e))return 1;const t=Zc(e);return t>1e5?1:t}function RX(e){return Zc(e)>=MX(e).metersPerDegree?"meters":A6(e)}function Zc(e,t=bt.metersPerDegree){return LX(e,!0)??t}function LX(e,t=!1){const r=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let n=null;if(r){if(zb(r))return zs.metersPerDegree;if(Vb(r))return kl.metersPerDegree;n=pc.values[pc[r]],!n&&t&&IX.has(r)&&(n=EX)}else i&&(L6(i)?n=cA(k6.exec(i),n):R6(i)&&(n=cA(O6.exec(i),n)));return n}function Lxe(e){return jb(e)?1:Zc(e)}function cA(e,t){return e!=null&&e[1]?C6(e[1]):t}function C6(e){return parseFloat(e.split(",")[1])}function A6(e){const t=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(t)i=pc.units[pc[t]];else if(r){const n=L6(r)?k6:R6(r)?O6:null;if(n){const s=n.exec(r);s!=null&&s[1]&&(i=FX(s[1]))}}return i!=null?P6(i):null}function R6(e){return/^GEOCCS/i.test(e)}function L6(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const NX=1e-7;function FX(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let r=t==null?void 0:t[1];if(!r||!pc.units.includes(r)){const i=C6(e);r=null;const n=pc.values;for(let s=0;s<n.length;++s)if(Math.abs(i-n[s])<NX){r=pc.units[s];break}}return r}const DX={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},jX={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},zX={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},VX=Lr()(DX),UX=Lr()(jX),Nxe=Lr()(zX);var hs;let Oe=hs=class extends j{static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return hs.WebMercator;if(e.wkid===4326)return hs.WGS84}const t=new hs;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Oc(this)}get isWebMercator(){return qs(this)}get isGeographic(){return jb(this)}get isWrappable(){return bX(this)}get metersPerUnit(){return Zc(this)}get unit(){return A6(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===hs.WGS84)return new hs(E6);if(this===hs.WebMercator)return new hs(I6);const e=new hs;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=k(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||i?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===t&&n.referenceServiceName===r:n.id===t}return Wt(this,e)}toJSON(e){return this.write(void 0,e)}};Oe.GCS_NAD_1927=null,Oe.WGS84=null,Oe.WebMercator=null,Oe.PlateCarree=null,l([d({readOnly:!0})],Oe.prototype,"isWGS84",null),l([d({readOnly:!0})],Oe.prototype,"isWebMercator",null),l([d({readOnly:!0})],Oe.prototype,"isGeographic",null),l([d({readOnly:!0})],Oe.prototype,"isWrappable",null),l([d({type:Ve,json:{write:!0}})],Oe.prototype,"latestWkid",void 0),l([d({readOnly:!0})],Oe.prototype,"metersPerUnit",null),l([d({readOnly:!0})],Oe.prototype,"unit",null),l([d({type:Ve,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Oe.prototype,"wkid",void 0),l([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Oe.prototype,"wkt",void 0),l([Z("wkt"),Z("web-scene","wkt")],Oe.prototype,"writeWkt",null),l([d({type:String,json:{write:!1}})],Oe.prototype,"wkt2",void 0),l([d({type:Ve,json:{write:!0}})],Oe.prototype,"vcsWkid",void 0),l([d({type:Ve,json:{write:!0}})],Oe.prototype,"latestVcsWkid",void 0),l([d()],Oe.prototype,"imageCoordinateSystem",void 0),Oe=hs=l([x("esri.geometry.SpatialReference")],Oe),Oe.prototype.toJSON.isDefaultToJSON=!0,Oe.GCS_NAD_1927=new Oe({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Oe.WGS84=new Oe(E6),Oe.WebMercator=new Oe(I6),Oe.PlateCarree=new Oe(_X),Object.freeze&&(Object.freeze(Oe.GCS_NAD_1927),Object.freeze(Oe.WGS84),Object.freeze(Oe.WebMercator),Object.freeze(Oe.PlateCarree));const ve=Oe;function G(e,t,r){let i,n;return t===void 0||Array.isArray(t)?(n=e,r=t,i=[void 0]):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;i.forEach(u=>{const c=Lj(s,u,n);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],r&&(c.read.source=(c.read.source||[]).concat(r))})}}let fs=class extends j{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=ve.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof ve)return t;if(t!=null){const i=new ve;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};l([d()],fs.prototype,"type",void 0),l([d({readOnly:!0})],fs.prototype,"cache",null),l([d({readOnly:!0})],fs.prototype,"extent",null),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],fs.prototype,"hasM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],fs.prototype,"hasZ",void 0),l([d({type:ve,json:{write:!0},value:ve.WGS84})],fs.prototype,"spatialReference",void 0),l([G("spatialReference")],fs.prototype,"readSpatialReference",null),fs=l([x("esri.geometry.Geometry")],fs);const ia=fs,GX=Object.prototype.toString;function qX(e){const t="__accessorMetadata__"in e?Pt(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return BX.apply(this,r)}}function BX(e,t,r,i){Eb(e,t).cast=i}function HX(e){return(t,r)=>{Eb(t,e).cast=t[r]}}function je(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&GX.call(e[0])==="[object Function]"?qX(e[0]):e.length===1&&typeof e[0]=="string"?HX(e[0]):void 0}const WX=57.29577951308232,ZX=.017453292519943;function dA(e){return e*WX}function pA(e){return e*ZX}function Dxe(e){return Math.PI/2-2*Math.atan(Math.exp(-e/bt.radius))}function wx(e){return e.wkid!=null||e.wkt!=null}const xS=[0,0];function bw(e,t,r,i,n){const s=e,o=n;if(o.spatialReference=r,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,xS,i);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,xS,i),[o.xmax,o.ymax]=t(s.xmax,s.ymax,xS,i);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,u=[];let c;for(let h=0;h<a.length;h++){const f=a[h];c=[],u.push(c);for(let m=0;m<f.length;m++)c.push(t(f[m][0],f[m][1],[0,0],i)),f[m].length>2&&c[m].push(f[m][2]),f[m].length>3&&c[m].push(f[m][3])}"paths"in o?o.paths=u:o.rings=u}else if("points"in s&&"points"in o){const a=s.points,u=[];for(let c=0;c<a.length;c++)u[c]=t(a[c][0],a[c][1],[0,0],i),a[c].length>2&&u[c].push(a[c][2]),a[c].length>3&&u[c].push(a[c][3]);o.points=u}return n}function nv(e,t){const r=e&&(wx(e)?e:e.spatialReference),i=t&&(wx(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!Wt(i,r)||qs(i)&&Oc(r)||qs(r)&&Oc(i))}function Ub(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(wx(t)?t:t.spatialReference);return nv(r,i)?Wt(r,i)?k(e):qs(i)?bw(e,ap,ve.WebMercator,!1,k(e)):Oc(i)?bw(e,Gb,ve.WGS84,!1,k(e)):null:null}function ap(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=pA(t);return r[0]=pA(e)*bt.radius,r[1]=bt.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function Gb(e,t,r=[0,0],i=!1){const n=dA(e/bt.radius);return r[0]=i?n:n-360*Math.floor((n+180)/360),r[1]=dA(Math.PI/2-2*Math.atan(Math.exp(-t/bt.radius))),r}function hc(e,t=!1,r=k(e)){return bw(e,ap,ve.WebMercator,t,r)}function lp(e,t=!1,r=k(e)){return bw(e,Gb,ve.WGS84,t,r)}function N6(e,t){const r=e.x-t.x,i=e.y-t.y,n=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+n*n)}function JX(e){var t;return((t=F6(e,D6))==null?void 0:t[0])??null}function KX(e){var t;return((t=F6(e,D6))==null?void 0:t[1])??null}function F6({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(qs(r))return Gb(e,t,i);if(jb(r))return i[0]=e,i[1]=t,i}return null}const D6=[0,0];var sv;const TS=[0,0];function hA(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Dr=sv=class extends ia{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,n){let s;if(Array.isArray(e))s=e,n=t,e=s[0],t=s[1],r=s[2],i=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,r=s.z,i=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new ve(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)z.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)z.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&(n!=null&&n.isWebMercator)){const a=ap(s.longitude,s.latitude,TS);e=a[0],t=a[1]}}}else hA(r)?(n=r,r=null):hA(i)&&(n=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?z.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&z.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return KX(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",ap(r,e,TS)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return JX(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",ap(e,t,TS)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new sv;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return sv.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:n,spatialReference:s}=this,{z:o,m:a}=e;let{x:u,y:c,spatialReference:h}=e;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[u,c]=ap(u,c),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[u,c]=Gb(u,c),h=s}return t===u&&r===c&&i===o&&n===a&&s.wkid===h.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=mi(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,n=2*i;let s;return t>i?(s=Math.ceil(Math.abs(t-i)/n),t-=s*n):t<r&&(s=Math.ceil(Math.abs(t-r)/n),t+=s*n),this._set("x",t),this}distance(e){return N6(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};l([d({readOnly:!0})],Dr.prototype,"cache",null),l([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Dr.prototype,"hasM",null),l([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Dr.prototype,"hasZ",null),l([d({type:Number})],Dr.prototype,"latitude",null),l([d({type:Number})],Dr.prototype,"longitude",null),l([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),je(e=>isNaN(e)?e:ln(e))],Dr.prototype,"x",void 0),l([Z("x")],Dr.prototype,"writeX",null),l([G("x")],Dr.prototype,"readX",null),l([d({type:Number,json:{write:!0}})],Dr.prototype,"y",void 0),l([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Dr.prototype,"z",void 0),l([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Dr.prototype,"m",void 0),Dr=sv=l([x("esri.geometry.Point")],Dr),Dr.prototype.toJSON.isDefaultToJSON=!0;const ge=Dr,MS=[0,0];function Jy(e,t){return t!=null&&Gr(e,t.x,t.y,t.z)}function jxe(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!Qp(e,r))return!1;return!0}function YX(e,t){const{xmin:r,ymin:i,zmin:n,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?Gr(e,r,i,n)&&Gr(e,r,o,n)&&Gr(e,s,o,n)&&Gr(e,s,i,n)&&Gr(e,r,i,a)&&Gr(e,r,o,a)&&Gr(e,s,o,a)&&Gr(e,s,i,a):Gr(e,r,i)&&Gr(e,r,o)&&Gr(e,s,o)&&Gr(e,s,i)}function Qp(e,t){return Gr(e,t[0],t[1])}function QX(e,t){return Gr(e,t[0],t[1],t[2])}function Gr(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function BI(e,t){return MS[1]=t.y,MS[0]=t.x,XX(e,MS)}function XX(e,t){return HI(e.rings,t)}function HI(e,t){if(!e)return!1;if(eee(e))return fA(!1,e,t);let r=!1;for(let i=0,n=e.length;i<n;i++)r=fA(r,e[i],t);return r}function eee(e){return!Array.isArray(e[0][0])}function fA(e,t,r){const[i,n]=r;let s=e,o=0;for(let a=0,u=t.length;a<u;a++){o++,o===u&&(o=0);const[c,h]=t[a],[f,m]=t[o];(h<n&&m>=n||m<n&&h>=n)&&c+(n-h)/(m-h)*(f-c)<i&&(s=!s)}return s}function tee(e,t){return Jy(e,t)}function ree(e,t){const r=e.hasZ&&t.hasZ;let i,n,s;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function iee(e,t){const{points:r,hasZ:i}=t,n=i?QX:Qp;for(const s of r)if(n(e,s))return!0;return!1}const Pc=[0,0],Cc=[0,0],Ac=[0,0],Rc=[0,0],nee=[Pc,Cc,Ac,Rc],j6=[[Ac,Pc],[Pc,Cc],[Cc,Rc],[Rc,Ac]];function see(e,t){return oee(e,t.rings)}function oee(e,t){Pc[0]=e.xmin,Pc[1]=e.ymax,Cc[0]=e.xmax,Cc[1]=e.ymax,Ac[0]=e.xmin,Ac[1]=e.ymin,Rc[0]=e.xmax,Rc[1]=e.ymin;for(const r of nee)if(HI(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(Qp(e,i))return!0;for(let n=1;n<r.length;n++){const s=r[n];if(Qp(e,s)||z6(i,s,j6))return!0;i=s}}return!1}function aee(e,t){Pc[0]=e.xmin,Pc[1]=e.ymax,Cc[0]=e.xmax,Cc[1]=e.ymax,Ac[0]=e.xmin,Ac[1]=e.ymin,Rc[0]=e.xmax,Rc[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let n=i[0];if(Qp(e,n))return!0;for(let s=1;s<i.length;s++){const o=i[s];if(Qp(e,o)||z6(n,o,j6))return!0;n=o}}return!1}const Yt=[0,0];function lee(e){for(let t=0;t<e.length;t++){const r=e[t];for(let n=0;n<r.length-1;n++){const s=r[n],o=r[n+1];for(let a=t+1;a<e.length;a++)for(let u=0;u<e[a].length-1;u++){const c=e[a][u],h=e[a][u+1];if(bx(s,o,c,h,Yt)&&!(Yt[0]===s[0]&&Yt[1]===s[1]||Yt[0]===c[0]&&Yt[1]===c[1]||Yt[0]===o[0]&&Yt[1]===o[1]||Yt[0]===h[0]&&Yt[1]===h[1]))return!0}}const i=r.length;if(!(i<=4))for(let n=0;n<i-3;n++){let s=i-1;n===0&&(s=i-2);const o=r[n],a=r[n+1];for(let u=n+2;u<s;u++){const c=r[u],h=r[u+1];if(bx(o,a,c,h,Yt)&&!(Yt[0]===o[0]&&Yt[1]===o[1]||Yt[0]===c[0]&&Yt[1]===c[1]||Yt[0]===a[0]&&Yt[1]===a[1]||Yt[0]===h[0]&&Yt[1]===h[1]))return!0}}}return!1}function z6(e,t,r){for(let i=0;i<r.length;i++)if(bx(e,t,r[i][0],r[i][1]))return!0;return!1}function bx(e,t,r,i,n){const[s,o]=e,[a,u]=t,[c,h]=r,[f,m]=i,y=f-c,g=s-c,v=a-s,w=m-h,b=o-h,_=u-o,$=w*v-y*_;if($===0)return!1;const T=(y*b-w*g)/$,E=(v*b-_*g)/$;return T>=0&&T<=1&&E>=0&&E<=1&&(n&&(n[0]=s+T*(a-s),n[1]=o+T*(u-o)),!0)}function uee(e){switch(e){case"esriGeometryEnvelope":case"extent":return ree;case"esriGeometryMultipoint":case"multipoint":return iee;case"esriGeometryPoint":case"point":return tee;case"esriGeometryPolygon":case"polygon":return see;case"esriGeometryPolyline":case"polyline":return aee}}var Ji;function cee(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function pa(e,t,r){return t==null?r:r==null?t:e(t,r)}let zt=Ji=class extends ia{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,n){return cee(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?ve.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:n??ve.WGS84}}static fromBounds(e,t){return new Ji({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Ji({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new ge({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Ji;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&nv(t,r)&&(e=t.isWebMercator?hc(e):lp(e,!0)),e.type==="point"?Jy(this,e):e.type==="extent"&&YX(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&nv(t,r)&&(e=t.isWebMercator?hc(e):lp(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!Wt(t,r)&&nv(t,r)&&(e=t.isWebMercator?hc(e):lp(e,!0)),uee(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=pa(Math.min,this.zmin,e.zmin),this.zmax=pa(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=pa(Math.min,this.mmin,e.mmin),this.mmax=pa(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=pa(Math.max,this.zmin,e.zmin),this.zmax=pa(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=pa(Math.max,this.mmin,e.mmin),this.mmax=pa(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=mi(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?lp(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=ES(i.x,e).x),this.spatialReference=new ve(yI((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,n=this.xmin,s=this.xmax;return n>=r&&n<=i&&s>=r&&s<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const n=r??mi(i);if(n==null)return this;const s=this._getParts(n).map(u=>u.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return s;let o=!0,a=!0;return s.forEach(u=>{u.hasZ||(o=!1),u.hasM||(a=!1)}),{rings:s.map(u=>{const c=[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]];if(o){const h=(u.zmax-u.zmin)/2;for(let f=0;f<c.length;f++)c[f].push(h)}if(a){const h=(u.mmax-u.mmin)/2;for(let f=0;f<c.length;f++)c[f].push(h)}return c}),hasZ:o,hasM:a,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,u=this.xmin,c=this.xmax;let h;e=e||mi(o);const[f,m]=e.valid;h=ES(this.xmin,e);const y=h.x,g=h.frameId;h=ES(this.xmax,e);const v=h.x,w=h.frameId,b=y===v&&a>0;if(a>2*m){const _=new Ji(u<c?y:v,n,m,s,o),$=new Ji(f,n,u<c?v:y,s,o),T=new Ji(0,n,m,s,o),E=new Ji(f,n,0,s,o),I=[],C=[];_.contains(T)&&I.push(g),_.contains(E)&&C.push(g),$.contains(T)&&I.push(w),$.contains(E)&&C.push(w);for(let L=g+1;L<w;L++)I.push(L),C.push(L);t.push({extent:_,frameIds:[g]},{extent:$,frameIds:[w]},{extent:T,frameIds:I},{extent:E,frameIds:C})}else y>v||b?t.push({extent:new Ji(y,n,m,s,o),frameIds:[g]},{extent:new Ji(f,n,v,s,o),frameIds:[w]}):t.push({extent:new Ji(y,n,v,s,o),frameIds:[g]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const n={};r&&(n.zmin=this.zmin,n.zmax=this.zmax),i&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(n)}return t}};function ES(e,t){const[r,i]=t.valid,n=2*i;let s,o=0;return e>i?(s=Math.ceil(Math.abs(e-i)/n),e-=s*n,o=s):e<r&&(s=Math.ceil(Math.abs(e-r)/n),e+=s*n,o=-s),{x:e,frameId:o}}l([d({readOnly:!0})],zt.prototype,"cache",null),l([d({readOnly:!0})],zt.prototype,"center",null),l([d({readOnly:!0})],zt.prototype,"extent",null),l([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],zt.prototype,"hasM",null),l([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],zt.prototype,"hasZ",null),l([d({readOnly:!0})],zt.prototype,"height",null),l([d({readOnly:!0})],zt.prototype,"width",null),l([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],zt.prototype,"xmin",void 0),l([d({type:Number,json:{write:!0}})],zt.prototype,"ymin",void 0),l([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],zt.prototype,"mmin",void 0),l([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],zt.prototype,"zmin",void 0),l([d({type:Number,json:{write:!0}})],zt.prototype,"xmax",void 0),l([d({type:Number,json:{write:!0}})],zt.prototype,"ymax",void 0),l([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],zt.prototype,"mmax",void 0),l([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],zt.prototype,"zmax",void 0),zt=Ji=l([x("esri.geometry.Extent")],zt),zt.prototype.toJSON.isDefaultToJSON=!0;const Be=zt;let $m;var f5,m5;const dee=((f5=globalThis.esriConfig)==null?void 0:f5.locale)??((m5=globalThis.dojoConfig)==null?void 0:m5.locale);function V6(){var e;return dee??((e=globalThis.navigator)==null?void 0:e.language)??"en"}function Ni(){return $m===void 0&&($m=V6()),$m}function pee(e=Ni()){const t=/^([a-zA-Z]{2,3})(?:[_-]\w+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const ov=[];function U6(e){return ov.push(e),De(()=>ov.splice(ov.indexOf(e),1))}const av=[];function WI(e){return av.push(e),De(()=>av.splice(av.indexOf(e),1))}function hee(){const e=V6();$m!==e&&([...av].forEach(t=>t(e)),$m=e,[...ov].forEach(t=>t(e)))}var y5;(y5=globalThis.addEventListener)==null||y5.call(globalThis,"languagechange",hee);let H0;function fee(e){return H0&&!H0.destroyed||(H0=e()),H0}var _x;const mee=new Ee({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Ki=_x=class extends le{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new _x({categories:this.categories?k(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let i="";if(this.extent){const o=Ub(this.extent,ve.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const s={categories:r,bbox:i,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>mee.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};l([d()],Ki.prototype,"categories",void 0),l([d()],Ki.prototype,"disableExtraQuery",void 0),l([d({type:Be})],Ki.prototype,"extent",void 0),l([d()],Ki.prototype,"filter",void 0),l([d()],Ki.prototype,"num",void 0),l([d()],Ki.prototype,"query",void 0),l([d()],Ki.prototype,"sortField",void 0),l([d()],Ki.prototype,"sortOrder",null),l([d()],Ki.prototype,"start",void 0),Ki=_x=l([x("esri.portal.PortalQueryParams")],Ki);const Ns=Ki;var Sx;let Rt=Sx=class extends j{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new N("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new Sx({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=Pt(Ns,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new Ns,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new Ns,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then(i=>{const n=i.contentCategorySetsGroupQuery;if(n){const s=new Ns({disableExtraQuery:!0,num:1,query:n});return r.queryGroups(s,t)}throw new N("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const n=i.results[0],s=new Ns({num:1,query:`typekeywords:"${e}"`});return n.queryItems(s,t)}throw new N("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(n=>{const s=n==null?void 0:n.categorySchema;return s!=null&&s.length?s:[]}):[])}};l([d()],Rt.prototype,"access",void 0),l([d({type:Date})],Rt.prototype,"created",void 0),l([d()],Rt.prototype,"description",void 0),l([d()],Rt.prototype,"id",void 0),l([d()],Rt.prototype,"isInvitationOnly",void 0),l([d({type:Date})],Rt.prototype,"modified",void 0),l([d()],Rt.prototype,"owner",void 0),l([d()],Rt.prototype,"portal",void 0),l([d()],Rt.prototype,"snippet",void 0),l([d()],Rt.prototype,"sortField",void 0),l([d()],Rt.prototype,"sortOrder",void 0),l([d()],Rt.prototype,"sourceJSON",void 0),l([d()],Rt.prototype,"tags",void 0),l([d()],Rt.prototype,"thumbnail",void 0),l([d({readOnly:!0})],Rt.prototype,"thumbnailUrl",null),l([d()],Rt.prototype,"title",void 0),l([d({readOnly:!0})],Rt.prototype,"url",null),Rt=Sx=l([x("esri.portal.PortalGroup")],Rt);const $x=Rt;let pu=class extends le{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};l([d()],pu.prototype,"nextQueryParams",void 0),l([d()],pu.prototype,"queryParams",void 0),l([d()],pu.prototype,"results",void 0),l([d()],pu.prototype,"total",void 0),pu=l([x("esri.portal.PortalQueryResult")],pu);const yee=pu;let ao=class extends j{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var r;const t=(r=this.portal)==null?void 0:r.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new N("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};l([d({type:Date})],ao.prototype,"created",void 0),l([d()],ao.prototype,"id",void 0),l([d()],ao.prototype,"portal",void 0),l([d()],ao.prototype,"title",void 0),l([d({readOnly:!0})],ao.prototype,"url",null),l([d()],ao.prototype,"username",void 0),ao=l([x("esri.portal.PortalFolder")],ao);const gee=ao;var xx;let We=xx=class extends j{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e==null?void 0:e.data,i=e==null?void 0:e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),r!=null&&(typeof r=="string"?n.query.text=r:typeof r=="object"&&(n.query.text=JSON.stringify(r))));let s=this.userContentUrl;return i&&(s+="/"+(typeof i=="string"?i:i.id)),this.portal.request(s+"/addItem",n).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.concat();const r=this.userContentUrl+"/deleteItems",i=[],n=e.map(s=>s.id);if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:t}},o=await this.portal.request(r,s);for(const a of o.results){const u=e.find(f=>a.itemId===f.id),c=a.success;let h=null;c?(u.id=null,u.portal=null):a.error&&(h=new N("portal:delete-item-failed",a.error.message,a.error)),i.push({item:u,success:c,error:h})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const n=gee.fromJSON(i);return n.portal=this.portal,n}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=$x.fromJSON(r);return i.portal=this.portal,i}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await J(()=>Promise.resolve().then(()=>B6),void 0),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},n=await this.portal.request(t,{query:i});let s;return n!=null&&n.items?(s=n.items.map(o=>{const a=r.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new $x({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new N("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new N("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new xx({sourceJSON:e});return t.read(e),t}};l([d()],We.prototype,"access",void 0),l([d({type:Date})],We.prototype,"created",void 0),l([d()],We.prototype,"culture",void 0),l([d()],We.prototype,"description",void 0),l([d()],We.prototype,"email",void 0),l([d()],We.prototype,"favGroupId",void 0),l([d()],We.prototype,"fullName",void 0),l([d({type:Date})],We.prototype,"modified",void 0),l([d()],We.prototype,"orgId",void 0),l([d()],We.prototype,"portal",void 0),l([d()],We.prototype,"preferredView",void 0),l([d()],We.prototype,"privileges",void 0),l([d()],We.prototype,"region",void 0),l([d()],We.prototype,"role",void 0),l([d()],We.prototype,"roleId",void 0),l([d()],We.prototype,"sourceJSON",void 0),l([d()],We.prototype,"thumbnail",void 0),l([d({readOnly:!0})],We.prototype,"thumbnailUrl",null),l([d()],We.prototype,"units",void 0),l([d({readOnly:!0})],We.prototype,"userContentUrl",null),l([d({readOnly:!0})],We.prototype,"url",null),l([d()],We.prototype,"username",void 0),l([d()],We.prototype,"userLicenseTypeId",void 0),l([d()],We.prototype,"userType",void 0),We=xx=l([x("esri.portal.PortalUser")],We);const ZI=We;var $i;let W0;const mA={PortalGroup:()=>Promise.resolve({default:$x}),PortalItem:()=>J(()=>Promise.resolve().then(()=>B6),void 0),PortalUser:()=>Promise.resolve({default:ZI})};let W=$i=class extends Wy(Yo){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Pe.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){yA.unregister(this),this.defaultBasemap=nt(this.defaultBasemap),this.defaultDevBasemap=nt(this.defaultDevBasemap),this.defaultVectorBasemap=nt(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=pt(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Pe.request.trustedServers.includes(t)||Pe.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=ZI.fromJSON(e),t.portal=this),t}load(e){const t=J(()=>Promise.resolve().then(()=>Wee),void 0).then(({default:r})=>{ht(e),W0=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var i;if(_e){const n=_e;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==$i.AUTH_MODE_AUTO&&this.authMode!==$i.AUTH_MODE_NO_PROMPT||((i=this._esriIdCredentialCreateHandle)==null||i.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",vee(new WeakRef(this))),yA.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await J(async()=>{const{default:r}=await import("./ElevationLayer-o3nCuZUJ.js");return{default:r}},__vite__mapDeps([2,3,4,5,6]))).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,t);r.unshift(...i)}return r}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Ko(e)?Promise.reject(Ot()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new Ns({num:100,sortField:"title"});if(t!=null&&t.length){const i=[];for(const n of t)i.push(`(title:"${n.title}" AND owner:${n.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(n=>n.results)}return Ko(e)?Promise.reject(Ot()):Promise.resolve([])}fetchRegions(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||Ni();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||Ni();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return fee(()=>new $i)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Ni().toLowerCase()},withCredentials:!0,...r};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this.request(i,n)}queryPortal(e,t,r,i){const n=Pt(Ns,t),s=o=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...i}).then(a=>{const u=n.clone();return u.start=a.nextStart,new yee({nextQueryParams:u,queryParams:n,total:a.total,results:$i._resultsToTypedArray(o,{portal:this},a,i)})}).then(a=>Promise.all(a.results.map(u=>typeof u.when=="function"?u.when():a)).then(()=>a,u=>(As(u),a)));return r&&mA[r]?mA[r]().then(({default:o})=>(ht(i),s(o))):s()}signIn(){if(this.authMode===$i.AUTH_MODE_ANONYMOUS||this.authMode===$i.AUTH_MODE_NO_PROMPT&&!_e)return Promise.reject(new N("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return _e?_e.getCredential(this.restUrl,{prompt:this.authMode!==$i.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var r;const t=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(i=>{const n=$i._resultsToTypedArray(r,{portal:this},i);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():i)).then(()=>n,()=>n)})}request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===$i.AUTH_MODE_ANONYMOUS||this.authMode===$i.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:u}=t,c={authMode:i,body:n,cacheBust:s,method:o,query:r,responseType:a,timeout:0,signal:u};return t.withCredentials&&(c.withCredentials=!0),dt(this._normalizeSSL(e),c).then(h=>h.data)}toJSON(){throw new N("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new $i({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new N("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new Ns;r.query=e||(Pe.apiKey&&c6(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,t);if(!i.total)return[];const n=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc";const s=await n.queryItems(r,t);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new W0({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];const i=new Ns({query:r,disableExtraQuery:!0}),n=await this.queryGroups(i,t);if(!n.total)return[];const s=n.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(i,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new W0({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=W0.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,i){let n;if(r){const s=i!=null?i.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(n=n.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else n=[];return n}};W.AUTH_MODE_ANONYMOUS="anonymous",W.AUTH_MODE_AUTO="auto",W.AUTH_MODE_IMMEDIATE="immediate",W.AUTH_MODE_NO_PROMPT="no-prompt",l([d()],W.prototype,"access",void 0),l([d()],W.prototype,"allSSL",void 0),l([d()],W.prototype,"authMode",void 0),l([d()],W.prototype,"authorizedCrossOriginDomains",void 0),l([G("authorizedCrossOriginDomains")],W.prototype,"readAuthorizedCrossOriginDomains",null),l([d()],W.prototype,"basemapGalleryGroupQuery",void 0),l([d({json:{name:"3DBasemapGalleryGroupQuery"}})],W.prototype,"basemapGalleryGroupQuery3D",void 0),l([d()],W.prototype,"bingKey",void 0),l([d()],W.prototype,"canListApps",void 0),l([d()],W.prototype,"canListData",void 0),l([d()],W.prototype,"canListPreProvisionedItems",void 0),l([d()],W.prototype,"canProvisionDirectPurchase",void 0),l([d()],W.prototype,"canSearchPublic",void 0),l([d()],W.prototype,"canShareBingPublic",void 0),l([d()],W.prototype,"canSharePublic",void 0),l([d()],W.prototype,"canSignInArcGIS",void 0),l([d()],W.prototype,"canSignInIDP",void 0),l([d()],W.prototype,"colorSetsGroupQuery",void 0),l([d()],W.prototype,"commentsEnabled",void 0),l([d({type:Date})],W.prototype,"created",void 0),l([d()],W.prototype,"credential",void 0),l([d()],W.prototype,"culture",void 0),l([d()],W.prototype,"currentVersion",void 0),l([d()],W.prototype,"customBaseUrl",void 0),l([d()],W.prototype,"defaultBasemap",void 0),l([G("defaultBasemap")],W.prototype,"readDefaultBasemap",null),l([d()],W.prototype,"defaultDevBasemap",void 0),l([G("defaultDevBasemap")],W.prototype,"readDefaultDevBasemap",null),l([d({type:Be})],W.prototype,"defaultExtent",void 0),l([d()],W.prototype,"defaultVectorBasemap",void 0),l([G("defaultVectorBasemap")],W.prototype,"readDefaultVectorBasemap",null),l([d()],W.prototype,"description",void 0),l([d()],W.prototype,"devBasemapGalleryGroupQuery",void 0),l([d()],W.prototype,"eueiEnabled",void 0),l([d({readOnly:!0})],W.prototype,"extraQuery",null),l([d()],W.prototype,"featuredGroups",void 0),l([d()],W.prototype,"featuredItemsGroupQuery",void 0),l([d()],W.prototype,"galleryTemplatesGroupQuery",void 0),l([d()],W.prototype,"layoutGroupQuery",void 0),l([d()],W.prototype,"livingAtlasGroupQuery",void 0),l([d()],W.prototype,"hasCategorySchema",void 0),l([d()],W.prototype,"helpBase",void 0),l([d()],W.prototype,"helperServices",void 0),l([d()],W.prototype,"helpMap",void 0),l([d()],W.prototype,"homePageFeaturedContent",void 0),l([d()],W.prototype,"homePageFeaturedContentCount",void 0),l([d()],W.prototype,"httpPort",void 0),l([d()],W.prototype,"httpsPort",void 0),l([d()],W.prototype,"id",void 0),l([d()],W.prototype,"ipCntryCode",void 0),l([d({readOnly:!0})],W.prototype,"isOrganization",null),l([d()],W.prototype,"isPortal",void 0),l([d()],W.prototype,"isReadOnly",void 0),l([d({readOnly:!0})],W.prototype,"itemPageUrl",null),l([d()],W.prototype,"layerTemplatesGroupQuery",void 0),l([d()],W.prototype,"maxTokenExpirationMinutes",void 0),l([d({type:Date})],W.prototype,"modified",void 0),l([d()],W.prototype,"name",void 0),l([d()],W.prototype,"portalHostname",void 0),l([d()],W.prototype,"portalMode",void 0),l([d()],W.prototype,"portalProperties",void 0),l([d()],W.prototype,"region",void 0),l([d()],W.prototype,"recycleBinEnabled",void 0),l([d({readOnly:!0})],W.prototype,"restUrl",null),l([d()],W.prototype,"rotatorPanels",void 0),l([d()],W.prototype,"showHomePageDescription",void 0),l([d()],W.prototype,"sourceJSON",void 0),l([d()],W.prototype,"staticImagesUrl",void 0),l([d({json:{name:"2DStylesGroupQuery"}})],W.prototype,"stylesGroupQuery2d",void 0),l([d({json:{name:"stylesGroupQuery"}})],W.prototype,"stylesGroupQuery3d",void 0),l([d()],W.prototype,"supportsHostedServices",void 0),l([d()],W.prototype,"symbolSetsGroupQuery",void 0),l([d()],W.prototype,"templatesGroupQuery",void 0),l([d()],W.prototype,"thumbnail",void 0),l([d({readOnly:!0})],W.prototype,"thumbnailUrl",null),l([d()],W.prototype,"units",void 0),l([d()],W.prototype,"url",void 0),l([d()],W.prototype,"urlKey",void 0),l([G("urlKey")],W.prototype,"readUrlKey",null),l([d()],W.prototype,"user",void 0),l([G("user")],W.prototype,"readUser",null),l([d()],W.prototype,"use3dBasemaps",void 0),l([d()],W.prototype,"useStandardizedQuery",void 0),l([d()],W.prototype,"useVectorBasemaps",void 0),l([d()],W.prototype,"vectorBasemapGalleryGroupQuery",void 0),W=$i=l([x("esri.portal.Portal")],W);const wi=W,yA=new FinalizationRegistry(e=>{e.remove()});function vee(e){const t=_e;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let lo=class extends le{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:gA(t.path,t.portalItem)}:t}set path(t){t!=null&&Li(t)?z.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return gA(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new N("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey},signal:r==null?void 0:r.signal})}async update(t,r){const{addOrUpdateResources:i}=await J(()=>import("./resourceUtils-BeNZAEVP.js"),[]);return await i(this.portalItem,[{resource:this,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"update",r),this}hasPath(){return this.path!=null}};function gA(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&Li(e)&&(e=CI(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}l([d()],lo.prototype,"portalItem",void 0),l([d({type:String,value:null})],lo.prototype,"path",null),l([je("path")],lo.prototype,"_castPath",null),l([d({type:String,readOnly:!0})],lo.prototype,"url",null),l([d({type:String,readOnly:!0})],lo.prototype,"cdnUrl",null),l([d({type:String,readOnly:!0})],lo.prototype,"itemRelativeUrl",null),lo=l([x("esri.portal.PortalItemResource")],lo);const wee=lo;let gf=class extends le{constructor(t){super(t),this.created=null,this.rating=null}};l([d()],gf.prototype,"created",void 0),l([d()],gf.prototype,"rating",void 0),gf=l([x("esri.portal.PortalRating")],gf);const IS=gf;function fh(e,t){var i;const r=(i=t==null?void 0:t.url)==null?void 0:i.path;if(e&&r&&(e=cn(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const n=CI(e,t.portalItem.itemUrl);n!=null&&bee.test(n)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(n).path)}return(e=Tx(e,t==null?void 0:t.portal))&&qb.test(e)?KI(e):e}function Ky(e,t,r=hy.YES){var n,s;if((e=e&&qb.test(e)?q6(e):e)==null)return e;!Li(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let i=cn(e);if(t){const o=((n=t.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=t.url)==null?void 0:s.path);if(o){const a=Tx(o,t.portal),u=Tx(i,t.portal);i=CI(u,a,a),i!=null&&i!==u&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=G6(i,t==null?void 0:t.portal),Li(i)&&(i=Qn(i)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!Li(i)&&!Wc(i)&&r===hy.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function JI(e,t,r){return fh(e,r)}function Lc(e,t,r,i){const n=Ky(e,i);n!==void 0&&(t[r]=n)}const qb=/\/items\/([^/]+)\/resources\/(.*)/,bee=/^\.\/resources\//;function _ee(e){const t=(e==null?void 0:e.match(qb))??null;return(t==null?void 0:t[1])??null}function See(e){const t=(e==null?void 0:e.match(qb))??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:o,extension:a}=QC(r);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=QC(r.slice(i+1));return{prefix:r.slice(0,i),filename:n,extension:s}}function G6(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?lx(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function Tx(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=II();return Jp(i,`${i.scheme}://${r}`)?lx(e,t.portalHostname,r):lx(e,r,t.portalHostname)}function KI(e){if(!e)return e||null;let t=e;return t&&_e&&!_e.findCredential(t)&&(t=Xj(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function q6(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&_e&&!_e.findCredential(t)&&(t=Xj(t)),t}var hy;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(hy||(hy={}));const qxe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return hy},ensureMainOnlineDomain:G6,fromCDNUrl:q6,fromJSON:fh,itemIdFromResourceUrl:_ee,prefixAndFilenameFromResourceUrl:See,read:JI,toCDNUrl:KI,toJSON:Ky,write:Lc},Symbol.toStringTag,{value:"Module"}));var hu;const $ee=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),xee=new Set(["KML","GeoJson","CSV"]);let ye=hu=class extends Wy(Yo){static from(e){return Cb(hu,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new Be(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var y;const e=((y=this.type)==null?void 0:y.toLowerCase())||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let n,s=!1,o=!1,a=!1,u=!1,c=!1,h=!1,f=!1,m=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),u=t.includes("Markup"),c=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),n=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":u?"markup":c?"spatiotemporal":h?"utilitynetwork":s?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(c=t.includes("Spatiotemporal"),f=t.includes("Relational"),n=c||f?"mapimages":s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):n=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?n="maps":e==="web scene"?n=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?n="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?n="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?n="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?n="datafiles":e==="360 vr experience"?n="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?n="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?n="addindesktop":e==="pdf"?n="pdf":e==="microsoft word"?n="word":e==="microsoft excel"?n="excel":e==="microsoft powerpoint"?n="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?n="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?n="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?n="layersgray":e==="analysis model"?n="analysismodel":e==="scene package"?n="scenepackage":e==="3dtiles package"?n="3dtileslayerpackage":e==="3dtiles service"?n="3dtileslayer":e==="mobile scene package"?n="mobilescenepackage":e==="tile package"||e==="compact tile package"?n="tilepackage":e==="task file"?n="taskfile":e==="report template"?n="report-template":e==="statistical data collection"?n="statisticaldatacollection":e==="insights workbook"?n="workbook":e==="insights model"?n="insightsmodel":e==="insights page"?n="insightspage":e==="insights theme"?n="insightstheme":e==="hub initiative"?n="hubinitiative":e==="hub page"?n="hubpage":e==="hub site application"?n="hubsite":e==="hub event"?n="hubevent":e==="hub project"?n="hubproject":e==="relational database connection"?n="relationaldatabaseconnection":e==="big data file share"?n="datastorecollection":e==="image collection"?n="imagecollection":e==="desktop style"?n="desktopstyle":e==="style"?n=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?n="dashboard":e==="raster function template"?n="rasterprocessingtemplate":e==="vector tile package"?n="vectortilepackage":e==="ortho mapping project"?n="orthomappingproject":e==="ortho mapping template"?n="orthomappingtemplate":e==="solution"?n="solutions":e==="geopackage"?n="geopackage":e==="deep learning package"?n="deeplearningpackage":e==="real time analytic"?n="realtimeanalytics":e==="big data analytic"?n="bigdataanalytics":e==="feed"?n="feed":e==="excalibur imagery project"?n="excaliburimageryproject":e==="notebook"?n="notebook":e==="storymap"?n="storymap":e==="survey123 add in"?n="survey123addin":e==="mission"?n="mission":e==="mission report"?n="missionreport":e==="mission template"?n="missiontemplate":e==="quickcapture project"?n="quickcaptureproject":e==="pro report"?n="proreport":e==="pro report template"?n="proreporttemplate":e==="urban model"?n="urbanmodel":e==="web experience"?n="experiencebuilder":e==="web experience template"?n="webexperiencetemplate":e==="experience builder widget"?n="experiencebuilderwidget":e==="experience builder widget package"?n="experiencebuilderwidgetpackage":e==="workflow"?n="workflow":e==="kernel gateway connection"?n="kernelgatewayconnection":e==="insights script"?n="insightsscript":e==="hub initiative template"?n="hubinitiativetemplate":e==="storymap theme"?n="storymaptheme":e==="knowledge graph"?n="knowledgegraph":e==="knowledge graph layer"?n="knowledgegraphlayer":e==="knowledge studio project"?n="knowledgestudio":e==="native application"?n="nativeapp":e==="native application installer"?n="nativeappinstaller":e==="web link chart"?n="linkchart":e==="knowledge graph web investigation"?n="investigation":e==="ogcfeatureserver"?n="features":e==="pro project"?n="proproject":e==="insights workbook package"?n="insightsworkbookpackage":e==="apache parquet"?n="apacheparquet":e==="notebook code snippet library"?n="notebookcodesnippets":e==="suitability model"?n="suitabilitymodel":e==="esri classifier definition"?n="classifierdefinition":e==="esri classification schema"?n="classificationschema":e==="insights data engineering workbook"?n="dataengineeringworkbook":e==="insights data engineering model"?n="dataengineeringmodel":e==="deep learning studio project"?n="deeplearningproject":e==="discussion"?n="discussion":e==="allsource project"?n="allsourceproject":e==="api key"?n="apikey":e==="data pipeline"?n="datapipelines":e==="group layer"?(m=t.includes("Map"),n=m?"layergroup2d":"layergroup"):n=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",n?Ne(r+n+i+".png"):null}get isLayer(){return this.type!=null&&$ee.has(this.type)}get itemCdnUrl(){return KI(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var r;const e=this.itemUrl,t=this.thumbnail;return e&&t?((r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var r,i,n;const e=(r=this.portal)==null?void 0:r.restUrl;if(!e)return null;const t=this.owner||((n=(i=this.portal)==null?void 0:i.user)==null?void 0:n.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=wi.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof IS&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new IS({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:k(this.applicationProxies),avgRating:this.avgRating,categories:k(this.categories),created:k(this.created),culture:this.culture,description:this.description,extent:k(this.extent),groupCategories:k(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:k(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:k(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:k(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:k(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new hu({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var r;const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]=(r=e[i])==null?void 0:r.join(", ");const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new IS(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},hu)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new N("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new N("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:n,tags:s,title:o}=e||{},a={method:"post",query:{copyPrivateResources:i==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!i,tags:s==null?void 0:s.join(","),title:o}},{itemId:u}=await t.request(`${r}/copy`,a);return new hu({id:u,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")Wc(t)?i.query={data:t}:i.query={url:cn(t)},r!=null&&(i.query.filename=r);else{const n=new FormData;r!=null?n.append("file",t,r):n.append("file",t),i.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new N("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await J(()=>import("./resourceUtils-BeNZAEVP.js"),[]);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await J(()=>import("./resourceUtils-BeNZAEVP.js"),[]);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await J(()=>import("./resourceUtils-BeNZAEVP.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new N("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await J(()=>import("./resourceUtils-BeNZAEVP.js"),[]);return t(this,e)}resourceFromPath(e){return new wee({portalItem:this,path:e})}toJSON(){var r,i;const e=this.extent,t={accessInformation:this.accessInformation,categories:k(this.categories),created:(r=this.created)==null?void 0:r.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(i=this.modified)==null?void 0:i.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:k(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:k(this.typeKeywords),url:this.url};return YJ(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new hu({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};l([d({type:["private","shared","org","public"]})],ye.prototype,"access",void 0),l([d()],ye.prototype,"accessInformation",void 0),l([d({type:String})],ye.prototype,"apiKey",void 0),l([d({json:{read:{source:"appProxies"}}})],ye.prototype,"applicationProxies",void 0),l([d()],ye.prototype,"avgRating",void 0),l([d()],ye.prototype,"categories",void 0),l([d({type:Date})],ye.prototype,"created",void 0),l([d()],ye.prototype,"culture",void 0),l([d()],ye.prototype,"description",void 0),l([d({readOnly:!0})],ye.prototype,"displayName",null),l([d({type:Be})],ye.prototype,"extent",void 0),l([G("extent")],ye.prototype,"readExtent",null),l([d()],ye.prototype,"groupCategories",void 0),l([d({readOnly:!0})],ye.prototype,"iconUrl",null),l([d()],ye.prototype,"id",void 0),l([d({readOnly:!0})],ye.prototype,"isLayer",null),l([d({type:Boolean,readOnly:!0})],ye.prototype,"isOrgItem",void 0),l([d()],ye.prototype,"itemControl",void 0),l([d({readOnly:!0})],ye.prototype,"itemPageUrl",null),l([d({readOnly:!0})],ye.prototype,"itemUrl",null),l([d()],ye.prototype,"licenseInfo",void 0),l([d({type:Date})],ye.prototype,"modified",void 0),l([d()],ye.prototype,"name",void 0),l([d()],ye.prototype,"numComments",void 0),l([d()],ye.prototype,"numRatings",void 0),l([d()],ye.prototype,"numViews",void 0),l([d()],ye.prototype,"owner",void 0),l([d()],ye.prototype,"ownerFolder",void 0),l([d({type:wi})],ye.prototype,"portal",void 0),l([d()],ye.prototype,"screenshots",void 0),l([d()],ye.prototype,"size",void 0),l([d()],ye.prototype,"snippet",void 0),l([d()],ye.prototype,"sourceJSON",void 0),l([d({type:String})],ye.prototype,"sourceUrl",void 0),l([d({type:String})],ye.prototype,"spatialReference",void 0),l([d()],ye.prototype,"tags",void 0),l([d()],ye.prototype,"thumbnail",void 0),l([d({readOnly:!0})],ye.prototype,"thumbnailUrl",null),l([d()],ye.prototype,"title",void 0),l([d()],ye.prototype,"type",void 0),l([d()],ye.prototype,"typeKeywords",void 0),l([d({type:String,json:{read(e,t){var r;if(xee.has(t.type)){const i=(r=this.portal)==null?void 0:r.restUrl;e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return e}}})],ye.prototype,"url",void 0),l([d({readOnly:!0})],ye.prototype,"userItemUrl",null),ye=hu=l([x("esri.portal.PortalItem")],ye);const xm=ye,B6=Object.freeze(Object.defineProperty({__proto__:null,default:xm},Symbol.toStringTag,{value:"Module"})),vA=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Tee={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function wA(e){return e in Tee}const vf=[],Mp=new Map;function bA(e){for(const t of Mp.keys())W6(e.pattern,t)&&Mp.delete(t)}function Mee(e){return vf.includes(e)||(bA(e),vf.unshift(e)),De(()=>{const t=vf.indexOf(e);t>-1&&(vf.splice(t,1),bA(e))})}async function H6(e){const t=Ni();Mp.has(e)||Mp.set(e,Iee(e,t));const r=Mp.get(e);return r&&await kee.add(r),r}function Eee(e){if(!vA.test(e))return null;const t=vA.exec(e);if(t===null)return null;const[,r,i]=t,n=r+(i?"-"+i.toUpperCase():"");return wA(n)?n:wA(r)?r:null}async function Iee(e,t){const r=[];for(const i of vf)if(W6(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(n){r.push(n)}throw r.length?new N("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new N("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function W6(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}WI(()=>{Mp.clear()});const kee=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=ji())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Oee(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await H6("esri/t9n/basemaps");return r[e]||r[t]}const Mx={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ne("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ne("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ne("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ne("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ne("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ne("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ne("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ne("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ne("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ne("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ne("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ne("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Ne("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Ne("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Ne("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Ne("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Ne("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return Ne("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Ne("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Ne("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Ne("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Ne("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Ne("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Ne("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Ne("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Ne("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Ne("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},Pee=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let ba=class extends le{constructor(t){super(t),this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const t=Ni().toLowerCase();switch(t){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const r=pee(t);return r==="pt"?"pt-BR":r&&Pee.has(r)?r:"global"}};l([d()],ba.prototype,"id",void 0),l([d()],ba.prototype,"language",void 0),l([d()],ba.prototype,"places",void 0),l([d()],ba.prototype,"serviceUrl",void 0),l([d()],ba.prototype,"worldview",void 0),ba=l([x("esri.support.BasemapStyle")],ba);const Cee=ba;function Aee(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function fu(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const Hxe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function Z6(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function Bb(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function Wxe(e){var t;return((e==null?void 0:e.type)==="feature"||(e==null?void 0:e.type)==="subtype-group")&&((t=e.source)==null?void 0:t.type)==="feature-layer"}async function J6(e,t){const r=_e==null?void 0:_e.findServerInfo(e);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const n=`${e.substring(0,i)}/rest/info`,s=t!=null?t.signal:null,{data:o}=await dt(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function Ree(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Lee(e){return Ree(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function Nee(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Fee(e){return!!Nee(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const Dee=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),jee=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function zee(e){return e.layerContainerType==="basemap"?Dee:e.layerContainerType==="operational-layers"?jee:null}function Vee(e,t){if(t.restrictedWebMapWriting){const r=zee(t);return r==null||r.has(e.type)&&!Bb(e)}return!0}function Uee(e,t){var r;if(t)if(Bb(e)){const i=Mb("featureCollection.layers",t),n=(r=i==null?void 0:i[0])==null?void 0:r.layerDefinition;n&&_A(e,n)}else e.type!=="group"&&_A(e,t)}function _A(e,t){"maxScale"in e&&(t.maxScale=aw(e.maxScale)??void 0),"minScale"in e&&(t.minScale=aw(e.minScale)??void 0)}function Gee(e,t){if(Uee(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=aw(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(Bb(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function SA(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r!=null&&r.messages&&r.messages.push(new N("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Bb(e)&&!e.isTable)t=e.resourceInfo;else if(Vee(e,r)){const i={};return e.write(i,r)?i:null}return t!=null&&Gee(e,t=k(t)),t}var wf;let qee=0,xi=wf=class extends Wy(Yo){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+qee++,this.baseLayers=new te,this.referenceLayers=new te;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&z.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.addHandles([this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{z.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=nt(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Il(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=SA(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);s!=null&&i.push(s)}),this.referenceLayers.forEach(n=>{const s=SA(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);s!=null&&(n.type!=="scene"&&(s.isReference=!0),i.push(s))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",Il(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return v6(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>B1(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>B1(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new wf({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var r;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((r=this.resourceInfo)!=null&&r.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const n=k(i);return n.url&&Gs(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&Gs(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:i}=this;ht(e);const n=[];if(t){const s=t.context?t.context.url:null;if(n.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const o=t.data.id;n.push(Oee(o).then(a=>{a&&this.read({title:a},t.context)}))}}else r?n.push(this._loadFromItem(r,e)):i&&n.push(this._loadFromStylesService(i,e));await Promise.all(n)}async _loadLayersFromJSON(e,t,r){var u,c;const i=(u=this.resourceInfo)==null?void 0:u.context,n=((c=this.portalItem)==null?void 0:c.portal)||(i==null?void 0:i.portal)||null,s=Hee[(i==null?void 0:i.origin)||""]??"web-map",{populateOperationalLayers:o}=await J(async()=>{const{populateOperationalLayers:h}=await import("./layersCreator-DlJAumMp.js");return{populateOperationalLayers:h}},__vite__mapDeps([7,8,9,10])),a=[];if(ht(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const h={context:{...i,origin:s,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},f=g=>s==="web-scene"&&g.layerType==="ArcGISSceneServiceLayer"||g.isReference,m=o(this.baseLayers,e.baseMapLayers.filter(g=>!f(g)),h);a.push(m);const y=o(this.referenceLayers,e.baseMapLayers.filter(f),h);a.push(y)}await Promise.allSettled(a)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),n=Ar(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:Bee[e.type||""]??"web-map",portal:e.portal||wi.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||wi.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}async _loadFromStylesService(e,t){const r=`${e.serviceUrl}/${e.id}`,i=(await dt(r,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview},signal:t==null?void 0:t.signal})).data,n=Ar(r);return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:"web-map",url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}static fromId(e){const t=Mx[e];return t?t.itemId?new wf({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):wf.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};l([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:te}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],xi.prototype,"baseLayers",null),l([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],xi.prototype,"id",void 0),l([d({type:xm})],xi.prototype,"portalItem",void 0),l([d()],xi.prototype,"referenceLayers",null),l([d({readOnly:!0})],xi.prototype,"resourceInfo",void 0),l([d({type:ve})],xi.prototype,"spatialReference",void 0),l([d({type:Cee})],xi.prototype,"style",void 0),l([d()],xi.prototype,"thumbnailUrl",void 0),l([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],xi.prototype,"title",void 0),l([Z("title")],xi.prototype,"writeTitle",null),xi=wf=l([x("esri.Basemap")],xi);const Bee={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Hee={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Tm=xi,Wee=Object.freeze(Object.defineProperty({__proto__:null,default:Tm},Symbol.toStringTag,{value:"Module"})),_w={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function K6(e){return!!_w[e]||!!_w[e.toLowerCase()]}function YI(e){return _w[e]??_w[e.toLowerCase()]}function Zee(e){return[...YI(e)]}function kS(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function Y6(e,t,r,i=1){const n=(e%360+360)%360/360,s=r<=.5?r*(t+1):r+t-r*t,o=2*r-s;return[Math.round(255*kS(o,s,n+1/3)),Math.round(255*kS(o,s,n)),Math.round(255*kS(o,s,n-1/3)),i]}function Jee(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,n=t?1:17,s=t?e.length===9:e.length===5;let o=+("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let u;return s&&(u=o&i,o>>=r,a[3]=n*u/255),u=o&i,o>>=r,a[2]=n*u,u=o&i,o>>=r,a[1]=n*u,u=o&i,o>>=r,a[0]=n*u,a}function Ul(){return[0,0,0]}function Kee(e){return[e[0],e[1],e[2]]}function Yy(e,t,r){return[e,t,r]}function Yee(e,t=Ul()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Qee(e,t){return new Float64Array(e,t,3)}function Q6(){return Ul()}function X6(){return Yy(1,1,1)}function e8(){return Yy(1,0,0)}function t8(){return Yy(0,1,0)}function r8(){return Yy(0,0,1)}const Xee=Q6(),ete=X6(),tte=e8(),rte=t8(),ite=r8();Object.freeze(Object.defineProperty({__proto__:null,ONES:ete,UNIT_X:tte,UNIT_Y:rte,UNIT_Z:ite,ZEROS:Xee,clone:Kee,create:Ul,createView:Qee,fromArray:Yee,fromValues:Yy,ones:X6,unitX:e8,unitY:t8,unitZ:r8,zeros:Q6},Symbol.toStringTag,{value:"Module"}));let QI=1e-6;function Zr(){return QI}function nte(e){QI=e}const Hb=Math.random,ste=Math.PI/180,ote=180/Math.PI;function XI(e){return e*ste}function ate(e){return e*ote}function lte(e,t){return Math.abs(e-t)<=QI*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Hb,equals:lte,getEpsilon:Zr,setEpsilon:nte,toDegree:ate,toRadian:XI},Symbol.toStringTag,{value:"Module"}));function ek(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function ute(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function i8(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function cte(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function n8(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function s8(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function o8(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function dte(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function pte(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function hte(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function fte(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function mte(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function yte(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function gte(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function a8(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function vte(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function l8(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}function u8(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function c8(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function wte(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function bte(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Ex(e,t){const r=t[0],i=t[1],n=t[2];let s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function d8(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _te(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],u=r[2];return e[0]=n*u-s*a,e[1]=s*o-i*u,e[2]=i*a-n*o,e}function Ste(e,t,r,i){const n=t[0],s=t[1],o=t[2];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e}function $te(e,t,r,i,n,s){const o=s*s,a=o*(2*s-3)+1,u=o*(s-2)+s,c=o*(s-1),h=o*(3-2*s);return e[0]=t[0]*a+r[0]*u+i[0]*c+n[0]*h,e[1]=t[1]*a+r[1]*u+i[1]*c+n[1]*h,e[2]=t[2]*a+r[2]*u+i[2]*c+n[2]*h,e}function xte(e,t,r,i,n,s){const o=1-s,a=o*o,u=s*s,c=a*o,h=3*s*a,f=3*u*o,m=u*s;return e[0]=t[0]*c+r[0]*h+i[0]*f+n[0]*m,e[1]=t[1]*c+r[1]*h+i[1]*f+n[1]*m,e[2]=t[2]*c+r[2]*h+i[2]*f+n[2]*m,e}function Tte(e,t){t=t||1;const r=Hb,i=2*r()*Math.PI,n=2*r()-1,s=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(i)*s,e[1]=Math.sin(i)*s,e[2]=n*t,e}function Mte(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12],e[1]=r[1]*i+r[5]*n+r[9]*s+r[13],e[2]=r[2]*i+r[6]*n+r[10]*s+r[14],e}function Ete(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=i*r[0]+n*r[3]+s*r[6],e[1]=i*r[1]+n*r[4]+s*r[7],e[2]=i*r[2]+n*r[5]+s*r[8],e}function Ite(e,t,r){const i=r[0],n=r[1],s=r[2],o=r[3],a=t[0],u=t[1],c=t[2],h=n*c-s*u,f=s*a-i*c,m=i*u-n*a,y=n*m-s*f,g=s*h-i*m,v=i*f-n*h,w=2*o;return e[0]=a+h*w+2*y,e[1]=u+f*w+2*g,e[2]=c+m*w+2*v,e}function kte(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0],s[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),s[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function Ote(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),s[1]=n[1],s[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function Pte(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),s[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),s[2]=n[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function Cte(e,t){Ex($A,e),Ex(xA,t);const r=d8($A,xA);return r>1?0:r<-1?Math.PI:Math.acos(r)}const $A=Ul(),xA=Ul();function Ate(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Rte(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Lte(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=t[0],o=t[1],a=t[2],u=Zr();return Math.abs(r-s)<=u*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=u*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=u*Math.max(1,Math.abs(n),Math.abs(a))}function Nte(e,t,r){const i=r[0]-t[0],n=r[1]-t[1],s=r[2]-t[2];let o=i*i+n*n+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=n*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const Fte=n8,Dte=s8,jte=o8,zte=l8,Vte=u8,Ute=ek,Gte=c8;Object.freeze(Object.defineProperty({__proto__:null,abs:hte,add:cte,angle:Cte,bezier:xte,ceil:dte,copy:ute,cross:_te,direction:Nte,dist:zte,distance:l8,div:jte,divide:o8,dot:d8,equals:Lte,exactEquals:Rte,floor:pte,hermite:$te,inverse:bte,len:Ute,length:ek,lerp:Ste,max:yte,min:mte,mul:Dte,multiply:s8,negate:wte,normalize:Ex,random:Tte,rotateX:kte,rotateY:Ote,rotateZ:Pte,round:gte,scale:a8,scaleAndAdd:vte,set:i8,sign:fte,sqrDist:Vte,sqrLen:Gte,squaredDistance:u8,squaredLength:c8,str:Ate,sub:Fte,subtract:n8,transformMat3:Ete,transformMat4:Mte,transformQuat:Ite},Symbol.toStringTag,{value:"Module"}));const TA=new Float32Array(1);function Zxe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function ss(e,t,r){return Math.min(Math.max(e,t),r)}function Jxe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function bf(e,t,r){return e+(t-e)*r}function Kxe(e,t,r,i,n){return bf(i,n,(e-t)/(r-t))}function Wb(e){return e*Math.PI/180}function p8(e){return 180*e/Math.PI}function Yxe(e){return Math.acos(ss(e,-1,1))}function h8(e){return Math.asin(ss(e,-1,1))}function OS(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}const Sw=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function Ix(e){return Sw.setFloat64(0,e),Sw.getBigInt64(0)}function qte(e){return Sw.setBigInt64(0,e),Sw.getFloat64(0)}const lv=BigInt("1000000"),Bte=f8(1);function f8(e){const t=Ix(e=Math.abs(e)),r=qte(t<=lv?lv:t-lv);return Math.abs(e-r)}function Qxe(e,t,r=Bte){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&f8(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=Ix(e),n=Ix(t);return i<0!=n<0?!1:!((i<n?n-i:i-n)>lv)}function Xxe(e){return m8(Math.max(-MA,Math.min(e,MA)))}function m8(e){return TA[0]=e,TA[0]}function eTe(e,t){const r=ek(e),i=h8(e[2]/r),n=Math.atan2(e[1]/r,e[0]/r);return i8(t,r,i,n),t}function tTe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(OS(t,1)&&OS(r,1)&&OS(i,1))}const MA=m8(34028234663852886e22);function Z0(e){return ss($I(e),0,255)}function J0(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function K0(e,t){const r=e.toString(16).padStart(2,"0");return t?r.substring(0,1):r}let uv=class Vt{static blendColors(t,r,i,n=new Vt){return n.r=Math.round(t.r+(r.r-t.r)*i),n.g=Math.round(t.g+(r.g-t.g)*i),n.b=Math.round(t.b+(r.b-t.b)*i),n.a=t.a+(r.a-t.a)*i,n._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(i){const n=i[2].split(/\s*,\s*/),s=i[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(u=>2.56*parseFloat(u));return n.length===4&&(a[3]=parseFloat(n[3])),Vt.fromArray(a,r)}return Vt.fromArray(n.map(a=>parseFloat(a)),r)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return Vt.fromArray(Y6(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),r)}return null}static fromHex(t,r=new Vt){if(t[0]!=="#"||isNaN(+`0x${t.substring(1)}`))return null;switch(t.length){case 4:case 5:{const i=parseInt(t.substring(1,2),16),n=parseInt(t.substring(2,3),16),s=parseInt(t.substring(3,4),16),o=t.length===5?15:parseInt(t.substring(4),16);return Vt.fromArray([i+16*i,n+16*n,s+16*s,(o+16*o)/255],r)}case 7:case 9:{const i=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),s=parseInt(t.substring(5,7),16),o=t.length===7?255:parseInt(t.substring(7),16);return Vt.fromArray([i,n,s,o/255],r)}default:return null}}static fromArray(t,r=new Vt){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=K6(t)?YI(t):null;return i&&Vt.fromArray(i,r)||Vt.fromRgb(t,r)||Vt.fromHex(t,r)}static fromJSON(t){return t!=null?new Vt([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?Vt.fromString(t,this):Array.isArray(t)?Vt.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof Vt||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=(t==null?void 0:t.capitalize)??!1,i=(t==null?void 0:t.digits)??6,n=i===3||i===4,s=i===4||i===8,o=`#${K0(this.r,n)}${K0(this.g,n)}${K0(this.b,n)}${s?K0(Math.round(255*this.a),n):""}`;return r?o.toUpperCase():o}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Vt.AlphaMode.ALWAYS){const r=Z0(this.r),i=Z0(this.g),n=Z0(this.b);return t===Vt.AlphaMode.ALWAYS||this.a!==1?[r,i,n,Z0(255*this.a)]:[r,i,n]}clone(){return new Vt(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(J0(this.r,0,255)),this.g=Math.round(J0(this.g,0,255)),this.b=Math.round(J0(this.b,0,255)),this.a=J0(this.a,0,1),this}_set(t,r,i,n){this.r=t,this.g=r,this.b=i,this.a=n}};uv.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(uv||(uv={}));const ce=uv;function rTe(e){}function Hte(e){return()=>e}function ne(e,t={}){const r=e instanceof Ee?e:new Ee(e,t),i={type:(t==null?void 0:t.ignoreUnknown)??1?r.apiValues:String,json:{type:r.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:r.read},write:{writer:r.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(i.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(i.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(i.json.name=t.name),(t==null?void 0:t.nonNullable)!==void 0&&(i.nonNullable=t.nonNullable),d(i)}var kx;let cv=kx=class extends j{constructor(e){super(e),this.type="none"}clone(){return new kx({type:this.type})}};l([ne({none:"none",stayAbove:"stay-above"})],cv.prototype,"type",void 0),cv=kx=l([x("esri.ground.NavigationConstraint")],cv);function Zb(e){const t=$I(100*(1-e));return Math.max(0,Math.min(t,100))}function fy(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var Ox;let uo=Ox=class extends Wy(Yo){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new te;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&z.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{bi(e)||z.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)nt(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Il(e,this._get("layers")))}writeLayers(e,t,r,i){const n=[];e&&(i={...i,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};Hte(s)().write(o,i)&&n.push(o)}else i!=null&&i.messages&&i.messages.push(new N("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return v6(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await J(()=>import("./ElevationQuery-DFlzUFIm.js"),[]);ht(t);const i=new r,n=this.layers.filter(EA).toArray();return i.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await J(()=>import("./ElevationQuery-DFlzUFIm.js"),[]);ht(t);const i=new r,n=this.layers.filter(EA).toArray();return i.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:k(this.surfaceColor),navigationConstraint:k(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Ox({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,r){const i=(t==null?void 0:t.origin)||"web-scene",n=(t==null?void 0:t.portal)||null,s=(t==null?void 0:t.url)||null,{populateOperationalLayers:o}=await J(async()=>{const{populateOperationalLayers:u}=await import("./layersCreator-DlJAumMp.js");return{populateOperationalLayers:u}},__vite__mapDeps([7,8,9,10]));ht(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const u={context:{origin:i,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,u))}await Promise.allSettled(a)}};function Wte(e){return e&&"createElevationSampler"in e}function EA(e){return e.type==="elevation"||Wte(e)}l([d({json:{read:!1}})],uo.prototype,"layers",null),l([Z("layers")],uo.prototype,"writeLayers",null),l([d({readOnly:!0})],uo.prototype,"resourceInfo",void 0),l([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Ve,read:{reader:fy,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Zb(e)},target:"transparency"}}})],uo.prototype,"opacity",void 0),l([d({type:ce,json:{type:[Ve],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],uo.prototype,"surfaceColor",void 0),l([d({type:cv,json:{write:!0}})],uo.prototype,"navigationConstraint",void 0),uo=Ox=l([x("esri.Ground")],uo);const $w=uo;let fd=class extends te{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(Ej(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let r=0;for(const i of t)i!=null&&(r=this._processCollection(r,i));this.splice(r,this.length)}_createNewInstance(t){return new te(t)}_processCollection(t,r){if(!r)return t;const i=this.itemFilterFunction??(n=>!!n);for(const n of r)if(n){if(i(n)){const s=this.indexOf(n,t);s>=0?s!==t&&this.reorder(n,t):this.add(n,t),++t}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)t=this._processCollection(t,o);else t=this._processCollection(t,s)}}return t}};l([d()],fd.prototype,"getCollections",void 0),l([d()],fd.prototype,"getChildrenFunction",void 0),l([d()],fd.prototype,"itemFilterFunction",void 0),fd=l([x("esri.core.CollectionFlattener")],fd);const my=fd;function he(e,t,r={}){return tk(e,t,r,y8)}function Qo(e,t,r={}){return tk(e,t,r,g8)}function tk(e,t,r={},i){let n=null;const s=r.once?(o,a)=>{i(o)&&(pt(n),t(o,a))}:(o,a)=>{i(o)&&t(o,a)};if(n=hY(e,s,r.sync,r.equals),r.initial){const o=e();s(o,o)}return n}function Nc(e,t,r,i={}){let n=null,s=null,o=null;function a(){var h;n&&s&&(s.remove(),(h=i.onListenerRemove)==null||h.call(i,n),n=null,s=null)}function u(h){i.once&&i.once&&pt(o),r(h)}const c=he(e,(h,f)=>{var m;a(),Ib(h)&&(n=h,s=By(h,t,u),(m=i.onListenerAdd)==null||m.call(i,h))},{sync:i.sync,initial:!0});return o=De(()=>{c.remove(),a()}),o}function rk(e,t){return Zte(e,g8,t)}function Zte(e,t,r){if(Ko(r))return Promise.reject(Ot());const i=e();if(t!=null&&t(i))return Promise.resolve(i);let n=null;function s(){n=pt(n)}return new Promise((o,a)=>{n=Uy([yn(r,()=>{s(),a(Ot())}),tk(e,u=>{s(),o(u)},{sync:!1,once:!0},t??y8)])})}function y8(e){return!0}function g8(e){return!!e}const Pl={sync:!0},Jr={initial:!0},un={sync:!0,initial:!0},Y0=new WeakMap;function v8(e){return!e.destroyed&&(Y0.has(e)||e.addHandles([he(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||v8(t))},t=>Y0.set(e,t),un),De(()=>Y0.delete(e))]),Y0.get(e))}function Jte(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function Kte(e){var t,r;return!(!Jte(e)||!((r=(t=Lee(e))==null?void 0:t.operations)!=null&&r.supportsEditing)||"editingEnabled"in e&&!Fee(e)||v8(e))}const Yte=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Qte="screenUtils.toPt: input not recognized!",w8=96;function Xte(e){return e?e/72*w8:0}function $n(e){return e?72*e/w8:0}function Ie(e){if(typeof e=="string"){const t=e.match(Yte);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",s=i==="px"?$n(r):r;return n?-s:s}return console.warn(Qte),null}return e}function pr(e=0,t=0){return{x:e,y:t}}function nTe(e=0,t=0){return[e,t]}function Jb(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ere(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function tre(e,t,r,i,n,s,o,a,u,c,h,f,m,y,g,v){const w=new Float32Array(16);return w[0]=e,w[1]=t,w[2]=r,w[3]=i,w[4]=n,w[5]=s,w[6]=o,w[7]=a,w[8]=u,w[9]=c,w[10]=h,w[11]=f,w[12]=m,w[13]=y,w[14]=g,w[15]=v,w}function rre(e,t){return new Float32Array(e,t,16)}const ire=Jb();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:ire,clone:ere,create:Jb,createView:rre,fromValues:tre},Symbol.toStringTag,{value:"Module"}));function nre(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Gl(e,t,r,i,n,s,o,a,u,c,h,f,m,y,g,v,w){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=u,e[8]=c,e[9]=h,e[10]=f,e[11]=m,e[12]=y,e[13]=g,e[14]=v,e[15]=w,e}function Kb(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ql(e,t){if(e===t){const r=t[1],i=t[2],n=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=n,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function sre(e,t){return b8(e,t)||Kb(e),e}function b8(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],w=t[14],b=t[15],_=r*a-i*o,$=r*u-n*o,T=r*c-s*o,E=i*u-n*a,I=i*c-s*a,C=n*c-s*u,L=h*v-f*g,H=h*w-m*g,V=h*b-y*g,Y=f*w-m*v,ee=f*b-y*v,Te=m*b-y*w;let oe=_*Te-$*ee+T*Y+E*V-I*H+C*L;return oe?(oe=1/oe,e[0]=(a*Te-u*ee+c*Y)*oe,e[1]=(n*ee-i*Te-s*Y)*oe,e[2]=(v*C-w*I+b*E)*oe,e[3]=(m*I-f*C-y*E)*oe,e[4]=(u*V-o*Te-c*H)*oe,e[5]=(r*Te-n*V+s*H)*oe,e[6]=(w*T-g*C-b*$)*oe,e[7]=(h*C-m*T+y*$)*oe,e[8]=(o*ee-a*V+c*L)*oe,e[9]=(i*V-r*ee-s*L)*oe,e[10]=(g*I-v*T+b*_)*oe,e[11]=(f*T-h*I-y*_)*oe,e[12]=(a*H-o*Y-u*L)*oe,e[13]=(r*Y-i*H+n*L)*oe,e[14]=(v*$-g*E-w*_)*oe,e[15]=(h*E-f*$+m*_)*oe,e):null}function ore(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],w=t[14],b=t[15];return e[0]=a*(m*b-y*w)-f*(u*b-c*w)+v*(u*y-c*m),e[1]=-(i*(m*b-y*w)-f*(n*b-s*w)+v*(n*y-s*m)),e[2]=i*(u*b-c*w)-a*(n*b-s*w)+v*(n*c-s*u),e[3]=-(i*(u*y-c*m)-a*(n*y-s*m)+f*(n*c-s*u)),e[4]=-(o*(m*b-y*w)-h*(u*b-c*w)+g*(u*y-c*m)),e[5]=r*(m*b-y*w)-h*(n*b-s*w)+g*(n*y-s*m),e[6]=-(r*(u*b-c*w)-o*(n*b-s*w)+g*(n*c-s*u)),e[7]=r*(u*y-c*m)-o*(n*y-s*m)+h*(n*c-s*u),e[8]=o*(f*b-y*v)-h*(a*b-c*v)+g*(a*y-c*f),e[9]=-(r*(f*b-y*v)-h*(i*b-s*v)+g*(i*y-s*f)),e[10]=r*(a*b-c*v)-o*(i*b-s*v)+g*(i*c-s*a),e[11]=-(r*(a*y-c*f)-o*(i*y-s*f)+h*(i*c-s*a)),e[12]=-(o*(f*w-m*v)-h*(a*w-u*v)+g*(a*m-u*f)),e[13]=r*(f*w-m*v)-h*(i*w-n*v)+g*(i*m-n*f),e[14]=-(r*(a*w-u*v)-o*(i*w-n*v)+g*(i*u-n*a)),e[15]=r*(a*m-u*f)-o*(i*m-n*f)+h*(i*u-n*a),e}function are(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],h=e[9],f=e[10],m=e[11],y=e[12],g=e[13],v=e[14],w=e[15];return(t*o-r*s)*(f*w-m*v)-(t*a-i*s)*(h*w-m*g)+(t*u-n*s)*(h*v-f*g)+(r*a-i*o)*(c*w-m*y)-(r*u-n*o)*(c*v-f*y)+(i*u-n*a)*(c*g-h*y)}function _8(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],f=t[8],m=t[9],y=t[10],g=t[11],v=t[12],w=t[13],b=t[14],_=t[15];let $=r[0],T=r[1],E=r[2],I=r[3];return e[0]=$*i+T*a+E*f+I*v,e[1]=$*n+T*u+E*m+I*w,e[2]=$*s+T*c+E*y+I*b,e[3]=$*o+T*h+E*g+I*_,$=r[4],T=r[5],E=r[6],I=r[7],e[4]=$*i+T*a+E*f+I*v,e[5]=$*n+T*u+E*m+I*w,e[6]=$*s+T*c+E*y+I*b,e[7]=$*o+T*h+E*g+I*_,$=r[8],T=r[9],E=r[10],I=r[11],e[8]=$*i+T*a+E*f+I*v,e[9]=$*n+T*u+E*m+I*w,e[10]=$*s+T*c+E*y+I*b,e[11]=$*o+T*h+E*g+I*_,$=r[12],T=r[13],E=r[14],I=r[15],e[12]=$*i+T*a+E*f+I*v,e[13]=$*n+T*u+E*m+I*w,e[14]=$*s+T*c+E*y+I*b,e[15]=$*o+T*h+E*g+I*_,e}function lre(e,t,r){const i=r[0],n=r[1],s=r[2];if(t===e)e[12]=t[0]*i+t[4]*n+t[8]*s+t[12],e[13]=t[1]*i+t[5]*n+t[9]*s+t[13],e[14]=t[2]*i+t[6]*n+t[10]*s+t[14],e[15]=t[3]*i+t[7]*n+t[11]*s+t[15];else{const o=t[0],a=t[1],u=t[2],c=t[3],h=t[4],f=t[5],m=t[6],y=t[7],g=t[8],v=t[9],w=t[10],b=t[11];e[0]=o,e[1]=a,e[2]=u,e[3]=c,e[4]=h,e[5]=f,e[6]=m,e[7]=y,e[8]=g,e[9]=v,e[10]=w,e[11]=b,e[12]=o*i+h*n+g*s+t[12],e[13]=a*i+f*n+v*s+t[13],e[14]=u*i+m*n+w*s+t[14],e[15]=c*i+y*n+b*s+t[15]}return e}function ure(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function cre(e,t,r,i){let n,s,o,a,u,c,h,f,m,y,g,v,w,b,_,$,T,E,I,C,L,H,V,Y,ee=i[0],Te=i[1],oe=i[2],St=Math.sqrt(ee*ee+Te*Te+oe*oe);return St<Zr()?null:(St=1/St,ee*=St,Te*=St,oe*=St,n=Math.sin(r),s=Math.cos(r),o=1-s,a=t[0],u=t[1],c=t[2],h=t[3],f=t[4],m=t[5],y=t[6],g=t[7],v=t[8],w=t[9],b=t[10],_=t[11],$=ee*ee*o+s,T=Te*ee*o+oe*n,E=oe*ee*o-Te*n,I=ee*Te*o-oe*n,C=Te*Te*o+s,L=oe*Te*o+ee*n,H=ee*oe*o+Te*n,V=Te*oe*o-ee*n,Y=oe*oe*o+s,e[0]=a*$+f*T+v*E,e[1]=u*$+m*T+w*E,e[2]=c*$+y*T+b*E,e[3]=h*$+g*T+_*E,e[4]=a*I+f*C+v*L,e[5]=u*I+m*C+w*L,e[6]=c*I+y*C+b*L,e[7]=h*I+g*C+_*L,e[8]=a*H+f*V+v*Y,e[9]=u*H+m*V+w*Y,e[10]=c*H+y*V+b*Y,e[11]=h*H+g*V+_*Y,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function dre(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[4],o=t[5],a=t[6],u=t[7],c=t[8],h=t[9],f=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+c*i,e[5]=o*n+h*i,e[6]=a*n+f*i,e[7]=u*n+m*i,e[8]=c*n-s*i,e[9]=h*n-o*i,e[10]=f*n-a*i,e[11]=m*n-u*i,e}function pre(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],u=t[3],c=t[8],h=t[9],f=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-c*i,e[1]=o*n-h*i,e[2]=a*n-f*i,e[3]=u*n-m*i,e[8]=s*i+c*n,e[9]=o*i+h*n,e[10]=a*i+f*n,e[11]=u*i+m*n,e}function hre(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],u=t[3],c=t[4],h=t[5],f=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+c*i,e[1]=o*n+h*i,e[2]=a*n+f*i,e[3]=u*n+m*i,e[4]=c*n-s*i,e[5]=h*n-o*i,e[6]=f*n-a*i,e[7]=m*n-u*i,e}function fre(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function mre(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function yre(e,t,r){if(t===0)return Kb(e);let i,n,s,o=r[0],a=r[1],u=r[2],c=Math.sqrt(o*o+a*a+u*u);return c<Zr()?null:(c=1/c,o*=c,a*=c,u*=c,i=Math.sin(t),n=Math.cos(t),s=1-n,e[0]=o*o*s+n,e[1]=a*o*s+u*i,e[2]=u*o*s-a*i,e[3]=0,e[4]=o*a*s-u*i,e[5]=a*a*s+n,e[6]=u*a*s+o*i,e[7]=0,e[8]=o*u*s+a*i,e[9]=a*u*s-o*i,e[10]=u*u*s+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function gre(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vre(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function wre(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S8(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=i+i,u=n+n,c=s+s,h=i*a,f=i*u,m=i*c,y=n*u,g=n*c,v=s*c,w=o*a,b=o*u,_=o*c;return e[0]=1-(y+v),e[1]=f+_,e[2]=m-b,e[3]=0,e[4]=f-_,e[5]=1-(h+v),e[6]=g+w,e[7]=0,e[8]=m+b,e[9]=g-w,e[10]=1-(h+y),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function bre(e,t){const r=_re,i=-t[0],n=-t[1],s=-t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],f=i*i+n*n+s*s+o*o;return f>0?(r[0]=2*(a*o+h*i+u*s-c*n)/f,r[1]=2*(u*o+h*n+c*i-a*s)/f,r[2]=2*(c*o+h*s+a*n-u*i)/f):(r[0]=2*(a*o+h*i+u*s-c*n),r[1]=2*(u*o+h*n+c*i-a*s),r[2]=2*(c*o+h*s+a*n-u*i)),S8(e,t,r),e}const _re=Ul();function Sre(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function $re(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],u=t[8],c=t[9],h=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(u*u+c*c+h*h),e}function xre(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function Tre(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3],u=n+n,c=s+s,h=o+o,f=n*u,m=n*c,y=n*h,g=s*c,v=s*h,w=o*h,b=a*u,_=a*c,$=a*h,T=i[0],E=i[1],I=i[2];return e[0]=(1-(g+w))*T,e[1]=(m+$)*T,e[2]=(y-_)*T,e[3]=0,e[4]=(m-$)*E,e[5]=(1-(f+w))*E,e[6]=(v+b)*E,e[7]=0,e[8]=(y+_)*I,e[9]=(v-b)*I,e[10]=(1-(f+g))*I,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Mre(e,t,r,i,n){const s=t[0],o=t[1],a=t[2],u=t[3],c=s+s,h=o+o,f=a+a,m=s*c,y=s*h,g=s*f,v=o*h,w=o*f,b=a*f,_=u*c,$=u*h,T=u*f,E=i[0],I=i[1],C=i[2],L=n[0],H=n[1],V=n[2],Y=(1-(v+b))*E,ee=(y+T)*E,Te=(g-$)*E,oe=(y-T)*I,St=(1-(m+b))*I,Nr=(w+_)*I,Ye=(g+$)*C,q=(w-_)*C,pe=(1-(m+v))*C;return e[0]=Y,e[1]=ee,e[2]=Te,e[3]=0,e[4]=oe,e[5]=St,e[6]=Nr,e[7]=0,e[8]=Ye,e[9]=q,e[10]=pe,e[11]=0,e[12]=r[0]+L-(Y*L+oe*H+Ye*V),e[13]=r[1]+H-(ee*L+St*H+q*V),e[14]=r[2]+V-(Te*L+Nr*H+pe*V),e[15]=1,e}function Ere(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,u=n+n,c=r*o,h=i*o,f=i*a,m=n*o,y=n*a,g=n*u,v=s*o,w=s*a,b=s*u;return e[0]=1-f-g,e[1]=h+b,e[2]=m-w,e[3]=0,e[4]=h-b,e[5]=1-c-g,e[6]=y+v,e[7]=0,e[8]=m+w,e[9]=y-v,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ire(e,t,r,i,n,s,o){const a=1/(r-t),u=1/(n-i),c=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*u,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(n+i)*u,e[10]=(o+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*c,e[15]=0,e}function kre(e,t,r,i,n){const s=1/Math.tan(t/2);let o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(o=1/(i-n),e[10]=(n+i)*o,e[14]=2*n*i*o):(e[10]=-1,e[14]=-2*i),e}function Ore(e,t,r,i){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+a),c=2/(n+s);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-a)*u*.5,e[9]=(n-s)*c*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function Pre(e,t,r,i,n,s,o){const a=1/(t-r),u=1/(i-n),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*a,e[13]=(n+i)*u,e[14]=(o+s)*c,e[15]=1,e}function Cre(e,t,r,i){const n=t[0],s=t[1],o=t[2];let a=n-r[0],u=s-r[1],c=o-r[2];const h=Zr();if(Math.abs(a)<h&&Math.abs(u)<h&&Math.abs(c)<h)return void Kb(e);let f=1/Math.sqrt(a*a+u*u+c*c);a*=f,u*=f,c*=f;const m=i[0],y=i[1],g=i[2];let v=y*c-g*u,w=g*a-m*c,b=m*u-y*a;f=Math.sqrt(v*v+w*w+b*b),f?(f=1/f,v*=f,w*=f,b*=f):(v=0,w=0,b=0);let _=u*b-c*w,$=c*v-a*b,T=a*w-u*v;f=Math.sqrt(_*_+$*$+T*T),f?(f=1/f,_*=f,$*=f,T*=f):(_=0,$=0,T=0),e[0]=v,e[1]=_,e[2]=a,e[3]=0,e[4]=w,e[5]=$,e[6]=u,e[7]=0,e[8]=b,e[9]=T,e[10]=c,e[11]=0,e[12]=-(v*n+w*s+b*o),e[13]=-(_*n+$*s+T*o),e[14]=-(a*n+u*s+c*o),e[15]=1}function Are(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=i[0],u=i[1],c=i[2];let h=n-r[0],f=s-r[1],m=o-r[2],y=h*h+f*f+m*m;y>0&&(y=1/Math.sqrt(y),h*=y,f*=y,m*=y);let g=u*m-c*f,v=c*h-a*m,w=a*f-u*h;return y=g*g+v*v+w*w,y>0&&(y=1/Math.sqrt(y),g*=y,v*=y,w*=y),e[0]=g,e[1]=v,e[2]=w,e[3]=0,e[4]=f*w-m*v,e[5]=m*g-h*w,e[6]=h*v-f*g,e[7]=0,e[8]=h,e[9]=f,e[10]=m,e[11]=0,e[12]=n,e[13]=s,e[14]=o,e[15]=1,e}function Rre(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Lre(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function Nre(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function $8(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function Fre(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function Dre(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function jre(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function zre(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8],f=e[9],m=e[10],y=e[11],g=e[12],v=e[13],w=e[14],b=e[15],_=t[0],$=t[1],T=t[2],E=t[3],I=t[4],C=t[5],L=t[6],H=t[7],V=t[8],Y=t[9],ee=t[10],Te=t[11],oe=t[12],St=t[13],Nr=t[14],Ye=t[15],q=Zr();return Math.abs(r-_)<=q*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-$)<=q*Math.max(1,Math.abs(i),Math.abs($))&&Math.abs(n-T)<=q*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(s-E)<=q*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(o-I)<=q*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(a-C)<=q*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(u-L)<=q*Math.max(1,Math.abs(u),Math.abs(L))&&Math.abs(c-H)<=q*Math.max(1,Math.abs(c),Math.abs(H))&&Math.abs(h-V)<=q*Math.max(1,Math.abs(h),Math.abs(V))&&Math.abs(f-Y)<=q*Math.max(1,Math.abs(f),Math.abs(Y))&&Math.abs(m-ee)<=q*Math.max(1,Math.abs(m),Math.abs(ee))&&Math.abs(y-Te)<=q*Math.max(1,Math.abs(y),Math.abs(Te))&&Math.abs(g-oe)<=q*Math.max(1,Math.abs(g),Math.abs(oe))&&Math.abs(v-St)<=q*Math.max(1,Math.abs(v),Math.abs(St))&&Math.abs(w-Nr)<=q*Math.max(1,Math.abs(w),Math.abs(Nr))&&Math.abs(b-Ye)<=q*Math.max(1,Math.abs(b),Math.abs(Ye))}function Vre(e){const t=Zr(),r=e[0],i=e[1],n=e[2],s=e[4],o=e[5],a=e[6],u=e[8],c=e[9],h=e[10];return Math.abs(1-(r*r+s*s+u*u))<=t&&Math.abs(1-(i*i+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}function Ure(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const Gre=_8,qre=$8;Object.freeze(Object.defineProperty({__proto__:null,add:Nre,adjoint:ore,copy:nre,determinant:are,equals:zre,exactEquals:jre,frob:Lre,fromQuat:Ere,fromQuat2:bre,fromRotation:yre,fromRotationTranslation:S8,fromRotationTranslationScale:Tre,fromRotationTranslationScaleOrigin:Mre,fromScaling:mre,fromTranslation:fre,fromXRotation:gre,fromYRotation:vre,fromZRotation:wre,frustum:Ire,getRotation:xre,getScaling:$re,getTranslation:Sre,hasIdentityRotation:Ure,identity:Kb,invert:b8,invertOrIdentity:sre,isOrthoNormal:Vre,lookAt:Cre,mul:Gre,multiply:_8,multiplyScalar:Fre,multiplyScalarAndAdd:Dre,ortho:Pre,perspective:kre,perspectiveFromFieldOfView:Ore,rotate:cre,rotateX:dre,rotateY:pre,rotateZ:hre,scale:ure,set:Gl,str:Rre,sub:qre,subtract:$8,targetTo:Are,translate:lre,transpose:ql},Symbol.toStringTag,{value:"Module"}));const Bre=(e,t)=>{const r=Gl(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return ql(r,r)},Hre=(e,t)=>{const r=Gl(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return ql(r,r)},Wre=(e,t)=>{const r=1-t,i=Gl(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return ql(i,i)},Zre=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),n=Gl(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return ql(n,n)},Jre=(e,t)=>{const r=1-2*t,i=Gl(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return ql(i,i)},Kre=(e,t)=>{const r=Gl(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return ql(r,r)},Yre=(e,t)=>{const r=1-t,i=Gl(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return ql(i,i)};let x8=class T8{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=si(t.strength,r.strength,i),this.radius=si(t.radius,r.radius,i),this.threshold=si(t.threshold,r.threshold,i)}clone(){return new T8(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Mm(this.radius),strength:this.strength,threshold:this.threshold}}},M8=class E8{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(si(t.radius,r.radius,i))}clone(){return new E8(this.radius)}toJSON(){return{type:"blur",radius:Mm(this.radius)}}},Px=class I8{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=si(t.amount,r.amount,i),this._updateMatrix()}clone(){return new I8(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Jb();switch(this.type){case"brightness":this._colorMatrix=Bre(t,this.amount);break;case"contrast":this._colorMatrix=Hre(t,this.amount);break;case"grayscale":this._colorMatrix=Wre(t,this.amount);break;case"invert":this._colorMatrix=Jre(t,this.amount);break;case"saturate":this._colorMatrix=Kre(t,this.amount);break;case"sepia":this._colorMatrix=Yre(t,this.amount)}}},k8=class O8{constructor(t,r,i,n){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=n,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=si(t.offsetX,r.offsetX,i),this.offsetY=si(t.offsetY,r.offsetY,i),this.blurRadius=si(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(si(t.color[0],r.color[0],i)),this.color[1]=Math.round(si(t.color[1],r.color[1],i)),this.color[2]=Math.round(si(t.color[2],r.color[2],i)),this.color[3]=si(t.color[3],r.color[3],i)}clone(){return new O8(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Mm(this.offsetX),yoffset:Mm(this.offsetY),blurRadius:Mm(this.blurRadius),color:t}}},P8=class C8{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=si(t.angle,r.angle,i),this._updateMatrix()}clone(){return new C8(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Jb();this._colorMatrix=Zre(t,this.angle)}},A8=class R8{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=si(t.amount,r.amount,i)}clone(){return new R8(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function si(e,t,r){return e+(t-e)*r}function Mm(e){return Math.round(1e3*$n(e))/1e3}function Qre(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new Px(e.type,0);case"saturate":case"brightness":case"contrast":return new Px(e.type,1);case"opacity":return new A8(1);case"hue-rotate":return new P8(0);case"blur":return new M8(0);case"drop-shadow":return new k8(0,0,0,[...YI("transparent")]);case"bloom":return new x8(0,0,1)}}function Xre(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((i,n)=>i.type===r[n].type)}function eie(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let n=i.length;n<r.length;n++)i.push(Qre(r[n]))}function tie(e){const t=e[0];return!!t&&"type"in t}const IA=()=>z.getLogger("esri.support.basemapUtils");function rie(){return{}}function iie(e){for(const t in e){const r=e[t];nt(r),delete e[t]}}function nie(e,t){let r;if(typeof e=="string"){const i=e in Mx,n=!i&&e.includes("/");if(!i&&!n){const s=Object.entries(Mx).filter(([o,a])=>Pe.apiKey&&!a.classic||!Pe.apiKey&&(a.classic||a.is3d)).map(([o])=>`"${o}"`).sort().join(", ");return IA().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${s}`),null}t&&(r=t[e]),r||(r=i?Tm.fromId(e):new Tm({style:{id:e}}),t&&(t[e]=r))}else r=Pt(Tm,e);return r!=null&&r.destroyed&&(IA().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function sie(e){return new my({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function PS(e){for(const t of e.values())t==null||t.destroy();e.clear()}const kA={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function oie(e){let t=null;if(typeof e=="string")if(e in kA){const r=kA[e];t=new $w({resourceInfo:{data:{layers:[r]}}})}else z.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Pt($w,e);return t}function Xp(e,t,r=!1){let{hasM:i,hasZ:n}=e;Array.isArray(t)?t.length!==4||i||n?t.length===3&&r&&!i?(n=!0,i=!1):t.length===3&&i&&n&&(i=!1,n=!1):(i=!0,n=!0):(n=!n&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=i}var Cx;function OA(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function aie(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let _a=Cx=class extends ia{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var n;if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):aie(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=(n=r.points)==null?void 0:n[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Be,r=this.hasZ,i=this.hasM,n=r?3:2,s=e[0],o=OA(Math.min),a=OA(Math.max);let u,c,h,f,[m,y]=s,[g,v]=s;for(let w=0,b=e.length;w<b;w++){const _=e[w],[$,T]=_;if(m=o(m,$),y=o(y,T),g=a(g,$),v=a(v,T),r&&_.length>2){const E=_[2];u=o(u,E),h=a(h,E)}if(i&&_.length>n){const E=_[n];c=o(c,E),f=a(f,E)}}return t.xmin=m,t.ymin=y,t.xmax=g,t.ymax=v,t.spatialReference=this.spatialReference,r?(t.zmin=u,t.zmax=h):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=c,t.mmax=f):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=k(this.points)}addPoint(e){return Xp(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:k(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new Cx(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new ge(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new ge(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Xp(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};l([d({readOnly:!0})],_a.prototype,"cache",null),l([d()],_a.prototype,"extent",null),l([d({type:[[Number]],json:{write:{isRequired:!0}}})],_a.prototype,"points",void 0),l([Z("points")],_a.prototype,"writePoints",null),_a=Cx=l([x("esri.geometry.Multipoint")],_a),_a.prototype.toJSON.isDefaultToJSON=!0;const Yb=_a;function sTe(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function lie(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var xw;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(xw||(xw={}));function ik(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}return Math.sqrt(r*r+i*i)}function uie(e,t,r){const i=e[0]+r*(t[0]-e[0]),n=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,n,e[2]+r*(t[2]-e[2])]:[i,n]}function cie(e,t,r,i){return die(e,t,r[i],r[i+1])}function die(e,t,r,i){const[n,s]=t,[o,a]=r,[u,c]=i,h=u-o,f=c-a,m=h*h+f*f,y=(n-o)*h+(s-a)*f,g=Math.min(1,Math.max(0,y/m));return e[0]=o+h*g,e[1]=a+f*g,e}function oTe(e,t,r,i,n,s){let o=r,a=i,u=n-o,c=s-a;if(u!==0||c!==0){const h=((e-o)*u+(t-a)*c)/(u*u+c*c);h>1?(o=n,a=s):h>0&&(o+=u*h,a+=c*h)}return u=e-o,c=t-a,u*u+c*c}function L8(e,t){return uie(e,t,.5)}function aTe(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=ik(e[i],e[i+1]);return r}function N8(e,t=xw.X,r=xw.Y){let i=0;const n=e.length;let s=e[0];for(let o=1;o<n;o++){const a=e[o];i+=(a[t]-s[t])*(a[r]+s[r]),s=a}if(!F8(e)){const o=e[0];i+=(o[t]-s[t])*(o[r]+s[r])}return i>=0}function F8(e){const t=e.length;return t<3||$b(e[0],e[t-1])}function lTe(e){"rings"in e&&(pie(e),hie(e))}function pie(e){if(!("rings"in e))return!1;let t=!1;for(const r of e.rings)F8(r)||(r.push(r[0].slice()),t=!0);return t}function hie(e){if(!("rings"in e)||e.rings.length===0||N8(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function uTe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function fie(e){return e?mie(e.rings,e.hasZ??!1):null}function mie(e,t){if(!(e!=null&&e.length))return null;const r=[],i=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=D8(e[s],t,n);a&&i.push(a)}if(i.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){const s=e[0]&&e[0].length?yie(e[0],t):null;if(!s)return null;r[0]=s[0],r[1]=s[1],t&&s.length>2&&(r[2]=s[2])}return r}function D8(e,t,r){let i=0,n=0,s=0,o=0,a=0;const u=e.length?e[0][0]:0,c=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let m=0;m<e.length;m++){const y=e[m],g=e[(m+1)%e.length],[v,w,b]=y,_=v-u,$=w-c,[T,E,I]=g,C=T-u,L=E-c,H=_*L-C*$;if(o+=H,i+=(_+C)*H,n+=($+L)*H,t&&y.length>2&&g.length>2){const V=b-h,Y=I-h,ee=_*Y-C*V;s+=(V+Y)*ee,a+=ee}v<r[0]&&(r[0]=v),v>r[1]&&(r[1]=v),w<r[2]&&(r[2]=w),w>r[3]&&(r[3]=w),t&&(b<r[4]&&(r[4]=b),b>r[5]&&(r[5]=b))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[i/(6*o)+u,n/(6*o)+c,o];return t&&(r[4]===r[5]||a===0?(f[3]=(r[4]+r[5])/2,f[4]=0):(f[3]=s/(6*a)+h,f[4]=a)),f}function cTe(e,t){let r=0,i=0,n=0;e.nextPoint();const s=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const u=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const c=[e.x,e.y],[h,f]=u,m=h-s,y=f-o,[g,v]=c,w=g-s,b=v-o,_=m*b-w*y;n+=_,r+=(m+w)*_,i+=(y+b)*_,h<t[0]&&(t[0]=h),h>t[1]&&(t[1]=h),f<t[2]&&(t[2]=f),f>t[3]&&(t[3]=f)}return n>0&&(n*=-1),n?(n*=.5,[r/(6*n)+s,i/(6*n)+o,n]):null}function yie(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let u=0,c=e.length;u<c-1;u++){const h=e[u],f=e[u+1];if(h&&f){r[0]=h[0],r[1]=h[1],i[0]=f[0],i[1]=f[1],t&&h.length>2&&f.length>2&&(r[2]=h[2],i[2]=f[2]);const m=ik(r,i);if(m){n+=m;const y=L8(h,f);s+=m*y[0],o+=m*y[1],t&&y.length>2&&(a+=m*y[2])}}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.length?e[0]:null}function gie(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],n=[],s=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=D8(lie(e),e.hasZ,s);o&&n.push(o)}if(n.sort((o,a)=>{let u=o[2]-a[2];return u===0&&t&&(u=o[4]-a[4]),u}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],t&&(i[2]=n[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const o=e.pathSize?vie(e):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function vie(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;if(e.nextPoint()){let u=e.x,c=e.y,h=e.z;for(;e.nextPoint();){const f=e.x,m=e.y,y=e.z;r[0]=u,r[1]=c,i[0]=f,i[1]=m,t&&(r[2]=h,i[2]=y);const g=ik(r,i);if(g){n+=g;const v=L8(r,i);s+=g*v[0],o+=g*v[1],t&&v.length>2&&(a+=g*v[2])}u=f,c=m,h=y}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const wie=1e-6;function dTe(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<wie){const n=gie(e);return n?[n[0],n[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)_ie(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const bie=1/3;function _ie(e,t,r){if(!e||!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,n=r.y;r.nextPoint();let s,o=r.x-i,a=r.y-n,u=0,c=0;for(;r.nextPoint();)u=r.x-i,c=r.y-n,s=.5*bie*(u*a-c*o),e[0]+=s*(o+u),e[1]+=s*(a+c),o=u,a=c;const h=r.getCurrentRingArea(),f=[i,n];return f[0]-=t[0],f[1]-=t[1],f[0]*=h,f[1]*=h,e[0]+=f[0],e[1]+=f[1],e}function ci(e=$ie){return[e[0],e[1],e[2],e[3]]}function j8(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function pTe(e,t,r,i,n=ci()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function hTe(e,t=ci()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function fTe(e,t){return new Be({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function mTe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function yTe(e,t,r){if(t!=null)if("length"in t)Ax(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else j8(r,e)}function z8(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function V8(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function gTe(e){return z8(e)*V8(e)}function vTe(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function wTe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Sie(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function bTe(e){return e?j8(e,PA):ci(PA)}function Ax(e){return e!=null&&e.length===4}function _Te(e,t){return Ax(e)&&Ax(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const PA=[1/0,1/0,-1/0,-1/0],$ie=[0,0,0,0];function U8(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function G8(e){return e.points!==void 0}function q8(e){return e.x!==void 0&&e.y!==void 0}function B8(e){return e.paths!==void 0}function H8(e){return e.rings!==void 0}function W8(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const cl=W8(Math.min),dl=W8(Math.max);function STe(e,t){return B8(t)?eh(e,t.paths,!1,!1):H8(t)?eh(e,t.rings,!1,!1):G8(t)?nk(e,t.points,!1,!1,!1,!1):U8(t)?Z8(e,t):(q8(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function $Te(e){let t,r,i,n;for(e.reset(),t=i=1/0,r=n=-1/0;e.nextPath();){const s=xie(e);t=Math.min(s[0],t),i=Math.min(s[1],i),r=Math.max(s[2],r),n=Math.max(s[3],n)}return ci([t,i,r,n])}function xie(e){let t,r,i,n;for(t=i=1/0,r=n=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),n=Math.max(e.y,n);return ci([t,i,r,n])}function xTe(e,t){return B8(t)?eh(e,t.paths,!0,!1):H8(t)?eh(e,t.rings,!0,!1):G8(t)?nk(e,t.points,!0,!1,!0,!1):U8(t)?Z8(e,t,!0,!1,!0,!1):(q8(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function eh(e,t,r,i){const n=r?3:2;if(!t.length||!t[0].length)return null;let s,o,a,u,[c,h]=t[0][0],[f,m]=t[0][0];for(let y=0;y<t.length;y++){const g=t[y];for(let v=0;v<g.length;v++){const w=g[v],[b,_]=w;if(c=cl(c,b),h=cl(h,_),f=dl(f,b),m=dl(m,_),r&&w.length>2){const $=w[2];s=cl(s,$),o=dl(o,$)}if(i&&w.length>n){const $=w[n];a=cl(s,$),u=dl(o,$)}}}return r?i?(e[0]=c,e[1]=h,e[2]=s,e[3]=a,e[4]=f,e[5]=m,e[6]=o,e[7]=u,e.length=8,e):(e[0]=c,e[1]=h,e[2]=s,e[3]=f,e[4]=m,e[5]=o,e.length=6,e):i?(e[0]=c,e[1]=h,e[2]=a,e[3]=f,e[4]=m,e[5]=u,e.length=6,e):(e[0]=c,e[1]=h,e[2]=f,e[3]=m,e.length=4,e)}function Z8(e,t,r,i,n,s){const o=t.xmin,a=t.xmax,u=t.ymin,c=t.ymax;let h=t.zmin,f=t.zmax,m=t.mmin,y=t.mmax;return n?(h=h||0,f=f||0,s?(m=m||0,y=y||0,e[0]=o,e[1]=u,e[2]=h,e[3]=m,e[4]=a,e[5]=c,e[6]=f,e[7]=y,e):(e[0]=o,e[1]=u,e[2]=h,e[3]=a,e[4]=c,e[5]=f,e)):s?(m=m||0,y=y||0,e[0]=o,e[1]=u,e[2]=m,e[3]=a,e[4]=c,e[5]=y,e):(e[0]=o,e[1]=u,e[2]=a,e[3]=c,e)}function nk(e,t,r,i,n,s){const o=r?3:2,a=i&&s,u=r&&n;if(!t.length||!t[0].length)return null;let c,h,f,m,[y,g]=t[0],[v,w]=t[0];for(let b=0;b<t.length;b++){const _=t[b],[$,T]=_;if(y=cl(y,$),g=cl(g,T),v=dl(v,$),w=dl(w,T),u&&_.length>2){const E=_[2];c=cl(c,E),h=dl(h,E)}if(a&&_.length>o){const E=_[o];f=cl(c,E),m=dl(h,E)}}return n?(c=c||0,h=h||0,s?(f=f||0,m=m||0,e[0]=y,e[1]=g,e[2]=c,e[3]=f,e[4]=v,e[5]=w,e[6]=h,e[7]=m,e):(e[0]=y,e[1]=g,e[2]=c,e[3]=v,e[4]=w,e[5]=h,e)):s?(f=f||0,m=m||0,e[0]=y,e[1]=g,e[2]=f,e[3]=v,e[4]=w,e[5]=m,e):(e[0]=y,e[1]=g,e[2]=v,e[3]=w,e)}function Tie(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Mie(e){return e.points!==void 0}function Eie(e){return e.x!==void 0&&e.y!==void 0}function Iie(e){return e.paths!==void 0}function kie(e){return e.rings!==void 0}const sk=[];function J8(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function K8(e,t,r,i,n,s){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:n,zmax:s}}function Y8(e,t,r,i,n,s){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:n,mmax:s}}function Q8(e,t,r,i,n,s,o,a){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:n,ymax:s,zmax:o,mmax:a}}function ok(e,t=!1,r=!1){return t?r?Q8(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):K8(e[0],e[1],e[2],e[3],e[4],e[5]):r?Y8(e[0],e[1],e[2],e[3],e[4],e[5]):J8(e[0],e[1],e[2],e[3])}function TTe(e){return e?Tie(e)?e:Eie(e)?Pie(e):kie(e)?X8(e):Iie(e)?ez(e):Mie(e)?Oie(e):null:null}function Oie(e){const{hasZ:t,hasM:r,points:i}=e;return ok(nk(sk,i,t??!1,r??!1),t,r)}function Pie(e){const{x:t,y:r,z:i,m:n}=e,s=n!=null;return i!=null?s?Q8(t,r,i,n,t,r,i,n):K8(t,r,i,t,r,i):s?Y8(t,r,n,t,r,n):J8(t,r,t,r)}function X8(e){const{hasZ:t,hasM:r,rings:i}=e,n=eh(sk,i,t??!1,r??!1);return n?ok(n,t,r):null}function ez(e){const{hasZ:t,hasM:r,paths:i}=e,n=eh(sk,i,t??!1,r??!1);return n?ok(n,t,r):null}var dv;function CA(e){return!Array.isArray(e[0])}let ms=dv=class extends ia{static fromExtent(e){const t=e.clone().normalize(),r=e.spatialReference;let i=!1,n=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(n=!0);const s={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const u=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(u)}if(n&&o.hasM){const u=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(u)}return a}),spatialReference:r};return i&&(s.hasZ=!0),n&&(s.hasM=!0),new dv(s)}constructor(...e){super(...e),this.rings=[],this.type="polygon"}normalizeCtorArgs(e,t){var o,a;let r,i,n=null,s=null;return e&&!Array.isArray(e)?(n=e.rings??null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),r=e.hasZ,i=e.hasM):n=e,n=n||[],t=t||ve.WGS84,n.length&&((o=n[0])==null?void 0:o[0])!=null&&typeof n[0][0]=="number"&&(n=[n]),s=(a=n[0])==null?void 0:a[0],s&&(r===void 0&&i===void 0?(r=s.length>2,i=s.length>3):r===void 0?r=i?s.length>3:s.length>2:i===void 0&&(i=r?s.length>3:s.length>2)),{rings:n,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=fie(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new ge;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=X8(this);if(!t)return null;const r=new Be(t);return r.spatialReference=e,r}get isSelfIntersecting(){return lee(this.rings)}writeRings(e,t){t.rings=k(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(CA(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new dv;return e.spatialReference=this.spatialReference,e.rings=k(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([n,s,o,a],[u,c,h,f])=>n===u&&s===c&&(o==null&&h==null||o===h)&&(a==null&&f==null||a===f);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=e.rings[n];if(!$b(s,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=Ub(e,this.spatialReference);return BI(this,t??e)}isClockwise(e){const t=CA(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e;return N8(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new ge(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new ge(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new ge(r[0],r[1],r[2],r[3],this.spatialReference):new ge(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Xp(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new ge(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new ge(n,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(Xp(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([d({readOnly:!0})],ms.prototype,"cache",null),l([d({readOnly:!0})],ms.prototype,"centroid",null),l([d({readOnly:!0})],ms.prototype,"extent",null),l([d({readOnly:!0})],ms.prototype,"isSelfIntersecting",null),l([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],ms.prototype,"rings",void 0),l([Z("rings")],ms.prototype,"writeRings",null),ms=dv=l([x("esri.geometry.Polygon")],ms),ms.prototype.toJSON.isDefaultToJSON=!0;const Xo=ms;var Rx;function Cie(e){return!Array.isArray(e[0])}let Sa=Rx=class extends ia{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){var o,a;let r,i,n=null,s=null;return e&&!Array.isArray(e)?(n=e.paths??null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),r=e.hasZ,i=e.hasM):n=e,n=n||[],t=t||ve.WGS84,n.length&&((o=n[0])==null?void 0:o[0])!=null&&typeof n[0][0]=="number"&&(n=[n]),s=(a=n[0])==null?void 0:a[0],s&&(r===void 0&&i===void 0?(r=s.length>2,i=!1):r===void 0?r=!i&&s.length>3:i===void 0&&(i=!r&&s.length>3)),{paths:n,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=ez(this);if(!t)return null;const r=new Be(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=k(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(Cie(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new Rx;return e.spatialReference=this.spatialReference,e.paths=k(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new ge(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new ge(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new ge(r[0],r[1],r[2],r[3],this.spatialReference):new ge(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Xp(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new ge(n,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new ge(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(Xp(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([d({readOnly:!0})],Sa.prototype,"cache",null),l([d({readOnly:!0})],Sa.prototype,"extent",null),l([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Sa.prototype,"paths",void 0),l([Z("paths")],Sa.prototype,"writePaths",null),Sa=Rx=l([x("esri.geometry.Polyline")],Sa),Sa.prototype.toJSON.isDefaultToJSON=!0;const pn=Sa,Aie=Lr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),AA=Lr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function tz(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function rz(e){return e.points!==void 0}function iz(e){return e.x!==void 0&&e.y!==void 0}function nz(e){return e.paths!==void 0}function Ep(e){return e.rings!==void 0}function Cl(e){return e==null?null:e instanceof ia?e:iz(e)?ge.fromJSON(e):nz(e)?pn.fromJSON(e):Ep(e)?Xo.fromJSON(e):rz(e)?Yb.fromJSON(e):tz(e)?Be.fromJSON(e):null}function ak(e){return e?iz(e)?"esriGeometryPoint":nz(e)?"esriGeometryPolyline":Ep(e)?"esriGeometryPolygon":tz(e)?"esriGeometryEnvelope":rz(e)?"esriGeometryMultipoint":null:null}const Rie={esriGeometryPoint:ge,esriGeometryPolyline:pn,esriGeometryPolygon:Xo,esriGeometryEnvelope:Be,esriGeometryMultipoint:Yb};function Lie(e){return e&&Rie[e]||null}const Jc={base:ia,key:"type",typeMap:{extent:Be,multipoint:Yb,point:ge,polyline:pn,polygon:Xo}};Us(Jc);const RA=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Kc extends Error{}class Nie extends Kc{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Fie extends Kc{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Die extends Kc{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class up extends Kc{}class sz extends Kc{constructor(t){super(`Invalid unit ${t}`)}}class li extends Kc{}class ha extends Kc{constructor(){super("Zone is an abstract class")}}const K="numeric",os="short",Fi="long",Tw={year:K,month:K,day:K},oz={year:K,month:os,day:K},jie={year:K,month:os,day:K,weekday:os},az={year:K,month:Fi,day:K},lz={year:K,month:Fi,day:K,weekday:Fi},uz={hour:K,minute:K},cz={hour:K,minute:K,second:K},dz={hour:K,minute:K,second:K,timeZoneName:os},pz={hour:K,minute:K,second:K,timeZoneName:Fi},hz={hour:K,minute:K,hourCycle:"h23"},fz={hour:K,minute:K,second:K,hourCycle:"h23"},mz={hour:K,minute:K,second:K,hourCycle:"h23",timeZoneName:os},yz={hour:K,minute:K,second:K,hourCycle:"h23",timeZoneName:Fi},gz={year:K,month:K,day:K,hour:K,minute:K},vz={year:K,month:K,day:K,hour:K,minute:K,second:K},wz={year:K,month:os,day:K,hour:K,minute:K},bz={year:K,month:os,day:K,hour:K,minute:K,second:K},zie={year:K,month:os,day:K,weekday:os,hour:K,minute:K},_z={year:K,month:Fi,day:K,hour:K,minute:K,timeZoneName:os},Sz={year:K,month:Fi,day:K,hour:K,minute:K,second:K,timeZoneName:os},$z={year:K,month:Fi,day:K,weekday:Fi,hour:K,minute:K,timeZoneName:Fi},xz={year:K,month:Fi,day:K,weekday:Fi,hour:K,minute:K,second:K,timeZoneName:Fi};class mh{get type(){throw new ha}get name(){throw new ha}get ianaName(){return this.name}get isUniversal(){throw new ha}offsetName(t,r){throw new ha}formatOffset(t,r){throw new ha}offset(t){throw new ha}equals(t){throw new ha}get isValid(){throw new ha}}let CS=null;class Qb extends mh{static get instance(){return CS===null&&(CS=new Qb),CS}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return Az(t,r,i)}formatOffset(t,r){return Em(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let pv={};function Vie(e){return pv[e]||(pv[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),pv[e]}const Uie={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Gie(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,n,s,o,a,u,c,h]=i;return[o,n,s,a,u,c,h]}function qie(e,t){const r=e.formatToParts(t),i=[];for(let n=0;n<r.length;n++){const{type:s,value:o}=r[n],a=Uie[s];s==="era"?i[a]=o:be(a)||(i[a]=parseInt(o,10))}return i}let Q0={};class zi extends mh{static create(t){return Q0[t]||(Q0[t]=new zi(t)),Q0[t]}static resetCache(){Q0={},pv={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=zi.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return Az(t,r,i,this.name)}formatOffset(t,r){return Em(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=Vie(this.name);let[n,s,o,a,u,c,h]=i.formatToParts?qie(i,r):Gie(i,r);a==="BC"&&(n=-Math.abs(n)+1);const m=e_({year:n,month:s,day:o,hour:u===24?0:u,minute:c,second:h,millisecond:0});let y=+r;const g=y%1e3;return y-=g>=0?g:1e3+g,(m-y)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let LA={};function Bie(e,t={}){const r=JSON.stringify([e,t]);let i=LA[r];return i||(i=new Intl.ListFormat(e,t),LA[r]=i),i}let Lx={};function Nx(e,t={}){const r=JSON.stringify([e,t]);let i=Lx[r];return i||(i=new Intl.DateTimeFormat(e,t),Lx[r]=i),i}let Fx={};function Hie(e,t={}){const r=JSON.stringify([e,t]);let i=Fx[r];return i||(i=new Intl.NumberFormat(e,t),Fx[r]=i),i}let Dx={};function Wie(e,t={}){const{base:r,...i}=t,n=JSON.stringify([e,i]);let s=Dx[n];return s||(s=new Intl.RelativeTimeFormat(e,t),Dx[n]=s),s}let _f=null;function Zie(){return _f||(_f=new Intl.DateTimeFormat().resolvedOptions().locale,_f)}let NA={};function Jie(e){let t=NA[e];if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,NA[e]=t}return t}function Kie(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,n;try{i=Nx(e).resolvedOptions(),n=e}catch{const u=e.substring(0,r);i=Nx(u).resolvedOptions(),n=u}const{numberingSystem:s,calendar:o}=i;return[n,s,o]}}function Yie(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function Qie(e){const t=[];for(let r=1;r<=12;r++){const i=me.utc(2009,r,1);t.push(e(i))}return t}function Xie(e){const t=[];for(let r=1;r<=7;r++){const i=me.utc(2016,11,13+r);t.push(e(i))}return t}function X0(e,t,r,i){const n=e.listingMode();return n==="error"?null:n==="en"?r(t):i(t)}function ene(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class tne{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:s,...o}=i;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=Hie(t,a)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):dk(t,3);return Ft(r,this.padTo)}}}class rne{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&zi.create(a).valid?(n=a,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=Nx(r,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class ine{constructor(t,r,i){this.opts={style:"long",...i},!r&&Pz()&&(this.rtf=Wie(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):$ne(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const nne={firstDay:1,minimalDays:4,weekend:[6,7]};class qe{static fromOpts(t){return qe.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,n,s=!1){const o=t||It.defaultLocale,a=o||(s?"en-US":Zie()),u=r||It.defaultNumberingSystem,c=i||It.defaultOutputCalendar,h=jx(n)||It.defaultWeekSettings;return new qe(a,u,c,h,o)}static resetCache(){_f=null,Lx={},Fx={},Dx={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:n}={}){return qe.create(t,r,i,n)}constructor(t,r,i,n,s){const[o,a,u]=Kie(t);this.locale=o,this.numberingSystem=r||a||null,this.outputCalendar=i||u||null,this.weekSettings=n,this.intl=Yie(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=ene(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:qe.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,jx(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return X0(this,t,Nz,()=>{const i=r?{month:t,day:"numeric"}:{month:t},n=r?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=Qie(s=>this.extract(s,i,"month"))),this.monthsCache[n][t]})}weekdays(t,r=!1){return X0(this,t,jz,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=r?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=Xie(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return X0(this,void 0,()=>zz,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[me.utc(2016,11,13,9),me.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return X0(this,t,Vz,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[me.utc(-40,1,1),me.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const n=this.dtFormatter(t,r),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new tne(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new rne(t,this.intl,r)}relFormatter(t={}){return new ine(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Bie(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Cz()?Jie(this.locale):nne}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let AS=null;class hr extends mh{static get utcInstance(){return AS===null&&(AS=new hr(0)),AS}static instance(t){return t===0?hr.utcInstance:new hr(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new hr(t_(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Em(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Em(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return Em(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class sne extends mh{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function nl(e,t){if(be(e)||e===null)return t;if(e instanceof mh)return e;if(lne(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?Qb.instance:r==="utc"||r==="gmt"?hr.utcInstance:hr.parseSpecifier(r)||zi.create(e)}else return fc(e)?hr.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new sne(e)}let FA=()=>Date.now(),DA="system",jA=null,zA=null,VA=null,UA=60,GA,qA=null;class It{static get now(){return FA}static set now(t){FA=t}static set defaultZone(t){DA=t}static get defaultZone(){return nl(DA,Qb.instance)}static get defaultLocale(){return jA}static set defaultLocale(t){jA=t}static get defaultNumberingSystem(){return zA}static set defaultNumberingSystem(t){zA=t}static get defaultOutputCalendar(){return VA}static set defaultOutputCalendar(t){VA=t}static get defaultWeekSettings(){return qA}static set defaultWeekSettings(t){qA=jx(t)}static get twoDigitCutoffYear(){return UA}static set twoDigitCutoffYear(t){UA=t%100}static get throwOnInvalid(){return GA}static set throwOnInvalid(t){GA=t}static resetCaches(){qe.resetCache(),zi.resetCache()}}class Zn{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Tz=[0,31,59,90,120,151,181,212,243,273,304,334],Mz=[0,31,60,91,121,152,182,213,244,274,305,335];function hn(e,t){return new Zn("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function lk(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function Ez(e,t,r){return r+(Qy(e)?Mz:Tz)[t-1]}function Iz(e,t){const r=Qy(e)?Mz:Tz,i=r.findIndex(s=>s<t),n=t-r[i];return{month:i+1,day:n}}function uk(e,t){return(e-t+7)%7+1}function Mw(e,t=4,r=1){const{year:i,month:n,day:s}=e,o=Ez(i,n,s),a=uk(lk(i,n,s),r);let u=Math.floor((o-a+14-t)/7),c;return u<1?(c=i-1,u=yy(c,t,r)):u>yy(i,t,r)?(c=i+1,u=1):c=i,{weekYear:c,weekNumber:u,weekday:a,...r_(e)}}function BA(e,t=4,r=1){const{weekYear:i,weekNumber:n,weekday:s}=e,o=uk(lk(i,1,t),r),a=Ip(i);let u=n*7+s-o-7+t,c;u<1?(c=i-1,u+=Ip(c)):u>a?(c=i+1,u-=Ip(i)):c=i;const{month:h,day:f}=Iz(c,u);return{year:c,month:h,day:f,...r_(e)}}function RS(e){const{year:t,month:r,day:i}=e,n=Ez(t,r,i);return{year:t,ordinal:n,...r_(e)}}function HA(e){const{year:t,ordinal:r}=e,{month:i,day:n}=Iz(t,r);return{year:t,month:i,day:n,...r_(e)}}function WA(e,t){if(!be(e.localWeekday)||!be(e.localWeekNumber)||!be(e.localWeekYear)){if(!be(e.weekday)||!be(e.weekNumber)||!be(e.weekYear))throw new up("Cannot mix locale-based week fields with ISO-based week fields");return be(e.localWeekday)||(e.weekday=e.localWeekday),be(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),be(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function one(e,t=4,r=1){const i=Xb(e.weekYear),n=fn(e.weekNumber,1,yy(e.weekYear,t,r)),s=fn(e.weekday,1,7);return i?n?s?!1:hn("weekday",e.weekday):hn("week",e.weekNumber):hn("weekYear",e.weekYear)}function ane(e){const t=Xb(e.year),r=fn(e.ordinal,1,Ip(e.year));return t?r?!1:hn("ordinal",e.ordinal):hn("year",e.year)}function kz(e){const t=Xb(e.year),r=fn(e.month,1,12),i=fn(e.day,1,Ew(e.year,e.month));return t?r?i?!1:hn("day",e.day):hn("month",e.month):hn("year",e.year)}function Oz(e){const{hour:t,minute:r,second:i,millisecond:n}=e,s=fn(t,0,23)||t===24&&r===0&&i===0&&n===0,o=fn(r,0,59),a=fn(i,0,59),u=fn(n,0,999);return s?o?a?u?!1:hn("millisecond",n):hn("second",i):hn("minute",r):hn("hour",t)}function be(e){return typeof e>"u"}function fc(e){return typeof e=="number"}function Xb(e){return typeof e=="number"&&e%1===0}function lne(e){return typeof e=="string"}function une(e){return Object.prototype.toString.call(e)==="[object Date]"}function Pz(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Cz(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function cne(e){return Array.isArray(e)?e:[e]}function ZA(e,t,r){if(e.length!==0)return e.reduce((i,n)=>{const s=[t(n),n];return i&&r(i[0],s[0])===i[0]?i:s},null)[1]}function dne(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function th(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function jx(e){if(e==null)return null;if(typeof e!="object")throw new li("Week settings must be an object");if(!fn(e.firstDay,1,7)||!fn(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!fn(t,1,7)))throw new li("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function fn(e,t,r){return Xb(e)&&e>=t&&e<=r}function pne(e,t){return e-t*Math.floor(e/t)}function Ft(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function Ja(e){if(!(be(e)||e===null||e===""))return parseInt(e,10)}function tu(e){if(!(be(e)||e===null||e===""))return parseFloat(e)}function ck(e){if(!(be(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function dk(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function Qy(e){return e%4===0&&(e%100!==0||e%400===0)}function Ip(e){return Qy(e)?366:365}function Ew(e,t){const r=pne(t-1,12)+1,i=e+(t-r)/12;return r===2?Qy(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function e_(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function JA(e,t,r){return-uk(lk(e,1,t),r)+t-1}function yy(e,t=4,r=1){const i=JA(e,t,r),n=JA(e+1,t,r);return(Ip(e)-i+n)/7}function zx(e){return e>99?e:e>It.twoDigitCutoffYear?1900+e:2e3+e}function Az(e,t,r,i=null){const n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(n).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function t_(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,n=r<0||Object.is(r,-0)?-i:i;return r*60+n}function Rz(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new li(`Invalid unit value ${e}`);return t}function Iw(e,t){const r={};for(const i in e)if(th(e,i)){const n=e[i];if(n==null)continue;r[t(i)]=Rz(n)}return r}function Em(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${Ft(r,2)}:${Ft(i,2)}`;case"narrow":return`${n}${r}${i>0?`:${i}`:""}`;case"techie":return`${n}${Ft(r,2)}${Ft(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function r_(e){return dne(e,["hour","minute","second","millisecond"])}const hne=["January","February","March","April","May","June","July","August","September","October","November","December"],Lz=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fne=["J","F","M","A","M","J","J","A","S","O","N","D"];function Nz(e){switch(e){case"narrow":return[...fne];case"short":return[...Lz];case"long":return[...hne];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Fz=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Dz=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],mne=["M","T","W","T","F","S","S"];function jz(e){switch(e){case"narrow":return[...mne];case"short":return[...Dz];case"long":return[...Fz];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const zz=["AM","PM"],yne=["Before Christ","Anno Domini"],gne=["BC","AD"],vne=["B","A"];function Vz(e){switch(e){case"narrow":return[...vne];case"short":return[...gne];case"long":return[...yne];default:return null}}function wne(e){return zz[e.hour<12?0:1]}function bne(e,t){return jz(t)[e.weekday-1]}function _ne(e,t){return Nz(t)[e.month-1]}function Sne(e,t){return Vz(t)[e.year<0?0:1]}function $ne(e,t,r="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&s){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${n[e][0]}`;case-1:return f?"yesterday":`last ${n[e][0]}`;case 0:return f?"today":`this ${n[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),u=a===1,c=n[e],h=i?u?c[1]:c[2]||c[1]:u?n[e][0]:e;return o?`${a} ${h} ago`:`in ${a} ${h}`}function KA(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const xne={D:Tw,DD:oz,DDD:az,DDDD:lz,t:uz,tt:cz,ttt:dz,tttt:pz,T:hz,TT:fz,TTT:mz,TTTT:yz,f:gz,ff:wz,fff:_z,ffff:$z,F:vz,FF:bz,FFF:Sz,FFFF:xz};class kr{static create(t,r={}){return new kr(t,r)}static parseFormat(t){let r=null,i="",n=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),r=null,i="",n=!n):n||a===r?i+=a:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=a,r=a)}return i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(t){return xne[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return Ft(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(y,g)=>this.loc.extract(t,y,g),o=y=>t.isOffsetFixed&&t.offset===0&&y.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,y.format):"",a=()=>i?wne(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(y,g)=>i?_ne(t,y):s(g?{month:y}:{month:y,day:"numeric"},"month"),c=(y,g)=>i?bne(t,y):s(g?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),h=y=>{const g=kr.macroTokenToFormatOpts(y);return g?this.formatWithSystemDefault(t,g):y},f=y=>i?Sne(t,y):s({era:y},"era"),m=y=>{switch(y){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(t.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(t.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(t.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(y)}};return KA(kr.parseFormat(r),m)}formatDurationFromString(t,r){const i=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=u=>c=>{const h=i(c);return h?this.num(u.get(h),c.length):c},s=kr.parseFormat(r),o=s.reduce((u,{literal:c,val:h})=>c?u:u.concat(h),[]),a=t.shiftTo(...o.map(i).filter(u=>u));return KA(s,n(a))}}const Uz=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function yh(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function gh(...e){return t=>e.reduce(([r,i,n],s)=>{const[o,a,u]=s(t,n);return[{...r,...o},a||i,u]},[{},null,1]).slice(0,2)}function vh(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const n=r.exec(e);if(n)return i(n)}return[null,null]}function Gz(...e){return(t,r)=>{const i={};let n;for(n=0;n<e.length;n++)i[e[n]]=Ja(t[r+n]);return[i,null,r+n]}}const qz=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Tne=`(?:${qz.source}?(?:\\[(${Uz.source})\\])?)?`,pk=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Bz=RegExp(`${pk.source}${Tne}`),hk=RegExp(`(?:T${Bz.source})?`),Mne=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Ene=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Ine=/(\d{4})-?(\d{3})/,kne=Gz("weekYear","weekNumber","weekDay"),One=Gz("year","ordinal"),Pne=/(\d{4})-(\d\d)-(\d\d)/,Hz=RegExp(`${pk.source} ?(?:${qz.source}|(${Uz.source}))?`),Cne=RegExp(`(?: ${Hz.source})?`);function kp(e,t,r){const i=e[t];return be(i)?r:Ja(i)}function Ane(e,t){return[{year:kp(e,t),month:kp(e,t+1,1),day:kp(e,t+2,1)},null,t+3]}function wh(e,t){return[{hours:kp(e,t,0),minutes:kp(e,t+1,0),seconds:kp(e,t+2,0),milliseconds:ck(e[t+3])},null,t+4]}function Xy(e,t){const r=!e[t]&&!e[t+1],i=t_(e[t+1],e[t+2]),n=r?null:hr.instance(i);return[{},n,t+3]}function e0(e,t){const r=e[t]?zi.create(e[t]):null;return[{},r,t+1]}const Rne=RegExp(`^T?${pk.source}$`),Lne=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Nne(e){const[t,r,i,n,s,o,a,u,c]=e,h=t[0]==="-",f=u&&u[0]==="-",m=(y,g=!1)=>y!==void 0&&(g||y&&h)?-y:y;return[{years:m(tu(r)),months:m(tu(i)),weeks:m(tu(n)),days:m(tu(s)),hours:m(tu(o)),minutes:m(tu(a)),seconds:m(tu(u),u==="-0"),milliseconds:m(ck(c),f)}]}const Fne={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fk(e,t,r,i,n,s,o){const a={year:t.length===2?zx(Ja(t)):Ja(t),month:Lz.indexOf(r)+1,day:Ja(i),hour:Ja(n),minute:Ja(s)};return o&&(a.second=Ja(o)),e&&(a.weekday=e.length>3?Fz.indexOf(e)+1:Dz.indexOf(e)+1),a}const Dne=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function jne(e){const[,t,r,i,n,s,o,a,u,c,h,f]=e,m=fk(t,n,i,r,s,o,a);let y;return u?y=Fne[u]:c?y=0:y=t_(h,f),[m,new hr(y)]}function zne(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Vne=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Une=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Gne=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function YA(e){const[,t,r,i,n,s,o,a]=e;return[fk(t,n,i,r,s,o,a),hr.utcInstance]}function qne(e){const[,t,r,i,n,s,o,a]=e;return[fk(t,a,r,i,n,s,o),hr.utcInstance]}const Bne=yh(Mne,hk),Hne=yh(Ene,hk),Wne=yh(Ine,hk),Zne=yh(Bz),Wz=gh(Ane,wh,Xy,e0),Jne=gh(kne,wh,Xy,e0),Kne=gh(One,wh,Xy,e0),Yne=gh(wh,Xy,e0);function Qne(e){return vh(e,[Bne,Wz],[Hne,Jne],[Wne,Kne],[Zne,Yne])}function Xne(e){return vh(zne(e),[Dne,jne])}function ese(e){return vh(e,[Vne,YA],[Une,YA],[Gne,qne])}function tse(e){return vh(e,[Lne,Nne])}const rse=gh(wh);function ise(e){return vh(e,[Rne,rse])}const nse=yh(Pne,Cne),sse=yh(Hz),ose=gh(wh,Xy,e0);function ase(e){return vh(e,[nse,Wz],[sse,ose])}const QA="Invalid Duration",Zz={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},lse={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Zz},Wi=146097/400,rd=146097/4800,use={years:{quarters:4,months:12,weeks:Wi/7,days:Wi,hours:Wi*24,minutes:Wi*24*60,seconds:Wi*24*60*60,milliseconds:Wi*24*60*60*1e3},quarters:{months:3,weeks:Wi/28,days:Wi/4,hours:Wi*24/4,minutes:Wi*24*60/4,seconds:Wi*24*60*60/4,milliseconds:Wi*24*60*60*1e3/4},months:{weeks:rd/7,days:rd,hours:rd*24,minutes:rd*24*60,seconds:rd*24*60*60,milliseconds:rd*24*60*60*1e3},...Zz},nc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],cse=nc.slice(0).reverse();function fa(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Ce(i)}function Jz(e,t){let r=t.milliseconds??0;for(const i of cse.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function XA(e,t){const r=Jz(e,t)<0?-1:1;nc.reduceRight((i,n)=>{if(be(t[n]))return i;if(i){const s=t[i]*r,o=e[n][i],a=Math.floor(s/o);t[n]+=a*r,t[i]-=a*o*r}return n},null),nc.reduce((i,n)=>{if(be(t[n]))return i;if(i){const s=t[i]%1;t[i]-=s,t[n]+=s*e[i][n]}return n},null)}function dse(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class Ce{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?use:lse;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||qe.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return Ce.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new li(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Ce({values:Iw(t,Ce.normalizeUnit),loc:qe.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(fc(t))return Ce.fromMillis(t);if(Ce.isDuration(t))return t;if(typeof t=="object")return Ce.fromObject(t);throw new li(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=tse(t);return i?Ce.fromObject(i,r):Ce.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=ise(t);return i?Ce.fromObject(i,r):Ce.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new li("need to specify a reason the Duration is invalid");const i=t instanceof Zn?t:new Zn(t,r);if(It.throwOnInvalid)throw new Die(i);return new Ce({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new sz(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?kr.create(this.loc,i).formatDurationFromString(this,t):QA}toHuman(t={}){if(!this.isValid)return QA;const r=nc.map(i=>{const n=this.values[i];return be(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=dk(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},me.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Jz(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=Ce.fromDurationLike(t),i={};for(const n of nc)(th(r.values,n)||th(this.values,n))&&(i[n]=r.get(n)+this.get(n));return fa(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=Ce.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=Rz(t(this.values[i],i));return fa(this,{values:r},!0)}get(t){return this[Ce.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...Iw(t,Ce.normalizeUnit)};return fa(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:n}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:n,conversionAccuracy:i};return fa(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return XA(this.matrix,t),fa(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=dse(this.normalize().shiftToAll().toObject());return fa(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Ce.normalizeUnit(o));const r={},i={},n=this.toObject();let s;for(const o of nc)if(t.indexOf(o)>=0){s=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;fc(n[o])&&(a+=n[o]);const u=Math.trunc(a);r[o]=u,i[o]=(a*1e3-u*1e3)/1e3}else fc(n[o])&&(i[o]=n[o]);for(const o in i)i[o]!==0&&(r[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return XA(this.matrix,r),fa(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return fa(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of nc)if(!r(this.values[i],t.values[i]))return!1;return!0}}const id="Invalid Interval";function pse(e,t){return!e||!e.isValid?Tt.invalid("missing or invalid start"):!t||!t.isValid?Tt.invalid("missing or invalid end"):t<e?Tt.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Tt{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new li("need to specify a reason the Interval is invalid");const i=t instanceof Zn?t:new Zn(t,r);if(It.throwOnInvalid)throw new Fie(i);return new Tt({invalid:i})}static fromDateTimes(t,r){const i=Hh(t),n=Hh(r),s=pse(i,n);return s??new Tt({start:i,end:n})}static after(t,r){const i=Ce.fromDurationLike(r),n=Hh(t);return Tt.fromDateTimes(n,n.plus(i))}static before(t,r){const i=Ce.fromDurationLike(r),n=Hh(t);return Tt.fromDateTimes(n.minus(i),n)}static fromISO(t,r){const[i,n]=(t||"").split("/",2);if(i&&n){let s,o;try{s=me.fromISO(i,r),o=s.isValid}catch{o=!1}let a,u;try{a=me.fromISO(n,r),u=a.isValid}catch{u=!1}if(o&&u)return Tt.fromDateTimes(s,a);if(o){const c=Ce.fromISO(n,r);if(c.isValid)return Tt.after(s,c)}else if(u){const c=Ce.fromISO(i,r);if(c.isValid)return Tt.before(a,c)}}return Tt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let n;return r!=null&&r.useLocaleWeeks?n=this.end.reconfigure({locale:i.locale}):n=this.end,n=n.startOf(t,r),Math.floor(n.diff(i,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?Tt.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(Hh).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),i=[];let{s:n}=this,s=0;for(;n<this.e;){const o=r[s]||this.e,a=+o>+this.e?this.e:o;i.push(Tt.fromDateTimes(n,a)),n=a,s+=1}return i}splitBy(t){const r=Ce.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(r.mapUnits(u=>u*n));s=+a>+this.e?this.e:a,o.push(Tt.fromDateTimes(i,s)),i=s,n+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:Tt.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return Tt.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const n=[],s=t.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((u,c)=>u.time-c.time);for(const u of a)i+=u.type==="s"?1:-1,i===1?r=u.time:(r&&+r!=+u.time&&n.push(Tt.fromDateTimes(r,u.time)),r=null);return Tt.merge(n)}difference(...t){return Tt.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:id}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Tw,r={}){return this.isValid?kr.create(this.s.loc.clone(r),t).formatInterval(this):id}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:id}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:id}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:id}toFormat(t,{separator:r=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:id}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):Ce.invalid(this.invalidReason)}mapEndpoints(t){return Tt.fromDateTimes(t(this.s),t(this.e))}}class eg{static hasDST(t=It.defaultZone){const r=me.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return zi.isValidZone(t)}static normalizeZone(t){return nl(t,It.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||qe.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||qe.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||qe.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||qe.create(r,i,s)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||qe.create(r,i,s)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||qe.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||qe.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return qe.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return qe.create(r,null,"gregory").eras(t)}static features(){return{relative:Pz(),localeWeek:Cz()}}}function eR(e,t){const r=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(Ce.fromMillis(i).as("days"))}function hse(e,t,r){const i=[["years",(u,c)=>c.year-u.year],["quarters",(u,c)=>c.quarter-u.quarter+(c.year-u.year)*4],["months",(u,c)=>c.month-u.month+(c.year-u.year)*12],["weeks",(u,c)=>{const h=eR(u,c);return(h-h%7)/7}],["days",eR]],n={},s=e;let o,a;for(const[u,c]of i)r.indexOf(u)>=0&&(o=u,n[u]=c(e,t),a=s.plus(n),a>t?(n[u]--,e=s.plus(n),e>t&&(a=e,n[u]--,e=s.plus(n))):e=a);return[e,n,a,o]}function fse(e,t,r,i){let[n,s,o,a]=hse(e,t,r);const u=t-n,c=r.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(o<t&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+u/(o-n)));const h=Ce.fromObject(s,i);return c.length>0?Ce.fromMillis(u,i).shiftTo(...c).plus(h):h}const mk={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},tR={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},mse=mk.hanidec.replace(/[\[|\]]/g,"").split("");function yse(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(mk.hanidec)!==-1)t+=mse.indexOf(e[r]);else for(const n in tR){const[s,o]=tR[n];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}function Mn({numberingSystem:e},t=""){return new RegExp(`${mk[e||"latn"]}${t}`)}const gse="missing Intl.DateTimeFormat.formatToParts support";function Fe(e,t=r=>r){return{regex:e,deser:([r])=>t(yse(r))}}const vse=" ",Kz=`[ ${vse}]`,Yz=new RegExp(Kz,"g");function wse(e){return e.replace(/\./g,"\\.?").replace(Yz,Kz)}function rR(e){return e.replace(/\./g,"").replace(Yz," ").toLowerCase()}function En(e,t){return e===null?null:{regex:RegExp(e.map(wse).join("|")),deser:([r])=>e.findIndex(i=>rR(r)===rR(i))+t}}function iR(e,t){return{regex:e,deser:([,r,i])=>t_(r,i),groups:t}}function tg(e){return{regex:e,deser:([t])=>t}}function bse(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function _se(e,t){const r=Mn(t),i=Mn(t,"{2}"),n=Mn(t,"{3}"),s=Mn(t,"{4}"),o=Mn(t,"{6}"),a=Mn(t,"{1,2}"),u=Mn(t,"{1,3}"),c=Mn(t,"{1,6}"),h=Mn(t,"{1,9}"),f=Mn(t,"{2,4}"),m=Mn(t,"{4,6}"),y=w=>({regex:RegExp(bse(w.val)),deser:([b])=>b,literal:!0}),v=(w=>{if(e.literal)return y(w);switch(w.val){case"G":return En(t.eras("short"),0);case"GG":return En(t.eras("long"),0);case"y":return Fe(c);case"yy":return Fe(f,zx);case"yyyy":return Fe(s);case"yyyyy":return Fe(m);case"yyyyyy":return Fe(o);case"M":return Fe(a);case"MM":return Fe(i);case"MMM":return En(t.months("short",!0),1);case"MMMM":return En(t.months("long",!0),1);case"L":return Fe(a);case"LL":return Fe(i);case"LLL":return En(t.months("short",!1),1);case"LLLL":return En(t.months("long",!1),1);case"d":return Fe(a);case"dd":return Fe(i);case"o":return Fe(u);case"ooo":return Fe(n);case"HH":return Fe(i);case"H":return Fe(a);case"hh":return Fe(i);case"h":return Fe(a);case"mm":return Fe(i);case"m":return Fe(a);case"q":return Fe(a);case"qq":return Fe(i);case"s":return Fe(a);case"ss":return Fe(i);case"S":return Fe(u);case"SSS":return Fe(n);case"u":return tg(h);case"uu":return tg(a);case"uuu":return Fe(r);case"a":return En(t.meridiems(),0);case"kkkk":return Fe(s);case"kk":return Fe(f,zx);case"W":return Fe(a);case"WW":return Fe(i);case"E":case"c":return Fe(r);case"EEE":return En(t.weekdays("short",!1),1);case"EEEE":return En(t.weekdays("long",!1),1);case"ccc":return En(t.weekdays("short",!0),1);case"cccc":return En(t.weekdays("long",!0),1);case"Z":case"ZZ":return iR(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return iR(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return tg(/[a-z_+-/]{1,256}?/i);case" ":return tg(/[^\S\n\r]/);default:return y(w)}})(e)||{invalidReason:gse};return v.token=e,v}const Sse={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function $se(e,t,r){const{type:i,value:n}=e;if(i==="literal"){const u=/^\s+$/.test(n);return{literal:!u,val:u?" ":n}}const s=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let a=Sse[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function xse(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function Tse(e,t,r){const i=e.match(t);if(i){const n={};let s=1;for(const o in r)if(th(r,o)){const a=r[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(i.slice(s,s+u))),s+=u}return[i,n]}else return[i,{}]}function Mse(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return be(e.z)||(r=zi.create(e.z)),be(e.Z)||(r||(r=new hr(e.Z)),i=e.Z),be(e.q)||(e.M=(e.q-1)*3+1),be(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),be(e.u)||(e.S=ck(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),r,i]}let LS=null;function Ese(){return LS||(LS=me.fromMillis(1555555555555)),LS}function Ise(e,t){if(e.literal)return e;const r=kr.macroTokenToFormatOpts(e.val),i=e9(r,t);return i==null||i.includes(void 0)?e:i}function Qz(e,t){return Array.prototype.concat(...e.map(r=>Ise(r,t)))}function Xz(e,t,r){const i=Qz(kr.parseFormat(r),e),n=i.map(o=>_se(o,e)),s=n.find(o=>o.invalidReason);if(s)return{input:t,tokens:i,invalidReason:s.invalidReason};{const[o,a]=xse(n),u=RegExp(o,"i"),[c,h]=Tse(t,u,a),[f,m,y]=h?Mse(h):[null,null,void 0];if(th(h,"a")&&th(h,"H"))throw new up("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:u,rawMatches:c,matches:h,result:f,zone:m,specificOffset:y}}}function kse(e,t,r){const{result:i,zone:n,specificOffset:s,invalidReason:o}=Xz(e,t,r);return[i,n,s,o]}function e9(e,t){if(!e)return null;const i=kr.create(t,e).dtFormatter(Ese()),n=i.formatToParts(),s=i.resolvedOptions();return n.map(o=>$se(o,e,s))}const NS="Invalid DateTime",nR=864e13;function rg(e){return new Zn("unsupported zone",`the zone "${e.name}" is not supported`)}function FS(e){return e.weekData===null&&(e.weekData=Mw(e.c)),e.weekData}function DS(e){return e.localWeekData===null&&(e.localWeekData=Mw(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function ru(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new me({...r,...t,old:r})}function t9(e,t,r){let i=e-t*60*1e3;const n=r.offset(i);if(t===n)return[i,t];i-=(n-t)*60*1e3;const s=r.offset(i);return n===s?[i,n]:[e-Math.min(n,s)*60*1e3,Math.max(n,s)]}function ig(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function hv(e,t,r){return t9(e_(e),t,r)}function sR(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:n,day:Math.min(e.c.day,Ew(i,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Ce.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=e_(s);let[u,c]=t9(a,r,e.zone);return o!==0&&(u+=o,c=e.zone.offset(u)),{ts:u,o:c}}function Bh(e,t,r,i,n,s){const{setZone:o,zone:a}=r;if(e&&Object.keys(e).length!==0||t){const u=t||a,c=me.fromObject(e,{...r,zone:u,specificOffset:s});return o?c:c.setZone(a)}else return me.invalid(new Zn("unparsable",`the input "${n}" can't be parsed as ${i}`))}function ng(e,t,r=!0){return e.isValid?kr.create(qe.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function jS(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=Ft(e.c.year,r?6:4),t?(i+="-",i+=Ft(e.c.month),i+="-",i+=Ft(e.c.day)):(i+=Ft(e.c.month),i+=Ft(e.c.day)),i}function oR(e,t,r,i,n,s){let o=Ft(e.c.hour);return t?(o+=":",o+=Ft(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=":")):o+=Ft(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=Ft(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=Ft(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=Ft(Math.trunc(-e.o/60)),o+=":",o+=Ft(Math.trunc(-e.o%60))):(o+="+",o+=Ft(Math.trunc(e.o/60)),o+=":",o+=Ft(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const r9={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ose={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Pse={ordinal:1,hour:0,minute:0,second:0,millisecond:0},i9=["year","month","day","hour","minute","second","millisecond"],Cse=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Ase=["year","ordinal","hour","minute","second","millisecond"];function Rse(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new sz(e);return t}function aR(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Rse(e)}}function lR(e,t){const r=nl(t.zone,It.defaultZone),i=qe.fromObject(t),n=It.now();let s,o;if(be(e.year))s=n;else{for(const c of i9)be(e[c])&&(e[c]=r9[c]);const a=kz(e)||Oz(e);if(a)return me.invalid(a);const u=r.offset(n);[s,o]=hv(e,u,r)}return new me({ts:s,zone:r,loc:i,o})}function uR(e,t,r){const i=be(r.round)?!0:r.round,n=(o,a)=>(o=dk(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),s=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return n(s(r.unit),r.unit);for(const o of r.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(e>t?-0:0,r.units[r.units.length-1])}function cR(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}class me{constructor(t){const r=t.zone||It.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new Zn("invalid input"):null)||(r.isValid?null:rg(r));this.ts=be(t.ts)?It.now():t.ts;let n=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[n,s]=[t.old.c,t.old.o];else{const a=r.offset(this.ts);n=ig(this.ts,a),i=Number.isNaN(n.year)?new Zn("invalid input"):null,n=i?null:n,s=i?null:a}this._zone=r,this.loc=t.loc||qe.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new me({})}static local(){const[t,r]=cR(arguments),[i,n,s,o,a,u,c]=r;return lR({year:i,month:n,day:s,hour:o,minute:a,second:u,millisecond:c},t)}static utc(){const[t,r]=cR(arguments),[i,n,s,o,a,u,c]=r;return t.zone=hr.utcInstance,lR({year:i,month:n,day:s,hour:o,minute:a,second:u,millisecond:c},t)}static fromJSDate(t,r={}){const i=une(t)?t.valueOf():NaN;if(Number.isNaN(i))return me.invalid("invalid input");const n=nl(r.zone,It.defaultZone);return n.isValid?new me({ts:i,zone:n,loc:qe.fromObject(r)}):me.invalid(rg(n))}static fromMillis(t,r={}){if(fc(t))return t<-nR||t>nR?me.invalid("Timestamp out of range"):new me({ts:t,zone:nl(r.zone,It.defaultZone),loc:qe.fromObject(r)});throw new li(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(fc(t))return new me({ts:t*1e3,zone:nl(r.zone,It.defaultZone),loc:qe.fromObject(r)});throw new li("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=nl(r.zone,It.defaultZone);if(!i.isValid)return me.invalid(rg(i));const n=qe.fromObject(r),s=Iw(t,aR),{minDaysInFirstWeek:o,startOfWeek:a}=WA(s,n),u=It.now(),c=be(r.specificOffset)?i.offset(u):r.specificOffset,h=!be(s.ordinal),f=!be(s.year),m=!be(s.month)||!be(s.day),y=f||m,g=s.weekYear||s.weekNumber;if((y||h)&&g)throw new up("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&h)throw new up("Can't mix ordinal dates with month/day");const v=g||s.weekday&&!y;let w,b,_=ig(u,c);v?(w=Cse,b=Ose,_=Mw(_,o,a)):h?(w=Ase,b=Pse,_=RS(_)):(w=i9,b=r9);let $=!1;for(const V of w){const Y=s[V];be(Y)?$?s[V]=b[V]:s[V]=_[V]:$=!0}const T=v?one(s,o,a):h?ane(s):kz(s),E=T||Oz(s);if(E)return me.invalid(E);const I=v?BA(s,o,a):h?HA(s):s,[C,L]=hv(I,c,i),H=new me({ts:C,zone:i,o:L,loc:n});return s.weekday&&y&&t.weekday!==H.weekday?me.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${H.toISO()}`):H}static fromISO(t,r={}){const[i,n]=Qne(t);return Bh(i,n,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,n]=Xne(t);return Bh(i,n,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,n]=ese(t);return Bh(i,n,r,"HTTP",r)}static fromFormat(t,r,i={}){if(be(t)||be(r))throw new li("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,o=qe.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,u,c,h]=kse(o,t,r);return h?me.invalid(h):Bh(a,u,i,`format ${r}`,t,c)}static fromString(t,r,i={}){return me.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,n]=ase(t);return Bh(i,n,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new li("need to specify a reason the DateTime is invalid");const i=t instanceof Zn?t:new Zn(t,r);if(It.throwOnInvalid)throw new Nie(i);return new me({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=e9(t,qe.fromObject(r));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(t,r={}){return Qz(kr.parseFormat(t),qe.fromObject(r)).map(n=>n.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?FS(this).weekYear:NaN}get weekNumber(){return this.isValid?FS(this).weekNumber:NaN}get weekday(){return this.isValid?FS(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?DS(this).weekday:NaN}get localWeekNumber(){return this.isValid?DS(this).weekNumber:NaN}get localWeekYear(){return this.isValid?DS(this).weekYear:NaN}get ordinal(){return this.isValid?RS(this.c).ordinal:NaN}get monthShort(){return this.isValid?eg.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?eg.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?eg.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?eg.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=e_(this.c),n=this.zone.offset(i-t),s=this.zone.offset(i+t),o=this.zone.offset(i-n*r),a=this.zone.offset(i-s*r);if(o===a)return[this];const u=i-o*r,c=i-a*r,h=ig(u,o),f=ig(c,a);return h.hour===f.hour&&h.minute===f.minute&&h.second===f.second&&h.millisecond===f.millisecond?[ru(this,{ts:u}),ru(this,{ts:c})]:[this]}get isInLeapYear(){return Qy(this.year)}get daysInMonth(){return Ew(this.year,this.month)}get daysInYear(){return this.isValid?Ip(this.year):NaN}get weeksInWeekYear(){return this.isValid?yy(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?yy(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:n}=kr.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:n}}toUTC(t=0,r={}){return this.setZone(hr.instance(t),r)}toLocal(){return this.setZone(It.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=nl(t,It.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(r||i){const s=t.offset(this.ts),o=this.toObject();[n]=hv(o,s,t)}return ru(this,{ts:n,zone:t})}else return me.invalid(rg(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const n=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return ru(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=Iw(t,aR),{minDaysInFirstWeek:i,startOfWeek:n}=WA(r,this.loc),s=!be(r.weekYear)||!be(r.weekNumber)||!be(r.weekday),o=!be(r.ordinal),a=!be(r.year),u=!be(r.month)||!be(r.day),c=a||u,h=r.weekYear||r.weekNumber;if((c||o)&&h)throw new up("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new up("Can't mix ordinal dates with month/day");let f;s?f=BA({...Mw(this.c,i,n),...r},i,n):be(r.ordinal)?(f={...this.toObject(),...r},be(r.day)&&(f.day=Math.min(Ew(f.year,f.month),f.day))):f=HA({...RS(this.c),...r});const[m,y]=hv(f,this.o,this.zone);return ru(this,{ts:m,o:y})}plus(t){if(!this.isValid)return this;const r=Ce.fromDurationLike(t);return ru(this,sR(this,r))}minus(t){if(!this.isValid)return this;const r=Ce.fromDurationLike(t).negate();return ru(this,sR(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},n=Ce.normalizeUnit(t);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(n==="weeks")if(r){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?kr.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):NS}toLocaleString(t=Tw,r={}){return this.isValid?kr.create(this.loc.clone(r),t).formatDateTime(this):NS}toLocaleParts(t={}){return this.isValid?kr.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=jS(this,o);return a+="T",a+=oR(this,o,r,i,n,s),a}toISODate({format:t="extended"}={}){return this.isValid?jS(this,t==="extended"):null}toISOWeekDate(){return ng(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+oR(this,o==="extended",r,t,i,s):null}toRFC2822(){return ng(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ng(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?jS(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(r||t)&&(i&&(n+=" "),r?n+="z":t&&(n+="ZZ")),ng(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():NS}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return Ce.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=cne(r).map(Ce.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,u=o?t:this,c=fse(a,u,s,n);return o?c.negate():c}diffNow(t="milliseconds",r={}){return this.diff(me.now(),t,r)}until(t){return this.isValid?Tt.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const n=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(r,i)<=n&&n<=s.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||me.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(n=t.unit,s=void 0),uR(r,this.plus(i),{...t,numeric:"always",units:n,unit:s})}toRelativeCalendar(t={}){return this.isValid?uR(t.base||me.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(me.isDateTime))throw new li("min requires all arguments be DateTimes");return ZA(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(me.isDateTime))throw new li("max requires all arguments be DateTimes");return ZA(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:n=null,numberingSystem:s=null}=i,o=qe.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return Xz(o,t,r)}static fromStringExplain(t,r,i={}){return me.fromFormatExplain(t,r,i)}static get DATE_SHORT(){return Tw}static get DATE_MED(){return oz}static get DATE_MED_WITH_WEEKDAY(){return jie}static get DATE_FULL(){return az}static get DATE_HUGE(){return lz}static get TIME_SIMPLE(){return uz}static get TIME_WITH_SECONDS(){return cz}static get TIME_WITH_SHORT_OFFSET(){return dz}static get TIME_WITH_LONG_OFFSET(){return pz}static get TIME_24_SIMPLE(){return hz}static get TIME_24_WITH_SECONDS(){return fz}static get TIME_24_WITH_SHORT_OFFSET(){return mz}static get TIME_24_WITH_LONG_OFFSET(){return yz}static get DATETIME_SHORT(){return gz}static get DATETIME_SHORT_WITH_SECONDS(){return vz}static get DATETIME_MED(){return wz}static get DATETIME_MED_WITH_SECONDS(){return bz}static get DATETIME_MED_WITH_WEEKDAY(){return zie}static get DATETIME_FULL(){return _z}static get DATETIME_FULL_WITH_SECONDS(){return Sz}static get DATETIME_HUGE(){return $z}static get DATETIME_HUGE_WITH_SECONDS(){return xz}}function Hh(e){if(me.isDateTime(e))return e;if(e&&e.valueOf&&fc(e.valueOf()))return me.fromJSDate(e);if(e&&typeof e=="object")return me.fromObject(e);throw new li(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const Bs="system",Fc="unknown",Al="UTC",Lse=Intl.DateTimeFormat().resolvedOptions().timeZone,Nse="shortOffset";function Fse(e){return"timeZoneIANA"in e}function Dse(e){return e.startsWith("UTC")}function kw(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?fv(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?jse(r):null}}}}}function fv(e,t=Bs){return e?Fse(e)?e.timeZoneIANA:zse(e,t):t}function jse(e){return{timeZoneIANA:e}}function zse(e,t=Bs){if(!e||!RA.has(e.timeZone))return t;const r=RA.get(e.timeZone);return Dse(e.timeZone)||e.respectsDaylightSaving?r:Vse(r)}function Vse(e){const t=me.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${hr.instance(-r).formatOffset(0,"narrow")}`}function MTe(e,t,r,i,n){if(t&&n==="date")return{timeZone:Al,timeZoneName:void 0};const s=i.timeStyle||i.hour,o=r===Fc;return{timeZone:o?n==="timestamp-offset"?void 0:e??Al:r,timeZoneName:o&&s?Nse:void 0}}const Use={year:void 0,month:void 0,day:void 0,weekday:void 0},Gse={hour:void 0,minute:void 0,second:void 0},n9={timeZone:Al},ds={year:"numeric",month:"numeric",day:"numeric"},Wh={year:"numeric",month:"long",day:"numeric"},Zh={year:"numeric",month:"short",day:"numeric"},Jh={year:"numeric",month:"long",weekday:"long",day:"numeric"},Ka={hour:"numeric",minute:"numeric"},mu={...Ka,second:"numeric"},s9={hourCycle:"h23"},Kh={...Ka,...s9},Yh={...mu,...s9},o9={"short-date":ds,"short-date-short-time":{...ds,...Ka},"short-date-short-time-24":{...ds,...Kh},"short-date-long-time":{...ds,...mu},"short-date-long-time-24":{...ds,...Yh},"short-date-le":ds,"short-date-le-short-time":{...ds,...Ka},"short-date-le-short-time-24":{...ds,...Kh},"short-date-le-long-time":{...ds,...mu},"short-date-le-long-time-24":{...ds,...Yh},"long-month-day-year":Wh,"long-month-day-year-short-time":{...Wh,...Ka},"long-month-day-year-short-time-24":{...Wh,...Kh},"long-month-day-year-long-time":{...Wh,...mu},"long-month-day-year-long-time-24":{...Wh,...Yh},"day-short-month-year":Zh,"day-short-month-year-short-time":{...Zh,...Ka},"day-short-month-year-short-time-24":{...Zh,...Kh},"day-short-month-year-long-time":{...Zh,...mu},"day-short-month-year-long-time-24":{...Zh,...Yh},"long-date":Jh,"long-date-short-time":{...Jh,...Ka},"long-date-short-time-24":{...Jh,...Kh},"long-date-long-time":{...Jh,...mu},"long-date-long-time-24":{...Jh,...Yh},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Ka,"long-time":mu},qse=Lr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),a9={ar:"ar-u-nu-latn-ca-gregory"};let Vx=new WeakMap;const i_=o9["short-date-short-time"];function Bse(e){let t=Vx.get(e);if(!t){const r=Ni(),i=a9[r]||r,n=gk(e.timeZone??Bs),s={...e,timeZone:n};t=new Intl.DateTimeFormat(i,s),Vx.set(e,t)}return t}function ETe(e){return o9[e]}function yk(e,t=i_){return Bse(t).format(e)}function ITe(e,t=i_){return yk(new Date(e),{...t,...n9,...Gse})}function kTe(e,t=i_){return yk(new Date(`1970-01-01T${e}Z`),{...t,...n9,...Use})}function OTe(e,t=i_){if(t.timeZone)return yk(new Date(e),t);const r=me.fromISO(e,{setZone:!0}),i=Ni(),n=a9[i]??i,s=r.offset===0?Al:t.timeZone,o={...t,timeZone:s};return r.toLocaleString(o,{locale:n})}function gk(e){switch(e){case Bs:return Lse;case Fc:return Al;default:return e}}WI(()=>{Vx=new WeakMap});const dR={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function zS(e,t,r,i=Bs){const n=new zi(gk(i)),s=me.fromJSDate(e,{zone:n}),o=r==="decades"||r==="centuries"?"year":u9(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),s.plus({[o]:t}).toJSDate()}function PTe(e,t,r="milliseconds"){const i=e.getTime(),n=l9(t,r,"milliseconds");return new Date(i+n)}function pR(e,t,r=Bs){const i=new zi(gk(r)),n=me.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const o=n.startOf("year"),{year:a}=o,u=a-a%(t==="decades"?10:100);return o.set({year:u}).toJSDate()}const s=u9(t);return n.startOf(s).toJSDate()}function l9(e,t,r){return e===0?0:e*dR[t]/dR[r]}function u9(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Yi;let ki=Yi=class extends j{static get allTime(){return hR}static get empty(){return Hse}static fromArray(e){return new Yi({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Yi.allTime)}get isEmpty(){return this.equals(Yi.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new Yi({end:this.end,start:this.start})}equals(e){var s,o,a,u;if(!e)return!1;const t=((s=this.start)==null?void 0:s.getTime())??this.start,r=((o=this.end)==null?void 0:o.getTime())??this.end,i=((a=e.start)==null?void 0:a.getTime())??e.start,n=((u=e.end)==null?void 0:u.getTime())??e.end;return t===i&&r===n}expandTo(e,t=Bs){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=pR(r,e,t));let i=this.end;if(i){const n=pR(i,e,t);i=i.getTime()===n.getTime()?n:zS(n,1,e,t)}return new Yi({start:r,end:i})}intersection(e){var a,u,c,h;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Yi.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((a=this.start)==null?void 0:a.getTime())??-1/0,r=((u=this.end)==null?void 0:u.getTime())??1/0,i=((c=e.start)==null?void 0:c.getTime())??-1/0,n=((h=e.end)==null?void 0:h.getTime())??1/0;let s,o;return i>=t&&i<=r?s=i:t>=i&&t<=n&&(s=t),r>=i&&r<=n?o=r:n>=t&&n<=r&&(o=n),s==null||o==null||isNaN(s)||isNaN(o)?Yi.empty:new Yi({start:s===-1/0?null:new Date(s),end:o===1/0?null:new Date(o)})}offset(e,t,r=Bs){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Yi,{start:n,end:s}=this;return n!=null&&(i.start=zS(n,e,t,r)),s!=null&&(i.end=zS(s,e,t,r)),i}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return hR.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Yi({start:t,end:r})}};l([d({type:Date,json:{write:{allowNull:!0}}})],ki.prototype,"end",void 0),l([G("end")],ki.prototype,"readEnd",null),l([Z("end")],ki.prototype,"writeEnd",null),l([d({readOnly:!0,json:{read:!1}})],ki.prototype,"isAllTime",null),l([d({readOnly:!0,json:{read:!1}})],ki.prototype,"isEmpty",null),l([d({type:Date,json:{write:{allowNull:!0}}})],ki.prototype,"start",void 0),l([G("start")],ki.prototype,"readStart",null),l([Z("start")],ki.prototype,"writeStart",null),ki=Yi=l([x("esri.TimeExtent")],ki);const hR=new ki,Hse=new ki({start:void 0,end:void 0}),Hs=ki;let c9=0;const vk=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+c9++})}};return t=l([x("esri.core.Identifiable")],t),t},wk=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:c9++})}};return t=l([x("esri.core.Identifiable.NumericIdentifiable")],t),t};let fR=class extends vk(class{}){};fR=l([x("esri.core.Identifiable")],fR);async function Wse(e){var i;const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await J(async()=>{const{fromItem:n}=await import("./portalLayers-DVk7M_Bl.js").then(s=>s.p);return{fromItem:n}},__vite__mapDeps([8,9,10]));try{return await r(t)}catch(n){const s=t==null?void 0:t.portalItem,o=(s==null?void 0:s.id)||"unset",a=((i=s==null?void 0:s.portal)==null?void 0:i.url)||Pe.portalUrl;throw z.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",n),n}}let Zse=0,Et=class extends ra.EventedMixin(vk(Yo)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Be(-180,-90,180,90,ve.WGS84),this.id=Date.now().toString(16)+"-layer-"+Zse++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=ve.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await J(async()=>{const{fromUrl:i}=await import("./arcgisLayers-BQoRyFjY.js");return{fromUrl:i}},__vite__mapDeps([11,9,10]))).fromUrl(r)}static fromPortalItem(t){return Wse(t)}initialize(){this.when().catch(t=>{bi(t)||z.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Ar(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await dt(t,{query:{f:"json"},responseType:"json"})).data;throw new N("layer:no-attribution-data","Layer does not have attribution data")}};l([d({type:String})],Et.prototype,"attributionDataUrl",void 0),l([d({type:Be})],Et.prototype,"fullExtent",void 0),l([d({readOnly:!0})],Et.prototype,"hasAttributionData",null),l([d({type:String,clonable:!1})],Et.prototype,"id",void 0),l([d({type:Boolean,nonNullable:!0})],Et.prototype,"legendEnabled",void 0),l([d({type:["show","hide","hide-children"]})],Et.prototype,"listMode",void 0),l([d({type:Number,range:{min:0,max:1},nonNullable:!0})],Et.prototype,"opacity",void 0),l([d({clonable:!1})],Et.prototype,"parent",void 0),l([d({readOnly:!0})],Et.prototype,"parsedUrl",null),l([d({type:Boolean,readOnly:!0})],Et.prototype,"persistenceEnabled",void 0),l([d({type:Boolean})],Et.prototype,"popupEnabled",void 0),l([d({type:Boolean})],Et.prototype,"attributionVisible",void 0),l([d({type:ve})],Et.prototype,"spatialReference",void 0),l([d({type:String})],Et.prototype,"title",void 0),l([d({readOnly:!0,json:{read:!1}})],Et.prototype,"type",void 0),l([d()],Et.prototype,"url",void 0),l([d({type:Hs})],Et.prototype,"visibilityTimeExtent",void 0),l([d({type:Boolean,nonNullable:!0})],Et.prototype,"visible",void 0),Et=l([x("esri.layers.Layer")],Et);const bk=Et;function Ux(e,t,r){let i,n;if(e)for(let s=0,o=e.length;s<o;s++){if(i=e.at(s),(i==null?void 0:i[t])===r)return i;if((i==null?void 0:i.type)==="group"&&(n=Ux(i.layers,t,r),n))return n}}const Jse=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new te;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||z.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void z.getLogger(this).error("#add()","Cannot add layer to itself.");i(o.item)}),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}set layers(r){this._set("layers",Il(r,this._get("layers")))}add(r,i){const n=this.layers;if(i=n.getNextIndex(i),r instanceof bk){const s=r;s.parent===this?this.reorder(s,i):n.add(s,i)}else Vl(r)?r.then(s=>{this.destroyed||this.add(s,i)}):z.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const n=this.layers;let s=n.getNextIndex(i);r.slice().forEach(o=>{o.parent!==this?(n.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(r){return Ux(this.layers,"id",r)}findLayerByUid(r){return Ux(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return l([d()],t.prototype,"layers",null),t=l([x("esri.support.LayersMixin")],t),t};function Gx(e,t,r){if(e)for(let i=0,n=e.length;i<n;i++){const s=e.at(i);if(s[t]===r)return s;if((s==null?void 0:s.type)==="group"){const o=Gx(s.tables,t,r);if(o)return o}}}const Kse=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new te,this.addHandles([this.tables.on("after-add",i=>{const n=i.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&z.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",Il(r,this._get("tables")))}findTableById(r){return Gx(this.tables,"id",r)}findTableByUid(r){return Gx(this.tables,"uid",r)}};return l([d()],t.prototype,"tables",null),t=l([x("esri.support.TablesMixin")],t),t};let Pn=class extends Kse(Jse(ra.EventedMixin(le))){constructor(t){super(t),this.allLayers=new my({getCollections:()=>{var r,i,n;return[(r=this.basemap)==null?void 0:r.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:r=>"layers"in r?r.layers:null}),this.allTables=sie(this),this.basemap=null,this.editableLayers=new my({getCollections:()=>[this.allLayers],itemFilterFunction:Kte}),this.ground=new $w,this._basemapCache=rie()}destroy(){iie(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=nt(this.basemap),nt(this.ground),this._set("ground",null)}castBasemap(t){return nie(t,this._basemapCache)}castGround(t){return oie(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(r=>r.id===t)}findTableById(t){return this.allTables.find(r=>r.id===t)}};l([d({readOnly:!0,dependsOn:[]})],Pn.prototype,"allLayers",void 0),l([d({readOnly:!0})],Pn.prototype,"allTables",void 0),l([d({type:Tm,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Pn.prototype,"basemap",void 0),l([je("basemap")],Pn.prototype,"castBasemap",null),l([d({readOnly:!0})],Pn.prototype,"editableLayers",void 0),l([d({type:$w,nonNullable:!0})],Pn.prototype,"ground",void 0),l([je("ground")],Pn.prototype,"castGround",null),l([d()],Pn.prototype,"undoRedo",void 0),Pn=l([x("esri.Map")],Pn);const d9=Pn,He=e=>{let t=class extends e{clone(){var u;const r=Yr(this);nj(r,"unable to clone instance of non-accessor class");const i=r.metadata,n=r.store,s={},o=new Map;for(const c in i){const h=i[c],f=n==null?void 0:n.originOf(c),m=h.clonable;if(h.readOnly||m===!1||f!==xe.USER&&f!==xe.DEFAULTS&&f!==xe.WEB_MAP&&f!==xe.WEB_SCENE)continue;const y=this[c];let g=null;g=typeof m=="function"?m(y):m==="reference"?y:G$(y),y!=null&&g==null||(f===xe.DEFAULTS?o.set(c,g):s[c]=g)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const c=(u=Yr(a))==null?void 0:u.store;if(c)for(const[h,f]of o)c.set(h,f,xe.DEFAULTS)}return a}};return t=l([x("esri.core.Clonable")],t),t};let qx=class extends He(le){};qx=l([x("esri.core.Clonable")],qx);let yu=class extends qx{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};l([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],yu.prototype,"row",void 0),l([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],yu.prototype,"column",void 0),l([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],yu.prototype,"rows",void 0),l([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],yu.prototype,"columns",void 0),yu=l([x("esri.CameraLayout")],yu);const p9=yu;let Yse=class{constructor(t,r){this.min=t,this.max=r,this.range=r-t}normalize(t,r=0,i=!1){return mR(this.range,this.min,this.max,t,r,i)}clamp(t,r=0){return ss(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+Bx(this.range,t-r,i)}minimalMonotonic(t,r,i){return mR(this.range,t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,n=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(n)?i:n}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}};function mR(e,t,r,i,n=0,s=!1){return(i-=n)<t?i+=Bx(e,t-i):i>r&&(i-=Bx(e,i-r)),s&&i===r&&(i=t),i+n}function Bx(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const Qse=new Yse(0,360);let ys=class extends He(j){constructor(...t){super(...t),this.position=new ge([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new p9}normalizeCtorArgs(t,r,i,n){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const s={position:t};return r!=null&&(s.heading=r),i!=null&&(s.tilt=i),n!=null&&(s.fov=n),s}return t}writePosition(t,r,i,n){const s=t.clone();s.x=ln(t.x||0),s.y=ln(t.y||0),s.z=t.hasZ?ln(t.z||0):t.z,r[i]=s.write({},n)}readPosition(t,r){const i=new ge;return i.read(t,r),i.x=ln(i.x||0),i.y=ln(i.y||0),i.z=i.hasZ?ln(i.z||0):i.z,i}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};l([d({type:ge,json:{write:{isRequired:!0}}})],ys.prototype,"position",void 0),l([Z("position")],ys.prototype,"writePosition",null),l([G("position")],ys.prototype,"readPosition",null),l([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),je(e=>Qse.normalize(ln(e)))],ys.prototype,"heading",void 0),l([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),je(e=>ss(ln(e),-180,180))],ys.prototype,"tilt",void 0),l([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],ys.prototype,"fov",void 0),l([d({type:p9,nonNullable:!0,json:{read:!1,write:!1}})],ys.prototype,"layout",void 0),ys=l([x("esri.Camera")],ys);const Xse=ys;var Hx;let $a=Hx=class extends j{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new Hx({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};l([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:VS}}}}})],$a.prototype,"rotation",void 0),l([je("rotation")],$a.prototype,"castRotation",null),l([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:VS}}}}})],$a.prototype,"scale",void 0),l([d({types:Jc,json:{read:Cl,write:!0,origins:{"web-scene":{read:Cl,write:{overridePolicy:VS}}}}})],$a.prototype,"targetGeometry",void 0),l([d({type:Xse,json:{write:!0}})],$a.prototype,"camera",void 0),$a=Hx=l([x("esri.Viewpoint")],$a);const Xn=$a;function VS(){return{enabled:!this.camera}}let Ow=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new Zy,this._items=new Set}get length(){return ae(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return ae(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach(i=>{t(i)||this._items.delete(i)}),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){ae(this._observable),yield*this._items}};const h9=new FinalizationRegistry(e=>{e.close()});function eoe(e,t){h9.register(e,t,t)}function toe(e){h9.unregister(e)}function f9(e,t){return new Proxy({},{get:(r,i,n)=>(...s)=>{let o,a;const u=s[s.length-1];return roe(u)&&(o=u.signal,a=u.transferList,s.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),s,{transferList:a,signal:o})}})}function roe(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const ioe={statsWorker:()=>J(()=>import("./statsWorker-BbXjcs3U.js"),__vite__mapDeps([12,13,14,15,16])),geometryEngineWorker:()=>J(()=>import("./geometryEngineWorker-BwXkxe4S.js"),__vite__mapDeps([17,18,19,20])),CSVSourceWorker:()=>J(()=>import("./CSVSourceWorker-DoVJ4XB-.js"),__vite__mapDeps([21,22,20,23,24,25,26,27,28,29,30,31,32,33,13,14,15,16,34,35])),EdgeProcessingWorker:()=>J(()=>import("./EdgeProcessingWorker-CwzfJDBh.js"),__vite__mapDeps([36,37,38,39,40,41,42,43,44,45,46])),ElevationSamplerWorker:()=>J(()=>import("./ElevationSamplerWorker-Br6aTPFF.js"),__vite__mapDeps([47,28,48,49,50,51,52,53,54,55,56,57,38,58])),FeatureServiceSnappingSourceWorker:()=>J(()=>import("./FeatureServiceSnappingSourceWorker-X_B8hLE3.js"),__vite__mapDeps([59,24,25,23,26,27,28,29,20,30,31,32,33,13,14,15,16,60,61,62,6])),GeoJSONSourceWorker:()=>J(()=>import("./GeoJSONSourceWorker-Ckycg3w2.js"),__vite__mapDeps([63,25,23,26,24,27,28,29,20,30,31,32,33,13,14,15,16,64,22,35,65])),LercWorker:()=>J(()=>import("./LercWorker-Cw_OnK-1.js"),[]),MemorySourceWorker:()=>J(()=>import("./MemorySourceWorker-wAbp3Saw.js"),__vite__mapDeps([66,25,23,26,67,24,27,28,29,20,30,31,32,33,13,14,15,16,35,65,22])),PBFDecoderWorker:()=>J(()=>import("./PBFDecoderWorker-ioCqJ5k-.js"),__vite__mapDeps([68,25,23,26,60,61])),FeaturePipelineWorker:()=>J(()=>import("./FeaturePipelineWorker-DKvLjeg5.js"),__vite__mapDeps([69,70,71,72,73,74,45,75,46,76,77,23,78,79,80,40,81,32,29,25,26,20,82,83,84,85,86,87,88,30,31,33,13,14,15,16,62,60,61,89,64,22,35,65,90,91])),PointCloudWorker:()=>J(()=>import("./PointCloudWorker-CFJ6e3Ca.js"),__vite__mapDeps([92,93,50,94,95,96,97,44,98,51,52,53,99])),RasterWorker:()=>J(()=>import("./RasterWorker-IMXs5SVf.js"),__vite__mapDeps([100,101,102,103,104])),SceneLayerSnappingSourceWorker:()=>J(()=>import("./SceneLayerSnappingSourceWorker-DHq89f_E.js"),__vite__mapDeps([105,106,107,99,50,51,94,40,41,42,43,37,38,39,44,45,46])),SceneLayerWorker:()=>J(()=>import("./SceneLayerWorker-BaG7WWKv.js"),__vite__mapDeps([108,57,48,55,107,99,50,51,94,109,52,97,44,110,111,112,80,98,93,53])),WFSSourceWorker:()=>J(()=>import("./WFSSourceWorker-DZZvd0IB.js"),__vite__mapDeps([113,25,23,26,24,27,28,29,20,30,31,32,33,13,14,15,16,64,22,65,114,115])),WorkerTileHandler:()=>J(()=>import("./WorkerTileHandler-Cbouurg3.js"),__vite__mapDeps([116,117,78,79,118,119,73,61,85,70,120,121,45,46,86,77])),Lyr3DWorker:()=>J(()=>import("./Lyr3DWorker-D8Sf1fSS.js"),[])},m9="worker:port-closed";var nr;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(nr||(nr={}));let noe=0;function y9(){return noe++}function soe(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function gy(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function _k(e,t,r,i){if(t.type===nr.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==nr.INVOKE&&t.type!==nr.RESPONSE)return void e.postMessage(t);let n;if(soe(r)?(n=yR(r.transferList),t.data=r.result):(n=yR(i),t.data=r),n){if(R("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case nr.INVOKE:throw o;case nr.RESPONSE:return void _k(e,{type:nr.RESPONSE,jobId:t.jobId,error:gy(o)})}}}e.postMessage(t,n)}else e.postMessage(t)}function vy(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function yR(e){if(!(e!=null&&e.length))return null;if(R("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!ooe(r));return t.length?t:null}function ooe(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function zTe(e){try{return await e}catch(t){const r=(t==null?void 0:t.name)===m9;if(!(bi(t)||r))throw t;return}}const{CLOSE:gR,ABORT:vR,INVOKE:wR,RESPONSE:Qh,OPEN_PORT:bR,ON:aoe}=nr,loe=2;let uoe=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===nr.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Rl=class md{static connect(t,r){const i=new MessageChannel;let n;n=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new md(i.port1,{channel:i,client:n,schedule:r});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),md.clients.set(s,n),i.port2}static loadWorker(t){const r=ioe[t];return r?r():Promise.resolve(null)}constructor(t,r,i){this._port=t,this._jobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new uoe(n=>this._onInvokeMessage(n)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:gR}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const n=i==null?void 0:i.signal,s=i==null?void 0:i.transferList;if(!this._port)return Promise.reject(new N(m9,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=y9();return new Promise((a,u)=>{if(Ko(n))return this._processWork(),void u(Ot());const c=yn(n,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),pt(f.abortHandle),this._post({type:vR,jobId:o}),u(Ot()))}),h={resolve:a,reject:u,abortHandle:c,debugInfo:t};this._outJobs.set(o,h),this._post({type:wR,jobId:o,methodName:t,abortable:n!=null},r,s)})}createInvokeProxy(t){return f9(this,t)}on(t,r){const i=new MessageChannel;function n(s){r(s.data)}return this._port.postMessage({type:nr.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",n),i.port1.start(),De(()=>{i.port1.postMessage({type:nr.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:bR,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=loe)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:r,data:i,invokeOptions:n,resolver:s}=t;this.apply(r,i,n).then(a=>s.resolve(a)).catch(a=>s.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{pt(t.abortHandle),t.reject(Ot(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,r){const i=vy(t);if(i)switch(i.type){case Qh:this._onResponseMessage(i);break;case wR:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case vR:this._onAbortMessage(i);break;case gR:this._onCloseMessage();break;case bR:this._onOpenPortMessage(i);break;case aoe:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&md.clients.get(this)===t&&t.destroy(),md.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n=[],abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let u,c=this._client,h=c[r];try{if(!h&&r&&r.includes(".")){const f=r.split(".");for(let m=0;m<f.length-1;m++)c=c[f[m]],h=c[f[m+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);n.push({client:this,signal:o?o.signal:null}),u=h.apply(c,n)}catch(f){return void this._post({type:Qh,jobId:i,error:gy(f)})}Vl(u)?(a.set(i,{controller:o,promise:u}),u.then(f=>{a.has(i)&&(a.delete(i),this._post({type:Qh,jobId:i},f))},f=>{a.has(i)&&(a.delete(i),bi(f)||this._post({type:Qh,jobId:i,error:gy(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:Qh,jobId:i},u)}_onOpenPortMessage(t){new md(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,s=>{r.postMessage(s)}),n=By(t.port,"message",s=>{const o=vy(s);(o==null?void 0:o.type)===nr.CLOSE&&(n.remove(),i.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs;if(!s.has(r))return;const o=s.get(r);s.delete(r),this._processWork(),pt(o.abortHandle),i?o.reject(N.fromJSON(JSON.parse(i))):o.resolve(n)}_post(t,r,i){return _k(this._port,t,r,i)}};Rl.kernelInfo={buildDate:l6,fullVersion:LI,revision:u6},Rl.clients=new Map;let coe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Ow}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,r){return new Promise((i,n)=>{let s=!0;const o=a=>{ht(r.signal),s&&(s=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const u=t[a];Vl(u)?this._clientPromises[a]=u.then(c=>(this._clients[a]=new Rl(c,r,this._ongoingJobsQueue),o(i),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new Rl(u,r,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(i))}})}broadcast(t,r,i){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a==null?void 0:a.invoke(t,r,i))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(Ot(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(i=>i==null?void 0:i.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,toe(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const n=ji();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:i,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(a=>a==null?void 0:a.jobAdded())}return n.promise}createInvokeProxy(t){return f9(this,t)}on(t,r){return Promise.all(this._clientPromises).then(()=>Uy(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(r[n]=s.openPort()),--i==0&&t(r)})})}get test(){}};const doe={async request(e,t){var o,a;const r=e.options,i=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&((o=ox(e.url))!=null&&o.after)?i:"array-buffer";const n=await dt(e.url,r),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((a=n.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},poe={ar:"ar-u-nu-latn"};let mv=new WeakMap,g9={};function hoe(e){const t=e||g9;if(!mv.has(t)){const r=Ni(),i=poe[Ni()]||r;mv.set(t,new Intl.NumberFormat(i,e))}return mv.get(t)}function GTe(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function qTe(e,t){return Object.is(e,-0)&&(e=0),hoe(t).format(e)}WI(()=>{mv=new WeakMap,g9={}});async function foe(e,t,r,i){const n=t.exec(r);if(!n)throw new N("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=Eee(i),u=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:u;let h;try{h=await _R(e(c))}catch(f){if(c===u)throw new N("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{h=await _R(e(u))}catch(m){throw new N("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:m})}}return h}async function _R(e){if(SR.fetchBundleAsset!=null)return SR.fetchBundleAsset(e);const t=await dt(e,{responseType:"text"});return JSON.parse(t.data)}let moe=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let n;n=typeof i=="string"?s=>new URL(s,new URL(i,window.location.href)).href:i instanceof URL?s=>new URL(s,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return foe(this.getAssetUrl,this.matcher,t,r)}};function yoe(e){return new moe(e)}const SR={};Mee(yoe({pattern:"esri/",location:Ne}));const $R={};function goe(e){var r;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((r=e.packages)==null?void 0:r.concat())||[],paths:{...$R.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=$R.baseUrl),t}let voe=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}},yv=class{constructor(){this._dispatcher=new voe,this._workerPostMessage({type:nr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Y1(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){Y1(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=vy(t);if(r&&r.type===nr.OPEN){const{modulePath:i,jobId:n}=r;let s=await Rl.loadWorker(i);s||(s=await import(i));const o=Rl.connect(s);this._workerPostMessage({type:nr.OPENED,jobId:n,data:o})}}};const Wx=()=>z.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:woe}=nr,boe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let sg,og;const xR="Failed to create Worker. Fallback to execute module in main thread";async function _oe(){if(!R("esri-workers"))return TR(new yv);if(!sg&&!og)try{const t=boe.split("{CONFIGURATION}").join(Soe());sg=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){og=t||{}}let e;if(sg)try{e=new Worker(sg,{name:"esri-worker-"+$oe++})}catch{Wx().warn(xR,og),e=new yv}else Wx().warn(xR,og),e=new yv;return TR(e)}async function TR(e){return new Promise(t=>{function r(n){const s=vy(n);s&&s.type===woe&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(n){n.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),Wx().warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new yv).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function Soe(){let e;if(Pe.default!=null){const n={...Pe};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(Pe));e.assetsPath=cn(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?cn(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Ni(),e.has={"esri-csp-restrictions":R("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":R("esri-2d-update-debug"),"esri-2d-log-updating":R("esri-2d-log-updating"),"featurelayer-pbf":R("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":R("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":R("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":R("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":R("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":R("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":R("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":R("featurelayer-snapshot-enabled"),"esri-atomics":R("esri-atomics"),"esri-shared-array-buffer":R("esri-shared-array-buffer"),"esri-tiles-debug":R("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":R("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":R("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=cn(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=cn(e.workers.workerPath):e.workers.workerPath=cn(Ne("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Pe.workers.loaderConfig,r=goe({baseUrl:t==null?void 0:t.baseUrl,locale:Ni(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:l6,fullVersion:LI,revision:u6}})}let $oe=0;const{ABORT:MR,INVOKE:xoe,OPEN:Toe,OPENED:Moe,RESPONSE:Xh}=nr;let Eoe=class v9{static async create(t){const r=await _oe();return new v9(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),z.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,n=y9();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:vI(i,()=>{this._outJobs.delete(n),this._post({type:MR,jobId:n})})};this._outJobs.set(n,a),this._post({type:Toe,jobId:n,modulePath:t})})}_onMessage(t){const r=vy(t);if(r)switch(r.type){case Moe:this._onOpenedMessage(r);break;case Xh:this._onResponseMessage(r);break;case MR:this._onAbortMessage(r);break;case xoe:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);n&&(n.controller&&n.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,u=doe[r];let c;try{if(typeof u!="function")throw new TypeError(`${r} is not a function`);c=u.call(null,n,{signal:o?o.signal:null})}catch(h){return void this._post({type:Xh,jobId:i,error:gy(h)})}Vl(c)?(a.set(i,{controller:o,promise:c}),c.then(h=>{a.has(i)&&(a.delete(i),this._post({type:Xh,jobId:i},h))},h=>{a.has(i)&&(a.delete(i),h||(h={message:"Error encountered at method"+r}),bi(h)||this._post({type:Xh,jobId:i,error:gy(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:Xh,jobId:i},c)}_onOpenedMessage(t){const{jobId:r,data:i}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),pt(n.abortHandle),n.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),pt(s.abortHandle),i?s.reject(N.fromJSON(JSON.parse(i))):s.resolve(n))}_post(t,r,i){return _k(this.worker,t,r,i)}};const ER=R("host-browser")?Math.min(navigator.hardwareConcurrency-1,R("workers-pool-size")):0;let sc=R("esri-mobile")?Math.min(ER,3):ER;sc||(sc=R("safari")&&R("mac")?7:2);let IR=0;const gv=[];function Ioe(){w9()}async function ag(e,t){const r=new coe,{registryTarget:i,...n}=t;return await r.open(e,n),i&&eoe(i,r),r}async function koe(e,t={}){if(typeof e!="string")throw new N("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(R("host-webworker")&&!R("esri-workers")&&(r="local"),r==="local"){let i=await Rl.loadWorker(e);i||(i=await import(e)),ht(t.signal);const n=t.client||i;return ag([Rl.connect(i,t.schedule)],{...t,client:n})}if(await w9(),ht(t.signal),r==="dedicated"){const i=IR++%sc;return ag([await gv[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,sc);if(i<sc){const n=new Array(i);for(let s=0;s<i;++s){const o=IR++%sc;n[s]=gv[o].open(e,t)}return ag(n,t)}}return ag(gv.map(i=>i.open(e,t)),t)}let lg=null;async function w9(){if(lg)return lg;new AbortController;const e=[];for(let t=0;t<sc;t++){const r=Eoe.create(t).then(i=>(gv[t]=i,i));e.push(r)}return lg=Promise.all(e),lg}const ma=bt.radius,In=bt.eccentricitySquared,Ooe={a1:ma*In,a2:ma*In*ma*In,a3:ma*In*In/2,a4:ma*In*ma*In*2.5,a5:ma*In+ma*In*In/2,a6:1-In};1/294.9786982,1/298.257222101,bt.radius,bt.flattening,1/298.257222101,kl.radius,kl.flattening,1/192.0430107526882,zs.radius,zs.flattening,1/10.2079945799458,1/43.61604095563141,zs.radius;var P;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(P||(P={}));const Poe={[P.WGS84]:{[P.CGCS2000]:rt,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:rt,[P.SPHERICAL_ECEF]:km,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:Op,[P.PLATE_CARREE]:Pp,[P.WGS84]:rt,[P.WGS84_ECEF]:Rp},[P.CGCS2000]:{[P.CGCS2000]:rt,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:rt,[P.SPHERICAL_ECEF]:km,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:Op,[P.PLATE_CARREE]:Pp,[P.WGS84]:rt,[P.WGS84_ECEF]:Rp},[P.GCSMARS2000]:{[P.CGCS2000]:null,[P.GCSMARS2000]:rt,[P.GCSMOON2000]:null,[P.LON_LAT]:rt,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:PR,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.GCSMOON2000]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:rt,[P.LON_LAT]:rt,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:OR,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.WEB_MERCATOR]:{[P.CGCS2000]:Im,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:Im,[P.SPHERICAL_ECEF]:Coe,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:rt,[P.PLATE_CARREE]:Loe,[P.WGS84]:Im,[P.WGS84_ECEF]:Aoe},[P.WGS84_ECEF]:{[P.CGCS2000]:Lp,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:Lp,[P.SPHERICAL_ECEF]:qoe,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:Boe,[P.PLATE_CARREE]:Noe,[P.WGS84]:Lp,[P.WGS84_ECEF]:rt},[P.SPHERICAL_ECEF]:{[P.CGCS2000]:Ap,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:Ap,[P.SPHERICAL_ECEF]:rt,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:Voe,[P.PLATE_CARREE]:Foe,[P.WGS84]:Ap,[P.WGS84_ECEF]:Uoe},[P.SPHERICAL_MARS_PCPF]:{[P.CGCS2000]:null,[P.GCSMARS2000]:AR,[P.GCSMOON2000]:null,[P.LON_LAT]:AR,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:rt,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.SPHERICAL_MOON_PCPF]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:CR,[P.LON_LAT]:CR,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:rt,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.UNKNOWN]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:null,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:rt,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.LON_LAT]:{[P.CGCS2000]:rt,[P.GCSMARS2000]:rt,[P.GCSMOON2000]:rt,[P.LON_LAT]:rt,[P.SPHERICAL_ECEF]:km,[P.SPHERICAL_MARS_PCPF]:PR,[P.SPHERICAL_MOON_PCPF]:OR,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:Op,[P.PLATE_CARREE]:Pp,[P.WGS84]:rt,[P.WGS84_ECEF]:Rp},[P.PLATE_CARREE]:{[P.CGCS2000]:Cp,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:Cp,[P.SPHERICAL_ECEF]:Doe,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:joe,[P.PLATE_CARREE]:rt,[P.WGS84]:Cp,[P.WGS84_ECEF]:zoe}};function b9(e,t,r=_9()){return e==null||t==null?null:Hoe(e,t,r).projector}function kR(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Zc(e,1)),vw(e)?t.spatialReferenceId=P.SPHERICAL_ECEF:Oc(e)?t.spatialReferenceId=P.WGS84:qs(e)?t.spatialReferenceId=P.WEB_MERCATOR:wX(e)?t.spatialReferenceId=P.PLATE_CARREE:e.wkt===$X.wkt?t.spatialReferenceId=P.WGS84_ECEF:e.wkid===kc.CGCS2000?t.spatialReferenceId=P.CGCS2000:e.wkt===GI.wkt?t.spatialReferenceId=P.SPHERICAL_MARS_PCPF:e.wkt===qI.wkt?t.spatialReferenceId=P.SPHERICAL_MOON_PCPF:T6(e)?t.spatialReferenceId=P.GCSMARS2000:M6(e)?t.spatialReferenceId=P.GCSMOON2000:t.spatialReferenceId=P.UNKNOWN):P.UNKNOWN}function rt(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function Im(e,t,r,i){r[i]=ih*(e[t]/mc),r[i+1]=ih*($9-2*Math.atan(Math.exp(-e[t+1]/mc))),r[i+2]=e[t+2]}function Coe(e,t,r,i){const n=e[t]/mc,s=$9-2*Math.atan(Math.exp(-e[t+1]/mc)),o=mc+e[t+2],a=Math.cos(s)*o;r[i]=Math.cos(n)*a,r[i+1]=Math.sin(n)*a,r[i+2]=Math.sin(s)*o}function Aoe(e,t,r,i){Im(e,t,r,i),Rp(r,i,r,i)}function Roe(e,t,r,i,n){const s=.4999999*n_,o=ss(rh*e[t+1],-s,s),a=Math.sin(o);r[i++]=rh*e[t]*n.radius,r[i++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[i]=e[t+2]}function Op(e,t,r,i){Roe(e,t,r,i,bt)}function Pp(e,t,r,i){r[i]=e[t]*RR,r[i+1]=e[t+1]*RR,r[i+2]=e[t+2]}function Cp(e,t,r,i){r[i]=e[t]*LR,r[i+1]=e[t+1]*LR,r[i+2]=e[t+2]}function Loe(e,t,r,i){Im(e,t,r,i),Pp(r,i,r,i)}function Noe(e,t,r,i){Lp(e,t,r,i),Pp(r,i,r,i)}function Foe(e,t,r,i){Ap(e,t,r,i),Pp(r,i,r,i)}function Doe(e,t,r,i){Cp(e,t,r,i),km(r,i,r,i)}function joe(e,t,r,i){Cp(e,t,r,i),Op(r,i,r,i)}function zoe(e,t,r,i){Cp(e,t,r,i),Rp(r,i,r,i)}function Sk(e,t,r,i,n){const s=n+e[t+2],o=rh*e[t+1],a=rh*e[t],u=Math.cos(o)*s;r[i]=Math.cos(a)*u,r[i+1]=Math.sin(a)*u,r[i+2]=Math.sin(o)*s}function OR(e,t,r,i){Sk(e,t,r,i,kl.radius)}function PR(e,t,r,i){Sk(e,t,r,i,zs.radius)}function km(e,t,r,i){Sk(e,t,r,i,bt.radius)}function $k(e,t,r,i,n){const s=e[t],o=e[t+1],a=e[t+2],u=Math.sqrt(s*s+o*o+a*a),c=h8(a/(u===0?1:u)),h=Math.atan2(o,s);r[i++]=ih*h,r[i++]=ih*c,r[i]=u-n}function CR(e,t,r,i){$k(e,t,r,i,kl.radius)}function AR(e,t,r,i){$k(e,t,r,i,zs.radius)}function Ap(e,t,r,i){$k(e,t,r,i,bt.radius)}function Voe(e,t,r,i){Ap(e,t,r,i),Op(r,i,r,i)}function Uoe(e,t,r,i){Ap(e,t,r,i),Rp(r,i,r,i)}function Goe(e,t,r,i,n){const s=rh*e[t],o=rh*e[t+1],a=e[t+2],u=Math.sin(o),c=Math.cos(o),h=n.radius/Math.sqrt(1-n.eccentricitySquared*u*u);r[i++]=(h+a)*c*Math.cos(s),r[i++]=(h+a)*c*Math.sin(s),r[i++]=(h*(1-n.eccentricitySquared)+a)*u}function Rp(e,t,r,i){Goe(e,t,r,i,bt)}function Lp(e,t,r,i){const n=Ooe,s=e[t],o=e[t+1],a=e[t+2];let u,c,h,f,m,y,g,v,w,b,_,$,T,E,I,C,L,H,V,Y,ee;u=Math.abs(a),c=s*s+o*o,h=Math.sqrt(c),f=c+a*a,m=Math.sqrt(f),Y=Math.atan2(o,s),y=a*a/f,g=c/f,E=n.a2/m,I=n.a3-n.a4/m,g>.3?(v=u/m*(1+g*(n.a1+E+y*I)/m),V=Math.asin(v),b=v*v,w=Math.sqrt(1-b)):(w=h/m*(1-y*(n.a5-E-g*I)/m),V=Math.acos(w),b=1-w*w,v=Math.sqrt(b)),_=1-bt.eccentricitySquared*b,$=bt.radius/Math.sqrt(_),T=n.a6*$,E=h-$*w,I=u-T*v,L=w*E+v*I,C=w*I-v*E,H=C/(T/_+L),V+=H,ee=L+C*H/2,a<0&&(V=-V),r[i++]=ih*Y,r[i++]=ih*V,r[i]=ee}function qoe(e,t,r,i){Lp(e,t,r,i),km(r,i,r,i)}function Boe(e,t,r,i){Lp(e,t,r,i),Op(r,i,r,i)}function Hoe(e,t,r){if(e==null||t==null||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const i=kR(e,r.source),n=kR(t,r.dest);return i===P.UNKNOWN&&n===P.UNKNOWN?Wt(e,t)?r.projector=rt:r.projector=null:r.projector=Poe[i][n],r}function _9(){return{source:{spatialReference:null,spatialReferenceId:P.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:P.UNKNOWN,metersPerUnit:1},projector:rt}}const ZTe={spatialReference:null,spatialReferenceId:P.UNKNOWN},JTe={spatialReference:null,spatialReferenceId:P.UNKNOWN},S9=_9(),rh=Wb(1),ih=p8(1),n_=Math.PI,$9=.5*n_,mc=bt.radius,RR=mc*n_/180,LR=180/(mc*n_);function t0(e,t,r,i,n,s,o=1){const a=b9(t,n,S9);if(a==null)return!1;if(a===rt){if(e===i&&r===s)return!0;const c=r+3*o;for(let h=r,f=s;h<c;h++,f++)i[f]=e[h];return!0}const u=r+3*o;for(let c=r,h=s;c<u;c+=3,h+=3)a(e,c,i,h);return!0}const KTe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:t0},Symbol.toStringTag,{value:"Module"}));function NR(e,t,r,i,n,s){return ug[0]=e,ug[1]=t,ug[2]=r,t0(ug,i,0,n,s,0,1)}const ug=Ul();let cg=0,US=class Zx{static fromGE(t){const r=new Zx;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=cg++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=cg++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=cg++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=cg++}getInverse(){const t=new Zx;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},Pw=class Sf{static cacheKey(t,r){var i,n,s,o,a,u;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((n=t.wkt)==null?void 0:n.toString())??"",((s=t.wkt2)==null?void 0:s.toString())??"",((o=r.wkid)==null?void 0:o.toString())??"-1",((a=r.wkt)==null?void 0:a.toString())??"",((u=r.wkt2)==null?void 0:u.toString())??""].join()}static fromGE(t){const r=new Sf;let i="";for(const n of t.steps){const s=US.fromGE(n);r.steps.push(s),i+=s.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const r of t.steps)r instanceof US?this.steps.push(r):this.steps.push(new US({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new Sf;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[Sf.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const s of this.steps)i+=s.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const n=this._cachedProjection[Sf.cacheKey(t,r)];return n===void 0?null:n}};function x9(e,t,r){if(t==null||r==null||r.vcsWkid||Wt(t,r)||Ol(t)||Ol(r))return null;const i=ww(t)/ww(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>Woe(n,i);case"polyline":case"esriGeometryPolyline":return n=>Joe(n,i);case"polygon":case"esriGeometryPolygon":return n=>Zoe(n,i);case"multipoint":case"esriGeometryMultipoint":return n=>Koe(n,i);case"extent":case"esriGeometryEnvelope":return n=>Yoe(n,i);default:return null}}function Woe(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function Zoe(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function Joe(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function Koe(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function Yoe(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let es=null,Ll=null,Om=null,vv={};const xk=new Zy;function Bl(){return!!es&&VI()}function T9(){return!!Bl()||(ae(xk),Nl(),!1)}function M9(e,t){return!e||!t||Ws(e,t)||T9()}function Qoe(e,t){return!Ws(e,t)&&!Bl()}function Nl(e){return Om==null&&(Om=Promise.all([w6(),J(()=>import("./geometryEngineBase-C-hLirDw.js"),[]).then(t=>t.g),J(()=>import("./hydrated-Kb-6UQHZ.js"),[])])),Om.then(([,t,{hydratedAdapter:r}])=>{ht(e),Ll=r,es=t.default,es._enableProjection(mX),xk.notify()})}function Hl(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:Jx(Ll,e,e[0].spatialReference,t,r,i):Jx(Ll,[e],e.spatialReference,t,r,i)[0]}function Jx(e,t,r,i,n=null,s=null){if(r==null||i==null)return t;if(Ws(r,i,n))return t.map(o=>wv(o,r,i));if(n==null&&vw(r))return t.map(o=>wv(o,r,ve.WGS84)).map(o=>wy(o,i));if(n==null&&vw(i))return t.map(o=>wy(o,ve.WGS84)).map(o=>wv(o,ve.WGS84,i));if(n==null){const o=Pw.cacheKey(r,i);vv[o]!==void 0?n=vv[o]:((n=I9(r,i,void 0))==null&&(n=new Pw),vv[o]=n)}if(es==null||e==null)throw new s_;return s!=null?es._project(e,t,r,i,n,s):es._project(e,t,r,i,n)}function Xoe(e,t){const r=E9([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function E9(e,t){if(!Bl()){for(const r of e)if(r!=null&&!Wt(r.spatialReference,t)&&Ai(r.spatialReference)&&Ai(t)&&!Ws(r.spatialReference,t))return ae(xk),{pending:Nl(),geometries:null}}return{pending:null,geometries:e.map(r=>r==null?null:Wt(r.spatialReference,t)?r:Ai(r.spatialReference)&&Ai(t)?wy(r,t):null)}}function I9(e,t,r=null){if(e==null||t==null)return null;if(es==null||Ll==null)throw new s_;const i=es._getTransformation(Ll,e,t,r,r==null?void 0:r.spatialReference);return i!==null?Pw.fromGE(i):null}function eae(e,t,r=null){if(es==null||Ll==null)throw new s_;const i=es._getTransformationBySuitability(Ll,e,t,r,r==null?void 0:r.spatialReference);if(i!==null){const n=[];for(const s of i)n.push(Pw.fromGE(s));return n}return[]}let s_=class extends N{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function tae(){es=null,Ll=null,Om=null,vv={}}const rae={get loadPromise(){return Om}};function wy(e,t){try{const r=Hl(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=x9(r.type,e.spatialReference,t);return i!=null&&i(r),r}catch(r){if(!(r instanceof s_))throw r;return null}}async function iae(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await Tk(i,t,null,r),wy(e,t)}function Ws(e,t,r){return!r&&(!!Wt(e,t)||Ai(e)&&Ai(t)&&!!b9(e,t,S9))}function nae(e,t){if(Wt(e,t))return!0;if(!Ai(e)||!Ai(t))return!1;const r=Oc(e)||qs(e)||lA(e),i=Oc(t)||qs(t)||lA(t);return r&&i}async function Tk(e,t,r,i){if(Bl())return DC(i);if(Array.isArray(e)){for(const{source:n,dest:s,geographicTransformation:o}of e)if(n&&s&&!Ws(n,s,o))return Nl(i)}else if(e&&t&&!Ws(e,t,r))return Nl(i);return DC(i)}function wv(e,t,r){return e?"x"in e?k9(e,t,new ge,r,0):"xmin"in e?A9(e,t,new Be,r,0):"rings"in e?C9(e,t,new Xo,r,0):"paths"in e?P9(e,t,new pn,r,0):"points"in e?O9(e,t,new Yb,r,0):null:null}function sae(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&k9(e,e.spatialReference,t,r,i)!=null}function k9(e,t,r,i,n){Mr[0]=e.x,Mr[1]=e.y;const s=e.z;return Mr[2]=s!==void 0?s:n,t0(Mr,t,0,Mr,i,0,1)?(r.x=Mr[0],r.y=Mr[1],r.spatialReference=i,s!==void 0||Ol(i)?(r.z=Mr[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function oae(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&O9(e,e.spatialReference,t,r,i)!=null}function O9(e,t,r,i,n){const{points:s,hasZ:o,hasM:a}=e,u=[],c=s.length,h=[];for(const m of s)h.push(m[0],m[1],o?m[2]:n);if(!t0(h,t,0,h,i,0,c))return null;const f=o||Ol(i);for(let m=0;m<c;++m){const y=3*m,g=h[y],v=h[y+1];f&&a?u.push([g,v,h[y+2],s[m][3]]):f?u.push([g,v,h[y+2]]):a?u.push([g,v,s[m][2]]):u.push([g,v])}return r.points=u,r.spatialReference=i,r.hasZ=o,r.hasM=a,r}function aae(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&P9(e,e.spatialReference,t,r,i)!=null}function P9(e,t,r,i,n){const{paths:s,hasZ:o,hasM:a}=e,u=[];if(!R9(s,o??!1,a??!1,t,u,i,n))return null;const c=o||Ol(i);return r.paths=u,r.spatialReference=i,r.hasZ=c,r.hasM=a,r}function lae(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&C9(e,e.spatialReference,t,r,i)!=null}function C9(e,t,r,i,n){const{rings:s,hasZ:o,hasM:a}=e,u=[];if(!R9(s,o??!1,a??!1,t,u,i,n))return null;const c=o||Ol(i);return r.rings=u,r.spatialReference=i,r.hasZ=c,r.hasM=a,r}function uae(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&A9(e,e.spatialReference,t,r,i)!=null}function A9(e,t,r,i,n){const{xmin:s,ymin:o,xmax:a,ymax:u,hasZ:c,hasM:h}=e,f=c?e.zmin:n;if(!NR(s,o,f,t,Mr,i))return null;const m=c||Ol(i);r.xmin=Mr[0],r.ymin=Mr[1],m&&(r.zmin=Mr[2]);const y=c?e.zmax:n;return NR(a,u,y,t,Mr,i)?(r.xmax=Mr[0],r.ymax=Mr[1],m&&(r.zmax=Mr[2]),h&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function R9(e,t,r,i,n,s,o=0){const a=new Array;for(const h of e)for(const f of h)a.push(f[0],f[1],t?f[2]:o);if(!t0(a,i,0,a,s,0,a.length/3))return!1;let u=0;n.length=0;const c=t||Ol(s);for(const h of e){const f=new Array;for(const m of h)c&&r?f.push([a[u++],a[u++],a[u++],m[3]]):c?f.push([a[u++],a[u++],a[u++]]):r?(f.push([a[u++],a[u++],m[2]]),u++):(f.push([a[u++],a[u++]]),u++);n.push(f)}return!0}const Mr=Ul(),QTe=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Ws,getTransformation:I9,getTransformations:eae,initializeProjection:Tk,isEqualBaseGCS:nae,isLoaded:Bl,isLoadedOrLoad:T9,isLoadedOrLoadFor:M9,load:Nl,project:Hl,projectExtent:uae,projectMany:Jx,projectMultipoint:oae,projectOrLoad:Xoe,projectOrLoadMany:E9,projectPoint:sae,projectPolygon:lae,projectPolyline:aae,projectWithZConversion:iae,projectWithoutEngine:wv,requiresLoad:Qoe,test:rae,tryProjectWithZConversion:wy,unload:tae},Symbol.toStringTag,{value:"Module"}));var Kx;let gs=Kx=class extends j{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new Kx({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};l([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],gs.prototype,"cols",void 0),l([d({type:Ve,json:{write:!0}})],gs.prototype,"level",void 0),l([d({type:String,json:{write:!0}})],gs.prototype,"levelValue",void 0),l([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],gs.prototype,"origin",void 0),l([d({type:Number,json:{write:!0}})],gs.prototype,"resolution",void 0),l([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],gs.prototype,"rows",void 0),l([d({type:Number,json:{write:!0}})],gs.prototype,"scale",void 0),gs=Kx=l([x("esri.layers.support.LOD")],gs);const Ya=gs;let cae=class{constructor(t,r,i,n,s=void 0){this.id=t,this.level=r,this.row=i,this.col=n,this.extent=s}};var xa;const FR=new Ee({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let lr=xa=class extends j{static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:n=ve.WebMercator,numLODs:s=24}=e;if(!Ai(n)){const f=[];if(r)for(let m=0;m<r.length;m++){const y=r[m];f.push(new Ya({level:m,scale:y,resolution:y}))}else{let m=5e-4;for(let y=s-1;y>=0;y--)f.unshift(new Ya({level:y,scale:m,resolution:m})),m*=2}return new xa({dpi:96,lods:f,origin:new ge(0,0,n),size:[i,i],spatialReference:n})}const o=mi(n),a=e.origin?new ge({x:e.origin.x,y:e.origin.y,spatialReference:n}):new ge(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),u=96,c=1/(Zc(n)*39.37*u),h=[];if(r)for(let f=0;f<r.length;f++){const m=r[f],y=m*c;h.push(new Ya({level:f,scale:m,resolution:y}))}else{let f=jb(n)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const m=Math.ceil(s/t);h.push(new Ya({level:0,scale:f,resolution:f*c}));for(let y=1;y<m;y++){const g=f/2**t,v=g*c;h.push(new Ya({level:y,scale:g,resolution:v})),f=g}}return new xa({dpi:u,lods:h,origin:a,size:[i,i],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=mi(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return ge.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[],n=this._levelToLOD={};e&&(t=-1/0,r=1/0,e.forEach(s=>{i.push(s.scale),t=s.scale>t?s.scale:t,r=s.scale<r?s.scale:r,n[s.level]=s})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const n=t[i],s=t[i+1];if(n<=e)return i;if(s===e)return i+1;if(n>e&&s<e)return i+Math.log(n/e)/Math.log(n/s)}return i}tileAt(e,t,r,i){const n=this.lodAt(e);if(!n)return null;let s,o;if(typeof t=="number")s=t,o=r;else if(Wt(t.spatialReference,this.spatialReference))s=t.x,o=t.y,i=r;else{const c=Ub(t,this.spatialReference);if(c==null)return null;s=c.x,o=c.y,i=r}const a=n.resolution*this.size[0],u=n.resolution*this.size[1];return i||(i=new cae(null,0,0,0,ci())),i.level=e,i.row=Math.floor((this.origin.y-o)/u+.001),i.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=xa.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===xa.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const i=e.level-r.level,n=r.resolution*this.size[0]/2**i,s=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=ci()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const r=this.lodAt(t.level);if(r==null)return null;const{resolution:i}=r,n=i*this.size[0],s=i*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+n,e[3]=e[1]+s,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return xa.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const r=[],i=this.lods.length-t;for(let n=0;n<i;n++){const s=n+t,{scale:o,resolution:a}=s>=0?this.lods[s]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Ya({level:n,scale:o,resolution:a}))}return new xa({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};l([d({type:Number,json:{write:!0}})],lr.prototype,"compressionQuality",void 0),l([d({type:Number,json:{write:!0}})],lr.prototype,"dpi",void 0),l([d({type:String,json:{read:FR.read,write:FR.write,origins:{"web-scene":{read:!1,write:!1}}}})],lr.prototype,"format",void 0),l([d({readOnly:!0})],lr.prototype,"isWrappable",null),l([d({type:ge,json:{write:!0}})],lr.prototype,"origin",void 0),l([G("origin")],lr.prototype,"readOrigin",null),l([d({type:[Ya],value:null,json:{write:!0}})],lr.prototype,"lods",null),l([d({readOnly:!0})],lr.prototype,"scales",void 0),l([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],lr.prototype,"size",void 0),l([G("size",["rows","cols"])],lr.prototype,"readSize",null),l([Z("size",{cols:{type:Ve},rows:{type:Ve}})],lr.prototype,"writeSize",null),l([d({type:ve,json:{write:!0}})],lr.prototype,"spatialReference",void 0),lr=xa=l([x("esri.layers.support.TileInfo")],lr),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(lr||(lr={}));const dae=lr,bv={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],n=this.values;return i>=r?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},GS={xsmall:544,small:768,medium:992,large:1200};function pae(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function qS(e,t){return t?bv[e].valueToClassName[t].split(" "):[]}const hae=e=>{let t=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=GS}initialize(){this.addHandles(he(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Jr))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!pae(r)){const i=JSON.stringify(GS,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=GS}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=Hr.acquire(),i=Hr.acquire();let n,s=!1;for(n in bv){const o=this[n],a=bv[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,qS(n,o).forEach(u=>i.push(u)),qS(n,a).forEach(u=>r.push(u)))}s&&(this._applyClassNameChanges(r,i),Hr.release(r),Hr.release(i))}_applyClassNameChanges(r,i){const n=this.container;n&&(i.forEach(s=>n.classList.remove(s)),r.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in bv)qS(i,this[i]).forEach(n=>r.classList.remove(n))}};return l([d()],t.prototype,"breakpoints",null),l([d()],t.prototype,"orientation",void 0),l([d()],t.prototype,"widthBreakpoint",void 0),l([d()],t.prototype,"heightBreakpoint",void 0),t=l([x("esri.views.BreakpointsOwner")],t),t};function Mk(e){return typeof e=="string"?document.getElementById(e):e??null}function L9(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function DR(e,t){const r=t.parentNode;r&&r.insertBefore(e,t)}function jR(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let yc=class extends le{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,r,i={}){return this._installWatch(t,r,i,he)}addWhen(t,r,i={}){return this._installWatch(t,r,i,Qo)}addOnCollectionChange(t,r,{initial:i=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([Nc(t,"after-changes",this._createSyncUpdatingCallback(),Pl),Nc(t,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>r({added:[],removed:o.toArray()}):void 0})],s),De(()=>this.removeHandles(s))}addPromise(t){if(t==null)return t;const r=++this._handleId;this.addHandles(De(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(dg)||this._set("updating",!1))}),r),this._pendingPromises.add(t),this._set("updating",!0);const i=()=>this.removeHandles(r);return t.then(i,i),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,r,i={},n){const s=++this._handleId;i.sync||this._installSyncUpdatingWatch(t,s);const o=n(t,r,i);return this.addHandles(o,s),De(()=>this.removeHandles(s))}_installSyncUpdatingWatch(t,r){const i=this._createSyncUpdatingCallback(),n=he(t,i,{sync:!0,equals:()=>!1});return this.addHandles(n,r),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(dg),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(dh(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(dg))}),dg)}}};l([d({readOnly:!0})],yc.prototype,"updating",void 0),yc=l([x("esri.core.support.UpdatingHandles")],yc);const dg=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.0.3 - Wed Jul 03 2024 17:50:35 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cw=function(){return Cw=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Cw.apply(this,arguments)},Yx={exports:{}},_t={},Qx={exports:{}},Yc={};function N9(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function fae(e,t,r){}function mae(e,t,r){}var yae=/javascript\s*\:/img;function gae(e,t){return yae.test(t)?"":t}Yc.whiteList=N9();Yc.getDefaultWhiteList=N9;Yc.onAttr=fae;Yc.onIgnoreAttr=mae;Yc.safeAttrValue=gae;var vae={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},ef=vae;function wae(e,t){e=ef.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,n=0,s=0,o="";function a(){if(!i){var h=ef.trim(e.slice(n,s)),f=h.indexOf(":");if(f!==-1){var m=ef.trim(h.slice(0,f)),y=ef.trim(h.slice(f+1));if(m){var g=t(n,o.length,m,y,h);g&&(o+=g+"; ")}}}n=s+1}for(;s<r;s++){var u=e[s];if(u==="/"&&e[s+1]==="*"){var c=e.indexOf("*/",s+2);if(c===-1)break;s=c+1,n=s+1,i=!1}else u==="("?i=!0:u===")"?i=!1:u===";"?i||a():u===`
`&&a()}return ef.trim(o)}var bae=wae,pg=Yc,_ae=bae;function zR(e){return e==null}function Sae(e){var t={};for(var r in e)t[r]=e[r];return t}function F9(e){e=Sae(e||{}),e.whiteList=e.whiteList||pg.whiteList,e.onAttr=e.onAttr||pg.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||pg.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||pg.safeAttrValue,this.options=e}F9.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onAttr,s=r.onIgnoreAttr,o=r.safeAttrValue,a=_ae(e,function(u,c,h,f,m){var y=i[h],g=!1;if(y===!0?g=y:typeof y=="function"?g=y(f):y instanceof RegExp&&(g=y.test(f)),g!==!0&&(g=!1),f=o(h,f),!!f){var v={position:c,sourcePosition:u,source:m,isWhite:g};if(g){var w=n(h,f,v);return zR(w)?h+":"+f:w}else{var w=s(h,f,v);if(!zR(w))return w}}});return a};var $ae=F9;(function(e,t){var r=Yc,i=$ae;function n(o,a){var u=new i(a);return u.process(o)}t=e.exports=n,t.FilterCSS=i;for(var s in r)t[s]=r[s]})(Qx,Qx.exports);var Ek=Qx.exports,Ik={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},xae=Ek.FilterCSS,Tae=Ek.getDefaultWhiteList,Aw=Ik;function D9(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var j9=new xae;function Mae(e,t,r){}function Eae(e,t,r){}function Iae(e,t,r){}function kae(e,t,r){}function z9(e){return e.replace(Pae,"&lt;").replace(Cae,"&gt;")}function Oae(e,t,r,i){if(r=H9(r),t==="href"||t==="src"){if(r=Aw.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(hg.lastIndex=0,hg.test(r))return""}else if(t==="style"){if(VR.lastIndex=0,VR.test(r)||(UR.lastIndex=0,UR.test(r)&&(hg.lastIndex=0,hg.test(r))))return"";i!==!1&&(i=i||j9,r=i.process(r))}return r=W9(r),r}var Pae=/</g,Cae=/>/g,Aae=/"/g,Rae=/&quot;/g,Lae=/&#([a-zA-Z0-9]*);?/gim,Nae=/&colon;?/gim,Fae=/&newline;?/gim,hg=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,VR=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,UR=/u\s*r\s*l\s*\(.*/gi;function V9(e){return e.replace(Aae,"&quot;")}function U9(e){return e.replace(Rae,'"')}function G9(e){return e.replace(Lae,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function q9(e){return e.replace(Nae,":").replace(Fae," ")}function B9(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return Aw.trim(t)}function H9(e){return e=U9(e),e=G9(e),e=q9(e),e=B9(e),e}function W9(e){return e=V9(e),e=z9(e),e}function Dae(){return""}function jae(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:Aw.indexOf(e,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,u){if(i(o))if(u.isClosing){var c="[/removed]",h=u.position+c.length;return n.push([s!==!1?s:u.position,h]),s=!1,c}else return s||(s=u.position),"[removed]";else return t(o,a,u)},remove:function(o){var a="",u=0;return Aw.forEach(n,function(c){a+=o.slice(u,c[0]),u=c[1]}),a+=o.slice(u),a}}}function zae(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var n=e.indexOf("-->",i);if(n===-1)break;r=n+3}return t}function Vae(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}_t.whiteList=D9();_t.getDefaultWhiteList=D9;_t.onTag=Mae;_t.onIgnoreTag=Eae;_t.onTagAttr=Iae;_t.onIgnoreTagAttr=kae;_t.safeAttrValue=Oae;_t.escapeHtml=z9;_t.escapeQuote=V9;_t.unescapeQuote=U9;_t.escapeHtmlEntities=G9;_t.escapeDangerHtml5Entities=q9;_t.clearNonPrintableCharacter=B9;_t.friendlyAttrValue=H9;_t.escapeAttrValue=W9;_t.onIgnoreTagStripAll=Dae;_t.StripTagBody=jae;_t.stripCommentTag=zae;_t.stripBlankChar=Vae;_t.cssFilter=j9;_t.getDefaultCSSWhiteList=Tae;var o_={},Qa=Ik;function Uae(e){var t=Qa.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=Qa.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function Gae(e){return e.slice(0,2)==="</"}function qae(e,t,r){var i="",n=0,s=!1,o=!1,a=0,u=e.length,c="",h="";e:for(a=0;a<u;a++){var f=e.charAt(a);if(s===!1){if(f==="<"){s=a;continue}}else if(o===!1){if(f==="<"){i+=r(e.slice(n,a)),s=a,n=a;continue}if(f===">"){i+=r(e.slice(n,s)),h=e.slice(s,a+1),c=Uae(h),i+=t(s,i.length,c,h,Gae(h)),n=a+1,s=!1;continue}if(f==='"'||f==="'")for(var m=1,y=e.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=f;continue e}y=e.charAt(a-++m)}}else if(f===o){o=!1;continue}}return n<e.length&&(i+=r(e.substr(n))),i}var Bae=/[^a-zA-Z0-9\\_:.-]/gim;function Hae(e,t){var r=0,i=0,n=[],s=!1,o=e.length;function a(m,y){if(m=Qa.trim(m),m=m.replace(Bae,"").toLowerCase(),!(m.length<1)){var g=t(m,y||"");g&&n.push(g)}}for(var u=0;u<o;u++){var c=e.charAt(u),h,f;if(s===!1&&c==="="){s=e.slice(r,u),r=u+1,i=e.charAt(r)==='"'||e.charAt(r)==="'"?r:Zae(e,u+1);continue}if(s!==!1&&u===i){if(f=e.indexOf(c,u+1),f===-1)break;h=Qa.trim(e.slice(i+1,f)),a(s,h),s=!1,u=f,r=u+1;continue}if(/\s|\n|\t/.test(c))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(f=Wae(e,u),f===-1){h=Qa.trim(e.slice(r,u)),a(h),s=!1,r=u+1;continue}else{u=f-1;continue}else if(f=Jae(e,u-1),f===-1){h=Qa.trim(e.slice(r,u)),h=GR(h),a(s,h),s=!1,r=u+1;continue}else continue}return r<e.length&&(s===!1?a(e.slice(r)):a(s,GR(Qa.trim(e.slice(r))))),Qa.trim(n.join(" "))}function Wae(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function Zae(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function Jae(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function Kae(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function GR(e){return Kae(e)?e.substr(1,e.length-2):e}o_.parseTag=qae;o_.parseAttr=Hae;var Yae=Ek.FilterCSS,Gn=_t,Z9=o_,Qae=Z9.parseTag,Xae=Z9.parseAttr,_v=Ik;function fg(e){return e==null}function ele(e){var t=_v.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=_v.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=_v.trim(e.slice(0,-1))),{html:e,closing:r}}function tle(e){var t={};for(var r in e)t[r]=e[r];return t}function rle(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(i){return i.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function J9(e){e=tle(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Gn.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=rle(e.whiteList||e.allowList):e.whiteList=Gn.whiteList,e.onTag=e.onTag||Gn.onTag,e.onTagAttr=e.onTagAttr||Gn.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Gn.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Gn.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Gn.safeAttrValue,e.escapeHtml=e.escapeHtml||Gn.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Yae(e.css))}J9.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onTag,s=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,u=r.safeAttrValue,c=r.escapeHtml,h=t.cssFilter;r.stripBlankChar&&(e=Gn.stripBlankChar(e)),r.allowCommentTag||(e=Gn.stripCommentTag(e));var f=!1;r.stripIgnoreTagBody&&(f=Gn.StripTagBody(r.stripIgnoreTagBody,s),s=f.onIgnoreTag);var m=Qae(e,function(y,g,v,w,b){var _={sourcePosition:y,position:g,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(i,v)},$=n(v,w,_);if(!fg($))return $;if(_.isWhite){if(_.isClosing)return"</"+v+">";var T=ele(w),E=i[v],I=Xae(T.html,function(C,L){var H=_v.indexOf(E,C)!==-1,V=o(v,C,L,H);return fg(V)?H?(L=u(v,C,L,h),L?C+'="'+L+'"':C):(V=a(v,C,L,H),fg(V)?void 0:V):V});return w="<"+v,I&&(w+=" "+I),T.closing&&(w+=" /"),w+=">",w}else return $=s(v,w,_),fg($)?c(w):$},c);return f&&(m=f.remove(m)),m};var ile=J9;(function(e,t){var r=_t,i=o_,n=ile;function s(a,u){var c=new n(u);return c.process(a)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=n,function(){for(var a in r)t[a]=r[a];for(var u in i)t[u]=i[u]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(Yx,Yx.exports);var nd=Yx.exports,nle=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},sle=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],details:["style"],div:["align","style","aria-label","aria-hidden"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=Cw(Cw({},nd.getDefaultCSSWhiteList()),{flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,"line-height":!0,"justify-content":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,u){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?i.sanitizeUrl(a):nd.safeAttrValue(s,o,a,u)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;t&&!r?n=t:t&&r?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(s){if(s==="whiteList")n.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]);else if(s==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return n.css.whiteList[a]=o[a]})}else n[s]=t[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new nd.FilterXSS(n)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,n=i===void 0?!0:i,s=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),u=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||u?nd.escapeAttrValue(t):!s&&!n?nd.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,n):nd.safeAttrValue(t,r,i,n)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,n){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(n)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(n){Array.isArray(i[n])&&Array.isArray(r[n])?r[n]=r[n].concat(i[n]):r[n]=i[n]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var n=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(a,u){var c=i.validate(u,r);return c.isValid?a.concat([u]):(n=!0,a.concat([c.sanitized]))},[]);else if(nle(t)){var o=Object.keys(t);s=o.reduce(function(a,u){var c=t[u],h=i.validate(c,r);return h.isValid?a[u]=c:(n=!0,a[u]=h.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return n?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const a_=new Map;function K9(){a_.clear()}function ole(e){return a_.get(e)}function ale(e,t){a_.set(e,t)}function BS(e){a_.delete(e)}function lle(...e){const t=Hr.acquire();for(let i=0;i<e.length;i++){const n=e[i],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const o in n)n[o]&&t.push(o)}const r=t.join(" ");return Hr.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(i=>{var n;K9();for(const s of i)(n=e.get(s.target))==null||n(s)}),r=(i,n,s)=>(e.set(i,n),t.observe(i,s),De(()=>{t.unobserve(i),e.delete(i)}));return(i,n,s)=>{let o=null;return Uy([he(()=>typeof i=="function"?i():i,a=>{o==null||o.remove(),a&&(o=r(a,n,s))},un),De(()=>o==null?void 0:o.remove())])}})();function ule(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function tMe(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function rMe(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const cle=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],dle=cle.reduce((e,t)=>(e[t]=[],e),{}),ple=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Y9=new sle({whiteList:dle,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(ple.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function hle(e){return e==="Enter"||e===" "}const Q9="http://www.w3.org/",l_=`${Q9}2000/svg`,X9=`${Q9}1999/xlink`;let qR=[],kk=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},Ok=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),eV=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},fle=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(Ok(e[i],t))return i}return-1},HS=(e,t,r,i)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(Ok(a,n))throw new Error(`${r.vnodeSelector} had a ${n.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},mle=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},Xx=[],eT=!1,tV=e=>{(e.children||[]).forEach(tV),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},BR=()=>{eT=!1,Xx.forEach(tV),Xx.length=0},HR=e=>{Xx.push(e),eT||(eT=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(BR,{timeout:16}):setTimeout(BR,16))},WR=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),HR(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),HR(e))},yle=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let o=0;o<s;o++){let a=n[o],u=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")rT(e,u,!0);else if(a==="classes"){let c=Object.keys(u),h=c.length;for(let f=0;f<h;f++){let m=c[f];u[m]&&e.classList.add(m)}}else if(a==="styles"){let c=Object.keys(u),h=c.length;for(let f=0;f<h;f++){let m=c[f],y=u[m];y&&(eV(y),r.styleApplyer(e,m,y))}}else if(a!=="key"&&u!=null){let c=typeof u;c==="function"?(a.lastIndexOf("on",0)===0&&(i&&(u=i(a,u,e,t)),a==="oninput"&&function(){let h=u;u=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=u):r.namespace===l_?a==="href"?e.setAttributeNS(X9,a,u):e.setAttribute(a,u):c==="string"&&a!=="value"?a==="innerHTML"?e[a]=Y9.sanitize(u):tT(e)&&a in e?e[a]=u:e.setAttribute(a,u):e[a]=u}}};function tT(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let Rw,gle=(e,t,r)=>{if(t)for(let i of t)cp(i,e,void 0,r)},rV=(e,t,r)=>{gle(e,t.children,r),t.text&&(e.textContent=t.text),yle(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},cp=(e,t,r,i)=>{let n,s=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")n=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(n,r):t.appendChild(n);else{for(let u=0;u<=o.length;++u){let c=o.charAt(u);if(u===o.length||c==="."||c==="#"){let h=o.charAt(s-1),f=o.slice(s,u);h==="."?n.classList.add(f):h==="#"?n.id=f:(f==="svg"&&(i=kk(i,{namespace:l_})),i.namespace!==void 0?n=e.domNode=a.createElementNS(i.namespace,f):(n=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(n,r):n.parentNode!==t&&t.appendChild(n)),s=u+1}}rV(n,e,i)}},rT=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},vle=(e,t,r,i)=>{if(!r)return;let n=!1,s=Object.keys(r),o=s.length;for(let a=0;a<o;a++){let u=s[a],c=r[u],h=t[u];if(u==="class")h!==c&&(rT(e,h,!1),rT(e,c,!0));else if(u==="classes"){let f=e.classList,m=Object.keys(c),y=m.length;for(let g=0;g<y;g++){let v=m[g],w=!!c[v];w!==!!h[v]&&(n=!0,w?f.add(v):f.remove(v))}}else if(u==="styles"){let f=Object.keys(c),m=f.length;for(let y=0;y<m;y++){let g=f[y],v=c[g];v!==h[g]&&(n=!0,v?(eV(v),i.styleApplyer(e,g,v)):i.styleApplyer(e,g,""))}}else if(c||typeof h!="string"||(c=""),u!=="value"||tT(e)){if(c!==h){let f=typeof c;f==="function"&&i.eventHandlerInterceptor||(i.namespace===l_?u==="href"?e.setAttributeNS(X9,u,c):e.setAttribute(u,c):f==="string"?u==="innerHTML"?e[u]=Y9.sanitize(c):u==="role"&&c===""?e.removeAttribute(u):tT(e)&&u in e?e[u]=c:e.setAttribute(u,c):e[u]!==c&&(e[u]=c),n=!0)}}else{let f=e[u];f!==c&&(e["oninput-value"]?f===e["oninput-value"]:c!==h)&&(e[u]=c,e["oninput-value"]=void 0),c!==h&&(n=!0)}}return n},wle=(e,t,r,i,n)=>{if(r===i)return!1;i=i||qR;let s,o=(r=r||qR).length,a=i.length,u=0,c=0,h=!1;for(;c<a;){let f=u<o?r[u]:void 0,m=i[c];if(f!==void 0&&Ok(f,m))h=Rw(f,m,n)||h,u++;else{let y=fle(r,m,u+1);if(y>=0){for(s=u;s<y;s++)WR(r[s]),HS(r,s,e,"removed");h=Rw(r[y],m,n)||h,u=y+1}else cp(m,t,u<o?r[u].domNode:void 0,n),mle(m),HS(i,c,e,"added")}c++}if(o>u)for(s=u;s<o;s++)WR(r[s]),HS(r,s,e,"removed");return h};Rw=(e,t,r)=>{let i=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,n=!0,n}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=kk(r,{namespace:l_})),e.text!==t.text&&(s=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=wle(t,i,e.children,t.children,r)||s,s=vle(i,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),n};let tf=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,Rw(i,r,t)},domNode:e.domNode});const ble={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let yd=e=>kk(ble,e),pl={create:(e,t)=>(t=yd(t),cp(e,document.createElement("div"),void 0,t),tf(e,t)),append:(e,t,r)=>(r=yd(r),cp(t,e,void 0,r),tf(t,r)),insertBefore:(e,t,r)=>(r=yd(r),cp(t,e.parentNode,e,r),tf(t,r)),merge:(e,t,r)=>(r=yd(r),t.domNode=e,rV(e,t,r),tf(t,r)),replace:(e,t,r)=>(r=yd(r),cp(t,e.parentNode,e,r),e.parentNode.removeChild(e),tf(t,r))},iV,_le=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};iV=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let Sle=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?iV(r.children,n=>n.domNode===i):void 0}),r},$le=(e,t,r)=>{let i=function(n){r("domEvent",n);let s=t(),o=_le(n.currentTarget,s.domNode);o.reverse();let a,u=Sle(s.getLastRender(),o);return e.scheduleRender(),u&&(a=u.properties[`on${n.type}`].apply(u.properties.bind||this,arguments)),r("domEventProcessed",n),a};return(n,s,o,a)=>i},ZR=e=>{let t,r,i=yd(e),n=i.performanceLogger,s=!0,o=!1,a=[],u=[],c=(f,m,y)=>{let g,v=()=>g;i.eventHandlerInterceptor=$le(t,v,n),g=f(m,y(),i),a.push(g),u.push(y)},h=()=>{if(r=void 0,s){s=!1,n("renderStart",void 0);for(let f=0;f<a.length;f++){let m=u[f]();n("rendered",void 0),a[f].update(m),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:h,scheduleRender:()=>{r||o||(r=requestAnimationFrame(h))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(f,m)=>{c(pl.append,f,m)},insertBefore:(f,m)=>{c(pl.insertBefore,f,m)},merge:(f,m)=>{c(pl.merge,f,m)},replace:(f,m)=>{c(pl.replace,f,m)},detach:f=>{for(let m=0;m<u.length;m++)if(u[m]===f)return u.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},Ta=class extends le{constructor(){super(...arguments),this.items=new te,this._watchUpdatingTracking=new yc,this._callbacks=new Map,this._projector=ZR(),this._hiddenProjector=ZR()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const i of r.added){const n=()=>i.render();this._callbacks.set(i,n),this._projector.append(this.surface,n)}for(const i of r.removed){const n=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(n.domNode),this._callbacks.delete(i)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const r=this._hiddenSurface,i=this._hiddenProjector;let n;const s=()=>(n=t.render(),n);i.append(r,s),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(i.detach(s);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(t,r){const i=this.computeBoundingRect(t),n=this.computeBoundingRect(r);return Math.max(i.left,n.left)<=Math.min(i.right,n.right)&&Math.max(i.top,n.top)<=Math.min(i.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,r){const i=!!(r!=null&&r.disableDecorations);if(!this.items.some(s=>s.visible&&!(i&&s.isDecoration)))return;const n=t.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{i&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};l([d({readOnly:!0})],Ta.prototype,"surface",void 0),l([d({readOnly:!0})],Ta.prototype,"items",void 0),l([d({readOnly:!0})],Ta.prototype,"needsRender",null),l([d({readOnly:!0})],Ta.prototype,"_watchUpdatingTracking",void 0),l([d({readOnly:!0})],Ta.prototype,"updating",null),Ta=l([x("esri.views.overlay.ViewOverlay")],Ta);const JR=Ta,WS=[0,0];function xle(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return WS[0]=r.left+((t==null?void 0:t.pageXOffset)??0),WS[1]=r.top+((t==null?void 0:t.pageYOffset)??0),WS}function KR(e){e&&(L9(e),e.parentNode&&e.parentNode.removeChild(e))}function Tle(e){const t=document.createElement("div");return e.appendChild(t),t}const rf=16,mg=750,Mle=512,Ele=2,Ile=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:rf,time:mg},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([he(()=>this.cursor,i=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",i)}),he(()=>this.navigating,i=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",i.toString())})])}initialize(){this.addHandles([he(()=>this.ui,(r,i)=>this._handleUIChange(r,i),Jr),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=nt(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),n=Mk(r);if(n||typeof r!="string"||z.getLogger(this).error("#container",`element with id '${r}' not found`),i===n)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(KR(this.root),this._set("root",null)),this.userContent&&(jR(this.userContent,i),KR(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",jR(n,s),n.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",n.insertBefore(o,n.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const u=new JR;o.appendChild(u.surface),this._set("overlay",u),this.addHandles(he(()=>u.needsRender,c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Zp({render:()=>{var h;return(h=this.overlay)==null?void 0:h.render()}}):this._overlayRenderTaskHandle=pt(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,i,n){const s=this.position;return r-=s?s[0]:0,i-=s?s[1]:0,n?(n[0]=r,n[1]=i):n=[r,i],n}containerToPage(r,i,n){const s=this.position;return r+=s?s[0]:0,i+=s?s[1]:0,n?(n[0]=r,n[1]=i):n=[r,i],n}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(he(()=>this.root,n=>{r.container=n?Tle(n):null},Jr),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=rf,r.time=mg,this.addHandles([By(window,"resize",()=>{r.freq=rf,r.time=mg}),Zp({prepare:i=>{const n=this._measure(),s=this._freqInfo;if(s.time+=i.deltaTime,n&&(s.freq=rf,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||n?rf:Math.min(mg,s.freq*Ele),!n&&s.freq>=Mle&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,n=r?r.clientHeight:0;if(i===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return i===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:i,height:n}),!0)}_position(){const r=this.container,i=this.position,n=r&&xle(r);return!!n&&(!i||n[0]!==i[0]||n[1]!==i[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return l([d()],t.prototype,"container",null),l([d({readOnly:!0})],t.prototype,"focused",null),l([d({readOnly:!0})],t.prototype,"height",void 0),l([d()],t.prototype,"messagesCommon",void 0),l([d({type:JR})],t.prototype,"overlay",void 0),l([d({readOnly:!0})],t.prototype,"position",void 0),l([d({readOnly:!0})],t.prototype,"resizing",void 0),l([d({readOnly:!0})],t.prototype,"root",void 0),l([d({value:null,readOnly:!0})],t.prototype,"size",null),l([d({readOnly:!0})],t.prototype,"surface",void 0),l([d({readOnly:!0})],t.prototype,"suspended",void 0),l([d()],t.prototype,"ui",void 0),l([d({readOnly:!0})],t.prototype,"userContent",void 0),l([d({readOnly:!0})],t.prototype,"width",void 0),l([d()],t.prototype,"widthBreakpoint",void 0),t=l([x("esri.views.DOMContainer")],t),t};let kle=class{constructor(t,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in t){const n=t[i],s=new yj(n,void 0,void 0,2,2);this._properties[i]={pool:s,acquired:[]}}this._afterDispatchHandle=aY(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const r=this._properties[t];for(const i of r.acquired)VC(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){const r=this._owner._get(t),i=this._properties[t];let n=i.pool.acquire();for(i.acquired.push(n);n===r;)i.acquired.push(n),n=i.pool.acquire();return n}_release(){for(const t in this._properties){const r=this._properties[t];let i=0;for(const n of r.acquired)VC(n)?r.acquired[i++]=n:r.pool.release(n);r.acquired.length=i}}};const Ole=R("mac")?"Meta":"Control",Ple=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),Cle=e=>Ple.has(e);let Ale=class{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},Zt=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let n;typeof r=="function"?(i=r,n=[]):n=r||[];const s=typeof t=="string"?new Ale(t,n):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const f=this._incoming[h.match.eventType];if(f){const m=f.indexOf(h);f.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},u=new Rle(s,i,{onPause:a,onRemove:a,onResume:h=>{const f=this._incoming[h.match.eventType];f&&!f.includes(h)&&(f.push(h),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(u),o(),this._manager&&this._manager.updateDependencies(),u}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new Lle(t,{onEmit:(i,n,s,o)=>{var a;(a=this._manager)==null||a.emit(i.eventType,n,s,o)},onRemove:i=>{var n;delete this._outgoing[i.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!0)}stopCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var i;const r=this._incoming[t.type];if(r){for(const n of r)if(n.match.matches(t)&&((i=n.callback)==null||i.call(n,t),t.shouldStopPropagation()))break}}},Rle=class{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Lle=class{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},Nle=class extends Zt{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>{this._update(r.data)})}_update(t){const r=t.native.pointerType==="touch"?"touch":"mouse",{x:i,y:n}=t;r===this._value&&this._x===i&&this._y===n||(this._value=r,this._x=i,this._y=n,this._onChange(r,i,n))}},Fle=class{constructor(t,r){this._observable=new Zy,this._value=t,this._equalityFunction=r}get value(){return ae(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function nV(e,t=YD){return new Fle(e,t)}let Dle=class extends Zt{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=nV(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},Qi=class extends le{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Ole,this._latestPointerType="mouse",this._propertiesPool=new kle({latestPointerLocation:Vle},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const r of t)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,r,i=$l.INTERNAL){if(this._nameToGroup[t]||r.length===0)return;const n={name:t,handlers:r.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,u,c,h,f)=>{this._emitInputEvent(o.priorityIndex+1,a,u,c,f,h)},setPointerCapture:(a,u)=>{this._setPointerCapture(n,o,a,u)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const r=this._nameToGroup[t];r?(r.handlers.forEach(i=>{var n;i.removed=!0,(n=i.uninstallCallback)==null||n.call(i)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):z.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers&&this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const n=this._handlers[i];n.priorityIndex=i,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const n=this._handlersPriority[i];n.priorityIndex=i;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(t.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)Cle(a)||r.add(a)}n.active=s}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,i){this._latestPointerType=t;const n=this._get("latestPointerLocation");if(n==null||n.x!==r||n.y!==i){const s=this._propertiesPool.get("latestPointerLocation");s.x=r,s.y=i,this._set("latestPointerLocation",s)}}_onEventReceived(t,r){if(t==="pointer-capture-lost"){const s=r;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(t,r);const i=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,n=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,i,n)}_updateKeyModifiers(t,r){if(!r)return;let i=!1;const n=()=>{if(!i){const a=new Set;this._activeKeyModifiers.forEach(u=>{a.add(u)}),this._activeKeyModifiers=a,i=!0}},s=(a,u)=>{u&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!u&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=r.key;this._keyModifiers.has(a)&&s(a,t==="key-down")}const o=r.native;s("Alt",!(!o||!o.altKey)),s("Control",!(!o||!o.ctrlKey)),s("Ctrl",!(!o||!o.ctrlKey)),s("Shift",!(!o||!o.shiftKey)),s("Meta",!(!o||!o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Nle((t,r,i)=>this._setLatestPointer(t,r,i)),this._multiTouchHandler=new Dle,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],$l.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,$l.INTERNAL)}_setPointerCapture(t,r,i,n){const s=t.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,r,i,n){this._emitInputEvent(0,t,r,i,n)}_emitInputEvent(t,r,i,n,s,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),u=s!==void 0&&s,c={event:new jle(r,i,a,o||this._activeKeyModifiers,u),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(t){this._currentPropagation={events:new Ow,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var r,i,n;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:s,priorityIndex:o}=t.events.pop(),a=(r=s.data)==null?void 0:r.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(t.currentHandler=this._handlersPriority[o];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!s.shouldStopPropagation()&&((n=(i=t.currentHandler).eventCallback)==null||n.call(i,s)),s.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const r=new Ow;r.push(t);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(const i of t.handler.incomingEventMatches)for(const n of r.handler.incomingEventMatches){if(i.eventType!==n.eventType)continue;const s=i.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(s.length===i.keyModifiers.length!=(s.length===n.keyModifiers.length))return i.keyModifiers.length>n.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){const r=[];for(const i of t){let n=0;for(;n<r.length&&this._compareHandlerPriority(i,r[n])>=0;)n++;r.splice(n,0,i)}return r}get debug(){const t=r=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=i};return{injectEvent:(r,i)=>{t(()=>{this._onEventReceived(r,i)})},disablePointerCapture:t}}};l([d({readOnly:!0})],Qi.prototype,"hasPendingInputs",null),l([d({constructOnly:!0})],Qi.prototype,"eventSource",void 0),l([d({constructOnly:!0})],Qi.prototype,"recognizers",void 0),l([d()],Qi.prototype,"_latestPointerType",void 0),l([d()],Qi.prototype,"latestPointerType",null),l([d()],Qi.prototype,"multiTouchActive",null),l([d({readOnly:!0})],Qi.prototype,"latestPointerLocation",void 0),l([d()],Qi.prototype,"_paused",void 0),l([d({readOnly:!0})],Qi.prototype,"updating",null),Qi=l([x("esri.views.input.InputManager")],Qi);let jle=class{constructor(t,r,i,n,s){this.type=t,this.data=r,this.timestamp=i,this.modifiers=n,this.cancelable=s,this._propagationState=Xa.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Xa.STOPPED}shouldStopPropagation(){return!!(this._propagationState&Xa.STOPPED)}async(t){this._propagationState|=Xa.PAUSED;const r=(i,n)=>{this._propagationState&=~Xa.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw i;return i};return(typeof t=="function"?t():t).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(t){return!!(this._propagationState&Xa.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var Xa;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Xa||(Xa={}));const $l={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let zle=class{};const Vle=zle;function to(e){return e!=null&&"open"in e&&"declaredClass"in e}function YR(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const Ule=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([he(()=>[this.ui,this.popup],([r,i],n)=>{const s="popup",o="manual";if(n){const[a,u]=n;a&&to(u)&&(u.view=null,YR(u)&&a.remove(u,s))}r&&to(i)&&(i.view=this,YR(i)&&r.add(i,{key:s,position:o,internal:!0}))},Jr),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(to(this.popup)?this.popup.viewModel.handleViewClick(r):r.async(async()=>{await this.setupPopup(),to(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)}))},$l.WIDGET)]),rk(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{J(()=>import("./Popup-1-Ii80og.js"),__vite__mapDeps([122,1,6,123,14,124,125,62,60,61,23,26,126]))})}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(to(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void z.getLogger(this).error(new N("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),to(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!to(this.popup))return this._popupSetupTask=jI(async i=>{const{default:n}=await J(()=>import("./Popup-1-Ii80og.js"),__vite__mapDeps([122,1,6,123,14,124,125,62,60,61,23,26,126]));if(ht(i),!this.popup||to(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new n(s)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},n){const s=[],o=[];let a=!1;const u=zK(n,R("popup-view-fetch-timeout")??qle),c=m=>{const y=new Gle(m);return o.push(y),s.push(y.promise),y},h=m=>{const y=o.at(-1);return y&&y.layerView===m&&!a?y:c(m)};for(const m of i)"graphic"in m?(h(m.layerView).graphics.push(m.graphic),a=!1):(s.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,u)),a=!0);o.map(m=>m.resolve(u));const f=jK(s).then(m=>m.filter(y=>!!y).flat());return{pendingFeatures:s,allGraphicsPromise:f,location:r}}async _getPopupHits(r,i){const{hits:n,location:s}=await this.popupHitTest(r);ht(i);const o=[];for(const a of n)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,i)){const u=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:u})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:s}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i==null?void 0:i.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return l([d({cast(r){return!r||to(r)||typeof r=="object"&&(r.open=i=>(Ec(z.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(i)),r.close=()=>(Ec(z.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),r}})],t.prototype,"popup",void 0),l([d()],t.prototype,"popupEnabled",void 0),t=l([x("esri.views.PopupView")],t),t};let Gle=class{constructor(t){this.layerView=t,this._resolver=ji(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:r,graphics:i,_resolver:n}=this;if(!r)return n.resolve(i),n.promise;let s;return r.fetchPopupFeaturesFromGraphics(i,t).catch(o=>(s=o,null)).then(o=>{o?n.resolve(o):n.reject(s)}),n.promise}};const qle=5e3;let Pm=class extends te{constructor(t){super(t),this.addHandles([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(te.ofType(this.itemType.Type))(t):new te(t)}};function iT(e,t){return{type:e,cast:y6,set(r){const i=Il(r,this._get(t),e);i.owner=this,this._set(t,i)}}}l([d()],Pm.prototype,"owner",null),Pm=l([x("esri.core.support.OwningCollection")],Pm);var $f;const Lw=Lr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),sV=Lw.jsonValues.slice();GJ(sV,"orthometric");const Cm=Lr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Cn=$f=class extends j{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return Lw.write(e,t,r)}readHeightModel(e,t,r){return Lw.read(e)||(r!=null&&r.messages&&r.messages.push(Ble(e,{context:r})),null)}readHeightUnit(e,t,r){return Cm.read(e)||(r!=null&&r.messages&&r.messages.push(QR(e,{context:r})),null)}readHeightUnitService(e,t,r){return P6(e)||Cm.read(e)||(r!=null&&r.messages&&r.messages.push(QR(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new $f({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=RX(t);return new $f({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new $f;return t.read(e,{origin:"web-scene"}),t}};function QR(e,t){return new Sn("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function Ble(e,t){return new Sn("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}l([d({type:Lw.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:sV,default:"ellipsoidal"}}}})],Cn.prototype,"heightModel",void 0),l([Z("web-scene","heightModel")],Cn.prototype,"writeHeightModel",null),l([G(["web-scene","service"],"heightModel")],Cn.prototype,"readHeightModel",null),l([d({type:Cm.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Cm.jsonValues,write:Cm.write}}}})],Cn.prototype,"heightUnit",void 0),l([G("web-scene","heightUnit")],Cn.prototype,"readHeightUnit",null),l([G("service","heightUnit")],Cn.prototype,"readHeightUnitService",null),l([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Cn.prototype,"vertCRS",void 0),l([G("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Cn.prototype,"readVertCRS",null),Cn=$f=l([x("esri.geometry.HeightModelInfo")],Cn);const u_=Cn;let Nw=class extends Pm{constructor(t){super(t),this.addHandles(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(z.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};Nw=l([x("esri.support.AnalysesCollection")],Nw);async function oV(e,t){const{WhereClause:r}=await J(()=>import("./WhereClause-Bpx0qv4O.js").then(i=>i.W),__vite__mapDeps([31,32]));return r.create(e,t)}function Hle(e,t){return e==="1=1"?t??e:t==="1=1"?e??t:e!=null&&e!==""?t!=null&&t!==""?`(${e}) AND (${t})`:e:t}function vMe(e){return typeof e=="number"}function Pk(e){return typeof e=="string"||e instanceof String}const Wle="yyyy-MM-dd",Zle="TT";var Am;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(Am||(Am={}));const Jle=[Am.HMS_MS,Am.HMS,Am.HM,Zle];function XR(e){if(!e||!Pk(e))return null;const t=me.fromFormat(e,Wle);return t.isValid?t:null}function eL(e){return e&&Pk(e)?cK(Jle,t=>{const r=me.fromFormat(e,t);return r.isValid?r:null})??null:null}function tL(e){if(!e||!Pk(e))return null;const t=me.fromISO(e);return t.isValid?t:null}var nh;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(nh||(nh={}));const Kle=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function Yle(e){return e!=null&&Kle.has(e.type)}function aV(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function lV(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function uV(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Qle(e,t,r){const i=e==null?void 0:e.domain;if(!i)return null;switch(i.type){case"range":{const{min:n,max:s}=Xle(e);if(n!=null&&+t<n||s!=null&&+t>s)return nh.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(i.codedValues==null||i.codedValues.every(n=>n==null||n.code!==t))return nh.INVALID_CODED_VALUE}return null}function Xle(e,t){const r=e==null?void 0:e.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,n="range"in r?r.range[1]:r.maxValue,s=Yle(e);return aV(e)||uV(e)||lV(e)?{...eue(e,n,i),isInteger:s}:{min:i!=null&&typeof i=="number"?i:null,max:n!=null&&typeof n=="number"?n:null,rawMin:i,rawMax:n,isInteger:s}}function eue(e,t,r){var i,n,s,o,a,u;return aV(e)?{min:(i=XR(r))==null?void 0:i.toMillis(),max:(n=XR(t))==null?void 0:n.toMillis(),rawMin:r,rawMax:t}:uV(e)?{min:(s=eL(r))==null?void 0:s.toMillis(),max:(o=eL(t))==null?void 0:o.toMillis(),rawMin:r,rawMax:t}:lV(e)?{min:(a=tL(r))==null?void 0:a.toMillis(),max:(u=tL(t))==null?void 0:u.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}const tue=()=>z.getLogger("esri.support.arcadeOnDemand");let ZS;function Dc(){return ZS||(ZS=(async()=>{const e=await J(()=>import("./arcadeUtils-BT_srKO4.js").then(t=>t.aN),__vite__mapDeps([127,32,128,34,25,23,26]));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),ZS}const rue=(e,t,r)=>cV.create(e,t,r,null,["$feature","$view"],[]),iue=(e,t,r,i)=>cV.create(e,t,r,i,["$feature","$view"],[]);let cV=class dV{constructor(t,r,i,n,s,o,a){this.services=null,this.script=t,this.evaluate=n;const u=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=u??[],this._syntaxTree=i,this._arcade=r,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,i,n,s,o){const{arcade:a,Feature:u,Dictionary:c}=await Dc(),h=ve.fromJSON(r);let f;try{f=a.parseScript(t,o)}catch(L){return tue().error(new N("arcade-bad-expression","Failed to parse arcade script",{script:t,error:L})),null}const m=s.reduce((L,H)=>({...L,[H]:null}),{});let y=null;n!=null&&(y=new c(n),y.immutable=!0,m.$config=null);const g=a.scriptUsesGeometryEngine(f),v=g&&a.enableGeometrySupport(),w=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),b=a.scriptIsAsync(f),_=b&&a.enableAsyncSupport(),$={vars:m,spatialReference:h,useAsync:!!_};await Promise.all([v,w,_]);const T=new Set;await a.loadDependentModules(T,f,null,b,g);const E=new c;E.immutable=!1,E.setField("scale",0);const I=a.compileScript(f,$),C=(L,H)=>{var Y;const V=(Y=L.$view)==null?void 0:Y.timeZone;return"$view"in L&&L.$view&&(E.setField("scale",typeof L.$view=="object"&&"scale"in L.$view?L.$view.scale:void 0),L.$view=E),y&&(L.$config=y),I({vars:L,spatialReference:h,services:H,timeZone:V})};return new dV(t,a,f,C,new u,i,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const nue=/^([0-9_])/,sue=/[^a-z0-9_\u0080-\uffff]+/gi;function oue(e){return e==null?null:e.trim().replaceAll(sue,"_").replace(nue,"F$1")||null}const aue=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],lue=["field","normalizationField"];function rL(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(iL(aue,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)iL(lue,i,t)}}function iL(e,t,r){if(e)for(const i of e){const n=Mb(i,t),s=n&&typeof n!="function"&&r.get(n);s&&Cr(i,s.name,t)}}function pV(e,t){var r;if(e!=null&&((r=t==null?void 0:t.fields)!=null&&r.length))if("startField"in e){const i=t.get(e.startField),n=t.get(e.endField);e.startField=(i==null?void 0:i.name)??null,e.endField=(n==null?void 0:n.name)??null}else{const i=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=(i==null?void 0:i.name)??null,e.endTimeField=(n==null?void 0:n.name)??null}}const JS=new Set;function c_(e,t){return e&&t?(JS.clear(),jc(JS,e,t),Array.from(JS).sort()):[]}function jc(e,t,r){var i;if(r)if((i=t==null?void 0:t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of r)Kr(e,t,n);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const n of r)n!=null&&e.add(n)}}function Kr(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function wMe(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(r=>r.name):t}function bMe(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const i=c_(e,t);return i.length/e.fields.length>=r?["*"]:i}async function Rr(e,t,r){var s;if(!r)return;const{arcadeUtils:i}=await Dc(),n=i.extractFieldNames(r,(s=t==null?void 0:t.fields)==null?void 0:s.map(o=>o.name));for(const o of n)Kr(e,t,o)}async function hV(e,t,r){if(r&&r!=="1=1"){const i=await oV(r,t);if(!i.isStandardized)throw new N("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});jc(e,t,i.fieldNames)}}function uue({displayField:e,fields:t}){return e||(t!=null&&t.length?KS(t,"name-or-title")||KS(t,"unique-identifier")||KS(t,"type-or-category")||cue(t):null)}function cue(e){for(const t of e){if(!(t!=null&&t.name))continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function KS(e,t){for(const r of e)if(r!=null&&r.valueType&&r.valueType===t)return r.name;return null}async function _Me(e,t){var i;if(!t)return;const r=(i=t.elevationInfo)==null?void 0:i.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function due(e,t,r){r.onStatisticExpression?Rr(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function SMe(e,t,r){if(!t||!r||!("fields"in r))return;const i=[],n=r.popupTemplate;i.push(pue(e,t,n)),r.fields&&i.push(...r.fields.map(async s=>due(e,t.fieldsIndex,s))),await Promise.all(i)}async function pue(e,t,r){const i=[];r!=null&&r.expressionInfos&&i.push(...r.expressionInfos.map(s=>Rr(e,t.fieldsIndex,s.expression)));const n=r==null?void 0:r.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&i.push(Rr(e,t.fieldsIndex,s.expressionInfo.expression));await Promise.all(i)}async function $Me(e,t,r){t&&(t.timeInfo&&(r!=null&&r.timeExtent)&&jc(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&jc(e,t.fieldsIndex,[t.floorInfo.floorField]),(r==null?void 0:r.where)!=null&&await hV(e,t.fieldsIndex,r.where))}async function xMe(e,t,r){t&&r&&await Promise.all(r.map(i=>hue(e,t,i)))}async function hue(e,t,r){t&&r&&(r.valueExpression?await Rr(e,t.fieldsIndex,r.valueExpression):r.field&&Kr(e,t.fieldsIndex,r.field))}function TMe(e){return e?c_(e.fieldsIndex,fV(e)):[]}function fue(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?c_(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const mue=new Set(["oid","global-id","guid"]),yue=new Set(["oid","global-id"]),gue=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function vue(e){const t=new Set;mV(e).forEach(i=>t.add(i)),fue(e).forEach(i=>t.add(i.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(i=>t.add(i.toLowerCase())),Object.values(r.transformFieldRoles).forEach(i=>t.add(i.toLowerCase()))),Array.from(t)}function fV(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:n,editorField:s}=t;return[r,i,n,s].filter(Boolean)}function mV(e){return fV(e).map(t=>t.toLowerCase())}function wue(e,t){var r;return e.editable&&!mue.has(e.type)&&!mV(t).includes(((r=e.name)==null?void 0:r.toLowerCase())??"")}function bue(e,t){var i;const r=((i=e.name)==null?void 0:i.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&r===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&r===t.globalIdField.toLowerCase()||vue(t).includes(r)||yue.has(e.type)||gue.some(n=>n.test(r)))}async function MMe(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r!=null&&r.length&&await Promise.all(r.map(n=>_ue(e,i,n)))}async function _ue(e,t,r){if(!r)return;const i=r.getLabelExpression(),n=r.where;if(i.type==="arcade")await Rr(e,t,i.expression);else{const s=i.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Kr(e,t,o.slice(1,-1))})}await hV(e,t,n)}function Sue(e){const t=e.defaultValue;return t!==void 0&&vV(e,t)?t:e.nullable?null:void 0}function EMe(e){const t=typeof e=="string"?{type:e}:e;return Rue(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function yV(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function $ue(e){return e===null||yV(e)}function xue(e){return e===null||Number.isInteger(e)}function gV(e){return e!=null&&typeof e=="string"}function Tue(e){return e===null||gV(e)}function Mue(){return!0}function vV(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?xue:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?$ue:yV;break;case"string":case"esriFieldTypeString":r=e.nullable?Tue:gV;break;default:r=Mue}return arguments.length===1?r:r(t)}const Eue=["integer","small-integer","big-integer"],Iue=["single","double"],kue=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],Oue=["esriFieldTypeSingle","esriFieldTypeDouble"],Pue=new Set([...Eue,...kue]),Cue=new Set([...Iue,...Oue]),Aue=xj(Pue,Cue);function wV(e){return e!=null&&Aue.has(e.type)}function Rue(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function Lue(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function IMe(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function kMe(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function Nue(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function nL(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function sL(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function OMe(e,t){return Fue(e,t)===null}var Fw,Dw;function PMe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Fue(e,t){return e==null||e.nullable&&t===null?null:wV(e)&&!Due(e.type,Number(t))?Fw.OUT_OF_RANGE:vV(e,t)?e.domain?Qle(e,t):null:Dw.INVALID_TYPE}function Due(e,t){const r=typeof e=="string"?bV(e):e;if(!r)return!1;const i=r.min,n=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=n:t>=i&&t<=n}function bV(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return jue;case"esriFieldTypeInteger":case"integer":return zue;case"esriFieldTypeBigInteger":case"big-integer":return Vue;case"esriFieldTypeSingle":case"single":return Uue;case"esriFieldTypeDouble":case"double":return Gue}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Fw||(Fw={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Dw||(Dw={}));const jue={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},zue={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Vue={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Uue={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},Gue={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function CMe(e,t,r){switch(e){case nh.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case nh.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Dw.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Fw.OUT_OF_RANGE:{const{min:i,max:n}=bV(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${n}`}}}function AMe(e,t){return!que(e,t,null)}function que(e,t,r){if(!(t!=null&&t.attributes)||!e)return!0;const i=new Set(Object.keys(t.attributes));let n=!1;for(const s of e)if(!i.has(s)&&(n=!0,r==null))break;return n}function Bue(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function _V(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let Sv=class extends j{constructor(t){super(t),this.type=null}};l([d({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],Sv.prototype,"type",void 0),Sv=l([x("esri.popup.content.Content")],Sv);const Wl=Sv;var nT;let gu=nT=class extends Wl{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new nT({description:this.description,displayType:this.displayType,title:this.title})}};l([d({type:String,json:{write:!0}})],gu.prototype,"description",void 0),l([d({type:["auto","preview","list"],json:{write:!0}})],gu.prototype,"displayType",void 0),l([d({type:String,json:{write:!0}})],gu.prototype,"title",void 0),l([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],gu.prototype,"type",void 0),gu=nT=l([x("esri.popup.content.AttachmentsContent")],gu);const by=gu;var sT;let vu=sT=class extends Wl{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new sT({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?k(this.outFields):null})}};l([d()],vu.prototype,"creator",void 0),l([d()],vu.prototype,"destroyer",void 0),l([d()],vu.prototype,"outFields",void 0),l([d({type:["custom"],readOnly:!0})],vu.prototype,"type",void 0),vu=sT=l([x("esri.popup.content.CustomContent")],vu);const Hue=vu;var oT;let gd=oT=class extends j{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new oT({title:this.title,expression:this.expression})}};l([d({type:String,json:{write:!0}})],gd.prototype,"title",void 0),l([d({type:String,json:{write:!0}})],gd.prototype,"expression",void 0),l([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],gd.prototype,"returnType",void 0),gd=oT=l([x("esri.popup.ElementExpressionInfo")],gd);const Wue=gd;var aT;let xf=aT=class extends Wl{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new aT({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};l([d({type:Wue,json:{write:!0}})],xf.prototype,"expressionInfo",void 0),l([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],xf.prototype,"type",void 0),xf=aT=l([x("esri.popup.content.ExpressionContent")],xf);const Ck=xf;let vd=class extends He(j){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};l([ne(qse)],vd.prototype,"dateFormat",void 0),l([d({type:Boolean,json:{write:!0}})],vd.prototype,"digitSeparator",void 0),l([d({type:Ve,json:{write:!0}})],vd.prototype,"places",void 0),vd=l([x("esri.popup.support.FieldInfoFormat")],vd);const $v=vd;var lT;let An=lT=class extends j{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new lT({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};l([d({type:String,json:{write:!0}})],An.prototype,"fieldName",void 0),l([d({type:$v,json:{write:!0}})],An.prototype,"format",void 0),l([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],An.prototype,"isEditable",void 0),l([d({type:String,json:{write:!0}})],An.prototype,"label",void 0),l([ne(new Ee({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],An.prototype,"stringFieldOption",void 0),l([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],An.prototype,"statisticType",void 0),l([d({type:String,json:{write:!0}})],An.prototype,"tooltip",void 0),l([d({type:Boolean,json:{write:!0}})],An.prototype,"visible",void 0),An=lT=l([x("esri.popup.FieldInfo")],An);const Ak=An;var uT;let co=uT=class extends Wl{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new uT(k({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};l([d({type:Object,json:{write:!0}})],co.prototype,"attributes",void 0),l([d({type:String,json:{write:!0}})],co.prototype,"description",void 0),l([d({type:[Ak]})],co.prototype,"fieldInfos",void 0),l([Z("fieldInfos")],co.prototype,"writeFieldInfos",null),l([d({type:String,json:{write:!0}})],co.prototype,"title",void 0),l([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],co.prototype,"type",void 0),co=uT=l([x("esri.popup.content.FieldsContent")],co);const _y=co;let wu=class extends j{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};l([d({type:String,json:{write:!0}})],wu.prototype,"altText",void 0),l([d({type:String,json:{write:!0}})],wu.prototype,"caption",void 0),l([d({type:String,json:{write:!0}})],wu.prototype,"title",void 0),l([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],wu.prototype,"type",void 0),wu=l([x("esri.popup.content.mixins.MediaInfo")],wu);const Rk=wu;var cT;let bu=cT=class extends le{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new cT({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};l([d()],bu.prototype,"color",void 0),l([d()],bu.prototype,"fieldName",void 0),l([d()],bu.prototype,"tooltip",void 0),l([d()],bu.prototype,"value",void 0),bu=cT=l([x("esri.popup.content.support.ChartMediaInfoValueSeries")],bu);const Zue=bu;var dT;let Ma=dT=class extends j{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new dT({colors:k(this.colors),fields:k(this.fields),normalizeField:this.normalizeField,series:k(this.series),tooltipField:this.tooltipField})}};l([d({type:[ce],json:{type:[[Ve]],write:!0}})],Ma.prototype,"colors",void 0),l([d({type:[String],json:{write:!0}})],Ma.prototype,"fields",void 0),l([d({type:String,json:{write:!0}})],Ma.prototype,"normalizeField",void 0),l([d({type:[Zue],json:{read:!1}})],Ma.prototype,"series",void 0),l([d({type:String,json:{write:!0}})],Ma.prototype,"tooltipField",void 0),Ma=dT=l([x("esri.popup.content.support.ChartMediaInfoValue")],Ma);const Jue=Ma;let Tf=class extends Rk{constructor(t){super(t),this.type=null,this.value=void 0}};l([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Tf.prototype,"type",void 0),l([d({type:Jue,json:{write:!0}})],Tf.prototype,"value",void 0),Tf=l([x("esri.popup.content.mixins.ChartMediaInfo")],Tf);const d_=Tf,p_=Lr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var pT;let xv=pT=class extends d_{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new pT({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:p_.write}})],xv.prototype,"type",void 0),xv=pT=l([x("esri.popup.content.BarChartMediaInfo")],xv);const SV=xv;var hT;let Tv=hT=class extends d_{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new hT({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:p_.write}})],Tv.prototype,"type",void 0),Tv=hT=l([x("esri.popup.content.ColumnChartMediaInfo")],Tv);const $V=Tv;var fT;let Mf=fT=class extends j{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new fT({linkURL:this.linkURL,sourceURL:this.sourceURL})}};l([d({type:String,json:{write:!0}})],Mf.prototype,"linkURL",void 0),l([d({type:String,json:{write:!0}})],Mf.prototype,"sourceURL",void 0),Mf=fT=l([x("esri.popup.content.support.ImageMediaInfoValue")],Mf);const Kue=Mf;var mT;let wd=mT=class extends Rk{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new mT({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};l([d({type:Number,json:{write:!0}})],wd.prototype,"refreshInterval",void 0),l([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],wd.prototype,"type",void 0),l([d({type:Kue,json:{write:!0}})],wd.prototype,"value",void 0),wd=mT=l([x("esri.popup.content.ImageMediaInfo")],wd);const xV=wd;var yT;let Mv=yT=class extends d_{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new yT({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:p_.write}})],Mv.prototype,"type",void 0),Mv=yT=l([x("esri.popup.content.LineChartMediaInfo")],Mv);const TV=Mv;var gT;let Ev=gT=class extends d_{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new gT({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:p_.write}})],Ev.prototype,"type",void 0),Ev=gT=l([x("esri.popup.content.PieChartMediaInfo")],Ev);const MV=Ev,EV={base:Rk,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":SV,"column-chart":$V,"line-chart":TV,"pie-chart":MV,image:xV}};var vT;let Rn=vT=class extends Wl{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?xV.fromJSON(t):t.type==="barchart"?SV.fromJSON(t):t.type==="columnchart"?$V.fromJSON(t):t.type==="linechart"?TV.fromJSON(t):t.type==="piechart"?MV.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new vT(k({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};l([d()],Rn.prototype,"activeMediaInfoIndex",void 0),l([d({type:Object,json:{write:!0}})],Rn.prototype,"attributes",void 0),l([d({type:String,json:{write:!0}})],Rn.prototype,"description",void 0),l([d({types:[EV]})],Rn.prototype,"mediaInfos",void 0),l([G("mediaInfos")],Rn.prototype,"readMediaInfos",null),l([Z("mediaInfos")],Rn.prototype,"writeMediaInfos",null),l([d({type:String,json:{write:!0}})],Rn.prototype,"title",void 0),l([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Rn.prototype,"type",void 0),Rn=vT=l([x("esri.popup.content.MediaContent")],Rn);const jw=Rn;var wT;let Ef=wT=class extends j{constructor(e){super(e),this.field=null,this.order=null}clone(){return new wT({field:this.field,order:this.order})}};l([d({type:String,json:{write:!0}})],Ef.prototype,"field",void 0),l([d({type:["asc","desc"],json:{write:!0}})],Ef.prototype,"order",void 0),Ef=wT=l([x("esri.popup.support.RelatedRecordsInfoFieldOrder")],Ef);const Lk=Ef;let vs=class extends He(Wl){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};l([d({type:String,json:{write:!0}})],vs.prototype,"description",void 0),l([d({type:Number,json:{type:Ve,write:!0}})],vs.prototype,"displayCount",void 0),l([d({type:["list"],json:{write:!0}})],vs.prototype,"displayType",void 0),l([d({type:[Lk],json:{write:!0}})],vs.prototype,"orderByFields",void 0),l([d({type:Number,json:{type:Ve,write:!0}})],vs.prototype,"relationshipId",void 0),l([d({type:String,json:{write:!0}})],vs.prototype,"title",void 0),l([d({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],vs.prototype,"type",void 0),vs=l([x("esri.popup.content.RelationshipContent")],vs);const zw=vs;var bT;let If=bT=class extends Wl{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new bT({text:this.text})}};l([d({type:String,json:{write:!0}})],If.prototype,"text",void 0),l([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],If.prototype,"type",void 0),If=bT=l([x("esri.popup.content.TextContent")],If);const Vw=If,Yue={base:null,key:"type",typeMap:{attachment:by,media:jw,text:Vw,expression:Ck,field:_y,relationship:zw}};var _T;let _u=_T=class extends j{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new _T({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([d({type:String,json:{write:!0}})],_u.prototype,"name",void 0),l([d({type:String,json:{write:!0}})],_u.prototype,"title",void 0),l([d({type:String,json:{write:!0}})],_u.prototype,"expression",void 0),l([d({type:["string","number"],json:{write:!0}})],_u.prototype,"returnType",void 0),_u=_T=l([x("esri.popup.ExpressionInfo")],_u);const Que=_u;var ST;let kf=ST=class extends j{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new ST({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};l([d({type:Boolean,json:{write:!0}})],kf.prototype,"returnTopmostRaster",void 0),l([d({type:Boolean,json:{write:!0}})],kf.prototype,"showNoDataRecords",void 0),kf=ST=l([x("esri.popup.LayerOptions")],kf);const Xue=kf;var $T;let Of=$T=class extends j{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new $T({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?k(this.orderByFields):null})}};l([d({type:Boolean,json:{write:!0}})],Of.prototype,"showRelatedRecords",void 0),l([d({type:[Lk],json:{write:!0}})],Of.prototype,"orderByFields",void 0),Of=$T=l([x("esri.popup.RelatedRecordsInfo")],Of);const ece=Of;var xT;let Xi=xT=class extends vk(le){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new xT({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};l([d()],Xi.prototype,"active",void 0),l([d()],Xi.prototype,"className",void 0),l([d()],Xi.prototype,"disabled",void 0),l([d()],Xi.prototype,"icon",void 0),l([d()],Xi.prototype,"id",void 0),l([d()],Xi.prototype,"indicator",void 0),l([d()],Xi.prototype,"title",void 0),l([d()],Xi.prototype,"type",void 0),l([d()],Xi.prototype,"visible",void 0),Xi=xT=l([x("esri.support.actions.ActionBase")],Xi);const Nk=Xi;var TT;let Iv=TT=class extends Nk{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new TT({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};l([d()],Iv.prototype,"image",void 0),Iv=TT=l([x("esri.support.actions.ActionButton")],Iv);const tce=Iv;var MT;let Pf=MT=class extends Nk{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new MT({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};l([d()],Pf.prototype,"image",void 0),l([d()],Pf.prototype,"value",void 0),Pf=MT=l([x("esri.support.actions.ActionToggle")],Pf);const rce=Pf,nf="relationships/",oL="expression/",ice=te.ofType({key:"type",defaultKeyValue:"button",base:Nk,typeMap:{button:tce,toggle:rce}}),nce={base:Wl,key:"type",typeMap:{media:jw,custom:Hue,text:Vw,attachments:by,fields:_y,expression:Ck,relationship:zw}},sce=new Set(["attachments","fields","media","text","expression","relationship"]);let Ut=class extends He(j){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(r=>Us(nce,r)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Vl(t)?t:(z.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeContent(t,r,i,n){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter(s=>sce.has(s.type)).map(s=>s==null?void 0:s.toJSON(n)),r.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(r):s.type==="media"?this._writeMediaContent(s,r):s.type==="text"?this._writeTextContent(s,r):s.type==="relationship"&&this._writeRelationshipContent(s,r)})):r.description=t}writeFieldInfos(t,r,i,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(t){const a=o?o.filter(c=>c.type==="fields"):[],u=a.length&&a.every(c=>{var h;return(h=c.fieldInfos)==null?void 0:h.length});r.fieldInfos=t.filter(Boolean).map(c=>{const h=c.toJSON(n);return u&&(h.visible=!1),h})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,r)}writeLayerOptions(t,r,i,n){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(n)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),jc(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=k(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach(n=>{const s=r.fieldInfos.find(o=>{var a,u;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((u=n.fieldName)==null?void 0:u.toLowerCase())});s?s.visible=!0:r.fieldInfos.push(n)}):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){var s,o;const i=((s=t.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,t.relationshipId)))||[],n=[...((o=r.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=k(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const n={description:!1,mediaInfos:!1};return i.map(s=>s.type==="media"?(s.mediaInfos||!r||n.mediaInfos||(s.mediaInfos=r,n.mediaInfos=!0),jw.fromJSON(s)):s.type==="text"?(s.text||!t||n.description||(s.text=t,n.description=!0),Vw.fromJSON(s)):s.type==="attachments"?by.fromJSON(s):s.type==="fields"?_y.fromJSON(s):s.type==="expression"?Ck.fromJSON(s):s.type==="relationship"?zw.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!(r!=null&&r.startsWith(nf)))return null;const n=r.replace(nf,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return typeof s=="number"&&o?zw.fromJSON({relationshipId:s,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:n}=t;return{field:`${nf}${r}/${n}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];t?s.push(new Vw({text:t})):s.push(new _y),Array.isArray(r)&&r.length&&s.push(jw.fromJSON({mediaInfos:r})),i&&s.push(by.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&(a!=null&&a.length)&&a.forEach(u=>{const c=this._toRelationshipContent(u);c&&s.push(c)}),s.length?s:t}_getContentElementFields(t){const r=t==null?void 0:t.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return r==="text"?this._extractFieldNames(t.text):[]}_getMediaInfoFields(t){const{caption:r,title:i,value:n}=t,s=n||{},{fields:o,normalizeField:a,tooltipField:u,sourceURL:c,linkURL:h}=s,f=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(c),...this._extractFieldNames(h),...o??[]];return a&&f.push(a),u&&f.push(u),f}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce((i,n)=>[...i,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map(n=>Rr(t,r,n.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(nf)||r.startsWith(oL))).map(r=>r.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(t){const{className:r,title:i,type:n}=t,s=n==="button"||n==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(s)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return _V(t).filter(r=>!(r.indexOf(nf)===0||r.indexOf(oL)===0))}};l([d({type:ice})],Ut.prototype,"actions",void 0),l([d()],Ut.prototype,"content",void 0),l([je("content")],Ut.prototype,"castContent",null),l([G("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Ut.prototype,"readContent",null),l([Z("content",{popupElements:{type:te.ofType(Yue)},showAttachments:{type:Boolean},mediaInfos:{type:te.ofType(EV)},description:{type:String},relatedRecordsInfo:{type:ece}})],Ut.prototype,"writeContent",null),l([d({type:[Que],json:{write:!0}})],Ut.prototype,"expressionInfos",void 0),l([d({type:[Ak]})],Ut.prototype,"fieldInfos",void 0),l([Z("fieldInfos")],Ut.prototype,"writeFieldInfos",null),l([d({type:Xue})],Ut.prototype,"layerOptions",void 0),l([Z("layerOptions")],Ut.prototype,"writeLayerOptions",null),l([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Ut.prototype,"lastEditInfoEnabled",void 0),l([d()],Ut.prototype,"outFields",void 0),l([d()],Ut.prototype,"overwriteActions",void 0),l([d()],Ut.prototype,"returnGeometry",void 0),l([d({json:{type:String}})],Ut.prototype,"title",void 0),l([Z("title")],Ut.prototype,"writeTitle",null),Ut=l([x("esri.PopupTemplate")],Ut);const r0=Ut,aL=new Ee({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let oce=0,bd=class extends j{constructor(t){super(t),this.id="sym"+oce++,this.type=null,this.color=new ce([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};l([d({type:aL.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:aL.write}}})],bd.prototype,"type",void 0),l([d({type:ce,json:{write:{allowNull:!0}}})],bd.prototype,"color",void 0),l([G("color")],bd.prototype,"readColor",null),bd=l([x("esri.symbols.Symbol")],bd);const yr=bd;var ET;let Ea=ET=class extends yr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var r;if(((r=this.data)==null?void 0:r.type)==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const n=i.map(s=>{const o=s.valueExpressionInfo;return o?Rr(e,t,o.expression):null});await Promise.all(n)}}}clone(){return new ET({data:k(this.data)})}hash(){return ej(JSON.stringify(this.data)).toString()}};l([d({json:{write:!1}})],Ea.prototype,"color",void 0),l([d({json:{write:!0}})],Ea.prototype,"data",void 0),l([G("data",["symbol"])],Ea.prototype,"readData",null),l([Z("data",{})],Ea.prototype,"writeData",null),l([ne({CIMSymbolReference:"cim"},{readOnly:!0})],Ea.prototype,"type",void 0),Ea=ET=l([x("esri.symbols.CIMSymbol")],Ea);const Zl=Ea;let _d=class extends j{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};l([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],_d.prototype,"enabled",void 0),l([Z("enabled")],_d.prototype,"writeEnabled",null),l([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],_d.prototype,"type",void 0),_d=l([x("esri.symbols.Symbol3DLayer")],_d);const Js=_d;function ace(e,t){const r=t.transparency!=null?fy(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new ce([i[0]||0,i[1]||0,i[2]||0,r]):null}function lce(e,t){t.color=e.toJSON().slice(0,3);const r=Zb(e.a);r!==0&&(t.transparency=r)}const Jl={type:ce,json:{type:[Ve],default:null,read:{source:["color","transparency"],reader:ace},write:{target:{color:{type:[Ve]},transparency:{type:Ve}},writer:lce}}},Zs={type:Number,cast:Ie,json:{write:!0}};let Su=class extends j{constructor(t){super(t),this.color=new ce([0,0,0,1]),this.extensionLength=0,this.size=$n(1)}clone(){}cloneProperties(){return{color:k(this.color),size:this.size,extensionLength:this.extensionLength}}};l([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Su.prototype,"type",void 0),l([d(Jl)],Su.prototype,"color",void 0),l([d({...Zs,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Su.prototype,"extensionLength",void 0),l([d(Zs)],Su.prototype,"size",void 0),Su=l([x("esri.symbols.edges.Edges3D")],Su);const Fk=Su;var IT;let kv=IT=class extends Fk{constructor(e){super(e),this.type="sketch"}clone(){return new IT(this.cloneProperties())}};l([ne({sketch:"sketch"},{readOnly:!0})],kv.prototype,"type",void 0),kv=IT=l([x("esri.symbols.edges.SketchEdges3D")],kv);const uce=kv;var kT;let Ov=kT=class extends Fk{constructor(e){super(e),this.type="solid"}clone(){return new kT(this.cloneProperties())}};l([ne({solid:"solid"},{readOnly:!0})],Ov.prototype,"type",void 0),Ov=kT=l([x("esri.symbols.edges.SolidEdges3D")],Ov);const IV=Ov,kV={types:{key:"type",base:Fk,typeMap:{solid:IV,sketch:uce}},json:{write:!0}};var OT;let vn=OT=class extends j{constructor(e){super(e),this.color=null}clone(){const e={color:this.color!=null?this.color.clone():null};return new OT(e)}};l([d(Jl)],vn.prototype,"color",void 0),vn=OT=l([x("esri.symbols.support.Symbol3DMaterial")],vn);var PT;let Ia=PT=class extends Js{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new PT({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};l([ne({Extrude:"extrude"},{readOnly:!0})],Ia.prototype,"type",void 0),l([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Ia.prototype,"size",void 0),l([d({type:vn,json:{write:!0}})],Ia.prototype,"material",void 0),l([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ia.prototype,"castShadows",void 0),l([d(kV)],Ia.prototype,"edges",void 0),Ia=PT=l([x("esri.symbols.ExtrudeSymbol3DLayer")],Ia);const OV=Ia;let Cf=class extends yr{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};l([ne({esriSLS:"simple-line"},{readOnly:!0})],Cf.prototype,"type",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],Cf.prototype,"width",void 0),Cf=l([x("esri.symbols.LineSymbol")],Cf);const cce=Cf,dce=["begin","end","begin-end"],PV=["arrow","circle","square","diamond","cross","x"];var CT;let ws=CT=class extends j{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=(i==null?void 0:i.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){(i==null?void 0:i.origin)==="web-map"||(t[r]=e)}clone(){return new CT({color:k(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};l([d({type:["begin","end","begin-end"],json:{write:!0}})],ws.prototype,"placement",void 0),l([ne({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],ws.prototype,"type",void 0),l([d({type:PV})],ws.prototype,"style",void 0),l([Z("style")],ws.prototype,"writeStyle",null),l([d({type:ce,value:null,json:{write:{allowNull:!0}}})],ws.prototype,"color",null),l([G("color")],ws.prototype,"readColor",null),l([Z("color")],ws.prototype,"writeColor",null),ws=CT=l([x("esri.symbols.LineSymbolMarker")],ws);const pce=ws;var AT;const YS=new Ee({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let po=AT=class extends cce{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,n,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=Ie(r)),i!=null&&(o.cap=i),n!=null&&(o.join=n),s!=null&&(o.miterLimit=Ie(s)),o}clone(){var e;return new AT({color:k(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};l([ne({esriSLS:"simple-line"},{readOnly:!0})],po.prototype,"type",void 0),l([d({type:YS.apiValues,json:{read:YS.read,write:YS.write}})],po.prototype,"style",void 0),l([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],po.prototype,"cap",void 0),l([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],po.prototype,"join",void 0),l([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":pce}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],po.prototype,"marker",void 0),l([d({type:Number,json:{read:!1,write:!1}})],po.prototype,"miterLimit",void 0),po=AT=l([x("esri.symbols.SimpleLineSymbol")],po);const Gi=po;let Af=class extends yr{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};l([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Gi}},json:{default:null,write:!0}})],Af.prototype,"outline",void 0),l([d({type:["simple-fill","picture-fill"],readOnly:!0})],Af.prototype,"type",void 0),Af=l([x("esri.symbols.FillSymbol")],Af);const CV=Af;let Pv=class extends j{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};l([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Pv.prototype,"type",void 0),Pv=l([x("esri.symbols.patterns.LinePattern3D")],Pv);const AV=Pv,hce=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var RT;const fce=Lr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Rf=RT=class extends AV{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new RT(e)}};l([d({type:["style"]})],Rf.prototype,"type",void 0),l([ne(fce),d({type:hce})],Rf.prototype,"style",void 0),Rf=RT=l([x("esri.symbols.patterns.LineStylePattern3D")],Rf);const Dk=Rf;let Cv=class extends j{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};l([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Cv.prototype,"type",void 0),Cv=l([x("esri.symbols.patterns.Pattern3D")],Cv);const RV=Cv,mce=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var LT;let Lf=LT=class extends RV{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new LT({style:this.style})}};l([d({type:["style"]})],Lf.prototype,"type",void 0),l([d({type:mce,json:{read:!0,write:!0}})],Lf.prototype,"style",void 0),Lf=LT=l([x("esri.symbols.patterns.StylePattern3D")],Lf);const LV=Lf,yce={types:{key:"type",base:RV,typeMap:{style:LV}},json:{write:!0}},NV={types:{key:"type",base:AV,typeMap:{style:Dk}},json:{write:!0}},Rm=new ce("white");new ce("black");const gce=new ce([255,255,255,0]);function vce(e){return e.r===0&&e.g===0&&e.b===0}var NT;let Lm=NT=class extends vn{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new NT(e)}};l([ne({multiply:"multiply",replace:"replace",tint:"tint"})],Lm.prototype,"colorMixMode",void 0),Lm=NT=l([x("esri.symbols.support.Symbol3DFillMaterial")],Lm);function jk(e=$ce){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function zk(e,t,r,i,n,s,o=jk()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function WMe(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new Be(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function ZMe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function JMe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function KMe(e,t,r=0,i=t.length/3){let n=e[0],s=e[1],o=e[2],a=e[3],u=e[4],c=e[5];for(let h=0;h<i;h++)n=Math.min(n,t[r+3*h]),s=Math.min(s,t[r+3*h+1]),o=Math.min(o,t[r+3*h+2]),a=Math.max(a,t[r+3*h]),u=Math.max(u,t[r+3*h+1]),c=Math.max(c,t[r+3*h+2]);e[0]=n,e[1]=s,e[2]=o,e[3]=a,e[4]=u,e[5]=c}function wce(e){return e[0]>=e[3]?0:e[3]-e[0]}function bce(e){return e[1]>=e[4]?0:e[4]-e[1]}function _ce(e){return e[2]>=e[5]?0:e[5]-e[2]}function YMe(e,t=[0,0,0]){return t[0]=wce(e),t[1]=bce(e),t[2]=_ce(e),t}function QMe(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function XMe(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function Sce(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function eEe(e){return e?Sce(e,uL):jk(uL)}function tEe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function rEe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function lL(e){return e.length===6}function iEe(e,t,r){if(e==null||t==null)return e===t;if(!lL(e)||!lL(t))return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const uL=[1/0,1/0,1/0,-1/0,-1/0,-1/0],$ce=[0,0,0,0,0,0];jk();const xce=zk(-.5,-.5,-.5,.5,.5,.5),Tce=zk(-.5,-.5,0,.5,.5,1),Mce=zk(-.5,-.5,0,.5,.5,.5);function nEe(e){switch(e){case"sphere":case"cube":case"diamond":return xce;case"cylinder":case"cone":case"inverted-cone":return Tce;case"tetrahedron":return Mce;default:return}}const Vk=["butt","square","round"],Ece=[...Vk,"none"],FV=["miter","bevel","round"];var FT;let $u=FT=class extends j{constructor(e){super(e),this.color=new ce([0,0,0,1]),this.size=$n(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new FT(e)}};l([d(Jl)],$u.prototype,"color",void 0),l([d(Zs)],$u.prototype,"size",void 0),l([d(NV)],$u.prototype,"pattern",void 0),l([d({type:Vk,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],$u.prototype,"patternCap",void 0),$u=FT=l([x("esri.symbols.support.Symbol3DOutline")],$u);var Av;let ho=Av=class extends Js{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Av(e)}static fromSimpleFillSymbol(e){var i,n,s;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Dk({style:e.outline.style}):null,r={size:((i=e.outline)==null?void 0:i.width)??0,color:(((n=e.outline)==null?void 0:n.color)??Rm).clone(),pattern:t};return t&&((s=e.outline)!=null&&s.cap)&&(r.patternCap=e.outline.cap),new Av({material:new Lm({color:(e.color??gce).clone()}),pattern:e.style&&e.style!=="solid"?new LV({style:e.style}):null,outline:r})}};l([ne({Fill:"fill"},{readOnly:!0})],ho.prototype,"type",void 0),l([d({type:Lm,json:{write:!0}})],ho.prototype,"material",void 0),l([d(yce)],ho.prototype,"pattern",void 0),l([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ho.prototype,"castShadows",void 0),l([d({type:$u,json:{write:!0}})],ho.prototype,"outline",void 0),l([d(kV)],ho.prototype,"edges",void 0),ho=Av=l([x("esri.symbols.FillSymbol3DLayer")],ho);const Qc=ho,Ice=["none","underline","line-through"],kce=["normal","italic","oblique"],Oce=["normal","lighter","bold","bolder"],DV={type:Number,cast:e=>{const t=ln(e);return t===0?1:ss(t,.1,4)},nonNullable:!0},Pce=["left","right","center"],Cce=["baseline","top","middle","bottom"],jV={type:Pce,nonNullable:!0},zV={type:Cce,nonNullable:!0},sEe=8;var DT;let fo=DT=class extends j{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Ie(e)}clone(){return new DT({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};l([d({type:Ice,json:{default:"none",write:!0}})],fo.prototype,"decoration",void 0),l([d({type:String,json:{write:!0}})],fo.prototype,"family",void 0),l([d({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],fo.prototype,"size",void 0),l([je("size")],fo.prototype,"castSize",null),l([d({type:kce,json:{default:"normal",write:!0}})],fo.prototype,"style",void 0),l([d({type:Oce,json:{default:"normal",write:!0}})],fo.prototype,"weight",void 0),fo=DT=l([x("esri.symbols.Font")],fo);const h_=fo;var jT;const Ace=Lr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let xu=jT=class extends j{constructor(e){super(e)}readHref(e,t,r){return e?fh(e,r):t.dataURI}writeHref(e,t,r,i){e&&(Wc(e)?t.dataURI=e:(t.href=Ky(e,i),Li(t.href)&&(t.href=Qn(t.href))))}clone(){return new jT({href:this.href,primitive:this.primitive})}};l([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],xu.prototype,"href",void 0),l([G("href")],xu.prototype,"readHref",null),l([Z("href",{href:{type:String},dataURI:{type:String}})],xu.prototype,"writeHref",null),l([ne(Ace)],xu.prototype,"primitive",void 0),xu=jT=l([x("esri.symbols.support.IconSymbol3DLayerResource")],xu);var zT;let dp=zT=class extends le{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new zT({x:this.x,y:this.y})}};l([d({type:Number})],dp.prototype,"x",void 0),l([d({type:Number})],dp.prototype,"y",void 0),dp=zT=l([x("esri.symbols.support.Symbol3DAnchorPosition2D")],dp);var VT;let Nf=VT=class extends j{constructor(e){super(e),this.color=new ce([0,0,0,1]),this.size=$n(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new VT(e)}};l([d(Jl)],Nf.prototype,"color",void 0),l([d(Zs)],Nf.prototype,"size",void 0),Nf=VT=l([x("esri.symbols.support.Symbol3DIconOutline")],Nf);var Sd;const VV="esri.symbols.IconSymbol3DLayer";let bs=Sd=class extends Js{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new Sd({anchor:this.anchor,anchorPosition:k(this.anchorPosition),enabled:this.enabled,material:k(this.material),outline:k(this.outline),resource:k(this.resource),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Rm,r=cL(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Rm).clone()}:null;return new Sd({size:e.size,resource:{primitive:Lce(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||vce(e.color)?Rm:e.color,r=cL(e);return new Sd({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new Sd({resource:{href:n6({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};l([d({type:vn,json:{write:!0}})],bs.prototype,"material",void 0),l([d({type:xu,json:{write:!0}})],bs.prototype,"resource",void 0),l([ne({Icon:"icon"},{readOnly:!0})],bs.prototype,"type",void 0),l([d(Zs)],bs.prototype,"size",void 0),l([ne({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d({json:{default:"center"}})],bs.prototype,"anchor",void 0),l([d({type:dp,json:{type:[Number],read:{reader:e=>new dp({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],bs.prototype,"anchorPosition",void 0),l([d({type:Nf,json:{write:!0}})],bs.prototype,"outline",void 0),bs=Sd=l([x(VV)],bs);const oc=bs;function cL(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=dL(e.xoffset),n=dL(e.yoffset);return(i||n)&&t&&r?{x:-i/t,y:n/r}:null}function dL(e){return isFinite(e)?e:0}const Rce={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Lce(e){return Rce[e]||(z.getLogger(VV).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let Tu=class extends He(j){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};l([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Tu.prototype,"type",void 0),l([d({type:dce,json:{default:"begin-end",write:!0}})],Tu.prototype,"placement",void 0),l([d({type:PV,json:{default:"arrow",write:!0}})],Tu.prototype,"style",void 0),l([d({type:ce,json:{type:[Ve],default:null,write:!0}})],Tu.prototype,"color",void 0),Tu=l([x("esri.symbols.LineStyleMarker3D")],Tu);const UT=Tu;var Rv;let _s=Rv=class extends Js{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=$n(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Rv(e)}static fromSimpleLineSymbol(e){var r;const t={enabled:!0,size:e.width??$n(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Dk({style:e.style}):null,material:new vn({color:(e.color||Rm).clone()}),marker:e.marker?new UT({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new Rv(t)}};l([d({type:vn,json:{write:!0}})],_s.prototype,"material",void 0),l([ne({Line:"line"},{readOnly:!0})],_s.prototype,"type",void 0),l([d({type:FV,json:{write:!0,default:"miter"}})],_s.prototype,"join",void 0),l([d({type:Vk,json:{write:!0,default:"butt"}})],_s.prototype,"cap",void 0),l([d(Zs)],_s.prototype,"size",void 0),l([d(NV)],_s.prototype,"pattern",void 0),l([d({types:{key:"type",base:UT,typeMap:{style:UT}},json:{write:!0}})],_s.prototype,"marker",void 0),_s=Rv=l([x("esri.symbols.LineSymbol3DLayer")],_s);const bh=_s;var GT;const Nce=Lr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Ff=GT=class extends j{clone(){return new GT({href:this.href,primitive:this.primitive})}};l([d({type:String,json:{read:JI,write:Lc}})],Ff.prototype,"href",void 0),l([ne(Nce)],Ff.prototype,"primitive",void 0),Ff=GT=l([x("esri.symbols.support.ObjectSymbol3DLayerResource")],Ff);var qT;let Ku=qT=class extends le{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new qT({x:this.x,y:this.y,z:this.z})}};l([d({type:Number})],Ku.prototype,"x",void 0),l([d({type:Number})],Ku.prototype,"y",void 0),l([d({type:Number})],Ku.prototype,"z",void 0),Ku=qT=l([x("esri.symbols.support.Symbol3DAnchorPosition3D")],Ku);var BT;let $r=BT=class extends Js{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,r;return new BT({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};l([d({type:vn,json:{write:!0}})],$r.prototype,"material",void 0),l([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],$r.prototype,"castShadows",void 0),l([d({type:Ff,json:{write:!0}})],$r.prototype,"resource",void 0),l([ne({Object:"object"},{readOnly:!0})],$r.prototype,"type",void 0),l([d({type:Number,json:{write:!0}})],$r.prototype,"width",void 0),l([d({type:Number,json:{write:!0}})],$r.prototype,"height",void 0),l([d({type:Number,json:{write:!0}})],$r.prototype,"depth",void 0),l([ne({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d({json:{default:"origin"}})],$r.prototype,"anchor",void 0),l([d({type:Ku,json:{type:[Number],read:{reader:e=>new Ku({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],$r.prototype,"anchorPosition",void 0),l([d({type:Number,json:{write:!0}})],$r.prototype,"heading",void 0),l([d({type:Number,json:{write:!0}})],$r.prototype,"tilt",void 0),l([d({type:Number,json:{write:!0}})],$r.prototype,"roll",void 0),l([d({readOnly:!0})],$r.prototype,"isPrimitive",null),$r=BT=l([x("esri.symbols.ObjectSymbol3DLayer")],$r);const Uk=$r;var HT;let jr=HT=class extends Js{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new HT({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};l([d({type:vn,json:{write:!0}})],jr.prototype,"material",void 0),l([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],jr.prototype,"castShadows",void 0),l([ne({Path:"path"},{readOnly:!0})],jr.prototype,"type",void 0),l([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],jr.prototype,"profile",void 0),l([d({type:FV,json:{write:!0,default:"miter"}})],jr.prototype,"join",void 0),l([d({type:Ece,json:{write:!0,default:"butt"}})],jr.prototype,"cap",void 0),l([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],jr.prototype,"width",void 0),l([G("width",["width","size","height"])],jr.prototype,"readWidth",null),l([d({type:Number,json:{write:!0}})],jr.prototype,"height",void 0),l([G("height",["height","size","width"])],jr.prototype,"readHeight",null),l([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],jr.prototype,"anchor",void 0),l([d({type:["heading","all"],json:{write:!0,default:"all"}})],jr.prototype,"profileRotation",void 0),jr=HT=l([x("esri.symbols.PathSymbol3DLayer")],jr);const Gk=jr;var WT;let pp=WT=class extends j{constructor(){super(...arguments),this.color=new ce([0,0,0,1]),this.size=0}clone(){const e={color:k(this.color),size:this.size};return new WT(e)}};l([d(Jl)],pp.prototype,"color",void 0),l([d(Zs)],pp.prototype,"size",void 0),pp=WT=l([x("esri.symbols.support.Symbol3DHalo")],pp);let Nm=class extends He(j){constructor(t){super(t),this.color=null}};l([d(Jl)],Nm.prototype,"color",void 0),Nm=l([x("esri.symbols.support.Symbol3DTextBackground")],Nm);var Lv;let ti=Lv=class extends Js{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const n={...i,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new Lv({enabled:this.enabled,font:this.font&&k(this.font),halo:this.halo&&k(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:k(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new Lv({font:e.font!=null?e.font.clone():new h_,halo:Fce(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new vn({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Nm({color:e.backgroundColor.clone()}):null})}};function Fce(e,t){return e&&t!=null&&t>0?new pp({color:k(e),size:t}):null}l([d({type:h_,json:{write:!0}})],ti.prototype,"font",null),l([Z("font")],ti.prototype,"writeFont",null),l([d({type:pp,json:{write:!0}})],ti.prototype,"halo",void 0),l([d({...jV,json:{default:"center",write:!0}})],ti.prototype,"horizontalAlignment",void 0),l([d({...DV,json:{default:1,write:!0}})],ti.prototype,"lineHeight",void 0),l([d({type:vn,json:{write:!0}})],ti.prototype,"material",void 0),l([d({type:Nm,json:{write:!0}})],ti.prototype,"background",void 0),l([d(Zs)],ti.prototype,"size",null),l([d({type:String,json:{write:!0}})],ti.prototype,"text",void 0),l([ne({Text:"text"},{readOnly:!0})],ti.prototype,"type",void 0),l([d({...zV,json:{default:"baseline",write:!0}})],ti.prototype,"verticalAlignment",void 0),ti=Lv=l([x("esri.symbols.TextSymbol3DLayer")],ti);const _h=ti;var ZT;let ka=ZT=class extends Js{constructor(e){super(e),this.color=JT.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new ZT({color:k(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};l([d({type:ce,nonNullable:!0,json:{type:[Ve],write:(e,t,r)=>t[r]=e.toArray(ce.AlphaMode.UNLESS_OPAQUE),default:()=>JT.clone(),defaultEquals:e=>e.toCss(!0)===JT.toCss(!0)}})],ka.prototype,"color",void 0),l([ne({Water:"water"},{readOnly:!0})],ka.prototype,"type",void 0),l([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],ka.prototype,"waterbodySize",void 0),l([d({type:Number,json:{write:!0,default:null}})],ka.prototype,"waveDirection",void 0),l([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],ka.prototype,"waveStrength",void 0),ka=ZT=l([x("esri.symbols.WaterSymbol3DLayer")],ka);const UV=ka,JT=new ce([0,119,190]);var KT;let Mu=KT=class extends le{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new KT({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};l([d({type:String})],Mu.prototype,"name",void 0),l([d({type:String})],Mu.prototype,"styleUrl",void 0),l([d({type:String})],Mu.prototype,"styleName",void 0),l([d({type:wi})],Mu.prototype,"portal",void 0),Mu=KT=l([x("esri.symbols.support.StyleOrigin")],Mu);const YT=Mu;var QT;let Fm=QT=class extends le{constructor(){super(...arguments),this.url=""}clone(){return new QT({url:this.url})}};l([d({type:String})],Fm.prototype,"url",void 0),Fm=QT=l([x("esri.symbols.support.Thumbnail")],Fm);const GV={icon:oc,object:Uk,line:bh,path:Gk,fill:Qc,extrude:OV,text:_h,water:UV},Dce=te.ofType({base:Js,key:"type",typeMap:GV,errorContext:"symbol-layer"});let Ss=class extends yr{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r==null?void 0:r.type,n=i||te;this._set("symbolLayers",new n)}get color(){return null}set color(t){this.constructed&&z.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){Il(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const n=fh(t.styleUrl,i);return new YT({styleUrl:n,name:t.name})}if(t.styleName&&t.name)return new YT({portal:(i==null?void 0:i.portal)||wi.getDefault(),styleName:t.styleName,name:t.name});i!=null&&i.messages&&i.messages.push(new Sn("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,n){if(t.styleUrl&&t.name){let s=Ky(t.styleUrl,n);Li(s)&&(s=Qn(s)),r.styleOrigin={styleUrl:s,name:t.name}}else t.styleName&&t.name&&(t.portal&&(n!=null&&n.portal)&&!i6(t.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new Sn("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Js||t&&GV[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};l([d({json:{read:!1,write:!1}})],Ss.prototype,"color",null),l([d({type:Dce,nonNullable:!0,json:{write:!0}}),je(y6)],Ss.prototype,"symbolLayers",null),l([d({type:YT})],Ss.prototype,"styleOrigin",void 0),l([G("styleOrigin")],Ss.prototype,"readStyleOrigin",null),l([Z("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Ss.prototype,"writeStyleOrigin",null),l([d({type:Fm,json:{read:!1}})],Ss.prototype,"thumbnail",void 0),l([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Ss.prototype,"type",void 0),Ss=l([x("esri.symbols.Symbol3D")],Ss);const Sh=Ss;let Df=class extends j{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};l([d({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Df.prototype,"type",void 0),l([d({readOnly:!0})],Df.prototype,"visible",void 0),Df=l([x("esri.symbols.callouts.Callout3D")],Df);const qV=Df;var XT;let Nv=XT=class extends j{constructor(e){super(e),this.color=new ce("white")}clone(){return new XT({color:k(this.color)})}};l([d(Jl)],Nv.prototype,"color",void 0),Nv=XT=l([x("esri.symbols.callouts.LineCallout3DBorder")],Nv);const jce=Nv;var eM;let Oa=eM=class extends qV{constructor(e){super(e),this.type="line",this.color=new ce([0,0,0,1]),this.size=$n(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new eM({color:k(this.color),size:this.size,border:k(this.border)})}};l([ne({line:"line"})],Oa.prototype,"type",void 0),l([d(Jl)],Oa.prototype,"color",void 0),l([d(Zs)],Oa.prototype,"size",void 0),l([d({type:jce,json:{write:!0}})],Oa.prototype,"border",void 0),l([d({readOnly:!0})],Oa.prototype,"visible",null),Oa=eM=l([x("esri.symbols.callouts.LineCallout3D")],Oa);const BV=Oa;function qk(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function HV(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!qk(e)}const WV={types:{key:"type",base:qV,typeMap:{line:BV}},json:{write:!0}};var tM;let $d=tM=class extends j{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new tM({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};l([d(Zs)],$d.prototype,"screenLength",void 0),l([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],$d.prototype,"minWorldLength",void 0),l([d({type:Number,json:{write:!0}})],$d.prototype,"maxWorldLength",void 0),$d=tM=l([x("esri.symbols.support.Symbol3DVerticalOffset")],$d);const Bk=$d;var Fv;const ZV=te.ofType({base:null,key:"type",typeMap:{text:_h}});let Pa=Fv=class extends Sh{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new ZV,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return HV(this)}hasVisibleVerticalOffset(){return qk(this)}clone(){return new Fv({styleOrigin:k(this.styleOrigin),symbolLayers:k(this.symbolLayers),thumbnail:k(this.thumbnail),callout:k(this.callout),verticalOffset:k(this.verticalOffset)})}static fromTextSymbol(e){return new Fv({symbolLayers:new te([_h.fromTextSymbol(e)])})}};l([d({type:Bk,json:{write:!0}})],Pa.prototype,"verticalOffset",void 0),l([d(WV)],Pa.prototype,"callout",void 0),l([d({json:{read:!1,write:!1}})],Pa.prototype,"styleOrigin",void 0),l([d({type:ZV})],Pa.prototype,"symbolLayers",void 0),l([ne({LabelSymbol3D:"label-3d"},{readOnly:!0})],Pa.prototype,"type",void 0),Pa=Fv=l([x("esri.symbols.LabelSymbol3D")],Pa);const f_=Pa;var Dv;const JV=te.ofType({base:null,key:"type",typeMap:{line:bh,path:Gk}}),zce=te.ofType({base:null,key:"type",typeMap:{line:bh,path:Gk}});let jf=Dv=class extends Sh{constructor(e){super(e),this.symbolLayers=new JV,this.type="line-3d"}clone(){return new Dv({styleOrigin:k(this.styleOrigin),symbolLayers:k(this.symbolLayers),thumbnail:k(this.thumbnail)})}static fromSimpleLineSymbol(e){return new Dv({symbolLayers:new te([bh.fromSimpleLineSymbol(e)])})}};l([d({type:JV,json:{type:zce}})],jf.prototype,"symbolLayers",void 0),l([ne({LineSymbol3D:"line-3d"},{readOnly:!0})],jf.prototype,"type",void 0),jf=Dv=l([x("esri.symbols.LineSymbol3D")],jf);const Xc=jf;let Ca=class extends yr{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};l([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Ca.prototype,"angle",void 0),l([d({type:["simple-marker","picture-marker"],readOnly:!0})],Ca.prototype,"type",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],Ca.prototype,"xoffset",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],Ca.prototype,"yoffset",void 0),l([d({type:Number,cast:e=>e==="auto"?e:Ie(e),json:{write:!0}})],Ca.prototype,"size",void 0),Ca=l([x("esri.symbols.MarkerSymbol")],Ca);const KV=Ca;var jv;const YV=te.ofType({base:null,key:"type",typeMap:{fill:Qc}});let zf=jv=class extends Sh{constructor(e){super(e),this.symbolLayers=new YV,this.type="mesh-3d"}clone(){return new jv({styleOrigin:k(this.styleOrigin),symbolLayers:k(this.symbolLayers),thumbnail:k(this.thumbnail)})}static fromSimpleFillSymbol(e){return new jv({symbolLayers:new te([Qc.fromSimpleFillSymbol(e)])})}};l([d({type:YV})],zf.prototype,"symbolLayers",void 0),l([ne({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],zf.prototype,"type",void 0),zf=jv=l([x("esri.symbols.MeshSymbol3D")],zf);const i0=zf;function Vce(e,t,r){return t.imageData?n6({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):QV(t.url,r)}function QV(e,t){if(!Li(e)){const r=Gce(t);if(r)return Kp(r,"images",e)}return fh(e,t)}function Uce(e,t,r,i){if(Wc(e)){const n=dy(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,r&&r.imageData===t.imageData&&r.url&&Lc(r.url,t,"url",i)}else Lc(e,t,"url",i)}const XV={json:{read:{source:["imageData","url"],reader:Vce},write:{writer(e,t,r,i){Uce(e,t,this.source,i)}}}},e7={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=QV(t.url,r)),i}}}};function Gce(e){var n,s;if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r==null?void 0:r.type;return i==="feature"||i==="stream"?(n=r.parsedUrl)==null?void 0:n.path:i==="map-image"||i==="tile"?(s=e.url)==null?void 0:s.path:null}var rM;let en=rM=class extends CV{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),r!=null&&(n.width=Ie(r)),i!=null&&(n.height=Ie(i)),n}clone(){const e=new rM({color:k(this.color),height:this.height,outline:k(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",k(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};l([ne({esriPFS:"picture-fill"},{readOnly:!0})],en.prototype,"type",void 0),l([d(XV)],en.prototype,"url",void 0),l([d({type:Number,json:{write:!0}})],en.prototype,"xscale",void 0),l([d({type:Number,json:{write:!0}})],en.prototype,"yscale",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],en.prototype,"width",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],en.prototype,"height",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],en.prototype,"xoffset",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],en.prototype,"yoffset",void 0),l([d(e7)],en.prototype,"source",void 0),en=rM=l([x("esri.symbols.PictureFillSymbol")],en);const Hk=en;var iM;let Ln=iM=class extends KV{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=Ie(t)),r!=null&&(i.height=Ie(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new iM({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",k(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};l([d({json:{write:!1}})],Ln.prototype,"color",void 0),l([ne({esriPMS:"picture-marker"},{readOnly:!0})],Ln.prototype,"type",void 0),l([d(XV)],Ln.prototype,"url",void 0),l([d(e7)],Ln.prototype,"source",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],Ln.prototype,"height",void 0),l([G("height",["height","size"])],Ln.prototype,"readHeight",null),l([d({type:Number,cast:Ie,json:{write:!0}})],Ln.prototype,"width",void 0),l([d({json:{write:!1}})],Ln.prototype,"size",void 0),Ln=iM=l([x("esri.symbols.PictureMarkerSymbol")],Ln);const n0=Ln;var Eu;const t7=te.ofType({base:null,key:"type",typeMap:{icon:oc,object:Uk,text:_h}});let Iu=Eu=class extends Sh{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new t7,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return HV(this)}hasVisibleVerticalOffset(){return qk(this)}clone(){return new Eu({verticalOffset:k(this.verticalOffset),callout:k(this.callout),styleOrigin:k(this.styleOrigin),symbolLayers:k(this.symbolLayers),thumbnail:k(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Eu({symbolLayers:new te([oc.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Eu({symbolLayers:new te([oc.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var i,n;if(((n=(i=e.data)==null?void 0:i.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const r=e.data.symbol;return new Eu(r!=null&&r.callout?{symbolLayers:new te([oc.fromCIMSymbol(e)]),callout:new BV({size:.5,color:new ce([0,0,0])}),verticalOffset:new Bk({screenLength:40})}:{symbolLayers:new te([oc.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Eu({symbolLayers:new te([_h.fromTextSymbol(e)])})}};l([d({type:Bk,json:{write:!0}})],Iu.prototype,"verticalOffset",void 0),l([d(WV)],Iu.prototype,"callout",void 0),l([d({type:t7,json:{origins:{"web-scene":{write:!0}}}})],Iu.prototype,"symbolLayers",void 0),l([ne({PointSymbol3D:"point-3d"},{readOnly:!0})],Iu.prototype,"type",void 0),Iu=Eu=l([x("esri.symbols.PointSymbol3D")],Iu);const zo=Iu;var Vf;const r7=te.ofType({base:null,key:"type",typeMap:{extrude:OV,fill:Qc,icon:oc,line:bh,object:Uk,text:_h,water:UV}});let Uf=Vf=class extends Sh{constructor(e){super(e),this.symbolLayers=new r7,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&Ec(z.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&Ec(z.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(Nc(()=>this.symbolLayers,"after-add",({item:t})=>e(t),Pl))}clone(){return new Vf({styleOrigin:k(this.styleOrigin),symbolLayers:k(this.symbolLayers),thumbnail:k(this.thumbnail)})}static fromJSON(e){var r;const t=new Vf;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),n=t.symbolLayers.at(1);!n.enabled||(r=e.symbolLayers)!=null&&r[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:n.size,color:n.material!=null?n.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Vf({symbolLayers:new te([Qc.fromSimpleFillSymbol(e)])})}};l([d({type:r7,json:{write:!0}})],Uf.prototype,"symbolLayers",void 0),l([ne({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Uf.prototype,"type",void 0),Uf=Vf=l([x("esri.symbols.PolygonSymbol3D")],Uf);const Kl=Uf;var nM;const QS=new Ee({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let ku=nM=class extends CV{constructor(...e){super(...e),this.color=new ce([0,0,0,.25]),this.outline=new Gi,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new nM({color:k(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};l([d()],ku.prototype,"color",void 0),l([d()],ku.prototype,"outline",void 0),l([ne({esriSFS:"simple-fill"},{readOnly:!0})],ku.prototype,"type",void 0),l([d({type:QS.apiValues,json:{read:QS.read,write:QS.write}})],ku.prototype,"style",void 0),ku=nM=l([x("esri.symbols.SimpleFillSymbol")],ku);const Yl=ku;var sM;const XS=new Ee({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let $s=sM=class extends KV{constructor(...e){super(...e),this.color=new ce([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Gi}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=Ie(t)),r&&(n.outline=r),i&&(n.color=i),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new sM({angle:this.angle,color:k(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};l([d()],$s.prototype,"color",void 0),l([Z("color")],$s.prototype,"writeColor",null),l([ne({esriSMS:"simple-marker"},{readOnly:!0})],$s.prototype,"type",void 0),l([d()],$s.prototype,"size",void 0),l([d({type:XS.apiValues,json:{read:XS.read,write:XS.write}})],$s.prototype,"style",void 0),l([d({type:String,json:{write:!0}})],$s.prototype,"path",null),l([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Gi}},json:{default:null,write:!0}})],$s.prototype,"outline",void 0),$s=sM=l([x("esri.symbols.SimpleMarkerSymbol")],$s);const Ks=$s;var oM;let et=oM=class extends yr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new h_,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return Ie(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new oM({angle:this.angle,backgroundColor:k(this.backgroundColor),borderLineColor:k(this.borderLineColor),borderLineSize:this.borderLineSize,color:k(this.color),font:this.font&&this.font.clone(),haloColor:k(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,r;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(r=this.haloColor)==null?void 0:r.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};l([d({type:ce,json:{write:!0}})],et.prototype,"backgroundColor",void 0),l([d({type:ce,json:{write:!0}})],et.prototype,"borderLineColor",void 0),l([d({type:Number,json:{write:!0},cast:Ie})],et.prototype,"borderLineSize",void 0),l([d({type:h_,json:{write:!0}})],et.prototype,"font",void 0),l([d({...jV,json:{write:!0}})],et.prototype,"horizontalAlignment",void 0),l([d({type:Boolean,json:{write:!0}})],et.prototype,"kerning",void 0),l([d({type:ce,json:{write:!0}})],et.prototype,"haloColor",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],et.prototype,"haloSize",void 0),l([d({type:Boolean,json:{write:!0}})],et.prototype,"rightToLeft",void 0),l([d({type:Boolean,json:{write:!0}})],et.prototype,"rotated",void 0),l([d({type:String,json:{write:!0}})],et.prototype,"text",void 0),l([ne({esriTS:"text"},{readOnly:!0})],et.prototype,"type",void 0),l([d({...zV,json:{write:!0}})],et.prototype,"verticalAlignment",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],et.prototype,"xoffset",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],et.prototype,"yoffset",void 0),l([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],et.prototype,"angle",void 0),l([d({type:Number,json:{write:!0}})],et.prototype,"width",void 0),l([d({type:Number})],et.prototype,"lineWidth",void 0),l([Z("lineWidth")],et.prototype,"writeLineWidth",null),l([je("lineWidth")],et.prototype,"castLineWidth",null),l([d(DV)],et.prototype,"lineHeight",void 0),l([Z("lineHeight")],et.prototype,"writeLineHeight",null),et=oM=l([x("esri.symbols.TextSymbol")],et);const $h=et;var aM;let Nn=aM=class extends yr{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:wi.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new aM({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=t!=null?t.cache:null,i=r?this._fetchCacheKey:null;if(r!=null){const a=i&&r.get(i);if(a)return a.clone()}const{resolveWebStyleSymbol:n}=await J(()=>import("./webStyleSymbolUtils-BH87z9JU.js"),__vite__mapDeps([129,130]));ht(t);const s=n(this,{portal:this.portal},e,t);s.catch(a=>{z.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(r!=null&&r.set(i,o.clone()),o):null}};l([d({json:{write:!1}})],Nn.prototype,"color",void 0),l([d({type:String,json:{write:!0}})],Nn.prototype,"styleName",void 0),l([d({type:wi,json:{write:!1}})],Nn.prototype,"portal",void 0),l([d({type:String,json:{read:JI,write:Lc}})],Nn.prototype,"styleUrl",void 0),l([d({type:Fm,json:{read:!1}})],Nn.prototype,"thumbnail",void 0),l([d({type:String,json:{write:!0}})],Nn.prototype,"name",void 0),l([ne({styleSymbolReference:"web-style"},{readOnly:!0})],Nn.prototype,"type",void 0),l([d()],Nn.prototype,"_fetchCacheKey",null),Nn=aM=l([x("esri.symbols.WebStyleSymbol")],Nn);const ed=Nn;function dEe(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function pL(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const gc={base:yr,key:"type",typeMap:{"simple-fill":Yl,"picture-fill":Hk,"picture-marker":n0,"simple-line":Gi,"simple-marker":Ks,text:$h,"label-3d":f_,"line-3d":Xc,"mesh-3d":i0,"point-3d":zo,"polygon-3d":Kl,"web-style":ed,cim:Zl},errorContext:"symbol"},pEe={base:yr,key:"type",typeMap:{"picture-marker":n0,"simple-marker":Ks,"point-3d":zo,cim:Zl},errorContext:"symbol"},hEe={base:yr,key:"type",typeMap:{"simple-line":Gi,"line-3d":Xc,cim:Zl},errorContext:"symbol"},fEe={base:yr,key:"type",typeMap:{"simple-fill":Yl,"picture-fill":Hk,"polygon-3d":Kl,cim:Zl},errorContext:"symbol"},qce={base:yr,key:"type",typeMap:{"picture-marker":n0,"simple-marker":Ks,text:$h,"web-style":ed,cim:Zl},errorContext:"symbol"},Bce=ph({types:gc}),i7={base:yr,key:"type",typeMap:{"simple-fill":Yl,"picture-fill":Hk,"picture-marker":n0,"simple-line":Gi,"simple-marker":Ks,text:$h,"line-3d":Xc,"mesh-3d":i0,"point-3d":zo,"polygon-3d":Kl,"web-style":ed,cim:Zl},errorContext:"symbol"},Hce={base:yr,key:"type",typeMap:{text:$h,"label-3d":f_},errorContext:"symbol"},hL={base:yr,key:"type",typeMap:{"line-3d":Xc,"mesh-3d":i0,"point-3d":zo,"polygon-3d":Kl,"web-style":ed,cim:Zl},errorContext:"symbol"},Wce={base:yr,key:"type",typeMap:{"label-3d":f_},errorContext:"symbol"},n7=Us(gc);var lM;function Zce(e){if(!e)return null;const t={};for(const r in e){const i=Cl(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function Jce(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}let zr=lM=class extends He(j){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:_m(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&aK(z.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new lM({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:Jce(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:lw(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,i){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:r};e==="origin-transform"&&(n.action=i),e==="attributes"&&(n.attributeName=i),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([Qo(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),Qo(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};l([d({value:null,json:{read:Zce}})],zr.prototype,"aggregateGeometries",null),l([d({value:null})],zr.prototype,"attributes",null),l([d({value:null,types:Jc,json:{read:Cl}})],zr.prototype,"geometry",null),l([d({type:Boolean})],zr.prototype,"isAggregate",void 0),l([d({clonable:"reference"})],zr.prototype,"layer",void 0),l([d({clonable:"reference"})],zr.prototype,"origin",void 0),l([d({type:r0})],zr.prototype,"popupTemplate",void 0),l([d({clonable:"reference"})],zr.prototype,"sourceLayer",void 0),l([d({value:null,types:gc})],zr.prototype,"symbol",null),l([d({type:Boolean,value:!0})],zr.prototype,"visible",null),zr=lM=l([x("esri.Graphic")],zr),function(e){e.generateUID=_m}(zr||(zr={}));const ts=zr;let vc=class extends Pm{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};l([NI({Type:ts,ensureType:Pt(ts)})],vc.prototype,"itemType",void 0),vc=l([x("esri.support.GraphicsCollection")],vc);let Aa=class extends le{constructor(t){super(t),this.view=null,this.baseLayerViews=new te,this.referenceLayerViews=new te,this._loadingHandle=he(()=>{var r,i;return(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.basemap},r=>{r&&r.load().catch(()=>{})},Jr)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var r,i,n;if((r=this.view)!=null&&r.suspended)return!1;const t=(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};l([d({constructOnly:!0})],Aa.prototype,"view",void 0),l([d({readOnly:!0})],Aa.prototype,"baseLayerViews",void 0),l([d({readOnly:!0})],Aa.prototype,"referenceLayerViews",void 0),l([d({readOnly:!0})],Aa.prototype,"suspended",null),l([d({type:Boolean,readOnly:!0})],Aa.prototype,"updating",null),Aa=l([x("esri.views.BasemapView")],Aa);function Kce(e){return"tryRecycleWith"in e}function Yce(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let Qce=class{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=ji(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,yn(this._controller.signal,()=>{const n=new N("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}tryRecycle(t){if(!this.done||!this.layerView||!Kce(this.layerView))return null;const r=this.layer.type,i=this._controller.signal;for(let n=0;n<t.length;n++){const s=t[n];if(s.type!==r)continue;const o=this.layerView.tryRecycleWith(s,{signal:i});if(o){t.splice(n,1),this.layer=s;const a=this.layerView,u=a.view;return this.promise=Promise.race([o.then(()=>(ht(this._controller.signal),s.emit("layerview-destroy",{view:u,layerView:a}),u.emit("layerview-destroy",{view:u,layerView:a}),s.emit("layerview-create",{view:u,layerView:a}),u.emit("layerview-create",{view:u,layerView:a}),a)),new Promise((c,h)=>yn(this._controller.signal,()=>h(Ot())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,s;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{let o,a;if(await r.load({signal:t}),r.prefetchResources&&await r.prefetchResources({signal:t}),ede(r))o=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new N("layer:view-not-supported","No layerview implementation was found");const h=await this.layerViewImporter.importLayerView(r);ht(t),o="default"in h?new h.default({layer:r,view:i}):new h({layer:r,view:i})}const u=()=>{a=pt(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=yn(t,u),ht(t);try{await o.when()}catch(h){throw u(),h}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(r)))return u(),void this._deferred.reject(new N("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:i,error:o}),i.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new N("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}},tn=class extends le{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new yc,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const r=(i=this.view.map)==null?void 0:i.allLayers;if(r)for(const n of r)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=ji(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(dh(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var u,c,h;if(this.destroyed)return;const r=this.view.map;if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,n=[],s=this.view.ready,o=f=>{if(f!=null){for(const m of f)if(m){i.add(m);const y=this._layerLayerViewInfoMap.get(m);y&&s?y.start():y||this._recyclingInfoMap.has(m)||n.push(m),"layers"in m&&m.layers&&o(m.layers)}}};for(const f of this._rootCollectionNames)o(Yn(this,f));for(const[f,m]of this._layerLayerViewInfoMap)if(!i.has(f)){this._layerLayerViewInfoMap.delete(m.layer);const y=m.tryRecycle(n);y?(this.notifyChange("updating"),this._recyclingInfoMap.set(m.layer,m),y.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule()})):m.destroy()}for(const[f,m]of this._recyclingInfoMap)i.has(f)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy());for(const f of n)this._createLayerView(f);this._refreshCollections();const a=[(u=r==null?void 0:r.ground)==null?void 0:u.layers,(c=r==null?void 0:r.basemap)==null?void 0:c.baseLayers,(h=r==null?void 0:r.basemap)==null?void 0:h.referenceLayers,r==null?void 0:r.layers].filter(f=>!!f);i.forEach(f=>"layers"in f&&a.push(f.layers)),this.addHandles(a.map(f=>this._watchUpdatingTracking.addOnCollectionChange(()=>f,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Nc(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.map)==null?void 0:r.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),he(()=>{const t=this.view,r=t==null?void 0:t.map;return[r==null?void 0:r.basemap,r==null?void 0:r.ground,r==null?void 0:r.layers,t==null?void 0:t.ready]},()=>this._reschedule(),un)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),PS(this._recyclingInfoMap),PS(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Ot()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Pb(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){this.destroyed||(PS(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new N("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,r){var s;this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(t);if(!(i!=null&&i.done))return!0;const n=i.layerView;return!(!n||!r||n.parent===r)||!!(i.done&&n&&"layers"in t&&((s=t.layers)!=null&&s.length))&&t.layers.some(o=>this.isCreatingLayerViewsForLayer(o,n))}_refreshCollections(){for(const[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(Yn(this,t),Yn(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,r,i){if(!t||!r)return void(r&&r.removeAll());let n=0;for(const s of t){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=s,a.parent=i,r.at(n)!==a&&r.splice(n,0,a),"layers"in s&&Yce(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),n+=1}n<r.length&&r.splice(n,r.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const r=new Qce(t,this.view,this.layerViewImporter);r.promise.then(()=>this._refreshCollections(),i=>{i&&(bi(i)||i.name==="cancelled:layerview-create")||z.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([d()],tn.prototype,"_workPromise",void 0),l([d({readOnly:!0})],tn.prototype,"_watchUpdatingTracking",void 0),l([d({readOnly:!0})],tn.prototype,"_layersToLayerViews",null),l([d({readOnly:!0})],tn.prototype,"_rootCollectionNames",null),l([d()],tn.prototype,"layerViewImporter",void 0),l([d()],tn.prototype,"supportsGround",void 0),l([d({readOnly:!0})],tn.prototype,"updating",null),l([d({readOnly:!0})],tn.prototype,"updatingRemaining",null),l([d({constructOnly:!0})],tn.prototype,"view",void 0),tn=l([x("esri.views.LayerViewManager")],tn);const Xce=tn;function ede(e){return"createLayerView"in e&&e.createLayerView!=null}let Ti=class extends le{constructor(t){super(t),this.factor=1.5,this.offset=pr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([d({type:Number})],Ti.prototype,"factor",void 0),l([d({nonNullable:!0})],Ti.prototype,"offset",void 0),l([d()],Ti.prototype,"position",void 0),l([d({type:Number,range:{min:0}})],Ti.prototype,"size",void 0),l([d()],Ti.prototype,"maskUrl",void 0),l([d()],Ti.prototype,"maskEnabled",void 0),l([d()],Ti.prototype,"overlayUrl",void 0),l([d()],Ti.prototype,"overlayEnabled",void 0),l([d({readOnly:!0})],Ti.prototype,"version",null),l([d({type:Boolean})],Ti.prototype,"visible",void 0),Ti=l([x("esri.views.Magnifier")],Ti);const s7=Ti;let zv=class{constructor(t){this._observable=new Zy,this._map=new Map(t)}get size(){return ae(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const r=this._map.delete(t);return r&&this._observable.notify(),r}entries(){return ae(this._observable),this._map.entries()}forEach(t,r){ae(this._observable),this._map.forEach((i,n)=>t.call(r,i,n,this),r)}get(t){return ae(this._observable),this._map.get(t)}has(t){return ae(this._observable),this._map.has(t)}keys(){return ae(this._observable),this._map.keys()}set(t,r){return this._map.set(t,r),this._observable.notify(),this}values(){return ae(this._observable),this._map.values()}[Symbol.iterator](){return ae(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var uM;let Gf=uM=class extends j{constructor(e){super(e),this.name=null,this.code=null}clone(){return new uM({name:this.name,code:this.code})}};l([d({type:String,json:{write:!0}})],Gf.prototype,"name",void 0),l([d({type:[String,Number],json:{write:!0}})],Gf.prototype,"code",void 0),Gf=uM=l([x("esri.layers.support.CodedValue")],Gf);const tde=new Ee({inherited:"inherited",codedValue:"coded-value",range:"range"});let qf=class extends j{constructor(t){super(t),this.name=null,this.type=null}};l([d({type:String,json:{write:!0}})],qf.prototype,"name",void 0),l([ne(tde)],qf.prototype,"type",void 0),qf=l([x("esri.layers.support.Domain")],qf);const m_=qf;var cM;let Bf=cM=class extends m_{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new cM({codedValues:k(this.codedValues),name:this.name})}};l([d({type:[Gf],json:{write:!0}})],Bf.prototype,"codedValues",void 0),l([ne({codedValue:"coded-value"})],Bf.prototype,"type",void 0),Bf=cM=l([x("esri.layers.support.CodedValueDomain")],Bf);const o7=Bf;var dM;let Vv=dM=class extends m_{constructor(e){super(e),this.type="inherited"}clone(){return new dM}};l([ne({inherited:"inherited"})],Vv.prototype,"type",void 0),Vv=dM=l([x("esri.layers.support.InheritedDomain")],Vv);const a7=Vv;var pM;let xd=pM=class extends m_{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new pM({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};l([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],xd.prototype,"maxValue",void 0),l([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[0]}},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],xd.prototype,"minValue",void 0),l([ne({range:"range"})],xd.prototype,"type",void 0),xd=pM=l([x("esri.layers.support.RangeDomain")],xd);const l7=xd,u7={key:"type",base:m_,typeMap:{range:l7,"coded-value":o7,inherited:a7}};function y_(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return l7.fromJSON(e);case"codedValue":return o7.fromJSON(e);case"inherited":return a7.fromJSON(e)}return null}const rde=new Ee({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var hM;const ide=new Ee({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let xr=hM=class extends j{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?ide.fromJSON(r.fieldValueType):null}clone(){var e;return new hM({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};l([d({type:String,json:{write:!0}})],xr.prototype,"alias",void 0),l([d({type:[String,Number],json:{write:{allowNull:!0}}})],xr.prototype,"defaultValue",void 0),l([d()],xr.prototype,"description",void 0),l([G("description")],xr.prototype,"readDescription",null),l([d({types:u7,json:{read:{reader:y_},write:!0}})],xr.prototype,"domain",void 0),l([d({type:Boolean,json:{write:!0}})],xr.prototype,"editable",void 0),l([d({type:Ve,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],xr.prototype,"length",void 0),l([d({type:String,json:{write:!0}})],xr.prototype,"name",void 0),l([d({type:Boolean,json:{write:!0}})],xr.prototype,"nullable",void 0),l([ne(rde)],xr.prototype,"type",void 0),l([d()],xr.prototype,"valueType",void 0),l([G("valueType",["description"])],xr.prototype,"readValueType",null),l([d({type:Boolean,json:{read:!1}})],xr.prototype,"visible",void 0),xr=hM=l([x("esri.layers.support.Field")],xr);const Wk=xr;var fM;let Td=fM=class extends j{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new fM({mapLayerId:e,gdbVersion:t})}};l([ne({mapLayer:"map-layer"})],Td.prototype,"type",void 0),l([d({type:Ve,json:{write:!0}})],Td.prototype,"mapLayerId",void 0),l([d({type:String,json:{write:!0}})],Td.prototype,"gdbVersion",void 0),Td=fM=l([x("esri.layers.support.source.MapLayerSource")],Td);var mM;let mo=mM=class extends j{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:n}=this,s={workspaceId:e,query:t,oidFields:r,spatialReference:(i==null?void 0:i.clone())??void 0,geometryType:n};return new mM(s)}};l([ne({queryTable:"query-table"})],mo.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],mo.prototype,"workspaceId",void 0),l([d({type:String,json:{write:!0}})],mo.prototype,"query",void 0),l([d({type:String,json:{write:!0}})],mo.prototype,"oidFields",void 0),l([d({type:ve,json:{write:!0}})],mo.prototype,"spatialReference",void 0),l([ne(Aie)],mo.prototype,"geometryType",void 0),mo=mM=l([x("esri.layers.support.source.QueryTableDataSource")],mo);var yM;let Md=yM=class extends j{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new yM({workspaceId:e,dataSourceName:t})}};l([ne({raster:"raster"})],Md.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Md.prototype,"dataSourceName",void 0),l([d({type:String,json:{write:!0}})],Md.prototype,"workspaceId",void 0),Md=yM=l([x("esri.layers.support.source.RasterDataSource")],Md);var gM;let Ou=gM=class extends j{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new gM({workspaceId:e,gdbVersion:t,dataSourceName:r})}};l([ne({table:"table"})],Ou.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Ou.prototype,"workspaceId",void 0),l([d({type:String,json:{write:!0}})],Ou.prototype,"gdbVersion",void 0),l([d({type:String,json:{write:!0}})],Ou.prototype,"dataSourceName",void 0),Ou=gM=l([x("esri.layers.support.source.TableDataSource")],Ou);var vM,wM;const nde=Lr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Mi=vM=class extends j{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return fL()(e,t,r)}castLeftTableSource(e){return Us(bM(),e)}readRightTableSource(e,t,r){return fL()(e,t,r)}castRightTableSource(e){return Us(bM(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:n}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:(r==null?void 0:r.clone())??void 0,rightTableSource:(i==null?void 0:i.clone())??void 0,joinType:n};return new vM(s)}};l([ne({joinTable:"join-table"})],Mi.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Mi.prototype,"leftTableKey",void 0),l([d({type:String,json:{write:!0}})],Mi.prototype,"rightTableKey",void 0),l([d({json:{write:!0}})],Mi.prototype,"leftTableSource",void 0),l([G("leftTableSource")],Mi.prototype,"readLeftTableSource",null),l([je("leftTableSource")],Mi.prototype,"castLeftTableSource",null),l([d({json:{write:!0}})],Mi.prototype,"rightTableSource",void 0),l([G("rightTableSource")],Mi.prototype,"readRightTableSource",null),l([je("rightTableSource")],Mi.prototype,"castRightTableSource",null),l([ne(nde)],Mi.prototype,"joinType",void 0),Mi=vM=l([x("esri.layers.support.source.JoinTableDataSource")],Mi);let e2=null;function fL(){return e2||(e2=ph({types:bM()})),e2}let t2=null;function bM(){return t2||(t2={key:"type",base:null,typeMap:{"data-layer":Bn,"map-layer":Td}}),t2}const sde={key:"type",base:null,typeMap:{"join-table":Mi,"query-table":mo,raster:Md,table:Ou}};let Bn=wM=class extends j{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new wM({fields:e,dataSource:t})}};l([ne({dataLayer:"data-layer"})],Bn.prototype,"type",void 0),l([d({type:[Wk],json:{write:!0}})],Bn.prototype,"fields",void 0),l([d({types:sde,json:{write:!0}})],Bn.prototype,"dataSource",void 0),Bn=wM=l([x("esri.layers.support.source.DataLayerSource")],Bn),Bn.from=Pt(Bn);let Pu=class extends He(j){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};l([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Pu.prototype,"onFields",void 0),l([d({type:String,json:{write:!0}})],Pu.prototype,"operator",void 0),l([d({type:String,json:{write:!0}})],Pu.prototype,"searchTerm",void 0),l([d({type:String,json:{write:!0}})],Pu.prototype,"searchType",void 0),Pu=l([x("esri.rest.support.FullTextSearch")],Pu);const ode=Pu;var _M;const mL=new Ee({upperLeft:"upper-left",lowerLeft:"lower-left"});let Cu=_M=class extends j{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new _M(k({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};l([d({type:Be,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Cu.prototype,"extent",void 0),l([d({type:["view","edit"],json:{write:!0}})],Cu.prototype,"mode",void 0),l([d({type:String,json:{read:mL.read,write:mL.write}})],Cu.prototype,"originPosition",void 0),l([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Cu.prototype,"tolerance",void 0),Cu=_M=l([x("esri.rest.support.QuantizationParameters")],Cu);const c7=Cu,ade=new Ee({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var SM;const yL=new Ee({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Fn=SM=class extends j{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=k(e))}clone(){return new SM({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:k(this.statisticParameters)})}};l([d({type:Number,json:{write:!0}})],Fn.prototype,"maxPointCount",void 0),l([d({type:Number,json:{write:!0}})],Fn.prototype,"maxRecordCount",void 0),l([d({type:Number,json:{write:!0}})],Fn.prototype,"maxVertexCount",void 0),l([d({type:String,json:{write:!0}})],Fn.prototype,"onStatisticField",void 0),l([d({type:String,json:{write:!0}})],Fn.prototype,"outStatisticFieldName",void 0),l([d({type:String,json:{read:{source:"statisticType",reader:yL.read},write:{target:"statisticType",writer:yL.write}}})],Fn.prototype,"statisticType",void 0),l([d({type:Object})],Fn.prototype,"statisticParameters",void 0),l([Z("statisticParameters")],Fn.prototype,"writeStatisticParameters",null),Fn=SM=l([x("esri.rest.support.StatisticDefinition")],Fn);const lde=Fn;var Uv;const ude=new Ee({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ue=Uv=class extends j{static from(e){return Cb(Uv,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const n=e[i];Array.isArray(n)?r[i]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?r[i]=n.getTime():r[i]=n}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Uv(k({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};ue.MAX_MAX_RECORD_COUNT_FACTOR=5,l([d({json:{write:!0}})],ue.prototype,"aggregateIds",void 0),l([d({type:Boolean,json:{write:!0}})],ue.prototype,"cacheHint",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ue.prototype,"compactGeometryEnabled",void 0),l([d({json:{write:!0}})],ue.prototype,"datumTransformation",void 0),l([je("datumTransformation")],ue.prototype,"castDatumTransformation",null),l([d({type:Boolean,json:{default:!1,write:!0}})],ue.prototype,"defaultSpatialReferenceEnabled",void 0),l([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ue.prototype,"distance",void 0),l([d({type:Bn,json:{write:!0}})],ue.prototype,"dynamicDataSource",void 0),l([d({type:String,json:{write:!0}})],ue.prototype,"formatOf3DObjects",void 0),l([d({type:[ode],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],ue.prototype,"fullText",void 0),l([d({type:String,json:{write:!0}})],ue.prototype,"gdbVersion",void 0),l([d({types:Jc,json:{read:Cl,write:!0}})],ue.prototype,"geometry",void 0),l([d({type:Number,json:{write:!0}})],ue.prototype,"geometryPrecision",void 0),l([d({type:[String],json:{write:!0}})],ue.prototype,"groupByFieldsForStatistics",void 0),l([d({type:String,json:{write:!0}})],ue.prototype,"having",void 0),l([d({type:Date})],ue.prototype,"historicMoment",void 0),l([Z("historicMoment")],ue.prototype,"writeHistoricMoment",null),l([d({type:Number,json:{write:!0}})],ue.prototype,"maxAllowableOffset",void 0),l([d({type:Number,cast:e=>e<1?1:e>ue.MAX_MAX_RECORD_COUNT_FACTOR?ue.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],ue.prototype,"maxRecordCountFactor",void 0),l([d({type:["xyFootprint"],json:{write:!0}})],ue.prototype,"multipatchOption",void 0),l([d({type:Number,json:{read:{source:"resultRecordCount"}}})],ue.prototype,"num",void 0),l([d({json:{write:!0}})],ue.prototype,"objectIds",void 0),l([d({type:[String],json:{write:!0}})],ue.prototype,"orderByFields",void 0),l([d({type:[String],json:{write:!0}})],ue.prototype,"outFields",void 0),l([d({type:ve,json:{name:"outSR",write:!0}})],ue.prototype,"outSpatialReference",void 0),l([d({type:[lde],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],ue.prototype,"outStatistics",void 0),l([d({json:{write:!0}})],ue.prototype,"parameterValues",void 0),l([Z("parameterValues")],ue.prototype,"writeParameterValues",null),l([d({type:ge,json:{write:!0}})],ue.prototype,"pixelSize",void 0),l([d({type:c7,json:{write:!0}})],ue.prototype,"quantizationParameters",void 0),l([d({type:[Object],json:{write:!0}})],ue.prototype,"rangeValues",void 0),l([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],ue.prototype,"relationParameter",void 0),l([d({type:String,json:{write:!0}})],ue.prototype,"resultType",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ue.prototype,"returnCentroid",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ue.prototype,"returnDistinctValues",void 0),l([d({type:Boolean,json:{default:!0,write:!0}})],ue.prototype,"returnExceededLimitFeatures",void 0),l([d({type:Boolean,json:{write:!0}})],ue.prototype,"returnGeometry",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ue.prototype,"returnQueryGeometry",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ue.prototype,"returnM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ue.prototype,"returnZ",void 0),l([d({type:ve,json:{write:!0}})],ue.prototype,"sourceSpatialReference",void 0),l([ne(ade,{ignoreUnknown:!1,name:"spatialRel"})],ue.prototype,"spatialRelationship",void 0),l([d({type:Number,json:{read:{source:"resultOffset"}}})],ue.prototype,"start",void 0),l([Z("start"),Z("num")],ue.prototype,"writeStart",null),l([d({type:String,json:{write:!0}})],ue.prototype,"sqlFormat",void 0),l([d({type:String,json:{write:!0}})],ue.prototype,"text",void 0),l([d({type:Hs,json:{write:!0}})],ue.prototype,"timeExtent",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ue.prototype,"timeReferenceUnknownClient",void 0),l([ne(ude,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],ue.prototype,"units",void 0),l([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],ue.prototype,"where",void 0),l([Z("where")],ue.prototype,"writeWhere",null),ue=Uv=l([x("esri.rest.support.Query")],ue);const ea=ue;function yg(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let yo=class extends ra.EventedAccessor{constructor(t){super(t),this._selectionMap=new zv,this._sources=new te,this._trashCan=[],this._layerEditHandles=new te,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([he(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Nc(()=>this.sources,"change",r=>{const i=this._selectionMap;for(const n of r.removed)i.delete(n);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new te;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(r=>"sublayers"in r&&r.sublayers?r.sublayers:null).forEach(r=>{(yg(r)&&!Aee(r)||fu(r))&&t.add(r)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(pt)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[r,i]=t;return{layer:r,selection:[...i.selection]}})}get count(){let t=0;for(const r of this._selectionMap.values())t+=r.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){Il(t,this._sources)}async getSelectedFeatures(t,r={},i="layerView"){const{view:n,selections:s}=this,o=(t!==void 0?s.filter(a=>t.includes(a.layer)):s).filter(a=>a.selection.length>0).map(async a=>{const{layer:u,selection:c}=a,h=fu(u)?u.parent:u;if(h==null||!vL(h))return null;if(i==="layer")return wL(h,c,r);if(gL(h))return null;const f=await n.whenLayerView(h).catch(()=>null);return f?wL(f,c,r):null});return(await Promise.all(o)).filter(a=>a!=null)}updateSelection(t){const r=new Map;for(const[s,o]of this._selectionMap)r.set(s,[...o.selection]);let i=!1;const n=t.current.concat(t.added);for(const s of n){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(yg(o)||fu(o))&&a!==null){const u=SI(r,o,()=>[]);u.includes(a)||(u.push(a),i=!0)}}for(const s of t.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(yg(o)||fu(o))&&a!==null){const u=r.get(o),c=u==null?void 0:u.indexOf(a);c!==void 0&&c>=0&&(u==null||u.splice(c,1),i=!0)}}if(i){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[u,c]of r){const h=s.get(u);h!==void 0&&o.push(h),s.set(u,{selection:c}),a.push({layer:u,selection:c,...wC(h!==void 0?h.selection:[],c)})}this._onSelectionChange(a)}}setSelection(t,r){this._setSelection(t,r)}getSelection(t){const r=this._selectionMap.get(t);return r==null?void 0:r.selection}appendToSelection(t,r){const i=this._selectionMap.get(t),n=i!==void 0?[...i.selection]:[];for(const s of r)n.includes(s)||n.push(s);this._setSelection(t,n)}removeFromSelection(t,r){const i=this._selectionMap.get(t);if(!i)return;const n=[];for(const s of i.selection)r.includes(s)||n.push(s);this._setSelection(t,n)}toggleInSelection(t,r){const i=this._selectionMap.get(t);if(!i||i.selection.length===0)return void this._setSelection(t,r);const n=new Set(i.selection),s=new Set(r),o=XK(n,s);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const r=[];for(const[i,n]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}const{sources:t,view:r,_selectionMap:i,showHighlight:n}=this,s=this._vizTaskId;for(const a of t){const u=i.get(a),c=fu(a)?a.parent:a;if(c!=null&&vL(c)){if(gL(c))continue;r.whenLayerView(c).then(h=>{var f;(f=u==null?void 0:u.highlightHandle)==null||f.remove(),u!=null&&n&&s===this._vizTaskId&&"highlight"in h&&typeof h.highlight=="function"&&u.selection.length>0&&(u.highlightHandle=h.highlight(u.selection,"selection"))}).catch(()=>{var h;(h=u==null?void 0:u.highlightHandle)==null||h.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(pt);for(const t of this.sources){const r=fu(t)?t.parent:t;if(r!=null&&yg(r)){const i=r.on("edits",n=>{this._handleEditChanges(n,t)});this._layerEditHandles.push(i)}}}_handleEditChanges(t,r){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(r)){const i=t.deletedFeatures.filter(n=>n.error==null).map(n=>n.objectId).filter(Mc);this.removeFromSelection(r,i)}}_setSelection(t,r){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const i=this._selectionMap.get(t);if(i===void 0||!dde(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(t,{selection:[...r]});const n={layer:t,selection:[...r],...wC(i!==void 0?i.selection:[],r)};this._onSelectionChange([n])}}};l([d({readOnly:!0,nonNullable:!0})],yo.prototype,"selections",null),l([d({readOnly:!0,nonNullable:!0})],yo.prototype,"count",null),l([d({constructOnly:!0,nonNullable:!0})],yo.prototype,"view",void 0),l([d({readOnly:!0,nonNullable:!0})],yo.prototype,"hasSelection",null),l([d()],yo.prototype,"showHighlight",void 0),l([d()],yo.prototype,"sources",null),yo=l([x("esri.views.SelectionManager")],yo);const gL=e=>{var t;return fu(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},cde=e=>e.layer!==void 0,vL=e=>(e==null?void 0:e.when)!==void 0,dde=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const r=[...e.selection],i=[...t.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let n=0;n<r.length;n++)if(r[n]!==i[n])return!1}return!0},wL=async(e,t,r={})=>{let i;if(cde(e)){const n=e;i=n===void 0?null:await n.queryFeatures(new ea({...r,objectIds:t})).then(s=>({data:s,layer:e.layer}))}else{const n=e;i=n===void 0?null:await n.queryFeatures(new ea({...r,objectIds:t})).then(s=>({data:s,layer:n}))}return i},pde=yo;let Hf=class extends He(le){constructor(t){super(t),this.accentColor=new ce([255,127,0]),this.textColor=new ce([255,255,255])}};l([d({type:ce,nonNullable:!0})],Hf.prototype,"accentColor",void 0),l([d({type:ce,nonNullable:!0})],Hf.prototype,"textColor",void 0),Hf=l([x("esri.views.Theme")],Hf);const $M=Hf;var bL;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(bL||(bL={}));const d7=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],p7={};function h7(e){return!!p7[e]}function hde(e){for(const t of e)if(!h7(t))return!1;return!0}d7.forEach(e=>{p7[e]=!0});let fde=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:r,priority:i},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[r],i)})}disconnect(){this.inputManager&&this._handlers.forEach((t,r)=>{var i;return(i=this.inputManager)==null?void 0:i.uninstallHandlers(r)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,i,n){const s=Array.isArray(t)?t:t.split(",");if(!hde(s))return s.some(h7)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof i=="function"?o=i:n=i,n=n??$l.DEFAULT;const u=this._createUniqueGroupName(),c=new mde(this.view,s,a,o);this._handlers.set(u,{handler:c,priority:n});for(const h of s){const f=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,f+1)}return this.inputManager&&this.inputManager.installHandlers(u,[c],n),De(()=>this._removeHandler(u,s))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t)){this._handlers.delete(t);for(const i of r){const n=this._handlerCounts.get(i);n===void 0||(n===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},mde=class extends Zt{constructor(t,r,i,n){super(!0),this._latestDragStart=void 0,this.view=t;for(const s of r)switch(s){case"click":this.registerIncoming("click",i,o=>n(vde(t,o)));break;case"double-click":this.registerIncoming("double-click",i,o=>n(wde(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>n(bde(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>n(_de(t,o)));break;case"hold":this.registerIncoming("hold",i,o=>n(Sde(t,o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>n($de(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>n(xde(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>n(sf(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>n(sf(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>n(sf(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>n(Tde(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>n(Mde(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>n(sf(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>n(sf(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{n(Ede(o))});break;case"focus":this.registerIncoming("focus",i,o=>{n(yde(o))});break;case"blur":this.registerIncoming("blur",i,o=>{n(gde(o))})}}_wrapDrag(t){const r=t.data,{x:i,y:n}=r.center,{action:s,pointerType:o,button:a}=r;if(s==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const u=r.pointer.native,c=r.buttons,{cancelable:h,timestamp:f}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:i,y:n,origin:m,pointerType:o,button:a,buttons:c,radius:r.radius,angle:p8(r.angle),native:u,timestamp:f,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}};function yde(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function gde(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function vde(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:u}=t.data,{cancelable:c,timestamp:h}=t;return{type:"click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,screenPoint:pr(s,o),mapPoint:s0(e,s,o),eventId:u,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function wde(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:u}=t.data,{cancelable:c,timestamp:h}=t;return{type:"double-click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:s0(e,s,o),eventId:u,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function bde(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:u}=t.data,c=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-click",pointerId:c,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:s0(e,s,o),eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function _de(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:u}=t.data,c=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-double-click",pointerId:c,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:s0(e,s,o),eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function Sde(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a}=t.data,{cancelable:u,timestamp:c}=t;return{type:"hold",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:c,mapPoint:s0(e,s,o),cancelable:u,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function s0(e,t,r){return e.toMap(pr(t,r),{exclude:[]})}function $de(e){const{key:t,repeat:r,native:i}=e.data,{cancelable:n,timestamp:s}=e;return{type:"key-down",key:t,repeat:r,native:i,timestamp:s,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function xde(e){const{key:t,native:r}=e.data,{cancelable:i,timestamp:n}=e;return{type:"key-up",key:t,native:r,timestamp:n,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:s=>e.async(s),preventDefault:()=>e.preventDefault()}}function sf(e,t){const{x:r,y:i,button:n,buttons:s,native:o,eventId:a}=e.data,u=o.pointerId,c=o.pointerType,{cancelable:h,timestamp:f}=e;return{type:t,x:r,y:i,pointerId:u,pointerType:c,button:n,buttons:s,native:o,timestamp:f,eventId:a,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function Tde(e){const{x:t,y:r,buttons:i,native:n,eventId:s}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,u=e.data.startEvent.native.pointerType,c=e.data.action,h={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:f,timestamp:m}=e;return{type:"pointer-drag",x:t,y:r,pointerId:a,pointerType:u,button:o,buttons:i,action:c,origin:h,native:n,timestamp:m,eventId:s,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}function Mde(e){const{cancelable:t,data:r,timestamp:i}=e,{x:n,y:s,deltaY:o,native:a}=r;return{type:"mouse-wheel",x:n,y:s,deltaY:o,native:a,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}function Ede(e){const{action:t,state:r,device:i}=e.data,{cancelable:n,timestamp:s}=e,{buttons:o,axes:a}=r;return{type:"gamepad",device:i,timestamp:s,action:t,buttons:o,axes:a,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}var Sy,_L,SL;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Sy||(Sy={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(_L||(_L={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(SL||(SL={}));function Ide(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return z.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function xM(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Sy.USER)&&e.getEditableFlag(Sy.MANAGER)}function xs(e){return pr(e.x,e.y)}function f7(e,t){var i;const r=(i=e instanceof HTMLElement?e:e.surface)==null?void 0:i.getBoundingClientRect();return r?pr(t.clientX-r.left,t.clientY-r.top):pr(0,0)}function m7(e,t){return t instanceof Event?f7(e,t):xs(t)}function y7(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let kde=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":xL(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!TL(t))break;const n=xs(t),s=sd(n,t.pointerType,r.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,r),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!TL(t))break;const n=this._grabbedManipulators.get(t.pointerId),s=n==null?void 0:n.manipulator,o=n==null?void 0:n.tool;if(s==null||o==null)break;const a=xs(t);a.x=ss(a.x,0,r.view.width),a.y=ss(a.y,0,r.view.height);const u=n.start,c=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:u,screenPoint:a}):s.events.emit("drag",{action:"start",start:u,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:s,start:u}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:u,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const n=xs(t),s=sd(n,t.pointerType,r.forEachTool);if(Ode(t)||r.forEachTool(c=>{if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let h=!1;c.manipulators.forEach(({manipulator:f})=>{f.selected&&(f.selected=!1,h=!0)}),h&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const u=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:u,stopPropagation:i}),r2(o,i);break}case"click":{const n=xs(t),s=sd(n,t.pointerType,r.forEachTool),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const n=xs(t),s=sd(n,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),r2(o,i);break}case"immediate-double-click":{const n=xs(t),s=sd(n,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),r2(o,i);break}}this._onFocusChange(r.forEachTool)}_releaseManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:xs(r)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===t&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,r){var n;const i=(n=this._grabbedManipulators.get(t.pointerId))==null?void 0:n.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:xs(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=$L(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=$L(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:n})=>{r.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{i.add(n)}),t(n=>{n.hasGrabbedManipulators=r.has(n),n.hasHoveredManipulators=i.has(n);const s=this._grabbedManipulators.values(),o=lK(s,({tool:a})=>a===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:r,setActiveTool:i},n=!0,s){const o=(a,u)=>a===t&&(s==null||s===u);this._grabbedManipulators.forEach(({tool:a,manipulator:u,pointerType:c},h)=>{o(a,u)&&(this._grabbedManipulators.delete(h),u.grabbing=!1,u.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:u},c)=>{o(a,u)&&(this._draggedManipulators.delete(c),u.dragging=!1,u.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:u},c)=>{o(a,u)&&(this._hoveredManipulators.delete(c),u.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(pr(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!xL(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(xs(t),t.pointerId,t.pointerType,r)}_updateHoveredStateForPointerAtScreenPosition(t,r,i,n){var a;let s=sd(t,i,n);const o=(a=this._hoveredManipulators.get(r))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(r,s)):this._hoveredManipulators.delete(r),this._onFocusChange(n))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}};function $L(e){let t=null;return Pb(e,({manipulator:r})=>!(r==null||!r.interactive)&&(r.grabbing&&r.grabCursor?(t=r.grabCursor,!0):!!r.cursor&&(t=r.cursor,!0))),t}function sd(e,t,r){let i=null;return r(n=>{if(n.manipulators==null||!xM(n))return!1;const s=n.manipulators.intersect(e,t);return s!=null&&(i={tool:n,manipulator:s},!0)}),i}function xL(e){return e==="mouse"}function TL(e){return e.pointerType!=="mouse"||e.button===0}function Ode(e){return!!e.native.shiftKey}function r2(e,t){e!=null&&e.consumesClicks&&t()}const ML="attached",i2="tools",Pde=1e3;let Ts=class extends le{constructor(t){super(t),this._updatingHandles=new yc,this._clock=ch,this._manipulatorState=new kde,this.tools=new te,this.cursor=null,this._interacting=!1,this._interactingTimeout=Pde,this._interactingTimeoutHandle=null,this._forEachTool=r=>{for(const i of this.tools.items)if(r(i))return}}initialize(){this.addHandles([this.view.on(d7,t=>{this._handleInputEvent(t)},$l.TOOL),...Ide(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void z.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const r=this.activeTool;this._set("activeTool",t),r!=null&&r.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const i of this.tools){this._updateToolEditableFlag(i);const n=xM(i);this.activeTool!=null&&n||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=pt(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([he(()=>{const{state:r}=this.view;return"camera"in r&&r.camera},()=>this._forEachManipulator(r=>r.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",r=>this._forEachManipulator(i=>i.onElevationChange(r)))],ML):this.addHandles(he(()=>this.view.extent,()=>this._forEachManipulator(r=>r.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(ML),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(r=>{r.manipulators&&r.manipulators.forEach(({manipulator:i})=>t(i,r))})}_handleInputEvent(t){let r=!1;const i={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(n=>{!r&&n.visible&&n.handleInputEvent(i)}),!r&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(i2),this._forEachTool(t=>{if(t instanceof le){const r=he(()=>[t.cursor,t.visible,t.editable],()=>{xM(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(r,i2)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],i2)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var r;(r=t.setEditableFlag)==null||r.call(t,Sy.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(r=>!(r.cursor==null||!r.visible)&&(t=r.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(r=>(t==null||r!==t)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}get test(){}};l([d({constructOnly:!0,nonNullable:!0})],Ts.prototype,"view",void 0),l([d({value:null})],Ts.prototype,"activeTool",null),l([d({readOnly:!0,type:te})],Ts.prototype,"tools",void 0),l([d({readOnly:!0})],Ts.prototype,"cursor",void 0),l([d({readOnly:!0})],Ts.prototype,"updating",null),l([d()],Ts.prototype,"_interacting",void 0),l([d({readOnly:!0})],Ts.prototype,"interacting",null),Ts=l([x("esri.views.ToolViewManager")],Ts);let Ed=class extends le{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":Cde.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Ade[this.deviceType]}};l([d({nonNullable:!0,readOnly:!0})],Ed.prototype,"nativeIndex",void 0),l([d({type:String,readOnly:!0})],Ed.prototype,"deviceType",null),l([d({type:Number,readOnly:!0})],Ed.prototype,"axisThreshold",null),Ed=l([x("esri.views.input.gamepad.GamepadInputDevice")],Ed);const Zk=Ed,Cde=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Ade={standard:.15,spacemouse:.025,unknown:0};let Wf=class extends le{constructor(...t){super(...t),this.devices=new te,this.enabledFocusMode="document"}};l([d({type:te.ofType(Zk),readOnly:!0})],Wf.prototype,"devices",void 0),l([d({type:["document","view","none"]})],Wf.prototype,"enabledFocusMode",void 0),Wf=l([x("esri.views.input.gamepad.GamepadSettings")],Wf);const Rde=Wf;let Gv=class extends le{constructor(){super(...arguments),this.gamepad=new Rde}};l([d({readOnly:!0})],Gv.prototype,"gamepad",void 0),Gv=l([x("esri.views.input.Input")],Gv);const Lde=Gv,g7=()=>Pe.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let Ra=class extends le{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([d({type:Boolean,nonNullable:!0})],Ra.prototype,"enabled",void 0),l([d({type:Zk})],Ra.prototype,"device",void 0),l([d({type:["pan","zoom"],nonNullable:!0})],Ra.prototype,"mode",void 0),l([d({type:["forward-down","forward-up"],nonNullable:!0})],Ra.prototype,"tiltDirection",void 0),l([d({type:Number,nonNullable:!0})],Ra.prototype,"velocityFactor",void 0),Ra=l([x("esri.views.navigation.gamepad.GamepadSettings")],Ra);const v7=Ra;let Au=class extends le{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new v7,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!g7()}};l([d({type:Boolean})],Au.prototype,"browserTouchPanEnabled",void 0),l([d({type:v7,nonNullable:!0})],Au.prototype,"gamepad",void 0),l([d({type:Boolean})],Au.prototype,"momentumEnabled",void 0),l([d({type:Boolean})],Au.prototype,"mouseWheelZoomEnabled",void 0),Au=l([x("esri.views.navigation.Navigation")],Au);const w7=Au,b7={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},_7=Object.values(b7),S7=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${_7.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Nde=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${_7.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Fde=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function REe(e){return S7.test(e)}function xh(e){if(e==null)return null;const t=Ar(e),r=(t==null?void 0:t.path.match(S7))||(t==null?void 0:t.path.match(Nde));if(!r)return null;const[,i,n,s,o]=r,a=n.indexOf("/");return{title:Jk(a!==-1?n.slice(a+1):n),serverType:b7[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function Dde(e){const t=Ar(e).path.match(Fde);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function Jk(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function jde(e,t){const r=[];if(e){const i=xh(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=Jk(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function $7(e){let t=gn(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function zde(e,t){return e&&s6(o6(e,t))}function Vde(e){let{url:t}=e;if(!t)return{url:t};t=o6(t,e.logger);const r=Ar(t),i=xh(r.path);let n;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(n=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const s=Dde(r.path);s!=null&&(t=s.serviceUrl,n=s.sublayerId)}return{url:s6(t),layerId:n}}function Ude(e,t,r,i,n){Lc(t,i,"url",n),i.url&&e.layerId!=null&&(i.url=Kp(i.url,r,e.layerId.toString()))}function LEe(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return r&&(i||n||s)}var EL;function Gde(e){var i;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?xh(e.url):void 0;return!(((i=e.spatialReference)==null?void 0:i.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&x7(e)&&e.heightModelInfo?e.heightModelInfo:qde(e)?u_.deriveUnitFromSR(Hde,e.spatialReference):null}function x7(e){return"heightModelInfo"in e}function T7(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function qde(e){return T7(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):M7(e)}function Bde(e){return e.layers!=null||M7(e)||T7(e)||x7(e)}function M7(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(EL||(EL={}));const Hde=new u_({heightModel:"gravity-related-height"});var Uw;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(Uw||(Uw={}));let TM,n2=null;async function Wde(e){n2||(n2=J(()=>import("./geometryServiceUtils-C0Vt0WjX.js"),__vite__mapDeps([131,132])).then(t=>TM=t)),await n2,ht(e)}async function E7(e,t,r,i){if(!e)return null;const n=e.spatialReference;return Bl()||Ws(n,t)?Hl(e,t):TM?TM.projectGeometry(e,t,r,i):(await Promise.race([Wde(i),Nl(i)]),E7(e,t,r,i))}let Ue=class extends le{constructor(t){super(t),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=oy(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,n,s,o;const t=(i=this.map)==null?void 0:i.call(this),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:t==null?void 0:t.basemap,layers:(n=t==null?void 0:t.basemap)==null?void 0:n.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(s=t==null?void 0:t.ground)==null?void 0:s.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),r}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:t,updating:r}=this._allLayers;let i=null;for(const s of t){const o=this._getSupportedSpatialReferences(s);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(i,o);a!=null&&(i=a)}if(i!=null&&i.length===1)break}if(r&&(i==null||i.length!==1))return{updating:!0};const n=this._pickSpatialReferenceCandidate(i);return{spatialReference:(n==null?void 0:n.spatialReference)??null,viewingMode:(n==null?void 0:n.viewingMode)??null,updating:!1}}get _tileInfoTask(){var i,n,s,o,a,u,c;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:t,updating:r}=this._collectLayers([{parent:(n=(i=this.map)==null?void 0:i.call(this))==null?void 0:n.basemap,layers:(a=(o=(s=this.map)==null?void 0:s.call(this))==null?void 0:o.basemap)==null?void 0:a.baseLayers},{layers:(c=(u=this.map)==null?void 0:u.call(this))==null?void 0:c.layers}]);if(t&&t.length>0&&"tileInfo"in t[0]){const h=t[0].tileInfo;return{tileInfo:h!=null&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:r}}get _heightModelInfoTask(){var i,n,s;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))!=null&&i.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:t,updating:r}=this._allLayers;for(const o of t)if(Bde(o)){const a=Gde(o);if(a)return{heightModelInfo:a,vcsWkid:(n=o.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(s=o.spatialReference)==null?void 0:s.latestVcsWkid,updating:!1}}return{updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=this._allLayers,r=t.updating,i=[];for(const n of t.layers){const s="fullExtents"in n&&n.fullExtents||(n.fullExtent!=null?[n.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:s[0],a=s.find(u=>u.spatialReference.equals(this.spatialReference))??o;if(a)return{candidates:[{extent:a,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const u of s)i.push({extent:u,layer:n})}return{candidates:i,updating:r}}get _extentTask(){const{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),n=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=oy(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:n.clone(),task:jI(async s=>{try{const o=await E7(i.extent,n,"portalItem"in i.layer?i.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Ko(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if(t==null)return r;const i=new Array;for(const n of t)for(const s of r){if(!n.spatialReference.equals(s.spatialReference))continue;const o=Jde(n.viewingMode,s.viewingMode);if(o!==!1){i.push({spatialReference:n.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const r=this.defaultSpatialReference;return t==null||t.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&t.length>1&&t.some(({spatialReference:i})=>i.equals(r))&&(t=t.filter(({spatialReference:i})=>i.equals(r))),t.length>1&&t.some(({viewingMode:i})=>i!==Uw.Local)&&(t=t.filter(({viewingMode:i})=>i!==Uw.Local)),t[0])}_getSupportedSpatialReferences(t){const r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const n of r){const s=this.getSpatialReferenceSupport(n,t);if(s!=null){const o=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:u}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||i.push({spatialReference:a,viewingMode:u})}}return i}_pickExtentCandidate(t){const r=this.spatialReference;return t.find(({extent:i})=>r.equals(i.spatialReference))||t[0]}_collectLayers(t){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const r=new Zde;for(const n of t)if(this._collectCollection(n,r),r.preloading===this.sourcePreloadCount)break;return{layers:r.layers,updating:r.updating}}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of t.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":r.updating||r.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(r=>{bi(r)||console.log(r)}),"loading"):t.loadStatus:"loaded"}};l([d()],Ue.prototype,"required",void 0),l([d({constructOnly:!0})],Ue.prototype,"map",void 0),l([d({constructOnly:!0})],Ue.prototype,"getSpatialReferenceSupport",void 0),l([d()],Ue.prototype,"defaultSpatialReference",void 0),l([d()],Ue.prototype,"userSpatialReference",void 0),l([d()],Ue.prototype,"sourcePreloadCount",void 0),l([d()],Ue.prototype,"priorityCollection",void 0),l([d()],Ue.prototype,"requiresExtentInSpatialReference",void 0),l([d()],Ue.prototype,"suspended",void 0),l([d({readOnly:!0})],Ue.prototype,"ready",null),l([d({readOnly:!0})],Ue.prototype,"heightModelInfoReady",null),l([d({readOnly:!0})],Ue.prototype,"spatialReference",null),l([d({readOnly:!0})],Ue.prototype,"extent",null),l([d({readOnly:!0})],Ue.prototype,"heightModelInfo",null),l([d({readOnly:!0})],Ue.prototype,"vcsWkid",null),l([d({readOnly:!0})],Ue.prototype,"latestVcsWkid",null),l([d({readOnly:!0})],Ue.prototype,"viewingMode",null),l([d({readOnly:!0})],Ue.prototype,"tileInfo",null),l([d({readOnly:!0})],Ue.prototype,"mapCollections",null),l([d({readOnly:!0})],Ue.prototype,"_allLayers",null),l([d({readOnly:!0})],Ue.prototype,"_spatialReferenceTask",null),l([d({readOnly:!0})],Ue.prototype,"_tileInfoTask",null),l([d({readOnly:!0})],Ue.prototype,"_heightModelInfoTask",null),l([d({readOnly:!0})],Ue.prototype,"_extentCandidatesTask",null),l([d()],Ue.prototype,"_extentTask",null),l([d()],Ue.prototype,"_projectExtentTask",void 0),Ue=l([x("esri.views.support.DefaultsFromMap")],Ue);let Zde=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};function Jde(e,t){return e!=null?t!=null?e===t&&e:e:t}var Zf;let ie=Zf=class extends ra.EventedMixin(Fb(le)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Vy,this.updatingHandles=new yc,this.allLayerViews=new my({getCollections:()=>{var t,r,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:Yde}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new vc,this.analyses=new Nw,this.typeSpecificPreconditionsReady=!0,this.layerViews=new te,this.magnifier=new s7,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Lde,this.navigation=new w7,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new fde(this),this.persistableViewModels=new te,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(he(()=>this.preconditionsReady,t=>{var i,n;const r=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,Zf.views.add(this)):(this._lockedSpatialReference=null,Zf.views.remove(this)),this.notifyChange("spatialReference"),!t&&r)(i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown();else if(t&&!r){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new N("startup-error",null,s)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},Pl))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,rk(()=>this.ready)))),this.basemapView=new Aa({view:this}),this.layerViewManager=new Xce({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Ts({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new pde({view:this}),this.addHandles([he(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},un),he(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Pl),he(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},un)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([he(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var i;const r=((i=this.map)==null?void 0:i.allLayers.length)>0;if(t&&!this.spatialReference&&r){if(e!=null)return;const n=De(()=>e=oy(e));e=jI(async s=>{try{await _j(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{e=null}z.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(n,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){var e,t;this.destroyed||(Zf.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=nt(this.graphics),this.analyses=nt(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),nt(this.analysisViewManager),this.toolViewManager=nt(this.toolViewManager),this.layerViewManager=nt(this.layerViewManager),this.selectionManager=nt(this.selectionManager),this.basemapView=nt(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(r=>r.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=nt(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return z.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Ue({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Yo.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(z.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),Yo.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){var t,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&r.heightModelInfo)){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const t=!Wt(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Bs}set timeZone(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));this._userTimeZone=e,e===Bs||e===Fc||t.has(e.toLowerCase())||r.has(e.toLowerCase())||z.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new $M}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}importLayerView(e){throw new N("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&z.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Qo(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};ie.views=new te,l([d()],ie.prototype,"_userSpatialReference",void 0),l([d()],ie.prototype,"activeTool",null),l([d({readOnly:!0})],ie.prototype,"allLayerViews",void 0),l([d()],ie.prototype,"groundView",void 0),l([d()],ie.prototype,"animation",null),l([d()],ie.prototype,"basemapView",void 0),l([d()],ie.prototype,"center",null),l([d({readOnly:!0})],ie.prototype,"_defaultsFromMapSettings",null),l([d()],ie.prototype,"defaultsFromMap",null),l([d()],ie.prototype,"fatalError",void 0),l([d({type:Be})],ie.prototype,"extent",null),l([d(iT(vc,"graphics"))],ie.prototype,"graphics",void 0),l([d(iT(Nw,"analyses"))],ie.prototype,"analyses",void 0),l([d({readOnly:!0,type:u_})],ie.prototype,"heightModelInfo",null),l([d({readOnly:!0})],ie.prototype,"interacting",null),l([d({readOnly:!0})],ie.prototype,"navigating",null),l([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ie.prototype,"preconditionsReady",null),l([d({readOnly:!0})],ie.prototype,"typeSpecificPreconditionsReady",void 0),l([d({type:te,readOnly:!0})],ie.prototype,"layerViews",void 0),l([d()],ie.prototype,"resolution",null),l([d({type:s7})],ie.prototype,"magnifier",void 0),l([d({value:null,type:d9})],ie.prototype,"map",null),l([d()],ie.prototype,"padding",void 0),l([d({readOnly:!0})],ie.prototype,"ready",void 0),l([d({type:ve})],ie.prototype,"spatialReference",null),l([d()],ie.prototype,"spatialReferenceWarningDelay",void 0),l([d()],ie.prototype,"stationary",null),l([d({readOnly:!0})],ie.prototype,"supportsGround",void 0),l([d({type:Hs})],ie.prototype,"timeExtent",void 0),l([d({type:String,nonNullable:!0})],ie.prototype,"timeZone",null),l([d()],ie.prototype,"tools",null),l([d()],ie.prototype,"toolViewManager",void 0),l([d({readOnly:!0})],ie.prototype,"type",void 0),l([d({type:Number})],ie.prototype,"scale",void 0),l([d({readOnly:!0})],ie.prototype,"updating",void 0),l([d({readOnly:!0})],ie.prototype,"initialExtentRequired",void 0),l([d({readOnly:!0})],ie.prototype,"initialExtent",null),l([d()],ie.prototype,"cursor",null),l([d({readOnly:!0})],ie.prototype,"input",void 0),l([d({type:w7,nonNullable:!0})],ie.prototype,"navigation",void 0),l([d()],ie.prototype,"layerViewManager",void 0),l([d()],ie.prototype,"analysisViewManager",void 0),l([d()],ie.prototype,"selectionManager",void 0),l([d()],ie.prototype,"width",void 0),l([d()],ie.prototype,"height",void 0),l([d({readOnly:!0})],ie.prototype,"resizing",void 0),l([d({value:null,readOnly:!0})],ie.prototype,"size",null),l([d({readOnly:!0})],ie.prototype,"suspended",void 0),l([d({readOnly:!0})],ie.prototype,"viewEvents",void 0),l([d({readOnly:!0})],ie.prototype,"persistableViewModels",void 0),l([d()],ie.prototype,"_isValid",void 0),l([d()],ie.prototype,"_readyCycleForced",void 0),l([d()],ie.prototype,"_lockedSpatialReference",void 0),l([d()],ie.prototype,"_userTimeZone",void 0),l([d()],ie.prototype,"_lockedTimeZone",void 0),l([d({type:$M})],ie.prototype,"theme",void 0),l([d({readOnly:!0,type:$M})],ie.prototype,"effectiveTheme",null),ie=Zf=l([x("esri.views.View")],ie);const Kde=ie;function Yde(e){return e.layerViews}function vt(){return[0,0]}function Qde(e){return[e[0],e[1]]}function o0(e,t){return[e,t]}function Xde(e,t=vt()){const r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function epe(e,t){return new Float64Array(e,t,2)}function I7(){return vt()}function k7(){return o0(1,1)}function O7(){return o0(1,0)}function P7(){return o0(0,1)}const tpe=I7(),rpe=k7(),ipe=O7(),npe=P7();Object.freeze(Object.defineProperty({__proto__:null,ONES:rpe,UNIT_X:ipe,UNIT_Y:npe,ZEROS:tpe,clone:Qde,create:vt,createView:epe,fromArray:Xde,fromValues:o0,ones:k7,unitX:O7,unitY:P7,zeros:I7},Symbol.toStringTag,{value:"Module"}));let La=class extends hw{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=ji(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new N("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,r){r||(r=Vl(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};l([d({readOnly:!0})],La.prototype,"done",null),l([d({readOnly:!0,type:String})],La.prototype,"state",void 0),l([d()],La.prototype,"target",void 0),La=l([x("esri.views.ViewAnimation")],La),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(La||(La={}));const MM=La;function Np(e,t){return e[0]=t[0],e[1]=t[1],e}function rr(e,t,r){return e[0]=t,e[1]=r,e}function C7(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function $y(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function A7(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function R7(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function spe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function ope(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function ape(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function lpe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function upe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function a0(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function cpe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function g_(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function Gw(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function qw(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function L7(e){const t=e[0],r=e[1];return t*t+r*r}function N7(e,t){return e[0]=-t[0],e[1]=-t[1],e}function dpe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function EM(e,t){const r=t[0],i=t[1];let n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function F7(e,t){return e[0]*t[0]+e[1]*t[1]}function D7(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function ppe(e,t,r,i){const n=t[0],s=t[1];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e}function hpe(e,t){t=t||1;const r=2*Hb()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function fpe(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e}function Rs(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function mpe(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e}function ype(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e}function gpe(e,t,r,i){const n=t[0]-r[0],s=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=n*a-s*o+r[0],e[1]=n*o+s*a+r[1],e}function vpe(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const u=(r*n+i*s)*o*a;return u>1?0:u<-1?Math.PI:Math.acos(u)}function wpe(e){return"vec2("+e[0]+", "+e[1]+")"}function bpe(e,t){return e[0]===t[0]&&e[1]===t[1]}function _pe(e,t){const r=e[0],i=e[1],n=t[0],s=t[1],o=Zr();return Math.abs(r-n)<=o*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))}function Spe(e,t,r,i,n){let s=t[0]-r[0],o=t[1]-r[1];const a=(i[0]*s+i[1]*o)*(n-1);return s=i[0]*a,o=i[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const $pe=qw,Kk=$y,xpe=A7,Tpe=R7,Mpe=g_,Epe=Gw,Ipe=L7;Object.freeze(Object.defineProperty({__proto__:null,add:C7,angle:vpe,ceil:spe,copy:Np,cross:D7,dist:Mpe,distance:g_,div:Tpe,divide:R7,dot:F7,equals:_pe,exactEquals:bpe,floor:ope,inverse:dpe,len:$pe,length:qw,lerp:ppe,max:lpe,min:ape,mul:xpe,multiply:A7,negate:N7,normalize:EM,projectAndScale:Spe,random:hpe,rotate:gpe,round:upe,scale:a0,scaleAndAdd:cpe,set:rr,sqrDist:Epe,sqrLen:Ipe,squaredDistance:Gw,squaredLength:L7,str:wpe,sub:Kk,subtract:$y,transformMat2:fpe,transformMat2d:Rs,transformMat3:mpe,transformMat4:ype},Symbol.toStringTag,{value:"Module"}));function kpe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ope(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Ppe(e,t,r,i,n,s,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e}function Yk(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5];let u=r*s-i*n;return u?(u=1/u,e[0]=s*u,e[1]=-i*u,e[2]=-n*u,e[3]=r*u,e[4]=(n*a-s*o)*u,e[5]=(i*o-r*a)*u,e):null}function Cpe(e){return e[0]*e[3]-e[1]*e[2]}function j7(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=r[0],h=r[1],f=r[2],m=r[3],y=r[4],g=r[5];return e[0]=i*c+s*h,e[1]=n*c+o*h,e[2]=i*f+s*m,e[3]=n*f+o*m,e[4]=i*y+s*g+a,e[5]=n*y+o*g+u,e}function v_(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=Math.sin(r),h=Math.cos(r);return e[0]=i*h+s*c,e[1]=n*h+o*c,e[2]=i*-c+s*h,e[3]=n*-c+o*h,e[4]=a,e[5]=u,e}function Qk(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=r[0],h=r[1];return e[0]=i*c,e[1]=n*c,e[2]=s*h,e[3]=o*h,e[4]=a,e[5]=u,e}function xy(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=r[0],h=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=i*c+s*h+a,e[5]=n*c+o*h+u,e}function z7(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function V7(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function Xk(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Ape(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Rpe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function Lpe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function U7(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function Npe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function Fpe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function Dpe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function jpe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=t[0],c=t[1],h=t[2],f=t[3],m=t[4],y=t[5],g=Zr();return Math.abs(r-u)<=g*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-c)<=g*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-h)<=g*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-f)<=g*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-m)<=g*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=g*Math.max(1,Math.abs(a),Math.abs(y))}const zpe=j7,Vpe=U7;Object.freeze(Object.defineProperty({__proto__:null,add:Lpe,copy:kpe,determinant:Cpe,equals:jpe,exactEquals:Dpe,frob:Rpe,fromRotation:z7,fromScaling:V7,fromTranslation:Xk,identity:Ope,invert:Yk,mul:zpe,multiply:j7,multiplyScalar:Npe,multiplyScalarAndAdd:Fpe,rotate:v_,scale:Qk,set:Ppe,str:Ape,sub:Vpe,subtract:U7,translate:xy},Symbol.toStringTag,{value:"Module"}));function Go(){return[1,0,0,1,0,0]}function Upe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function Gpe(e,t,r,i,n,s){return[e,t,r,i,n,s]}function qpe(e,t){return new Float64Array(e,t,6)}const Bpe=Go();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Bpe,clone:Upe,create:Go,createView:qpe,fromValues:Gpe},Symbol.toStringTag,{value:"Module"}));const gg={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new pn({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:ve.WebMercator}),minus180Line:new pn({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:ve.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new pn({paths:[[[180,-180],[180,180]]],spatialReference:ve.WGS84}),minus180Line:new pn({paths:[[[-180,-180],[-180,180]]],spatialReference:ve.WGS84})}};function ac(e,t){return Math.ceil((e-t)/(2*t))}function G7(e,t){const r=Dm(e);for(const i of r)for(const n of i)n[0]+=t;return e}function Dm(e){return Ep(e)?e.rings:e.paths}function jEe(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function Hpe(e){return typeof e=="string"?Ar(e):k(e)}function Wpe(e,t,r){const i={};for(const n in e){if(n==="declaredClass")continue;const s=e[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))i[n]=s.map(o=>Wpe(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(r==null?void 0:r[n]);i[n]=JSON.stringify(o)}else i[n]=JSON.stringify(s);else i[n]=s}return i}async function Zpe(e,t,r,i){const n=Hpe(e),s=t[0].spatialReference,o={...i,responseType:"json",query:{...n.query,f:"json",sr:x6(s),target:JSON.stringify({geometryType:ak(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await dt(n.path+"/cut",o),{cutIndexes:u,geometries:c=[]}=a.data;return{cutIndexes:u,geometries:c.map(h=>{const f=Cl(h);return f.spatialReference=s,f})}}function Jpe(e){return{geometryType:ak(e[0]),geometries:e.map(t=>t.toJSON())}}function Kpe(e,t,r){const i=Lie(t);return e.map(n=>{const s=i.fromJSON(n);return s.spatialReference=r,s})}async function Ype(e,t,r){const i=typeof e=="string"?Ar(e):e,n=t[0].spatialReference,s=ak(t[0]),o={...r,query:{...i.query,f:"json",sr:x6(n),geometries:JSON.stringify(Jpe(t))}},{data:a}=await dt(i.path+"/simplify",o);return Kpe(a.geometries,s,n)}const q7=()=>z.getLogger("esri.geometry.support.normalizeUtils");function Qpe(e){return e.type==="polygon"}function Xpe(e){return e[0].type==="polygon"}function ehe(e){return e[0].type==="polyline"}function IL(e){const t=[];let r=0,i=0;for(let n=0;n<e.length;n++){const s=e[n];let o=null;for(let a=0;a<s.length;a++)o=s[a],t.push(o),a===0?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&t.push([(r+i)/2,0])}return t}function the(e,t){if(!(e instanceof pn||e instanceof Xo)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw q7().error(n),new N(n)}const r=Dm(e),i=[];for(const n of r){const s=[];i.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],u=n[o][1],c=n[o+1][0],h=n[o+1][1],f=Math.sqrt((c-a)*(c-a)+(h-u)*(h-u)),m=(h-u)/f,y=(c-a)/f,g=f/t;if(g>1){for(let _=1;_<=g-1;_++){const $=_*t,T=y*$+a,E=m*$+u;s.push([T,E])}const v=(f+Math.floor(g-1)*t)/2,w=y*v+a,b=m*v+u;s.push([w,b])}s.push([c,h])}}return Qpe(e)?new Xo({rings:i,spatialReference:e.spatialReference}):new pn({paths:i,spatialReference:e.spatialReference})}function kL(e,t,r){if(t){const i=the(e,1e6);e=lp(i,!0)}return r&&(e=G7(e,r)),e}function OL(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const n=ac(i,t);e[0]=i+n*(-2*t)}else if(i<r){const n=ac(i,r);e[0]=i+n*(-2*r)}}else{const i=e.x;if(i>t){const n=ac(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){const n=ac(i,r);e=e.clone().offset(n*(-2*r),0)}}return e}function rhe(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const n=t.cutIndexes[i],s=t.geometries[i],o=Dm(s);for(let a=0;a<o.length;a++){const u=o[a];u.some(c=>{if(c[0]<180)return!0;{let h=0;for(let m=0;m<u.length;m++){const y=u[m][0];h=y>h?y:h}h=Number(h.toFixed(9));const f=-360*ac(h,180);for(let m=0;m<u.length;m++){const y=s.getPoint(a,m);s.setPoint(a,m,y.clone().offset(f,0))}return!0}})}if(n===r){if(Xpe(e))for(const a of Dm(s))e[n]=e[n].addRing(a);else if(ehe(e))for(const a of Dm(s))e[n]=e[n].addPath(a)}else r=n,e[n]=s}return e}async function ihe(e,t,r){if(!Array.isArray(e))return ihe([e],t);t&&typeof t!="string"&&q7().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:(t==null?void 0:t.url)??Pe.geometryServiceUrl;let n,s,o,a,u,c,h,f,m=0;const y=[],g=[];for(const T of e)if(T!=null)if(n||(n=T.spatialReference,s=mi(n),o=n.isWebMercator,c=o?102100:4326,a=gg[c].maxX,u=gg[c].minX,h=gg[c].plus180Line,f=gg[c].minus180Line),s)if(T.type==="mesh")g.push(T);else if(T.type==="point")g.push(OL(T.clone(),a,u));else if(T.type==="multipoint"){const E=T.clone();E.points=E.points.map(I=>OL(I,a,u)),g.push(E)}else if(T.type==="extent"){const E=T.clone()._normalize(!1,!1,s);g.push(E.rings?new Xo(E):E)}else if(T.extent){const E=T.extent,I=ac(E.xmin,u)*(2*a);let C=I===0?T.clone():G7(T.clone(),I);E.offset(I,0);let{xmin:L,xmax:H}=E;L=Number(L.toFixed(9)),H=Number(H.toFixed(9)),E.intersects(h)&&H!==a?(m=H>m?H:m,C=kL(C,o),y.push(C),g.push("cut")):E.intersects(f)&&L!==u?(m=H*(2*a)>m?H*(2*a):m,C=kL(C,o,360),y.push(C),g.push("cut")):g.push(C)}else g.push(T.clone());else g.push(T);else g.push(T);let v=ac(m,a),w=-90;const b=v,_=new pn;for(;v>0;){const T=360*v-180;_.addPath([[T,w],[T,-1*w]]),w*=-1,v--}if(y.length>0&&b>0){const T=rhe(y,await Zpe(i,y,_,r)),E=[],I=[];for(let H=0;H<g.length;H++){const V=g[H];if(V!=="cut")I.push(V);else{const Y=T.shift(),ee=e[H];ee!=null&&ee.type==="polygon"&&ee.rings&&ee.rings.length>1&&Y.rings.length>=ee.rings.length?(E.push(Y),I.push("simplify")):I.push(o?hc(Y):Y)}}if(!E.length)return I;const C=await Ype(i,E,r),L=[];for(let H=0;H<I.length;H++){const V=I[H];V!=="simplify"?L.push(V):L.push(o?hc(C.shift()):C.shift())}return L}const $=[];for(let T=0;T<g.length;T++){const E=g[T];if(E!=="cut")$.push(E);else{const I=y.shift();$.push(o===!0?hc(I):I)}}return $}function nhe(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&mi(e.spatialReference);if(!r)return t;const[i,n]=r.valid,s=2*n,{width:o}=t;let a,{xmin:u,xmax:c}=t;if([u,c]=[c,u],e.type==="extent"||o===0||o<=n||o>s||u<i||c>n)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=IL(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=IL(e.paths);break;case"multipoint":a=e.points}const h=t.clone();for(let f=0;f<a.length;f++){let m=a[f][0];m<0?(m+=n,c=Math.max(m,c)):(m-=n,u=Math.min(m,u))}return h.xmin=u,h.xmax=c,h.width<o?(h.xmin-=n,h.xmax-=n,h):t}function eO(e,t,r){const i=mi(r);if(i==null)return e;const[n,s]=i.valid,o=2*s;let a=0,u=0;t>s?a=Math.ceil(Math.abs(t-s)/o):t<n&&(a=-Math.ceil(Math.abs(t-n)/o)),e>s?u=Math.ceil(Math.abs(e-s)/o):e<n&&(u=-Math.ceil(Math.abs(e-n)/o));let c=e+(a-u)*o;const h=c-t;return h>s?c-=o:h<n&&(c+=o),c}function zEe(e,t){const r=mi(t);if(r){const[i,n]=r.valid,s=n-i;if(e<i)for(;e<i;)e+=s;if(e>n)for(;e>n;)e-=s}return e}const B7=96,H7=39.37,she=180/Math.PI;function W7(e){return e.wkid?e:e.spatialReference||ve.WGS84}function tO(e,t){return t.type?rr(e,t.x,t.y):Np(e,t)}function Z7(e){return Zc(e)}function w_(e,t,r=0){let i=e.width,n=e.height;if(r!==0){const a=Wb(r),u=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));i=e.width*u+e.height*c,n=e.width*c+e.height*u}const s=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(i/s,n/o)*hhe(e.spatialReference)}async function Jf(e,t,r,i){var a,u;let n,s;if(!e||Array.isArray(e)&&!e.length)return null;if(te.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const c=e.every(m=>"attributes"in m),h=e.some(m=>!m.geometry);let f=e;if(c&&h&&t&&t.allLayerViews){const m=new Map;for(const w of e){const b=w.layer,_=m.get(b)||[],$=w.attributes[b.objectIdField];$!=null&&_.push($),m.set(b,_)}const y=[];m.forEach((w,b)=>{const _=t.allLayerViews.find($=>$.layer.id===b.id);if(_&&"queryFeatures"in _){const $=b.createQuery();$.objectIds=w,$.returnGeometry=!0,y.push(_.queryFeatures($))}});const g=await Promise.all(y),v=[];for(const w of g)if(w&&w.features&&w.features.length)for(const b of w.features)b.geometry!=null&&v.push(b.geometry);f=v}for(const m of f)i=await Jf(m,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new ge(e);else if(e instanceof ia)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const c=e.layer,h=t.allLayerViews.find(f=>f.layer.id===c.id);if(h&&"queryFeatures"in h){const f=c.createQuery();f.objectIds=[e.attributes[c.objectIdField]],f.returnGeometry=!0;const m=await h.queryFeatures(f);n=(u=(a=m==null?void 0:m.features)==null?void 0:a[0])==null?void 0:u.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new Be({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=nhe(n);break;default:s=n.extent}if(!s)return null;Bl()||Ws(s.spatialReference,r)||await Nl();const o=Hl(s,r);if(!o)return null;if(i){const c=o.center,h=c.clone();h.x=eO(c.x,i.center.x,r),h.x!==c.x&&o.centerAt(h),i=i.union(o)}else i=o;return i}function ohe(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const r=e.layer;return{min:r.minScale,max:r.maxScale}}if(Array.isArray(e)&&e.length&&e.every(r=>"layer"in r)){let r=0,i=0;for(const n of e){const s=n.layer;s!=null&&s.minScale&&s.maxScale&&(r=s.minScale<r?s.minScale:r,i=s.maxScale>i?s.maxScale:i)}return r&&i?{min:r,max:i}:null}}}function PL(e,t){return Wt(W7(e),t)?e:Hl(e,t)}async function ahe(e,t){var w;if(!e||!t)return new Xn({targetGeometry:new ge,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:n,viewpoint:s,size:o}=t,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let u=null;e instanceof Xn?u=e:e.viewpoint?u=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(u=e.target);let c=null;u!=null&&u.targetGeometry?c=u.targetGeometry:e instanceof Be?c=e:e instanceof ia?c=await Jf(e,t,r):e&&(c=await Jf(e.center,t,r)||await Jf(e.target,t,r)||await Jf(e,t,r)),!c&&(s!=null&&s.targetGeometry)?c=s.targetGeometry:!c&&t.extent&&(c=t.extent),r||(r=W7(t.spatialReference||t.extent||c)),Bl()||Wt(c.spatialReference,r)||Ws(c.spatialReference,r)||await Nl();const h=PL(c,r),f="center"in h?h.center:h;t.pickClosestTarget!==!1&&f.type==="point"&&((w=s.targetGeometry)==null?void 0:w.type)==="point"&&(f.x=eO(f.x,s.targetGeometry.x,f.spatialReference));let m=0;u?m=u.rotation:e.hasOwnProperty("rotation")?m=e.rotation:s&&(m=s.rotation);let y=0;y=(u==null?void 0:u.targetGeometry)!=null&&u.targetGeometry.type==="point"?u.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(e.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?s.scale:w_(PL(c.extent,r),a,m);const g=ohe(e.target??e);g&&(g.min&&g.min<y?y=g.min:g.max&&g.max>y&&(y=g.max));let v=new Xn({targetGeometry:f,scale:y,rotation:m});return i&&(v=i.fit(v),i.constrainByGeometry(v),i.rotationEnabled||(v.rotation=s.rotation)),v}function Or(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function lhe(e,t,r){return r?rr(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):a0(e,t,.5)}const uhe=function(){const e=vt();return function(t,r,i){const n=r.targetGeometry;tO(e,n);const s=.5*Th(r);return t.xmin=e[0]-s*i[0],t.ymin=e[1]-s*i[1],t.xmax=e[0]+s*i[0],t.ymax=e[1]+s*i[1],t.spatialReference=n.spatialReference,t}}();function che(e,t,r,i,n){var s;return IM(e,t,r.center),e.scale=w_(r,i),(s=n==null?void 0:n.constraints)==null||s.constrain(e),e}function dhe(e,t,r,i){return nO(e,t,r,i),Yk(e,e)}const J7=function(){const e=vt();return function(t,r,i){return Kk(t,fhe(t,r),lhe(e,r,i))}}(),phe=function(){const e=Go(),t=vt();return function(r,i,n,s){const o=Th(i),a=rO(i);return rr(t,o,o),V7(e,t),v_(e,e,a),xy(e,e,J7(t,n,s)),xy(e,e,[0,s.top-s.bottom]),rr(r,e[4],e[5])}}();function Th(e){var t;return e.scale*K7((t=e.targetGeometry)==null?void 0:t.spatialReference)}function K7(e){return e!=null&&Ai(e)?1/(Z7(e)*H7*B7):1}function rO(e){return XI(e.rotation)||0}function hhe(e){return Ai(e)?Z7(e)*H7*B7:1}function fhe(e,t){return a0(e,t,.5)}const iO=function(){const e=vt(),t=vt(),r=vt();return function(i,n,s,o,a,u){return N7(e,n),a0(t,s,.5*u),rr(r,1/o*u,-1/o*u),Xk(i,t),a&&v_(i,i,a),Qk(i,i,r),xy(i,i,e),i}}(),nO=function(){const e=vt();return function(t,r,i,n){const s=Th(r),o=rO(r);return tO(e,r.targetGeometry),iO(t,e,i,s,o,n)}}(),mhe=function(){const e=vt();return function(t,r,i,n){const s=Th(r);return tO(e,r.targetGeometry),iO(t,e,i,s,0,n)}}();function Y7(e){const t=mi(e);return t?t.valid[1]-t.valid[0]:0}function yhe(e,t){return Math.round(Y7(e)/t)}const ghe=function(){const e=vt(),t=vt(),r=[0,0,0];return function(i,n,s){$y(e,i,n),EM(e,e),$y(t,i,s),EM(t,t),D7(r,e,t);let o=Math.acos(F7(e,t)/(qw(e)*qw(t)))*she;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),vhe=function(){const e=vt();return function(t,r,i,n){const s=t.targetGeometry;return Or(t,r),phe(e,r,i,n),s.x+=e[0],s.y+=e[1],t}}(),IM=function(e,t,r){Or(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},whe=function(){const e=vt();return function(t,r,i,n,s){s||(s="center"),Kk(e,i,n),a0(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":rr(e,0,0);break;case"left":rr(e,-o,0);break;case"top":rr(e,0,a);break;case"right":rr(e,o,0);break;case"bottom":rr(e,0,-a);break;case"top-left":rr(e,-o,a);break;case"bottom-left":rr(e,-o,-a);break;case"top-right":rr(e,o,a);break;case"bottom-right":rr(e,o,-a)}return b_(t,r,e),t}}();function VEe(e,t,r){return Or(e,t),e.rotation+=r,e}function bhe(e,t,r){return Or(e,t),e.rotation=r,e}const _he=function(){const e=vt();return function(t,r,i,n,s){return Or(t,r),isNaN(i)||i===0||(X7(e,n,r,s),t.scale=r.scale*i,eU(e,e,t,s),b_(t,t,rr(e,e[0]-n[0],n[1]-e[1]))),t}}();function CL(e,t,r){return Or(e,t),e.scale=r,e}const Q7=function(){const e=vt();return function(t,r,i,n,s,o){return Or(t,r),isNaN(i)||i===0||(X7(e,s,r,o),t.scale=r.scale*i,t.rotation+=n,eU(e,e,t,o),b_(t,t,rr(e,e[0]-s[0],s[1]-e[1]))),t}}(),UEe=function(){const e=vt(),t=vt();return function(r,i,n,s,o,a,u){return J7(t,a,u),C7(e,o,t),s?Q7(r,i,n,s,e,a):_he(r,i,n,e,a)}}(),X7=function(){const e=Go();return function(t,r,i,n){return Rs(t,r,dhe(e,i,n,1))}}(),eU=function(){const e=Go();return function(t,r,i,n){return Rs(t,r,nO(e,i,n,1))}}(),b_=function(){const e=vt(),t=Go();return function(r,i,n){Or(r,i);const s=Th(i),o=r.targetGeometry;return z7(t,rO(i)),Qk(t,t,o0(s,s)),Rs(e,n,t),o.x+=e[0],o.y+=e[1],r}}();function tU(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function She(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function $he(e,t,r,i,n,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function xhe(e,t){return new Float32Array(e,t,6)}function rU(e,t,r,i){const n=t[i],s=t[i+1];e[i]=r[0]*n+r[2]*s+r[4],e[i+1]=r[1]*n+r[3]*s+r[5]}function The(e,t,r,i=0,n=0,s=2){const o=n||t.length/s;for(let a=i;a<o;a++)rU(e,t,r,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:She,create:tU,createView:xhe,fromValues:$he,transform:rU,transformMany:The},Symbol.toStringTag,{value:"Module"}));function Mhe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Ehe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function iU(e,t,r,i,n,s,o,a,u,c){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=u,e[8]=c,e}function nU(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ihe(e,t){if(e===t){const r=t[1],i=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function khe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],f=h*o-a*c,m=-h*s+a*u,y=c*s-o*u;let g=r*f+i*m+n*y;return g?(g=1/g,e[0]=f*g,e[1]=(-h*i+n*c)*g,e[2]=(a*i-n*o)*g,e[3]=m*g,e[4]=(h*r-n*u)*g,e[5]=(-a*r+n*s)*g,e[6]=y*g,e[7]=(-c*r+i*u)*g,e[8]=(o*r-i*s)*g,e):null}function Ohe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8];return e[0]=o*h-a*c,e[1]=n*c-i*h,e[2]=i*a-n*o,e[3]=a*u-s*h,e[4]=r*h-n*u,e[5]=n*s-r*a,e[6]=s*c-o*u,e[7]=i*u-r*c,e[8]=r*o-i*s,e}function Phe(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8];return t*(c*s-o*u)+r*(-c*n+o*a)+i*(u*n-s*a)}function sO(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],f=t[8],m=r[0],y=r[1],g=r[2],v=r[3],w=r[4],b=r[5],_=r[6],$=r[7],T=r[8];return e[0]=m*i+y*o+g*c,e[1]=m*n+y*a+g*h,e[2]=m*s+y*u+g*f,e[3]=v*i+w*o+b*c,e[4]=v*n+w*a+b*h,e[5]=v*s+w*u+b*f,e[6]=_*i+$*o+T*c,e[7]=_*n+$*a+T*h,e[8]=_*s+$*u+T*f,e}function kM(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],f=t[8],m=r[0],y=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=u,e[6]=m*i+y*o+c,e[7]=m*n+y*a+h,e[8]=m*s+y*u+f,e}function sU(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],f=t[8],m=Math.sin(r),y=Math.cos(r);return e[0]=y*i+m*o,e[1]=y*n+m*a,e[2]=y*s+m*u,e[3]=y*o-m*i,e[4]=y*a-m*n,e[5]=y*u-m*s,e[6]=c,e[7]=h,e[8]=f,e}function Che(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function Ahe(e,t,r){const i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function Rhe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Lhe(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Nhe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Fhe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Dhe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,u=n+n,c=r*o,h=i*o,f=i*a,m=n*o,y=n*a,g=n*u,v=s*o,w=s*a,b=s*u;return e[0]=1-f-g,e[3]=h-b,e[6]=m+w,e[1]=h+b,e[4]=1-c-g,e[7]=y-v,e[2]=m-w,e[5]=y+v,e[8]=1-c-f,e}function jhe(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],u=t[8],c=t[9],h=t[10],f=h*o-a*c,m=-h*s+a*u,y=c*s-o*u,g=r*f+i*m+n*y;if(!g)return null;const v=1/g;return e[0]=f*v,e[1]=(-h*i+n*c)*v,e[2]=(a*i-n*o)*v,e[3]=m*v,e[4]=(h*r-n*u)*v,e[5]=(-a*r+n*s)*v,e[6]=y*v,e[7]=(-c*r+i*u)*v,e[8]=(o*r-i*s)*v,e}function zhe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],w=t[14],b=t[15],_=r*a-i*o,$=r*u-n*o,T=r*c-s*o,E=i*u-n*a,I=i*c-s*a,C=n*c-s*u,L=h*v-f*g,H=h*w-m*g,V=h*b-y*g,Y=f*w-m*v,ee=f*b-y*v,Te=m*b-y*w;let oe=_*Te-$*ee+T*Y+E*V-I*H+C*L;return oe?(oe=1/oe,e[0]=(a*Te-u*ee+c*Y)*oe,e[1]=(u*V-o*Te-c*H)*oe,e[2]=(o*ee-a*V+c*L)*oe,e[3]=(n*ee-i*Te-s*Y)*oe,e[4]=(r*Te-n*V+s*H)*oe,e[5]=(i*V-r*ee-s*L)*oe,e[6]=(v*C-w*I+b*E)*oe,e[7]=(w*T-g*C-b*$)*oe,e[8]=(g*I-v*T+b*_)*oe,e):null}function Vhe(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Uhe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Ghe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function qhe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function oU(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function Bhe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function Hhe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function Whe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Zhe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8],f=t[0],m=t[1],y=t[2],g=t[3],v=t[4],w=t[5],b=t[6],_=t[7],$=t[8],T=Zr();return Math.abs(r-f)<=T*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-m)<=T*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(n-y)<=T*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(s-g)<=T*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-v)<=T*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-w)<=T*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-b)<=T*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-_)<=T*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(h-$)<=T*Math.max(1,Math.abs(h),Math.abs($))}function Jhe(e){const t=Zr(),r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8];return Math.abs(1-(r*r+s*s+u*u))<=t&&Math.abs(1-(i*i+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const Khe=sO,Yhe=oU;Object.freeze(Object.defineProperty({__proto__:null,add:qhe,adjoint:Ohe,copy:Ehe,determinant:Phe,equals:Zhe,exactEquals:Whe,frob:Ghe,fromMat2d:Fhe,fromMat4:Mhe,fromQuat:Dhe,fromRotation:Lhe,fromScaling:Nhe,fromTranslation:Rhe,identity:nU,invert:khe,isOrthoNormal:Jhe,mul:Khe,multiply:sO,multiplyScalar:Bhe,multiplyScalarAndAdd:Hhe,normalFromMat4:zhe,normalFromMat4Legacy:jhe,projection:Vhe,rotate:sU,scale:Che,scaleByVec2:Ahe,set:iU,str:Uhe,sub:Yhe,subtract:oU,translate:kM,transpose:Ihe},Symbol.toStringTag,{value:"Module"}));function qv(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function Qhe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Xhe(e,t,r,i,n,s,o,a,u){const c=new Float32Array(9);return c[0]=e,c[1]=t,c[2]=r,c[3]=i,c[4]=n,c[5]=s,c[6]=o,c[7]=a,c[8]=u,c}function efe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:Qhe,create:qv,createView:efe,fromValues:Xhe},Symbol.toStringTag,{value:"Module"}));function aU(){return new Float32Array(2)}function tfe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function sh(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function rfe(e,t){return new Float32Array(e,t,2)}function lU(){return aU()}function uU(){return sh(1,1)}function cU(){return sh(1,0)}function dU(){return sh(0,1)}const ife=lU(),nfe=uU(),sfe=cU(),ofe=dU();Object.freeze(Object.defineProperty({__proto__:null,ONES:nfe,UNIT_X:sfe,UNIT_Y:ofe,ZEROS:ife,clone:tfe,create:aU,createView:rfe,fromValues:sh,ones:uU,unitX:cU,unitY:dU,zeros:lU},Symbol.toStringTag,{value:"Module"}));function afe(e){return e instanceof Float32Array&&e.length>=2}function lfe(e){return Array.isArray(e)&&e.length>=2}function s2(e){return afe(e)||lfe(e)}var OM;const ro=[0,0];let Na=OM=class extends j{constructor(e){super(e),this._viewpoint2D={center:vt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Be,this.id=0,this.inverseTransform=Go(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Go(),this.transformNoRotation=Go(),this.displayMat3=qv(),this.displayViewMat3=qv(),this.viewMat3=qv(),this.viewMat2d=tU(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=Or(r,e.viewpoint),this._set("size",Np(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new OM({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return s2(t)?Rs(e,t,this.inverseTransform):(ro[0]=t,ro[1]=r,Rs(e,ro,this.inverseTransform))}toScreen(e,t,r){return s2(t)?Rs(e,t,this.transform):(ro[0]=t,ro[1]=r,Rs(e,ro,this.transform))}toScreenNoRotation(e,t,r){return s2(t)?Rs(e,t,this.transformNoRotation):(ro[0]=t,ro[1]=r,Rs(e,ro,this.transformNoRotation))}wrapMapCoordinate(e,t){Np(e,t);const[r]=t,[i]=this.center,{extent:n,spatialReference:s}=this;let{xmin:o,xmax:a}=n;if(s.isWrappable){const u=Y7(s)/2;o=Math.max(o,i-u),a=Math.min(a,i+u)}return(r<o||r>a)&&(e[0]=eO(r,i,s)),e}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,n=this._get("size");return iO(e,r,n,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new Xn({targetGeometry:new ge(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!s||!t||!r)return;this.resolution=Th(o),this.rotation=i,this.scale=r,this.spatialReference=t,Np(this.center,e);const a=s[0]!==0?2/s[0]:0,u=s[1]!==0?-2/s[1]:0;iU(this.displayMat3,a,0,0,0,u,0,-1,1,1);const c=nU(this.viewMat3),h=sh(s[0]/2,s[1]/2),f=sh(-s[0]/2,-s[1]/2),m=XI(i);kM(c,c,h),sU(c,c,m),kM(c,c,f),sO(this.displayViewMat3,this.displayMat3,c);const y=Xk(this.viewMat2d,h);return v_(y,y,m),xy(y,y,f),uhe(this.extent,o,s),nO(this.transform,o,s,n),Yk(this.inverseTransform,this.transform),mhe(this.transformNoRotation,o,s,n),this.worldScreenWidth=yhe(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};l([d({readOnly:!0})],Na.prototype,"id",void 0),l([d({value:1,json:{write:!0}})],Na.prototype,"pixelRatio",null),l([d({json:{write:!0}})],Na.prototype,"size",null),l([d()],Na.prototype,"spatialReference",void 0),l([d({type:Xn,json:{write:!0}})],Na.prototype,"viewpoint",null),Na=OM=l([x("esri.views.2d.ViewState")],Na);const AL=Na;var PM,CM;let Lo=PM=class extends le{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new PM({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([d()],Lo.prototype,"left",void 0),l([d()],Lo.prototype,"top",void 0),l([d()],Lo.prototype,"right",void 0),l([d()],Lo.prototype,"bottom",void 0),Lo=PM=l([x("esri.views.2d.PaddedViewState.Padding")],Lo);let Id=CM=class extends AL{constructor(...e){super(...e),this.paddedViewState=new AL,this._updateContent=(()=>{const t=vt();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const n=this.paddedViewState;rr(t,i.left+i.right,i.top+i.bottom),$y(t,r,t),Np(n.size,t);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(he(()=>[this.size,this.padding],()=>this._updateContent(),Pl)),this.padding=new Lo,this.size=[0,0]}set padding(e){this._set("padding",e||new Lo)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;const t=this._viewpoint2D;if(this._get("padding")){const r=e.clone();vhe(r,e,this._get("size"),this._get("padding"));const i=r.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=r.rotation,t.scale=r.scale,t.spatialReference=i.spatialReference}else{const r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}}clone(){return new CM({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([d()],Id.prototype,"paddedViewState",void 0),l([d({type:Lo})],Id.prototype,"padding",null),l([d()],Id.prototype,"viewpoint",null),Id=CM=l([x("esri.views.2d.PaddedViewState")],Id);const oO=Id;function Yu(e,t,r,i){const n=3*e,s=3*(r-e)-n,o=1-n-s,a=3*t,u=3*(i-t)-a,c=1-a-u;function h(g){return((o*g+s)*g+n)*g}function f(g){return((c*g+u)*g+a)*g}function m(g){return(3*o*g+2*s)*g+n}function y(g,v){let w,b,_,$,T,E;for(_=g,E=0;E<8;E++){if($=h(_)-g,Math.abs($)<v)return _;if(T=m(_),Math.abs(T)<1e-6)break;_-=$/T}if(w=0,b=1,_=g,_<w)return w;if(_>b)return b;for(;w<b;){if($=h(_),Math.abs($-g)<v)return _;g>$?w=_:b=_,_=.5*(b-w)+w}return _}return function(g,v=1e-6){return f(y(g,v))}}const ufe=/^cubic-bezier\((.*)\)/,Os={};function cfe(e){let t=Os[e]||null;if(!t){const r=ufe.exec(e);if(r){const i=r[1].split(",").map(n=>parseFloat(n.trim()));i.length!==4||i.some(n=>isNaN(n))||(t=Yu.apply(Yu,i))}}return t}Os.ease=Yu(.25,.1,.25,1),Os.linear=Yu(0,0,1,1),Os.easeIn=Os["ease-in"]=Yu(.42,0,1,1),Os.easeOut=Os["ease-out"]=Yu(0,0,.58,1),Os.easeInOut=Os["ease-in-out"]=Yu(.42,0,.58,1);let RL=class{constructor(t){this._view=t,this.viewpoint=new Xn({targetGeometry:new ge,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,r]=this._view.size;return Math.sqrt(t*t+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return K7(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotateAtZoom(t){return this.size/2}compareTo(t,r){r.pan=N6(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=Wb(i),r.sourceZoom=this.scale,r.targetZoom=t.scale}interpolate(t,r,i){const{pan:n,rotate:s,zoom:o,zoomOffset:a}=i,{center:u}=this;u.spatialReference=t.center.spatialReference,u.x=bf(t.center.x,r.center.x,n),u.y=bf(t.center.y,r.center.y,n),this.viewpoint.scale=bf(t.scale,r.scale+a,o);let c=t.rotation;const h=r.rotation;Math.abs(h-c)>=180&&(c+=360*(c<h?1:-1)),this.viewpoint.rotation=bf(c,h,s)}copyFrom(t){Or(this.viewpoint,t.viewpoint),this._view=t.view}};const pU=e=>e*e,dfe=e=>1-pU(1-e),pfe=e=>2**(10*(e-1)),hfe=e=>1-pfe(1-e);function ffe(e){const t=2*(e-Math.sqrt((e-1)*e)),r=t/2/e;return i=>i<r?e*i*i:t*i-t+1}function mfe(e,t){return(r,i)=>r<t?t*e(r/t,i):1-e((1-r)/(1-t),i)*(1-t)}const LL=mfe(ffe(1),.5);let yfe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const Ty={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},hU={...Ty,maxDuration:4e3};let gfe=class fU{constructor(t){this._createCamera=t,this.compared=new yfe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:Ty.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new fU(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,r,i){this.source!==t&&this.source.copyFrom(t),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow!=null?i.desiredScreenFlow:Ty.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const r=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Zr()}get hasFov(){return Math.abs(this.compared.fov)>Zr()}get hasRotate(){return this.compared.rotate>Zr()}},vfe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},wfe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,r)=>t+r.time,0)}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),t*=this.time;let i=0,n=0;const s=this.definition,o=this.segments.reduce((a,u)=>a||u.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const u=this.segments[a],c=u.definition;if(t<=u.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(u,u.time===0?0:t/u.time,r),s.hasPan&&!isNaN(r.pan)&&isFinite(s.compared.pan)?r.pan=(i+c.compared.pan*r.pan)/s.compared.pan:r.pan=1,s.hasRotate&&!isNaN(r.rotate)&&isFinite(s.compared.rotate)?r.rotate=(n+c.compared.rotate*r.rotate)/s.compared.rotate:r.rotate=1,o&&!isNaN(r.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:h,targetZoom:f}=c.compared,m=r.zoom*(f-h)+h,y=this.segments[0].definition.compared.sourceZoom,g=this.segments[this.segments.length-1].definition.compared.targetZoom,v=Math.abs(f-y)>Math.abs(h-y)?f:h;r.zoomOffset=v-g,r.zoom=(m-y)/(v-y)}else r.zoom=1;return r}t-=u.time,i+=c.compared.pan,n+=c.compared.rotate}}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i)}},o2=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,r=t.compared,i=r.sourceZoom,n=r.targetZoom;this._zoomSign=i>n?1:-1,this._panPixelsAtSource=r.pan*t.source.pixelsPerPanAtZoom(i);const s=(t.source.pixelsPerRotateAtZoom(i)+t.target.pixelsPerRotateAtZoom(n))/2;this._rotatePixels=r.rotate*s}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:n,hasRotate:s}=this.definition;let o=0,a=0;i&&(n&&(o=(r/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(t/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const u=this.definition.desiredPixelFlow;if(i&&n&&s){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*u,this._panPixelFlow=a/c*u,this._rotatePixelFlow=o/c*u}else if(i&&n){const c=1+o;this._zoomPixelFlow=o/c*u,this._panPixelFlow=1/c*u}else if(i&&s){const c=1+a;this._zoomPixelFlow=a/c*u,this._rotatePixelFlow=1/c*u}else if(n&&s){const c=this._panPixelsAtSource/this._rotatePixels,h=1+c;this._panPixelFlow=c/h*u,this._rotatePixelFlow=1/h*u}else n?this._panPixelFlow=u:i?this._zoomPixelFlow=u:s&&(this._rotatePixelFlow=u);this._time=this.rotateTime??this.zoomTime??this.panTime??this.fovTime??0}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:null}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:null}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/bfe:null}get panTime(){if(this.definition.hasPan){if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=t*this._panPixelsAtSource;return Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-t-r)/(i-r)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+t*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*t*this._time)-1))/(r*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),r.zoom=this._interpolateComponentsZoom(t),r.pan=this._interpolateComponentsPan(t),r.rotate=this._interpolateComponentsRotate(t),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(t)}};const bfe=Wb(90);function _fe(e,t,r){const i=t-e.compared.sourceZoom,n=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(r.ascensionFactor*Math.LN2*e.compared.pan+n)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*n)}function Sfe(e,t,r){const i=1/t,n=Math.log(e.compared.sourceZoom*i),s=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,u=1/a,c=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*s*o*u*c-e.halfWindowSize*n*s*o*u+e.halfWindowSize*n*s*o*c/(a*a)}function $fe(e,t,r){const i=t-e.compared.sourceZoom,n=1/i,s=1/t,o=Math.log(e.compared.sourceZoom*s),a=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*s*a+2*n*o+2*s-2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function xfe(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function Tfe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Mfe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Efe(e,t,r){return-e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function Ife(e,t,r){return e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function kfe(e,t,r){return-2*e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function Ofe(e,t,r){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function Pfe(e,t,r){const i=Math.log(t/e.compared.targetZoom),n=1/e.desiredPixelFlow,s=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,u=(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*n*s*a+e.halfWindowSize*i*n*s*u/(o*o)+e.halfWindowSize*n*s*a*u/t}function Cfe(e,t,r){const i=t-e.compared.targetZoom,n=1/i,s=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+r.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*s*a-2*n*o+2*s+2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Afe(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function Rfe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Lfe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Nfe(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const r=Math.LN2*e.compared.pan,i=t,n=e.halfWindowPanAtZoom(i),s=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*n);return e.compared.sourceZoom<=e.compared.targetZoom?s*(r-n):s*(r+n)}function Ffe(e,t){let r=Dfe(e,t);const i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},n=i.ascensionFactor===0,s=i.descensionFactor===0,o=n?xfe:_fe,a=n?Tfe:Sfe,u=n?Mfe:$fe,c=s?Afe:Ofe,h=s?Rfe:Pfe,f=s?Lfe:Cfe,m=T=>o(e,T,i)+Efe(e,T,i)+c(e,T,i),y=T=>a(e,T,i)+Ife(e,T,i)+h(e,T,i),g=T=>u(e,T,i)+kfe(e,T,i)+f(e,T,i);let v=m(r);const w=Nfe(e);let b;const _=t.maximumIterations||20,$=t.maximumDistance!=null?t.maximumDistance:1/0;for(b=0;b<_;b++){const T=t.desiredSlope??1e-6;let E=y(r);Math.abs(E)>T&&(E+=T);const I=E/g(r);if(isNaN(I)||r>=$&&I<0){if(!isFinite($))return null;r=$,v=m(r);break}if(r-=I,r<e.compared.sourceZoom||r<e.compared.targetZoom)return null;const C=m(r);if(Math.abs(C-v)/v<=.005)break;v=C}return v>w*(1-.3)||r<e.compared.sourceZoom||r<e.compared.targetZoom?null:r}function Dfe(e,t){const r=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<r?t.maximumDistance!=null?r+(t.maximumDistance-r)/2:1.5*r:t.maximumDistance?Math.min(t.maximumDistance,i):i}let jfe=class extends wfe{constructor(t,r){super(),this._preallocSegments=[new o2,new o2,new o2],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,r)}update(t,r){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const i=r!=null&&r.apex?Ffe(t,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r==null?void 0:r.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i),t===this._ascensionSegment?i.zoom=dfe(i.zoom):t===this._descensionSegment&&(i.zoom=pU(i.zoom))}_updateWithApex(t,r){const[i,n,s]=this._preallocSegments,o=(r==null?void 0:r.ascensionFactor)??.5,a=Math.min(1-o,(r==null?void 0:r.ascensionFactor)!=null&&r.descensionFactor!=null?r.descensionFactor:.5),u=1-o-a;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),u>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=t,n.definition.compared.targetZoom=t,n.definition.compared.pan=this.definition.compared.pan*u,n.definition.compared.rotate=this.definition.compared.rotate*u,n.definition.segmentStart=i.definition.segmentEnd,n.definition.segmentEnd=i.definition.segmentEnd+u,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=t,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+u,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const zfe=new vfe;let Vfe=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=LL,this.definition=new gfe(t),this.path=new jfe}update(t,r,i){this.definition.update(t,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(VK(isFinite(this.path.time)?this.path.time:0),i),this._easing=i.easing??(this._time>=1e3?LL:hfe)}cameraAt(t,r){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const i=this.path.interpolateComponentsAt(t,zfe);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(t){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(t,this._time)-r)/(i-r)}_applyTimeSettings(t,r){const i=r.speedFactor!=null?r.speedFactor:1,n=r.minDuration??Ty.minDuration/i,s=r.maxDuration??Ty.maxDuration/i;return t=r.duration!=null?r.duration:Math.min(Math.max(t/i,n),s)}};const NL=2e3,Ufe=64;let Gfe=class{constructor(t){this._view=t,this._animation=new Vfe(()=>new RL(this._view)),this._current=new RL(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,r,i={}){Or(this._current.viewpoint,t),Or(this._source.viewpoint,t),Or(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(t,r){this._animation.cameraAt(r,this._current),Or(t,this._current.viewpoint)}},kd=class extends le{constructor(t){super(t),this._animation=null,this._destinationViewState=new oO,this.updateFunction=null,this.easing=Os.ease,this.viewpoint=new Xn({targetGeometry:new ge,scale:0,rotation:0}),this._updateTask=Zp({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new Gfe(t.view)}destroy(){this._updateTask=pt(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,r,i){this.stop();const n=this.viewpoint;Or(n,r);const s=(typeof(i==null?void 0:i.easing)=="string"?cfe(i.easing):i==null?void 0:i.easing)||this.easing,o=t.target;this._transition.update(this.viewpoint,o,{apex:{maximumDistance:Math.min(Math.min(r.scale,o.scale)*Ufe,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i==null?void 0:i.duration,maxDuration:(i==null?void 0:i.animationMode)==="auto"?1/0:(i==null?void 0:i.maxDuration)??hU.maxDuration,speedFactor:i==null?void 0:i.speedFactor,easing:typeof s=="function"?u=>s(u):void 0}),(i==null?void 0:i.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=o,qfe(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,o,{duration:0}));const a=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;const i=new MM({target:t.clone()}),n=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var i,n;const r=this.animation;if(r&&r.state!==MM.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(i=this.animation)==null||i.update(this.viewpoint);else{const s=performance.now()-this._startTime,o=this._transition.duration,a=o>0?s/o:1,u=a>=1;this._transition.applyRatio(this.viewpoint,a),u&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function qfe(e,t,r,i){if((t==null?void 0:t.duration)!=null)return!0;const{time:n,isLinear:s}=e,o=(t==null?void 0:t.speedFactor)||1,a=(t==null?void 0:t.maxDuration)??hU.maxDuration/o;if(R("esri-goto-debug")&&(console.log("speed factor:",o),console.log("adjusted duration:		",n),console.log("adjusted max duration:	",a),console.log("is linear:",s)),n>a)return R("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${a/1e3}s`),!1;if(s){const c=vt(),h=pr(...i.toScreen(c,...r.center)),f=pr(...r.toScreen(c,...i.center)),m=f!=null&&f.x>-(1.5-.5)*r.size[0]&&f.x<(1.5+.5)*r.size[0]&&f.y>-(1.5-.5)*r.size[1]&&f.y<(1.5+.5)*r.size[1],y=h!=null&&h.x>-(1.5-.5)*i.size[0]&&h.x<(1.5+.5)*i.size[0]&&h.y>-(1.5-.5)*i.size[1]&&h.y<(1.5+.5)*i.size[1];if(R("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,m),console.log(`start is within ${1.5} screens at dest view:`,y)),n>NL/o&&!m&&!y)return R("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${NL/1e3/o}s, or
  - shorter than ${a/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${a/1e3}s and the start point is close enough to the destination screen`),!1}return!0}l([d()],kd.prototype,"easing",void 0),l([d()],kd.prototype,"view",void 0),l([d()],kd.prototype,"viewpoint",void 0),kd=l([x("esri.views.2d.AnimationManager")],kd);const Bfe=kd;let Hfe=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation&&!("then"in this.view.animation.target)&&(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=()=>{var o,a;if(this._updateRequested=!1,(o=this.view)==null?void 0:o.destroyed)return;const{allLayerViews:r,graphicsView:i,labelManager:n,state:{id:s}}=this.view;r.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==s&&(n.viewChange(),n.lastUpdateId=s),n.updateRequested&&n.processUpdate(this._updateParameters)),i!=null&&(i.lastUpdateId!==s&&(i.viewChange(),i.lastUpdateId=s),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((a=this._frameTaskHandle)==null||a.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new oO,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=he(()=>t.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=Zp(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var n;if(!t.attached)return void this.requestUpdate();const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((n=t.layerViews)==null||n.forEach(this._updateLayerView,this))}},Bv=class extends le{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,r){if(!t)return void z.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new MM;this.view.animation=i,await rk(()=>this.view.ready,r);const n={...r,animate:(r==null?void 0:r.animate)??!g7(),animationMode:(r==null?void 0:r.animationMode)??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:u,constraints:c,padding:h,allLayerViews:f}=this.view,m=ahe(t,{extent:s,spatialReference:o,size:a,viewpoint:u,constraints:c,padding:h,allLayerViews:f,pickClosestTarget:(r==null?void 0:r.pickClosestTarget)??!0});return i==null||i.update(m),this._gotoTask={},n.animate?this._gotoAnimated(m,n):this._gotoImmediate(m,n)}_gotoImmediate(t,r){const i=this._gotoTask,n=this.view.animation,s=t.then(o=>{if(ht(r),i!==this._gotoTask)throw new N("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(i,n,s,r)}_gotoAnimated(t,r){const i=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=t.then(o=>{if(ht(r),i!==this._gotoTask)throw new N("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,r),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,n,s,r)}_cancellableGoTo(t,r,i,n){const s=()=>t===this._gotoTask;return bj(i,n).finally(()=>{s()&&(r.done||r.stop())})}};l([d({constructOnly:!0})],Bv.prototype,"view",void 0),Bv=l([x("esri.views.2d.GoToManager")],Bv);function Je(){return Promise.all([J(()=>import("./webglDeps-wl8dfZuV.js"),__vite__mapDeps([133,75,74,45,134,135])),J(()=>import("./mapViewDeps-Bymes7ld.js"),__vite__mapDeps([136,76,77,23,78,73,70,79,72,74,45,75,46,80,40,81,137,110,84,85,86,87,138,139,135,95,119,118,25,26,117,133,134,140,90,141,71,32,29,20,142,143,144,112,145,146,147,61,148,88,149,83,150,151,152,153,154,155,156]))])}const of=()=>Je().then(()=>J(()=>import("./TileLayerView2D-DImKaVrP.js"),__vite__mapDeps([157,78,76,77,23,73,70,79,72,74,45,75,46,80,40,81,110,138,139,135,95,119,118,86,25,26,117,140,90,141,71,32,29,20,61,149,87,84,85,143,144,112,150,151,158,159,155,160,126,161,153,154,162,163,164,165,166,167]))),od=()=>Je().then(()=>J(()=>import("./FeatureLayerView2D-CU7qDH2E.js").then(e=>e.F),__vite__mapDeps([168,138,81,70,45,74,25,23,26,169,160,126,154,76,77,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,90,82,137,110,149,87,170,165,167,162]))),FL={"base-dynamic":()=>Je().then(()=>J(()=>import("./BaseDynamicLayerView2D-C53nMHSD.js"),__vite__mapDeps([171,172,139,70,72,73,74,45,75,46,135,95,138,81,119,118,86,25,23,26,160,126,173,159,162]))),"base-tile":of,"bing-maps":of,catalog:()=>Je().then(()=>J(()=>import("./CatalogLayerView2D-CxHb8IQa.js"),__vite__mapDeps([174,160,138,81,70,45,74,126]))),"catalog-dynamic-group":()=>Je().then(()=>J(()=>import("./CatalogDynamicGroupLayerView2D-DXJ-VGB5.js"),__vite__mapDeps([175,160,138,81,70,45,74,126]))),"catalog-footprint":()=>Je().then(()=>J(()=>import("./CatalogFootprintLayerView2D-DsFyOiVm.js"),__vite__mapDeps([176,168,138,81,70,45,74,25,23,26,169,160,126,154,76,77,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,90,82,137,110,149,87,170,165,167,162]))),csv:od,"geo-rss":()=>Je().then(()=>J(()=>import("./GeoRSSLayerView2D-B8B1axyn.js"),__vite__mapDeps([177,160,138,81,70,45,74,126,152,153,154,76,77,23,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,25,26,149,87,150,71,32,29,20,151]))),feature:od,geojson:od,graphics:()=>Je().then(()=>J(()=>import("./GraphicsLayerView2D-N3AtYsNd.js"),__vite__mapDeps([178,81,160,138,70,45,74,126,152,153,154,76,77,23,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,25,26,149,87,150,71,32,29,20,151,170]))),group:()=>Je().then(()=>J(()=>import("./GroupLayerView2D-BaSyzdRt.js"),__vite__mapDeps([179,160,138,81,70,45,74,126]))),imagery:()=>Je().then(()=>J(()=>import("./ImageryLayerView2D-BogRHmlh.js"),__vite__mapDeps([180,181,75,74,45,135,46,101,139,70,72,73,95,138,81,119,118,86,25,23,26,160,126,150,76,77,78,79,80,40,71,32,29,20,149,87,151,161,153,154,155,172,159,173,104,169,167,162]))),"imagery-tile":()=>Je().then(()=>J(()=>import("./ImageryTileLayerView2D-DysdlJ6j.js"),__vite__mapDeps([182,183,181,75,74,45,135,46,101,139,70,72,73,95,138,81,119,118,86,25,23,26,160,126,184,155,185,104,169,167,162]))),kml:()=>Je().then(()=>J(()=>import("./KMLLayerView2D--z9l6aWy.js"),__vite__mapDeps([186,187,159,138,81,70,45,74,172,139,72,73,75,46,135,95,119,118,86,25,23,26,160,126,152,153,154,76,77,78,79,80,40,155,149,87,150,71,32,29,20,151,104,142,133,134,143,144,112,141,110,145,184]))),"knowledge-graph":()=>Je().then(()=>J(()=>import("./KnowledgeGraphLayerView2D-hXolP5tR.js"),__vite__mapDeps([188,160,138,81,70,45,74,126]))),"link-chart":()=>Je().then(()=>J(()=>import("./KnowledgeGraphLayerView2D-hXolP5tR.js"),__vite__mapDeps([188,160,138,81,70,45,74,126]))),"knowledge-graph-sublayer":od,"map-image":()=>Je().then(()=>J(()=>import("./MapImageLayerView2D-DZjyZCUK.js"),__vite__mapDeps([189,172,139,70,72,73,74,45,75,46,135,95,138,81,119,118,86,25,23,26,160,126,150,76,77,78,79,80,40,71,32,29,20,149,87,151,161,153,154,155,173,159,190,164,165,166,169,162,163,167]))),"map-notes":()=>Je().then(()=>J(()=>import("./MapNotesLayerView2D-BdKmyxmS.js"),__vite__mapDeps([191,81,160,138,70,45,74,126,152,153,154,76,77,23,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,25,26,149,87,150,71,32,29,20,151]))),media:()=>Je().then(()=>J(()=>import("./MediaLayerView2D-NtF_Li0w.js"),__vite__mapDeps([192,193,151,50,78,76,77,23,73,70,79,72,74,45,75,46,80,40,81,110,138,139,135,95,119,118,86,25,26,117,140,90,141,71,32,29,20,61,149,87,84,85,143,144,112,150,148,88,194,160,126]))),"ogc-feature":()=>Je().then(()=>J(()=>import("./OGCFeatureLayerView2D-BR4x78g4.js"),__vite__mapDeps([195,168,138,81,70,45,74,25,23,26,169,160,126,154,76,77,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,90,82,137,110,149,87,170,165,167,162]))),"open-street-map":of,"oriented-imagery":od,route:()=>Je().then(()=>J(()=>import("./RouteLayerView2D-CKCE8W-v.js"),__vite__mapDeps([196,197,81,160,138,70,45,74,126,152,153,154,76,77,23,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,25,26,149,87,150,71,32,29,20,151]))),stream:()=>Je().then(()=>J(()=>import("./StreamLayerView2D-CQJwS01S.js"),__vite__mapDeps([198,168,138,81,70,45,74,25,23,26,169,160,126,154,76,77,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,90,82,137,110,149,87,170,165,167,162]))),"subtype-group":()=>Je().then(()=>J(()=>import("./SubtypeGroupLayerView2D-BdcZEYmS.js"),__vite__mapDeps([199,168,138,81,70,45,74,25,23,26,169,160,126,154,76,77,78,73,79,72,75,46,80,40,155,139,135,95,119,118,86,90,82,137,110,149,87,170,165,167,162]))),tile:of,"vector-tile":()=>Je().then(()=>J(()=>import("./VectorTileLayerView2D-CsIcPt03.js"),__vite__mapDeps([200,117,79,45,74,61,147,110,87,78,75,135,118,139,70,72,73,46,95,138,81,119,86,25,23,26,155,28,120,121,160,126]))),video:()=>Je().then(()=>J(()=>import("./VideoLayerView2D-t6MasYUr.js"),__vite__mapDeps([201,202,194,95,139,70,72,73,74,45,75,46,135,138,81,119,118,86,25,23,26,160,126,152,153,154,76,77,78,79,80,40,155,149,87,150,71,32,29,20,151]))),wcs:()=>Je().then(()=>J(()=>import("./ImageryTileLayerView2D-DysdlJ6j.js"),__vite__mapDeps([182,183,181,75,74,45,135,46,101,139,70,72,73,95,138,81,119,118,86,25,23,26,160,126,184,155,185,104,169,167,162]))),"web-tile":of,wfs:od,wms:()=>Je().then(()=>J(()=>import("./WMSLayerView2D-1yY9fGvs.js"),__vite__mapDeps([203,172,139,70,72,73,74,45,75,46,135,95,138,81,119,118,86,25,23,26,160,126,173,159,162,204,169]))),wmts:()=>Je().then(()=>J(()=>import("./WMTSLayerView2D-s-Mntcfp.js"),__vite__mapDeps([205,158,159,138,81,70,45,74,139,72,73,75,46,135,95,119,118,86,25,23,26,155,160,126,162]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Wfe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new N(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const DL={hasLayerViewModule:e=>FL[e.type]!=null,importLayerView:e=>{const t=FL[e.type];if(t==null)throw Wfe(e);return t(e)}};function Zfe(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let n=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],u=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const c of u)for(let h=0;h<c.length-1;h++){cie(a,i,c,h);const f=g_(i,a);f<n&&(n=f,s=a[0],o=a[1])}return{coordinate:new ge({x:s,y:o,spatialReference:r}),distance:n}}var AM;let Qu=AM=class extends wk(le){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Hl(this.geometry,this.spatialReference)}catch(e){return z.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Jy(this.normalizedGeometry,r):BI(this.normalizedGeometry,r))return e;const{coordinate:i}=Zfe(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){var e,t;return new AM({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};l([d({constructOnly:!0})],Qu.prototype,"geometry",void 0),l([d({readOnly:!0})],Qu.prototype,"normalizedGeometry",null),l([d({constructOnly:!0})],Qu.prototype,"spatialReference",void 0),Qu=AM=l([x("esri.views.2d.constraints.GeometryConstraint")],Qu);var RM;let Kf=RM=class extends wk(le){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new RM({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([d()],Kf.prototype,"enabled",void 0),l([d()],Kf.prototype,"rotationEnabled",void 0),Kf=RM=l([x("esri.views.2d.constraints.RotationConstraint")],Kf);const mU=Kf;var LM;let ri=LM=class extends wk(le){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:n,maxZoom:s}=this,o=-1,a=-1,u=!1,c=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!(t!=null&&t.length))return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map(h=>h.clone()),t.sort((h,f)=>f.scale-h.scale),t.forEach((h,f)=>h.level=f);for(const h of t)!u&&r>0&&r>=h.scale&&(o=h.level,u=!0),!c&&i>0&&i>=h.scale&&(a=e?e.level:-1,c=!0),e=h;n===-1&&(n=r===0?0:o),s===-1&&(s=i===0?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),n>s&&([n,s]=[s,n]),r=t[n].scale,i=t[s].scale,t.splice(0,n),t.splice(s-n+1,t.length),t.forEach((h,f)=>{this._lodByScale[h.scale]=h,this._scales[f]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,n=e.targetGeometry,s=t&&t.targetGeometry,o=i!==0&&e.scale<i,a=r!==0&&e.scale>r;if(o||a){const u=a?r:i;if(t&&s){const c=(u-t.scale)/(e.scale-t.scale);n.x=s.x+(n.x-s.x)*c,n.y=s.y+(n.y-s.y)*c}e.scale=u}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.floor(e),i=Math.ceil(e);return t[r]+(e-r)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],i===e)return n+this.effectiveMinZoom+1;if(r>e&&i<e)return n+this.effectiveMinZoom+1-(e-i)/(r-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new LM({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};l([d({readOnly:!0})],ri.prototype,"effectiveLODs",void 0),l([d({readOnly:!0})],ri.prototype,"effectiveMinZoom",void 0),l([d({readOnly:!0})],ri.prototype,"effectiveMaxZoom",void 0),l([d({readOnly:!0})],ri.prototype,"effectiveMinScale",void 0),l([d({readOnly:!0})],ri.prototype,"effectiveMaxScale",void 0),l([d()],ri.prototype,"lods",void 0),l([d()],ri.prototype,"minZoom",void 0),l([d()],ri.prototype,"maxZoom",void 0),l([d()],ri.prototype,"minScale",void 0),l([d()],ri.prototype,"maxScale",void 0),l([d()],ri.prototype,"snapToZoom",void 0),ri=LM=l([x("esri.views.2d.constraints.ZoomConstraint")],ri);const yU=ri,Jfe={base:null,key:"type",typeMap:{extent:Be,polygon:Xo}};let $t=class extends le{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new te}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,r,i;return`${(t=this._zoom)==null?void 0:t.uid}/${(r=this._rotation)==null?void 0:r.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _geometry(){var r,i;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((r=this.view)==null?void 0:r.constraintsInfo.spatialReference)===t.spatialReference?t:new Qu({geometry:this.geometry,spatialReference:(i=this.view)==null?void 0:i.constraintsInfo.spatialReference})}get _rotation(){return new mU({rotationEnabled:this.rotationEnabled})}get _zoom(){var u;const t=this._get("_zoom"),r=this.lods||((u=this.view)==null?void 0:u.constraintsInfo.lods),i=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===r&&t.minZoom===i&&t.maxZoom===n&&t.minScale===s&&t.maxScale===o&&t.snapToZoom===a?t:new yU({lods:r,minZoom:i,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(t){const r=this.effectiveMaxScale;return r===0||t>=r}canZoomOutTo(t){const r=this.effectiveMinScale;return r===0||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),this.customConstraints.forEach(i=>i.constrain(t,r)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(r=>{var i;return(i=r.applyPanConstraint)==null?void 0:i.call(r,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};l([d({readOnly:!0})],$t.prototype,"effectiveLODs",null),l([d({readOnly:!0})],$t.prototype,"effectiveMinScale",null),l([d({readOnly:!0})],$t.prototype,"effectiveMaxScale",null),l([d({readOnly:!0})],$t.prototype,"effectiveMinZoom",null),l([d({readOnly:!0})],$t.prototype,"effectiveMaxZoom",null),l([d({types:Jfe,value:null})],$t.prototype,"geometry",null),l([d({type:[Ya]})],$t.prototype,"lods",void 0),l([d()],$t.prototype,"minScale",void 0),l([d()],$t.prototype,"maxScale",void 0),l([d()],$t.prototype,"minZoom",void 0),l([d()],$t.prototype,"maxZoom",void 0),l([d()],$t.prototype,"rotationEnabled",void 0),l([d()],$t.prototype,"snapToZoom",void 0),l([d({type:te})],$t.prototype,"customConstraints",void 0),l([d()],$t.prototype,"view",void 0),l([d({readOnly:!0})],$t.prototype,"version",null),l([d({type:Qu,readOnly:!0})],$t.prototype,"_geometry",null),l([d({type:mU})],$t.prototype,"_rotation",null),l([d({readOnly:!0,type:yU})],$t.prototype,"_zoom",null),$t=l([x("esri.views.2d.MapViewConstraints")],$t);const gU=$t;let Fl=class Ru{static getId(t,r,i,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${n}`}constructor(t,r,i,n){this.set(t,r,i,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,n){this.set(t,r,i,n)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}containsChild(t){const r=t.level-this.level;return r>0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Ru(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,a,u]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(u)}else this.level=+t,this.row=+r,this.col=+i,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Ru(this.level-1,this.row>>1,this.col>>1,this.world)}getNeighborId(t,r){return`${this.level}/${this.row+r}/${this.col+t}/${this.world}`}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,n=this.world;return[new Ru(t,r,i,n),new Ru(t,r,i+1,n),new Ru(t,r+1,i,n),new Ru(t,r+1,i+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};Fl.pool=new Hc(Fl,null,null,25,50);function ya(e,t){return[e,t]}function iu(e,t,r){return e[0]=t,e[1]=r,e}function Kfe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}const kn=new Fl("0/0/0/0");let Yfe=class vU{static create(t,r,i=null){const n=mi(t.spatialReference),s=r.origin||ya(t.origin.x,t.origin.y),o=ya(t.size[0]*r.resolution,t.size[1]*r.resolution),a=ya(-1/0,-1/0),u=ya(1/0,1/0),c=ya(1/0,1/0);i!=null&&(iu(a,Math.max(0,Math.floor((i.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymax)/o[1]))),iu(u,Math.max(0,Math.floor((i.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymin)/o[1]))),iu(c,u[0]-a[0]+1,u[1]-a[1]+1));const{cols:h,rows:f}=r;let m,y,g,v;return!i&&h&&f&&(iu(a,h[0],f[0]),iu(u,h[1],f[1]),iu(c,h[1]-h[0]+1,f[1]-f[0]+1)),t.isWrappable?(m=ya(Math.ceil(Math.round((n.valid[1]-n.valid[0])/r.resolution)/t.size[0]),c[1]),y=ya(Math.floor((n.origin[0]-s[0])/o[0]),a[1]),g=ya(m[0]+y[0]-1,u[1]),v=!0):(y=a,g=u,m=c,v=!1),new vU(r.level,r.resolution,r.scale,s,a,u,c,o,y,g,m,v)}constructor(t,r,i,n,s,o,a,u,c,h,f,m){this.level=t,this.resolution=r,this.scale=i,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=u,this.worldStart=c,this.worldEnd=h,this.worldSize=f,this.wrap=m}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){kn.set(r);const n=i?kn.col:this.denormalizeCol(kn.col,kn.world),s=kn.row;return Kfe(t,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),t}getTileCoords(t,r,i=!1){kn.set(r);const n=i?kn.col:this.denormalizeCol(kn.col,kn.world);return Array.isArray(t)?iu(t,this.getXForColumn(n),this.getYForRow(kn.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(kn.row)),t}},My=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:r,colFrom:i,colTo:n}of this.spans)for(let s=i;s<=n;s++){const o=t.getWorldForColumn(s);yield new Fl(t.level,r,t.normalizeCol(s),o)}}forEach(t,r){const{spans:i,lodInfo:n}=this,{level:s}=n;if(i.length!==0)for(const{row:o,colFrom:a,colTo:u}of i)for(let c=a;c<=u;c++)t.call(r,s,o,n.normalizeCol(c),n.getWorldForColumn(c))}};My.pool=new Hc(My);let a2=class{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}};const Qe=new Fl("0/0/0/0");let Qfe=class wU{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,n]=t,[s,o]=r,a=s-i,u=o-n,c=u!==0?a/u:0,h=(Math.ceil(n)-n)*c,f=(Math.floor(n)-n)*c;return new wU(i,Math.floor(n),Math.ceil(o),c,a<0?h:f,a<0?f:h,a<0?s:i,a<0?i:s)}constructor(t,r,i,n,s,o,a,u){this.x=t,this.ymin=r,this.ymax=i,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=u}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const _i=[[0,0],[0,0],[0,0],[0,0]],Xfe=1e-6;let eme=class{constructor(t,r=null,i=t.lods[0].level,n=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=t.lods.filter(a=>a.level>=i&&a.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>Yfe.create(t,a,r));s.forEach((a,u)=>{this._infoByLevel[a.level]=o[u],this._infoByScale[a.scale]=o[u],this.scales[u]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){Qe.set(r);const n=this._infoByLevel[Qe.level];return n?n.getTileBounds(t,Qe,i):t}getTileCoords(t,r,i=!1){Qe.set(r);const n=this._infoByLevel[Qe.level];return n?n.getTileCoords(t,Qe,i):t}getTileCoverage(t,r=192,i=!0,n="closest"){if(!i&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=My.pool.acquire(s),a=this._wrap;let u,c,h,f=1/0,m=-1/0;const y=o.spans;_i[0][0]=_i[0][1]=_i[1][1]=_i[3][0]=-r,_i[1][0]=_i[2][0]=t.size[0]+r,_i[2][1]=_i[3][1]=t.size[1]+r;for(const b of _i)t.toMap(b,b),b[0]=s.getColumnForX(b[0]),b[1]=s.getRowForY(b[1]);const g=[];let v=3;for(let b=0;b<4;b++){if(_i[b][1]===_i[v][1]){v=b;continue}const _=Qfe.create(_i[b],_i[v]);f=Math.min(_.ymin,f),m=Math.max(_.ymax,m),g[_.ymin]===void 0&&(g[_.ymin]=[]),g[_.ymin].push(_),v=b}if(f==null||m==null||m-f>100)return null;let w=[];for(u=f;u<m;){g[u]!=null&&(w=w.concat(g[u])),c=1/0,h=-1/0;for(let b=w.length-1;b>=0;b--){const _=w[b];c=Math.min(c,_.getLeftCol()),h=Math.max(h,_.getRightCol())}if(c=Math.floor(c),h=Math.floor(h),u>=s.first[1]&&u<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const b=Math.floor(h/s.worldSize[0]);for(let _=Math.floor(c/s.worldSize[0]);_<=b;_++)y.push(new a2(u,Math.max(s.getFirstColumnForWorld(_),c),Math.min(s.getLastColumnForWorld(_),h)))}else y.push(new a2(u,c,h));else c>s.last[0]||h<s.first[0]||(c=Math.max(c,s.first[0]),h=Math.min(h,s.last[0]),y.push(new a2(u,c,h)));u+=1;for(let b=w.length-1;b>=0;b--){const _=w[b];_.ymax>=u?_.incrRow():w.splice(b,1)}}return o}getTileParentId(t){Qe.set(t);const r=this._infoByLevel[Qe.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(Qe,this._lodInfos[i],Qe),Qe.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){Qe.set(r);const i=this._infoByLevel[Qe.level],n=t.lodInfo;if(n.resolution>i.resolution){this._getTileIdAtLOD(Qe,n,Qe);const o=n.denormalizeCol(Qe.col,Qe.world);for(const a of t.spans)if(a.row===Qe.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<i.resolution){const[o,a,u,c]=t.spans.reduce((v,w)=>(v[0]=Math.min(v[0],w.row),v[1]=Math.max(v[1],w.row),v[2]=Math.min(v[2],w.colFrom),v[3]=Math.max(v[3],w.colTo),v),[1/0,-1/0,1/0,-1/0]),h=i.denormalizeCol(Qe.col,Qe.world),f=n.getColumnForX(i.getXForColumn(h)),m=n.getRowForY(i.getYForRow(Qe.row)),y=n.getColumnForX(i.getXForColumn(h+1))-1,g=n.getRowForY(i.getYForRow(Qe.row+1))-1;return!(f>c||y<u||m>a||g<o)}const s=n.denormalizeCol(Qe.col,Qe.world);return t.spans.some(o=>o.row===Qe.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const n=mi(this.tileInfo.spatialReference),s=-i*(n.valid[1]-n.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+Xfe)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((i,n)=>Math.abs(n-t)<Math.abs(i-t)?n:i,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,r,i){const n=this._infoByLevel[i.level];return t.set(i),r.resolution<n.resolution?null:(r.resolution===n.resolution||(t.level=r.level,t.col=Math.floor(i.col*n.resolution/r.resolution+.01),t.row=Math.floor(i.row*n.resolution/r.resolution+.01)),t)}},tme=class{constructor(t,r){this.item=t,this.controller=r,this.promise=null}},rme=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new zv,this._controllers=new zv,this._processingItems=new zv,this._pausedSignal=nV(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new Ow(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&r&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=pt(this._schedule),this._task=pt(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const n=new AbortController;let s=null;r&&(s=yn(r,()=>n.abort()));const o=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),c.reject(Ot())},a=()=>{u.remove(),s!=null&&s.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},u=vI(n.signal,o),c=ji();return this._deferreds.set(t,c),this._controllers.set(t,n),c.promise.then(a,a),this._queue.push(t),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var r;const t=this._queue.popLast();return t&&((r=this._deferreds.get(t))==null||r.reject(Ot("Removed from queue")),this._removeItem(t)),t}reset(){const t=[];this._processingItems.forEach(r=>t.push(r)),this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=dh(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let r;const i=new AbortController,n=new tme(t,i);this._processingItems.set(t,n);try{r=this.process(t,i.signal)}catch(s){this._processError(n,s)}Vl(r)?(n.promise=r,r.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,r)}get test(){}};function ime(e,t){return e.length=0,t.forEach(r=>e.push(r)),e}const l2=new Set,vg=[],ad=new Map,jL=[0,0];let Fa=class extends le{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:t,process:r,strategy:i}=this;this._queue=new rme({concurrency:t,process:(n,s)=>{const o=this._keyToItem.get(n);return r(o,{signal:s})},peeker:i==="scale-first"?n=>this._peekByScaleFirst(n):n=>this._peekByCenterFirst(n)})}destroy(){this.clear(),this._queue=nt(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const r=typeof t=="string"?t:t.id;return this.has(r)&&this._queue.isOngoing(r)}pause(){this._queue.pause()}push(t){const r=t.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),n=()=>{this._keyToItem.delete(r)};return this._keyToItem.set(r,t),i.then(n,n),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;const r=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;t.forEach(h=>{const f=this._keyToItem.get(h),m=this.tileInfoView.getTileScale(f.key);ad.has(m)||(ad.set(m,[]),i=Math.max(m,i),n=Math.min(m,n)),ad.get(m).push(f.key),l2.add(m)});let s=this.state.scale;ad.has(s)||(ime(vg,l2),vg.sort((h,f)=>h-f),s=vg.reduce((h,f)=>Math.abs(f-s)<Math.abs(h-s)?f:h,vg[0])),s=Math.min(s,i),s=Math.max(s,n);const o=ad.get(s),a=r.getClosestInfoForScale(s),u=a.getColumnForX(this.state.center[0]),c=a.getRowForY(this.state.center[1]);return o.sort((h,f)=>{const m=a.denormalizeCol(h.col,h.world),y=a.denormalizeCol(f.col,f.world);return Math.sqrt((u-m)*(u-m)+(c-h.row)*(c-h.row))-Math.sqrt((u-y)*(u-y)+(c-f.row)*(c-f.row))}),l2.clear(),ad.clear(),o[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;const r=this.tileInfoView,i=this.state.center;let n,s=Number.POSITIVE_INFINITY;return t.forEach(o=>{const a=this._keyToItem.get(o);r.getTileCoords(jL,a.key);const u=g_(jL,i);u<s&&(s=u,n=a.key)}),n.id}};l([d({constructOnly:!0})],Fa.prototype,"concurrency",void 0),l([d({constructOnly:!0})],Fa.prototype,"process",void 0),l([d()],Fa.prototype,"state",void 0),l([d({constructOnly:!0})],Fa.prototype,"strategy",void 0),l([d({constructOnly:!0})],Fa.prototype,"tileInfoView",void 0),Fa=l([x("esri.views.2d.tiling.TileQueue")],Fa);const a3e=Fa;let nme=class{constructor(t,r,i){this.maxSize=t,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return;const i=r.key.level,n=this._tileKeysPerLevel[i];zL(this._tilePerId,t);for(let s=0;s<n.length;s++)if(n[s].id===t){n.splice(s,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const n=r.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(r)}prune(t,r,i){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==t&&(n=this._pruneAroundCenterTile(n,r,i,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,r,i,t))}_pruneAroundCenterTile(t,r,i,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,u=i*o[0],c=i*o[1],h=[0,0],f=[0,0];for(s.sort((m,y)=>(h[0]=a.x+u*(m.col+.5),h[1]=a.y-c*(m.row+.5),f[0]=a.x+u*(y.col+.5),f[1]=a.y-c*(y.row+.5),Gw(h,r)-Gw(f,r)));s.length>0;){const m=s.pop();if(this._removeTile(m.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),zL(this._tilePerId,t)}};function zL(e,t){e.delete(t)}const nu=new Fl(0,0,0,0),io=new Map,su=[],u2=[];let u3e=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new nme(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){var b,_;const{resampling:r,tileIndex:i}=this,{scale:n,center:s,resolution:o}=t.state,{minScale:a,maxScale:u}=this.tileInfoView,c=!t.stationary&&n>this._previousScale;if(this._previousScale=n,!r&&(n>a||n<u))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:f,lodInfo:m}=h,{level:y}=m;this.tiles.length=0,i.forEach($=>$.visible=!0);let g=0,v=0;if(f.length>0)for(const{row:$,colFrom:T,colTo:E}of f)for(let I=T;I<=E;I++){g++;const C=nu.set(y,$,m.normalizeCol(I),m.getWorldForColumn(I)).id;let L=i.get(C);if(L)L.isReady?(io.set(C,L),v++):c||this._addParentTile(C,io);else{if((b=this._tileCache)!=null&&b.has(C)){if(L=this._tileCache.pop(C),this.tileIndex.set(C,L),L.isReady){io.set(C,L),v++;continue}}else L=this.acquireTile(nu),this.tileIndex.set(C,L);c||this._addParentTile(C,io)}}const w=v===g;for(const[$,T]of i){if(io.has($))continue;nu.set($);const E=this.tileInfoView.intersects(h,nu),I=this.cachePolicy==="purge"?nu.level!==y:nu.level>y;!E||!c&&w?!I&&E||su.push(T):T.isReady?I&&this.cachePolicy==="purge"&&this._hasReadyAncestor(nu,y)?su.push(T):u2.push(T):I&&su.push(T)}for(const $ of u2)$.isReady&&io.set($.key.id,$);for(const $ of su)this._tileCache?this._tileCache.add($):this.releaseTile($),i.delete($.key.id);for(const $ of io.values())this.tiles.push($);for(const $ of i.values())io.has($.key.id)||($.visible=!1);(_=this._tileCache)==null||_.prune(y,s,o),My.pool.release(h),u2.length=0,su.length=0,io.clear()}clear(){const{tileIndex:t}=this;for(const r of t.values())this.releaseTile(r);t.clear()}refresh(t){var r;for(const i of this.tileIndex.values())this.tiles.includes(i)?t(i):su.push(i);for(const i of su)this.releaseTile(i),this.tileIndex.delete(i.key.id);(r=this._tileCache)==null||r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){var s;let i=t,n=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(n=this.tileIndex.get(i),n==null?void 0:n.isReady){r.has(n.key.id)||r.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(i)&&(n=this._tileCache.pop(i),this.tileIndex.set(i,n),n==null?void 0:n.isReady)){r.has(n.key.id)||r.set(n.key.id,n);break}}_hasReadyAncestor(t,r){const i=ci();this.tileInfoView.getTileBounds(i,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=r&&n.key.level<t.level){const s=ci();if(this.tileInfoView.getTileBounds(s,n.key,!0),Sie(s,i))return!0}return!1}},Vr=class extends le{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([he(()=>{var r;return(r=this.constraints)==null?void 0:r.version},r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Pl)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new ge({x:t[0],y:t[1],spatialReference:r})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let r;try{r=this._project(t,this.state.spatialReference)}catch(n){return void z.getLogger(this).error(new N("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:n}))}const i=this.viewpoint;IM(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void z.getLogger(this).error(new N("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(t,this.state.spatialReference)}catch(n){return void z.getLogger(this).error(new N("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const i=this.viewpoint;che(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const r=this.viewpoint;bhe(r,r,t),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;CL(r,r,t),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var s;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new N("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new N("mapview:invalid-viewpoint","geometry not defined"))}catch(o){i=new N("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(i)return void z.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const n=new Xn({targetGeometry:new ge,scale:0,rotation:0});Or(n,r),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var n,s;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const r=((n=this.constraints)==null?void 0:n.zoomToScale(t))??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;CL(i,i,r),this.viewpoint=i,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),u=this._get("viewpoint"),c=this._get("zoom"),h=c!=null&&i!=null&&i.zoomToScale(c)||void 0;let f,m,y;const g=u==null?void 0:u.rotation,v=u==null?void 0:u.targetGeometry;(v==null?void 0:v.type)==="extent"?f=v:(v==null?void 0:v.type)==="point"&&(m=v,y=u==null?void 0:u.scale);const w=s??f;return{center:n??m??(w==null?void 0:w.center),rotation:a??g,scale:(o??h??y??(w&&w_(w,[t[0]-r.left-r.right,t[1]-r.top-r.bottom])))||void 0}}startup(t,r,i,n){var o;const s=t.targetGeometry;try{this._project(t,i)}catch(a){z.getLogger(this).warn(new Sn("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:i,error:a})),t.targetGeometry=n||new ge({x:0,y:0,spatialReference:i})}(o=this.constraints)==null||o.fit(t),this._set("state",new oO({padding:this.padding,size:r,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,r],spatialReference:i,rotation:n,scale:s}=this.state.paddedViewState,o=new ge({x:t,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(t){var u;const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const c=r.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=c}const i=r.clone(),[n,s]=r.center;let o=null;try{o=this._project(new ge({x:n,y:s,spatialReference:r.spatialReference}),t)}catch(c){VI()||z.getLogger(this).warn(new Sn("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:c}))}o||(o=new ge({x:0,y:0,spatialReference:t}));const a=IM(new Xn({targetGeometry:new ge,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=a;try{const h=[r.size[0]/2,r.size[1]/2],f=[h[0]+20,h[1]],m=r.toMap([0,0],f),{x:y,y:g}=this._project(new ge({x:m[0],y:m[1],spatialReference:r.spatialReference}),t);m[0]=y,m[1]=g,i.toScreen(m,m);const v=ghe(h,m,f),w=Math.hypot(m[0]-h[0],m[1]-h[1])/20;!Number.isFinite(w)||Math.abs(w)>4?(a.rotation=0,a.targetGeometry=new ge({x:0,y:0,spatialReference:t})):(a.scale*=w,a.scale>R("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}(u=this._get("constraints"))==null||u.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,r){var o;if(!this.ready)return;const i=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();i.size=[t,r],whe(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(t){if(!this.ready)return null;const r=[0,0],[i,n]=this.state.toMap(r,[t.x,t.y]),s=this.state.spatialReference;return new ge({x:i,y:n,spatialReference:s})}toScreen(t,r){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),n=[i.x,i.y];return(r==null?void 0:r.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),pr(n[0],n[1])}_project(t,r){var s;const i=(t==null?void 0:t.targetGeometry)||t;if(!r)return t;if(!i)return null;if(r.imageCoordinateSystem||(s=i.spatialReference)!=null&&s.imageCoordinateSystem||Wt(r,i.spatialReference))return t;const n=Hl(i,r);if(!n)throw new N("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return sme(t)?(t.targetGeometry=n,t):n}};function sme(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}l([d({type:ge})],Vr.prototype,"center",null),l([d()],Vr.prototype,"constraints",void 0),l([d({type:Be})],Vr.prototype,"extent",null),l([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Vr.prototype,"padding",null),l([d()],Vr.prototype,"ready",void 0),l([d()],Vr.prototype,"resizeAlign",void 0),l([d({readOnly:!0})],Vr.prototype,"resolution",null),l([d({type:Number})],Vr.prototype,"rotation",null),l([d({type:Number})],Vr.prototype,"scale",null),l([d({readOnly:!0})],Vr.prototype,"state",void 0),l([d({type:Xn})],Vr.prototype,"viewpoint",null),l([d()],Vr.prototype,"zoom",null),Vr=l([x("esri.views.2d.ViewStateManager")],Vr);function aO(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let VL=class extends Zt{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(t,r){aO(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},ome=class extends Zt{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:n,delta:s}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:u}=o;this._startScale=u,this._currentScale=u,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const u=1.015**s.y,c=this._startScale*u,h=c/this._currentScale;a.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:u}=o,{effectiveLODs:c,snapToZoom:h}=u;if(!h||!c)return void a.end();const f=u.snapScale(this._currentScale),m=(s.y>0?Math.max(f,u.snapToPreviousScale(this._startScale)):Math.min(f,u.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}},__=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var r,i;this._startEvent=t,(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},ame=class extends Zt{constructor(t,r,i){super(!0),this.view=t,this.pointerAction=r,this.registerIncoming("drag",i,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new __({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&aO(i.data,this.pointerAction)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},lme=class extends Zt{constructor(t,r,i){super(!0),this._view=t,this.pointerAction=r;const n=this._view.mapViewNavigation;this._dragEventSeparator=new __({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&aO(o.data,this.pointerAction)}),this.registerIncoming("drag",i,s=>this._dragEventSeparator.handle(s))}};function On(e){let t=e*e;return e<0&&(t*=-1),t}function ume(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function cme(e,t,r){const i=r,n=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(i.translation[0]=On(n.axes[0]),i.translation[1]=On(n.axes[1]),i.translation[2]=On(n.buttons[7])-On(n.buttons[6]),i.heading=On(n.axes[2]),i.tilt=On(n.axes[3])):s.deviceType==="spacemouse"&&(i.translation[0]=1.2*On(n.axes[0]),i.translation[1]=1.2*On(n.axes[1]),i.translation[2]=2*-On(n.axes[2]),i.heading=1.2*On(n.axes[5]),i.tilt=1.2*On(n.axes[3])),i.tilt*=o,a8(i.translation,i.translation,a),i}function dme(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let pme=class extends Zt{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Vy,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([he(()=>{var r;return(r=this._view.navigation.gamepad)==null?void 0:r.enabled},r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=Zp({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Jr)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const r=this._view.navigation.gamepad.device;r&&t.data.device!==r||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,ume(this._transformation)):(this._currentDevice=t.data.device,cme(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const r=this._transformation;if(dme(r))return;const i=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=fme*n*t;b_(i,i,[r.translation[0]*s,-r.translation[1]*s]);const o=1+r.translation[2]*mme*t,a=this._view.constraints.rotationEnabled?-r.heading*hme*t:0,u=this._view.size,c=[u[0]/2,u[1]];Q7(i,i,o,a,c,u);const h=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=h}};const hme=.06,fme=.7,mme=6e-4;function bU(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),De(()=>document.removeEventListener("visibilitychange",t))}let yme=class extends Zt{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,u=this._pressedKeys.size>0;a||u?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=bU(n=>n?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const r=this._currentDirection!=null;if(t!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},gme=class extends Zt{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyToDirection={[r.clockwiseOption1]:"clockwise",[r.clockwiseOption2]:"clockwise",[r.counterClockwiseOption1]:"counterClockwise",[r.counterClockwiseOption2]:"counterClockwise",[r.resetOption1]:"reset",[r.resetOption2]:"reset"},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=bU(n=>n?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(t.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var hp;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(hp||(hp={}));let vme=class extends Zt{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),r.zoomIn.forEach(n=>this._keysToZoomAction[n]=hp.IN),r.zoomOut.forEach(n=>this._keysToZoomAction[n]=hp.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view;let o=null;switch(n){case hp.IN:o=s.zoomIn();break;case hp.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}};const wme=.6;let bme=class extends Zt{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:n,deltaY:s}=t.data,o=1/wme**(1/60*s),a=r.zoom(o,[i,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}},_me=class extends Zt{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new __({start:(i,n)=>{r.pinch.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{r.pinch.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{r.pinch.end(this.view),n.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function UL(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value||1:0),axes:t.axes.map(r=>xme(r,e.axisThreshold))}:{buttons:[],axes:[]}}function Sme(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function $me(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function xme(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let Tme=class{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,u=this._inputDevices[a];u&&(this._emitGamepadEvent(o,UL(u),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(u),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(GL(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const r=new Zk(t);r.deviceType!=="unknown"&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Zp({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!r;GL(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=UL(s),u=i||$me(a);o&&(o.timestamp===n.timestamp||!o.active&&u||Sme(o.state,a))||this._emitGamepadEvent(n,a,!u)})}_emitGamepadEvent(t,r,i){const n=this._latestUpdate[t.index],s=n&&n.active;if(!s&&!i)return;const o=!s&&i?"start":s&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:o})}};function Mme(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function GL(e){const t=window.navigator.getGamepads();for(let r=0;r<t.length;r++){const i=t[r];Mme(i)&&e(i)}}const qL=R("edge"),Eme=R("chrome"),Ime=R("ff"),kme=R("safari"),BL="esri-view-surface",ld={touchNone:`${BL}--touch-none`,touchPan:`${BL}--touch-pan`};let _U=class SU{constructor(t,r){this._input=r,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Tme(t,this._input),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=nt(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(c2[r],i),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&c2[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(c2[r],i),this._active[r]=i}}),this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1}setPointerCapture(t,r){r?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?ld.touchNone:ld.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?ld.touchPan:ld.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(ld.touchNone),this._element.classList.remove(ld.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=f7(this._element,t);return SU.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const{key:i}=r;i&&t==="key-up"&&this._keyDownState.delete(i);const n={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_handleMouseWheel(t,r){let i=r.deltaY;switch(r.deltaMode){case 0:qL&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}qL?i*=.7:Eme||kme?i*=.6:Ime&&(i*=1.375);const n=100,s=Math.abs(i);s>n&&(i=i/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};_U.test={disableSubpixelCoordinates:!1};const c2={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let Ome=class extends Zt{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}};const dr={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function Bw(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function Pme(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function Cme(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:pr()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[$,T]=e,[E,I]=[T.x-$.x,T.y-$.y];return t.radius=Math.sqrt(E*E+I*I)/2,t.center.x=($.x+T.x)/2,t.center.y=($.y+T.y)/2,t}let r=0,i=0;for(let $=0;$<e.length;$++)r+=e[$].x,i+=e[$].y;r/=e.length,i/=e.length;const n=e.map($=>$.x-r),s=e.map($=>$.y-i);let o=0,a=0,u=0,c=0,h=0,f=0,m=0;for(let $=0;$<n.length;$++){const T=n[$],E=s[$],I=T*T,C=E*E;o+=I,a+=C,u+=T*E,c+=I*T,h+=C*E,f+=T*C,m+=E*I}const y=.5*(c+f),g=.5*(h+m),v=o*a-u*u,w=(y*a-g*u)/v,b=(o*g-u*y)/v,_=pr(w+r,b+i);return{radius:Math.sqrt(w*w+b*b+(o+a)/e.length),center:_}}function wc(e){const{native:t}=e,{pointerId:r,button:i,pointerType:n}=t;return n==="mouse"?`${r}:${i}`:`${n}`}let Ame=class extends Zt{constructor(t=dr.maximumDoubleClickDelay,r=dr.maximumDoubleClickDistance,i=dr.maximumDoubleTouchDelay,n=dr.maximumDoubleTouchDistance,s=ch){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=pr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new __({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=pt(t.doubleTapTimeout)})}get hasPendingInputs(){return Pb(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout=pt(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:n}=r,{center:s}=i;this._dragStartCenter=s;const o=d2("begin",pr(0,0),i);this._doubleTapDrag.emit(o,void 0,n),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=d2("update",pr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(s,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=d2("end",pr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(s,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=wc(r),n=this._pointerState.get(i),{pointerType:s}=r.native;if(n){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),Bw(n.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,n=wc(r),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function d2(e,t,r){const{button:i,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:u}=r;return{action:e,delta:t,button:i,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:u}}let Rme=class extends Zt{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:n,pointers:Lme(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=wg(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,n);const s=Hv(n,$U(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this._activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=wg(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=wg(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=Hv(i,r)-t,i.lastAngle=Hv(i,r)-t})}_emitEvent(t,r,i){const n=wg(this._activePointerMap);this._drag.emit(this._createPayload(t,r,n,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,n=t.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,n)):(this._addPointer(i),this._emitEvent("added",i,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function $U(e){const t=[];return e.forEach(r=>{t.push(pr(r.event.x,r.event.y))}),Cme(t)}function wg(e){const t=$U(e);let r=0;return e.forEach(i=>{let n=Hv(i,t),s=n-i.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=i.lastAngle+s,i.lastAngle=n;const o=n-i.initialAngle;r+=o}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function Lme(e){const t=new Map;return e.forEach((r,i)=>t.set(i,r.event)),t}function Hv(e,t){const r=e.event,i=r.x-t.center.x,n=r.y-t.center.y;return Math.atan2(n,i)}var HL;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(HL||(HL={}));let Nme=class extends Zt{constructor(t=dr.maximumDoubleClickDelay,r=dr.maximumDoubleClickDistance,i=dr.maximumDoubleTouchDelay,n=dr.maximumDoubleTouchDistance,s=ch){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=wc(r);if(!this._pointerState.has(i)){const n={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,n),this.startCapturingPointer(r.native)}}_handlePointerUp(t){const r=t.data,i=wc(r),n=this._pointerState.get(i);if(n&&n.downButton===r.native.button){const s=n.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),Bw(s,t.data)>o?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(r))):Bw(n,t.data)>o?this._removeState(r):this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){const r=wc(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},Fme=class extends Zt{constructor(t=dr.maximumClickDelay,r=dr.movementUntilMouseDrag,i=dr.movementUntilPenDrag,n=dr.movementUntilTouchDrag,s=dr.holdDelay,o=ch){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=r,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=n,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=pt(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,n=this._pointerState.get(i);n&&(n.isDragging?this._pointerDrag.emit(bg("update",n,r),void 0,n.modifiers):Pme(r,n.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),n.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(bg("start",n,r)):this._pointerDrag.emit(bg("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const i=t.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(bg("end",s,r==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):r==="pointer-up"&&s.downButton===i.native.button&&t.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(n),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function bg(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}let Dme=class extends Zt{constructor(t=dr.maximumDoubleClickDelay,r=dr.maximumDoubleClickDistance,i=dr.maximumDoubleTouchDelay,n=dr.maximumDoubleTouchDistance,s=ch){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=pt(t.doubleClickTimer))}get hasPendingInputs(){return Pb(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=pt(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const r=t.data,{pointerType:i}=r.native,n=jme(r);if(!this._pointerState.has(n))return void this._startClick(t);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,u=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Bw(o,r)>u?(this._clearDoubleClickTimer(n,!0),this._startClick(t)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const r=wc(t.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:r}=t,{native:{pointerType:i}}=r,n=wc(r),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s);this._pointerState.set(n,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function jme(e){const{pointerId:t,pointerType:r,button:i}=e.native;return r==="mouse"?`${t}:${i}`:`${r}`}const _g={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Lu=class extends le{initialize(){const t=()=>{var r;return(r=this.view)==null?void 0:r.ready};this.addHandles([Qo(()=>!t(),()=>this._disconnect()),Qo(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var r;return((r=this._inputManager)==null?void 0:r.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=nt(this._inputManager)}_connect(){const t=this.view.surface,r=new _U(t,this.view.input),i=[new Nme,new Fme,new Dme,new Rme(this.view.navigation),new Ame],n=new Qi({eventSource:r,recognizers:i});n.installHandlers("prevent-context-menu",[new Ome],$l.INTERNAL),n.installHandlers("navigation",[new _me(this.view),new pme(this.view),new bme(this.view),new VL(this.view),new VL(this.view,[_g.counter]),new ame(this.view,"primary"),new yme(this.view,_g.pan),new vme(this.view,_g.zoom),new gme(this.view,_g.rotate),new lme(this.view,"secondary"),new ome(this.view,"touch")],$l.INTERNAL),this.view.viewEvents.connect(n),this._source=r,this._inputManager=n,he(()=>{var s,o;return(o=(s=this.view)==null?void 0:s.navigation)==null?void 0:o.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},Jr)}get test(){}};l([d()],Lu.prototype,"view",void 0),l([d()],Lu.prototype,"latestPointerType",null),l([d()],Lu.prototype,"latestPointerLocation",null),l([d()],Lu.prototype,"multiTouchActive",null),Lu=l([x("esri.views.2d.input.MapViewInputManager")],Lu);const zme=Lu;var P3e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vme(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var WL,ZL,JL,xU={exports:{}};WL=xU,ZL=function(){function e(n,s,o,a,u){t(n,s,o||0,a||n.length-1,u||i)}function t(n,s,o,a,u){for(;a>o;){if(a-o>600){var c=a-o+1,h=s-o+1,f=Math.log(c),m=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*m*(c-m)/c)*(h-c/2<0?-1:1);t(n,s,Math.max(o,Math.floor(s-h*m/c+y)),Math.min(a,Math.floor(s+(c-h)*m/c+y)),u)}var g=n[s],v=o,w=a;for(r(n,o,s),u(n[a],g)>0&&r(n,o,a);v<w;){for(r(n,v,w),v++,w--;u(n[v],g)<0;)v++;for(;u(n[w],g)>0;)w--}u(n[o],g)===0?r(n,o,w):r(n,++w,a),w<=s&&(o=w+1),s<=w&&(a=w-1)}}function r(n,s,o){var a=n[s];n[s]=n[o],n[o]=a}function i(n,s){return n<s?-1:n>s?1:0}return e},(JL=ZL())!==void 0&&(WL.exports=JL);const Ume=Vme(xU.exports);function Hw(e,t){if(!(this instanceof Hw))return new Hw(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function Gme(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function ud(e,t){Yf(e,0,e.children.length,t,e)}function Yf(e,t,r,i,n){n||(n=Od(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=t;o<r;o++)s=e.children[o],Qf(n,e.leaf?i(s):s);return n}function Qf(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function KL(e,t){return e.minX-t.minX}function YL(e,t){return e.minY-t.minY}function p2(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Sg(e){return e.maxX-e.minX+(e.maxY-e.minY)}function qme(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Bme(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-r)*Math.max(0,s-i)}function h2(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function $g(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Od(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function QL(e,t,r,i,n){for(var s,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(s=t+Math.ceil((r-t)/i/2)*i,Ume(e,s,t,r,n),o.push(t,s,s,r))}Hw.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!$g(e,t))return r;for(var n,s,o,a,u=[];t;){for(n=0,s=t.children.length;n<s;n++)o=t.children[n],$g(e,a=t.leaf?i(o):o)&&(t.leaf?r.push(o):h2(e,a)?this._all(o,r):u.push(o));t=u.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!$g(e,t))return!1;for(var i,n,s,o,a=[];t;){for(i=0,n=t.children.length;i<n;i++)if(s=t.children[i],$g(e,o=t.leaf?r(s):s)){if(t.leaf||h2(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Od([]),this},remove:function(e,t){if(e==null)return this;for(var r,i,n,s,o=this.data,a=this.toBBox(e),u=[],c=[];o||u.length;){if(o||(o=u.pop(),i=u[u.length-1],r=c.pop(),s=!0),o.leaf&&(n=Gme(e,o.children,t))!==-1)return o.children.splice(n,1),u.push(o),this._condense(u),this;s||o.leaf||!h2(o,a)?i?(r++,o=i.children[r],s=!1):o=null:(u.push(o),c.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:KL,compareMinY:YL,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var n,s=r-t+1,o=this._maxEntries;if(s<=o)return ud(n=Od(e.slice(t,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),(n=Od([])).leaf=!1,n.height=i;var a,u,c,h,f=Math.ceil(s/o),m=f*Math.ceil(Math.sqrt(o));for(QL(e,t,r,m,this.compareMinX),a=t;a<=r;a+=m)for(QL(e,a,c=Math.min(a+m-1,r),f,this.compareMinY),u=a;u<=c;u+=f)h=Math.min(u+f-1,c),n.children.push(this._build(e,u,h,i-1));return ud(n,this.toBBox),n},_chooseSubtree:function(e,t,r,i){for(var n,s,o,a,u,c,h,f;i.push(t),!t.leaf&&i.length-1!==r;){for(h=f=1/0,n=0,s=t.children.length;n<s;n++)u=p2(o=t.children[n]),(c=qme(e,o)-u)<f?(f=c,h=u<h?u:h,a=o):c===f&&u<h&&(h=u,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,n=r?e:i(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),Qf(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var r=e[t],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var s=this._chooseSplitIndex(r,n,i),o=Od(r.children.splice(s,r.children.length-s));o.height=r.height,o.leaf=r.leaf,ud(r,this.toBBox),ud(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=Od([e,t]),this.data.height=e.height+1,this.data.leaf=!1,ud(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,n,s,o,a,u,c,h;for(u=c=1/0,i=t;i<=r-t;i++)o=Bme(n=Yf(e,0,i,this.toBBox),s=Yf(e,i,r,this.toBBox)),a=p2(n)+p2(s),o<u?(u=o,h=i,c=a<c?a:c):o===u&&a<c&&(c=a,h=i);return h},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:KL,n=e.leaf?this.compareMinY:YL;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,n)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var n,s,o=this.toBBox,a=Yf(e,0,t,o),u=Yf(e,r-t,r,o),c=Sg(a)+Sg(u);for(n=t;n<r-t;n++)s=e.children[n],Qf(a,e.leaf?o(s):s),c+=Sg(a);for(n=r-t-1;n>=t;n--)s=e.children[n],Qf(u,e.leaf?o(s):s),c+=Sg(u);return c},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)Qf(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():ud(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};let XL=class TU{constructor(t,r){this.key=new Fl(0,0,0,0),this.bounds=ci(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=t.zoomToScale(i.level-1),this.maxScale=t.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Be.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return{$view:{scale:this.scale,timeZone:t}}}createChildTiles(){const t=this.key.getChildKeys(),r=Hr.acquire();for(let i=0;i<t.length;i++)r[i]=new TU(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return c7.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const ou={added:[],removed:[]},f2=new Set,Hme=new Fl(0,0,0,0);function Wme(e,t){const r=mi(t);if(!r)return null;const[i,n]=r.valid;return e[2]>n?[ci([e[0],e[1],n,e[3]]),ci([i,e[1],i+e[2]-n,e[3]])]:e[0]<i?[ci([i,e[1],e[2],e[3]]),ci([n-(i-e[0]),e[1],n,e[3]])]:null}let Zme=class extends ra{constructor(t){super(),this._tiles=new Map,this._index=Hw(9,R("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||z8(t)===0||V8(t)===0)return[];const r=Wme(t,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const n=new XL(this.tileScheme,i);this._tiles.set(i,n),this._index.insert(n),r.added.push(n)}for(const i of t.removed)if(this.has(i)){const n=this.get(i);this._tiles.delete(i),this._index.remove(n),r.removed.push(n)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:n}=r,{level:s}=n;if(i.length>0)for(const{row:o,colFrom:a,colTo:u}of i)for(let c=a;c<=u;c++){const h=Hme.set(s,o,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(f2.add(h),!this.has(h)){const f=new XL(this.tileScheme,h);this._tiles.set(h,f),this._index.insert(f),this.tiles.push(f),ou.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];f2.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),ou.removed.push(a))}(ou.added.length||ou.removed.length)&&this.emit("update",ou),My.pool.release(r),f2.clear(),ou.added.length=0,ou.removed.length=0}},Da=class extends le{constructor(){super(...arguments),this.color=new ce([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25,this.multiHighlightEnabled=!1}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.multiHighlightEnabled===t.multiHighlightEnabled}};l([d({type:ce})],Da.prototype,"color",void 0),l([d({type:ce})],Da.prototype,"haloColor",void 0),l([d()],Da.prototype,"haloOpacity",void 0),l([d()],Da.prototype,"fillOpacity",void 0),l([d()],Da.prototype,"multiHighlightEnabled",void 0),Da=l([x("esri.views.2d.support.HighlightOptions")],Da);const MU=Da,xg=e=>parseFloat(e)/100;function Jme(e,t,r){const i=typeof e.left=="string"?xg(e.left)*t:e.left,n=typeof e.right=="string"?xg(e.right)*t:e.right,s=typeof e.top=="string"?xg(e.top)*r:e.top,o=typeof e.bottom=="string"?xg(e.bottom)*r:e.bottom,a=s;return{xmin:i,xmax:Math.max(t-n,i),ymin:a,ymax:Math.max(r-o,s)}}function Kme(e,t,r,i){switch(t.type){case"rect":{const{width:n,height:s}=e,{xmin:o,xmax:a,ymin:u,ymax:c}=Jme(t,n,s),{x:h,y:f}=r;return h>o&&h<a&&f>u&&f<c}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||HI(t.path,[r.x,r.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?BI(t.geometry,i):Jy(t.geometry,i))}}async function Yme(e,t,r){const i=y7(t)?m7(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let n=new Set;const s=new Set;let o=!1,a=null,u=null;r!=null&&r.include?t4(r.include,e4(e,m=>{n.add(m),m2(m,y=>s.add(y))},(m,y)=>{s.add(m),n.add(y)},m=>{a||(a=new Set),a.add(m)},m=>n.add(m),()=>o=!0)):(o=!0,n=new Set(e.allLayerViews),n.forEach(m=>{m2(m,y=>s.add(y))})),r!=null&&r.exclude&&t4(r.exclude,e4(e,m=>{n.delete(m),m2(m,y=>s.delete(y))},m=>s.delete(m),m=>{u||(u=new Set),u.add(m)}));const c=e.toMap(i),h=e.allLayerViews.filter(m=>!m.suspended&&n.has(m)&&m.clips.every(y=>Kme(e,y,i,c))).reverse();let f=[...o?e.graphicsView.hitTest(c).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:c})):[],...await Promise.all(h.map(m=>m.hitTest(c,i)).toArray())].filter(Mc).flat().filter(Mc);return f=f.filter(m=>{var y;return m.type!=="graphic"||((y=m.layer)==null?void 0:y.type)!=="subtype-group"||s.has(m.graphic.layer)}),a&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||(a==null?void 0:a.has(NM(m.graphic))))),u&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||!(u!=null&&u.has(NM(m.graphic))))),{screenPoint:i,results:f}}function e4(e,t,r,i,n,s){return o=>{if(o instanceof ts){if(o.layer===e)s==null||s();else{const a=e.allLayerViews.find(u=>u.layer===o.layer);a&&(n==null||n(a))}i(NM(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(u=>u.layer===o.parent);a&&r(o,a)}else{const a=e.allLayerViews.find(u=>u.layer===o);a&&t(a)}}}function t4(e,t){if(e)if(H1(e))for(const r of e)if(H1(r))for(const i of r)t(i);else t(r);else t(e)}function NM(e){var r,i;const t=e.getObjectId();return t?`${((r=e.layer)==null?void 0:r.uid)??((i=e.sourceLayer)==null?void 0:i.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function m2({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(r=>{t(r)})}function Qme(e,t,r){const{ctx:i,canvas:n}=EU(e,r),s=i.getImageData(0,0,e.width,e.height),o=tye(n,t);return IU(n),{dataUrl:o,data:s}}function Xme(e,t){const{ctx:r,canvas:i}=EU(e,t),n=r.getImageData(0,0,e.width,e.height);return IU(i),n}function EU(e,t){const r=eye();t.premultipliedAlpha&&oye(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(e,0,0),t.flipY&&sye(i),{ctx:i,canvas:r}}function IU(e){e.width=0,e.height=0}function eye(){return y2==null&&(y2=document.createElement("canvas")),y2}let y2=null;function tye(e,t){const r=aye[t.format],i=t.quality/100;return e.toDataURL(r,i)}function rye(e,t){const r=nye(e),i=uye[r];return{format:r,quality:ss(t??i,0,100)}}function iye(e,t){return t/Math.max(e[0],e[1])}function R3e(e,t,r,i=0,n=0,s=e.width-i,o=e.height-n,a=!1){const{data:u}=e,{width:c,height:h,data:f}=t,m=s/c,y=o/h,g=Math.ceil(m/2),v=Math.ceil(y/2),w=e.width;for(let b=0;b<h;b++)for(let _=0;_<c;_++){const $=4*(_+(a?h-b-1:b)*c);let T=0,E=0,I=0,C=0,L=0,H=0;const V=(b+.5)*y;for(let Y=Math.floor(b*y);Y<(b+1)*y;Y++){const ee=Math.abs(V-(Y+.5))/v,Te=(_+.5)*m,oe=ee*ee;for(let St=Math.floor(_*m);St<(_+1)*m;St++){const Nr=Math.abs(Te-(St+.5))/g,Ye=Math.sqrt(oe+Nr*Nr);if(Ye>=1)continue;let q=2*Ye*Ye*Ye-3*Ye*Ye+1;const pe=4*(i+St+(n+Y)*w);H+=q*u[pe+3],E+=q,I+=q*u[pe],C+=q*u[pe+1],L+=q*u[pe+2],T+=q}}f[$]=I/T,f[$+1]=C/T,f[$+2]=L/T,f[$+3]=H/E}return t}function nye(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return lye}}function sye(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function oye(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const n=t[i+3];if(n!==255&&n>0){const s=255/n;t[i]=t[i]*s,t[i+1]=t[i+1]*s,t[i+2]=t[i+2]*s}}}const aye={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},r4=98,lye="png",uye={png:100,jpg:r4,jpeg:r4},kU={flipY:!0,premultipliedAlpha:!0};async function cye(e,t){const r=await OU(e,t),{format:i,quality:n}=rye(t==null?void 0:t.format,t==null?void 0:t.quality);return Qme(r,{format:i,quality:n,rotation:0,disableDecorations:!1},kU)}async function dye(e,t){const r=await OU(e,t);return Xme(r,kU)}function OU(e,t){const r=fye(t||{},hye(e.stage,e.size),e.size,e.padding),i=pye(t,e.allLayerViews);return e.stage.takeScreenshot(r,i,e.backgroundColor,t==null?void 0:t.rotation)}function pye(e={},t){if(!e.layers)return;const r=[];return e.layers.forEach(i=>{const n=t.find(s=>s.layer.id===i.id);n!=null&&n.container&&r.push(n.container)}),r}function hye(e,t){return Math.min(4,iye(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function fye(e,t,r,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let n=null;e.width!=null&&e.height!=null?n=[e.width,e.height]:e.width==null&&e.height!=null?n=[e.height,e.height]:e.width!=null&&e.height==null?n=[e.width,e.width]:e.width==null&&e.height==null&&(n=null);const s=r[0]-(i.left+i.right),o=r[1]-(i.top+i.bottom);let a,u,c=e.area||{x:0,y:0,width:s,height:o};if(n){const h=s/o,f=n[0]/n[1];if(f>h){const m=c.width/f;c={x:c.x,y:Math.round(c.y+(c.height-m)/2),width:c.width,height:Math.round(m)}}else{const m=c.height*f;c={x:Math.round(c.x+(c.width-m)/2),y:c.y,width:Math.round(m),height:c.height}}}else n=[c.width,c.height];return n[0]>c.width?(a=Math.min(n[0]/c.width,t),u=n[0]/c.width/a):(a=1,u=n[0]/c.width),{cropArea:{x:Math.round((c.x+i.left)*a),y:Math.round((c.y+i.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:u,resolutionScale:a}}const i4=160;let Xf=class extends le{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=i4&&this.clear()},i4))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};l([d()],Xf.prototype,"_timer",void 0),l([d()],Xf.prototype,"stationary",null),Xf=l([x("esri.views.2d.support.StationaryManager")],Xf);const mye=e=>e.includes("Brush");let PU=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),mye(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function n4(e,t={}){return e.getContext("webgl2",t)||null}let g2;function yye(){return g2||(g2=wye()),g2}let gye=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}};function vye(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let r=n4(t,{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=n4(t),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;e.available=!0,e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),r}function wye(){const e=new gye,t=vye(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function bye(e){const t=yye();return t.available?e==="3d"&&t.majorPerformanceCaveat?new N("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new N("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new N("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new N("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function _ye(e){return e&&"nodeType"in e}function Sye(e){return e&&typeof e.render=="function"}const s4={component:"esri-component"};let Nu=class extends le{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,r;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((r=this.node)==null?void 0:r.id)}set id(t){this._set("id",t)}set node(t){const r=this._get("node");t!==r&&(t&&t.classList.add(s4.component),r&&r.classList.remove(s4.component),this._set("node",t))}castNode(t){var r;return(r=this.widget)==null||r.destroy(),t?typeof t=="string"||_ye(t)?(this._set("widget",null),Mk(t)):(Sye(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};l([d()],Nu.prototype,"id",null),l([d()],Nu.prototype,"node",null),l([je("node")],Nu.prototype,"castNode",null),l([d({readOnly:!0})],Nu.prototype,"widget",void 0),Nu=l([x("esri.views.ui.Component")],Nu);const Wv=Nu,CU="calcite-mode-";function $ye(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function xye(){return $ye().startsWith("dark")}function Tye(){return`${CU}${xye()?"dark":"light"}`}function Mye(e){Eye(e),e.classList.add(Tye())}function Eye(e){Array.from(e.classList).forEach(t=>{t.startsWith(CU)&&e.classList.remove(t)})}const Iye={left:0,top:0,bottom:0,right:0},AU={bottom:30,top:15,right:15,left:15},no="esri-ui",ei={ui:no,corner:`${no}-corner`,innerContainer:`${no}-inner-container`,manualContainer:`${no}-manual-container`,cornerContainer:`${no}-corner-container`,topLeft:`${no}-top-left`,topRight:`${no}-top-right`,bottomLeft:`${no}-bottom-left`,bottomRight:`${no}-bottom-right`};function kye(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function Tg(e){return e===0?"0":`${e}px`}function v2(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function w2(e,{top:t,bottom:r,left:i,right:n}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=n}let Ms=class extends ra.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Ni(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&w2(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&w2(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([he(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,Jr),he(()=>this.padding,this._applyUIPadding,Jr),he(()=>[this.container,this._locale],([t,r])=>{t&&t.setAttribute("lang",r)},Jr),U6(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const r=this._get("container");t!==r&&(t&&(t.classList.add(ei.ui),Mye(t),this._attachContainers(t)),r&&(r.classList.remove(ei.ui),w2(r,{top:"",bottom:"",left:"",right:""}),L9(r)),this._set("container",t))}get height(){var s;const t=((s=this.view)==null?void 0:s.height)??0;if(t===0)return t;const r=this._getViewPadding(),{top:i,bottom:n}=r;return Math.max(t-i-n,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...AU,...t}}get width(){var s;const t=((s=this.view)==null?void 0:s.width)??0;if(t===0)return t;const r=this._getViewPadding(),{left:i,right:n}=r;return Math.max(t-i-n,0)}add(t,r){let i,n,s;if(Array.isArray(t))return void t.forEach(a=>this.add(a,r));const o=v2(t);o&&({index:i,position:r,component:t,key:n}=o),r&&typeof r=="object"&&({index:i,key:n,position:r,internal:s}=r),!t||r&&!this._isValidPosition(r)||this._add(t,r,i,n,s)}remove(t,r){var n,s;if(!t)return;if(Array.isArray(t))return t.map(o=>this.remove(o,r));const i=this._find(t);if(i){if(this._componentMap.has(i)&&((n=this._componentMap.get(i))==null?void 0:n.key)!==r)return;const o=this._components.indexOf(i),a=i.node.parentNode;return a==null||a.removeChild(i.node),this._componentMap.delete(i),(s=i.widget)==null||s.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(o,1)[0]}}empty(t,r={removeInternal:!1}){if(Array.isArray(t)){for(const s of t)this.empty(s,r);return}const i=this._positionNameToContainerLookup[t??"manual"],n=Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||r.removeInternal});for(const s of n)this.remove(s)}move(t,r){if(Array.isArray(t)&&t.forEach(o=>this.move(o,r)),!t)return;let i;const n=v2(t)||v2(r);if(n&&(i=n.index,r=n.position,t=n.component||t),r&&!this._isValidPosition(r))return;const s=this.remove(t);s&&this.add(s,{position:r,index:i})}find(t){if(!t)return null;const r=this._findById(t);return r&&(r.widget||r.node)}getComponents(t,r={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(i=>this._getComponentsAtPosition(i,r)):this._getComponentsAtPosition(t,r):this._components.filter(i=>{var n;return r.includeInternal||!((n=this._componentMap.get(i))!=null&&n.internal)}).map(({widget:i,node:n})=>i??n)}getPosition(t){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(t))return r;return null}_add(t,r,i,n,s){t instanceof Wv||(t=new Wv({node:t}));const{widget:o}=t;o!=null&&o instanceof le&&o.addHandles(De(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:r,index:i}),this._components.push(t),this._componentMap.set(t,{key:n,internal:s})}_find(t){return t?t instanceof Wv?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??Iye}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(ei.innerContainer,ei.cornerContainer);const r=document.createElement("div");r.classList.add(ei.innerContainer,ei.manualContainer);const i=document.createElement("div");i.classList.add(ei.topLeft,ei.corner),t.appendChild(i);const n=document.createElement("div");n.classList.add(ei.topRight,ei.corner),t.appendChild(n);const s=document.createElement("div");s.classList.add(ei.bottomLeft,ei.corner),t.appendChild(s);const o=document.createElement("div");o.classList.add(ei.bottomRight,ei.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=r;const a=ule();this._cornerNameToContainerLookup={"top-left":i,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:i,"top-trailing":a?i:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){const r=t.position??"manual",{component:i,index:n}=t,s=this._positionNameToContainerLookup[r],o=n!=null&&n>-1;if(kye(i.widget)&&i.widget.startup(),!o)return void s.appendChild(i.node);const a=Array.from(s.children);if(n===0)return void(s.firstChild?DR(i.node,s.firstChild):s.appendChild(i.node));n>=a.length?s.appendChild(i.node):DR(i.node,a[n])}_toPixelPosition(t){return{top:Tg(t.top),left:Tg(t.left),right:Tg(t.right),bottom:Tg(t.bottom)}}_findByComponent(t){return this._components.find(r=>r===t)??null}_findById(t){return this._components.find(({id:r})=>r===t)??null}_findByNode(t){return this._components.find(({node:r})=>r===t)??null}_getComponentsAtPosition(t,r){const i=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(i.children).map(n=>this._findByNode(n)).filter(Mc).filter(n=>{var s;return r.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}};l([d()],Ms.prototype,"_locale",void 0),l([d()],Ms.prototype,"container",null),l([d()],Ms.prototype,"height",null),l([d({value:AU})],Ms.prototype,"padding",null),l([je("padding")],Ms.prototype,"castPadding",null),l([d()],Ms.prototype,"view",void 0),l([d()],Ms.prototype,"width",null),Ms=l([x("esri.views.ui.UI")],Ms);const Oye=Ms,Pye="randomUUID"in crypto;function lO(){if(Pye)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function z3e(){return`{${lO().toUpperCase()}}`}function Cye(){return`{${lO()}}`}const Aye={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},Rye={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},Lye=e=>({...Rye,...e}),Nye=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},Fye=(e,t)=>e.find(t),o4=(e,t,r=!1)=>{let i=e;return t.forEach((n,s)=>{const o=i!=null&&i.children?Fye(i.children,a=>a.domNode===n):void 0;r&&!o&&s!==t.length-1||(i=o)}),i},Dye=e=>{let t;const r={...Aye,...e},i=Lye(r),n=i.performanceLogger;let s,o=!0,a=!1;const u=[],c=[],h=(m,y,g)=>{var b;let v;i.eventHandlerInterceptor=(_,$,T,E)=>function(I){let C;n("domEvent",I);const L=Nye(I.currentTarget,v.domNode),H=L.some(Y=>{var ee;return customElements.get((ee=Y==null?void 0:Y.tagName)==null?void 0:ee.toLowerCase())});if(I.eventPhase===Event.CAPTURING_PHASE||!H)L.reverse(),C=o4(v.getLastRender(),L);else{const Y=I.composedPath(),ee=Y.slice(Y.indexOf(I.currentTarget),Y.indexOf(v.domNode)).reverse();C=o4(v.getLastRender(),ee,!0)}let V;return C&&(V=r.handleInterceptedEvent(t,C,this,I)),n("domEventProcessed",I),V},(b=r.postProcessProjectionOptions)==null||b.call(r,i);const w=g();v=m(y,w,i),i.eventHandlerInterceptor=void 0,u.push(v),c.push(g),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(v,w)};let f=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let m=0;m<u.length;m++){const y=c[m]();n("rendered",void 0),u[m].update(y),n("patched",void 0)}n("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(f=r.modifyDoRenderImplementation(f,u,c)),t={renderNow:f,scheduleRender:()=>{s||a||(s=requestAnimationFrame(f))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(m,y)=>{h(pl.append,m,y)},insertBefore:(m,y)=>{h(pl.insertBefore,m,y)},merge:(m,y)=>{h(pl.merge,m,y)},replace:(m,y)=>{h(pl.replace,m,y)},detach:m=>{for(let y=0;y<c.length;y++)if(c[y]===m)return c.splice(y,1),u.splice(y,1)[0];throw new Error("renderFunction was not found")}},t};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const RU="calcite-mode-auto",LU="calcite-mode-dark",jye="calcite-mode-light",V3e={autoMode:RU,darkMode:LU,lightMode:jye,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const lc=globalThis.calciteConfig,U3e=(lc==null?void 0:lc.focusTrapStack)||[],a4="2.10.1";function zye(){if(lc&&lc.version){console.warn(`[calcite-components] while initializing v${a4}, an existing configuration with version "${lc.version}" was found. This may cause unexpected behavior. The version will not be added to the existing global configuration.`);return}const e=lc||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:a4,writable:!1}),globalThis.calciteConfig=e}var Fo={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},Vye=Object.defineProperty,Uye=(e,t)=>{for(var r in t)Vye(e,r,{get:t[r],enumerable:!0})},Gye=e=>{const t=new URL(e,ar.$resourcesUrl$);return t.origin!==u0.location.origin?t.href:t.pathname},qye=e=>ar.$resourcesUrl$=e,l4={},Bye="http://www.w3.org/2000/svg",Hye="http://www.w3.org/1999/xhtml",Wye=e=>e!=null,uO=e=>(e=typeof e,e==="object"||e==="function");function Zye(e){var t,r,i;return(i=(r=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:r.getAttribute("content"))!=null?i:void 0}var Jye={};Uye(Jye,{err:()=>NU,map:()=>Kye,ok:()=>FM,unwrap:()=>Yye,unwrapErr:()=>Qye});var FM=e=>({isOk:!0,isErr:!1,value:e}),NU=e=>({isOk:!1,isErr:!0,value:e});function Kye(e,t){if(e.isOk){const r=t(e.value);return r instanceof Promise?r.then(i=>FM(i)):FM(r)}if(e.isErr){const r=e.value;return NU(r)}throw"should never get here"}var Yye=e=>{if(e.isOk)return e.value;throw e.value},Qye=e=>{if(e.isErr)return e.value;throw e.value},zc=(e,t="")=>()=>{},Xye="slot-fb{display:contents}slot-fb[hidden]{display:none}",u4="http://www.w3.org/1999/xlink",FU=(e,t,...r)=>{let i=null,n=null,s=null,o=!1,a=!1;const u=[],c=f=>{for(let m=0;m<f.length;m++)i=f[m],Array.isArray(i)?c(i):i!=null&&typeof i!="boolean"&&((o=typeof e!="function"&&!uO(i))&&(i=String(i)),o&&a?u[u.length-1].$text$+=i:u.push(o?Ww(null,i):i),a=o)};if(c(r),t){t.key&&(n=t.key),t.name&&(s=t.name);{const f=t.className||t.class;f&&(t.class=typeof f!="object"?f:Object.keys(f).filter(m=>f[m]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,u,r0e);const h=Ww(e,null);return h.$attrs$=t,u.length>0&&(h.$children$=u),h.$key$=n,h.$name$=s,h},Ww=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return r.$attrs$=null,r.$key$=null,r.$name$=null,r},e0e={},t0e=e=>e&&e.$tag$===e0e,r0e={forEach:(e,t)=>e.map(c4).forEach(t),map:(e,t)=>e.map(c4).map(t).map(i0e)},c4=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),i0e=e=>{if(typeof e.vtag=="function"){const r={...e.vattrs};return e.vkey&&(r.key=e.vkey),e.vname&&(r.name=e.vname),FU(e.vtag,r,...e.vchildren||[])}const t=Ww(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},n0e=e=>C0e.map(t=>t(e)).find(t=>!!t),s0e=(e,t)=>e!=null&&!uO(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,o0e=e=>e,G3e=(e,t,r)=>{const i=o0e(e);return{emit:n=>a0e(i,t,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:n})}},a0e=(e,t,r)=>{const i=ar.ce(t,r);return e.dispatchEvent(i),i},d4=new WeakMap,l0e=(e,t,r)=>{let i=Kw.get(e);L0e&&r?(i=i||new CSSStyleSheet,typeof i=="string"?i=t:i.replaceSync(t)):i=t,Kw.set(e,i)},u0e=(e,t,r)=>{var i;const n=DU(t,r),s=Kw.get(n);if(e=e.nodeType===11?e:rs,s)if(typeof s=="string"){e=e.head||e;let o=d4.get(e),a;if(o||d4.set(e,o=new Set),!o.has(n)){{a=rs.createElement("style"),a.innerHTML=s;const u=(i=ar.$nonce$)!=null?i:Zye(rs);u!=null&&a.setAttribute("nonce",u),e.insertBefore(a,e.querySelector("link"))}t.$flags$&4&&(a.innerHTML+=Xye),o&&o.add(n)}}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return n},c0e=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,i=t.$flags$,n=zc("attachStyles",t.$tagName$),s=u0e(r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);i&10&&(r["s-sc"]=s,r.classList.add(s+"-h"),i&2&&r.classList.add(s+"-s")),n()},DU=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),p4=(e,t,r,i,n,s)=>{if(r!==i){let o=w4(e,t),a=t.toLowerCase();if(t==="class"){const u=e.classList,c=h4(r),h=h4(i);u.remove(...c.filter(f=>f&&!h.includes(f))),u.add(...h.filter(f=>f&&!c.includes(f)))}else if(t==="style"){for(const u in r)(!i||i[u]==null)&&(u.includes("-")?e.style.removeProperty(u):e.style[u]="");for(const u in i)(!r||i[u]!==r[u])&&(u.includes("-")?e.style.setProperty(u,i[u]):e.style[u]=i[u])}else if(t!=="key")if(t==="ref")i&&i(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):w4(u0,a)?t=a.slice(2):t=a[2]+t.slice(3),r||i){const u=t.endsWith(jU);t=t.replace(p0e,""),r&&ar.rel(e,t,r,u),i&&ar.ael(e,t,i,u)}}else{const u=uO(i);if((o||u&&i!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=i;else{const h=i??"";t==="list"?o=!1:(r==null||e[t]!=h)&&(e[t]=h)}}catch{}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,c=!0),i==null||i===!1?(i!==!1||e.getAttribute(t)==="")&&(c?e.removeAttributeNS(u4,t):e.removeAttribute(t)):(!o||s&4||n)&&!u&&(i=i===!0?"":i,c?e.setAttributeNS(u4,t,i):e.setAttribute(t,i))}}},d0e=/\s/,h4=e=>e?e.split(d0e):[],jU="Capture",p0e=new RegExp(jU+"$"),zU=(e,t,r)=>{const i=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,n=e&&e.$attrs$||l4,s=t.$attrs$||l4;for(const o of f4(Object.keys(n)))o in s||p4(i,o,n[o],void 0,r,t.$flags$);for(const o of f4(Object.keys(s)))p4(i,o,n[o],s[o],r,t.$flags$)};function f4(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var Pd,DM,oh,cO=!1,Zw=!1,dO=!1,Pi=!1,Jw=(e,t,r,i)=>{var n;const s=t.$children$[r];let o=0,a,u,c;if(cO||(dO=!0,s.$tag$==="slot"&&(Pd&&i.classList.add(Pd+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)a=s.$elm$=rs.createTextNode(s.$text$);else if(s.$flags$&1)a=s.$elm$=rs.createTextNode("");else{if(Pi||(Pi=s.$tag$==="svg"),a=s.$elm$=rs.createElementNS(Pi?Bye:Hye,s.$flags$&2?"slot-fb":s.$tag$),Pi&&s.$tag$==="foreignObject"&&(Pi=!1),zU(null,s,Pi),Wye(Pd)&&a["s-si"]!==Pd&&a.classList.add(a["s-si"]=Pd),hO(a,i),s.$children$)for(o=0;o<s.$children$.length;++o)u=Jw(e,s,o,a),u&&a.appendChild(u);s.$tag$==="svg"?Pi=!1:a.tagName==="foreignObject"&&(Pi=!0)}return a["s-hn"]=oh,s.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=DM,a["s-sn"]=s.$name$||"",a["s-rf"]=(n=s.$attrs$)==null?void 0:n.ref,c=e&&e.$children$&&e.$children$[r],c&&c.$tag$===s.$tag$&&e.$elm$&&Ey(e.$elm$,!1)),a},Ey=(e,t)=>{ar.$flags$|=1;const r=Array.from(e.childNodes);if(e["s-sr"]&&Fo.experimentalSlotFixes){let i=e;for(;i=i.nextSibling;)i&&i["s-sn"]===e["s-sn"]&&i["s-sh"]===oh&&r.push(i)}for(let i=r.length-1;i>=0;i--){const n=r[i];n["s-hn"]!==oh&&n["s-ol"]&&(xl(GU(n),n,pO(n)),n["s-ol"].remove(),n["s-ol"]=void 0,n["s-sh"]=void 0,dO=!0),t&&Ey(n,t)}ar.$flags$&=-2},VU=(e,t,r,i,n,s)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===oh&&(o=o.shadowRoot);n<=s;++n)i[n]&&(a=Jw(null,r,n,e),a&&(i[n].$elm$=a,xl(o,a,pO(t))))},UU=(e,t,r)=>{for(let i=t;i<=r;++i){const n=e[i];if(n){const s=n.$elm$;HU(n),s&&(Zw=!0,s["s-ol"]?s["s-ol"].remove():Ey(s,!0),s.remove())}}},h0e=(e,t,r,i,n=!1)=>{let s=0,o=0,a=0,u=0,c=t.length-1,h=t[0],f=t[c],m=i.length-1,y=i[0],g=i[m],v,w;for(;s<=c&&o<=m;)if(h==null)h=t[++s];else if(f==null)f=t[--c];else if(y==null)y=i[++o];else if(g==null)g=i[--m];else if(Mg(h,y,n))Cd(h,y,n),h=t[++s],y=i[++o];else if(Mg(f,g,n))Cd(f,g,n),f=t[--c],g=i[--m];else if(Mg(h,g,n))(h.$tag$==="slot"||g.$tag$==="slot")&&Ey(h.$elm$.parentNode,!1),Cd(h,g,n),xl(e,h.$elm$,f.$elm$.nextSibling),h=t[++s],g=i[--m];else if(Mg(f,y,n))(h.$tag$==="slot"||g.$tag$==="slot")&&Ey(f.$elm$.parentNode,!1),Cd(f,y,n),xl(e,f.$elm$,h.$elm$),f=t[--c],y=i[++o];else{for(a=-1,u=s;u<=c;++u)if(t[u]&&t[u].$key$!==null&&t[u].$key$===y.$key$){a=u;break}a>=0?(w=t[a],w.$tag$!==y.$tag$?v=Jw(t&&t[o],r,a,e):(Cd(w,y,n),t[a]=void 0,v=w.$elm$),y=i[++o]):(v=Jw(t&&t[o],r,o,e),y=i[++o]),v&&xl(GU(h.$elm$),v,pO(h.$elm$))}s>c?VU(e,i[m+1]==null?null:i[m+1].$elm$,r,i,o,m):o>m&&UU(t,s,c)},Mg=(e,t,r=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:r?!0:e.$key$===t.$key$:!1,pO=e=>e&&e["s-ol"]||e,GU=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Cd=(e,t,r=!1)=>{const i=t.$elm$=e.$elm$,n=e.$children$,s=t.$children$,o=t.$tag$,a=t.$text$;let u;a===null?(Pi=o==="svg"?!0:o==="foreignObject"?!1:Pi,o==="slot"&&!cO||zU(e,t,Pi),n!==null&&s!==null?h0e(i,n,t,s,r):s!==null?(e.$text$!==null&&(i.textContent=""),VU(i,null,t,s,0,s.length-1)):n!==null&&UU(n,0,n.length-1),Pi&&o==="svg"&&(Pi=!1)):(u=i["s-cr"])?u.parentNode.textContent=a:e.$text$!==a&&(i.data=a)},qU=e=>{const t=e.childNodes;for(const r of t)if(r.nodeType===1){if(r["s-sr"]){const i=r["s-sn"];r.hidden=!1;for(const n of t)if(n!==r){if(n["s-hn"]!==r["s-hn"]||i!==""){if(n.nodeType===1&&(i===n.getAttribute("slot")||i===n["s-sn"])||n.nodeType===3&&i===n["s-sn"]){r.hidden=!0;break}}else if(n.nodeType===1||n.nodeType===3&&n.textContent.trim()!==""){r.hidden=!0;break}}}qU(r)}},No=[],BU=e=>{let t,r,i;for(const n of e.childNodes){if(n["s-sr"]&&(t=n["s-cr"])&&t.parentNode){r=t.parentNode.childNodes;const s=n["s-sn"];for(i=r.length-1;i>=0;i--)if(t=r[i],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==n["s-hn"]&&!Fo.experimentalSlotFixes)if(m4(t,s)){let o=No.find(a=>a.$nodeToRelocate$===t);Zw=!0,t["s-sn"]=t["s-sn"]||s,o?(o.$nodeToRelocate$["s-sh"]=n["s-hn"],o.$slotRefNode$=n):(t["s-sh"]=n["s-hn"],No.push({$slotRefNode$:n,$nodeToRelocate$:t})),t["s-sr"]&&No.map(a=>{m4(a.$nodeToRelocate$,t["s-sn"])&&(o=No.find(u=>u.$nodeToRelocate$===t),o&&!a.$slotRefNode$&&(a.$slotRefNode$=o.$slotRefNode$))})}else No.some(o=>o.$nodeToRelocate$===t)||No.push({$nodeToRelocate$:t})}n.nodeType===1&&BU(n)}},m4=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",HU=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(HU)},xl=(e,t,r)=>{const i=e==null?void 0:e.insertBefore(t,r);return hO(t,e),i},WU=e=>{const t=[];return e&&t.push(...e["s-scs"]||[],e["s-si"],e["s-sc"],...WU(e.parentElement)),t},hO=(e,t,r=!1)=>{var i;if(e&&t&&e.nodeType===1){const n=new Set(WU(t).filter(Boolean));if(n.size&&((i=e.classList)==null||i.add(...e["s-scs"]=[...n]),e["s-ol"]||r))for(const s of Array.from(e.childNodes))hO(s,e,!0)}},f0e=(e,t,r=!1)=>{var i,n,s,o,a;const u=e.$hostElement$,c=e.$cmpMeta$,h=e.$vnode$||Ww(null,null),f=t0e(t)?t:FU(null,null,t);if(oh=u.tagName,c.$attrsToReflect$&&(f.$attrs$=f.$attrs$||{},c.$attrsToReflect$.map(([m,y])=>f.$attrs$[y]=u[m])),r&&f.$attrs$)for(const m of Object.keys(f.$attrs$))u.hasAttribute(m)&&!["key","ref","style","class"].includes(m)&&(f.$attrs$[m]=u[m]);f.$tag$=null,f.$flags$|=4,e.$vnode$=f,f.$elm$=h.$elm$=u.shadowRoot||u,Pd=u["s-sc"],cO=(c.$flags$&1)!==0,DM=u["s-cr"],Zw=!1,Cd(h,f,r);{if(ar.$flags$|=1,dO){BU(f.$elm$);for(const m of No){const y=m.$nodeToRelocate$;if(!y["s-ol"]){const g=rs.createTextNode("");g["s-nr"]=y,xl(y.parentNode,y["s-ol"]=g,y)}}for(const m of No){const y=m.$nodeToRelocate$,g=m.$slotRefNode$;if(g){const v=g.parentNode;let w=g.nextSibling;{let b=(i=y["s-ol"])==null?void 0:i.previousSibling;for(;b;){let _=(n=b["s-nr"])!=null?n:null;if(_&&_["s-sn"]===y["s-sn"]&&v===_.parentNode){for(_=_.nextSibling;_===y||_!=null&&_["s-sr"];)_=_==null?void 0:_.nextSibling;if(!_||!_["s-nr"]){w=_;break}}b=b.previousSibling}}(!w&&v!==y.parentNode||y.nextSibling!==w)&&y!==w&&(!y["s-hn"]&&y["s-ol"]&&(y["s-hn"]=y["s-ol"].parentNode.nodeName),xl(v,y,w),y.nodeType===1&&(y.hidden=(s=y["s-ih"])!=null?s:!1)),y&&typeof g["s-rf"]=="function"&&g["s-rf"](y)}else y.nodeType===1&&(r&&(y["s-ih"]=(o=y.hidden)!=null?o:!1),y.hidden=!0)}}Zw&&qU(f.$elm$),ar.$flags$&=-2,No.length=0}if(Fo.experimentalScopedSlotChanges&&c.$flags$&2)for(const m of f.$elm$.childNodes)m["s-hn"]!==oh&&!m["s-sh"]&&(r&&m["s-ih"]==null&&(m["s-ih"]=(a=m.hidden)!=null?a:!1),m.hidden=!0);DM=void 0},m0e=(e,t)=>{},fO=(e,t)=>(e.$flags$|=16,m0e(e,e.$ancestorComponent$),F0e(()=>y0e(e,t))),y0e=(e,t)=>{const r=e.$hostElement$,i=zc("scheduleUpdate",e.$cmpMeta$.$tagName$),n=r;if(!n)throw new Error(`Can't render component <${r.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let s;return t?s=Fp(n,"componentWillLoad"):s=Fp(n,"componentWillUpdate"),s=y4(s,()=>Fp(n,"componentWillRender")),i(),y4(s,()=>v0e(e,n,t))},y4=(e,t)=>g0e(e)?e.then(t):t(),g0e=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",v0e=async(e,t,r)=>{const i=e.$hostElement$,n=zc("update",e.$cmpMeta$.$tagName$);i["s-rc"],r&&c0e(e);const s=zc("render",e.$cmpMeta$.$tagName$);w0e(e,t,i,r),s(),n(),b0e(e)},g4=null,w0e=(e,t,r,i)=>{try{g4=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(Fo.hasRenderFn||Fo.reflect)&&(Fo.vdomRender||Fo.reflect)&&(Fo.hydrateServerSide||f0e(e,t,i))}catch(u){l0(u,e.$hostElement$)}return g4=null,null},b0e=e=>{const t=e.$cmpMeta$.$tagName$,r=e.$hostElement$,i=zc("postUpdate",t),n=r;e.$ancestorComponent$,Fp(n,"componentDidRender"),e.$flags$&64?(Fp(n,"componentDidUpdate"),i()):(e.$flags$|=64,Fp(n,"componentDidLoad"),i())},q3e=e=>{{const t=Mh(e),r=t.$hostElement$.isConnected;return r&&(t.$flags$&18)===2&&fO(t,!1),r}},Fp=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(i){l0(i)}},_0e=(e,t)=>Mh(e).$instanceValues$.get(t),S0e=(e,t,r,i)=>{const n=Mh(e),s=e,o=n.$instanceValues$.get(t),a=n.$flags$,u=s;r=s0e(r,i.$members$[t][0]);const c=Number.isNaN(o)&&Number.isNaN(r);if(r!==o&&!c){n.$instanceValues$.set(t,r);{if(i.$watchers$&&a&128){const f=i.$watchers$[t];f&&f.map(m=>{try{u[m](r,o,t)}catch(y){l0(y,s)}})}if((a&18)===2){if(u.componentShouldUpdate&&u.componentShouldUpdate(r,o,t)===!1)return;fO(n,!1)}}}},$0e=(e,t,r)=>{var i;const n=e.prototype;if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const s=Object.entries(t.$members$);s.map(([o,[a]])=>{(a&31||a&32)&&Object.defineProperty(n,o,{get(){return _0e(this,o)},set(u){S0e(this,o,u,t)},configurable:!0,enumerable:!0})});{const o=new Map;n.attributeChangedCallback=function(a,u,c){ar.jmp(()=>{var h;const f=o.get(a);if(this.hasOwnProperty(f))c=this[f],delete this[f];else{if(n.hasOwnProperty(f)&&typeof this[f]=="number"&&this[f]==c)return;if(f==null){const m=Mh(this),y=m==null?void 0:m.$flags$;if(y&&!(y&8)&&y&128&&c!==u){const v=this,w=(h=t.$watchers$)==null?void 0:h[a];w==null||w.forEach(b=>{v[b]!=null&&v[b].call(v,c,u,a)})}return}}this[f]=c===null&&typeof this[f]=="boolean"?!1:c})},e.observedAttributes=Array.from(new Set([...Object.keys((i=t.$watchers$)!=null?i:{}),...s.filter(([a,u])=>u[0]&15).map(([a,u])=>{var c;const h=u[1]||a;return o.set(h,a),u[0]&512&&((c=t.$attrsToReflect$)==null||c.push([a,h])),h})]))}}return e},x0e=async(e,t,r,i)=>{let n;if(!(t.$flags$&32)){t.$flags$|=32,r.$lazyBundleId$;{n=e.constructor;const o=e.localName;customElements.whenDefined(o).then(()=>t.$flags$|=128)}if(n&&n.style){let o=n.style;typeof o!="string"&&(t.$modeName$=n0e(e),t.$modeName$&&(o=o[t.$modeName$]));const a=DU(r,t.$modeName$);if(!Kw.has(a)){const u=zc("registerStyles",r.$tagName$);l0e(a,o,!!(r.$flags$&1)),u()}}}t.$ancestorComponent$,fO(t,!0)},v4=e=>{},T0e=e=>{if(!(ar.$flags$&1)){const t=Mh(e),r=t.$cmpMeta$,i=zc("connectedCallback",r.$tagName$);t.$flags$&1?(ZU(e,t,r.$listeners$),t!=null&&t.$lazyInstance$?v4(t.$lazyInstance$):t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>v4(t.$lazyInstance$))):(t.$flags$|=1,r.$flags$&12&&M0e(e),r.$members$&&Object.entries(r.$members$).map(([n,[s]])=>{if(s&31&&e.hasOwnProperty(n)){const o=e[n];delete e[n],e[n]=o}}),x0e(e,t,r)),i()}},M0e=e=>{const t=e["s-cr"]=rs.createComment("");t["s-cn"]=!0,xl(e,t,e.firstChild)},E0e=async e=>{if(!(ar.$flags$&1)){const t=Mh(e);t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0)}},B3e=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};r.$members$=t[2],r.$listeners$=t[3],r.$watchers$=e.$watchers$,r.$attrsToReflect$=[];const i=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){P0e(this,r)},connectedCallback(){T0e(this),i&&i.call(this)},disconnectedCallback(){E0e(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(r.$flags$&16)})}}),e.is=r.$tagName$,$0e(e,r)},H3e=(e,t)=>t,ZU=(e,t,r,i)=>{r&&r.map(([n,s,o])=>{const a=k0e(e,n),u=I0e(t,o),c=O0e(n);ar.ael(a,s,u,c),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>ar.rel(a,s,u,c))})},I0e=(e,t)=>r=>{var i;try{Fo.lazyLoad||e.$hostElement$[t](r)}catch(n){l0(n)}},k0e=(e,t)=>t&4?rs:t&8?u0:t&16?rs.body:e,O0e=e=>A0e?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,JU=new WeakMap,Mh=e=>JU.get(e),P0e=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return ZU(e,r,t.$listeners$),JU.set(e,r)},w4=(e,t)=>t in e,l0=(e,t)=>(0,console.error)(e,t),Kw=new Map,C0e=[],u0=typeof window<"u"?window:{},rs=u0.document||{head:{}},W3e=u0.HTMLElement||class{},ar={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,i)=>e.addEventListener(t,r,i),rel:(e,t,r,i)=>e.removeEventListener(t,r,i),ce:(e,t)=>new CustomEvent(e,t)},A0e=(()=>{let e=!1;try{rs.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),R0e=e=>Promise.resolve(e),L0e=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),jM=!1,zM=[],KU=[],YU=(e,t)=>r=>{e.push(r),jM||(jM=!0,t&&ar.$flags$&4?N0e(VM):ar.raf(VM))},b4=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(r){l0(r)}e.length=0},VM=()=>{b4(zM),b4(KU),(jM=zM.length>0)&&ar.raf(VM)},N0e=e=>R0e().then(e),Z3e=YU(zM,!1),F0e=YU(KU,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */function _4(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(LU)||e.contains(RU)&&t?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&i(o),s=o};let s=r();i(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function D0e(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?_4():document.addEventListener("DOMContentLoaded",()=>_4(),{once:!0})),zye()}const j0e=D0e;j0e();let QU;function z0e(){try{Gye(".")}catch{qye(cn(Ne(QU)))}}function mO(e){var r;const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push((r=e[i])==null?void 0:r.call(e));return t.length>0?Promise.all(t):null}QU="components/assets";const XU=Symbol("widget"),eG=Symbol("widget-test-data"),V0e=[],U0e={},Yw=new WeakMap;function tG(e,t){let r=t.children;if(r!=null&&r.length)for(let n=0;n<r.length;++n)r[n]=tG(e,r[n]);else r=V0e;const i=t.vnodeSelector;if(Qw(i)){const n=t.properties||U0e,s=n.key||i;return{vnodeSelector:"div",properties:{key:s,afterCreate:G0e,afterUpdate:q0e,afterRemoved:rG,parentWidget:e,widgetConstructor:i,widgetProperties:{...n,key:s,children:r}},children:void 0,text:void 0,domNode:null}}return t}function G0e(e,t,r,{parentWidget:i,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=e,Yw.set(e,o),(a=o.afterCreate)==null||a.call(o,o,e),i.addHandles(De(()=>rG(e))),queueMicrotask(()=>{o[eG].projector.renderNow()})}function q0e(e,t,r,{widgetProperties:i}){var s;const n=Yw.get(e);n&&(n.set(i),(s=n.afterUpdate)==null||s.call(n,n,e))}function rG(e){var r;const t=Yw.get(e);t&&((r=t.afterRemoved)==null||r.call(t,t,e),t.destroy(),Yw.delete(e))}function Qw(e){return typeof e=="function"&&e[XU]}const S4=new Set;function B0e(e){S4.add(e),e.finally(()=>S4.delete(e))}var iG;const H0e="esri.widgets.Widget";let W0e=0;function nG(e,t){const r=Object.prototype.hasOwnProperty;for(const i in t)r.call(t,i)&&r.call(e,i)&&(e[i]!=null&&t[i]!=null&&typeof e[i]=="object"&&typeof t[i]=="object"?nG(e[i],t[i]):e[i]=t[i]);return e}const Z0e=Dye({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,n,s,o)=>{const a=t==null?void 0:t(i,n,s,o),u=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in s)||u){const c=i[2].toLowerCase()+i.slice(3),h=y=>a==null?void 0:a.call(s,y);s.addEventListener(c,h,u);const f=()=>s.removeEventListener(c,h,u),m=o.afterRemoved;o.afterRemoved=y=>{m==null||m(y),f()}}return a}},handleInterceptedEvent(e,t,r,i){const{eventPhase:n,type:s}=i,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const u=t.properties;(u&&a in u||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,u&&a in u))&&(K9(),e.scheduleRender(),u[a].call(u.bind||r,i))}});let b2=!1,Gt=class extends Fb(ra.EventedAccessor){constructor(t,r){super(t,r),this._attached=!1,this._projector=Z0e,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=bI(async()=>{var u;if((u=this._messageBundleProps)!=null&&u.length){const c=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:f})=>{if(this.destroyed)return;let m=await H6(h);this.uiStrings&&Object.keys(this.uiStrings)&&(m=nG(k(m),this.uiStrings)),this[f]=m}));if(this.destroyed)return;for(const h of c)h.status==="rejected"&&z.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),z0e();const i="esri-widget-uid-"+lO(),n=this.render.bind(this);this._trackingTarget=new Ob(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${i}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var f,m;if(!this._readyForTrueRender||this.destroyed)return null;const u=n()??s(),c=u.properties??(u.properties={});if(c.key??(c.key=i),Qw(u.vnodeSelector)){if(!this.visible)return s()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),(f=c.styles).display??(f.display="");let h=0;return(m=u.children)==null||m.forEach(y=>{var g;Qw(y.vnodeSelector)||(y.properties??(y.properties={}),(g=y.properties).key??(g.key=`${this.id}--${h++}`))}),tG(this,u)};this.render=()=>{if(b2)return o();let u=ole(this)??null;if(u)return u;this._trackingTarget.clear(),b2=!0;try{u=Jo(this._trackingTarget,o)}catch(c){throw z.getLogger(this).error(c),c}finally{b2=!1}return u&&ale(this,u),u};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),B0e(this._resourcesFetch)}normalizeCtorArgs(t,r){const i={...t};return r&&(i.container=r),i}postInitialize(){}beforeFirstRender(){var r;const t=this.loadDependencies();return(r=this._messageBundleProps)!=null&&r.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(NC):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(nt(this._trackingTarget),nt(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,BS(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return Mk(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+W0e++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(iG=XU,eG)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(BS(this),this._projector.scheduleRender())}own(t){ij(z.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(t)}classes(...t){return lle.apply(this,t)}renderNow(){BS(this),this._projector.renderNow()}_postInitialize(){var r;if(this.destroyed)return;this.scheduleRender(),(r=this._delegatedEventNames)!=null&&r.length&&this.addHandles(he(()=>this.viewModel,(i,n)=>{n&&this.removeHandles("delegated-events"),i&&Ib(i)&&this.addHandles(this._delegatedEventNames.map(s=>By(i,s,o=>{this.emit(s,o)})),"delegated-events")},un)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(NC),this.scheduleRender()};this.addHandles([U6(t),he(()=>this.uiStrings,t),Qo(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var r;this._attached&&(this._projector.detach(this.render),this._attached=!1),(r=t==null?void 0:t.parentNode)==null||r.removeChild(t)}};Gt[iG]=!0,l([d()],Gt.prototype,"_readyForTrueRender",void 0),l([d({value:null})],Gt.prototype,"container",null),l([je("container")],Gt.prototype,"castContainer",null),l([d()],Gt.prototype,"icon",null),l([d()],Gt.prototype,"id",null),l([d()],Gt.prototype,"label",null),l([d()],Gt.prototype,"renderable",null),l([d()],Gt.prototype,"uiStrings",void 0),l([d()],Gt.prototype,"viewModel",void 0),l([d({value:!0})],Gt.prototype,"visible",null),l([d()],Gt.prototype,"key",void 0),l([d()],Gt.prototype,"children",void 0),l([d()],Gt.prototype,"afterCreate",void 0),l([d()],Gt.prototype,"afterUpdate",void 0),l([d()],Gt.prototype,"afterRemoved",void 0),Gt=l([x(H0e)],Gt);const S_=Gt,J0e=new Map;function K0e(e){return J0e.get(e)}function $4(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function Y0e(e,t){return e.length!==t.length||e.some((r,i)=>r.text!==t[i].text)}function af(e,t,r){!r||!t||e.find(i=>i.layerView===t&&i.text===r)||e.push({text:r,layerView:t})}function Q0e(e){return e.type==="bing-maps"}const so=[];let Ad=class extends le{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new te,this.view=null,this._allLayerViewsChange=r=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const i=(n=this.view)==null?void 0:n.allLayerViews;i&&(this.addHandles(i.map(s=>he(()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),i.forEach(s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),r!=null&&r.removed&&r.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([Nc(()=>{var r;return(r=this.view)==null?void 0:r.allLayerViews},"change",r=>this._allLayerViewsChange(r),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Qo(()=>{var r;return((r=this.view)==null?void 0:r.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var t;return(t=this.view)!=null&&t.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,r=t==null?void 0:t.allLayerViews;if(so.length=0,!t||!r)return void this._clear();r.forEach(n=>{var a,u;if(n.suspended||!((a=n.layer)!=null&&a.attributionVisible))return;const s=n.layer;if($4(s,"user"))return void af(so,n,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(n)){const c=this._fetchedAttributionData.get(n);return void(c?af(so,n,this._getDynamicAttribution(c,t,s)):$4(s)&&af(so,n,s.copyright))}return void this._fetchAttributionData(n)}const o="portalItem"in s?(u=s.portalItem)==null?void 0:u.accessInformation:void 0;af(so,n,o||s.copyright)});const i=r.find(n=>{var s;return((s=n.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"});if(this.view&&i){const n=K0e(this.view);if(n){const s=n.getAttributionText();for(let o=0;o<s.length;++o)af(so,i,s[o])}}Y0e(this.items,so)&&(this.items.removeAll(),this.items.addMany(so)),so.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const r=await Db(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const i=r.ok?this._createContributionIndex(r.value,Q0e(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)}this._updateAttributionItems()}_createContributionIndex(t,r){const i=t.contributors,n={};if(!i)return n;for(let s=0;s<i.length;s++){const o=i[s],a=o.coverageAreas;if(!a)return;for(const u of a){const c=u.bbox,h=u.zoomMin-(r&&u.zoomMin?1:0),f=u.zoomMax-(r&&u.zoomMax?1:0),m=new Be({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:ve.WGS84}),y={extent:hc(m),attribution:o.attribution||"",score:u.score!=null?u.score:100,id:s};for(let g=h;g<=f;g++)n[g]??(n[g]=[]),n[g].push(y)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(t,r,i){var h;const{extent:n,scale:s}=r;let o=((h=i.tileInfo)==null?void 0:h.scaleToZoom(s))??0;if(o=Math.min(t.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=t[o],u=Ub(n.center.clone().normalize(),r.spatialReference),c=new Set;return a?a.filter(f=>{const m=f.id,y=!c.has(m)&&u&&f.extent&&Jy(f.extent,u);return y&&c.add(m),y}).sort((f,m)=>m.score-f.score||f.objectId-m.objectId).map(f=>f.attribution).join(", "):""}};l([d({readOnly:!0,type:te})],Ad.prototype,"items",void 0),l([d({readOnly:!0})],Ad.prototype,"state",null),l([d()],Ad.prototype,"view",void 0),Ad=l([x("esri.widgets.Attribution.AttributionViewModel")],Ad);const sG=Ad,Vs={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function X0e(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:tge(e[t])}}}function ege(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function tge(e){return function(t,...r){ege(t)?hle(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function $_(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var rge=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},oG=function(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];Array.isArray(n)?oG(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=rge(n)),t.push(n))}},ige=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var n=[];return oG(r,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function di(e,t,...r){return typeof e!="function"||Qw(e)?ige(e,t,...r):e(t,...r)}function Y3e(...e){return e}const cd="esri-attribution",dd={base:cd,poweredBy:`${cd}__powered-by`,sources:`${cd}__sources`,open:`${cd}--open`,sourcesOpen:`${cd}__sources--open`,link:`${cd}__link`};let Ur=class extends S_{constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new sG}initialize(){this.addHandles(Nc(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,r)=>(t.includes(r.text)||t.push(r.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[dd.open]:this._isOpen};return di("div",{bind:this,class:this.classes(dd.base,Vs.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return di("div",{class:dd.poweredBy},"Powered by"," ",di("a",{class:dd.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:n}=this,s={[dd.sourcesOpen]:t,[Vs.interactive]:r};return di("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(dd.sources,s),innerHTML:n,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1;const{clientHeight:i,clientWidth:n,scrollWidth:s}=t,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(r=!0),this._isOpen){const u=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,u&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([d()],Ur.prototype,"_isOpen",void 0),l([d()],Ur.prototype,"_isInteractive",null),l([d()],Ur.prototype,"_attributionTextOverflowed",void 0),l([d()],Ur.prototype,"_prevSourceNodeHeight",void 0),l([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ur.prototype,"attributionText",null),l([d()],Ur.prototype,"icon",null),l([d()],Ur.prototype,"itemDelimiter",void 0),l([d()],Ur.prototype,"label",null),l([d(),$_("esri/widgets/Attribution/t9n/Attribution")],Ur.prototype,"messages",void 0),l([d()],Ur.prototype,"view",null),l([d({type:sG})],Ur.prototype,"viewModel",void 0),l([X0e()],Ur.prototype,"_toggleState",null),Ur=l([x("esri.widgets.Attribution")],Ur);const nge=Ur;function sge(e){var t,r;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((r=e==null?void 0:e.spatialReference)==null?void 0:r.isGeographic)||!1}const oge=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return nj(i),this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return l([d()],t.prototype,"goToOverride",void 0),l([d()],t.prototype,"view",void 0),t=l([x("esri.widgets.support.GoTo")],t),t};let Fu=class extends oge(le){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(he(()=>this.view,this._updateRotationWatcher,Jr))}destroy(){this.view=null}get canShowNorth(){return sge(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,r;(t=this.view)!=null&&t.ready&&(((r=this.view)==null?void 0:r.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:R("mapview-essential-goto-duration")}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const r=-t.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(t){this.removeAllHandles(),t&&this.addHandles(t.type==="2d"?he(()=>t==null?void 0:t.rotation,this._updateForRotation,Jr):he(()=>t==null?void 0:t.camera,this._updateForCamera,Jr))}};l([d({readOnly:!0})],Fu.prototype,"canShowNorth",null),l([d({readOnly:!0})],Fu.prototype,"orientation",void 0),l([d({readOnly:!0})],Fu.prototype,"state",null),l([d()],Fu.prototype,"view",void 0),Fu=l([x("esri.widgets.Compass.CompassViewModel")],Fu);const aG=Fu,x4="esri-compass",T4={base:x4,iconContainer:`${x4}__icon-container`};let go=class extends S_{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new aG,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return mO({button:()=>J(()=>import("./calcite-button-PjL6gqqj.js"),__vite__mapDeps([206,207,208,209,210,211,212,213,214,215,216,217])),icon:()=>J(()=>import("./calcite-icon-CHm37ziK.js"),__vite__mapDeps([218,216,208,209,215]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:r}=this.viewModel,{messages:i}=this;return di("div",{class:this.classes(T4.base,Vs.widget)},di("calcite-button",{class:Vs.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},di("div",{"aria-hidden":"true",class:T4.iconContainer,title:i.reset},di("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};l([d()],go.prototype,"goToOverride",null),l([d()],go.prototype,"icon",null),l([d()],go.prototype,"label",null),l([d(),$_("esri/widgets/Compass/t9n/Compass")],go.prototype,"messages",void 0),l([d()],go.prototype,"view",null),l([d({type:aG})],go.prototype,"viewModel",void 0),go=l([x("esri.widgets.Compass")],go);const age=go,M4="esri-navigation-toggle",E4={base:M4,isLayoutHorizontal:`${M4}--horizontal`};let Rd=class extends le{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(Qo(()=>{var t;return(t=this.view)==null?void 0:t.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var t,r;return(t=this.view)!=null&&t.ready&&((r=this.view)==null?void 0:r.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){var r;const t=(r=this.view)==null?void 0:r.inputManager;t&&(t.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};l([d({readOnly:!0})],Rd.prototype,"state",null),l([d()],Rd.prototype,"_navigationMode",void 0),l([d()],Rd.prototype,"view",void 0),Rd=l([x("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Rd);const lG=Rd;let vo=class extends S_{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new lG,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const i=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;i==null||i.setFocus(),this.toggle()}}loadDependencies(){return mO({button:()=>J(()=>import("./calcite-button-PjL6gqqj.js"),__vite__mapDeps([206,207,208,209,210,211,212,213,214,215,216,217]))})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var n,s;const t=((n=this.viewModel)==null?void 0:n.state)==="disabled",r=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",i=this.messages.toggle;return di("div",{class:this.classes(E4.base,Vs.widget,{[E4.isLayoutHorizontal]:this.layout==="horizontal"})},di("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:r?"outline-fill":"solid",class:Vs.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),di("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:r?"solid":"outline-fill",class:Vs.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};l([d()],vo.prototype,"icon",null),l([d()],vo.prototype,"label",null),l([d({value:"vertical"})],vo.prototype,"layout",null),l([d(),$_("esri/widgets/NavigationToggle/t9n/NavigationToggle")],vo.prototype,"messages",void 0),l([d()],vo.prototype,"view",null),l([d({type:lG})],vo.prototype,"viewModel",void 0),vo=l([x("esri.widgets.NavigationToggle")],vo);const lge=vo;let Du=class extends le{get canZoomIn(){var i,n,s;if(!((i=this.view)==null?void 0:i.ready))return!1;const r=(s=(n=this.view)==null?void 0:n.constraints)==null?void 0:s.effectiveMaxScale;return r===0||this._scale>r}get canZoomOut(){var n;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const i=(n=t.constraints)==null?void 0:n.effectiveMinScale;return i===0||this._scale<i}get _scale(){var r,i,n;const t=(i=(r=this.view)==null?void 0:r.animation)==null?void 0:i.target;return(t&&"then"in t||t==null?void 0:t.scale)??((n=this.view)==null?void 0:n.scale)??0}};l([d({readOnly:!0})],Du.prototype,"canZoomIn",null),l([d({readOnly:!0})],Du.prototype,"canZoomOut",null),l([d()],Du.prototype,"view",void 0),l([d()],Du.prototype,"_scale",null),Du=l([x("esri.widgets.Zoom.ZoomConditions2D")],Du);const uge=Du;let Ld=class extends le{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};l([d({readOnly:!0})],Ld.prototype,"canZoomIn",null),l([d({readOnly:!0})],Ld.prototype,"canZoomOut",null),l([d()],Ld.prototype,"view",void 0),Ld=l([x("esri.widgets.Zoom.ZoomConditions3D")],Ld);const cge=Ld;let ja=class extends le{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new uge({view:t}):t.type==="3d"&&(this._zoomConditions=new cge({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():W$(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():W$(t.goTo({zoomFactor:.5}))}};l([d()],ja.prototype,"_zoomConditions",void 0),l([d()],ja.prototype,"canZoomIn",null),l([d()],ja.prototype,"canZoomOut",null),l([d({readOnly:!0})],ja.prototype,"state",null),l([d()],ja.prototype,"view",null),ja=l([x("esri.widgets.Zoom.ZoomViewModel")],ja);const uG=ja,I4={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let wo=class extends S_{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new uG,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return mO({button:()=>J(()=>import("./calcite-button-PjL6gqqj.js"),__vite__mapDeps([206,207,208,209,210,211,212,213,214,215,216,217]))})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[I4.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return di("div",{class:this.classes(I4.base,Vs.widget,t)},di("calcite-button",{class:Vs.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),di("calcite-button",{class:Vs.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};l([d()],wo.prototype,"icon",null),l([d()],wo.prototype,"label",null),l([d({value:"vertical"})],wo.prototype,"layout",null),l([d(),$_("esri/widgets/Zoom/t9n/Zoom")],wo.prototype,"messages",void 0),l([d()],wo.prototype,"view",null),l([d({type:uG})],wo.prototype,"viewModel",void 0),wo=l([x("esri.widgets.Zoom")],wo);const dge=wo;function pge(e){return(e==null?void 0:e.view)!==void 0}let Zv=class extends Oye{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=r=>{this.components.forEach(i=>{const n=this._find(i),s=n==null?void 0:n.widget;pge(s)&&(s.view=r)})},this._componentsWatcher=(r,i)=>{this._removeComponents(i),this._addComponents(r),this._adjustPadding(r)}}initialize(){this.addHandles([he(()=>this.components,this._componentsWatcher,Jr),he(()=>this.view,this._updateViewAwareWidgets,Jr)])}_add(t,r,i,n,s){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,r,i,n,s)}_removeComponents(t){t.forEach(r=>{const i=this._find(r);i&&(this.remove(i),i.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(t){this.constructed&&t.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))}_createComponent(t){const r=this._createWidget(t);return new Wv({id:t,node:r})}_createWidget(t){const r=this.view;switch(t){case"attribution":return new nge({view:r});case"compass":return new age({view:r});case"navigation-toggle":return new lge({view:r});case"zoom":return new dge({view:r})}}};l([d()],Zv.prototype,"components",void 0),Zv=l([x("esri.views.ui.DefaultUI")],Zv);const cG=Zv;let Jv=class extends cG{constructor(t){super(t),this.components=["attribution","zoom"]}};l([d()],Jv.prototype,"components",void 0),Jv=l([x("esri.views.ui.2d.DefaultUI2D")],Jv);const dG=Jv;function k4(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}var UM;let Kv=UM=class extends j{constructor(e){super(e),this.color=new ce([0,0,0,1])}clone(){return new UM(k({color:this.color}))}};l([d({type:ce,json:{write:!0}})],Kv.prototype,"color",void 0),Kv=UM=l([x("esri.webmap.background.ColorBackground")],Kv);const hge=Kv;let pG,hG,fG,mG,yG,gG;async function fge(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:n,Stage:s}]=await Promise.all([J(()=>import("./webglDeps-wl8dfZuV.js"),__vite__mapDeps([133,75,74,45,134,135])),J(()=>import("./mapViewDeps-Bymes7ld.js"),__vite__mapDeps([136,76,77,23,78,73,70,79,72,74,45,75,46,80,40,81,137,110,84,85,86,87,138,139,135,95,119,118,25,26,117,133,134,140,90,141,71,32,29,20,142,143,144,112,145,146,147,61,148,88,149,83,150,151,152,153,154,155,156]))]);hG=e,fG=t,mG=r,yG=i,gG=n,pG=s}let fe=class extends hae(Ule(Ile(Kde))){constructor(t){super(t),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new my({getCollections:()=>{var r,i;return[(r=this.basemapView)==null?void 0:r.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new Bv({view:this}),this.graphicsView=null,this.stateManager=new Vr({constraints:new gU({view:this})}),this.stationaryManager=new Xf,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new Hfe(this),this.floors=new te,this.highlightOptions=new MU,this.inputManager=new zme({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new PU,this.type="2d",this.ui=new dG,this.test={takeScreenshot:async r=>dye(this._getScreenshotView(r),r)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([he(()=>this.viewpoint,()=>this.stationaryManager.flip(),Pl),this.on("resize",r=>this.stateManager.resize(r.width,r.height))]),Ioe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=nt(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Zme(this.featuresTilingScheme)}get constraintsInfo(){var i,n;const t=(i=this.defaultsFromMap)==null?void 0:i.tileInfo,r=this.spatialReference;return{lods:(n=t==null?void 0:t.spatialReference)!=null&&n.equals(r)?t.lods:null,spatialReference:r}}get state(){return this.stateManager.state}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:t,constraints:r,center:i,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(r!=null&&r.effectiveLODs||(o=-1),(!i||t===0&&o===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const r=t.targetGeometry,i=this.spatialReference;return M9(r.spatialReference,i)}set animation(t){const r=this._get("animation");if(t===r)return;if(r&&r.stop(),t!==this.animationManager.animation&&this.animationManager.stop(),!t||t.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",t),this.frameTask.animationInProgress=!0;const i=()=>{var n;this.destroyed||(t===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame()),this.frameTask.animationInProgress=!1)};t.when(i,i)}get background(){return k4(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get constraints(){var t;return(t=this.stateManager)==null?void 0:t.constraints}set constraints(t){t.view=this;const r=this.stateManager.constraints;this.stateManager.constraints=t,r==null||r.destroy()}get extent(){var t;return((t=this.stateManager)==null?void 0:t.extent)??null}set extent(t){this.stateManager.extent=t}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){var t;return((t=this.stage)==null?void 0:t.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(t){this.stateManager.resizeAlign=t}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(t){const{rotationEnabled:r}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=t,this.constraints.rotationEnabled=r}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){var t;return(t=this.featuresTilingScheme)==null?void 0:t.tileInfo}get updating(){var i,n,s,o;const t=!(!this.magnifier.visible||this.magnifier.position===null||!((i=this._magnifierView)!=null&&i.updatingHandles.updating)),r=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0)||t);if(R("esri-2d-log-updating")){const a=this.allLayerViews.reduce((u,c)=>({...u,[`${c.layer.id}(${c.layer.type})`]:!c.destroyed&&!("layerViews"in c)&&c.updating}),{});console.log(`Updating MapView: ${r}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(a)}
-> updatingMagnifier: ${t}
`)}return r}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(t){this.stateManager.viewpoint=t,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){var t;return((t=this.mapViewNavigation)==null?void 0:t.interacting)??!1}goTo(t,r){return this.goToManager.goTo(t,r)}async hitTest(t,r){return Yme(this,t,r)}async takeScreenshot(t){return cye(this._getScreenshotView(t),t)}toMap(t){if(!this.ready)return null;const r=y7(t)?m7(this,t):t;return this.stateManager.toMap(r)}toScreen(t,r){return this.stateManager.toScreen(t,r)}on(t,r,i,n){return this.inputManager&&this.viewEvents.on(t,r,i,n)||super.on(t,r)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t,r,i;return this.map&&"initialViewProperties"in this.map&&((r=(t=this.map)==null?void 0:t.initialViewProperties)==null?void 0:r.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}getDefaultTimeZone(){return k4(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(t){return DL.hasLayerViewModule(t)}importLayerView(t){return DL.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(z.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(t){var c;const r=this.toMap(t),i=await this.hitTest(t),n=this.allLayerViews.toArray().reverse(),s=new globalThis.Map(n.map(h=>[h.layer.uid,h])),o=[];let a=0,u=0;for(;a<i.results.length||u<n.length;){const h=i.results.at(a);if(h&&h.type!=="graphic"){++a;continue}const f=s.get((c=(h==null?void 0:h.layer)??(h==null?void 0:h.graphic.layer))==null?void 0:c.uid);if((!h||f)&&u<n.length&&n.at(u)!==f){const m=n.at(u);"fetchPopupFeaturesAtLocation"in m&&o.push({mapPoint:r,layerView:m}),++u}else h&&(o.push({graphic:h.graphic,layerView:f}),++a)}return{hits:o,location:r}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=bye(this.type);if(R("safari")&&R("safari")<9&&(t=new N("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:R("safari")})),t!=null)throw z.getLogger(this).warn("#validate()",t.message),t}loadAsyncDependencies(){return fge()}_getDefaultViewpoint(){var w;const{constraints:t,initialExtent:r,map:i,padding:n,size:s}=this;if(!t)return null;const o=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),u=o==null?void 0:o.viewpoint,c=((w=u==null?void 0:u.targetGeometry)==null?void 0:w.extent)??r,h=c==null?void 0:c.center,f=(u==null?void 0:u.rotation)??0,m=(u==null?void 0:u.scale)||c&&w_(c,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),y=a.center??h,g=a.rotation??f,v=a.scale??m;return y&&v?new Xn({targetGeometry:y,scale:v,rotation:g}):null}_startup(){var a;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(a=this.defaultsFromMap.extent)==null?void 0:a.center),this.graphics.owner=this;const r=new pG(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=r,this._magnifierView=new gG,this._magnifierView.magnifier=this.magnifier;const i=new mG({view:this});this._set("labelManager",i);const n=new Bfe({view:this});this._set("animationManager",n);const s=new yG({view:this,animationManager:n});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",u=>this.fatalError=u.error),he(()=>this.stationary,u=>r.stationary=u,un),he(()=>this.background,u=>{r.backgroundColor=u==null?void 0:u.color,this._magnifierView.backgroundColor=u==null?void 0:u.color},un),he(()=>this.magnifier,u=>this._magnifierView.magnifier=u,un),he(()=>this.renderingOptions,u=>r.renderingOptions=u,un),he(()=>this.highlightOptions,u=>r.highlightOptions=u,un),he(()=>this.state.id,()=>r.state=this.state,un)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(u=>u(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(r=>{this.stage.addChild(r.container)});const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const t=new eme(dae.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const r=new hG({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new fG(t)});this._set("graphicsView",r)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){var o;const{allLayerViews:r,padding:i,size:n,stage:s}=this;return{allLayerViews:r,backgroundColor:t!=null&&t.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:i,size:n,stage:s}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const r of this.allLayerViews)r.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const r of this.allLayerViews)r.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};fe.type="2d",l([d({readOnly:!0})],fe.prototype,"animationManager",void 0),l([d({constructOnly:!0})],fe.prototype,"deactivatedWebGLExtensions",void 0),l([d({constructOnly:!0})],fe.prototype,"debugWebGLExtensions",void 0),l([d({readOnly:!0})],fe.prototype,"featuresTilingScheme",void 0),l([d({readOnly:!0})],fe.prototype,"fullOpacity",void 0),l([d()],fe.prototype,"goToManager",void 0),l([d({readOnly:!0})],fe.prototype,"graphicsTileStore",null),l([d()],fe.prototype,"graphicsView",void 0),l([d()],fe.prototype,"stateManager",void 0),l([d()],fe.prototype,"constraintsInfo",null),l([d({readOnly:!0})],fe.prototype,"state",null),l([d()],fe.prototype,"initialExtentRequired",null),l([d()],fe.prototype,"labelManager",void 0),l([d({readOnly:!0})],fe.prototype,"mapViewNavigation",void 0),l([d({constructOnly:!0})],fe.prototype,"renderCanvas",void 0),l([d()],fe.prototype,"renderingOptions",void 0),l([d({constructOnly:!0})],fe.prototype,"supersampleScreenshotsEnabled",void 0),l([d({readOnly:!0})],fe.prototype,"supportsGround",void 0),l([d()],fe.prototype,"_defaultsFromMapSettings",null),l([d({readOnly:!0})],fe.prototype,"typeSpecificPreconditionsReady",null),l([d()],fe.prototype,"animation",null),l([d({type:hge})],fe.prototype,"background",null),l([d()],fe.prototype,"center",null),l([d({type:gU})],fe.prototype,"constraints",null),l([d()],fe.prototype,"extent",null),l([d()],fe.prototype,"floors",void 0),l([d({type:MU})],fe.prototype,"highlightOptions",void 0),l([d({readOnly:!0})],fe.prototype,"inputManager",void 0),l([d()],fe.prototype,"map",void 0),l([d()],fe.prototype,"padding",null),l([d({readOnly:!0})],fe.prototype,"rendering",null),l([d()],fe.prototype,"resizeAlign",null),l([d({readOnly:!0})],fe.prototype,"resolution",null),l([d()],fe.prototype,"rotation",null),l([d()],fe.prototype,"scale",null),l([d({constructOnly:!0})],fe.prototype,"spatialReferenceLocked",void 0),l([d()],fe.prototype,"stationary",null),l([d({readOnly:!0})],fe.prototype,"tileInfo",null),l([d({type:PU,readOnly:!0})],fe.prototype,"timeline",void 0),l([d({readOnly:!0})],fe.prototype,"type",void 0),l([d({readOnly:!0})],fe.prototype,"updating",null),l([d()],fe.prototype,"viewpoint",null),l([d()],fe.prototype,"zoom",null),l([d({readOnly:!0})],fe.prototype,"navigating",null),l([d(),je(e=>e instanceof cG?e:Cb(dG,e))],fe.prototype,"ui",void 0),fe=l([x("esri.views.MapView")],fe);const mge=fe;var O4,P4,vG={exports:{}};P4=function(){function e(n,s){function o(){this.constructor=n}o.prototype=s.prototype,n.prototype=new o}function t(n,s,o,a){var u=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(u,t.prototype),u.expected=s,u.found=o,u.location=a,u.name="SyntaxError",u}function r(n,s,o){return o=o||" ",n.length>s?n:(s-=n.length,n+(o+=o.repeat(s)).slice(0,s))}function i(n,s){var o,a={},u=(s=s!==void 0?s:{}).grammarSource,c={start:eP},h=eP,f="none",m=")",y=",",g="(",v="%",w="px",b="cm",_="mm",$="in",T="pt",E="pc",I="deg",C="rad",L="grad",H="turn",V="#",Y=".",ee="e",Te=/^[ \t\n\r]/,oe=/^[a-z\-]/,St=/^[0-9a-fA-F]/,Nr=/^[+\-]/,Ye=/^[0-9]/,q=Xs("none"),pe=Jt("none",!1),Me=Jt(")",!1),ot=Jt(",",!1),Ct=Xs("whitespace"),Xl=Rh([" ","	",`
`,"\r"],!1,!1),Ys=Xs("function"),Ah=Jt("(",!1),Qs=Xs("identifier"),eu=Rh([["a","z"],"-"],!1,!1),xB=Xs("percentage"),TB=Jt("%",!1),MB=Xs("length"),EB=Jt("px",!1),IB=Jt("cm",!1),kB=Jt("mm",!1),OB=Jt("in",!1),PB=Jt("pt",!1),CB=Jt("pc",!1),AB=Xs("angle"),RB=Jt("deg",!1),LB=Jt("rad",!1),NB=Jt("grad",!1),FB=Jt("turn",!1),DB=Xs("number"),jB=Xs("color"),zB=Jt("#",!1),KO=Rh([["0","9"],["a","f"],["A","F"]],!1,!1),YO=Rh(["+","-"],!1,!1),oa=Rh([["0","9"]],!1,!1),VB=Jt(".",!1),UB=Jt("e",!1),GB=function(){return[]},qB=function(M,D){return{type:"function",name:M,parameters:D||[]}},BB=function(M,D){return D.length>0?xH(M,D,3):[M]},HB=function(M){return{type:"quantity",value:M.value,unit:M.unit}},WB=function(M){return{type:"color",colorType:M.type,value:M.value}},ZB=function(M){return M},JB=function(){return w0()},KB=function(M){return{value:M,unit:"%"}},YB=function(M){return{value:M,unit:"px"}},QB=function(M){return{value:M,unit:"cm"}},XB=function(M){return{value:M,unit:"mm"}},eH=function(M){return{value:M,unit:"in"}},tH=function(M){return{value:M,unit:"pt"}},rH=function(M){return{value:M,unit:"pc"}},iH=function(M){return{value:M,unit:"deg"}},nH=function(M){return{value:M,unit:"rad"}},sH=function(M){return{value:M,unit:"grad"}},oH=function(M){return{value:M,unit:"turn"}},aH=function(M){return{value:M,unit:null}},lH=function(){return{type:"hex",value:w0()}},uH=function(M){return{type:"function",value:M}},cH=function(){return{type:"named",value:w0()}},dH=function(){return parseFloat(w0())},A=0,at=0,v0=[{line:1,column:1}],ls=0,j_=[],re=0;if("startRule"in s){if(!(s.startRule in c))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');h=c[s.startRule]}function w0(){return n.substring(at,A)}function Jt(M,D){return{type:"literal",text:M,ignoreCase:D}}function Rh(M,D,U){return{type:"class",parts:M,inverted:D,ignoreCase:U}}function pH(){return{type:"end"}}function Xs(M){return{type:"other",description:M}}function QO(M){var D,U=v0[M];if(U)return U;for(D=M-1;!v0[D];)D--;for(U={line:(U=v0[D]).line,column:U.column};D<M;)n.charCodeAt(D)===10?(U.line++,U.column=1):U.column++,D++;return v0[M]=U,U}function XO(M,D,U){var $e=QO(M),At=QO(D);return{source:u,start:{offset:M,line:$e.line,column:$e.column},end:{offset:D,line:At.line,column:At.column}}}function we(M){A<ls||(A>ls&&(ls=A,j_=[]),j_.push(M))}function hH(M,D,U){return new t(t.buildMessage(M,D),M,D,U)}function eP(){var M;return(M=fH())===a&&(M=mH()),M}function fH(){var M,D;return re++,M=A,Kt(),n.substr(A,4)===f?(D=f,A+=4):(D=a,re===0&&we(pe)),D!==a?(Kt(),at=M,M=GB()):(A=M,M=a),re--,M===a&&re===0&&we(q),M}function mH(){var M,D;if(M=[],(D=z_())!==a)for(;D!==a;)M.push(D),D=z_();else M=a;return M}function z_(){var M,D,U,$e;return M=A,Kt(),(D=gH())!==a?(Kt(),(U=yH())===a&&(U=null),Kt(),n.charCodeAt(A)===41?($e=m,A++):($e=a,re===0&&we(Me)),$e!==a?(Kt(),at=M,M=qB(D,U)):(A=M,M=a)):(A=M,M=a),M}function yH(){var M,D,U,$e,At,ft,Bi,b0;if(M=A,(D=V_())!==a){for(U=[],$e=A,At=Kt(),n.charCodeAt(A)===44?(ft=y,A++):(ft=a,re===0&&we(ot)),ft===a&&(ft=null),Bi=Kt(),(b0=V_())!==a?$e=At=[At,ft,Bi,b0]:(A=$e,$e=a);$e!==a;)U.push($e),$e=A,At=Kt(),n.charCodeAt(A)===44?(ft=y,A++):(ft=a,re===0&&we(ot)),ft===a&&(ft=null),Bi=Kt(),(b0=V_())!==a?$e=At=[At,ft,Bi,b0]:(A=$e,$e=a);at=M,M=BB(D,U)}else A=M,M=a;return M}function V_(){var M,D;return M=A,(D=vH())===a&&(D=wH())===a&&(D=bH())===a&&(D=_H()),D!==a&&(at=M,D=HB(D)),(M=D)===a&&(M=A,(D=SH())!==a&&(at=M,D=WB(D)),M=D),M}function Kt(){var M,D;for(re++,M=[],Te.test(n.charAt(A))?(D=n.charAt(A),A++):(D=a,re===0&&we(Xl));D!==a;)M.push(D),Te.test(n.charAt(A))?(D=n.charAt(A),A++):(D=a,re===0&&we(Xl));return re--,D=a,re===0&&we(Ct),M}function gH(){var M,D,U;return re++,M=A,(D=tP())!==a?(n.charCodeAt(A)===40?(U=g,A++):(U=a,re===0&&we(Ah)),U!==a?(at=M,M=ZB(D)):(A=M,M=a)):(A=M,M=a),re--,M===a&&(D=a,re===0&&we(Ys)),M}function tP(){var M,D,U;if(re++,M=A,D=[],oe.test(n.charAt(A))?(U=n.charAt(A),A++):(U=a,re===0&&we(eu)),U!==a)for(;U!==a;)D.push(U),oe.test(n.charAt(A))?(U=n.charAt(A),A++):(U=a,re===0&&we(eu));else D=a;return D!==a&&(at=M,D=JB()),re--,(M=D)===a&&(D=a,re===0&&we(Qs)),M}function vH(){var M,D,U;return re++,M=A,Kt(),(D=qi())!==a?(n.charCodeAt(A)===37?(U=v,A++):(U=a,re===0&&we(TB)),U!==a?(at=M,M=KB(D)):(A=M,M=a)):(A=M,M=a),re--,M===a&&re===0&&we(xB),M}function wH(){var M,D,U;return re++,M=A,Kt(),(D=qi())!==a?(n.substr(A,2)===w?(U=w,A+=2):(U=a,re===0&&we(EB)),U!==a?(at=M,M=YB(D)):(A=M,M=a)):(A=M,M=a),M===a&&(M=A,Kt(),(D=qi())!==a?(n.substr(A,2)===b?(U=b,A+=2):(U=a,re===0&&we(IB)),U!==a?(at=M,M=QB(D)):(A=M,M=a)):(A=M,M=a),M===a&&(M=A,Kt(),(D=qi())!==a?(n.substr(A,2)===_?(U=_,A+=2):(U=a,re===0&&we(kB)),U!==a?(at=M,M=XB(D)):(A=M,M=a)):(A=M,M=a),M===a&&(M=A,Kt(),(D=qi())!==a?(n.substr(A,2)===$?(U=$,A+=2):(U=a,re===0&&we(OB)),U!==a?(at=M,M=eH(D)):(A=M,M=a)):(A=M,M=a),M===a&&(M=A,Kt(),(D=qi())!==a?(n.substr(A,2)===T?(U=T,A+=2):(U=a,re===0&&we(PB)),U!==a?(at=M,M=tH(D)):(A=M,M=a)):(A=M,M=a),M===a&&(M=A,Kt(),(D=qi())!==a?(n.substr(A,2)===E?(U=E,A+=2):(U=a,re===0&&we(CB)),U!==a?(at=M,M=rH(D)):(A=M,M=a)):(A=M,M=a)))))),re--,M===a&&re===0&&we(MB),M}function bH(){var M,D,U;return re++,M=A,(D=qi())!==a?(n.substr(A,3)===I?(U=I,A+=3):(U=a,re===0&&we(RB)),U!==a?(at=M,M=iH(D)):(A=M,M=a)):(A=M,M=a),M===a&&(M=A,(D=qi())!==a?(n.substr(A,3)===C?(U=C,A+=3):(U=a,re===0&&we(LB)),U!==a?(at=M,M=nH(D)):(A=M,M=a)):(A=M,M=a),M===a&&(M=A,(D=qi())!==a?(n.substr(A,4)===L?(U=L,A+=4):(U=a,re===0&&we(NB)),U!==a?(at=M,M=sH(D)):(A=M,M=a)):(A=M,M=a),M===a&&(M=A,(D=qi())!==a?(n.substr(A,4)===H?(U=H,A+=4):(U=a,re===0&&we(FB)),U!==a?(at=M,M=oH(D)):(A=M,M=a)):(A=M,M=a)))),re--,M===a&&(D=a,re===0&&we(AB)),M}function _H(){var M,D;return re++,M=A,Kt(),(D=qi())!==a?(at=M,M=aH(D)):(A=M,M=a),re--,M===a&&re===0&&we(DB),M}function SH(){var M,D,U,$e;if(re++,M=A,n.charCodeAt(A)===35?(D=V,A++):(D=a,re===0&&we(zB)),D!==a){if(U=[],St.test(n.charAt(A))?($e=n.charAt(A),A++):($e=a,re===0&&we(KO)),$e!==a)for(;$e!==a;)U.push($e),St.test(n.charAt(A))?($e=n.charAt(A),A++):($e=a,re===0&&we(KO));else U=a;U!==a?(at=M,M=lH()):(A=M,M=a)}else A=M,M=a;return M===a&&(M=A,(D=z_())!==a&&(at=M,D=uH(D)),(M=D)===a&&(M=A,(D=tP())!==a&&(at=M,D=cH()),M=D)),re--,M===a&&(D=a,re===0&&we(jB)),M}function qi(){var M,D,U,$e,At,ft,Bi;for(M=A,Nr.test(n.charAt(A))?(n.charAt(A),A++):re===0&&we(YO),D=A,U=[],Ye.test(n.charAt(A))?($e=n.charAt(A),A++):($e=a,re===0&&we(oa));$e!==a;)U.push($e),Ye.test(n.charAt(A))?($e=n.charAt(A),A++):($e=a,re===0&&we(oa));if(n.charCodeAt(A)===46?($e=Y,A++):($e=a,re===0&&we(VB)),$e!==a){if(At=[],Ye.test(n.charAt(A))?(ft=n.charAt(A),A++):(ft=a,re===0&&we(oa)),ft!==a)for(;ft!==a;)At.push(ft),Ye.test(n.charAt(A))?(ft=n.charAt(A),A++):(ft=a,re===0&&we(oa));else At=a;At!==a?D=U=[U,$e,At]:(A=D,D=a)}else A=D,D=a;if(D===a)if(D=[],Ye.test(n.charAt(A))?(U=n.charAt(A),A++):(U=a,re===0&&we(oa)),U!==a)for(;U!==a;)D.push(U),Ye.test(n.charAt(A))?(U=n.charAt(A),A++):(U=a,re===0&&we(oa));else D=a;if(D!==a){if(U=A,n.charCodeAt(A)===101?($e=ee,A++):($e=a,re===0&&we(UB)),$e!==a){if(Nr.test(n.charAt(A))?(At=n.charAt(A),A++):(At=a,re===0&&we(YO)),At===a&&(At=null),ft=[],Ye.test(n.charAt(A))?(Bi=n.charAt(A),A++):(Bi=a,re===0&&we(oa)),Bi!==a)for(;Bi!==a;)ft.push(Bi),Ye.test(n.charAt(A))?(Bi=n.charAt(A),A++):(Bi=a,re===0&&we(oa));else ft=a;ft!==a?U=$e=[$e,At,ft]:(A=U,U=a)}else A=U,U=a;U===a&&(U=null),at=M,M=dH()}else A=M,M=a;return M}function $H(M,D){return M.map(function(U){return U[D]})}function xH(M,D,U){return[M].concat($H(D,U))}if((o=h())!==a&&A===n.length)return o;throw o!==a&&A<n.length&&we(pH()),hH(j_,ls<n.length?n.charAt(ls):null,ls<n.length?XO(ls,ls+1):XO(ls,ls))}return e(t,Error),t.prototype.format=function(n){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<n.length;o++)if(n[o].source===this.location.source){a=n[o].text.split(/\r\n|\n|\r/g);break}var u=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(u):u,h=this.location.source+":"+c.line+":"+c.column;if(a){var f=this.location.end,m=r("",c.line.toString().length," "),y=a[u.line-1],g=(u.line===f.line?f.column:y.length+1)-u.column||1;s+=`
 --> `+h+`
`+m+` |
`+c.line+" | "+y+`
`+m+" | "+r("",u.column-1," ")+r("",g,"^")}else s+=`
 at `+h}return s},t.buildMessage=function(n,s){var o={literal:function(y){return'"'+u(y.text)+'"'},class:function(y){var g=y.parts.map(function(v){return Array.isArray(v)?c(v[0])+"-"+c(v[1]):c(v)});return"["+(y.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(y){return y.description}};function a(y){return y.charCodeAt(0).toString(16).toUpperCase()}function u(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function c(y){return y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function h(y){return o[y.type](y)}function f(y){var g,v,w=y.map(h);if(w.sort(),w.length>0){for(g=1,v=1;g<w.length;g++)w[g-1]!==w[g]&&(w[v]=w[g],v++);w.length=v}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}function m(y){return y?'"'+u(y)+'"':"end of input"}return"Expected "+f(n)+" but "+m(s)+" found."},{SyntaxError:t,parse:i}},(O4=vG).exports&&(O4.exports=P4());var yge=vG.exports;function wG(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=C4(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new N("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:C4(r.value)}});t.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!Xre(t[r].effects,t[r+1].effects))throw new N("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});eie(t[r].effects,t[r+1].effects)}return t.sort((r,i)=>i.scale-r.scale),t}function C4(e){let t;if(!e)return[];try{t=yge.parse(e)}catch(r){throw new N("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>gge(r))}function gge(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return vge(e);case"opacity":return wge(e);case"hue-rotate":return bge(e);case"blur":return _ge(e);case"drop-shadow":return Sge(e);case"bloom":return $ge(e)}}catch(t){throw t.details.filter=e,t}throw new N("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function vge(e){let t=1;return Eh(e.parameters,1),e.parameters.length===1&&(t=Hn(e.parameters[0])),new Px(e.name,t)}function wge(e){let t=1;return Eh(e.parameters,1),e.parameters.length===1&&(t=Hn(e.parameters[0])),new A8(t)}function bge(e){let t=0;return Eh(e.parameters,1),e.parameters.length===1&&(t=kge(e.parameters[0])),new P8(t)}function _ge(e){let t=0;return Eh(e.parameters,1),e.parameters.length===1&&(t=vO(e.parameters[0]),c0(t,e.parameters[0])),new M8(t)}function Sge(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new N("effect:type-error","Accepts only one color",{});r=Oge(i)}else{const n=vO(i);if(Object.isFrozen(t))throw new N("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&c0(n,i)}if(t.length<2||t.length>3)throw new N("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new k8(t[0],t[1],t[2]||0,r||bG("black"))}function $ge(e){let t=1,r=0,i=0;return Eh(e.parameters,3),e.parameters[0]&&(t=Hn(e.parameters[0])),e.parameters[1]&&(r=vO(e.parameters[1]),c0(r,e.parameters[1])),e.parameters[2]&&(i=Hn(e.parameters[2])),new x8(t,r,i)}function Eh(e,t){if(e.length>t)throw new N("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function x_(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in gO)return"<length>";if(e.unit in yO)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function c0(e,t){if(e<0)throw new N("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function xge(e){if(e.type!=="quantity"||e.unit!==null)throw new N("effect:type-error",`Expected <double>, Actual: ${x_(e)}`,{term:e})}function Tge(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new N("effect:type-error",`Expected <double> or <percentage>, Actual: ${x_(e)}`,{term:e})}const yO={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Mge(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&yO[e.unit]!=null))throw new N("effect:type-error",`Expected <angle>, Actual: ${x_(e)}`,{term:e})}const gO={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Ege(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&gO[e.unit]!=null))throw new N("effect:type-error",`Expected <length>, Actual: ${x_(e)}`,{term:e})}function Hn(e){Tge(e);const t=e.value;return c0(t,e),e.unit==="%"?.01*t:t}function Ige(e){return xge(e),c0(e.value,e),e.value}function kge(e){return Mge(e),e.value*yO[e.unit]||0}function vO(e){return Ege(e),e.value*gO[e.unit]||0}function Oge(e){switch(e.colorType){case"hex":return Jee(e.value);case"named":return bG(e.value);case"function":return Age(e.value)}}function bG(e){if(!K6(e))throw new N("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Zee(e)}const Pge=/^rgba?/i,Cge=/^hsla?/i;function Age(e){if(Eh(e.parameters,4),Pge.test(e.name))return[Hn(e.parameters[0]),Hn(e.parameters[1]),Hn(e.parameters[2]),e.parameters[3]?Hn(e.parameters[3]):1];if(Cge.test(e.name))return Y6(Ige(e.parameters[0]),Hn(e.parameters[1]),Hn(e.parameters[2]),e.parameters[3]?Hn(e.parameters[3]):1);throw new N("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function Iy(e,t,r){var i;try{return Lge(e)}catch(n){(i=r==null?void 0:r.messages)==null||i.push(n)}return null}function ky(e,t,r,i){try{const n=Rge(e);Cr(r,n,t)}catch(n){i.messages&&i.messages.push(n)}}function Rge(e){const t=wG(e);return t?tie(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:i})=>({scale:r,value:i.map(n=>n.toJSON())})):null}function Lge(e){if(!e||e.length===0)return null;if(Nge(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:A4(r.value)});return t}return A4(e)}function Nge(e){const t=e[0];return!!t&&"scale"in t}function A4(e){if(!(e!=null&&e.length))return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[oo(r,"amount")];break;case"blur":i=[oo(r,"radius","pt")];break;case"hue-rotate":i=[oo(r,"angle","deg")];break;case"drop-shadow":i=[oo(r,"xoffset","pt"),oo(r,"yoffset","pt"),oo(r,"blurRadius","pt"),Fge(r,"color")];break;case"bloom":i=[oo(r,"strength"),oo(r,"radius","pt"),oo(r,"threshold")]}const n=`${r.type}(${i.filter(Boolean).join(" ")})`;wG(n),t.push(n)}return t.join(" ")}function oo(e,t,r){if(e[t]==null)throw new N("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function Fge(e,t){if(e[t]==null)throw new N("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const Dge={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},R4={read:{reader:Iy},write:{allowNull:!0,writer:ky}},jge={json:{read:!1,write:!1,origins:{"web-map":R4,"portal-item":R4}}},_G=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return l([d(Dge)],t.prototype,"blendMode",void 0),l([d(jge)],t.prototype,"effect",void 0),t=l([x("esri.layers.mixins.BlendLayer")],t),t},SG=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&zge(r,i.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===r.minScale&&n.maxScale===r.maxScale?n:r}};return l([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),l([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),l([d({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=l([x("esri.layers.mixins.ScaleRangeLayer")],t),t};function zge(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}var GM;let em=GM=class extends j{constructor(e){super(e)}async collectRequiredFields(e,t){return Rr(e,t,this.expression)}clone(){return new GM({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};l([d({type:String,json:{write:!0}})],em.prototype,"expression",void 0),l([d({type:String,json:{write:!0}})],em.prototype,"title",void 0),em=GM=l([x("esri.symbols.support.FeatureExpressionInfo")],em);const L4=em,wO={unknown:1,inches:Zi(1,"meters","inches"),feet:Zi(1,"meters","feet"),"us-feet":Zi(1,"meters","us-feet"),yards:Zi(1,"meters","yards"),miles:Zi(1,"meters","miles"),"nautical-miles":Zi(1,"meters","nautical-miles"),millimeters:Zi(1,"meters","millimeters"),centimeters:Zi(1,"meters","centimeters"),decimeters:Zi(1,"meters","decimeters"),meters:Zi(1,"meters","meters"),kilometers:Zi(1,"meters","kilometers"),"decimal-degrees":1/AX(1,"meters",bt.radius)};function cIe(e){return 1/(wO[e]||1)}function Vge(){const e=Object.keys(wO);return e.sort(),e}const Uge=Vge();var qM;const Eg=Lr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),N4=new Ee({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let bo=qM=class extends j{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write({},i),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new qM({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&uK(this.featureExpressionInfo,e.featureExpressionInfo)}};l([d({type:L4,json:{write:!0}})],bo.prototype,"featureExpressionInfo",void 0),l([G("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],bo.prototype,"readFeatureExpressionInfo",null),l([Z("featureExpressionInfo",{featureExpressionInfo:{type:L4},"featureExpression.value":{type:[0]}})],bo.prototype,"writeFeatureExpressionInfo",null),l([d({type:Eg.apiValues,nonNullable:!0,json:{type:Eg.jsonValues,read:Eg.read,write:{writer:Eg.write,isRequired:!0}}})],bo.prototype,"mode",null),l([d({type:Number,json:{write:!0}})],bo.prototype,"offset",void 0),l([d({type:Uge,json:{type:String,read:N4.read,write:N4.write}})],bo.prototype,"unit",null),bo=qM=l([x("esri.symbols.support.ElevationInfo")],bo);const $G=bo;let _o=class extends _G(SG(bk)){constructor(t){super(t),this.elevationInfo=null,this.graphics=new vc,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}on(t,r){return super.on(t,r)}graphicChanged(t){this.emit("graphic-update",t)}};l([d({type:$G})],_o.prototype,"elevationInfo",void 0),l([d(iT(vc,"graphics"))],_o.prototype,"graphics",void 0),l([d({type:["show","hide"]})],_o.prototype,"listMode",void 0),l([d()],_o.prototype,"screenSizePerspectiveEnabled",void 0),l([d({readOnly:!0})],_o.prototype,"type",void 0),l([d({constructOnly:!0})],_o.prototype,"internal",void 0),_o=l([x("esri.layers.GraphicsLayer")],_o);const F4=_o;var BM;let tm=BM=class extends j{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new BM({minValue:this.minValue,maxValue:this.maxValue})}};l([d({type:Number,json:{write:!0}})],tm.prototype,"minValue",void 0),l([d({type:Number,json:{write:!0}})],tm.prototype,"maxValue",void 0),tm=BM=l([x("esri.renderers.support.AuthoringInfoClassBreakInfo")],tm);var HM;let el=HM=class extends j{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new HM({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:k(this.classBreakInfos)})}};l([d({type:String,json:{write:!0}})],el.prototype,"field",void 0),l([d({type:String,json:{write:!0}})],el.prototype,"normalizationField",void 0),l([d({type:String,json:{write:!0}})],el.prototype,"label",void 0),l([d({type:[tm],json:{write:!0}})],el.prototype,"classBreakInfos",void 0),el=HM=l([x("esri.renderers.support.AuthoringInfoFieldInfo")],el);var WM;let Nd=WM=class extends j{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new WM({label:this.label,value:this.value,size:this.size})}};l([d({type:String,json:{write:!0}})],Nd.prototype,"label",void 0),l([d({type:Number,json:{write:!0}})],Nd.prototype,"size",void 0),l([d({type:Number,json:{write:!0}})],Nd.prototype,"value",void 0),Nd=WM=l([x("esri.renderers.support.AuthoringInfoSizeStop")],Nd);const Gge=Nd;var ZM;const Ig=new Ee({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),kg=new Ee({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),D4={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},j4=["high-to-low","above-and-below","centered-on","extremes"],z4=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],V4=["seconds","minutes","hours","days","months","years"],qge=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let Qt=ZM=class extends j{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new ZM({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:k(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};l([d({types:D4,json:{write:!0}})],Qt.prototype,"endTime",void 0),l([je("endTime")],Qt.prototype,"castEndTime",null),l([d({type:String,json:{write:!0}})],Qt.prototype,"field",void 0),l([d({type:Number,json:{write:!0}})],Qt.prototype,"maxSliderValue",void 0),l([d({type:Number,json:{write:!0}})],Qt.prototype,"minSliderValue",void 0),l([d({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Qt.prototype,"normalizationField",null),l([d({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Qt.prototype,"referenceSizeScale",null),l([d({type:qge,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Qt.prototype,"referenceSizeSymbolStyle",null),l([d({types:D4,json:{write:!0}})],Qt.prototype,"startTime",void 0),l([je("startTime")],Qt.prototype,"castStartTime",null),l([d({type:[Gge],json:{origins:{"web-scene":{write:!1}},write:!0}})],Qt.prototype,"sizeStops",null),l([d({type:Ig.apiValues,value:null,json:{type:Ig.jsonValues,read:Ig.read,write:Ig.write}})],Qt.prototype,"style",null),l([d({type:z4,value:null,json:{type:z4,origins:{"web-scene":{type:j4,write:{writer:(e,t)=>{j4.includes(e)&&(t.theme=e)}}}},write:!0}})],Qt.prototype,"theme",null),l([d({type:kg.apiValues,json:{type:kg.jsonValues,read:kg.read,write:kg.write}})],Qt.prototype,"type",void 0),l([d({type:V4,json:{type:V4,write:!0}})],Qt.prototype,"units",void 0),Qt=ZM=l([x("esri.renderers.support.AuthoringInfoVisualVariable")],Qt);const Bge=Qt;let Yv=class extends j{constructor(t){super(t),this.type=null}};l([d({readOnly:!0,json:{read:!1,write:!0}})],Yv.prototype,"type",void 0),Yv=l([x("esri.rest.support.ColorRamp")],Yv);const bO=Yv;var JM;let ju=JM=class extends bO{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new JM({fromColor:k(this.fromColor),toColor:k(this.toColor),algorithm:this.algorithm})}};l([ne({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],ju.prototype,"algorithm",void 0),l([d({type:ce,json:{type:[Ve],write:!0}})],ju.prototype,"fromColor",void 0),l([d({type:ce,json:{type:[Ve],write:!0}})],ju.prototype,"toColor",void 0),l([d({type:["algorithmic"]})],ju.prototype,"type",void 0),ju=JM=l([x("esri.rest.support.AlgorithmicColorRamp")],ju);const _O=ju;var KM;let rm=KM=class extends bO{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new KM({colorRamps:k(this.colorRamps)})}};l([d({type:[_O],json:{write:!0}})],rm.prototype,"colorRamps",void 0),l([d({type:["multipart"]})],rm.prototype,"type",void 0),rm=KM=l([x("esri.rest.support.MultipartColorRamp")],rm);const xG=rm,Hge={key:"type",base:bO,typeMap:{algorithmic:_O,multipart:xG}};function Wge(e){return e!=null&&e.type?e.type==="algorithmic"?_O.fromJSON(e):e.type==="multipart"?xG.fromJSON(e):null:null}var YM;const au=new Ee({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Og=new Ee({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),U4=new Ee({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),G4=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Zge=["high-to-low","above-and-below","above","below"],Jge=["flow-line","wave-front"],Kge=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let mt=YM=class extends j{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?Wge(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new YM({classificationMethod:this.classificationMethod,colorRamp:k(this.colorRamp),fadeRatio:k(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(0),field1:k(this.field1),field2:k(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};l([d({type:au.apiValues,value:null,json:{type:au.jsonValues,read:au.read,write:au.write,origins:{"web-document":{default:"manual",type:au.jsonValues,read:au.read,write:au.write}}}})],mt.prototype,"classificationMethod",null),l([d({types:Hge,json:{write:!0}})],mt.prototype,"colorRamp",void 0),l([G("colorRamp")],mt.prototype,"readColorRamp",null),l([d({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mt.prototype,"fadeRatio",void 0),l([d({type:[String],value:null,json:{write:!0}})],mt.prototype,"fields",null),l([d({type:el,value:null,json:{write:!0}})],mt.prototype,"field1",null),l([d({type:el,value:null,json:{write:!0}})],mt.prototype,"field2",null),l([d({type:Jge,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mt.prototype,"flowTheme",null),l([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],mt.prototype,"focus",null),l([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],mt.prototype,"isAutoGenerated",void 0),l([d({type:Number,value:null,json:{type:Ve,write:!0}})],mt.prototype,"numClasses",null),l([d({type:G4,json:{type:G4,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],mt.prototype,"lengthUnit",void 0),l([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mt.prototype,"maxSliderValue",void 0),l([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mt.prototype,"minSliderValue",void 0),l([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mt.prototype,"statistics",null),l([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],mt.prototype,"standardDeviationInterval",null),l([d({type:Og.apiValues,value:null,json:{type:Og.jsonValues,read:Og.read,write:Og.write,origins:{"web-scene":{type:U4.jsonValues,write:{writer:U4.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],mt.prototype,"type",null),l([d({type:[Bge],json:{write:!0}})],mt.prototype,"visualVariables",void 0),l([d({type:Kge,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mt.prototype,"univariateSymbolStyle",null),l([d({type:Zge,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mt.prototype,"univariateTheme",null),mt=YM=l([x("esri.renderers.support.AuthoringInfo")],mt);const SO=mt,_2=new Ee({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let im=class extends j{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,t),Array.from(r).sort()}getSymbol(t,r){}async getSymbolAsync(t,r){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};l([d({type:SO,json:{write:!0}})],im.prototype,"authoringInfo",void 0),l([d({type:_2.apiValues,readOnly:!0,json:{type:_2.jsonValues,read:!1,write:{writer:_2.write,ignoreOrigin:!0}}})],im.prototype,"type",void 0),im=l([x("esri.renderers.Renderer")],im);const na=im;function Yge(e){var t,r;return((r=(t=e.match(Qge))==null?void 0:t[1])==null?void 0:r.replace(/\\'/g,"'"))??null}const Qge=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var QM;let Dp=QM=class extends j{constructor(){super(...arguments),this.title=null}clone(){return new QM({title:this.title})}};l([d({type:String,json:{write:!0}})],Dp.prototype,"title",void 0),Dp=QM=l([x("esri.renderers.support.LegendOptions")],Dp);var XM;let Qv=XM=class extends Dp{constructor(){super(...arguments),this.showLegend=null}clone(){return new XM({title:this.title,showLegend:this.showLegend})}};l([d({type:Boolean,json:{write:!0}})],Qv.prototype,"showLegend",void 0),Qv=XM=l([x("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Qv);const TG=Qv,S2=new Ee({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Dn=class extends j{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(z.getLogger(this).error(".field: field must be a string value"),null):Hy(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};l([d()],Dn.prototype,"index",void 0),l([d({type:S2.apiValues,readOnly:!0,json:{read:S2.read,write:S2.write}})],Dn.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Dn.prototype,"field",void 0),l([je("field")],Dn.prototype,"castField",null),l([d({type:String,json:{write:!0}})],Dn.prototype,"valueExpression",void 0),l([d({type:String,json:{write:!0}})],Dn.prototype,"valueExpressionTitle",void 0),l([d({readOnly:!0})],Dn.prototype,"arcadeRequired",null),l([d({type:TG,json:{write:!0}})],Dn.prototype,"legendOptions",void 0),Dn=l([x("esri.renderers.visualVariables.VisualVariable")],Dn);const d0=Dn;var eE;let zu=eE=class extends j{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new eE({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};l([d({type:ce,json:{type:[Ve],write:!0}})],zu.prototype,"color",void 0),l([d({type:String,json:{write:!0}})],zu.prototype,"label",void 0),l([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],zu.prototype,"value",void 0),l([Z("value")],zu.prototype,"writeValue",null),zu=eE=l([x("esri.renderers.visualVariables.support.ColorStop")],zu);const Xge=zu;var tE;let Vu=tE=class extends d0{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){var e;return new tE({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([d({readOnly:!0})],Vu.prototype,"cache",null),l([d({type:["color"],json:{type:["colorInfo"]}})],Vu.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Vu.prototype,"normalizationField",void 0),l([d({type:[Xge],json:{write:!0}})],Vu.prototype,"stops",null),Vu=tE=l([x("esri.renderers.visualVariables.ColorVariable")],Vu);const MG=Vu;var rE;let za=rE=class extends j{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return fy(t.transparency)}writeOpacity(e,t,r){t[r]=Zb(e)}clone(){return new rE({label:this.label,opacity:this.opacity,value:this.value})}};l([d({type:String,json:{write:!0}})],za.prototype,"label",void 0),l([d({type:Number,json:{type:Ve,write:{target:"transparency"}}})],za.prototype,"opacity",void 0),l([G("opacity",["transparency"])],za.prototype,"readOpacity",null),l([Z("opacity")],za.prototype,"writeOpacity",null),l([d({type:Number,json:{write:!0}})],za.prototype,"value",void 0),za=rE=l([x("esri.renderers.visualVariables.support.OpacityStop")],za);const eve=za;var iE;let Uu=iE=class extends d0{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){var e;return new iE({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([d({readOnly:!0})],Uu.prototype,"cache",null),l([d({type:["opacity"],json:{type:["transparencyInfo"]}})],Uu.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Uu.prototype,"normalizationField",void 0),l([d({type:[eve],json:{write:!0}})],Uu.prototype,"stops",null),Uu=iE=l([x("esri.renderers.visualVariables.OpacityVariable")],Uu);const EG=Uu;var nE;let So=nE=class extends d0{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,r,i){if(i!=null&&i.messages){const n=`visualVariables[${this.index}]`;i.messages.push(new N("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:i}))}}clone(){var e;return new nE({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};l([d({readOnly:!0})],So.prototype,"cache",null),l([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],So.prototype,"axis",void 0),l([d({type:["rotation"],json:{type:["rotationInfo"]}})],So.prototype,"type",void 0),l([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],So.prototype,"rotationType",void 0),l([d({type:String,json:{write:!0}})],So.prototype,"valueExpressionTitle",void 0),l([Z("web-scene","valueExpressionTitle")],So.prototype,"writeValueExpressionTitleWebScene",null),So=nE=l([x("esri.renderers.visualVariables.RotationVariable")],So);const IG=So;function tve(e){return Ie(e)}var sE;let Va=sE=class extends j{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new sE({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};l([d({type:String,json:{write:!0}})],Va.prototype,"label",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],Va.prototype,"size",void 0),l([d({type:Number,json:{write:!0}})],Va.prototype,"value",void 0),l([d({type:Boolean,json:{write:!1}})],Va.prototype,"useMinValue",void 0),l([d({type:Boolean,json:{write:!1}})],Va.prototype,"useMaxValue",void 0),Va=sE=l([x("esri.renderers.visualVariables.support.SizeStop")],Va);const Xv=Va;var oE;let e1=oE=class extends TG{constructor(){super(...arguments),this.customValues=null}clone(){var e;return new oE({title:this.title,showLegend:this.showLegend,customValues:(e=this.customValues)==null?void 0:e.slice(0)})}};l([d({type:[Number],json:{write:!0}})],e1.prototype,"customValues",void 0),e1=oE=l([x("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],e1);const rve=e1;var qo,Bt;function fp(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Oy(e){return e!=null&&!isNaN(e)&&isFinite(e)}function kG(e){return e.valueExpression?qo.Expression:e.field&&typeof e.field=="string"?qo.Field:qo.Unknown}function ive(e,t){const r=t||kG(e),i=e.valueUnit||"unknown";return r===qo.Unknown?Bt.Constant:e.stops?Bt.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Bt.ClampedLinear:i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Bt.Proportional:Bt.Additive:Bt.Identity:Bt.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(qo||(qo={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Bt||(Bt={}));const OG=()=>z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),T_=e=>OG().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),M_=()=>OG().error("Use of arcade expressions requires an arcade context"),q4=new ts,t1=Math.PI,PG=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function CG(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void T_("ColorVariable");const n=typeof t=="number",s=n?null:t,o=s==null?void 0:s.attributes;let a=n?t:null;const u=i.field,{ipData:c,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!u&&!h){const g=i.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if((r==null?void 0:r.arcade)==null)return void M_();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,w=v.getViewInfo(g),b=v.createExecContext(s,w,r.timeZone);if(!f){const _=v.createSyntaxTree(i.valueExpression);f=v.createFunction(_),i.cache.compiledFunc=f}a=v.executeFunction(f,b)}else o&&(a=o[u]);const m=i.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=$O(a,c);if(g){const v=g[0],w=g[1],b=v===w?i.stops[v].color:ce.blendColors(i.stops[v].color,i.stops[w].color,g[2],r!=null?r.color:void 0);return new ce(b)}}}function AG(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void T_("OpacityVariable");const n=typeof t=="number",s=n?null:t,o=s==null?void 0:s.attributes;let a=n?t:null;const u=i.field,{ipData:c,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!u&&!h){const g=i.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if((r==null?void 0:r.arcade)==null)return void M_();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,w=v.getViewInfo(g),b=v.createExecContext(s,w,r.timeZone);if(!f){const _=v.createSyntaxTree(i.valueExpression);f=v.createFunction(_),i.cache.compiledFunc=f}a=v.executeFunction(f,b)}else o&&(a=o[u]);const m=i.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=$O(a,c);if(g){const v=g[0],w=g[1];if(v===w)return i.stops[v].opacity;{const b=i.stops[v].opacity;return b+(i.stops[w].opacity-b)*g[2]}}}}function RG(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(y=>y.type==="rotation"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void T_("RotationVariable");const n=i.axis||"heading",s=n==="heading"&&i.rotationType==="arithmetic"?90:0,o=n==="heading"&&i.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,u=a==null?void 0:a.attributes,c=i.field,{hasExpression:h}=i.cache;let f=i.cache.compiledFunc,m=0;if(!c&&!h)return m;if(h){if((r==null?void 0:r.arcade)==null)return void M_();const y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,v=g.getViewInfo(y),w=g.createExecContext(a,v,r.timeZone);if(!f){const b=g.createSyntaxTree(i.valueExpression);f=g.createFunction(b),i.cache.compiledFunc=f}m=g.executeFunction(f,w)}else u&&(m=u[c]||0);return m=typeof m!="number"||isNaN(m)?null:s+o*m,m}function nve(e,t,r){const i=typeof t=="number",n=i?null:t,s=n==null?void 0:n.attributes;let o=i?t:null;const{isScaleDriven:a}=e.cache;let u=e.cache.compiledFunc;if(a){const h=r!=null?r.scale:void 0,f=r!=null?r.view:void 0;o=h==null||f==="3d"?sve(e):h}else if(!i)switch(e.inputValueType){case qo.Expression:{if((r==null?void 0:r.arcade)==null)return void M_();const h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,m=f.getViewInfo(h),y=f.createExecContext(n,m,r.timeZone);if(!u){const g=f.createSyntaxTree(e.valueExpression);u=f.createFunction(g),e.cache.compiledFunc=u}o=f.executeFunction(u,y);break}case qo.Field:s&&(o=s[e.field]);break;case qo.Unknown:o=null}if(!Oy(o))return null;if(i||!e.normalizationField)return o;const c=s?parseFloat(s[e.normalizationField]):null;return Oy(c)&&c!==0?o/c:null}function sve(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function E_(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void T_("SizeVariable");const n=NG(nve(i,t,r),i,t,r,i.cache.ipData);return n==null||isNaN(n)?0:n}function yi(e,t,r){return e==null?null:fp(e)?E_(e,t,r):Oy(e)?e:null}function LG(e,t,r){return Oy(r)&&e>r?r:Oy(t)&&e<t?t:e}function ove(e,t,r,i){return e+((yi(t.minSize,r,i)||t.minDataValue)??0)}function ave(e,t,r){const i=e.stops;let n=(i==null?void 0:i.length)&&i[0].size;return n==null&&(n=e.minSize),yi(n,t,r)}function lve(e,t,r,i){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=yi(t.minSize,r,i),o=yi(t.maxSize,r,i),a=i!=null?i.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(s==null||o==null)return null;if(t.scaleBy==="area"&&a){const u=a==="circle",c=u?t1*(s/2)**2:s*s,h=c+n*((u?t1*(o/2)**2:o*o)-c);return u?2*Math.sqrt(h/t1):Math.sqrt(h)}return s+n*(o-s)}function uve(e,t,r,i){const n=i!=null?i.shape:void 0,s=e/t.minDataValue,o=yi(t.minSize,r,i),a=yi(t.maxSize,r,i);let u=null;return u=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,LG(u,o,a)}function cve(e,t,r,i,n){var u,c,h;const[s,o,a]=$O(e,n);if(s===o)return yi((u=t.stops)==null?void 0:u[s].size,r,i);{const f=yi((c=t.stops)==null?void 0:c[s].size,r,i);return f+(yi((h=t.stops)==null?void 0:h[o].size,r,i)-f)*a}}function dve(e,t,r,i){const n=((i==null?void 0:i.resolution)??1)*wO[t.valueUnit],s=yi(t.minSize,r,i),o=yi(t.maxSize,r,i),{valueRepresentation:a}=t;let u=null;return u=a==="area"?2*Math.sqrt(e/t1)/n:a==="radius"||a==="distance"?2*e/n:e/n,LG(u,s,o)}function NG(e,t,r,i,n){switch(t.transformationType){case Bt.Additive:return ove(e,t,r,i);case Bt.Constant:return ave(t,r,i);case Bt.ClampedLinear:return lve(e,t,r,i);case Bt.Proportional:return uve(e,t,r,i);case Bt.Stops:return cve(e,t,r,i,n);case Bt.RealWorldSize:return dve(e,t,r,i);case Bt.Identity:return e;case Bt.Unknown:return null}}function pve(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&r==="3d"||t))return null;const n={scale:t,view:r};let s=yi(e.minSize,q4,n),o=yi(e.maxSize,q4,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function hve(e,t,r){if(!e.visualVariables)return;const i=[],n=[],s=[],o=[],a=[];for(const u of e.visualVariables)switch(u.type){case"color":n.push(u);break;case"opacity":s.push(u);break;case"rotation":a.push(u);break;case"size":o.push(u)}return n.forEach(u=>{const c=CG(u,t,r);i.push({variable:u,value:c})}),s.forEach(u=>{const c=AG(u,t,r);i.push({variable:u,value:c})}),a.forEach(u=>{const c=RG(u,t,r);i.push({variable:u,value:c})}),o.forEach(u=>{const c=E_(u,t,r);i.push({variable:u,value:c})}),i.filter(u=>u.value!=null)}function $O(e,t){if(!t)return;let r=0,i=t.length-1;return t.some((n,s)=>e<n?(i=s,!0):(r=s,!1)),[r,i,(e-t[r])/(t[i]-t[r])]}function fve(e,t,r){const i=["proportional","proportional","proportional"];for(const n of e){const s=n.useSymbolValue?"symbol-value":E_(n,t,r);switch(n.axis){case"width":i[0]=s;break;case"depth":i[1]=s;break;case"height":i[2]=s;break;case"width-and-depth":i[0]=s,i[1]=s;break;case"all":case void 0:case null:i[0]=s,i[1]=s,i[2]=s;break;default:n.axis}}return i}const mIe=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:fve,getColor:CG,getOpacity:AG,getRotationAngle:RG,getSize:E_,getSizeForValue:NG,getSizeFromNumberOrVariable:yi,getSizeRangeAtScale:pve,getVisualVariableValues:hve,viewScaleRE:PG},Symbol.toStringTag,{value:"Module"}));var aE;const Pg=new Ee({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),lE=new Ee({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function B4(e){if(e!=null)return typeof e=="string"||typeof e=="number"?tve(e):e.type==="size"?fp(e)?e:(delete(e={...e}).type,new Le(e)):void 0}function H4(e,t,r){if(typeof e!="object")return e;const i=new Le;return i.read(e,r),i}let Le=aE=class extends d0{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&PG.test(this.valueExpression)}}set index(e){fp(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),fp(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return kG(this)}set maxDataValue(e){e&&this.stops&&(z.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(z.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return B4(e)}readMaxSize(e,t,r){return H4(e,t,r)}set minDataValue(e){e&&this.stops&&(z.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(z.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return B4(e)}readMinSize(e,t,r){return H4(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(z.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return ive(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i!=null&&i.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;i.messages.push(new N("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?lE.read(e):null}clone(){var e,t;return new aE({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:fp(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:fp(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(r=>r.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===Bt.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Bt.Stops){const e=this.stops;if(!e)return this;const t=e.map(i=>i.size).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};l([d({readOnly:!0})],Le.prototype,"cache",null),l([d({type:Pg.apiValues,json:{type:Pg.jsonValues,origins:{"web-map":{read:!1}},read:Pg.read,write:Pg.write}})],Le.prototype,"axis",void 0),l([d()],Le.prototype,"index",null),l([d({type:String,readOnly:!0})],Le.prototype,"inputValueType",null),l([d({type:rve,json:{write:!0}})],Le.prototype,"legendOptions",void 0),l([d({type:Number,value:null,json:{write:!0}})],Le.prototype,"maxDataValue",null),l([d({type:Number,value:null,json:{write:!0}})],Le.prototype,"maxSize",null),l([je("maxSize")],Le.prototype,"castMaxSize",null),l([G("maxSize")],Le.prototype,"readMaxSize",null),l([d({type:Number,value:null,json:{write:!0}})],Le.prototype,"minDataValue",null),l([d({type:Number,value:null,json:{write:!0}})],Le.prototype,"minSize",null),l([je("minSize")],Le.prototype,"castMinSize",null),l([G("minSize")],Le.prototype,"readMinSize",null),l([d({type:String,json:{write:!0}})],Le.prototype,"normalizationField",void 0),l([d({readOnly:!0})],Le.prototype,"arcadeRequired",null),l([d({type:String})],Le.prototype,"scaleBy",void 0),l([d({type:[Xv],value:null,json:{write:!0}})],Le.prototype,"stops",null),l([d({type:["outline"],json:{write:!0}})],Le.prototype,"target",void 0),l([d({type:String,readOnly:!0})],Le.prototype,"transformationType",null),l([d({type:["size"],json:{type:["sizeInfo"]}})],Le.prototype,"type",void 0),l([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Le.prototype,"useSymbolValue",void 0),l([d({type:String,json:{write:!0}})],Le.prototype,"valueExpression",void 0),l([G("valueExpression",["valueExpression","expression"])],Le.prototype,"readValueExpression",null),l([Z("web-scene","valueExpression")],Le.prototype,"writeValueExpressionWebScene",null),l([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Le.prototype,"valueRepresentation",void 0),l([d({type:lE.apiValues,json:{write:lE.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Le.prototype,"valueUnit",void 0),l([G("valueUnit")],Le.prototype,"readValueUnit",null),Le=aE=l([x("esri.renderers.visualVariables.SizeVariable")],Le);const xO=Le,mve={color:MG,size:xO,opacity:EG,rotation:IG},yve=new Ee({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),gve=/^\[([^\]]+)\]$/i;let r1=class extends le{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t&&t.filter(r=>!!r),t==null?void 0:t.length){for(const r of t)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some(r=>!!r.target)&&t.sort((r,i)=>{let n=null;return n=r.target===i.target?0:r.target?1:-1,n});for(let r=0;r<t.length;r++)t[r].index=r;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,r,i){const{rotationExpression:n,rotationType:s}=r,o=n==null?void 0:n.match(gve),a=o==null?void 0:o[1];if(a&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:s,field:a})),t)return t.map(u=>{const c=yve.read(u.type),h=mve[c];h||(z.getLogger(this).warn(`Unknown variable type: ${c}`),i!=null&&i.messages&&i.messages.push(new Sn("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:u,context:i})));const f=new h;return f.read(u,i),f})}writeVariables(t,r){const i=[];for(const n of t){const s=n.toJSON(r);s&&i.push(s)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};l([d()],r1.prototype,"visualVariables",null),r1=l([x("esri.renderers.visualVariables.VisualVariableFactory")],r1);const vve=r1,wve={base:d0,key:"type",typeMap:{opacity:EG,color:MG,rotation:IG,size:xO}},Ih=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new vve}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,n){return this._vvFactory.readVariables(r,i,n)}writeVisualVariables(r,i,n,s){i[n]=this._vvFactory.writeVariables(r,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){const n=this.visualVariables;return n?n.filter(s=>s.type===r&&(typeof i=="string"?s.target===i:i!==!1||!s.target)):[]}async collectVVRequiredFields(r,i){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&Kr(r,i,s.field),s.normalizationField&&Kr(r,i,s.normalizationField),s.valueExpression&&(bve(s.valueExpression,r,i)||await Rr(r,i,s.valueExpression)))}};return l([d({types:[wve],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),l([G("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),l([Z("visualVariables")],t.prototype,"writeVisualVariables",null),t=l([x("esri.renderers.mixins.VisualVariablesMixin")],t),t};function bve(e,t,r){const i=Yge(e);return i!=null&&(Kr(t,r,i),!0)}const TO=[252,146,31,255],_ve=[153,153,153,255],Sve={type:"esriSMS",style:"esriSMSCircle",size:6,color:TO,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},$ve={type:"esriSLS",style:"esriSLSSolid",width:.75,color:TO},xve={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Tve={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Mve={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Eve={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Ive={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},kve=Ks.fromJSON(Sve),Ove=Gi.fromJSON($ve),Pve=Yl.fromJSON(xve),Cve=$h.fromJSON(Tve),gIe=Ks.fromJSON(Mve),vIe=Gi.fromJSON(Eve),wIe=Yl.fromJSON(Ive);zo.fromSimpleMarkerSymbol(kve);Xc.fromSimpleLineSymbol(Ove);Kl.fromSimpleFillSymbol(Pve);new i0({symbolLayers:new te([new Qc({material:{color:TO},edges:new IV({size:$n(1),color:new ce(_ve)})})])});const Ave=new Xc({symbolLayers:new te([new bh({material:{color:new ce([0,0,0])},size:$n(1)})])}),Rve=new Kl({symbolLayers:new te([new Qc({outline:{color:new ce([0,0,0]),size:$n(1)}})])}),pd={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Lve(e,t=pd){var u,c,h,f;if(!e)return{symbol:null};const{retainId:r=pd.retainId,ignoreDrivers:i=pd.ignoreDrivers,hasLabelingContext:n=pd.hasLabelingContext,retainCIM:s=pd.retainCIM,cimFallbackEnabled:o=pd.cimFallbackEnabled}=t;let a=null;if(pL(e)||e instanceof ed)a=e.clone();else if(e.type==="cim"){const m=(c=(u=e.data)==null?void 0:u.symbol)==null?void 0:c.type;switch(m){case"CIMPointSymbol":a=s?e.clone():zo.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(a=Ave.clone(),(h=t==null?void 0:t.logWarning)==null||h.call(t,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=Rve.clone(),(f=t==null?void 0:t.logWarning)==null||f.call(t,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new N("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${m||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof Gi)a=Xc.fromSimpleLineSymbol(e);else if(e instanceof Ks)a=zo.fromSimpleMarkerSymbol(e);else if(e instanceof n0)a=zo.fromPictureMarkerSymbol(e);else if(e instanceof Yl)a=t.geometryType&&t.geometryType==="mesh"?i0.fromSimpleFillSymbol(e):Kl.fromSimpleFillSymbol(e);else{if(!(e instanceof $h))return{error:new N("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};a=n?f_.fromTextSymbol(e):zo.fromTextSymbol(e)}return r&&a&&a.type!=="cim"&&(a.id=e.id),i&&pL(a)&&a.symbolLayers.forEach(m=>m.ignoreDrivers=!0),{symbol:a}}function Xw(e,t,r,i){const n=FG(e,{},{context:i,isLabelSymbol:!1});n!=null&&(t[r]=n)}function W4(e,t,r,i){const n=FG(e,{},{context:i,isLabelSymbol:!0});n!=null&&(t[r]=n)}function Z4(e){return e instanceof Sh||e instanceof ed}function FG(e,t,r){if(e==null)return null;const{context:i,isLabelSymbol:n}=r,s=i==null?void 0:i.origin,o=i==null?void 0:i.messages;if(s==="web-scene"&&!Z4(e)){const a=Lve(e,{retainCIM:!0,hasLabelingContext:n});return a.symbol!=null?a.symbol.write(t,i):(o==null||o.push(new N("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:a.error})),null)}return(s==="web-map"||s==="portal-item"&&!Z6(i==null?void 0:i.layer))&&Z4(e)?(o==null||o.push(new N("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function bIe(e,t){return Bce(e,null,t)}const I_={types:i7,json:{write:{writer:Xw},origins:{"web-scene":{types:hL,write:{writer:Xw},read:{reader:ph({types:hL})}}}}},MO=mI({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},I_),DG={types:{base:yr,key:"type",typeMap:{"simple-fill":gc.typeMap["simple-fill"],"picture-fill":gc.typeMap["picture-fill"],"polygon-3d":gc.typeMap["polygon-3d"]}},json:{write:{writer:Xw},origins:{"web-scene":{type:Kl,write:{writer:Xw}}}}},i1={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var uE;let Ua=uE=class extends j{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new uE({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};l([d({type:String,json:{write:!0}})],Ua.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],Ua.prototype,"label",void 0),l([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Ua.prototype,"minValue",void 0),l([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Ua.prototype,"maxValue",void 0),l([d(MO)],Ua.prototype,"symbol",void 0),Ua=uE=l([x("esri.renderers.support.ClassBreakInfo")],Ua);const eb=Ua;var cE;const jG="log",n1="percent-of-total",s1="field",Cg=new Ee({esriNormalizeByLog:jG,esriNormalizeByPercentOfTotal:n1,esriNormalizeByField:s1}),Nve=Pt(eb);let Lt=cE=class extends Ih(na){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map(n=>{const s=new eb;return s.read(n,r),s.minValue==null&&(s.minValue=i),s.maxValue==null&&(s.maxValue=s.minValue),i=s.maxValue,s})}writeClassBreakInfos(e,t,r,i){const n=e.map(s=>s.write({},i));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),t[r]=n}castField(e){return e==null?e:typeof e=="function"?(z.getLogger(this).error(".field: field must be a string value"),null):Hy(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&s1||r&&n1||null,t&&r&&z.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==s1&&e!==n1||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new eb({minValue:e,maxValue:t,symbol:n7(r)}):Nve(k(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&z.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await Dc()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void z.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const n=await Dc(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((i,n)=>i+n.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new cE({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:k(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:k(this.visualVariables),legendOptions:k(this.legendOptions),authoringInfo:k(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),Rr(e,t,this.valueExpression)];Kr(e,t,this.field),Kr(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s,timeZone:o}=t??{},{valueExpression:a}=this;let u=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=s.arcadeUtils;if(!u){const f=c.createSyntaxTree(a);u=c.createFunction(f),this._compiledValueExpression.compiledFunction=u}this._compiledValueExpression.valueExpression=a;const h=c.executeFunction(u,c.createExecContext(e,c.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let n=parseFloat(r[t]);if(i){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(i===jG)n=Math.log(n)*Math.LOG10E;else if(i!==n1||s==null||isNaN(s)){if(i===s1&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};l([d(DG)],Lt.prototype,"backgroundFillSymbol",void 0),l([d({type:[eb]})],Lt.prototype,"classBreakInfos",void 0),l([G("classBreakInfos")],Lt.prototype,"readClassBreakInfos",null),l([Z("classBreakInfos")],Lt.prototype,"writeClassBreakInfos",null),l([d({type:String,json:{write:!0}})],Lt.prototype,"defaultLabel",void 0),l([d(I_)],Lt.prototype,"defaultSymbol",void 0),l([d({type:String,json:{write:!0}})],Lt.prototype,"field",void 0),l([je("field")],Lt.prototype,"castField",null),l([d({type:Boolean})],Lt.prototype,"isMaxInclusive",void 0),l([d({type:Dp,json:{write:!0}})],Lt.prototype,"legendOptions",void 0),l([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Lt.prototype,"minValue",null),l([d({type:String,json:{write:!0}})],Lt.prototype,"normalizationField",void 0),l([d({type:Number,cast:e=>ln(e),json:{write:!0}})],Lt.prototype,"normalizationTotal",void 0),l([d({type:Cg.apiValues,value:null,json:{type:Cg.jsonValues,read:Cg.read,write:Cg.write}})],Lt.prototype,"normalizationType",null),l([ne({classBreaks:"class-breaks"})],Lt.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Lt.prototype,"valueExpression",void 0),l([d({type:String,json:{write:!0}})],Lt.prototype,"valueExpressionTitle",void 0),Lt=cE=l([x("esri.renderers.ClassBreaksRenderer")],Lt);const zG=Lt,dE=-3,Fve=dE-1;var Po;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Po||(Po={}));let _Ie=class{constructor(t,r,i){this.name=t,this._storage=r,this.id=jve+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(t){return this._storage.getSize(this,t)}resetHitRate(){this._hit=this._miss=0}put(t,r,i,n=0){this._storage.put(this,t,r,i,n)}pop(t){const r=this._storage.pop(this,t);return r===void 0?++this._miss:++this._hit,r}get(t){const r=this._storage.get(this,t);return r===void 0?++this._miss:++this._hit,r}peek(t){return this._storage.peek(this,t)}updateSize(t,r,i){this._storage.updateSize(this,t,r,i)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},Dve=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Q1,this._users=new Q1}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,r){const i=this._db.get(t.id+r);return(i==null?void 0:i.size)??0}put(t,r,i,n,s){r=t.id+r;const o=this._db.get(r);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(r),o.entry!==i&&this._notifyRemove(r,o.entry,o.size,Po.ALL)),n>this._maxSize)return void this._notifyRemove(r,i,n,Po.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${r}`),void this._notifyRemove(r,i,0,Po.ALL);const a=1+Math.max(s,Fve)-dE;this._db.set(r,new zve(i,n,a)),this._size+=n,t.size+=n,this._checkSize()}updateSize(t,r,i,n){r=t.id+r;const s=this._db.get(r);if(s&&s.entry===i){for(this._size-=s.size,t.size-=s.size;n>this._maxSize;){const o=this._notifyRemove(r,i,n,Po.SOME);if(!(o!=null&&o>0))return void this._db.delete(r);n=o}s.size=n,this._size+=n,t.size+=n,this._checkSize()}}pop(t,r){r=t.id+r;const i=this._db.get(r);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(r),++this._hit,i.entry;++this._miss}get(t,r){r=t.id+r;const i=this._db.get(r);if(i!==void 0)return this._db.delete(r),i.lives=i.lifetime,this._db.set(r,i),++this._hit,i.entry;++this._miss}peek(t,r){const i=this._db.get(t.id+r);return i?++this._hit:++this._miss,i==null?void 0:i.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((o,a)=>{const u=o.lifetime;i[u]=(i[u]||0)+o.size,this._users.forAll(c=>{const{id:h,name:f}=c;if(a.startsWith(h)){const m=r[f]||0;r[f]=m+o.size}})});const n={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const u=r[a]||0;r[a]=u,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(r);s.sort((o,a)=>r[a]-r[o]),s.forEach(o=>t[o]=Math.round(r[o]/2**20)+"MB / "+n[o]);for(let o=i.length-1;o>=0;--o){const a=i[o];a&&(t["Priority "+(o+dE-1)]=Math.round(a/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const r=t.id;this._db.forEach((i,n)=>{n.startsWith(r)&&(this._size-=i.size,this._db.delete(n),this._notifyRemove(n,i.entry,i.size,Po.ALL))}),t.size=0}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,t.size,Po.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i,n){let s;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const a=o[1](r,n,i);return typeof a=="number"&&(s=a),!0}return!1}),s}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const r=t??this;if(r.maxSize<0||r.size<=r.maxSize)return;const i=t==null?void 0:t.id;let n=!0;for(;n;){n=!1;for(const[s,o]of this._db)if(o.lifetime===0&&(!i||s.startsWith(i))){if(this._purgeItem(s,o,t),r.size<=.9*r.maxSize)return;n||(n=this._db.has(s))}}for(const[s,o]of this._db)if((!i||s.startsWith(i))&&(this._purgeItem(s,o,t),r.size<=.9*r.maxSize))return}_purgeItem(t,r,i=this._users.find(n=>t.startsWith(n.id))){if(this._db.delete(t),r.lives<=1){this._size-=r.size,i&&(i.size-=r.size);const n=this._notifyRemove(t,r.entry,r.size,Po.SOME);n!=null&&n>0&&(this._size+=n,i&&(i.size+=n),r.lives=r.lifetime,r.size=n,this._db.set(t,r))}else--r.lives,this._db.set(t,r)}},jve=0,zve=class{constructor(t,r,i){this.entry=t,this.size=r,this.lifetime=i,this.lives=i}},Vve=class{constructor(t,r){this._storage=new Dve,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,r,i=1){this._storage.put(this,t,r,i,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}},Uve=class pE{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}since(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new N(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new pE(this.major,this.minor,this._context)}static parse(t,r=""){const[i,n]=t.split("."),s=/^\s*\d+\s*$/;if(!(i!=null&&i.match)||!s.test(i))throw new N((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(n!=null&&n.match)||!s.test(n))throw new N((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),a=parseInt(n,10);return new pE(o,a,r)}},k_=class{};function Gve(e){return e instanceof mh?e===k_.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function EIe(e){return Gve(e)?k_.instance:e}k_.instance=new zi("Etc/UTC");function qve(e){return"timeZone"in e}function Bve(e){return"timeZone"in e}function Hve(e){return"dateFieldsTimeZone"in e}const Wve=new Map;let VG=class o1{static fromJSON(t){return new o1(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new o1(t.fields??[],K4(t))}static fromLayerJSON(t){return new o1(t.fields??[],K4(t))}constructor(t=[],r){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=r?new Map(r):null;const i=[];for(const s of this.fields){const o=s==null?void 0:s.name,a=J4(o);if(o&&a){const u=Xu(o);this._fieldsMap.set(o,s),this._fieldsMap.set(u,s),this._normalizedFieldsMap.set(a,s),i.push(`${u}:${s.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),Lue(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):wV(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),nL(s)||sL(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)nL(t)||sL(t)||t.nullable||Sue(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||(r=this._fieldsMap.get(Xu(t))??this._normalizedFieldsMap.get(J4(t)),r&&this._fieldsMap.set(t,r),r)}getTimeZone(t){const r=this.get(t&&typeof t!="string"?t.name:t);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(z.getLogger("esri.layers.support.FieldsIndex").error(new N("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),Al):UG.has(r.type)?Fc:null:null}getLuxonTimeZone(t){const r=this.getTimeZone(t);return r?r===Fc?k_.instance:r===Al?hr.utcInstance:SI(Wve,r,()=>zi.create(r)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return Nue(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var r;return((r=this.get(t))==null?void 0:r.name)??void 0}toJSON(){return{fields:this.fields.map(t=>lw(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Xu(e){return e.trim().toLowerCase()}function J4(e){var t;return((t=oue(e))==null?void 0:t.toLowerCase())??""}const UG=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function K4(e){const t=new Map;if(!e.fields)return t;const r=e.datesInUnknownTimezone===!0,{timeInfo:i,editFieldsInfo:n}=e,s=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",a=Hve(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?fv(e.dateFieldsTimeReference):null,u=n?qve(n)?n.timeZone??a:n.dateFieldsTimeReference?fv(n.dateFieldsTimeReference):a??Al:null,c=i?Bve(i)?i.timeZone??a:i.timeReference?fv(i.timeReference):a:null,h=new Map([[Xu((n==null?void 0:n.creationDateField)??""),u],[Xu((n==null?void 0:n.editDateField)??""),u],[Xu(s),c],[Xu(o),c]]);for(const{name:f,type:m}of e.fields)if(UG.has(m))t.set(f,Fc);else if(m!=="date"&&m!=="esriFieldTypeDate")t.set(f,null);else if(r)t.set(f,Fc);else{const y=h.get(Xu(f??""))??a;t.set(f,y)}return t}function Zve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Jve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Kve(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function Yve(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function GG(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function qG(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function BG(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function Qve(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Xve(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function e1e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function t1e(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function r1e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function i1e(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function n1e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function HG(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+s*s)}function WG(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return r*r+i*i+n*n+s*s}function ZG(e){const t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function JG(e){const t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function s1e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function o1e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function a1e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3];let o=r*r+i*i+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=n*o,e[3]=s*o),e}function l1e(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function KG(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e[3]=a+i*(r[3]-a),e}function u1e(e,t){const r=Hb;let i,n,s,o,a,u;t=t||1;do i=2*r()-1,n=2*r()-1,a=i*i+n*n;while(a>=1);do s=2*r()-1,o=2*r()-1,u=s*s+o*o;while(u>=1);const c=Math.sqrt((1-a)/u);return e[0]=t*i,e[1]=t*n,e[2]=t*s*c,e[3]=t*o*c,e}function c1e(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12]*o,e[1]=r[1]*i+r[5]*n+r[9]*s+r[13]*o,e[2]=r[2]*i+r[6]*n+r[10]*s+r[14]*o,e[3]=r[3]*i+r[7]*n+r[11]*s+r[15]*o,e}function d1e(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],u=r[2],c=r[3],h=c*i+a*s-u*n,f=c*n+u*i-o*s,m=c*s+o*n-a*i,y=-o*i-a*n-u*s;return e[0]=h*c+y*-o+f*-u-m*-a,e[1]=f*c+y*-a+m*-o-h*-u,e[2]=m*c+y*-u+h*-a-f*-o,e[3]=t[3],e}function p1e(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function h1e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function f1e(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=t[0],a=t[1],u=t[2],c=t[3],h=Zr();return Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=h*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-u)<=h*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(s-c)<=h*Math.max(1,Math.abs(s),Math.abs(c))}const m1e=GG,y1e=qG,g1e=BG,v1e=HG,w1e=WG,b1e=ZG,_1e=JG;Object.freeze(Object.defineProperty({__proto__:null,add:Yve,ceil:Qve,copy:Zve,copyVec3:Jve,dist:v1e,distance:HG,div:g1e,divide:BG,dot:l1e,equals:f1e,exactEquals:h1e,floor:Xve,inverse:o1e,len:b1e,length:ZG,lerp:KG,max:t1e,min:e1e,mul:y1e,multiply:qG,negate:s1e,normalize:a1e,random:u1e,round:r1e,scale:i1e,scaleAndAdd:n1e,set:Kve,sqrDist:w1e,sqrLen:_1e,squaredDistance:WG,squaredLength:JG,str:p1e,sub:m1e,subtract:GG,transformMat4:c1e,transformQuat:d1e},Symbol.toStringTag,{value:"Module"}));function O_(){return[0,0,0,0]}function S1e(e){return[e[0],e[1],e[2],e[3]]}function kh(e,t,r,i){return[e,t,r,i]}function $1e(e,t=O_()){const r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function x1e(e,t){return new Float64Array(e,t,4)}function YG(){return O_()}function QG(){return kh(1,1,1,1)}function XG(){return kh(1,0,0,0)}function eq(){return kh(0,1,0,0)}function tq(){return kh(0,0,1,0)}function rq(){return kh(0,0,0,1)}const T1e=YG(),M1e=QG(),E1e=XG(),I1e=eq(),k1e=tq(),O1e=rq();Object.freeze(Object.defineProperty({__proto__:null,ONES:M1e,UNIT_W:O1e,UNIT_X:E1e,UNIT_Y:I1e,UNIT_Z:k1e,ZEROS:T1e,clone:S1e,create:O_,createView:x1e,fromArray:$1e,fromValues:kh,ones:QG,unitW:rq,unitX:XG,unitY:eq,unitZ:tq,zeros:YG},Symbol.toStringTag,{value:"Module"}));function iq(e){return"r"in e&&"g"in e&&"b"in e}function nq(e){return"h"in e&&"s"in e&&"v"in e}function sq(e){return"l"in e&&"a"in e&&"b"in e}function oq(e){return"l"in e&&"c"in e&&"h"in e}function P1e(e){return"x"in e&&"y"in e&&"z"in e}const C1e=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],A1e=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function aq(e,t){const r=[];let i,n;if(e[0].length!==t.length)throw new Error("dimensions do not match");const s=e.length,o=e[0].length;let a=0;for(i=0;i<s;i++){for(a=0,n=0;n<o;n++)a+=e[i][n]*t[n];r.push(a)}return r}function lq(e){const t=[e.r/255,e.g/255,e.b/255].map(i=>i<=.04045?i/12.92:((i+.055)/1.055)**2.4),r=aq(C1e,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function EO(e){const t=aq(A1e,[e.x/100,e.y/100,e.z/100]).map(r=>{const i=r<=.0031308?12.92*r:1.055*r**.4166666666666667-.055;return Math.min(1,Math.max(i,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function uq(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(r=>r>.008856451679035631?r**.3333333333333333:7.787037037037035*r+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function cq(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(i=>i>6/29?i**3:3*(6/29)**2*(i-4/29));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function R1e(e){const t=e.l,r=e.a,i=e.b,n=Math.sqrt(r*r+i*i);let s=Math.atan2(i,r);return s=s>0?s:s+2*Math.PI,{l:t,c:n,h:s}}function L1e(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}function N1e(e){return uq(lq(e))}function F1e(e){return EO(cq(e))}function D1e(e){return R1e(uq(lq(e)))}function j1e(e){return EO(cq(L1e(e)))}function z1e(e){const t=e.r,r=e.g,i=e.b,n=Math.max(t,r,i),s=n-Math.min(t,r,i);let o=n,a=s===0?0:n===t?(r-i)/s%6:n===r?(i-t)/s+2:(t-r)/s+4,u=s===0?0:s/o;return a<0&&(a+=6),a*=60,u*=100,o*=100/255,{h:a,s:u,v:o}}function V1e(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,n=i*r,s=n*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+i-n),o.g=Math.round(o.g+i-n),o.b=Math.round(o.b+i-n),o}function IO(e){return iq(e)?e:oq(e)?j1e(e):sq(e)?F1e(e):P1e(e)?EO(e):nq(e)?V1e(e):e}function IIe(e){return nq(e)?e:z1e(IO(e))}function kIe(e){return sq(e)?e:N1e(IO(e))}function OIe(e){return oq(e)?e:D1e(IO(e))}var Y4;(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(Y4||(Y4={}));const U1e={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},hE={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0}};function PIe(e){return[e.r,e.g,e.b,e.a]}const G1e=` /-,
`;function Q4(e){let t=e.length;for(;t--;)if(!G1e.includes(e.charAt(t)))return!1;return!0}function q1e(e,t){const r=[];let i=0,n=-1;do if(n=e.indexOf("[",i),n>=i){if(n>i){const s=e.substr(i,n-i);r.push([s,null,Q4(s)])}if(i=n+1,n=e.indexOf("]",i),n>=i){if(n>i){const s=t[e.substr(i,n-i)];s&&r.push([null,s,!1])}i=n+1}}while(n!==-1);if(i<e.length-1){const s=e.substr(i);r.push([s,null,Q4(s)])}return r}function B1e(e,t,r,i){let n="",s=null;for(const o of t){const[a,u,c]=o;if(a)c?s=a:(s&&(n+=s,s=null),n+=a);else{let h=u;r!=null&&(h=dq(u,r));const f=e.attributes[h];f&&(s&&(n+=s,s=null),n+=f)}}return H1e(n,i)}function H1e(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function CIe(e,t,r,i,n,s,o=!0){const a=t/n,u=r/s,c=Math.ceil(a/2),h=Math.ceil(u/2);for(let f=0;f<s;f++)for(let m=0;m<n;m++){const y=4*(m+(o?s-f-1:f)*n);let g=0,v=0,w=0,b=0,_=0,$=0,T=0;const E=(f+.5)*u;for(let I=Math.floor(f*u);I<(f+1)*u;I++){const C=Math.abs(E-(I+.5))/h,L=(m+.5)*a,H=C*C;for(let V=Math.floor(m*a);V<(m+1)*a;V++){let Y=Math.abs(L-(V+.5))/c;const ee=Math.sqrt(H+Y*Y);ee>=-1&&ee<=1&&(g=2*ee*ee*ee-3*ee*ee+1,g>0&&(Y=4*(V+I*t),T+=g*e[Y+3],w+=g,e[Y+3]<255&&(g=g*e[Y+3]/250),b+=g*e[Y],_+=g*e[Y+1],$+=g*e[Y+2],v+=g))}}i[y]=b/v,i[y+1]=_/v,i[y+2]=$/v,i[y+3]=T/w}}function W1e(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function AIe(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function RIe(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function LIe(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function NIe(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function Z1e(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const FIe=(e,t=0)=>e==null||isNaN(e)?t:e,DIe=(e,t)=>e??t,jIe=e=>e.tintColor?W1e(e.tintColor):[255,255,255,1],zIe=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function VIe(){return J(()=>import("./geometryEngineJSON-utgjDhCC.js").then(e=>e.g),__vite__mapDeps([18,19,20]))}function UIe(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function GIe(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function qIe(e){let t="normal",r="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function BIe(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function X4(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=X4(t);if(r!=null)return r}break;case"CIMTextSymbol":return X4(e.symbol);case"CIMSolidFill":return e.color}return null}function eN(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const r of t){const i=eN(r);if(i!=null)return i}break}case"CIMTextSymbol":return eN(e.symbol);case"CIMSolidStroke":return e.color}}function tN(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=tN(t);if(r!==void 0)return r}break;case"CIMTextSymbol":return tN(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function HIe(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function WIe(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function J1e(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const ZIe=e=>e.includes("data:image/svg+xml");function kO(e){return e&&e.charAt(0).toLowerCase()+e.substring(1)}function JIe(e,t,r,i,n,s){const{infos:o}=s;let a=1,u=0,c=0,h=0;for(const{offsetX:y,offsetY:g,rotation:v,size:w,frameHeight:b,rotateClockWise:_}of o)c=nN(y,g,u,a,c),h=iN(y,g,u,a,h),b&&(a*=w/b),u=sN(v,_,u);const f=nN(i,n,u,a,c),m=iN(i,n,u,a,h);return{size:e*a,rotation:sN(t,r,u),offsetX:f,offsetY:m}}function K1e(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>K1e(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function KIe(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...U1e[t]];const r=hE[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function Y1e(e){return e!=null&&e.dashTemplate&&typeof e.dashTemplate=="string"&&(e.dashTemplate=e.dashTemplate.split(" ").map(Number)),e}function fE(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const r of t)if(r.type==="CIMVectorMarker")return fE(r)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const r of t)if(r.symbol)return fE(r.symbol)}}return"Normal"}function YIe(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const i=r.size??hE.CIMVectorMarker.size;i>t&&(t=i);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const i=r.width;i!=null&&i>t&&(t=i);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&Z1e(r.markerPlacement)){const i=r.size??hE.CIMVectorMarker.size;i>t&&(t=i)}break;case"CIMPictureFill":{const i=r.height;i!=null&&i>t&&(t=i)}}}return t}}}function dq(e,t){if(t!==null){const r=t.get(e);return r?r.name:e}return e}function Q1e(e){return e.map(t=>({...t,propertyName:kO(t.propertyName)}))}function rN(e){const t={};for(const r in e){const i=e[r];t[kO(r)]=i}return t}function iN(e,t,r,i,n){const s=r*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*e+o*t)*i+n}return t*i+n}function nN(e,t,r,i,n){const s=r*Math.PI/180;return s?(Math.cos(s)*e-Math.sin(s)*t)*i+n:e*i+n}function sN(e,t,r){return t?r-e:r+e}function QIe(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:e.extent!=null?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function X1e(e){return e.originPosition==="lowerLeft"&&e.scale.length===4&&e.translate.length===4}function p0(e){if(X1e(e))return e;const{originPosition:t,scale:r,translate:i}=e,n=r[0]??1,s=r[1]??1;return{originPosition:"lowerLeft",scale:[n,t==="lowerLeft"?s:-s,r[2]??1,r[3]??1],translate:[i[0]??0,i[1]??0,i[2]??0,i[3]??0]}}function ewe({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function twe({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function rwe({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}function iwe({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}function h0({scale:e,translate:t},r){return r*e[0]+t[0]}function f0({scale:e,translate:t},r){return r*e[1]+t[1]}function Py({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function Cy({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function OO(e,t){return e&&t?awe:e&&!t?swe:!e&&t?owe:nwe}const nwe=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=h0(e,i[0]),s=f0(e,i[1]);r[0]=[n,s];const{scale:o,originPosition:a}=e,u=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,m]=t[h];n+=u*f,s+=c*m,r[h]=[n,s]}return r},swe=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=h0(e,i[0]),s=f0(e,i[1]);r[0]=[n,s,Py(e,i[2])];const{scale:o,originPosition:a}=e,u=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,m,y]=t[h];n+=u*f,s+=c*m,r[h]=[n,s,Py(e,y)]}return r},owe=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=h0(e,i[0]),s=f0(e,i[1]);r[0]=[n,s,Cy(e,i[2])];const{scale:o,originPosition:a}=e,u=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,m,y]=t[h];n+=u*f,s+=c*m,r[h]=[n,s,Cy(e,y)]}return r},awe=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=h0(e,i[0]),s=f0(e,i[1]);r[0]=[n,s,Py(e,i[2]),Cy(e,i[3])];const{scale:o,originPosition:a}=e,u=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,m,y,g]=t[h];n+=u*f,s+=c*m,r[h]=[n,s,Py(e,y),Cy(e,g)]}return r};function pq(e,t,r){const i=new Array(r.length);for(let n=0;n<r.length;n++)i[n]=t(e,r[n]);return i}function XIe(e,t,r){const i=p0(e);return t.x=ewe(i,r.x),t.y=twe(i,r.y),r.z!=null&&(t.z=rwe(i,r.z)),r.m!=null&&(t.m=iwe(i,r.m)),t}function lwe(e,t,r,i=(r==null?void 0:r.hasZ)??!1,n=(r==null?void 0:r.hasM)??!1){if(r!=null){const s=p0(e);t.points=OO(i,n)(s,r.points),t.hasZ=i,t.hasM=n}return t}function uwe(e,t,r,i=(r==null?void 0:r.z)!=null,n=(r==null?void 0:r.m)!=null){if(r==null)return t;const s=p0(e);return t.x=h0(s,r.x),t.y=f0(s,r.y),i&&(t.z=Py(s,r.z)),n&&(t.m=Cy(s,r.m)),t}function cwe(e,t,r,i=(r==null?void 0:r.hasZ)??!1,n=(r==null?void 0:r.hasM)??!1){if(r!=null){const s=p0(e);t.rings=pq(s,OO(i,n),r.rings),t.hasZ=i,t.hasM=n}return t}function dwe(e,t,r,i=(r==null?void 0:r.hasZ)??!1,n=(r==null?void 0:r.hasM)??!1){if(r!=null){const s=p0(e);t.paths=pq(s,OO(i,n),r.paths),t.hasZ=i,t.hasM=n}return t}function pwe(e,t,r,i,n){if(e==null)return null;const s=e.referencesGeometry()&&n?hwe(t,i,n):t,o=e.repurposeFeature(s);try{return e.evaluate({...r,$feature:o},e.services)}catch(a){return z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",a),null}}const $2=new Map;function hwe(e,t,r){const{transform:i,hasZ:n,hasM:s}=r;$2.has(t)||$2.set(t,fwe(t));const o=$2.get(t)(e.geometry,i,n,s);return{...e,geometry:o}}function fwe(e){const t={};switch(e){case"esriGeometryPoint":return(r,i,n,s)=>uwe(i,t,r,n,s);case"esriGeometryPolygon":return(r,i,n,s)=>cwe(i,t,r,n,s);case"esriGeometryPolyline":return(r,i,n,s)=>dwe(i,t,r,n,s);case"esriGeometryMultipoint":return(r,i,n,s)=>lwe(i,t,r,n,s);default:return z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new N("mapview-arcade",`Unable to handle geometryType: ${e}`)),r=>r}}const mwe=e=>{if(!e)return[0,0,0,0];const{r:t,g:r,b:i,a:n}=e;return[t,r,i,255*n]};let hq=class lt{static findApplicableOverrides(t,r,i){if(t&&r){if(t.primitiveName){let n=!1;for(const s of i)if(s.primitiveName===t.primitiveName){n=!0;break}if(!n)for(const s of r)s.primitiveName===t.primitiveName&&i.push(s)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const n of t.effects)lt.findApplicableOverrides(n,r,i);if(t.symbolLayers)for(const n of t.symbolLayers)lt.findApplicableOverrides(n,r,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects)for(const n of t.effects)lt.findApplicableOverrides(n,r,i);if(t.markerPlacement&&lt.findApplicableOverrides(t.markerPlacement,r,i),t.type==="CIMVectorMarker"){if(t.markerGraphics)for(const n of t.markerGraphics)lt.findApplicableOverrides(n,r,i),lt.findApplicableOverrides(n.symbol,r,i)}else t.type==="CIMCharacterMarker"?lt.findApplicableOverrides(t.symbol,r,i):t.type==="CIMHatchFill"?lt.findApplicableOverrides(t.lineSymbol,r,i):t.type==="CIMPictureMarker"&&lt.findApplicableOverrides(t.animatedSymbolProperties,r,i)}}}static findEffectOverrides(t,r){if(!t)return null;if(t.type==="CIMGeometricEffectDashes"&&Y1e(t),!r||!t.primitiveName)return{type:"cim-effect-param",effect:t,overrides:[]};const i=rN(t),n=t.primitiveName,s=[];for(const o of r)o.primitiveName===n&&s.push(rN(o));return{type:"cim-effect-param",effect:i,overrides:Q1e(s)}}static async resolveSymbolOverrides(t,r,i,n,s,o,a){if(!(t!=null&&t.symbol))return null;let{symbol:u,primitiveOverrides:c}=t;const h=!!c;if(!h&&!n)return u;u=k(u),c=k(c);let f=!0;if(r||(r={attributes:{}},f=!1),h){if(f||(c=c.filter(m=>{var y;return!((y=m.valueExpressionInfo)!=null&&y.expression.includes("$feature"))})),a||(c=c.filter(m=>{var y;return!((y=m.valueExpressionInfo)!=null&&y.expression.includes("$view"))})),c.length>0){const m={spatialReference:i,fields:J1e(r.attributes),geometryType:s};await lt.createRenderExpressions(c,m),lt.evaluateOverrides(c,r,s??"esriGeometryPoint",o,a)}lt.applyOverrides(u,c)}return n&&lt.applyDictionaryTextOverrides(u,r,n,null),u}static async createRenderExpressions(t,r){const i=[];for(const n of t){const s=n.valueExpressionInfo;if(!s||lt._expressionToRenderExpression.has(s.expression))continue;const o=rue(s.expression,r.spatialReference,r.fields);i.push(o),o.then(a=>lt._expressionToRenderExpression.set(s.expression,a))}i.length>0&&await Promise.all(i)}static evaluateOverrides(t,r,i,n,s){const o={$view:{scale:s==null?void 0:s.scale}};for(const a of t){a.value&&typeof a.value=="object"&&iq(a.value)&&(a.propertyName==="Color"||a.propertyName==="StrokeColor")&&(a.value=mwe(a.value));const u=a.valueExpressionInfo;if(!u)continue;const c=lt._expressionToRenderExpression.get(u.expression);c&&(a.value=pwe(c,r,o,i,n))}}static applyDictionaryTextOverrides(t,r,i,n,s="Normal"){if(t!=null&&t.type)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=t.symbolLayers;if(!o)return;for(const a of o)a&&a.type==="CIMVectorMarker"&&lt.applyDictionaryTextOverrides(a,r,i,n,t.type==="CIMTextSymbol"?t.textCase:s)}break;case"CIMVectorMarker":{const o=t.markerGraphics;if(!o)return;for(const a of o)a&&lt.applyDictionaryTextOverrides(a,r,i,n)}break;case"CIMMarkerGraphic":{const o=t.textString;if(o&&o.includes("[")){const a=q1e(o,i);t.textString=B1e(r,a,n,s)}}}}static applyOverrides(t,r,i,n){if(t.primitiveName){for(const s of r)if(s.primitiveName===t.primitiveName){const o=kO(s.propertyName);if(n&&n.push({cim:t,nocapPropertyName:o,value:t[o]}),i){let a=!1;for(const u of i)u.primitiveName===t.primitiveName&&(a=!0);a||i.push(s)}s.value!=null&&(t[o]=s.value)}}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const s of t.effects)lt.applyOverrides(s,r,i,n);if(t.symbolLayers)for(const s of t.symbolLayers)lt.applyOverrides(s,r,i,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects)for(const s of t.effects)lt.applyOverrides(s,r,i,n);if(t.type==="CIMVectorMarker"&&t.markerGraphics)for(const s of t.markerGraphics)lt.applyOverrides(s,r,i,n),lt.applyOverrides(s.symbol,r,i,n)}}static restoreOverrides(t){for(const r of t)r.cim[r.nocapPropertyName]=r.value}static buildOverrideKey(t){let r="";for(const i of t)i.value!==void 0&&(r+=`${i.primitiveName}${i.propertyName}${JSON.stringify(i.value)}`);return r}static toValue(t,r){if(t==="DashTemplate")return r.split(" ").map(i=>Number(i));if(t==="Color"){const i=new ce(r).toRgba();return i[3]*=255,i}return r}};hq._expressionToRenderExpression=new Map;const oN="esri.renderers.support.DictionaryLoader",ywe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let fq=class{constructor(t,r,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new Vve(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=r,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){var f;let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{i=await this._dictionaryPromise}catch(m){if(bi(m))return this._dictionaryPromise=null,null}const n=(f=this._dictionaryVersion)==null?void 0:f.since(4,0),s={};if(this.fieldMap)for(const m of this._symbolFields){const y=dq(this.fieldMap[m],this._fieldIndex);if(y){const g=t.attributes[y];s[m]=n?g:g!=null?""+t.attributes[y]:""}else s[m]=""}let o=null;try{o=i==null?void 0:i(s,r)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const a=o.split(";"),u=[],c=[];for(const m of a)if(m)if(m.includes("po:")){const y=m.substr(3).split("|");if(y.length===3){const g=y[0],v=y[1];let w=y[2];if(v==="DashTemplate")w=w.split(" ").map(b=>Number(b));else if(v==="Color"){const b=new ce(w).toRgba();w=[b[0],b[1],b[2],255*b[3]]}else w=Number(w);c.push({primitiveName:g,propertyName:v,value:w,defaultValue:null})}}else if(m.includes("|")){for(const y of m.split("|"))if(this._itemNames.has(y)){u.push(y);break}}else this._itemNames.has(m)&&u.push(m);const h=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,u,c,h,r)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void z.getLogger(oN).error("no valid URL!");const r=dt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:i}]=await Promise.all([r,Dc()]);if(!i)throw this._dictionaryPromise=null,new N("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:s,expression:o,itemsNames:a}=i,u=o;let c=!1;s&&(this._dictionaryVersion=Uve.parse(s),c=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=n.symbol;const h={};if(this.config){const y=this.config;for(const g in y)h[g]=y[g]}if(n.configuration)for(const y of n.configuration)h.hasOwnProperty(y.name)||(h[y.name]=y.value);const f=[];if(t!=null&&t.fields&&this.fieldMap)for(const y in this.fieldMap){const g=this.fieldMap[y],v=t.fields.filter(w=>w.name.toLowerCase()===(g==null?void 0:g.toLowerCase()));v.length>0&&f.push({...v[0],type:c?v[0].type:"esriFieldTypeString"})}f.length>0&&(this._fieldIndex=new VG(f));const m=iue(u,t!=null?t.spatialReference:null,f,h).then(y=>{const g={scale:0};return(v,w)=>{if(y==null)return null;const b=y.repurposeFeature({geometry:null,attributes:v});return g.scale=w!=null?w.scale??void 0:void 0,y.evaluate({$feature:b,$view:g},y.services)}}).catch(y=>(z.getLogger(oN).error("Creating dictionary expression failed:",y),null));return this._dictionaryPromise=m,m}async _cimPartsToCIMSymbol(t,r,i,n,s){const o=new Array(r.length);for(let c=0;c<r.length;c++)o[c]=this._getSymbolPart(r[c],s);let a=await Promise.all(o);const u=this.fieldMap;if(u){a=k(a);for(const c of a)hq.applyDictionaryTextOverrides(c,t,u,this._fieldIndex,fE(c))}return new Zl({data:gwe(a,i,n)})}async _getSymbolPart(t,r){const i=this._symbolCache.get(t);if(i)return i;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const n=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),s=dt(n,{responseType:"json",query:{f:"json"},...r});this._ongoingRequests.set(t,s),s.finally(()=>this._ongoingRequests.delete(t));try{const o=await s;return this._symbolCache.put(t,o.data),o.data}catch(o){throw o}}};function gwe(e,t,r){if(!e||e.length===0)return null;const i={...e[0]};if(e.length>1){i.symbolLayers=[];for(const n of e){const s=n;i.symbolLayers.unshift(...s.symbolLayers)}}return r&&(i.callout=ywe),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}var mE;let jn=mE=class extends Ih(na){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new fq(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i!=null&&i.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new mE({config:k(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:k(this.fieldMap),url:k(this.url),visualVariables:k(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Rr(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};l([d({type:fq})],jn.prototype,"_loader",null),l([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],jn.prototype,"config",void 0),l([d({type:Object,json:{write:!0}})],jn.prototype,"fieldMap",void 0),l([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],jn.prototype,"scaleExpression",void 0),l([Z("scaleExpression")],jn.prototype,"writeData",null),l([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],jn.prototype,"scaleExpressionTitle",void 0),l([d({type:String,json:{write:!0}})],jn.prototype,"url",void 0),l([Z("visualVariables")],jn.prototype,"writeVisualVariables",null),jn=mE=l([x("esri.renderers.DictionaryRenderer")],jn);const vwe=jn;var yE;let $o=yE=class extends j{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(z.getLogger(this).error(".field: field must be a string value"),null):Hy(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new yE({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([d({type:ce,json:{type:[Number],write:!0}})],$o.prototype,"color",void 0),l([d({type:String,json:{write:!0}})],$o.prototype,"field",void 0),l([je("field")],$o.prototype,"castField",null),l([d({type:String,json:{write:!0}})],$o.prototype,"label",void 0),l([d({type:String,json:{write:!0}})],$o.prototype,"valueExpression",void 0),l([d({type:String,json:{write:!0}})],$o.prototype,"valueExpressionTitle",void 0),$o=yE=l([x("esri.renderers.support.AttributeColorInfo")],$o);const mq=$o;var gE;let a1=gE=class extends j{constructor(){super(...arguments),this.unit=null}clone(){return new gE({unit:this.unit})}};l([d({type:String,json:{write:!0}})],a1.prototype,"unit",void 0),a1=gE=l([x("esri.renderers.support.DotDensityLegendOptions")],a1);const wwe=a1;var vE;let ii=vE=class extends Ih(na){constructor(e){super(e),this.attributes=null,this.backgroundColor=new ce([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Gi,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Yl({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new vE({attributes:k(this.attributes),backgroundColor:k(this.backgroundColor),dotBlendingEnabled:k(this.dotBlendingEnabled),dotShape:k(this.dotShape),dotSize:k(this.dotSize),dotValue:k(this.dotValue),legendOptions:k(this.legendOptions),outline:k(this.outline),referenceScale:k(this.referenceScale),seed:k(this.seed),visualVariables:k(this.visualVariables),authoringInfo:k(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(r=>r.field||r.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await Rr(e,t,r.valueExpression),r.field&&e.add(r.field)}};l([d({type:[mq],json:{write:!0}})],ii.prototype,"attributes",void 0),l([d({type:ce,json:{write:!0}})],ii.prototype,"backgroundColor",void 0),l([d({type:Boolean,json:{write:!0}})],ii.prototype,"dotBlendingEnabled",void 0),l([d({type:String,json:{write:!1}})],ii.prototype,"dotShape",void 0),l([d({type:Number,json:{write:!0}})],ii.prototype,"dotSize",void 0),l([d({type:wwe,json:{write:!0}})],ii.prototype,"legendOptions",void 0),l([d({type:Gi,json:{default:null,write:!0}})],ii.prototype,"outline",void 0),l([d({type:Number,json:{write:!0}})],ii.prototype,"dotValue",void 0),l([d({type:Number,json:{write:!0}})],ii.prototype,"referenceScale",void 0),l([d({type:Number,json:{write:!0}})],ii.prototype,"seed",void 0),l([ne({dotDensity:"dot-density"})],ii.prototype,"type",void 0),ii=vE=l([x("esri.renderers.DotDensityRenderer")],ii);const bwe=ii;var wE;let nm=wE=class extends j{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new wE({color:this.color&&this.color.clone(),ratio:this.ratio})}};l([d({type:ce,json:{type:[Ve],default:null,write:!0}})],nm.prototype,"color",void 0),l([d({type:Number,json:{write:!0}})],nm.prototype,"ratio",void 0),nm=wE=l([x("esri.renderers.support.HeatmapColorStop")],nm);const l1=nm;let Fd=class extends He(j){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};l([d({type:String,json:{write:!0}})],Fd.prototype,"minLabel",void 0),l([d({type:String,json:{write:!0}})],Fd.prototype,"maxLabel",void 0),l([d({type:String,json:{write:!0}})],Fd.prototype,"title",void 0),Fd=l([x("esri.renderers.support.HeatmapLegendOptions")],Fd);const PO=2.4;function _we(e){return $n(e*PO)}function Swe(e){return Xte(e)/PO}function $we(e,t,r,i){let{color:n,ratio:s}=t,{color:o,ratio:a}=r;a===s&&(a===1?s-=1e-6:a+=1e-6);const u=ss((i-s)/(a-s),0,1);KG(e,n.toArray(),o.toArray(),u)}function rke(e){const r=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,u)=>a.ratio-u.ratio).map(({color:a,ratio:u})=>({color:a,ratio:Math.max(u,.001)})),e.length<1)return r;let i=e[0],n=e[0],s=1;const o=O_();for(let a=0;a<512;a++){const u=(a+.5)/512;for(;u>n.ratio&&s<e.length;)i=n,n=e[s++];$we(o,i,n,u),r.set(o,4*a)}return r}function ike(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function nke(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var bE;function aN(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:i}=e;if(t!=null||r!=null||i!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=e;return a}}return e}let Xt=bE=class extends na{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new l1({ratio:0,color:new ce("rgba(255, 140, 0, 0)")}),new l1({ratio:.75,color:new ce("rgba(255, 140, 0, 1)")}),new l1({ratio:.9,color:new ce("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return aN(e)}get blurRadius(){return Swe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",_we(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(PO**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||Yr(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,dh(()=>{oK(z.getLogger(this),e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=aN(e),super.read(e,t)}getSymbol(){return new Ks}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&Kr(e,t,r),i&&typeof i=="string"&&await Rr(e,t,i)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new bE({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:k(this.colorStops),field:this.field,legendOptions:k(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([d({type:SO,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Xt.prototype,"authoringInfo",void 0),l([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Xt.prototype,"blurRadius",null),l([d({type:[l1],json:{write:!0}})],Xt.prototype,"colorStops",void 0),l([d({type:String,json:{write:!0}})],Xt.prototype,"field",void 0),l([d({type:Fd,json:{write:!0}})],Xt.prototype,"legendOptions",void 0),l([d({type:Number,json:{write:!0}})],Xt.prototype,"maxDensity",void 0),l([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Xt.prototype,"maxPixelIntensity",null),l([d({type:Number,json:{write:!0}})],Xt.prototype,"minDensity",void 0),l([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Xt.prototype,"minPixelIntensity",null),l([d({type:Number,cast:Ie,json:{write:!0}})],Xt.prototype,"radius",void 0),l([d({type:Number,range:{min:0},json:{default:0,write:!0}})],Xt.prototype,"referenceScale",void 0),l([ne({heatmap:"heatmap"})],Xt.prototype,"type",void 0),l([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Xt.prototype,"valueExpression",void 0),l([d({type:String})],Xt.prototype,"valueExpressionTitle",void 0),l([d({readOnly:!0})],Xt.prototype,"_pixelIntensityToDensity",null),Xt=bE=l([x("esri.renderers.HeatmapRenderer")],Xt);const yq=Xt;let ec=class extends He(j){constructor(){super(...arguments),this.color=new ce([0,0,0,0]),this.label=null,this.threshold=0}};l([d({type:ce,json:{write:!0}})],ec.prototype,"color",void 0),l([d({type:String,json:{write:!0}})],ec.prototype,"label",void 0),l([d({type:Number,range:{min:0,max:1},json:{write:!0}})],ec.prototype,"threshold",void 0),ec=l([x("esri.renderers.support.OthersCategory")],ec);let u1=class extends He(j){constructor(){super(...arguments),this.title=null}};l([d({type:String,json:{write:!0}})],u1.prototype,"title",void 0),u1=l([x("esri.renderers.support.PieChartLegendOptions")],u1);let Ei=class extends Ih(He(na)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new ce([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new ec,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var t;return new Ks({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Mc)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,r)=>t+r.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,r)=>t+JSON.stringify(r),"")}async collectRequiredFields(t,r){await this.collectVVRequiredFields(t,r);for(const i of this.attributes)i.valueExpression&&await Rr(t,r,i.valueExpression),i.field&&t.add(i.field)}};l([d({type:[mq],json:{write:!0}})],Ei.prototype,"attributes",void 0),l([d({type:Yl,json:{default:null,write:!0}})],Ei.prototype,"backgroundFillSymbol",void 0),l([d({type:ce,json:{write:!0}})],Ei.prototype,"defaultColor",void 0),l([d({type:String,json:{write:!0}})],Ei.prototype,"defaultLabel",void 0),l([d({type:Number,range:{min:0,max:1},json:{write:!0}})],Ei.prototype,"holePercentage",void 0),l([d({type:ec,json:{write:!0}})],Ei.prototype,"othersCategory",void 0),l([d({type:u1,json:{write:!0}})],Ei.prototype,"legendOptions",void 0),l([d({type:Gi,json:{default:null,write:!0}})],Ei.prototype,"outline",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],Ei.prototype,"size",void 0),l([ne({pieChart:"pie-chart"})],Ei.prototype,"type",void 0),Ei=l([x("esri.renderers.PieChartRenderer")],Ei);const xwe=Ei;var _E;let Gu=_E=class extends Ih(na){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new _E({description:this.description,label:this.label,symbol:k(this.symbol),visualVariables:k(this.visualVariables),authoringInfo:k(this.authoringInfo)})}};l([d({type:String,json:{write:!0}})],Gu.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],Gu.prototype,"label",void 0),l([d(MO)],Gu.prototype,"symbol",void 0),l([ne({simple:"simple"})],Gu.prototype,"type",void 0),Gu=_E=l([x("esri.renderers.SimpleRenderer")],Gu);const Oh=Gu,Twe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function SE(e){return e instanceof le}function lN(e){return e instanceof te?Object.keys(e.items):SE(e)?Yr(e).keys():e?Object.keys(e):[]}function Ag(e,t){return e instanceof te?e.items[t]:e[t]}function Mwe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function jm(e){return e?e.declaredClass:null}function gq(e,t){var f;const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=lN(e),n=lN(t);if(i.length===0&&n.length===0)return;if(!i.length||!n.length||Mwe(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter(m=>!i.includes(m)),o=i.filter(m=>!n.includes(m)),a=i.filter(m=>n.includes(m)&&Ag(e,m)!==Ag(t,m)).concat(s,o).sort(),u=jm(e);if(u&&Twe.has(u)&&a.length)return{type:"complete",oldValue:e,newValue:t};let c;const h=SE(e)&&SE(t);for(const m of a){const y=Ag(e,m),g=Ag(t,m);let v;if((h||typeof y!="function"&&typeof g!="function")&&y!==g&&(y!=null||g!=null)){if(r&&r[m]&&typeof r[m]=="function")v=(f=r[m])==null?void 0:f.call(r,y,g);else if(y instanceof Date&&g instanceof Date){if(y.getTime()===g.getTime())continue;v={type:"complete",oldValue:y,newValue:g}}else v=typeof y=="object"&&typeof g=="object"&&jm(y)===jm(g)?gq(y,g):{type:"complete",oldValue:y,newValue:g};v!=null&&(c!=null?c.diff[m]=v:c={type:"partial",diff:{[m]:v}})}}return c}function lke(e,t){return Ewe(e,t)}function Ewe(e,t){if(e==null)return!1;const r=t.split(".");let i=e;for(const n of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const s=i.diff[n];if(!s)return!1;i=s}}return!0}function uke(e,t){if(!e)return!1;if(e.type==="partial"){const r=Object.keys(e.diff);return r.length===1&&r[0]===t}return!1}function Iwe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&jm(e)!==jm(t)?{type:"complete",oldValue:e,newValue:t}:gq(e,t)}let Dd=class extends He(j){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};l([d(i1)],Dd.prototype,"value",void 0),l([d(i1)],Dd.prototype,"value2",void 0),l([d(i1)],Dd.prototype,"value3",void 0),Dd=l([x("esri.renderers.support.UniqueValue")],Dd);const jp=Dd;let Ga=class extends He(j){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const r=typeof(t=Array.isArray(t)?t:[t])[0];return r==="string"||r==="number"?t.map(i=>new jp({value:i})):r==="object"?t[0]instanceof jp?t:t.map(i=>new jp(i)):null}};l([d({type:String,json:{write:!0}})],Ga.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],Ga.prototype,"label",void 0),l([d(I_)],Ga.prototype,"symbol",void 0),l([d({type:[jp],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new jp({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const r=[];for(const i of e){const n=[i.value,i.value2,i.value3].filter(Mc).map(s=>s.toString());r.push(n)}t.values=r}}}})],Ga.prototype,"values",void 0),l([je("values")],Ga.prototype,"castValues",null),Ga=l([x("esri.renderers.support.UniqueValueClass")],Ga);const vq=Ga;let sm=class extends He(j){constructor(t){super(t),this.heading=null,this.classes=null}};l([d({type:String,json:{write:!0}})],sm.prototype,"heading",void 0),l([d({type:[vq],json:{write:!0}})],sm.prototype,"classes",void 0),sm=l([x("esri.renderers.support.UniqueValueGroup")],sm);const $E=sm;var xE;let qu=xE=class extends j{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new xE({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};l([d({type:String,json:{write:!0}})],qu.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],qu.prototype,"label",void 0),l([d(MO)],qu.prototype,"symbol",void 0),l([d(i1)],qu.prototype,"value",void 0),qu=xE=l([x("esri.renderers.support.UniqueValueInfo")],qu);const zm=qu,kwe=()=>!!R("enable-feature:force-wosr"),Owe=()=>R.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),Pwe=()=>R.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),Cwe=()=>R.add("enable-i3s-patching",!0,!0,!0),Awe=()=>R.add("enable-i3s-patching",!1,!0,!0),hke=()=>!!R("enable-feature:SceneLayer-editing"),Rwe=(e="i3s-patching")=>{switch(Awe(),Pwe(),R.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":Owe();break;case"i3s-patching":Cwe()}};Rwe("i3s-patching");let x2={};async function Lwe(e,t){try{return{data:(await jwe(e,t)).data,baseUrl:IQ(e),styleUrl:e}}catch(r){return As(r),null}}function Nwe(e,t,r){var o;const i=t.portal!=null?t.portal:wi.getDefault();let n;const s=`${i.url} - ${(o=i.user)==null?void 0:o.username} - ${e}`;return x2[s]||(x2[s]=Fwe(e,i,r).then(a=>(n=a,a.fetchData())).then(a=>({data:a,baseUrl:n.itemUrl??"",styleName:e}))),x2[s]}function Fwe(e,t,r){return t.load(r).then(()=>{const i=new Ns({disableExtraQuery:!0,query:`owner:${uN} AND type:${cN} AND typekeywords:"${e}"`});return t.queryItems(i,r)}).then(({results:i})=>{var o;let n=null;const s=e.toLowerCase();if(i&&Array.isArray(i)){for(const a of i)if(((o=a.typeKeywords)==null?void 0:o.some(c=>c.toLowerCase()===s))&&a.type===cN&&a.owner===uN){n=a;break}}if(!n)throw new N("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(r)})}function Dwe(e,t,r){return(e==null?void 0:e.styleUrl)!=null?Lwe(e.styleUrl,r):(e==null?void 0:e.styleName)!=null?Nwe(e.styleName,t,r):Promise.reject(new N("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function fke(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function mke(e,t,r=["gltf"]){if(t==="cimRef")return encodeURI(e.cimRef);if(e.formatInfos&&!kwe())for(const i of r){const n=e.formatInfos.find(s=>s.type===i);if(n)return n.href}return encodeURI(e.webRef)}function jwe(e,t){const r={responseType:"json",query:{f:"json"},...t};return dt(Qn(e),r)}const uN="esri_en",cN="Style",yke="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var om;const wq="esri.renderers.UniqueValueRenderer",ga=()=>z.getLogger(wq),dN="uvInfos-watcher",pN="uvGroups-watcher",zwe=",",Vwe=Pt(zm);function Uwe(e){const{field1:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=e,a=!(!t||!r);return[{classes:(s??[]).map(u=>{var b;const{symbol:c,label:h,value:f,description:m}=u,[y,g,v]=a?((b=f==null?void 0:f.toString())==null?void 0:b.split(n||""))||[]:[f],w=[];return(t||o)&&w.push(y),r&&w.push(g),i&&w.push(v),{symbol:c,label:h,values:[w],description:m}})}]}let tt=om=class extends Ih(na){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<r.length;s++){const o=t.find(a=>a.value===r[s].value);o?Iwe(o,r[s])?(n.changed.push({type:"complete",oldValue:o,newValue:r[s]}),i=!0):n.unchanged.push({oldValue:o,newValue:r[s]}):(n.added.push(r[s]),i=!0)}for(let s=0;s<t.length;s++)r.find(o=>o.value===t[s].value)||(n.removed.push(t[s]),i=!0);return i?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:Hy(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i!=null&&i.messages?i.messages.push(new N("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):ga().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||wi.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=fh(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Ky(e.styleUrl,i))}set uniqueValueGroups(e){this.styleOrigin?ga().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?ga().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var i;if(this.styleOrigin)return void ga().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?Vwe(e):new zm({value:e,symbol:n7(t)}),(i=this.uniqueValueInfos)==null||i.push(r),this._valueInfoMap[r.value]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void ga().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const i=t[r];if(String(i.value)===String(e)){delete this._valueInfoMap[e],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await Dc()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void ga().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return(r==null?void 0:r.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(r==null?void 0:r.arcade)==null){const n=await Dc(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this._getUniqueValueInfo(e,r);return(i==null?void 0:i.symbol)||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){var i;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=(i=this.uniqueValueInfos)==null?void 0:i.reduce((n,s)=>n+s.getMeshHash(),"");return`${e}.${t}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new om({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:k(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:k(this.visualVariables),legendOptions:k(this.legendOptions),authoringInfo:k(this.authoringInfo),backgroundFillSymbol:k(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=k(this.uniqueValueInfos),r=k(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(k(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),Rr(e,t,this.valueExpression)];Kr(e,t,this.field),Kr(e,t,this.field2),Kr(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return Dwe(this.styleOrigin,{portal:this.portal}).then(e=>{var r;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const n=new ed({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new zm({value:i.name,symbol:n});t.push(s),this._valueInfoMap[i.name]=s}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((r=this.uniqueValueInfos)!=null&&r.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",zwe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(dN);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(he(()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description}),(i,n)=>{i!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,dN)}}_watchUniqueValueGroups(){this.removeHandles(pN);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(he(()=>({classes:r.classes}),(i,n)=>{i!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const i of r.classes??[])t.push(he(()=>({symbol:i.symbol,values:i.values,label:i.label,description:i.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,pN)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!r);for(const u of s)for(const c of u.classes??[]){const{symbol:h,label:f,values:m,description:y}=c;for(const g of m??[]){const{value:v,value2:w,value3:b}=g,_=[v];r&&_.push(w),i&&_.push(b);const $=a?_.join(n||""):_[0]??void 0;e.push(new zm({symbol:h,label:f,value:$,description:y}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:i,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!t&&!i||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!r),a=s.map(c=>{var b;const{symbol:h,label:f,value:m,description:y}=c,[g,v,w]=o?((b=m==null?void 0:m.toString())==null?void 0:b.split(n||""))||[]:[m];return new vq({symbol:h,label:f,description:y,values:[new jp({value:g,value2:v,value3:w})]})}),u=[new $E({classes:a})];e&&Object.freeze(u),this._set("uniqueValueGroups",u),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s,timeZone:o}=t??{};let a=this._cache.compiledFunc;const u=s.arcadeUtils;if(!a){const h=u.createSyntaxTree(this.valueExpression);a=u.createFunction(h),this._cache.compiledFunc=a}const c=u.executeFunction(a,u.createExecContext(e,u.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),o));return this._valueInfoMap[c+""]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(this.field2){const n=this.field2,s=this.field3,o=[];t&&o.push(r[t]),n&&o.push(r[n]),s&&o.push(r[s]),i=o.join(this.fieldDelimiter||"")}else t&&(i=r[t]);return this._valueInfoMap[i+""]}static fromPortalStyle(e,t){const r=new om(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",(t==null?void 0:t.portal)||wi.getDefault());const i=r.populateFromStyle();return i.catch(n=>{ga().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),i}static fromStyleUrl(e,t){const r=new om(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch(n=>{ga().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),i}};l([d({readOnly:!0})],tt.prototype,"_cache",null),l([ne({uniqueValue:"unique-value"})],tt.prototype,"type",void 0),l([d(DG)],tt.prototype,"backgroundFillSymbol",void 0),l([d({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],tt.prototype,"field",null),l([je("field")],tt.prototype,"castField",null),l([Z("field")],tt.prototype,"writeField",null),l([d({type:String,value:null,json:{write:!0}})],tt.prototype,"field2",null),l([d({type:String,value:null,json:{write:!0}})],tt.prototype,"field3",null),l([d({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],tt.prototype,"orderByClassesEnabled",void 0),l([d({type:String,value:null,json:{write:!0}})],tt.prototype,"valueExpression",null),l([d({type:String,json:{write:!0}})],tt.prototype,"valueExpressionTitle",void 0),l([d({type:Dp,json:{write:!0}})],tt.prototype,"legendOptions",void 0),l([d({type:String,json:{write:!0}})],tt.prototype,"defaultLabel",void 0),l([d(mI({...I_},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],tt.prototype,"defaultSymbol",null),l([d({type:String,value:null,json:{write:!0}})],tt.prototype,"fieldDelimiter",null),l([d({type:wi,readOnly:!0})],tt.prototype,"portal",void 0),l([G("portal",["styleName"])],tt.prototype,"readPortal",null),l([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],tt.prototype,"styleOrigin",void 0),l([G("styleOrigin",["styleName","styleUrl"])],tt.prototype,"readStyleOrigin",null),l([Z("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],tt.prototype,"writeStyleOrigin",null),l([d({type:[$E],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||Uwe(t)).map(i=>$E.fromJSON(i,r))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],tt.prototype,"uniqueValueGroups",null),l([d({type:[zm],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],tt.prototype,"uniqueValueInfos",null),tt=om=l([x(wq)],tt);const CO=tt,P_={key:"type",base:na,typeMap:{heatmap:yq,simple:Oh,"unique-value":CO,"class-breaks":zG,"dot-density":bwe,dictionary:vwe,"pie-chart":xwe},errorContext:"renderer"},Gwe={key:"type",base:na,typeMap:{simple:Oh,"unique-value":CO,"class-breaks":zG,heatmap:yq},errorContext:"renderer",validate:qwe};function qwe(e){switch(e.type){case"simple":return Bwe(e);case"unique-value":return Hwe(e);case"class-breaks":return Wwe(e);case"heatmap":return e}}function Bwe(e){if(e.symbol)return e;z.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function Hwe(e){const t=e.uniqueValueInfos,r=t==null?void 0:t.filter(({symbol:i,label:n},s)=>(i||z.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!i));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=r),e}function Wwe(e){const t=e.classBreakInfos,r=t==null?void 0:t.filter(({symbol:i,label:n},s)=>(i||z.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!i));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=r),e}function gke(e,t){return Ay(e,null,t)}const Zwe=ph({types:P_});function Ay(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r!=null&&r.messages&&r.messages.push(new Sn("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):Zwe(e,t,r):null}let Jwe=class bq{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(B$),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new bq,i=this._originStores[xe.DEFAULTS];i&&i.forEach((n,s)=>{r.set(s,k(n),xe.DEFAULTS)});for(let n=xe.SERVICE;n<B$;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{t&&t.has(a)||r.set(a,k(o),n)})}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=xe.USER){let n=this._originStores[i];if(n||(n=new Map,this._originStores[i]=n),n.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const s=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),s!==r}return!1}delete(t,r=xe.USER){const i=this._originStores[r];if(!i)return;const n=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let s=r-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return n}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],n=i==null?void 0:i.get(t),s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,r),s!==n}originOf(t){return this._propertyOriginMap.get(t)||xe.DEFAULTS}forEach(t){this._values.forEach(t)}};const _q=e=>{let t=class extends e{constructor(...r){super(...r);const i=Yr(this),n=i.store,s=new Jwe;i.store=s,Zj(i,n,s)}read(r,i){Kj(this,r,i)}getAtOrigin(r,i){const n=T2(this),s=ul(i);if(typeof r=="string")return n.get(r,s);const o={};return r.forEach(a=>{o[a]=n.get(a,s)}),o}originOf(r){return Z1(this.originIdOf(r))}originIdOf(r){return T2(this).originOf(r)}revert(r,i){const n=T2(this),s=ul(i),o=Yr(this);let a;a=typeof r=="string"?r==="*"?n.keys(s):[r]:r,a.forEach(u=>{o.invalidate(u),n.revert(u,s),o.commit(u)})}};return t=l([x("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function T2(e){return Yr(e).store}let hN=class extends _q(le){};hN=l([x("esri.core.ReadOnlyMultiOriginJSONSupport")],hN);const Kwe=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){return M2(this).delete(r,ul(i))}write(r,i){return Qj(this,r=r||{},i),r}setAtOrigin(r,i,n){Yr(this).setAtOrigin(r,i,ul(n))}removeOrigin(r){const i=M2(this),n=ul(r),s=i.keys(n);for(const o of s)i.originOf(o)===n&&i.set(o,i.get(o,n),xe.USER)}updateOrigin(r,i){const n=M2(this),s=ul(i),o=Yn(this,r);for(let a=s+1;a<B$;++a)n.delete(r,a);n.set(r,o,s)}toJSON(r){return this.write({},r)}};return t=l([x("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function M2(e){return Yr(e).store}const Sq=e=>{let t=class extends Kwe(_q(e)){constructor(...r){super(...r)}};return t=l([x("esri.core.MultiOriginJSONSupport")],t),t};let fN=class extends Sq(le){};fN=l([x("esri.core.MultiOriginJSONSupport")],fN);const or=(e=>e)(["operational-layers","basemap","ground"]);var TE;let Bu=TE=class extends j{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new TE({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([d({type:String,json:{write:!0}})],Bu.prototype,"expression",void 0),l([d({type:String,json:{write:!0}})],Bu.prototype,"name",void 0),l([d({type:["boolean","date","number","string"],json:{write:!0}})],Bu.prototype,"returnType",void 0),l([d({type:String,json:{write:!0}})],Bu.prototype,"title",void 0),Bu=TE=l([x("esri.form.ExpressionInfo")],Bu);const Ywe=Bu;let Hu=class extends j{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};l([d({type:String,json:{write:!0}})],Hu.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],Hu.prototype,"label",void 0),l([d()],Hu.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Hu.prototype,"visibilityExpression",void 0),Hu=l([x("esri.form.elements.Element")],Hu);const Vc=Hu;var ME;let c1=ME=class extends j{constructor(e){super(e),this.type=null}clone(){return new ME({type:this.type})}};l([d({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],c1.prototype,"type",void 0),c1=ME=l([x("esri.form.elements.inputs.AttachmentInput")],c1);const Qwe=c1;var EE;let Wu=EE=class extends Vc{constructor(e){super(e),this.attachmentKeyword=null,this.editableExpression=null,this.input=null,this.type="attachment"}clone(){return new EE({attachmentKeyword:this.attachmentKeyword,description:this.description,editableExpression:this.editableExpression,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};l([d({type:String,json:{write:!0}})],Wu.prototype,"attachmentKeyword",void 0),l([d({type:String,json:{write:!0}})],Wu.prototype,"editableExpression",void 0),l([d({type:Qwe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Wu.prototype,"input",void 0),l([d({type:["attachment"],json:{read:!1,write:!0}})],Wu.prototype,"type",void 0),Wu=EE=l([x("esri.form.elements.AttachmentElement")],Wu);const mN=Wu;let d1=class extends j{constructor(t){super(t),this.type=null}};l([d()],d1.prototype,"type",void 0),d1=l([x("esri.form.elements.inputs.Input")],d1);const sa=d1;let am=class extends sa{constructor(t){super(t),this.maxLength=null,this.minLength=0}};l([d({type:Number,json:{write:!0}})],am.prototype,"maxLength",void 0),l([d({type:Number,json:{write:!0}})],am.prototype,"minLength",void 0),am=l([x("esri.form.elements.inputs.TextInput")],am);const AO=am;var IE;let p1=IE=class extends AO{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new IE({maxLength:this.maxLength,minLength:this.minLength})}};l([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],p1.prototype,"type",void 0),p1=IE=l([x("esri.form.elements.inputs.BarcodeScannerInput")],p1);const Xwe=p1;var kE;let jd=kE=class extends sa{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new kE({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};l([d({type:String,json:{write:!0}})],jd.prototype,"noValueOptionLabel",void 0),l([d({type:Boolean,json:{write:!0}})],jd.prototype,"showNoValueOption",void 0),l([d({type:["combo-box"],json:{read:!1,write:!0}})],jd.prototype,"type",void 0),jd=kE=l([x("esri.form.elements.inputs.ComboBoxInput")],jd);const ebe=jd;var OE;function yN(e){return e??null}function gN(e){return e??null}let Es=OE=class extends sa{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return yN(t.max)}writeMax(e,t){t.max=gN(e)}readMin(e,t){return yN(t.min)}writeMin(e,t){t.min=gN(e)}clone(){return new OE({max:this.max,min:this.min})}};l([d({type:String,json:{type:String,write:!0}})],Es.prototype,"max",void 0),l([G("max")],Es.prototype,"readMax",null),l([Z("max")],Es.prototype,"writeMax",null),l([d({type:String,json:{type:String,write:!0}})],Es.prototype,"min",void 0),l([G("min")],Es.prototype,"readMin",null),l([Z("min")],Es.prototype,"writeMin",null),l([d({type:["date-picker"],json:{read:!1,write:!0}})],Es.prototype,"type",void 0),Es=OE=l([x("esri.form.elements.inputs.DatePickerInput")],Es);const tbe=Es;var PE;function E2(e){return e??null}function I2(e){return e??null}let ni=PE=class extends sa{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return E2(t.max)}writeMax(e,t){t.max=I2(e)}readMin(e,t){return E2(t.min)}writeMin(e,t){t.min=I2(e)}readTimeResolution(e,t){return E2(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=I2(e)}clone(){return new PE({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};l([d({type:Boolean,json:{write:!0}})],ni.prototype,"includeTimeOffset",void 0),l([d({type:String,json:{type:String,write:!0}})],ni.prototype,"max",void 0),l([G("max")],ni.prototype,"readMax",null),l([Z("max")],ni.prototype,"writeMax",null),l([d({type:String,json:{type:String,write:!0}})],ni.prototype,"min",void 0),l([G("min")],ni.prototype,"readMin",null),l([Z("min")],ni.prototype,"writeMin",null),l([d({type:String,json:{type:String,write:!0}})],ni.prototype,"timeResolution",void 0),l([G("timeResolution")],ni.prototype,"readTimeResolution",null),l([Z("timeResolution")],ni.prototype,"writeTimeResolution",null),l([d({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],ni.prototype,"type",void 0),ni=PE=l([x("esri.form.elements.inputs.DateTimeOffsetPickerInput")],ni);const rbe=ni;var CE;function vN(e){return e!=null?new Date(e):null}function wN(e){return e?e.getTime():null}let zn=CE=class extends sa{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return vN(t.max)}writeMax(e,t){t.max=wN(e)}readMin(e,t){return vN(t.min)}writeMin(e,t){t.min=wN(e)}clone(){return new CE({includeTime:this.includeTime,max:this.max,min:this.min})}};l([d({type:Boolean,json:{write:!0}})],zn.prototype,"includeTime",void 0),l([d({type:Date,json:{type:Number,write:!0}})],zn.prototype,"max",void 0),l([G("max")],zn.prototype,"readMax",null),l([Z("max")],zn.prototype,"writeMax",null),l([d({type:Date,json:{type:Number,write:!0}})],zn.prototype,"min",void 0),l([G("min")],zn.prototype,"readMin",null),l([Z("min")],zn.prototype,"writeMin",null),l([d({type:["datetime-picker"],json:{read:!1,write:!0}})],zn.prototype,"type",void 0),zn=CE=l([x("esri.form.elements.inputs.DateTimePickerInput")],zn);const ibe=zn;var AE;let zd=AE=class extends sa{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new AE({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};l([d({type:String,json:{write:!0}})],zd.prototype,"noValueOptionLabel",void 0),l([d({type:Boolean,json:{write:!0}})],zd.prototype,"showNoValueOption",void 0),l([d({type:["radio-buttons"],json:{read:!1,write:!0}})],zd.prototype,"type",void 0),zd=AE=l([x("esri.form.elements.inputs.RadioButtonsInput")],zd);const nbe=zd;var RE;let Vd=RE=class extends sa{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new RE({offValue:this.offValue,onValue:this.onValue})}};l([d({type:[String,Number],json:{write:!0}})],Vd.prototype,"offValue",void 0),l([d({type:[String,Number],json:{write:!0}})],Vd.prototype,"onValue",void 0),l([d({type:["switch"],json:{read:!1,write:!0}})],Vd.prototype,"type",void 0),Vd=RE=l([x("esri.form.elements.inputs.SwitchInput")],Vd);const sbe=Vd;var LE;let h1=LE=class extends AO{constructor(e){super(e),this.type="text-area"}clone(){return new LE({maxLength:this.maxLength,minLength:this.minLength})}};l([d({type:["text-area"],json:{read:!1,write:!0}})],h1.prototype,"type",void 0),h1=LE=l([x("esri.form.elements.inputs.TextAreaInput")],h1);const obe=h1;var NE;let f1=NE=class extends AO{constructor(e){super(e),this.type="text-box"}clone(){return new NE({maxLength:this.maxLength,minLength:this.minLength})}};l([d({type:["text-box"],json:{read:!1,write:!0}})],f1.prototype,"type",void 0),f1=NE=l([x("esri.form.elements.inputs.TextBoxInput")],f1);const abe=f1;var FE;function k2(e){return e??null}function O2(e){return e??null}let Ii=FE=class extends sa{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return k2(t.max)}writeMax(e,t){t.max=O2(e)}readMin(e,t){return k2(t.min)}writeMin(e,t){t.min=O2(e)}readTimeResolution(e,t){return k2(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=O2(e)}clone(){return new FE({max:this.max,min:this.min,timeResolution:this.timeResolution})}};l([d({type:String,json:{type:String,write:!0}})],Ii.prototype,"max",void 0),l([G("max")],Ii.prototype,"readMax",null),l([Z("max")],Ii.prototype,"writeMax",null),l([d({type:String,json:{type:String,write:!0}})],Ii.prototype,"min",void 0),l([G("min")],Ii.prototype,"readMin",null),l([Z("min")],Ii.prototype,"writeMin",null),l([d({type:String,json:{type:String,write:!0}})],Ii.prototype,"timeResolution",void 0),l([G("timeResolution")],Ii.prototype,"readTimeResolution",null),l([Z("timeResolution")],Ii.prototype,"writeTimeResolution",null),l([d({type:["time-picker"],json:{read:!1,write:!0}})],Ii.prototype,"type",void 0),Ii=FE=l([x("esri.form.elements.inputs.TimePickerInput")],Ii);const lbe=Ii,ube={base:sa,key:"type",typeMap:{"barcode-scanner":Xwe,"combo-box":ebe,"date-picker":tbe,"datetime-picker":ibe,"datetimeoffset-picker":rbe,"radio-buttons":nbe,switch:sbe,"text-area":obe,"text-box":abe,"time-picker":lbe}};var DE;let rn=DE=class extends Vc{constructor(e){super(e),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return this._get("editable")??!0}set editable(e){this._set("editable",e)}clone(){return new DE({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};l([d({types:u7,json:{read:{reader:y_},write:!0}})],rn.prototype,"domain",void 0),l([d({type:Boolean,json:{write:!0}})],rn.prototype,"editable",null),l([d({type:String,json:{write:!0}})],rn.prototype,"editableExpression",void 0),l([d({type:String,json:{write:!0}})],rn.prototype,"fieldName",void 0),l([d({type:String,json:{write:!0}})],rn.prototype,"hint",void 0),l([d({types:ube,json:{read:{source:"inputType"},write:{target:"inputType"}}})],rn.prototype,"input",void 0),l([d({type:String,json:{write:!0}})],rn.prototype,"requiredExpression",void 0),l([d({type:String,json:{read:!1,write:!0}})],rn.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],rn.prototype,"valueExpression",void 0),rn=DE=l([x("esri.form.elements.FieldElement")],rn);const bN=rn;var jE;let xo=jE=class extends Vc{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new jE({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:k(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};l([d({type:Number,json:{write:!0}})],xo.prototype,"displayCount",void 0),l([d({type:["list"],json:{write:!0}})],xo.prototype,"displayType",void 0),l([d({type:String,json:{write:!0}})],xo.prototype,"editableExpression",void 0),l([d({type:[Lk],json:{write:!0}})],xo.prototype,"orderByFields",void 0),l([d({type:Number,json:{write:!0}})],xo.prototype,"relationshipId",void 0),l([d({type:["relationship"],json:{read:!1,write:!0}})],xo.prototype,"type",void 0),xo=jE=l([x("esri.form.elements.RelationshipElement")],xo);const _N=xo;var zE;let Ud=zE=class extends Vc{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new zE({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};l([d({type:String,json:{write:!0}})],Ud.prototype,"text",void 0),l([d({type:String,json:{write:!0}})],Ud.prototype,"textFormat",void 0),l([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Ud.prototype,"type",void 0),Ud=zE=l([x("esri.form.elements.TextElement")],Ud);const SN=Ud;function $q(e){return{typesWithGroup:{base:Vc,key:"type",typeMap:{attachment:mN,field:bN,group:e,relationship:_N,text:SN}},typesWithoutGroup:{base:Vc,key:"type",typeMap:{attachment:mN,field:bN,relationship:_N,text:SN}}}}function xq(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function Tq(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function Mq(e,t,r=!0){return e?e.map(i=>Us(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var VE;let Ps=VE=class extends Vc{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return Mq(e,P2,!1)}readElements(e,t){return xq(t.formElements,P2,!1)}writeElements(e,t){t.formElements=Tq(e,P2,!1)}clone(){return new VE({description:this.description,elements:k(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};l([d({json:{write:!0}})],Ps.prototype,"elements",void 0),l([je("elements")],Ps.prototype,"castElements",null),l([G("elements",["formElements"])],Ps.prototype,"readElements",null),l([Z("elements")],Ps.prototype,"writeElements",null),l([d({type:["collapsed","expanded"],json:{write:!0}})],Ps.prototype,"initialState",void 0),l([d({type:String,json:{read:!1,write:!0}})],Ps.prototype,"type",void 0),Ps=VE=l([x("esri.form.elements.GroupElement")],Ps);const P2=$q(Ps),cbe=Ps,dbe=e=>e.type==="field",pbe=e=>e.type==="group",hbe=e=>e.type==="text";var UE;const C2=$q(cbe);let Vn=UE=class extends j{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return Mq(e,C2)}readElements(e,t){return xq(t.formElements,C2)}writeElements(e,t){t.formElements=Tq(e,C2)}clone(){return new UE({description:this.description,expressionInfos:k(this.expressionInfos),elements:k(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const r=new Set,{description:i,elements:n,expressionInfos:s,title:o}=this;if(Vm(r,e,i),Vm(r,e,o),!n)return[];const a=fbe(n,s).map(u=>Rr(r,e,u));await Promise.all(a);for(const u of n)Eq(r,{fieldsIndex:e,relationships:t},u);return Array.from(r).sort()}};function Eq(e,t,r){var n;const{fieldsIndex:i}=t;if(!i||i.fields.length!==e.size)switch(Vm(e,i,r.label),Vm(e,i,r.description),r.type){case"field":Kr(e,i,r.fieldName);break;case"group":r.elements.forEach(s=>Eq(e,t,s));break;case"relationship":if(t.relationships){const s=t.relationships.find(o=>o.id===r.relationshipId);s&&Kr(e,i,s.keyField)}jc(e,i,(n=r.orderByFields)==null?void 0:n.map(s=>s.field));break;case"text":Vm(e,i,r.text)}}function fbe(e,t){if(!t||t.length===0)return[];const r=Iq(e),i=[];for(const n of t)r.has(n.name)&&i.push(n.expression);return i}function Iq(e){const t=new Set;for(const r of e)if(jC(t,r.visibilityExpression),!hbe(r)){if(pbe(r))ew(t,Iq(r.elements));else if(jC(t,r.editableExpression),dbe(r)){const{requiredExpression:i,valueExpression:n}=r;ew(t,[i,n])}}return t}function Vm(e,t,r){jc(e,t,_V(r))}l([d({type:String,json:{write:!0}})],Vn.prototype,"description",void 0),l([d({json:{write:!0}})],Vn.prototype,"elements",void 0),l([je("elements")],Vn.prototype,"castElements",null),l([G("elements",["formElements"])],Vn.prototype,"readElements",null),l([Z("elements")],Vn.prototype,"writeElements",null),l([d({type:[Ywe],json:{write:!0}})],Vn.prototype,"expressionInfos",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],Vn.prototype,"preserveFieldValuesWhenHidden",void 0),l([d({type:String,json:{write:!0}})],Vn.prototype,"title",void 0),Vn=UE=l([x("esri.form.FormTemplate")],Vn);const mbe=Vn;function $N(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const n of i)n.length>2&&(n[2]*=r)}function ybe(e,t,r){if(!e&&!t||!r)return;const i=ww(r);xN(e,r,i),xN(t,r,i)}function xN(e,t,r){if(e)for(const i of e)gbe(i.geometry,t,r)}function gbe(e,t,r){if(!(e!=null&&e.spatialReference)||Wt(e.spatialReference,t))return;const i=ww(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)$N(e,e.rings,i);else if("paths"in e)$N(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=i)}}function TN(e,t,r){if(!(r!=null&&r.features)||!r.hasZ)return;const i=x9(r.geometryType,t,e.outSpatialReference);if(i!=null)for(const n of r.features)i(n.geometry)}var GE;const qE=new Ee({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let er=GE=class extends j{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var n;const r=ve.fromJSON(t.spatialReference),i=[];for(let s=0;s<e.length;s++){const o=e[s],a=ts.fromJSON(o),u=(n=o.geometry)==null?void 0:n.spatialReference;a.geometry==null||u||(a.geometry.spatialReference=r);const c=o.aggregateGeometries,h=a.aggregateGeometries;if(c&&h!=null)for(const f in h){const m=h[f],y=c[f],g=y==null?void 0:y.spatialReference;m==null||g||(m.spatialReference=r)}i.push(a)}return i}writeGeometryType(e,t,r,i){if(e)return void qE.write(e,t,r,i);const{features:n}=this;if(n){for(const s of n)if((s==null?void 0:s.geometry)!=null)return void qE.write(s.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=Cl(e);return i&&!r&&t.spatialReference&&(i.spatialReference=ve.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&i.geometry!=null&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new GE(this.cloneProperties())}cloneProperties(){return k({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const n=e==null?void 0:e[r];i.geometry=(n==null?void 0:n.toJSON())||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,n]}=e,s=c=>Math.round((c-i)/t),o=c=>Math.round((n-c)/r),a=this.features,u=this._getQuantizationFunction(this.geometryType,s,o);for(let c=0,h=a.length;c<h;c++)u!=null&&u(a[c].geometry)||(a.splice(c,1),c--,h--);return this.transform=e,this}unquantize(){var m,y;const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,n],scale:[s,o]}=r,a=g=>g*s+i,u=g=>n-g*o;let c=null,h=null;if(this.hasZ&&((m=r==null?void 0:r.scale)==null?void 0:m[2])!=null){const{translate:[,,g],scale:[,,v]}=r;c=w=>w*v+g}if(this.hasM&&((y=r==null?void 0:r.scale)==null?void 0:y[3])!=null){const{translate:[,,,g],scale:[,,,v]}=r;h=w=>w==null?w:w*v+g}const f=this._getHydrationFunction(e,a,u,c,h);for(const{geometry:g}of t)g!=null&&f&&f(g);return this.transform=null,this}_quantizePoints(e,t,r){let i,n;const s=[];for(let o=0,a=e.length;o<a;o++){const u=e[o];if(o>0){const c=t(u[0]),h=r(u[1]);c===i&&h===n||(s.push([c-i,h-n]),i=c,n=h)}else i=t(u[0]),n=r(u[1]),s.push([i,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const n=Ep(i)?i.rings:i.paths,s=[];for(let o=0,a=n.length;o<a;o++){const u=n[o],c=this._quantizePoints(u,t,r);c&&s.push(c)}return s.length>0?(Ep(i)?i.rings=s:i.paths=s,i):null}:e==="multipoint"?i=>{const n=this._quantizePoints(i.points,t,r);return n&&n.length>0?(i.points=n,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r,i,n){return e==="point"?s=>{s.x=t(s.x),s.y=r(s.y),i&&(s.z=i(s.z))}:e==="polyline"||e==="polygon"?s=>{const o=Ep(s)?s.rings:s.paths;let a,u;for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];m>0?(a+=g[0],u+=g[1]):(a=g[0],u=g[1]),g[0]=t(a),g[1]=r(u)}}if(i&&n)for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=i(g[2]),g[3]=n(g[3])}}else if(i)for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=i(g[2])}}else if(n)for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=n(g[2])}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=r(s.ymin),s.xmax=t(s.xmax),s.ymax=r(s.ymax),i&&s.zmax!=null&&s.zmin!=null&&(s.zmax=i(s.zmax),s.zmin=i(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:e==="multipoint"?s=>{const o=s.points;let a,u;for(let c=0,h=o.length;c<h;c++){const f=o[c];c>0?(a+=f[0],u+=f[1]):(a=f[0],u=f[1]),f[0]=t(a),f[1]=r(u)}if(i&&n)for(let c=0,h=o.length;c<h;c++){const f=o[c];f[2]=i(f[2]),f[3]=n(f[3])}else if(i)for(let c=0,h=o.length;c<h;c++){const f=o[c];f[2]=i(f[2])}else if(n)for(let c=0,h=o.length;c<h;c++){const f=o[c];f[2]=n(f[2])}}:null}};l([d({type:String,json:{write:!0}})],er.prototype,"displayFieldName",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],er.prototype,"exceededTransferLimit",void 0),l([d({type:[ts],json:{write:!0}})],er.prototype,"features",void 0),l([G("features")],er.prototype,"readFeatures",null),l([d({type:[Wk],json:{write:!0}})],er.prototype,"fields",void 0),l([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:qE.read}}})],er.prototype,"geometryType",void 0),l([Z("geometryType")],er.prototype,"writeGeometryType",null),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],er.prototype,"hasM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],er.prototype,"hasZ",void 0),l([d({types:Jc,json:{write:!0}})],er.prototype,"queryGeometry",void 0),l([G("queryGeometry")],er.prototype,"readQueryGeometry",null),l([d({type:ve,json:{write:!0}})],er.prototype,"spatialReference",void 0),l([Z("spatialReference")],er.prototype,"writeSpatialReference",null),l([d({json:{write:!0}})],er.prototype,"transform",void 0),er=GE=l([x("esri.rest.support.FeatureSet")],er),er.prototype.toJSON.isDefaultToJSON=!0;const kq=er;let vbe=0,Co=class extends Yo.LoadableMixin(Fb(te)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var r;const t=(r=this.layer)==null?void 0:r.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,r={}){await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);TN(t,this.layer.spatialReference,i);const n=kq.fromJSON(i);if(!this._requiresClientGraphicMapping())return n;const s=this.layer.objectIdField;for(const o of n.features){const a=o.attributes[s],u=this._idToClientGraphic.get(a);u&&(o.geometry=u.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(t,r={}){if(this._requiresClientGraphicMapping())throw new N("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);return TN(t,this.layer.spatialReference,i),i}queryFeatureCount(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r))}queryObjectIds(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r))}queryExtent(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r)).then(i=>({count:i.count,extent:Be.fromJSON(i.extent)}))}querySnapping(t,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",t,r))}async _applyEdits(t){if(!this._connection)throw new N("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let i=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[r]!=null?h.attributes[r]:null;if(t.addFeatures&&(i=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const h of t.deleteFeatures){const f=o(h);f!=null&&n.push(f)}const a=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const h of t.updateFeatures)if(s.push(this._serializeFeature(h)),a){const f=o(h);f!=null&&a.set(f,h)}}ybe(i?i.features:null,s,this.layer.spatialReference);const{fullExtent:u,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:n});return this.fullExtent=u,i&&i.finish(c.uidToObjectId),this._updateClientGraphicIds(a,c),this._createEditsResult(c)}async _prepareClientMapping(t,r){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const i=[];for(const{geometry:n}of t)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||i.push(n.load({signal:r}));i.length&&await Promise.all(i)}_updateClientGraphicIds(t,r){if(this._idToClientGraphic){if(t)for(const i of r.updateResults){if(!i.success)continue;const n=t.get(i.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const i of r.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const r=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:r?new N("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(t){const r=new Map,i=new Array(t.length);let n=null;for(let o=0;o<t.length;o++){const a=t[o],u=this._serializeFeature(a);n||a.geometry==null||(n=a.geometry.type),i[o]=u,r.set(`${u.uid}`,a)}const s=this;return{features:i,inferredGeometryType:n,finish(o){const a=s.sourceJSON.objectIdField;for(const u in o){const c=o[u],h=r.get(u);h&&(h.attributes||(h.attributes={}),c===-1?delete h.attributes[a]:h.attributes[a]=c,s._addIdToClientGraphic(h))}}}}_addIdToClientGraphic(t){var n;if(!this._idToClientGraphic)return;const r=this.sourceJSON.objectIdField,i=(n=t.attributes)==null?void 0:n[r];i!=null&&this._idToClientGraphic.set(i,t)}get _layerOrSourceGeometryType(){var t,r;return((t=this.layer)==null?void 0:t.geometryType)??((r=this.sourceJSON)==null?void 0:r.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:r}=t,i=this._geometryForSerialization(t),n=(vbe++).toString();return i?{uid:n,geometry:i.toJSON(),attributes:r}:{uid:n,attributes:r}}_geometryForSerialization(t){const{geometry:r}=t;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?Xo.fromExtent(r.extent):null:r}async _startWorker(t){this._connection=await koe("MemorySourceWorker",{strategy:R("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:r,spatialReference:i,objectIdField:n,hasM:s,hasZ:o,timeInfo:a,dateFieldsTimeZone:u}=this.layer,c=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",g=>{z.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),g.preventDefault()}));const f={features:h.features,fields:r==null?void 0:r.map(g=>g.toJSON()),geometryType:AA.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:c?null:i&&i.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:u},m=await this._connection.invoke("load",f,{signal:t});for(const g of m.warnings)z.getLogger(this.layer).warn("#load()",`${g.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:g});m.featureErrors.length&&z.getLogger(this.layer).warn("#load()",`Encountered ${m.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:m.featureErrors});const y=m.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(y.geometryType=AA.toJSON(h.inferredGeometryType)),this.sourceJSON=y,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),h.finish(m.assignedObjectIds)}};l([NI({Type:ts,ensureType:Pt(ts)})],Co.prototype,"itemType",void 0),l([d()],Co.prototype,"type",void 0),l([d({constructOnly:!0})],Co.prototype,"layer",void 0),l([d({readOnly:!0})],Co.prototype,"_workerGeometryType",null),l([d()],Co.prototype,"sourceJSON",void 0),Co=l([x("esri.layers.graphics.sources.MemorySource")],Co);function wbe(e){return"portalItem"in e}const bbe=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):wbe(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return l([d({type:String})],t.prototype,"apiKey",null),t=l([x("esri.layers.mixins.APIKeyMixin")],t),t},_be=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=xh(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",zde(r,z.getLogger(this)))}};return l([d()],t.prototype,"title",null),l([d({type:String})],t.prototype,"url",null),t=l([x("esri.layers.mixins.ArcGISService")],t),t},Sbe=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return l([d({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=l([x("esri.layers.mixins.CustomParametersMixin")],t),t},$be=Cye(),Oq=new Map,Pq=new Map;async function xke(e,t,r){if(!e||!r)return!1;if(!t)return!0;const i=new URL(e).host;let n=Oq.get(i);if(!n){const s=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await dt(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===t}async function Tke(e,t,r=!1){var s,o,a;if(!e||!t)return!0;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=Pq.get(i))==null?void 0:s.entries();if(n){for(const[u,c]of n)if(c.name===t){const h=!((o=c.stack)!=null&&o.hasForwardEdits());if(!h&&r){const[{deleteForwardEdits:f},{default:m}]=await Promise.all([J(()=>import("./deleteForwardEdits-i-PSv7cq.js"),[]),J(()=>import("./DeleteForwardEditsParameters-DwuuYlSo.js"),[])]),y=await f(i,u,new m({sessionId:$be,moment:c.moment}));return y.success&&((a=c.stack)==null||a.clearForwardEdits()),y.success}return h}}return!0}function xbe(e,t){var n;if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=(n=Pq.get(r))==null?void 0:n.entries();if(i){for(const[s,o]of i)if(o.name===t)return o.lockType==="edit"}return!1}const RO=new ra.EventEmitter;function Tbe(e){return RO.on("apply-edits",new WeakRef(e))}function Mbe(e){return RO.on("update-moment",new WeakRef(e))}function Mke(e,t,r=null,i=!1){const n=ji();return i=t==null||i,RO.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:i,result:n.promise}),n}const Cq=Symbol();function Eke(e){return e!=null&&typeof e=="object"&&Cq in e}function lf(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function A2(e,t,r){const i=new URL(e).host,n=Oq.get(i),s=o=>!o||o===n;return s(t)&&s(r)||t===r}const Ebe=e=>{var t;let r=class extends e{constructor(...i){super(...i),this[t]=!0,this._applyEditsHandler=n=>{const{serviceUrl:s,layerId:o,gdbVersion:a,mayReceiveServiceEdits:u,result:c}=n,h=s===this.url,f=o!=null&&this.layerId!=null&&o===this.layerId,m=lf(this),y=lf(this)&&A2(s,a,this.gdbVersion);if(!h||m&&!y||!f&&!u)return;const g=c.then(v=>{var _;if(this.lastEditsEventDate=new Date,f&&(v.addedFeatures.length||v.updatedFeatures.length||v.deletedFeatures.length||v.addedAttachments.length||v.updatedAttachments.length||v.deletedAttachments.length))return this.emit("edits",k(v)),v;const w=(_=v.editedFeatures)==null?void 0:_.find(({layerId:$})=>$===this.layerId);if(w){const{adds:$,updates:T,deletes:E}=w.editedFeatures,I={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:$?$.map(({attributes:C})=>({objectId:this.objectIdField&&C[this.objectIdField],globalId:this.globalIdField&&C[this.globalIdField]})):[],deletedFeatures:E?E.map(({attributes:C})=>({objectId:this.objectIdField&&C[this.objectIdField],globalId:this.globalIdField&&C[this.globalIdField]})):[],updatedFeatures:T?T.map(({current:{attributes:C}})=>({objectId:this.objectIdField&&C[this.objectIdField],globalId:this.globalIdField&&C[this.globalIdField]})):[],editedFeatures:k(v.editedFeatures),exceededTransferLimit:!1,historicMoment:k(v.historicMoment)};return this.emit("edits",I),I}const b={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:k(v.editedFeatures),exceededTransferLimit:!1,historicMoment:k(v.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,b.historicMoment)&&this.emit("edits",b),b}).then(v=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,v.historicMoment)&&(this.historicMoment=v.historicMoment),v));this.emit("apply-edits",{result:g})},this._updateMomentHandler=n=>{const{serviceUrl:s,gdbVersion:o,moment:a}=n,u=s===this.url,c=lf(this),h=lf(this)&&A2(s,o,this.gdbVersion),f=lf(this)&&!A2(s,this.gdbVersion,null);u&&c&&h&&f&&"historicMoment"in this&&this.historicMoment!==a&&(this.historicMoment=a)},this.when().then(()=>{this.addHandles(Tbe(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(Mbe(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(i,n,s){return"historicMoment"in this&&this.historicMoment!==s&&xbe(i,n)}};return t=Cq,l([d()],r.prototype,"lastEditsEventDate",void 0),r=l([x("esri.layers.mixins.EditBusLayer")],r),r};var BE;const R2=new Ee({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),L2=new Ee({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Is=BE=class extends j{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new ea({geometry:k(r),objectIds:k(s),spatialRelationship:i,timeExtent:k(n),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:n,units:s,distance:o}=this;return new BE({geometry:k(t),objectIds:k(n),spatialRelationship:r,timeExtent:k(i),where:e,units:s,distance:o})}};l([d({type:String,json:{write:!0}})],Is.prototype,"where",void 0),l([d({types:Jc,json:{write:!0}})],Is.prototype,"geometry",void 0),l([d({type:R2.apiValues,json:{name:"spatialRel",read:{reader:R2.read},write:{allowNull:!1,writer:R2.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Is.prototype,"spatialRelationship",void 0),l([d({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Is.prototype,"distance",void 0),l([d({type:[Number],json:{write:!0}})],Is.prototype,"objectIds",void 0),l([d({type:L2.apiValues,json:{read:L2.read,write:{writer:L2.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Is.prototype,"units",void 0),l([d({type:Hs,json:{write:!0}})],Is.prototype,"timeExtent",void 0),Is=BE=l([x("esri.layers.support.FeatureFilter")],Is);const Ibe=Is;var HE;const MN={read:{reader:Iy},write:{writer:ky,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},EN={read:{reader:Iy},write:{writer:ky,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},IN={name:"showExcludedLabels",default:!0};let Zu=HE=class extends j{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var i,n;const r=super.write(e,t);if(t!=null&&t.origin){if(r.filter){const s=Object.keys(r.filter);if(s.length>1||s[0]!=="where")return(i=t.messages)==null||i.push(new N("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return(n=t.messages)==null||n.push(new N("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new HE({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};l([d({type:Ibe,json:{write:{allowNull:!0,writer(e,t,r,i){const n=e==null?void 0:e.write({},i);n&&Object.keys(n).length!==0?Cr(r,n,t):Cr(r,null,t)}}}})],Zu.prototype,"filter",void 0),l([d({json:{read:Iy,write:{writer:ky,allowNull:!0},origins:{"web-map":MN,"portal-item":MN}}})],Zu.prototype,"includedEffect",void 0),l([d({json:{read:Iy,write:{writer:ky,allowNull:!0},origins:{"web-map":EN,"portal-item":EN}}})],Zu.prototype,"excludedEffect",void 0),l([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":IN,"portal-item":IN}}})],Zu.prototype,"excludedLabelsVisible",void 0),Zu=HE=l([x("esri.layers.support.FeatureEffect")],Zu);const kbe=Zu,kN={write:{allowNull:!0}},Obe={type:kbe,json:{origins:{"web-map":kN,"portal-item":kN}}},Pbe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return l([d(Obe)],t.prototype,"featureEffect",void 0),t=l([x("esri.layers.mixins.FeatureEffectLayer")],t),t},Cbe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:or}}},LO={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},NO={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:or}}},Abe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Lc}}},Rbe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:or}}},Lbe={value:null,type:$G,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:or}}};function Ike(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Aq={write:{enabled:!0,layerContainerTypes:or},read:!0},WE={type:Number,json:{origins:{"web-document":Aq,"portal-item":{write:!0}}}},Nbe={...WE,json:{...WE.json,origins:{"web-document":{...Aq,write:{enabled:!0,layerContainerTypes:or,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>{var i;return r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(i=t.layerDefinition)!=null&&i.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?fy(t.layerDefinition.drawingInfo.transparency):void 0:fy(t.drawingInfo.transparency)}}}},kke={type:Be,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=Be.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=ve.fromJSON(t.spatialReference)),r}}}},read:!1}},Fbe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Dbe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:or}}},name:"layerDefinition.minScale",write:!0}},jbe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:or}}},name:"layerDefinition.maxScale",write:!0}},Rq={json:{write:{ignoreOrigin:!0,layerContainerTypes:or},origins:{"web-map":{read:!1,write:!1}}}};let To=class extends He(j){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};l([d()],To.prototype,"creatorField",void 0),l([d()],To.prototype,"creationDateField",void 0),l([d()],To.prototype,"editorField",void 0),l([d()],To.prototype,"editDateField",void 0),l([d()],To.prototype,"realm",void 0),l([d(kw("dateFieldsTimeReference",!0))],To.prototype,"timeZone",void 0),To=l([x("esri.layers.support.EditFieldsInfo")],To);const zbe=To;let Cs=class extends He(j){constructor(t){super(t)}};l([d({constructOnly:!0,json:{write:!0}})],Cs.prototype,"name",void 0),l([d({constructOnly:!0,json:{write:!0}})],Cs.prototype,"fields",void 0),l([d({constructOnly:!0,json:{write:!0}})],Cs.prototype,"isAscending",void 0),l([d({constructOnly:!0,json:{write:!0}})],Cs.prototype,"indexType",void 0),l([d({constructOnly:!0,json:{write:!0}})],Cs.prototype,"isUnique",void 0),l([d({constructOnly:!0,json:{write:!0}})],Cs.prototype,"description",void 0),Cs=l([x("esri.layers.support.FeatureIndex")],Cs);async function Vbe(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=Lq(e));const i=Ube(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let s=null;for(;;){const o=await e.source.queryFeaturesJSON(t,r);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;t.start+=i}return s}function Ube(e){return Lq(e)*Gbe(e)}function Gbe(e){return e.capabilities.query.maxRecordCount||2e3}function Lq(e){return e.capabilities.query.supportsMaxRecordCountFactor?ea.MAX_MAX_RECORD_COUNT_FACTOR:1}var ZE;let tr=ZE=class extends j{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new ZE(k({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};l([d({type:[String],json:{write:!0}})],tr.prototype,"attachmentTypes",void 0),l([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],tr.prototype,"attachmentsWhere",void 0),l([d({type:Boolean,json:{write:!0}})],tr.prototype,"cacheHint",void 0),l([d({type:[String],json:{write:!0}})],tr.prototype,"keywords",void 0),l([d({type:[Number],json:{write:!0}})],tr.prototype,"globalIds",void 0),l([d({json:{write:!0}})],tr.prototype,"name",void 0),l([d({type:Number,json:{read:{source:"resultRecordCount"}}})],tr.prototype,"num",void 0),l([d({type:[Number],json:{write:!0}})],tr.prototype,"objectIds",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],tr.prototype,"returnMetadata",void 0),l([d({type:[Number],json:{write:!0}})],tr.prototype,"size",void 0),l([d({type:Number,json:{read:{source:"resultOffset"}}})],tr.prototype,"start",void 0),l([Z("start"),Z("num")],tr.prototype,"writeStart",null),l([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],tr.prototype,"where",void 0),tr=ZE=l([x("esri.rest.support.AttachmentQuery")],tr),tr.from=Pt(tr);const qbe=tr;var JE;let ut=JE=class extends j{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new JE(k({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};l([d({type:Boolean,json:{write:!0}})],ut.prototype,"cacheHint",void 0),l([d({type:Bn,json:{write:!0}})],ut.prototype,"dynamicDataSource",void 0),l([d({type:String,json:{write:!0}})],ut.prototype,"gdbVersion",void 0),l([d({type:Number,json:{write:!0}})],ut.prototype,"geometryPrecision",void 0),l([d({type:Date})],ut.prototype,"historicMoment",void 0),l([Z("historicMoment")],ut.prototype,"_writeHistoricMoment",null),l([d({type:Number,json:{write:!0}})],ut.prototype,"maxAllowableOffset",void 0),l([d({json:{write:!0}})],ut.prototype,"objectIds",void 0),l([d({type:[String],json:{write:!0}})],ut.prototype,"orderByFields",void 0),l([d({type:[String],json:{write:!0}})],ut.prototype,"outFields",void 0),l([d({type:ve,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ut.prototype,"outSpatialReference",void 0),l([d({json:{write:!0}})],ut.prototype,"relationshipId",void 0),l([d({type:Number,json:{read:{source:"resultOffset"}}})],ut.prototype,"start",void 0),l([Z("start"),Z("num")],ut.prototype,"writeStart",null),l([d({type:Number,json:{read:{source:"resultRecordCount"}}})],ut.prototype,"num",void 0),l([d({json:{write:!0}})],ut.prototype,"returnGeometry",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ut.prototype,"returnM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ut.prototype,"returnZ",void 0),l([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ut.prototype,"where",void 0),ut=JE=l([x("esri.rest.support.RelationshipQuery")],ut),ut.from=Pt(ut);const FO=ut,Cke=Object.freeze(Object.defineProperty({__proto__:null,default:FO},Symbol.toStringTag,{value:"Module"})),KE=new Ee({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function Bbe(e,t,r,i){const n=await Ql(e);if(await DO(e,t,i),!n.addAttachment)throw new N(i,"Layer source does not support addAttachment capability");return n.addAttachment(t,r)}function DO(e,t,r){var s,o;const{attributes:i}=t,{objectIdField:n}=e;return(o=(s=e.capabilities)==null?void 0:s.data)!=null&&o.supportsAttachment?t?i?n&&i[n]?Promise.resolve():Promise.reject(new N(r,`feature is missing the identifying attribute ${n}`)):Promise.reject(new N(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new N(r,"A feature is required to add/delete/update attachments")):Promise.reject(new N(r,"this layer doesn't support attachments"))}async function Hbe(e,t,r,i,n){const s=await Ql(e);if(await DO(e,t,n),!s.updateAttachment)throw new N(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(t,r,i)}async function Wbe(e,t,r){const{applyEdits:i}=await J(()=>import("./editingSupport-Oegzi8XQ.js"),__vite__mapDeps([219,220])),n=await e.load();let s=r;return n.type==="feature"&&n.infoFor3D&&t.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await d_e(n,t.deleteFeatures,n.globalIdField)}),i(n,n.source,t,r)}async function Zbe(e,t,r){const{uploadAssets:i}=await J(()=>import("./editingSupport-Oegzi8XQ.js"),__vite__mapDeps([219,220])),n=await e.load();return i(n,n.source,t,r)}async function Jbe(e,t,r,i){const n=await Ql(e);if(await DO(e,t,i),!n.deleteAttachments)throw new N(i,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,r)}async function Kbe(e,t,r){const i=(await e.load({signal:t==null?void 0:t.signal})).source;if(!i.fetchRecomputedExtents)throw new N(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function Ybe(e,t,r,i){var y,g;t=qbe.from(t),await e.load();const n=e.source,s=e.capabilities;if(!((y=s==null?void 0:s.data)!=null&&y.supportsAttachment))throw new N(i,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:u,num:c,size:h,start:f,where:m}=t;if(!((g=s==null?void 0:s.operations)!=null&&g.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(u==null?void 0:u.length)>0||(h==null?void 0:h.length)>0||c||f||m))throw new N(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a!=null&&a.length||u!=null&&u.length||m))throw new N(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new N(i,"Layer source does not support queryAttachments capability",t);return n.queryAttachments(t)}async function Qbe(e,t,r,i){const n=await Ql(e);if(!n.queryObjectIds)throw new N(i,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(ea.from(t)??e.createQuery(),r)}async function Xbe(e,t,r,i){const n=await Ql(e);if(!n.queryFeatureCount)throw new N(i,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(ea.from(t)??e.createQuery(),r)}async function e_e(e,t,r,i){const n=await Ql(e);if(!n.queryExtent)throw new N(i,"Layer source does not support queryExtent capability");return n.queryExtent(ea.from(t)??e.createQuery(),r)}async function t_e(e,t,r,i){const n=await Ql(e);if(!n.queryRelatedFeatures)throw new N(i,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(FO.from(t),r)}async function r_e(e,t,r,i){const n=await Ql(e);if(!n.queryRelatedFeaturesCount)throw new N(i,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(FO.from(t),r)}async function i_e(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:r,updates:i}=await t.refresh();if(i!=null&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await oV(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function n_e(e){var o,a;const t=new ea,r=(o=e.capabilities)==null?void 0:o.data,i=(a=e.capabilities)==null?void 0:a.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,i&&(t.compactGeometryEnabled=i.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),r&&(r.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),r.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:n,timeExtent:s}=e;return t.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function Nq(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeGlobalID")return i.name}}function Fq(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeOID")return i.name}}function s_e(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function o_e(e,t){const{subtypes:r,subtypeField:i}=e;if(!t||!(r!=null&&r.length)||!i)return null;const n=t.attributes[i];return n==null?null:r.find(s=>s.code===n)}async function Ql(e){return(await e.load()).source}async function a_e(e,t){if(!_e||_e.findCredential(e))return;let r;try{const i=await J6(e,t);i&&(r=await _e.checkSignInStatus(`${i}/sharing`))}catch{}if(r)try{const i=t!=null?t.signal:null;await _e.getCredential(e,{signal:i})}catch{}}async function l_e(e,t,r){var n;const i=(n=e.parsedUrl)==null?void 0:n.path;i&&e.authenticationTriggerEvent===t&&await a_e(i,r)}function u_e(e){return!m1(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const N2=ph({types:i7});function jO(e,t){var r;if(e.defaultSymbol)return(r=e.types)!=null&&r.length?new CO({defaultSymbol:N2(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(i=>({id:i.id,symbol:N2(i.symbol,i,t)}))}):new Oh({symbol:N2(e.defaultSymbol,e,t)})}function c_e(e){var i,n,s;let t=(i=e.sourceJSON)==null?void 0:i.cacheMaxAge;if(!t)return!1;const r=(s=(n=e.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:s.getTime();return r==null||(t*=1e3,Date.now()-r<t)}async function d_e(e,t,r){if(t==null)return null;const i=[],{objectIdField:n}=e;if(t.forEach(c=>{let h=null;if("attributes"in c){const{attributes:f}=c;h={globalId:f[r],objectId:f[n]!=null&&f[n]!==-1?f[n]:null}}else h={globalId:c.globalId,objectId:c.objectId!=null&&c.objectId!==-1?c.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||i.push(h.globalId))}),i.length===0)return null;const s=e.createQuery();s.where=i.map(c=>`${r}='${c}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[n,r],s.cacheHint=!1;const o=await cX(Vbe(e,s));if(!o.ok)return null;const a=new Map,u=o.value.features;for(const c of u){const h=c.attributes[r],f=c.attributes[n];h!=null&&f!=null&&f!==-1&&a.set(h,f)}return a}function p_e(e,t,r){if(!t||!r||!e)return null;const i=r.getAttribute(t);return i==null?null:e.find(n=>{const{id:s}=n;return s!=null&&s.toString()===i.toString()})??null}function m1(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||h_e(e)}function h_e(e){var t,r;return!!((r=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&r.toLowerCase().split(",").map(i=>i.trim()).includes("map"))}let Gd=class extends He(j){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};l([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Gd.prototype,"shapeAreaField",void 0),l([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Gd.prototype,"shapeLengthField",void 0),l([d({type:String,json:{read:e=>VX.read(e)||UX.read(e)}})],Gd.prototype,"units",void 0),Gd=l([x("esri.layers.support.GeometryFieldsInfo")],Gd);const f_e=Gd;var YE;let qd=YE=class extends j{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new te}clone(){return new YE({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};l([d({type:String,json:{write:!0}})],qd.prototype,"floorField",void 0),l([d({json:{read:!1,write:!1}})],qd.prototype,"viewAllMode",void 0),l([d({json:{read:!1,write:!1}})],qd.prototype,"viewAllLevelIds",void 0),qd=YE=l([x("esri.layers.support.LayerFloorInfo")],qd);const m_e=qd,ON=new Ee({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),PN=new Ee({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let nn=class extends He(j){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};l([d({json:{read:ON.read,write:ON.write}})],nn.prototype,"cardinality",void 0),l([d({json:{read:!0,write:!0}})],nn.prototype,"composite",void 0),l([d({json:{read:!0,write:!0}})],nn.prototype,"id",void 0),l([d({json:{read:!0,write:!0}})],nn.prototype,"keyField",void 0),l([d({json:{read:!0,write:!0}})],nn.prototype,"keyFieldInRelationshipTable",void 0),l([d({json:{read:!0,write:!0}})],nn.prototype,"name",void 0),l([d({json:{read:!0,write:!0}})],nn.prototype,"relatedTableId",void 0),l([d({json:{read:!0,write:!0}})],nn.prototype,"relationshipTableId",void 0),l([d({json:{read:PN.read,write:PN.write}})],nn.prototype,"role",void 0),nn=l([x("esri.layers.support.Relationship")],nn);const y_e=nn;function se(e,t,r){return!!Dq(e,t,r)}function lm(e,t,r){return Dq(e,t,r)}function Dq(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const g_e={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function v_e(e){var r;const t=(r=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:r.map(i=>i.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function m0(e,t){var i;const r=(i=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:i.map(n=>n.toLowerCase());return!!(r!=null&&r.includes(t.toLowerCase()))}function jq(e,t){return{analytics:w_e(e),attachment:b_e(e),data:__e(e),metadata:S_e(e),operations:$_e(e.capabilities,e,t),query:x_e(e,t),queryRelated:T_e(e),queryTopFeatures:M_e(e),editing:E_e(e)}}function w_e(e){return{supportsCacheHint:m0(e.advancedQueryCapabilities,"queryAnalytics")}}function b_e(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:m0(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:se(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(i=>{const n=g_e[i.name];n&&(r[n]=!!i.isEnabled)}),r}function __e(e){return{isVersioned:se(e,"isDataVersioned",!1),supportsAttachment:se(e,"hasAttachments",!1),supportsM:se(e,"hasM",!1),supportsZ:se(e,"hasZ",!1)}}function S_e(e){return{supportsAdvancedFieldProperties:se(e,"supportsFieldDescriptionProperty",!1)}}function $_e(e,t,r){const i=e?e.toLowerCase().split(",").map(m=>m.trim()):[],n=r?xh(r):null,s=i.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),o=i.includes("editing")&&!t.datesInUnknownTimezone;let a=o&&i.includes("create"),u=o&&i.includes("delete"),c=o&&i.includes("update");const h=i.includes("changetracking"),f=t.advancedQueryCapabilities;return o&&!(a||u||c)&&(a=u=c=!0),{supportsCalculate:se(t,"supportsCalculate",!1),supportsTruncate:se(t,"supportsTruncate",!1),supportsValidateSql:se(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:u,supportsEditing:o,supportsChangeTracking:h,supportsQuery:s,supportsQueryAnalytics:se(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:se(f,"supportsQueryAttachments",!1),supportsQueryTopFeatures:se(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:se(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:se(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:se(t,"supportsAsyncConvert3D",!1)}}function x_e(e,t){const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,s=e.currentVersion,o=t==null?void 0:t.includes("MapServer"),a=!o||s>=R("mapserver-pbf-version-support"),u=$7(t),c=new Set((e.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:lm(e,"maxRecordCount",void 0),maxRecordCountFactor:lm(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:lm(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:v_e(r),supportsCacheHint:se(r,"supportsQueryWithCacheHint",!1)||m0(r,"query"),supportsCentroid:se(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:u,supportsDefaultSpatialReference:se(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:se(r,"supportsDisjointSpatialRel",!1),supportsDistance:se(r,"supportsQueryWithDistance",!1),supportsDistinct:se(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:se(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&c.has("pbf"),supportsFullTextSearch:se(r,"supportsFullTextSearch",!1),supportsGeometryProperties:se(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:se(r,"supportsHavingClause",!1),supportsHistoricMoment:se(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:se(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:se(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:se(r,"supportsPagination",!1),supportsPercentileStatistics:se(r,"supportsPercentileStatistics",!1),supportsQuantization:se(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:se(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:se(i,"allowAnonymousToQuery",!0),supportsQueryByOthers:se(i,"allowOthersToQuery",!0),supportsQueryGeometry:se(e,"supportsReturningQueryGeometry",!1),supportsResultType:se(r,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:se(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:se(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:se(e,"useStandardizedQueries",!1),supportsStatistics:se(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:se(r,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:lm(e,"tileMaxRecordCount",void 0)}}function T_e(e){const t=e.advancedQueryCapabilities,r=se(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:se(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:m0(t,"queryRelated")}}function M_e(e){return{supportsCacheHint:m0(e.advancedQueryCapabilities,"queryTopFilter")}}function E_e(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:se(e,"allowGeometryUpdates",!0),supportsGlobalId:se(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:se(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:se(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:se(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:se(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:se(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:se(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:se(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:se(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:se(r,"supportsAsyncApplyEdits",!1),zDefault:lm(e,"zDefault",void 0)}}function Lke(e){var t;return{operations:{supportsAppend:se(e,"supportsAppend",!1),supportsExportClip:se(e,"supportsExportClip",!1),supportsExportFrameset:se(e,"supportsExportFrameset",!1),supportsMensuration:se(e,"supportsMensuration",!1),supportsUpdate:se(e,"supportsUpdate",!1)},query:{supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1}}}let Mo=class extends He(j){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const r={};for(const i of Object.keys(t))r[i]=y_(t[i]);return r}writeDomains(t,r){var n;if(!t)return;const i={};for(const s of Object.keys(t))t[s]&&(i[s]=(n=t[s])==null?void 0:n.toJSON());r.domains=i}};l([d({type:Number,json:{write:!0}})],Mo.prototype,"code",void 0),l([d({type:Object,json:{write:!0}})],Mo.prototype,"defaultValues",void 0),l([d({json:{write:!0}})],Mo.prototype,"domains",void 0),l([G("domains")],Mo.prototype,"readDomains",null),l([Z("domains")],Mo.prototype,"writeDomains",null),l([d({type:String,json:{write:!0}})],Mo.prototype,"name",void 0),Mo=l([x("esri.layers.support.Subtype")],Mo);const I_e=Mo,k_e=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(te.ofType(Cs)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=ve.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:n,operations:s,editing:o}=r;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||s.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(this.userHasUpdateItemPrivileges){if(c_e(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const i=this.editFieldsInfo;return(i!=null&&i.creatorField||i!=null&&i.editorField)&&(r!=null&&r.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(r,i){return jq(i,this.url)}readEditingInfo(r,i){const{editingInfo:n}=i;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const i=k(r),{operations:n,editing:s}=i;return m1(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),i):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,i):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=s.supportsGeometryUpdate=!0),i)}readGlobalIdFieldFromService(r,i){return Nq(i)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||m1(this))return!1;const{operations:i,editing:n}=r;return i.supportsEditing&&!(i.supportsAdd&&i.supportsDelete&&i.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:i,editing:n}=r;return m1(this)?!i.supportsQuery:!(i.supportsAdd&&i.supportsDelete&&i.supportsEditing&&i.supportsQuery&&i.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(r,i){return i.type==="Table"}readMaxScale(r,i){return i.effectiveMaxScale||r||0}readMinScale(r,i){return i.effectiveMinScale||r||0}readObjectIdFieldFromService(r,i){return Fq(i)}readServiceDefinitionExpression(r,i){return i.definitionQuery||i.definitionExpression}set url(r){if(r==null)return void this._set("url",r);const i=Vde({layer:this,url:r,nonStandardUrlAllowed:!0,logger:z.getLogger(this)});this._set("url",i.url),i.layerId!=null&&this._set("layerId",i.layerId)}writeUrl(r,i,n,s){Ude(this,r,null,i,s)}readVersion(r,i){return s_e(i)}};return l([d({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),l([d({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),l([d({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),l([G("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),l([d(kw("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),l([d({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),l([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),l([d({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),l([d({readOnly:!0,type:zbe})],t.prototype,"editFieldsInfo",void 0),l([d({readOnly:!0})],t.prototype,"editingInfo",void 0),l([G("editingInfo")],t.prototype,"readEditingInfo",null),l([d({readOnly:!0})],t.prototype,"effectiveCapabilities",null),l([d((()=>{const r=k(Lbe),i=r.json.origins;return i["web-map"]={read:!1,write:!1},i["portal-item"]={read:!1,write:!1},r})())],t.prototype,"elevationInfo",void 0),l([d({type:m_e,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:or}}}}})],t.prototype,"floorInfo",void 0),l([d({type:Be,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),l([d()],t.prototype,"gdbVersion",void 0),l([d({readOnly:!0,type:f_e,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),l([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:KE.read}}}})],t.prototype,"geometryType",void 0),l([d({type:String})],t.prototype,"globalIdField",void 0),l([G("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),l([d({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),l([d({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),l([d({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),l([d({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),l([d({readOnly:!0,type:u_})],t.prototype,"heightModelInfo",void 0),l([d({type:Date})],t.prototype,"historicMoment",void 0),l([d({type:te.ofType(Cs),readOnly:!0})],t.prototype,"indexes",void 0),l([d({readOnly:!0})],t.prototype,"isTable",void 0),l([G("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),l([d({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),l([d(jbe)],t.prototype,"maxScale",void 0),l([G("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),l([d(Dbe)],t.prototype,"minScale",void 0),l([G("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),l([d({type:String})],t.prototype,"objectIdField",void 0),l([G("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),l([d(kw("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),l([d({type:[y_e],readOnly:!0})],t.prototype,"relationships",void 0),l([d({type:Boolean})],t.prototype,"returnM",void 0),l([d({type:Boolean})],t.prototype,"returnZ",void 0),l([d({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),l([d({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),l([G("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),l([d({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),l([d()],t.prototype,"sourceJSON",void 0),l([d({type:ve,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),l([d({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),l([d({type:[I_e],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),l([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),l([d(Abe)],t.prototype,"url",null),l([Z("url")],t.prototype,"writeUrl",null),l([d({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),l([G("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=l([x("esri.layers.mixins.FeatureLayerBase")],t),t};let Bd=class extends He(j){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};l([d({type:String,json:{write:!0}})],Bd.prototype,"expression",void 0),l([d({type:String,json:{write:!0}})],Bd.prototype,"title",void 0),l([d({type:String,json:{write:!0}})],Bd.prototype,"returnType",void 0),Bd=l([x("esri.layers.support.ExpressionInfo")],Bd);const zO=Bd;var QE;let Eo=QE=class extends j{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new QE({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:k(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};l([d({type:Boolean,json:{write:!0}})],Eo.prototype,"isAutoGenerated",void 0),l([d({type:String,json:{write:!0}})],Eo.prototype,"name",void 0),l([d({type:String,json:{write:!0}})],Eo.prototype,"alias",void 0),l([d({type:String,json:{write:!0}})],Eo.prototype,"onStatisticField",void 0),l([d({type:zO,json:{write:!0}})],Eo.prototype,"onStatisticExpression",void 0),l([d({type:String,json:{write:!0}})],Eo.prototype,"statisticType",void 0),Eo=QE=l([x("esri.layers.support.AggregateField")],Eo);const Uc=Eo;let Tl=class extends j{constructor(){super(...arguments),this.type=null}};l([d({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Tl.prototype,"type",void 0),Tl=l([x("esri.layers.support.FeatureReduction")],Tl);const VO="__begin__",UO="__end__",O_e=new RegExp(VO,"ig"),P_e=new RegExp(UO,"ig"),CN=new RegExp("^"+VO,"i"),AN=new RegExp(UO+"$","i"),tb='"',C_e=tb+" + ",A_e=" + "+tb;function R_e(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function L_e(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function GO(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=R_e(e.labelExpression),t.type="conventional"),t}function N_e(e){const t=GO(e);if(!t)return null;switch(t.type){case"conventional":return XE(t.expression);case"arcade":return t.expression}return null}function F_e(e){const t=GO(e);if(!t)return null;switch(t.type){case"conventional":return j_e(t.expression);case"arcade":return zq(t.expression)}return null}function XE(e){let t;return e?(t=yI(e,r=>VO+'$feature["'+r+'"]'+UO),t=CN.test(t)?t.replace(CN,""):tb+t,t=AN.test(t)?t.replace(AN,""):t+tb,t=t.replaceAll(O_e,C_e).replaceAll(P_e,A_e)):t='""',t}const D_e=/^\s*\{([^}]+)\}\s*$/i;function j_e(e){const t=e==null?void 0:e.match(D_e);return(t==null?void 0:t[1].trim())||null}const z_e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,V_e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,U_e=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function zq(e){if(!e)return null;let t=z_e.exec(e)||V_e.exec(e);return t?t[1]||t[3]:(t=U_e.exec(e),t?t[2]:null)}var e3;let qa=e3=class extends j{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?XE(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=XE(this.value)),e!=null&&(t[r]=e)}clone(){return new e3({expression:this.expression,title:this.title,value:this.value})}};l([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],qa.prototype,"expression",void 0),l([G("expression",["expression","value"])],qa.prototype,"readExpression",null),l([Z("expression")],qa.prototype,"writeExpression",null),l([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],qa.prototype,"title",void 0),l([d({json:{read:!1,write:!1}})],qa.prototype,"value",void 0),qa=e3=l([x("esri.layers.support.LabelExpressionInfo")],qa);const Vq=qa;var t3;const Rg=new Ee({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function Lg(e,t,r){return{enabled:!Z6(r==null?void 0:r.layer)}}function Uq(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function G_e(e){return(e==null?void 0:e.type)==="map-image"}function Gq(e){var t,r;return!!G_e(e)&&!!((r=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&r.supportsArcadeExpressionForLabeling)}function q_e(e){return Uq(e)||Gq(e==null?void 0:e.layer)}let xt=t3=class extends j{static evaluateWhere(e,t){const r=(i,n,s)=>{switch(n){case"=":return i==s;case"<>":return i!=s;case">":return i>s;case">=":return i>=s;case"<":return i<s;case"<=":return i<=s}return!1};try{if(e==null)return!0;const i=e.split(" ");if(i.length===3)return r(t[i[0]],i[1],i[2]);if(i.length===7){const n=r(t[i[0]],i[1],i[2]),s=i[3],o=r(t[i[4]],i[5],i[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Cve,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=L_e(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const i=zq(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(e==null&&this.labelExpression!=null&&Uq(i))e=new Vq({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(i);n.expression&&(t[r]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return GO(this)}getLabelExpressionArcade(){return N_e(this)}getLabelExpressionSingleField(){return F_e(this)}hash(){return JSON.stringify(this)}clone(){return new t3({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:k(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:k(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};l([d({type:String,json:{write:!0}})],xt.prototype,"name",void 0),l([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:Lg}}}}})],xt.prototype,"allowOverrun",void 0),l([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:Lg}}}}})],xt.prototype,"deconflictionStrategy",void 0),l([d({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&(r==null?void 0:r.origin)==="service"&&Gq(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],xt.prototype,"labelExpression",void 0),l([G("labelExpression")],xt.prototype,"readLabelExpression",null),l([Z("labelExpression")],xt.prototype,"writeLabelExpression",null),l([d({type:Vq,json:{write:{overridePolicy:(e,t,r)=>q_e(r)?{allowNull:!0}:{enabled:!1}}}})],xt.prototype,"labelExpressionInfo",void 0),l([Z("labelExpressionInfo")],xt.prototype,"writeLabelExpressionInfo",null),l([d({type:Rg.apiValues,json:{type:Rg.jsonValues,read:Rg.read,write:Rg.write}})],xt.prototype,"labelPlacement",void 0),l([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],xt.prototype,"labelPosition",void 0),l([d({type:Number})],xt.prototype,"maxScale",void 0),l([Z("maxScale")],xt.prototype,"writeMaxScale",null),l([d({type:Number})],xt.prototype,"minScale",void 0),l([Z("minScale")],xt.prototype,"writeMinScale",null),l([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Lg}}}}})],xt.prototype,"repeatLabel",void 0),l([d({type:Number,cast:Ie,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Lg}}}}})],xt.prototype,"repeatLabelDistance",void 0),l([d({types:Hce,json:{origins:{"web-scene":{types:Wce,write:W4,default:null}},write:W4,default:null}})],xt.prototype,"symbol",void 0),l([d({type:Boolean,json:{write:!0}})],xt.prototype,"useCodedValues",void 0),l([d({type:String,json:{write:!0}})],xt.prototype,"where",void 0),xt=t3=l([x("esri.layers.support.LabelClass")],xt);const C_=xt;var r3;let Tr=r3=class extends Tl{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Ie("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const i=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Cr(r,i,t)}readRenderer(e,t,r){var n;const i=(n=t.drawingInfo)==null?void 0:n.renderer;return i?Ay(i,t,r)??void 0:jO(t,r)}clone(){return new r3({fields:k(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:k(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:k(this.popupTemplate),renderer:k(this.renderer),binType:k(this.binType),size:this.size})}};l([ne({binning:"binning"})],Tr.prototype,"type",void 0),l([ne({geohash:"geohash",square:"square"}),d({type:["geohash","square"]})],Tr.prototype,"binType",void 0),l([d({type:Number,json:{write:!0}})],Tr.prototype,"fixedBinLevel",void 0),l([d({type:[C_],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Tr.prototype,"labelingInfo",void 0),l([d(NO)],Tr.prototype,"labelsVisible",void 0),l([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Tr.prototype,"maxScale",void 0),l([d(LO)],Tr.prototype,"popupEnabled",void 0),l([d({type:r0,json:{name:"popupInfo",write:!0}})],Tr.prototype,"popupTemplate",void 0),l([d({type:Number,cast:e=>e==="auto"?e:Ie(e)})],Tr.prototype,"size",void 0),l([d({type:[Uc],json:{write:!0}})],Tr.prototype,"fields",void 0),l([Z("fields")],Tr.prototype,"writeFields",null),l([d({types:P_,json:{write:{target:"drawingInfo.renderer"}}})],Tr.prototype,"renderer",void 0),l([G("renderer",["drawingInfo.renderer"])],Tr.prototype,"readRenderer",null),Tr=r3=l([x("esri.layers.support.FeatureReductionBinning")],Tr);const qq=Tr;var i3;function RN(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let Nt=i3=class extends j{constructor(e){super(e),this.type="cluster",this.clusterRadius=Ie("80px"),this.clusterMinSize=Ie("12px"),this.clusterMaxSize=Ie("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){var n,s;const i=(n=t.drawingInfo)==null?void 0:n.renderer;return(s=i==null?void 0:i.authoringInfo)!=null&&s.isAutoGenerated?null:i?RN(i)?null:Ay(i,t,r)??void 0:jO(t,r)}readSymbol(e,t,r){var n,s;const i=(n=t.drawingInfo)==null?void 0:n.renderer;if((s=i==null?void 0:i.authoringInfo)!=null&&s.isAutoGenerated)return null;if(i&&RN(i)){const o=Ay(i,t,r);return o==null?void 0:o.symbol}return null}writeSymbol(e,t,r,i){var s,o;const n=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const a=new Oh({symbol:e});t.drawingInfo={renderer:a.write({},i)}}}writeFields(e,t,r){const i=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Cr(r,i,t)}readFields(e,t,r){return e.filter(i=>!i.isAutoGenerated).map(i=>Uc.fromJSON(i))}clone(){return new i3({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:k(this.labelingInfo),labelsVisible:this.labelsVisible,fields:k(this.fields),maxScale:this.maxScale,renderer:k(this.renderer),symbol:k(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:k(this.popupTemplate)})}};l([d({type:["cluster"],readOnly:!0,json:{write:!0}})],Nt.prototype,"type",void 0),l([d({type:Number,cast:e=>e==="auto"?e:Ie(e),json:{write:!0}})],Nt.prototype,"clusterRadius",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],Nt.prototype,"clusterMinSize",void 0),l([d({type:Number,cast:Ie,json:{write:!0}})],Nt.prototype,"clusterMaxSize",void 0),l([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Nt.prototype,"maxScale",void 0),l([d(LO)],Nt.prototype,"popupEnabled",void 0),l([d({type:r0,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Nt.prototype,"popupTemplate",void 0),l([d({types:P_,json:{write:{target:"drawingInfo.renderer"}}})],Nt.prototype,"renderer",void 0),l([G("renderer",["drawingInfo.renderer"])],Nt.prototype,"readRenderer",null),l([d({types:qce})],Nt.prototype,"symbol",void 0),l([G("symbol",["drawingInfo.renderer"])],Nt.prototype,"readSymbol",null),l([Z("symbol")],Nt.prototype,"writeSymbol",null),l([d({type:[C_],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Nt.prototype,"labelingInfo",void 0),l([d(NO)],Nt.prototype,"labelsVisible",void 0),l([d({type:[Uc],json:{write:!0}})],Nt.prototype,"fields",void 0),l([Z("fields")],Nt.prototype,"writeFields",null),l([G("fields")],Nt.prototype,"readFields",null),Nt=i3=l([x("esri.layers.support.FeatureReductionCluster")],Nt);const Bq=Nt;var n3;let y1=n3=class extends Tl{constructor(e){super(e),this.type="selection"}clone(){return new n3}};l([d({type:["selection"]})],y1.prototype,"type",void 0),y1=n3=l([x("esri.layers.support.FeatureReductionSelection")],y1);const LN=y1,NN={key:"type",base:Tl,typeMap:{cluster:Bq,binning:qq}},B_e={types:{key:"type",base:Tl,typeMap:{selection:LN,cluster:Bq,binning:qq}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:NN},"portal-item":{types:NN},"web-scene":{types:{key:"type",base:Tl,typeMap:{selection:LN}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:or}}}}},hd={Base64:0,Hex:1,String:2,Raw:3},zp=8,Hq=(1<<zp)-1;function hl(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function H_e(e){const t=[];for(let r=0,i=e.length*zp;r<i;r+=zp)t[r>>5]|=(e.charCodeAt(r/zp)&Hq)<<r%32;return t}function W_e(e){const t=[];for(let r=0,i=32*e.length;r<i;r+=zp)t.push(String.fromCharCode(e[r>>5]>>>r%32&Hq));return t.join("")}function Z_e(e){const t="0123456789abcdef",r=[];for(let i=0,n=4*e.length;i<n;i++)r.push(t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15));return r.join("")}function J_e(e){const t="=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let n=0,s=4*e.length;n<s;n+=3){const o=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*e.length?i.push(t):i.push(r.charAt(o>>6*(3-a)&63))}return i.join("")}function K_e(e,t){return e<<t|e>>>32-t}function A_(e,t,r,i,n,s){return hl(K_e(hl(hl(t,e),hl(i,s)),n),r)}function wr(e,t,r,i,n,s,o){return A_(t&r|~t&i,e,t,n,s,o)}function br(e,t,r,i,n,s,o){return A_(t&i|r&~i,e,t,n,s,o)}function _r(e,t,r,i,n,s,o){return A_(t^r^i,e,t,n,s,o)}function Sr(e,t,r,i,n,s,o){return A_(r^(t|~i),e,t,n,s,o)}function Y_e(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let r=1732584193,i=-271733879,n=-1732584194,s=271733878;for(let o=0;o<e.length;o+=16){const a=r,u=i,c=n,h=s;r=wr(r,i,n,s,e[o],7,-680876936),s=wr(s,r,i,n,e[o+1],12,-389564586),n=wr(n,s,r,i,e[o+2],17,606105819),i=wr(i,n,s,r,e[o+3],22,-1044525330),r=wr(r,i,n,s,e[o+4],7,-176418897),s=wr(s,r,i,n,e[o+5],12,1200080426),n=wr(n,s,r,i,e[o+6],17,-1473231341),i=wr(i,n,s,r,e[o+7],22,-45705983),r=wr(r,i,n,s,e[o+8],7,1770035416),s=wr(s,r,i,n,e[o+9],12,-1958414417),n=wr(n,s,r,i,e[o+10],17,-42063),i=wr(i,n,s,r,e[o+11],22,-1990404162),r=wr(r,i,n,s,e[o+12],7,1804603682),s=wr(s,r,i,n,e[o+13],12,-40341101),n=wr(n,s,r,i,e[o+14],17,-1502002290),i=wr(i,n,s,r,e[o+15],22,1236535329),r=br(r,i,n,s,e[o+1],5,-165796510),s=br(s,r,i,n,e[o+6],9,-1069501632),n=br(n,s,r,i,e[o+11],14,643717713),i=br(i,n,s,r,e[o],20,-373897302),r=br(r,i,n,s,e[o+5],5,-701558691),s=br(s,r,i,n,e[o+10],9,38016083),n=br(n,s,r,i,e[o+15],14,-660478335),i=br(i,n,s,r,e[o+4],20,-405537848),r=br(r,i,n,s,e[o+9],5,568446438),s=br(s,r,i,n,e[o+14],9,-1019803690),n=br(n,s,r,i,e[o+3],14,-187363961),i=br(i,n,s,r,e[o+8],20,1163531501),r=br(r,i,n,s,e[o+13],5,-1444681467),s=br(s,r,i,n,e[o+2],9,-51403784),n=br(n,s,r,i,e[o+7],14,1735328473),i=br(i,n,s,r,e[o+12],20,-1926607734),r=_r(r,i,n,s,e[o+5],4,-378558),s=_r(s,r,i,n,e[o+8],11,-2022574463),n=_r(n,s,r,i,e[o+11],16,1839030562),i=_r(i,n,s,r,e[o+14],23,-35309556),r=_r(r,i,n,s,e[o+1],4,-1530992060),s=_r(s,r,i,n,e[o+4],11,1272893353),n=_r(n,s,r,i,e[o+7],16,-155497632),i=_r(i,n,s,r,e[o+10],23,-1094730640),r=_r(r,i,n,s,e[o+13],4,681279174),s=_r(s,r,i,n,e[o],11,-358537222),n=_r(n,s,r,i,e[o+3],16,-722521979),i=_r(i,n,s,r,e[o+6],23,76029189),r=_r(r,i,n,s,e[o+9],4,-640364487),s=_r(s,r,i,n,e[o+12],11,-421815835),n=_r(n,s,r,i,e[o+15],16,530742520),i=_r(i,n,s,r,e[o+2],23,-995338651),r=Sr(r,i,n,s,e[o],6,-198630844),s=Sr(s,r,i,n,e[o+7],10,1126891415),n=Sr(n,s,r,i,e[o+14],15,-1416354905),i=Sr(i,n,s,r,e[o+5],21,-57434055),r=Sr(r,i,n,s,e[o+12],6,1700485571),s=Sr(s,r,i,n,e[o+3],10,-1894986606),n=Sr(n,s,r,i,e[o+10],15,-1051523),i=Sr(i,n,s,r,e[o+1],21,-2054922799),r=Sr(r,i,n,s,e[o+8],6,1873313359),s=Sr(s,r,i,n,e[o+15],10,-30611744),n=Sr(n,s,r,i,e[o+6],15,-1560198380),i=Sr(i,n,s,r,e[o+13],21,1309151649),r=Sr(r,i,n,s,e[o+4],6,-145523070),s=Sr(s,r,i,n,e[o+11],10,-1120210379),n=Sr(n,s,r,i,e[o+2],15,718787259),i=Sr(i,n,s,r,e[o+9],21,-343485551),r=hl(r,a),i=hl(i,u),n=hl(n,c),s=hl(s,h)}return[r,i,n,s]}function Wq(e,t=hd.Hex){const r=t||hd.Base64,i=Y_e(H_e(e),e.length*zp);switch(r){case hd.Raw:return i;case hd.Hex:return Z_e(i);case hd.String:return W_e(i);case hd.Base64:return J_e(i)}}const Q_e=()=>z.getLogger("esri.views.2d.layers.support.clusterUtils");R.add("esri-cluster-arcade-enabled",!0);const X_e=R("esri-cluster-arcade-enabled"),eSe=new Set(["simple-line","simple-fill","picture-fill"]);function FN(e,t){let r=t.clone();if(!tSe(r))return r;if(t.getSymbols().some(i=>eSe.has(i.type))&&(r=new Oh({symbol:new Ks})),r.authoringInfo||(r.authoringInfo=new SO),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const i=(r.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");i.forEach(n=>{n.type==="rotation"?n.field?n.field=lu(e,n.field,"avg_angle","number"):n.valueExpression&&(n.field=uf(e,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=lu(e,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=lu(e,n.field,"avg","number"):n.valueExpression&&(n.field=uf(e,n.valueExpression,"avg","number"),n.valueExpression=null)}),r.visualVariables=i}switch(r.type){case"simple":break;case"pie-chart":for(const i of r.attributes)i.field?i.field=lu(e,i.field,"sum","number"):i.valueExpression&&(i.field=uf(e,i.valueExpression,"sum","number"),i.valueExpression=null);break;case"unique-value":r.field?r.field=lu(e,r.field,"mode","string"):r.valueExpression&&(r.field=uf(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=lu(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=lu(e,r.field,"avg","number"):r.valueExpression&&(r.field=uf(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const tSe=e=>{const t=r=>Q_e().error(new N("Unsupported-renderer",r,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if(r!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!X_e){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(r=>!(!("valueExpression"in r)||!r.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function rSe(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const i=r,n="field",s=t.toLowerCase()+",norm:"+n+","+i.toLowerCase();return"cluster_avg_"+Wq(s)}}}function uf(e,t,r,i){const n=Wq(t),s=r==="mode"?`cluster_type_${n}`:r==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return e.some(o=>o.name===s)||e.push(new Uc({name:s,isAutoGenerated:!0,onStatisticExpression:new zO({expression:t,returnType:i}),statisticType:r})),s}function lu(e,t,r,i,n){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const s=rSe(r,t,n);return e.some(o=>o.name===s)||(r==="avg_norm"?e.push(new Uc({name:s,isAutoGenerated:!0,onStatisticExpression:new zO({expression:`$feature.${t} / $feature.${n}`,returnType:i}),statisticType:"avg"})):e.push(new Uc({name:s,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),s}const iSe=e=>{let t=class extends e{constructor(...r){super(...r),this.addHandles(he(()=>this.renderer,()=>{if(this.featureReduction){const i=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",i)}},Pl))}set featureReduction(r){const i=this._normalizeFeatureReduction(r);this._set("featureReduction",i)}set renderer(r){}_withClusterVariable(r,i,n){const s=r.clone();return"visualVariables"in s&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.some(o=>o.type==="size")||s.visualVariables.push(new xO({field:"cluster_count",stops:[new Xv({value:1}),new Xv({useMinValue:!0,size:i}),new Xv({useMaxValue:!0,size:n})]}))),s}_normalizeFeatureReduction(r){var f;if((r==null?void 0:r.type)!=="cluster")return r;const i=r.clone(),n=[new Uc({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(i.fields??[]).filter(m=>!m.isAutoGenerated),o=r.renderer&&!((f=r.renderer.authoringInfo)!=null&&f.isAutoGenerated),{clusterMinSize:a,clusterMaxSize:u}=i;if(o){i.fields=[...n,...s];const m=this._withClusterVariable(i.renderer,a,u);return i.effectiveFeatureRenderer=m,i.effectiveClusterRenderer=m,i}if(r.symbol){if(i.fields=[...n,...s],i.renderer=null,!this.renderer)return i.effectiveFeatureRenderer=null,i.effectiveClusterRenderer=null,i;const m=FN(n,this.renderer),y=this._withClusterVariable(m,a,u),g="visualVariables"in y&&y.visualVariables?y.visualVariables:[],v=new Oh({symbol:r.symbol,visualVariables:g});return i.fields=[...n,...s],i.effectiveFeatureRenderer=y,i.effectiveClusterRenderer=v,i}if(!this.renderer)return r;const c=FN(n,this.renderer);i.fields=[...n,...s],i.renderer=c;const h=this._withClusterVariable(c,a,u);return i.effectiveFeatureRenderer=h,i.effectiveClusterRenderer=h,i}};return l([d(B_e)],t.prototype,"featureReduction",null),t=l([x("esri.layers.mixins.FeatureReductionLayer")],t),t},DN={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},jN={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},zN={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},nSe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":DN,"web-map/basemap":jN,"web-map/tables":zN,"link-chart/operational-layers":{...DN,LinkChartLayer:!0},"link-chart/basemap":jN,"link-chart/tables":zN,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}},sSe=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,i,n){var s;return((s=n==null?void 0:n.portalItem)==null?void 0:s.type)==="Group Layer"?void 0:r}writeListMode(r,i,n,s){(s&&s.layerContainerType==="ground"||r&&eQ(this,n,{},s))&&(i[n]=r)}writeOperationalLayerType(r,i,n,s){r&&(s==null?void 0:s.layerContainerType)!=="tables"&&(i.layerType=r)}writeTitle(r,i){i.title=r??"Layer"}readTimeExtent(r){return r?Hs.fromArray(r):null}writeTimeExtent(r,i,n,s){r&&s.layerContainerType!=="tables"&&(r.isEmpty?s!=null&&s.messages&&s.messages.push(new N("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):i[n]=r.toArray())}read(r,i){i&&(i.layer=this),YY(this,r,n=>super.read(r,n),i)}write(r,i){var o,a;if(!this.persistenceEnabled&&!(i!=null&&i.ignorePersistenceEnabled))return null;if(i!=null&&i.origin){const u=`${i.origin}/${i.layerContainerType||"operational-layers"}`,c=nSe[u];let h=!!(c!=null&&c[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&u==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&u==="web-map/operational-layers"&&(h=!1),!h)return(o=i.messages)==null||o.push(new N("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${u}'`,{layer:this})),null}const n=super.write(r,{...i,layer:this}),s=!!i&&!!i.messages&&!!i.messages.filter(u=>u instanceof N&&u.name==="web-document-write:property-required").length;return Nb(n==null?void 0:n.url)?((a=i==null?void 0:i.messages)==null||a.push(new N("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return l([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),l([G("id",["id"])],t.prototype,"readId",null),l([d(Rq)],t.prototype,"listMode",void 0),l([Z("listMode")],t.prototype,"writeListMode",null),l([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:or}}}}})],t.prototype,"operationalLayerType",void 0),l([Z("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),l([d(WE)],t.prototype,"opacity",void 0),l([d({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),l([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),l([Z("title"),Z(["web-scene"],"title")],t.prototype,"writeTitle",null),l([d({type:Hs,json:{origins:{"web-scene":{write:{layerContainerTypes:or}}}}})],t.prototype,"visibilityTimeExtent",void 0),l([G("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),l([Z(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Ve,Rb]]}})],t.prototype,"writeTimeExtent",null),l([d({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:or}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=l([x("esri.layers.mixins.OperationalLayer")],t),t};var s3;const Ng=new Ee({asc:"ascending",desc:"descending"});let Hd=s3=class extends j{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new s3({field:this.field,valueExpression:this.valueExpression,order:this.order})}};l([d({type:String,json:{write:!0}})],Hd.prototype,"field",void 0),l([d({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Hd.prototype,"valueExpression",void 0),l([d({type:Ng.apiValues,json:{type:Ng.jsonValues,read:Ng.read,write:Ng.write}})],Hd.prototype,"order",void 0),Hd=s3=l([x("esri.layers.support.OrderByInfo")],Hd);const Zq=Hd;function oSe(e,t,r){if(!e)return null;const i=e.find(s=>!!s.field);if(!i)return null;const n=new Zq;return n.read(i,r),[n]}function aSe(e,t,r,i){const n=e.find(s=>!!s.field);n&&Cr(r,[n.toJSON()],t)}const lSe={type:[Zq],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:oSe},write:{writer:aSe}}},uSe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return l([d(lSe)],t.prototype,"orderBy",void 0),t=l([x("esri.layers.mixins.OrderedLayer")],t),t};async function cSe(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return lp(e);const r=ve.WGS84;return await Tk(t,r),Hl(e,r)}function dSe(e,t){if(!Jq(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function Jq(e,t){var r;return!!((r=e.typeKeywords)!=null&&r.includes(t))}function jke(e){return Jq(e,hSe.HOSTED_SERVICE)}function pSe(e,t){const r=e.typeKeywords;if(r){const i=r.indexOf(t);i>-1&&r.splice(i,1)}}function zke(e,t,r){r?dSe(e,t):pSe(e,t)}async function Vke(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return cSe(r)}const hSe={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function VN(e){var u;const{portal:t,isOrgItem:r,itemControl:i}=e,n=(u=t.user)==null?void 0:u.privileges;let s=!n||n.includes("features:user:edit"),o=!!r&&!!(n!=null&&n.includes("features:user:fullEdit"));const a=i==="update"||i==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}const fSe=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=nt(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,n){if(i.itemId)return new xm({id:i.itemId,portal:n==null?void 0:n.portal})}writePortalItem(r,i){r!=null&&r.id&&(i.itemId=r.id)}async loadFromPortal(r,i){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:s}=await J(()=>import("./layersLoader-CjIXQsBn.js"),__vite__mapDeps([221,10,8,9,7,222]));return ht(i),await s({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap},i)}catch(s){throw bi(s)||z.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(i=>(As(i),!0)))}async setUserPrivileges(r,i){if(!Pe.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(i);if(this.url)try{const{features:{edit:n,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(r,i);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(n){As(n)}}async _fetchUserPrivileges(r,i){let n=this.portalItem;if(!r||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(i);const s=r===n.id;if(s&&n.portal.user)return VN(n);let o,a;if(s)o=n.portal.url;else try{o=await J6(this.url,i)}catch(f){As(f)}if(!o||!wQ(o,n.portal.url))return this._fetchFallbackUserPrivileges(i);try{const f=i!=null?i.signal:null;a=await(_e==null?void 0:_e.getCredential(`${o}/sharing`,{prompt:!1,signal:f}))}catch(f){As(f)}const u=!0,c=!1,h=!1;if(!a)return{features:{edit:u,fullEdit:c},content:{updateItem:h}};try{if(s?await n.reload():(n=new xm({id:r,portal:{url:o}}),await n.load(i)),n.portal.user)return VN(n)}catch(f){As(f)}return{features:{edit:u,fullEdit:c},content:{updateItem:h}}}async _fetchFallbackUserPrivileges(r){let i=!0;try{i=await this._fetchUserHasEditingPrivileges(r)}catch(n){As(n)}return{features:{edit:i,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const i=this.url?_e==null?void 0:_e.findCredential(this.url):null;if(!i)return!0;const n=Fg.credential===i?Fg.user:await this._fetchEditingUser(r);return Fg.credential=i,Fg.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var h,f;const i=(f=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:f.user;if(i)return i;const n=_e==null?void 0:_e.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=wi.getDefault();if(o&&o.loaded&&Qn(o.restUrl)===Qn(s))return o.user;const a=`${s}/community/self`,u=r!=null?r.signal:null,c=await Db(dt(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return c.ok?ZI.fromJSON(c.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){var o;const n=i==null?void 0:i.portal,s=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||wi.getDefault());return n&&s&&!i6(s.restUrl,n.restUrl)?(i.messages&&i.messages.push(new N("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return l([d({type:xm})],t.prototype,"portalItem",null),l([G("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),l([Z("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),l([d({clonable:!1})],t.prototype,"resourceReferences",void 0),l([d({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),l([d({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),l([d({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=l([x("esri.layers.mixins.PortalLayer")],t),t},Fg={credential:null,user:null};let um=class extends le{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};l([d()],um.prototype,"updating",void 0),l([d()],um.prototype,"status",void 0),um=l([x("esri.layers.support.PublishingInfo")],um);const mSe=um,ySe=Symbol(),gSe=e=>{var t;let r=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const i=this._get("publishingInfo");if(i)return i;const n=new mSe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(i){let o=0;const a=async c=>{let h;i.updating=!0;try{h=await this.fetchPublishingStatus()}catch{h="unavailable"}h!=="published"&&h!=="unavailable"||(i.status==="publishing"&&this.refresh(),u.remove()),i.status=h,i.updating=!1,u.removed||(o=setTimeout(a,c,c+125))},u={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>u.remove()),a(250),this.addHandles(u)}};return t=ySe,l([d({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=l([x("esri.layers.mixins.PublishableLayer")],r),r},fl=new te,Um=new WeakMap;function vSe(e){bSe(e)&&fl.push(new WeakRef(e))}function wSe(e){const t=fl.find(r=>r.deref()===e);t&&fl.remove(t)}function bSe(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function Kq(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Kq(t,e%t):0}let F2=0,Dg=0;function _Se(){const e=Date.now();let t=!1;for(const r of fl){const i=r.deref();i?i.refreshInterval&&e-(Um.get(i)??0)+5>=6e4*i.refreshInterval&&(Um.set(i,e),i.refresh(e)):t=!0}if(t)for(let r=fl.length-1;r>=0;r--)fl.at(r).deref()||fl.removeAt(r)}Ej(()=>{const e=Date.now();let t=0;for(const r of fl){const i=r.deref();i&&(t=Kq(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?Um.get(i)||Um.set(i,e):Um.delete(i))}if(t!==Dg){if(Dg=t,clearInterval(F2),Dg===0)return void(F2=0);F2=setInterval(_Se,Dg)}});const UN=.1,SSe=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=bI(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||vSe(this)},()=>{})}destroy(){wSe(this)}castRefreshInterval(r){return r>=UN?r:r<=0?0:UN}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){W$(this._debounceHasDataChanged()).then(i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})},i=>{z.getLogger(this).error(i),this.emit("refresh",{dataChanged:!1,error:i})})}async hasDataChanged(){return!0}get test(){}};return l([d({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:or}}}}})],t.prototype,"refreshInterval",void 0),l([je("refreshInterval")],t.prototype,"castRefreshInterval",null),l([d({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),l([d({readOnly:!0})],t.prototype,"refreshParameters",null),t=l([x("esri.layers.mixins.RefreshableLayer")],t),t},Yq=Lr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let cm=class extends He(j){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return l9(this.value,this.unit,"milliseconds")}};l([ne(Yq,{nonNullable:!0})],cm.prototype,"unit",void 0),l([d({type:Number,json:{write:!0},nonNullable:!0})],cm.prototype,"value",void 0),cm=l([x("esri.TimeInterval")],cm);const rb=cm;function GN(e,t){return rb.fromJSON({value:e,unit:t})}let ur=class extends He(j){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&t.timeExtent.length===2?Hs.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){(e==null?void 0:e.start)!=null&&e.end!=null?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?GN(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?GN(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=(e==null?void 0:e.toJSON().value)??null,t.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};l([d({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ur.prototype,"cumulative",void 0),l([d({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ur.prototype,"endField",void 0),l([d({type:Hs,json:{write:{enabled:!0,allowNull:!0}}})],ur.prototype,"fullTimeExtent",void 0),l([G("fullTimeExtent",["timeExtent"])],ur.prototype,"readFullTimeExtent",null),l([Z("fullTimeExtent")],ur.prototype,"writeFullTimeExtent",null),l([d({type:Boolean,json:{write:!0}})],ur.prototype,"hasLiveData",void 0),l([d({type:rb,json:{write:{enabled:!0,allowNull:!0}}})],ur.prototype,"interval",void 0),l([G("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ur.prototype,"readInterval",null),l([Z("interval")],ur.prototype,"writeInterval",null),l([d({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ur.prototype,"startField",void 0),l([d(kw("timeReference",!0))],ur.prototype,"timeZone",void 0),l([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ur.prototype,"trackIdField",void 0),l([d({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ur.prototype,"useTime",void 0),l([d({type:[Date],json:{read:!1}})],ur.prototype,"stops",void 0),ur=l([x("esri.layers.support.TimeInfo")],ur);const Qq=ur,$Se={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:or}}},xSe=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const n=i.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=Yq.fromJSON(n.timeOffsetUnits);return s&&o?new rb({value:s,unit:o}):null}set timeInfo(r){pV(r,this.fieldsIndex),this._set("timeInfo",r)}};return l([d({type:Hs,json:{write:!1}})],t.prototype,"timeExtent",void 0),l([d({type:rb})],t.prototype,"timeOffset",void 0),l([G("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),l([d({value:null,type:Qq,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),l([d($Se)],t.prototype,"useViewTime",void 0),t=l([x("esri.layers.mixins.TemporalLayer")],t),t},qN=new Ee({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Ba=class extends He(j){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};l([d({json:{write:!0}})],Ba.prototype,"name",void 0),l([d({json:{write:!0}})],Ba.prototype,"description",void 0),l([d({json:{read:qN.read,write:qN.write}})],Ba.prototype,"drawingTool",void 0),l([d({json:{write:!0}})],Ba.prototype,"prototype",void 0),l([d({json:{write:!0}})],Ba.prototype,"thumbnail",void 0),Ba=l([x("esri.layers.support.FeatureTemplate")],Ba);const qO=Ba;let Io=class extends He(j){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const r={};for(const i of Object.keys(t))r[i]=y_(t[i]);return r}writeDomains(t,r){var n;const i={};for(const s of Object.keys(t))t[s]&&(i[s]=(n=t[s])==null?void 0:n.toJSON());r.domains=i}};l([d({json:{write:!0}})],Io.prototype,"id",void 0),l([d({json:{write:!0}})],Io.prototype,"name",void 0),l([d({json:{write:!0}})],Io.prototype,"domains",void 0),l([G("domains")],Io.prototype,"readDomains",null),l([Z("domains")],Io.prototype,"writeDomains",null),l([d({type:[qO],json:{write:!0}})],Io.prototype,"templates",void 0),Io=l([x("esri.layers.support.FeatureType")],Io);const Xq=Io;function TSe(){return{fields:{type:[Wk],value:null,set:function(e){if(e&&R("big-integer-warning-enabled")){const t=e.filter(r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8);if(t.length){const r=t.map(i=>`'${i.name}'`).join(", ");z.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return VG.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const r of e)((t=this.fieldsIndex)==null?void 0:t.has(r))||z.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${r} found in outFields`,{layer:this,outFields:e});return c_(this.fieldsIndex,e)}}}}const D2=()=>z.getLogger("esri.layers.support.labelingInfo"),MSe=/\[([^[\]]+)\]/gi;function j2(e,t,r){return e?e.map(i=>{var s;const n=new C_;if(n.read(i,r),n.labelExpression){const o=t.fields||((s=t.layerDefinition)==null?void 0:s.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(MSe,(a,u)=>`[${ESe(u,o)}]`)}return n}):null}function ESe(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const n=t[i].name;if(n.toLowerCase()===r)return n}return e}const ISe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function Hke(e,t){const r=[];for(const i of e){const n=i.labelPlacement,s=ISe[t];if(!i.symbol)return D2().warn("No ILabelClass symbol specified."),[];if(!s)return D2().error(new N("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(s.includes(n))r.push(i);else{const o=s[0];n&&D2().warn(`Found invalid label placement type ${n} for ${t}. Defaulting to ${o}`);const a=i.clone();a.labelPlacement=o,r.push(a)}}return r}const Wd=[];function kSe(e,t){if($7(e.url??""))return!0;const{wkid:r}=t;for(const i of Wd){if((e.version??0)>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}Wd.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),Wd.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Wd.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Wd.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Wd.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function OSe(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const n=await Db(i.populateFromStyle());if(ht(r),n.ok===!1){const s=n.error;t!=null&&t.messages&&t.messages.push(new Sn("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}var o3;let Zd=o3=class extends j{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new o3({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};l([d({type:[String],json:{write:!0}})],Zd.prototype,"groupByFields",void 0),l([d({type:Number,json:{write:!0}})],Zd.prototype,"topCount",void 0),l([d({type:[String],json:{write:!0}})],Zd.prototype,"orderByFields",void 0),Zd=o3=l([x("esri.rest.support.TopFilter")],Zd);const PSe=Zd;var a3;const BN=new Ee({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),HN=new Ee({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ze=a3=class extends j{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new a3(k({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};l([d({type:Boolean,json:{write:!0}})],Ze.prototype,"cacheHint",void 0),l([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Ze.prototype,"distance",void 0),l([d({types:Jc,json:{read:Cl,write:!0}})],Ze.prototype,"geometry",void 0),l([d({type:Number,json:{write:!0}})],Ze.prototype,"geometryPrecision",void 0),l([d({type:Number,json:{write:!0}})],Ze.prototype,"maxAllowableOffset",void 0),l([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Ze.prototype,"num",void 0),l([d({json:{write:!0}})],Ze.prototype,"objectIds",void 0),l([d({type:[String],json:{write:!0}})],Ze.prototype,"orderByFields",void 0),l([d({type:[String],json:{write:!0}})],Ze.prototype,"outFields",void 0),l([d({type:ve,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ze.prototype,"outSpatialReference",void 0),l([d({type:String,json:{write:!0}})],Ze.prototype,"resultType",void 0),l([d({json:{write:!0}})],Ze.prototype,"returnGeometry",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ze.prototype,"returnM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ze.prototype,"returnZ",void 0),l([d({type:Number,json:{read:{source:"resultOffset"}}})],Ze.prototype,"start",void 0),l([Z("start"),Z("num")],Ze.prototype,"writeStart",null),l([d({type:String,json:{read:{source:"spatialRel",reader:BN.read},write:{target:"spatialRel",writer:BN.write}}})],Ze.prototype,"spatialRelationship",void 0),l([d({type:Hs,json:{write:!0}})],Ze.prototype,"timeExtent",void 0),l([d({type:PSe,json:{write:!0}})],Ze.prototype,"topFilter",void 0),l([d({type:String,json:{read:HN.read,write:{writer:HN.write,overridePolicy(e){return{enabled:e!=null&&this.distance!=null&&this.distance>0}}}}})],Ze.prototype,"units",void 0),l([d({type:String,json:{write:!0}})],Ze.prototype,"where",void 0),Ze=a3=l([x("esri.rest.support.TopFeaturesQuery")],Ze),Ze.from=Pt(Ze);const jg=Ze;function CSe({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:n},s){if(!r)return null;const o=NSe({editFieldsInfo:t,fields:r,objectIdField:i},s);if(!o.length)return null;const a=jSe({titleBase:n,fields:r,displayField:e}),u=DSe();return new r0({title:a,content:u,fieldInfos:o})}const ASe=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):bue(e,t);function RSe(e,t){const r=e;return t&&(e=e.filter(i=>!t.includes(i.type))),e===r&&(e=e.slice()),e.sort(LSe),e}function LSe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:WN(e)?-1:WN(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function NSe(e,t){const r=t==null?void 0:t.visibleFieldNames;return RSe(e.fields??[],(t==null?void 0:t.ignoreFieldTypes)||zSe).map(i=>new Ak({fieldName:i.name,isEditable:wue(i,e),label:i.alias,format:FSe(i),visible:ASe(i,{...e,visibleFieldNames:r})}))}function FSe(e){switch(e.type){case"small-integer":case"integer":case"single":return new $v({digitSeparator:!0,places:0});case"double":return new $v({digitSeparator:!0,places:2});case"string":return Bue(e.name)?new $v({digitSeparator:!0,places:0}):void 0;default:return}}function DSe(){return[new _y,new by]}function jSe(e){const t=uue(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}function WN(e){var r;return(e.name&&e.name.toLowerCase())==="name"?!0:((r=e.alias)==null?void 0:r.toLowerCase())==="name"}const zSe=["geometry","blob","raster","guid","xml"];var mp;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(mp||(mp={}));const Fr="FeatureLayer";function zg(e,t){return new N("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function ZN(e){return e&&e instanceof te}const z2=TSe();function V2(e,t,r){const i=!!(r!=null&&r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}let Q=class extends k_e(iSe(Pbe(gSe(Ebe(_G(uSe(xSe(SG(SSe(_be(sSe(fSe(Sq(Sbe(bbe(He(bk))))))))))))))))){constructor(...e){super(...e),this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=ve.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=bI(async(t,r,i)=>{const{save:n,saveAs:s}=await J(()=>import("./featureLayerUtils-Ckl58DSC.js"),__vite__mapDeps([223,224,225,226,222,227,228,10]));switch(t){case mp.SAVE:return n(this,r);case mp.SAVE_AS:return s(this,i,r)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var i;const t=e!=null?e.signal:null;if((i=this.portalItem)!=null&&i.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(n=>this.initLayerProperties(n))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(As).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const n=await this._fetchFirstValidLayerId(t);n!=null&&(this.layerId=n)}if(!this.url&&!this._hasMemorySource())throw new N("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>l_e(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,jq(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}get effectiveEditingEnabled(){return u_e(this)}readIsTable(e,t){return(t=(t==null?void 0:t.layerDefinition)??t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,i){i!=null&&i.writeLayerSchema&&Cr(r,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return Nq(t.layerDefinition||t)}readObjectIdField(e,t){return Fq(t.layerDefinition||t)}get parsedUrl(){const e=Ar(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Kp(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Kp(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){rL(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){var n;t=t.layerDefinition||t;const i=(n=t.drawingInfo)==null?void 0:n.renderer;if(i){const s=Ay(i,t,r)??void 0;return s||z.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),s}return jO(t,r)}set source(e){const t=this._get("source");t!==e&&(ZN(t)&&this._resetMemorySource(t),ZN(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof te?new Co({layer:this,items:e}):e:null}readSource(e,t){const r=kq.fromJSON(t.featureSet);return new Co({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,t){const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,n=r==null?void 0:r.editorField;return e=e==null?void 0:e.map(s=>qO.fromJSON(s)),this._fixTemplates(e,i),this._fixTemplates(e,n),e}readTitle(e,t){var n,s,o;const r=((n=t.layerDefinition)==null?void 0:n.name)??t.name,i=t.title||((s=t.layerDefinition)==null?void 0:s.title);if(r){const a=(o=this.portalItem)==null?void 0:o.title;if(this.sublayerTitleMode==="item-title")return this.url?jde(this.url,r):r;let u=r;if(!u&&this.url){const c=xh(this.url);c!=null&&(u=c.title)}return u?(this.sublayerTitleMode==="item-title-and-service-name"&&a&&a!==u&&(u=a+" - "+u),Jk(u)):void 0}if(this.sublayerTitleMode==="item-title"&&i)return i}readTitleFromWebMap(e,t){var r;return t.title||((r=t.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find(n=>n.name.toLowerCase()===r);i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,n=r==null?void 0:r.editorField;return e==null?void 0:e.map(s=>(s=Xq.fromJSON(s),this._fixTemplates(s.templates,i),this._fixTemplates(s.templates,n),s))}readVisible(e,t){var r;return((r=t.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){return Bbe(this,e,t,Fr)}async updateAttachment(e,t,r){return Hbe(this,e,t,r,Fr)}async applyEdits(e,t){return Wbe(this,e,t)}async uploadAssets(e,t){return Zbe(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return CSe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await bj(J(()=>import("./FeatureLayerSource-Cofr7zhr.js"),__vite__mapDeps([229,48,54,230,220,51,93,50,94,219,35,33,231,232,62,60,61,23,26,125,233,25])),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=n_e(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=Hle(this.definitionExpression,t);return e.where=r||"1=1",e}async deleteAttachments(e,t){return Jbe(this,e,t,Fr)}async fetchRecomputedExtents(e){return Kbe(this,e,Fr)}getFeatureType(e){return p_e(this.types,this.typeIdField,e)}getFieldDomain(e,t){var s;const r=t==null?void 0:t.feature,i=o_e(this,r);if(i){const o=(s=i.domains)==null?void 0:s[e];return(o==null?void 0:o.type)==="inherited"?this._getLayerDomain(e):o}const n=this.getFeatureType(r);if(n){const o=n.domains&&n.domains[e];if(o&&o.type!=="inherited")return o}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return Ybe(this,e,t,Fr)}async queryFeatures(e,t){const r=await this.load(),i=await r.source.queryFeatures(ea.from(e)??r.createQuery(),t);if(i!=null&&i.features)for(const n of i.features)n.layer=n.sourceLayer=r;return i}async queryObjectIds(e,t){return Qbe(this,e,t,Fr)}async queryFeatureCount(e,t){return Xbe(this,e,t,Fr)}async queryExtent(e,t){return e_e(this,e,t,Fr)}async queryRelatedFeatures(e,t){return t_e(this,e,t,Fr)}async queryRelatedFeaturesCount(e,t){return r_e(this,e,t,Fr)}async queryTopFeatures(e,t){var s;const{source:r,capabilities:i}=await this.load();if(!r.queryTopFeatures||!((s=i==null?void 0:i.query)!=null&&s.supportsTopFeaturesQuery))throw new N(Fr,"Layer source does not support queryTopFeatures capability");const n=await r.queryTopFeatures(jg.from(e),t);if(n!=null&&n.features)for(const o of n.features)o.layer=o.sourceLayer=this;return n}async queryTopObjectIds(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopObjectIds||!(i!=null&&i.query.supportsTopFeaturesQuery))throw new N(Fr,"Layer source does not support queryTopObjectIds capability");return r.queryTopObjectIds(jg.from(e),t)}async queryTopFeaturesExtent(e,t){var n;const{source:r,capabilities:i}=await this.load();if(!r.queryTopExtents||!((n=i==null?void 0:i.query)!=null&&n.supportsTopFeaturesQuery))throw new N(Fr,"Layer source does not support queryTopExtents capability");return r.queryTopExtents(jg.from(e),t)}async queryTopFeatureCount(e,t){var n;const{source:r,capabilities:i}=await this.load();if(!r.queryTopCount||!((n=i==null?void 0:i.query)!=null&&n.supportsTopFeaturesQuery))throw new N(Fr,"Layer source does not support queryFeatureCount capability");return r.queryTopCount(jg.from(e),t)}read(e,t){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const i=r.layers;i&&i.length===1&&(super.read(i[0],t),r.showLegend!=null&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:(t==null?void 0:t.origin)??void 0,writeLayerSchema:(t==null?void 0:t.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:i,messages:n}=t;if(this.dynamicDataSource)return n==null||n.push(zg(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&i!=="tables")return n==null||n.push(zg(this,`a table source can only be written to tables, not ${i}`)),null;if(this._hasMemorySource())return n==null||n.push(zg(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&i==="tables")return n==null||n.push(zg(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new N(Fr,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||kSe(this,e))}async save(e){return this._debouncedSaveOperations(mp.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(mp.SAVE_AS,t,e)}_readEditingEnabled(e,t,r){var n;let i=(n=e.layerDefinition)==null?void 0:n.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,r,i){var n,s;if(!e){const o=(s=(n=this.capabilities)==null?void 0:n.operations)!=null&&s.supportsSync?"Query,Sync":"Query";Cr("layerDefinition.capabilities",o,t),r&&!(i!=null&&i.writeLayerSchema)&&(t.capabilities=o)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstValidLayerId(e){return dt(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const r=t.data;if(r)return this.findFirstValidLayerId(r)})}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),rL(this.renderer,this.fieldsIndex),pV(this.timeInfo,this.fieldsIndex),OSe(this,{origin:"service"})}async hasDataChanged(){return i_e(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,r;const e=((t=this.parsedUrl)==null?void 0:t.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(i=>i.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(r=>{var n;const i=(n=r.prototype)==null?void 0:n.attributes;i&&t&&delete i[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new N("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new N("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this.addHandles([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};l([G("service","capabilities")],Q.prototype,"readCapabilities",null),l([d({json:{origins:{"web-scene":{write:!1}},write:!0}})],Q.prototype,"charts",void 0),l([d({readOnly:!0})],Q.prototype,"createQueryVersion",null),l([d({json:{read:{source:"layerDefinition.copyrightText"}}})],Q.prototype,"copyright",void 0),l([d({json:{read:{source:"layerDefinition.displayField"}}})],Q.prototype,"displayField",void 0),l([d({types:gc,readOnly:!0})],Q.prototype,"defaultSymbol",void 0),l([d({type:Bn})],Q.prototype,"dynamicDataSource",void 0),l([d({type:Boolean})],Q.prototype,"editingEnabled",null),l([G(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Q.prototype,"readEditingEnabled",null),l([G("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Q.prototype,"readEditingEnabledFromWebMap",null),l([Z(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Q.prototype,"writeEditingEnabled",null),l([Z("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Q.prototype,"writeEditingEnabledToWebMap",null),l([d({readOnly:!0})],Q.prototype,"effectiveEditingEnabled",null),l([d({...z2.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:V2}}}}})],Q.prototype,"fields",void 0),l([d(z2.fieldsIndex)],Q.prototype,"fieldsIndex",void 0),l([d({type:mbe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Q.prototype,"formTemplate",void 0),l([d({json:{read:{source:"layerDefinition.extent"}}})],Q.prototype,"fullExtent",void 0),l([d({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:V2,writer(e,t,r){const i=e?KE.toJSON(e):null;i&&Cr(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:KE.read}}})],Q.prototype,"geometryType",void 0),l([d({json:{read:{source:"layerDefinition.hasM"}}})],Q.prototype,"hasM",void 0),l([d({json:{read:{source:"layerDefinition.hasZ"}}})],Q.prototype,"hasZ",void 0),l([d(Fbe)],Q.prototype,"id",void 0),l([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Q.prototype,"infoFor3D",void 0),l([d({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Q.prototype,"isTable",void 0),l([G("service","isTable",["type","geometryType"]),G("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Q.prototype,"readIsTable",null),l([Z("web-map","isTable")],Q.prototype,"writeIsTable",null),l([d(NO)],Q.prototype,"labelsVisible",void 0),l([d({type:[C_],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:j2,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:j2,write:{enabled:!0,layerContainerTypes:or}}},name:"layerDefinition.drawingInfo.labelingInfo",read:j2,write:!0}})],Q.prototype,"labelingInfo",void 0),l([d((()=>{const e=k(Nbe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){Cr(i,Zb(t),r)}}},e})())],Q.prototype,"opacity",void 0),l([d(Rbe)],Q.prototype,"legendEnabled",void 0),l([d({type:["show","hide"],json:(()=>{const e=k(Rq.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Q.prototype,"listMode",void 0),l([G("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Q.prototype,"readGlobalIdField",null),l([d({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:V2}}}}})],Q.prototype,"objectIdField",void 0),l([G("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Q.prototype,"readObjectIdField",null),l([d({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Q.prototype,"operationalLayerType",void 0),l([d(z2.outFields)],Q.prototype,"outFields",void 0),l([d({readOnly:!0})],Q.prototype,"parsedUrl",null),l([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Q.prototype,"path",void 0),l([d(LO)],Q.prototype,"popupEnabled",void 0),l([d({type:r0,json:{name:"popupInfo",write:!0}})],Q.prototype,"popupTemplate",void 0),l([d({readOnly:!0})],Q.prototype,"defaultPopupTemplate",null),l([d({types:P_,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Gwe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:or,overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}})],Q.prototype,"renderer",null),l([G("service","renderer",["drawingInfo.renderer","defaultSymbol"]),G("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Q.prototype,"readRenderer",null),l([d()],Q.prototype,"resourceInfo",void 0),l([d((()=>{const e=k(Cbe);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Q.prototype,"screenSizePerspectiveEnabled",void 0),l([d({clonable:!1})],Q.prototype,"source",null),l([je("source")],Q.prototype,"castSource",null),l([G("portal-item","source",["featureSet"]),G("web-map","source",["featureSet"])],Q.prototype,"readSource",null),l([d({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Q.prototype,"spatialReference",void 0),l([d({type:Number})],Q.prototype,"subtypeCode",void 0),l([d({type:[qO]})],Q.prototype,"templates",void 0),l([G("templates",["editFieldsInfo","creatorField","editorField","templates"])],Q.prototype,"readTemplates",null),l([d({type:Qq})],Q.prototype,"timeInfo",void 0),l([d()],Q.prototype,"title",void 0),l([G("service","title",["name"]),G("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Q.prototype,"readTitle",null),l([G("web-map","title",["layerDefinition.name","title"])],Q.prototype,"readTitleFromWebMap",null),l([d({type:String})],Q.prototype,"sublayerTitleMode",void 0),l([d({json:{read:!1}})],Q.prototype,"type",void 0),l([d({type:String})],Q.prototype,"typeIdField",void 0),l([G("service","typeIdField"),G("typeIdField",["layerDefinition.typeIdField"])],Q.prototype,"readTypeIdField",null),l([d({type:[Xq]})],Q.prototype,"types",void 0),l([G("service","types",["types"]),G("types",["layerDefinition.types"])],Q.prototype,"readTypes",null),l([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Q.prototype,"visible",void 0),l([G("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Q.prototype,"readVisible",null),Q=l([x("esri.layers.FeatureLayer")],Q);const eB=Q,Wke=Object.freeze(Object.defineProperty({__proto__:null,default:eB},Symbol.toStringTag,{value:"Module"}));function tB(e,t){return function(){return e.apply(t,arguments)}}const{toString:VSe}=Object.prototype,{getPrototypeOf:BO}=Object,R_=(e=>t=>{const r=VSe.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),as=e=>(e=e.toLowerCase(),t=>R_(t)===e),L_=e=>t=>typeof t===e,{isArray:Ph}=Array,Ry=L_("undefined");function USe(e){return e!==null&&!Ry(e)&&e.constructor!==null&&!Ry(e.constructor)&&wn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const rB=as("ArrayBuffer");function GSe(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&rB(e.buffer),t}const qSe=L_("string"),wn=L_("function"),iB=L_("number"),N_=e=>e!==null&&typeof e=="object",BSe=e=>e===!0||e===!1,g1=e=>{if(R_(e)!=="object")return!1;const t=BO(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},HSe=as("Date"),WSe=as("File"),ZSe=as("Blob"),JSe=as("FileList"),KSe=e=>N_(e)&&wn(e.pipe),YSe=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||wn(e.append)&&((t=R_(e))==="formdata"||t==="object"&&wn(e.toString)&&e.toString()==="[object FormData]"))},QSe=as("URLSearchParams"),[XSe,e2e,t2e,r2e]=["ReadableStream","Request","Response","Headers"].map(as),i2e=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function y0(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let i,n;if(typeof e!="object"&&(e=[e]),Ph(e))for(i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else{const s=r?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(i=0;i<o;i++)a=s[i],t.call(null,e[a],a,e)}}function nB(e,t){t=t.toLowerCase();const r=Object.keys(e);let i=r.length,n;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const sB=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,oB=e=>!Ry(e)&&e!==sB;function l3(){const{caseless:e}=oB(this)&&this||{},t={},r=(i,n)=>{const s=e&&nB(t,n)||n;g1(t[s])&&g1(i)?t[s]=l3(t[s],i):g1(i)?t[s]=l3({},i):Ph(i)?t[s]=i.slice():t[s]=i};for(let i=0,n=arguments.length;i<n;i++)arguments[i]&&y0(arguments[i],r);return t}const n2e=(e,t,r,{allOwnKeys:i}={})=>(y0(t,(n,s)=>{r&&wn(n)?e[s]=tB(n,r):e[s]=n},{allOwnKeys:i}),e),s2e=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),o2e=(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},a2e=(e,t,r,i)=>{let n,s,o;const a={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),s=n.length;s-- >0;)o=n[s],(!i||i(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=r!==!1&&BO(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},l2e=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return i!==-1&&i===r},u2e=e=>{if(!e)return null;if(Ph(e))return e;let t=e.length;if(!iB(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},c2e=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&BO(Uint8Array)),d2e=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=i.next())&&!n.done;){const s=n.value;t.call(e,s[0],s[1])}},p2e=(e,t)=>{let r;const i=[];for(;(r=e.exec(t))!==null;)i.push(r);return i},h2e=as("HTMLFormElement"),f2e=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,n){return i.toUpperCase()+n}),JN=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),m2e=as("RegExp"),aB=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};y0(r,(n,s)=>{let o;(o=t(n,s,e))!==!1&&(i[s]=o||n)}),Object.defineProperties(e,i)},y2e=e=>{aB(e,(t,r)=>{if(wn(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=e[r];if(wn(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},g2e=(e,t)=>{const r={},i=n=>{n.forEach(s=>{r[s]=!0})};return Ph(e)?i(e):i(String(e).split(t)),r},v2e=()=>{},w2e=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,U2="abcdefghijklmnopqrstuvwxyz",KN="0123456789",lB={DIGIT:KN,ALPHA:U2,ALPHA_DIGIT:U2+U2.toUpperCase()+KN},b2e=(e=16,t=lB.ALPHA_DIGIT)=>{let r="";const{length:i}=t;for(;e--;)r+=t[Math.random()*i|0];return r};function _2e(e){return!!(e&&wn(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const S2e=e=>{const t=new Array(10),r=(i,n)=>{if(N_(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[n]=i;const s=Ph(i)?[]:{};return y0(i,(o,a)=>{const u=r(o,n+1);!Ry(u)&&(s[a]=u)}),t[n]=void 0,s}}return i};return r(e,0)},$2e=as("AsyncFunction"),x2e=e=>e&&(N_(e)||wn(e))&&wn(e.then)&&wn(e.catch),F={isArray:Ph,isArrayBuffer:rB,isBuffer:USe,isFormData:YSe,isArrayBufferView:GSe,isString:qSe,isNumber:iB,isBoolean:BSe,isObject:N_,isPlainObject:g1,isReadableStream:XSe,isRequest:e2e,isResponse:t2e,isHeaders:r2e,isUndefined:Ry,isDate:HSe,isFile:WSe,isBlob:ZSe,isRegExp:m2e,isFunction:wn,isStream:KSe,isURLSearchParams:QSe,isTypedArray:c2e,isFileList:JSe,forEach:y0,merge:l3,extend:n2e,trim:i2e,stripBOM:s2e,inherits:o2e,toFlatObject:a2e,kindOf:R_,kindOfTest:as,endsWith:l2e,toArray:u2e,forEachEntry:d2e,matchAll:p2e,isHTMLForm:h2e,hasOwnProperty:JN,hasOwnProp:JN,reduceDescriptors:aB,freezeMethods:y2e,toObjectSet:g2e,toCamelCase:f2e,noop:v2e,toFiniteNumber:w2e,findKey:nB,global:sB,isContextDefined:oB,ALPHABET:lB,generateString:b2e,isSpecCompliantForm:_2e,toJSONObject:S2e,isAsyncFn:$2e,isThenable:x2e};function Se(e,t,r,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n)}F.inherits(Se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const uB=Se.prototype,cB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{cB[e]={value:e}});Object.defineProperties(Se,cB);Object.defineProperty(uB,"isAxiosError",{value:!0});Se.from=(e,t,r,i,n,s)=>{const o=Object.create(uB);return F.toFlatObject(e,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),Se.call(o,e.message,t,r,i,n),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const T2e=null;function u3(e){return F.isPlainObject(e)||F.isArray(e)}function dB(e){return F.endsWith(e,"[]")?e.slice(0,-2):e}function YN(e,t,r){return e?e.concat(t).map(function(n,s){return n=dB(n),!r&&s?"["+n+"]":n}).join(r?".":""):t}function M2e(e){return F.isArray(e)&&!e.some(u3)}const E2e=F.toFlatObject(F,{},null,function(t){return/^is[A-Z]/.test(t)});function F_(e,t,r){if(!F.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=F.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,w){return!F.isUndefined(w[v])});const i=r.metaTokens,n=r.visitor||h,s=r.dots,o=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(t);if(!F.isFunction(n))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(F.isDate(g))return g.toISOString();if(!u&&F.isBlob(g))throw new Se("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(g)||F.isTypedArray(g)?u&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function h(g,v,w){let b=g;if(g&&!w&&typeof g=="object"){if(F.endsWith(v,"{}"))v=i?v:v.slice(0,-2),g=JSON.stringify(g);else if(F.isArray(g)&&M2e(g)||(F.isFileList(g)||F.endsWith(v,"[]"))&&(b=F.toArray(g)))return v=dB(v),b.forEach(function($,T){!(F.isUndefined($)||$===null)&&t.append(o===!0?YN([v],T,s):o===null?v:v+"[]",c($))}),!1}return u3(g)?!0:(t.append(YN(w,v,s),c(g)),!1)}const f=[],m=Object.assign(E2e,{defaultVisitor:h,convertValue:c,isVisitable:u3});function y(g,v){if(!F.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(g),F.forEach(g,function(b,_){(!(F.isUndefined(b)||b===null)&&n.call(t,b,F.isString(_)?_.trim():_,v,m))===!0&&y(b,v?v.concat(_):[_])}),f.pop()}}if(!F.isObject(e))throw new TypeError("data must be an object");return y(e),t}function QN(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function HO(e,t){this._pairs=[],e&&F_(e,this,t)}const pB=HO.prototype;pB.append=function(t,r){this._pairs.push([t,r])};pB.toString=function(t){const r=t?function(i){return t.call(this,i,QN)}:QN;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function I2e(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function hB(e,t,r){if(!t)return e;const i=r&&r.encode||I2e,n=r&&r.serialize;let s;if(n?s=n(t,r):s=F.isURLSearchParams(t)?t.toString():new HO(t,r).toString(i),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class XN{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){F.forEach(this.handlers,function(i){i!==null&&t(i)})}}const fB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},k2e=typeof URLSearchParams<"u"?URLSearchParams:HO,O2e=typeof FormData<"u"?FormData:null,P2e=typeof Blob<"u"?Blob:null,C2e={isBrowser:!0,classes:{URLSearchParams:k2e,FormData:O2e,Blob:P2e},protocols:["http","https","file","blob","url","data"]},WO=typeof window<"u"&&typeof document<"u",A2e=(e=>WO&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),R2e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",L2e=WO&&window.location.href||"http://localhost",N2e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:WO,hasStandardBrowserEnv:A2e,hasStandardBrowserWebWorkerEnv:R2e,origin:L2e},Symbol.toStringTag,{value:"Module"})),is={...N2e,...C2e};function F2e(e,t){return F_(e,new is.classes.URLSearchParams,Object.assign({visitor:function(r,i,n,s){return is.isNode&&F.isBuffer(r)?(this.append(i,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function D2e(e){return F.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function j2e(e){const t={},r=Object.keys(e);let i;const n=r.length;let s;for(i=0;i<n;i++)s=r[i],t[s]=e[s];return t}function mB(e){function t(r,i,n,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=s>=r.length;return o=!o&&F.isArray(n)?n.length:o,u?(F.hasOwnProp(n,o)?n[o]=[n[o],i]:n[o]=i,!a):((!n[o]||!F.isObject(n[o]))&&(n[o]=[]),t(r,i,n[o],s)&&F.isArray(n[o])&&(n[o]=j2e(n[o])),!a)}if(F.isFormData(e)&&F.isFunction(e.entries)){const r={};return F.forEachEntry(e,(i,n)=>{t(D2e(i),n,r,0)}),r}return null}function z2e(e,t,r){if(F.isString(e))try{return(t||JSON.parse)(e),F.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}const g0={transitional:fB,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const i=r.getContentType()||"",n=i.indexOf("application/json")>-1,s=F.isObject(t);if(s&&F.isHTMLForm(t)&&(t=new FormData(t)),F.isFormData(t))return n?JSON.stringify(mB(t)):t;if(F.isArrayBuffer(t)||F.isBuffer(t)||F.isStream(t)||F.isFile(t)||F.isBlob(t)||F.isReadableStream(t))return t;if(F.isArrayBufferView(t))return t.buffer;if(F.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return F2e(t,this.formSerializer).toString();if((a=F.isFileList(t))||i.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return F_(a?{"files[]":t}:t,u&&new u,this.formSerializer)}}return s||n?(r.setContentType("application/json",!1),z2e(t)):t}],transformResponse:[function(t){const r=this.transitional||g0.transitional,i=r&&r.forcedJSONParsing,n=this.responseType==="json";if(F.isResponse(t)||F.isReadableStream(t))return t;if(t&&F.isString(t)&&(i&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?Se.from(a,Se.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:is.classes.FormData,Blob:is.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],e=>{g0.headers[e]={}});const V2e=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),U2e=e=>{const t={};let r,i,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),i=o.substring(n+1).trim(),!(!r||t[r]&&V2e[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t},e5=Symbol("internals");function cf(e){return e&&String(e).trim().toLowerCase()}function v1(e){return e===!1||e==null?e:F.isArray(e)?e.map(v1):String(e)}function G2e(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}const q2e=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function G2(e,t,r,i,n){if(F.isFunction(i))return i.call(this,t,r);if(n&&(t=r),!!F.isString(t)){if(F.isString(i))return t.indexOf(i)!==-1;if(F.isRegExp(i))return i.test(t)}}function B2e(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function H2e(e,t){const r=F.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(n,s,o){return this[i].call(this,t,n,s,o)},configurable:!0})})}class gi{constructor(t){t&&this.set(t)}set(t,r,i){const n=this;function s(a,u,c){const h=cf(u);if(!h)throw new Error("header name must be a non-empty string");const f=F.findKey(n,h);(!f||n[f]===void 0||c===!0||c===void 0&&n[f]!==!1)&&(n[f||u]=v1(a))}const o=(a,u)=>F.forEach(a,(c,h)=>s(c,h,u));if(F.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(F.isString(t)&&(t=t.trim())&&!q2e(t))o(U2e(t),r);else if(F.isHeaders(t))for(const[a,u]of t.entries())s(u,a,i);else t!=null&&s(r,t,i);return this}get(t,r){if(t=cf(t),t){const i=F.findKey(this,t);if(i){const n=this[i];if(!r)return n;if(r===!0)return G2e(n);if(F.isFunction(r))return r.call(this,n,i);if(F.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=cf(t),t){const i=F.findKey(this,t);return!!(i&&this[i]!==void 0&&(!r||G2(this,this[i],i,r)))}return!1}delete(t,r){const i=this;let n=!1;function s(o){if(o=cf(o),o){const a=F.findKey(i,o);a&&(!r||G2(i,i[a],a,r))&&(delete i[a],n=!0)}}return F.isArray(t)?t.forEach(s):s(t),n}clear(t){const r=Object.keys(this);let i=r.length,n=!1;for(;i--;){const s=r[i];(!t||G2(this,this[s],s,t,!0))&&(delete this[s],n=!0)}return n}normalize(t){const r=this,i={};return F.forEach(this,(n,s)=>{const o=F.findKey(i,s);if(o){r[o]=v1(n),delete r[s];return}const a=t?B2e(s):String(s).trim();a!==s&&delete r[s],r[a]=v1(n),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return F.forEach(this,(i,n)=>{i!=null&&i!==!1&&(r[n]=t&&F.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const i=new this(t);return r.forEach(n=>i.set(n)),i}static accessor(t){const i=(this[e5]=this[e5]={accessors:{}}).accessors,n=this.prototype;function s(o){const a=cf(o);i[a]||(H2e(n,o),i[a]=!0)}return F.isArray(t)?t.forEach(s):s(t),this}}gi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(gi.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[r]=i}}});F.freezeMethods(gi);function q2(e,t){const r=this||g0,i=t||r,n=gi.from(i.headers);let s=i.data;return F.forEach(e,function(a){s=a.call(r,s,n.normalize(),t?t.status:void 0)}),n.normalize(),s}function yB(e){return!!(e&&e.__CANCEL__)}function Ch(e,t,r){Se.call(this,e??"canceled",Se.ERR_CANCELED,t,r),this.name="CanceledError"}F.inherits(Ch,Se,{__CANCEL__:!0});function gB(e,t,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):t(new Se("Request failed with status code "+r.status,[Se.ERR_BAD_REQUEST,Se.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function W2e(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Z2e(e,t){e=e||10;const r=new Array(e),i=new Array(e);let n=0,s=0,o;return t=t!==void 0?t:1e3,function(u){const c=Date.now(),h=i[s];o||(o=c),r[n]=u,i[n]=c;let f=s,m=0;for(;f!==n;)m+=r[f++],f=f%e;if(n=(n+1)%e,n===s&&(s=(s+1)%e),c-o<t)return;const y=h&&c-h;return y?Math.round(m*1e3/y):void 0}}function J2e(e,t){let r=0;const i=1e3/t;let n=null;return function(){const o=this===!0,a=Date.now();if(o||a-r>i)return n&&(clearTimeout(n),n=null),r=a,e.apply(null,arguments);n||(n=setTimeout(()=>(n=null,r=Date.now(),e.apply(null,arguments)),i-(a-r)))}}const ib=(e,t,r=3)=>{let i=0;const n=Z2e(50,250);return J2e(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,u=o-i,c=n(u),h=o<=a;i=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:s,lengthComputable:a!=null};f[t?"download":"upload"]=!0,e(f)},r)},K2e=is.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let i;function n(s){let o=s;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=n(window.location.href),function(o){const a=F.isString(o)?n(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}(),Y2e=is.hasStandardBrowserEnv?{write(e,t,r,i,n,s){const o=[e+"="+encodeURIComponent(t)];F.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),F.isString(i)&&o.push("path="+i),F.isString(n)&&o.push("domain="+n),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Q2e(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function X2e(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function vB(e,t){return e&&!Q2e(t)?X2e(e,t):t}const t5=e=>e instanceof gi?{...e}:e;function Gc(e,t){t=t||{};const r={};function i(c,h,f){return F.isPlainObject(c)&&F.isPlainObject(h)?F.merge.call({caseless:f},c,h):F.isPlainObject(h)?F.merge({},h):F.isArray(h)?h.slice():h}function n(c,h,f){if(F.isUndefined(h)){if(!F.isUndefined(c))return i(void 0,c,f)}else return i(c,h,f)}function s(c,h){if(!F.isUndefined(h))return i(void 0,h)}function o(c,h){if(F.isUndefined(h)){if(!F.isUndefined(c))return i(void 0,c)}else return i(void 0,h)}function a(c,h,f){if(f in t)return i(c,h);if(f in e)return i(void 0,c)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h)=>n(t5(c),t5(h),!0)};return F.forEach(Object.keys(Object.assign({},e,t)),function(h){const f=u[h]||n,m=f(e[h],t[h],h);F.isUndefined(m)&&f!==a||(r[h]=m)}),r}const wB=e=>{const t=Gc({},e);let{data:r,withXSRFToken:i,xsrfHeaderName:n,xsrfCookieName:s,headers:o,auth:a}=t;t.headers=o=gi.from(o),t.url=hB(vB(t.baseURL,t.url),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(F.isFormData(r)){if(is.hasStandardBrowserEnv||is.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[c,...h]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(is.hasStandardBrowserEnv&&(i&&F.isFunction(i)&&(i=i(t)),i||i!==!1&&K2e(t.url))){const c=n&&s&&Y2e.read(s);c&&o.set(n,c)}return t},e$e=typeof XMLHttpRequest<"u",t$e=e$e&&function(e){return new Promise(function(r,i){const n=wB(e);let s=n.data;const o=gi.from(n.headers).normalize();let{responseType:a}=n,u;function c(){n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let h=new XMLHttpRequest;h.open(n.method.toUpperCase(),n.url,!0),h.timeout=n.timeout;function f(){if(!h)return;const y=gi.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),v={data:!a||a==="text"||a==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:y,config:e,request:h};gB(function(b){r(b),c()},function(b){i(b),c()},v),h=null}"onloadend"in h?h.onloadend=f:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(f)},h.onabort=function(){h&&(i(new Se("Request aborted",Se.ECONNABORTED,n,h)),h=null)},h.onerror=function(){i(new Se("Network Error",Se.ERR_NETWORK,n,h)),h=null},h.ontimeout=function(){let g=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const v=n.transitional||fB;n.timeoutErrorMessage&&(g=n.timeoutErrorMessage),i(new Se(g,v.clarifyTimeoutError?Se.ETIMEDOUT:Se.ECONNABORTED,n,h)),h=null},s===void 0&&o.setContentType(null),"setRequestHeader"in h&&F.forEach(o.toJSON(),function(g,v){h.setRequestHeader(v,g)}),F.isUndefined(n.withCredentials)||(h.withCredentials=!!n.withCredentials),a&&a!=="json"&&(h.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&h.addEventListener("progress",ib(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",ib(n.onUploadProgress)),(n.cancelToken||n.signal)&&(u=y=>{h&&(i(!y||y.type?new Ch(null,e,h):y),h.abort(),h=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const m=W2e(n.url);if(m&&is.protocols.indexOf(m)===-1){i(new Se("Unsupported protocol "+m+":",Se.ERR_BAD_REQUEST,e));return}h.send(s||null)})},r$e=(e,t)=>{let r=new AbortController,i;const n=function(u){if(!i){i=!0,o();const c=u instanceof Error?u:this.reason;r.abort(c instanceof Se?c:new Ch(c instanceof Error?c.message:c))}};let s=t&&setTimeout(()=>{n(new Se(`timeout ${t} of ms exceeded`,Se.ETIMEDOUT))},t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(u=>{u&&(u.removeEventListener?u.removeEventListener("abort",n):u.unsubscribe(n))}),e=null)};e.forEach(u=>u&&u.addEventListener&&u.addEventListener("abort",n));const{signal:a}=r;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]},i$e=function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let i=0,n;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},n$e=async function*(e,t,r){for await(const i of e)yield*i$e(ArrayBuffer.isView(i)?i:await r(String(i)),t)},r5=(e,t,r,i,n)=>{const s=n$e(e,t,n);let o=0;return new ReadableStream({type:"bytes",async pull(a){const{done:u,value:c}=await s.next();if(u){a.close(),i();return}let h=c.byteLength;r&&r(o+=h),a.enqueue(new Uint8Array(c))},cancel(a){return i(a),s.return()}},{highWaterMark:2})},i5=(e,t)=>{const r=e!=null;return i=>setTimeout(()=>t({lengthComputable:r,total:e,loaded:i}))},D_=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",bB=D_&&typeof ReadableStream=="function",c3=D_&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),s$e=bB&&(()=>{let e=!1;const t=new Request(is.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),n5=64*1024,d3=bB&&!!(()=>{try{return F.isReadableStream(new Response("").body)}catch{}})(),nb={stream:d3&&(e=>e.body)};D_&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!nb[t]&&(nb[t]=F.isFunction(e[t])?r=>r[t]():(r,i)=>{throw new Se(`Response type '${t}' is not supported`,Se.ERR_NOT_SUPPORT,i)})})})(new Response);const o$e=async e=>{if(e==null)return 0;if(F.isBlob(e))return e.size;if(F.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(F.isArrayBufferView(e))return e.byteLength;if(F.isURLSearchParams(e)&&(e=e+""),F.isString(e))return(await c3(e)).byteLength},a$e=async(e,t)=>{const r=F.toFiniteNumber(e.getContentLength());return r??o$e(t)},l$e=D_&&(async e=>{let{url:t,method:r,data:i,signal:n,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:u,responseType:c,headers:h,withCredentials:f="same-origin",fetchOptions:m}=wB(e);c=c?(c+"").toLowerCase():"text";let[y,g]=n||s||o?r$e([n,s],o):[],v,w;const b=()=>{!v&&setTimeout(()=>{y&&y.unsubscribe()}),v=!0};let _;try{if(u&&s$e&&r!=="get"&&r!=="head"&&(_=await a$e(h,i))!==0){let I=new Request(t,{method:"POST",body:i,duplex:"half"}),C;F.isFormData(i)&&(C=I.headers.get("content-type"))&&h.setContentType(C),I.body&&(i=r5(I.body,n5,i5(_,ib(u)),null,c3))}F.isString(f)||(f=f?"cors":"omit"),w=new Request(t,{...m,signal:y,method:r.toUpperCase(),headers:h.normalize().toJSON(),body:i,duplex:"half",withCredentials:f});let $=await fetch(w);const T=d3&&(c==="stream"||c==="response");if(d3&&(a||T)){const I={};["status","statusText","headers"].forEach(L=>{I[L]=$[L]});const C=F.toFiniteNumber($.headers.get("content-length"));$=new Response(r5($.body,n5,a&&i5(C,ib(a,!0)),T&&b,c3),I)}c=c||"text";let E=await nb[F.findKey(nb,c)||"text"]($,e);return!T&&b(),g&&g(),await new Promise((I,C)=>{gB(I,C,{data:E,headers:gi.from($.headers),status:$.status,statusText:$.statusText,config:e,request:w})})}catch($){throw b(),$&&$.name==="TypeError"&&/fetch/i.test($.message)?Object.assign(new Se("Network Error",Se.ERR_NETWORK,e,w),{cause:$.cause||$}):Se.from($,$&&$.code,e,w)}}),p3={http:T2e,xhr:t$e,fetch:l$e};F.forEach(p3,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const s5=e=>`- ${e}`,u$e=e=>F.isFunction(e)||e===null||e===!1,_B={getAdapter:e=>{e=F.isArray(e)?e:[e];const{length:t}=e;let r,i;const n={};for(let s=0;s<t;s++){r=e[s];let o;if(i=r,!u$e(r)&&(i=p3[(o=String(r)).toLowerCase()],i===void 0))throw new Se(`Unknown adapter '${o}'`);if(i)break;n[o||"#"+s]=i}if(!i){const s=Object.entries(n).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(s5).join(`
`):" "+s5(s[0]):"as no adapter specified";throw new Se("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:p3};function B2(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ch(null,e)}function o5(e){return B2(e),e.headers=gi.from(e.headers),e.data=q2.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_B.getAdapter(e.adapter||g0.adapter)(e).then(function(i){return B2(e),i.data=q2.call(e,e.transformResponse,i),i.headers=gi.from(i.headers),i},function(i){return yB(i)||(B2(e),i&&i.response&&(i.response.data=q2.call(e,e.transformResponse,i.response),i.response.headers=gi.from(i.response.headers))),Promise.reject(i)})}const SB="1.7.2",ZO={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ZO[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const a5={};ZO.transitional=function(t,r,i){function n(s,o){return"[Axios v"+SB+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(t===!1)throw new Se(n(o," has been removed"+(r?" in "+r:"")),Se.ERR_DEPRECATED);return r&&!a5[o]&&(a5[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,o,a):!0}};function c$e(e,t,r){if(typeof e!="object")throw new Se("options must be an object",Se.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let n=i.length;for(;n-- >0;){const s=i[n],o=t[s];if(o){const a=e[s],u=a===void 0||o(a,s,e);if(u!==!0)throw new Se("option "+s+" must be "+u,Se.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Se("Unknown option "+s,Se.ERR_BAD_OPTION)}}const h3={assertOptions:c$e,validators:ZO},va=h3.validators;class bc{constructor(t){this.defaults=t,this.interceptors={request:new XN,response:new XN}}async request(t,r){try{return await this._request(t,r)}catch(i){if(i instanceof Error){let n;Error.captureStackTrace?Error.captureStackTrace(n={}):n=new Error;const s=n.stack?n.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Gc(this.defaults,r);const{transitional:i,paramsSerializer:n,headers:s}=r;i!==void 0&&h3.assertOptions(i,{silentJSONParsing:va.transitional(va.boolean),forcedJSONParsing:va.transitional(va.boolean),clarifyTimeoutError:va.transitional(va.boolean)},!1),n!=null&&(F.isFunction(n)?r.paramsSerializer={serialize:n}:h3.assertOptions(n,{encode:va.function,serialize:va.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&F.merge(s.common,s[r.method]);s&&F.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),r.headers=gi.concat(o,s);const a=[];let u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(u=u&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let h,f=0,m;if(!u){const g=[o5.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),m=g.length,h=Promise.resolve(r);f<m;)h=h.then(g[f++],g[f++]);return h}m=a.length;let y=r;for(f=0;f<m;){const g=a[f++],v=a[f++];try{y=g(y)}catch(w){v.call(this,w);break}}try{h=o5.call(this,y)}catch(g){return Promise.reject(g)}for(f=0,m=c.length;f<m;)h=h.then(c[f++],c[f++]);return h}getUri(t){t=Gc(this.defaults,t);const r=vB(t.baseURL,t.url);return hB(r,t.params,t.paramsSerializer)}}F.forEach(["delete","get","head","options"],function(t){bc.prototype[t]=function(r,i){return this.request(Gc(i||{},{method:t,url:r,data:(i||{}).data}))}});F.forEach(["post","put","patch"],function(t){function r(i){return function(s,o,a){return this.request(Gc(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}bc.prototype[t]=r(),bc.prototype[t+"Form"]=r(!0)});class JO{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const i=this;this.promise.then(n=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](n);i._listeners=null}),this.promise.then=n=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(n);return o.cancel=function(){i.unsubscribe(s)},o},t(function(s,o,a){i.reason||(i.reason=new Ch(s,o,a),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new JO(function(n){t=n}),cancel:t}}}function d$e(e){return function(r){return e.apply(null,r)}}function p$e(e){return F.isObject(e)&&e.isAxiosError===!0}const f3={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(f3).forEach(([e,t])=>{f3[t]=e});function $B(e){const t=new bc(e),r=tB(bc.prototype.request,t);return F.extend(r,bc.prototype,t,{allOwnKeys:!0}),F.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return $B(Gc(e,n))},r}const jt=$B(g0);jt.Axios=bc;jt.CanceledError=Ch;jt.CancelToken=JO;jt.isCancel=yB;jt.VERSION=SB;jt.toFormData=F_;jt.AxiosError=Se;jt.Cancel=jt.CanceledError;jt.all=function(t){return Promise.all(t)};jt.spread=d$e;jt.isAxiosError=p$e;jt.mergeConfig=Gc;jt.AxiosHeaders=gi;jt.formToJSON=e=>mB(F.isHTMLForm(e)?new FormData(e):e);jt.getAdapter=_B.getAdapter;jt.HttpStatusCode=f3;jt.default=jt;const l5=()=>{const e=de.useRef(void 0),t=de.useRef(null),r=de.useRef(null),i=de.useRef(null),n=de.useRef(!1),[s,o]=de.useState([]);let{latlong:a}=xJ();const u=()=>{if(n.current)return;n.current=!0;const m=new d9({basemap:"hybrid"}),y=new mge({container:e.current,map:m,center:[31.6744,30.02],zoom:12});y.when(()=>{i.current=y,t.current=new F4,r.current=new F4,m.add(t.current),m.add(r.current);const g=new eB({url:"https://arcgis.itechs-eg.com/server/rest/services/WFM/Technician_Location_Task_Detail/MapServer/4"}),v=g.createQuery();v.where="1=1",v.outFields=["*"],g.queryFeatures(v).then(w=>{const b={};w.features.forEach(_=>{const $=_.attributes.user_id,T=_.uid;(!b[$]||T>b[$].uid)&&(b[$]=_)}),c()}).catch(w=>{console.error("Error querying features:",w)})})},c=()=>{if(console.log("calling addPins"),t.current&&a){t.current.removeAll(),r.current.removeAll();const m=a.split(",");if(m.length===4){const y=new ts({geometry:{type:"point",longitude:parseFloat(m[1]),latitude:parseFloat(m[0]),spatialReference:{wkid:4326}},symbol:{type:"simple-marker",color:"red",size:"12px"}});t.current.add(y);const g=new ts({geometry:{type:"point",longitude:parseFloat(m[3]),latitude:parseFloat(m[2]),spatialReference:{wkid:4326}},symbol:{type:"simple-marker",color:"red",size:"12px"}});t.current.add(g),o([y,g]),h({long:parseFloat(m[1]),lat:parseFloat(m[0])},{long:parseFloat(m[3]),lat:parseFloat(m[2])})}else console.error("Invalid latlong parameter")}},h=async(m,y)=>{const g="5b3ce3597851110001cf62485957637fb4de40aab06043d6f78f646e",v="https://api.openrouteservice.org/v2/directions/driving-car";try{const b=(await jt.get(v,{params:{api_key:g,start:`${m.long},${m.lat}`,end:`${y.long},${y.lat}`}})).data.features[0].geometry.coordinates;console.log("Route coordinates:",b);const _=new pn({paths:b.map(T=>[T[0],T[1]]),spatialReference:{wkid:4326}}),$=new ts({geometry:_,symbol:{type:"simple-line",color:"black",width:3}});r.current.add($),console.log("Route graphic added:",$)}catch(w){console.error("Error fetching route:",w)}};de.useEffect(()=>{u()},[a]);const f=m=>{i.current.goTo({target:m,zoom:15})};return Br.jsxs("div",{children:[Br.jsx("p",{children:a}),Br.jsx("div",{ref:e,style:{width:"100%",height:"650px"}}),Br.jsxs("div",{className:"bg-danger-subtle",style:{width:"400px",height:"12px"},children:[Br.jsx("p",{children:"List of Features:"}),Br.jsx("div",{children:s==null?void 0:s.map((m,y)=>{var g,v;return Br.jsxs("div",{children:[`${((g=m.attributes)==null?void 0:g.first_name)??"Start"} ${((v=m.attributes)==null?void 0:v.last_name)??"End"}`," ",Br.jsx("button",{onClick:()=>f(m==null?void 0:m.geometry),children:"Zoom To"})]},y)})})]})]})},h$e=()=>Br.jsxs(FJ,{children:[Br.jsx(z$,{path:"/",element:Br.jsx(l5,{})}),Br.jsx(z$,{path:"/:latlong?",element:Br.jsx(l5,{})})]});eJ.render(Br.jsx(zJ,{basename:"/ArcGIS-map-WebView-webApp",children:Br.jsx(h$e,{})}),document.getElementById("root"));export{sQ as $,ts as A,tpe as B,Il as C,y6 as D,Nc as E,B$e as F,Wt as G,my as H,R as I,tz as J,Jxe as K,Wxe as L,qv as M,zEe as N,Mc as O,Jr as P,nU as Q,sO as R,kM as S,sh as T,Che as U,te as V,sU as W,mi as X,Y7 as Y,dy as Z,J as _,pSe as a,Ul as a$,dt as a0,MU as a1,ce as a2,iz as a3,Ep as a4,nz as a5,rz as a6,lL as a7,rEe as a8,pTe as a9,ea as aA,Eke as aB,Mke as aC,ji as aD,Fee as aE,Lee as aF,z3e as aG,ihe as aH,OMe as aI,jb as aJ,Oc as aK,Zr as aL,Zve as aM,Kve as aN,Yve as aO,i1e as aP,l1e as aQ,KG as aR,ZG as aS,JG as aT,a1e as aU,h1e as aV,f1e as aW,d8 as aX,_te as aY,Ute as aZ,Ex as a_,nj as aa,ss as ab,ej as ac,ci as ad,lw as ae,qs as af,gg as ag,STe as ah,G7 as ai,pie as aj,ac as ak,Hc as al,Vme as am,xm as an,wi as ao,Ar as ap,Pe as aq,c6 as ar,ge as as,Ec as at,Rte as au,Sve as av,$ve as aw,xve as ax,k as ay,Hpe as az,eme as b,q3e as b$,Yy as b0,Hb as b1,As as b2,_e as b3,Xo as b4,pn as b5,Yb as b6,Be as b7,yI as b8,Mb as b9,ve as bA,I9 as bB,wS as bC,jk as bD,uL as bE,xTe as bF,ZMe as bG,iEe as bH,le as bI,Hle as bJ,Q1 as bK,U$ as bL,Ume as bM,DD as bN,He as bO,j as bP,Dde as bQ,mxe as bR,Hxe as bS,OSe as bT,Jq as bU,G as bV,dae as bW,DC as bX,Kp as bY,gxe as bZ,FU as b_,qTe as ba,yk as bb,Lue as bc,IMe as bd,kMe as be,MTe as bf,ETe as bg,OTe as bh,kTe as bi,Al as bj,ITe as bk,Zc as bl,Rxe as bm,OS as bn,TMe as bo,c_ as bp,xe as bq,Bl as br,Nl as bs,Hl as bt,Ws as bu,px as bv,it as bw,dx as bx,fx as by,gw as bz,vc as c,wV as c$,B3e as c0,W3e as c1,e0e as c2,Gye as c3,Ni as c4,E$e as c5,Dwe as c6,fh as c7,IQ as c8,jwe as c9,SX as cA,GI as cB,qI as cC,$X as cD,zb as cE,Vb as cF,t0 as cG,zhe as cH,tTe as cI,Mhe as cJ,Ete as cK,Dxe as cL,Xee as cM,_8 as cN,zre as cO,lA as cP,T6 as cQ,M6 as cR,b8 as cS,E6 as cT,VG as cU,rde as cV,Sue as cW,EMe as cX,jI as cY,ak as cZ,oue as c_,fke as ca,bIe as cb,pL as cc,Fm as cd,YT as ce,yke as cf,mke as cg,jEe as ch,Wpe as ci,Cb as cj,bX as ck,XIe as cl,ike as cm,dR as cn,Nue as co,Dc as cp,Xte as cq,nke as cr,Ee as cs,ne as ct,ra as cu,tEe as cv,bTe as cw,Zxe as cx,JJ as cy,$$e as cz,xh as d,Nb as d$,Fue as d0,CMe as d1,Rue as d2,PMe as d3,Ai as d4,Xxe as d5,cn as d6,Ub as d7,Kee as d8,ute as d9,Sq as dA,Fbe as dB,Rbe as dC,Abe as dD,yr as dE,Gi as dF,n0 as dG,Ks as dH,Yl as dI,bk as dJ,_be as dK,Sbe as dL,bbe as dM,p8 as dN,Mte as dO,mte as dP,yte as dQ,Fte as dR,Lbe as dS,Lj as dT,Eb as dU,JI as dV,Ky as dW,hy as dX,ul as dY,Li as dZ,_ee as d_,n8 as da,c8 as db,a8 as dc,cte as dd,ht as de,Sn as df,P$e as dg,$Q as dh,Jp as di,RI as dj,lK as dk,Tk as dl,Wk as dm,Aie as dn,REe as dp,lO as dq,q$e as dr,wI as ds,Wy as dt,vk as du,_G as dv,SSe as dw,sSe as dx,fSe as dy,SG as dz,De as e,pr as e$,See as e0,Wq as e1,hxe as e2,qxe as e3,Z1 as e4,SI as e5,Z as e6,xSe as e7,x6 as e8,Hs as e9,koe as eA,m$e as eB,Vve as eC,YMe as eD,nEe as eE,ia as eF,Vl as eG,lp as eH,hc as eI,P3e as eJ,bI as eK,Uy as eL,W$ as eM,Pl as eN,n4 as eO,oy as eP,LQ as eQ,kI as eR,vt as eS,A$e as eT,Qo as eU,By as eV,rr as eW,HI as eX,see as eY,Ibe as eZ,Vy as e_,v6 as ea,kSe as eb,kw as ec,Ve as ed,$h as ee,eB as ef,yTe as eg,Xoe as eh,_Te as ei,fTe as ej,Cr as ek,F4 as el,PA as em,Ya as en,je as eo,cy as ep,$7 as eq,dh as er,dxe as es,bxe as et,jg as eu,TN as ev,U3e as ew,Z3e as ex,G3e as ey,Cl as ez,hSe as f,Gwe as f$,oTe as f0,Ne as f1,nae as f2,wv as f3,Lxe as f4,vxe as f5,Yo as f6,l_e as f7,ybe as f8,Tke as f9,ql as fA,kR as fB,ZTe as fC,JTe as fD,P as fE,fre as fF,Poe as fG,Kb as fH,Wb as fI,_$e as fJ,Ite as fK,Pt as fL,Kpe as fM,cae as fN,Lc as fO,uSe as fP,iSe as fQ,Pbe as fR,rL as fS,pV as fT,CSe as fU,NO as fV,C_ as fW,j2 as fX,WE as fY,LO as fZ,P_ as f_,xbe as fa,xke as fb,$be as fc,BJ as fd,_j as fe,Bn as ff,bj as fg,x9 as fh,vI as fi,Ahe as fj,NC as fk,zS as fl,sxe as fm,hTe as fn,i8 as fo,Ihe as fp,Ohe as fq,iU as fr,ap as fs,Jx as ft,wy as fu,jre as fv,Qxe as fw,wte as fx,ure as fy,Zi as fz,wC as g,Z1e as g$,Cbe as g0,qO as g1,TSe as g2,Kse as g3,Jse as g4,sie as g5,SA as g6,mp as g7,Yr as g8,un as g9,Bbe as gA,Hbe as gB,Wbe as gC,Jbe as gD,Kbe as gE,Ybe as gF,Qbe as gG,Xbe as gH,e_e as gI,t_e as gJ,r_e as gK,i_e as gL,Qq as gM,Nbe as gN,FO as gO,KJ as gP,tte as gQ,rte as gR,ite as gS,xre as gT,Yee as gU,Tre as gV,ww as gW,AIe as gX,W1e as gY,LIe as gZ,RIe as g_,rk as ga,I$e as gb,AA as gc,Xq as gd,Tp as ge,kQ as gf,Gs as gg,Qn as gh,Ay as gi,jO as gj,$G as gk,jbe as gl,Dbe as gm,ph as gn,n_e as go,mbe as gp,na as gq,CO as gr,zG as gs,Pve as gt,Ove as gu,kve as gv,k_e as gw,Ebe as gx,u_e as gy,jde as gz,$b as h,yre as h$,dEe as h0,Ixe as h1,ete as h2,vn as h3,S$e as h4,K$e as h5,Ko as h6,yn as h7,Ot as h8,rTe as h9,Xj as hA,i6 as hB,lae as hC,Uve as hD,jke as hE,jq as hF,$I as hG,Td as hH,qbe as hI,Hke as hJ,m_e as hK,y_e as hL,fN as hM,me as hN,hr as hO,LEe as hP,eQ as hQ,vTe as hR,Db as hS,Sie as hT,k_ as hU,mh as hV,zi as hW,R$e as hX,Yxe as hY,kh as hZ,l8 as h_,_m as ha,hte as hb,Vte as hc,Gte as hd,Dhe as he,c1e as hf,wX as hg,b9 as hh,O_ as hi,MX as hj,Uw as hk,ek as hl,vte as hm,fte as hn,s8 as ho,Y1 as hp,Pw as hq,u_ as hr,Jk as hs,Vde as ht,Ude as hu,zv as hv,Zq as hw,Pb as hx,nV as hy,p_e as hz,dSe as i,$Se as i$,xw as i0,eTe as i1,u8 as i2,Ste as i3,VK as i4,H$e as i5,z7 as i6,tU as i7,xy as i8,Kk as i9,gIe as iA,hq as iB,Fb as iC,yc as iD,fS as iE,$_ as iF,S_ as iG,mO as iH,di as iI,Tye as iJ,YJ as iK,pxe as iL,nQ as iM,Lb as iN,wxe as iO,H3e as iP,Jc as iQ,jc as iR,pI as iS,hI as iT,oV as iU,Rl as iV,Dge as iW,jge as iX,Obe as iY,B_e as iZ,lSe as i_,EM as ia,C7 as ib,a0 as ic,rxe as id,Ie as ie,$n as ig,qx as ih,Qse as ii,ln as ij,E9 as ik,uK as il,zk as im,JMe as io,WMe as ip,S as iq,Axe as ir,V3e as is,mie as it,fie as iu,lTe as iv,wTe as iw,Hw as ix,vIe as iy,wIe as iz,bi as j,uTe as j$,HD as j0,WD as j1,v$e as j2,Gb as j3,nv as j4,TTe as j5,A6 as j6,ree as j7,uee as j8,Jy as j9,cxe as jA,I6 as jB,KC as jC,G6 as jD,yye as jE,_xe as jF,bt as jG,Lke as jH,EIe as jI,Gve as jJ,khe as jK,gpe as jL,ppe as jM,o0 as jN,Kxe as jO,XI as jP,wk as jQ,Wc as jR,fxe as jS,wj as jT,vMe as jU,Lr as jV,gc as jW,Dp as jX,Xge as jY,QIe as jZ,X8 as j_,jxe as ja,Nte as jb,Que as jc,rb as jd,hke as je,wMe as jf,d_e as jg,Tl as jh,LN as ji,fy as jj,wG as jk,Xre as jl,eie as jm,aU as jn,cIe as jo,cX as jp,xj as jq,Q$e as jr,Y$e as js,QK as jt,YK as ju,b$e as jv,ZJ as jw,gTe as jx,BD as jy,s6 as jz,Fl as k,fve as k$,gj as k0,pt as k1,FC as k2,Dve as k3,_Ie as k4,kb as k5,Sce as k6,hd as k7,lde as k8,Rhe as k9,CI as kA,Mre as kB,$re as kC,bte as kD,Sre as kE,ij as kF,$l as kG,Xn as kH,b_ as kI,nTe as kJ,J7 as kK,Q7 as kL,lhe as kM,VEe as kN,ghe as kO,Np as kP,UEe as kQ,My as kR,Qhe as kS,Iwe as kT,Ewe as kU,Ih as kV,SO as kW,Hge as kX,Wge as kY,xO as kZ,IG as k_,OIe as ka,IO as kb,kIe as kc,Yu as kd,Hr as ke,T$e as kf,M$e as kg,x$e as kh,_Q as ki,gre as kj,lre as kk,cre as kl,jK as km,qD as kn,Ike as ko,dX as kp,kV as kq,kke as kr,rme as ks,zde as kt,oK as ku,pee as kv,Cxe as kw,N8 as kx,$ce as ky,KMe as kz,Vke as l,R3e as l$,RG as l0,eb as l1,xG as l2,zm as l3,pEe as l4,hEe as l5,fEe as l6,Yn as l7,IIe as l8,ate as l9,Ppe as lA,j7 as lB,Jme as lC,bx as lD,iq as lE,PIe as lF,YIe as lG,jIe as lH,FIe as lI,Q1e as lJ,KIe as lK,DIe as lL,X4 as lM,eN as lN,tN as lO,BIe as lP,qIe as lQ,HIe as lR,WIe as lS,K1e as lT,kO as lU,hE as lV,Qk as lW,Go as lX,CIe as lY,PU as lZ,Zp as l_,bf as la,PTe as lb,o8 as lc,rue as ld,Xle as le,R_e as lf,Bs as lg,Fc as lh,sTe as li,JIe as lj,Rs as lk,Ope as ll,v_ as lm,Bt as ln,wO as lo,rke as lp,kbe as lq,MMe as lr,_Me as ls,$Me as lt,SMe as lu,xMe as lv,Kr as lw,AMe as lx,_C as ly,bMe as lz,a3e as m,QMe as m$,yxe as m0,f$e as m1,UX as m2,VX as m3,Nxe as m4,ade as m5,TY as m6,MA as m7,zTe as m8,coe as m9,Nk as mA,tce as mB,rce as mC,oge as mD,lie as mE,Y1e as mF,aTe as mG,$Te as mH,xie as mI,cTe as mJ,die as mK,dTe as mL,sEe as mM,The as mN,NIe as mO,ZIe as mP,UIe as mQ,GIe as mR,h_ as mS,mTe as mT,zIe as mU,VIe as mV,ife as mW,nfe as mX,zte as mY,FQ as mZ,g$e as m_,uke as ma,lke as mb,XL as mc,vx as md,Bue as me,GTe as mf,Vs as mg,rMe as mh,tMe as mi,ule as mj,lle as mk,Ak as ml,l1 as mm,y$e as mn,Zue as mo,g7 as mp,xye as mq,Wue as mr,jw as ms,Vw as mt,_y as mu,k$e as mv,Y3e as mw,Zy as mx,ae as my,ZR as mz,z as n,XMe as n0,Ure as n1,Vre as n2,rpe as n3,HJ as n4,eEe as n5,KTe as n6,QTe as n7,mIe as n8,Cke as n9,Wke as na,l as o,x as p,he as q,u3e as r,N as s,kq as t,zke as u,r0 as v,gke as w,Oh as x,d as y,nt as z};
